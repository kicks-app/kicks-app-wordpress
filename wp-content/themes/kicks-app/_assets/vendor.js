!function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n=window.webpackJsonp;window.webpackJsonp=function(r,s){for(var a,l,h=0,f=[];h<r.length;h++)l=r[h],o[l]&&f.push.apply(f,o[l]),o[l]=0;for(a in s)t[a]=s[a];for(n&&n(r,s);f.length;)f.shift().call(null,e);if(s[0])return i[0]=0,e(0)};var i={},o={1:0};e.e=function(t,n){if(0===o[t])return n.call(null,e);if(void 0!==o[t])o[t].push(n);else{o[t]=[n];var i=document.getElementsByTagName("head")[0],r=document.createElement("script");r.type="text/javascript",r.charset="utf-8",r.async=!0,r.src=e.p+""+t+".app.js",i.appendChild(r)}},e.m=t,e.c=i,e.p=""}([,,function(t,e,n){(function(e){t.exports=e.Tether=n(3)}).call(e,function(){return this}())},function(t,e,n){(function(e){t.exports=e.$=n(4)}).call(e,function(){return this}())},function(t,e,n){var i,o;/*! tether 1.3.7 */
!function(r,s){i=s,o="function"==typeof i?i.call(e,n,e,t):i,!(void 0!==o&&(t.exports=o))}(this,function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t){var e=t.getBoundingClientRect(),n={};for(var i in e)n[i]=e[i];if(t.ownerDocument!==document){var r=t.ownerDocument.defaultView.frameElement;if(r){var s=o(r);n.top+=s.top,n.bottom+=s.top,n.left+=s.left,n.right+=s.left}}return n}function r(t){var e=getComputedStyle(t)||{},n=e.position,i=[];if("fixed"===n)return[t];for(var o=t;(o=o.parentNode)&&o&&1===o.nodeType;){var r=void 0;try{r=getComputedStyle(o)}catch(s){}if("undefined"==typeof r||null===r)return i.push(o),i;var a=r,l=a.overflow,h=a.overflowX,f=a.overflowY;/(auto|scroll)/.test(l+f+h)&&("absolute"!==n||["relative","absolute","fixed"].indexOf(r.position)>=0)&&i.push(o)}return i.push(t.ownerDocument.body),t.ownerDocument!==document&&i.push(t.ownerDocument.defaultView),i}function s(){b&&document.body.removeChild(b),b=null}function a(t){var e=void 0;t===document?(e=document,t=document.documentElement):e=t.ownerDocument;var n=e.documentElement,i=o(t),r=w();return i.top-=r.top,i.left-=r.left,"undefined"==typeof i.width&&(i.width=document.body.scrollWidth-i.left-i.right),"undefined"==typeof i.height&&(i.height=document.body.scrollHeight-i.top-i.bottom),i.top=i.top-n.clientTop,i.left=i.left-n.clientLeft,i.right=e.body.clientWidth-i.width-i.left,i.bottom=e.body.clientHeight-i.height-i.top,i}function l(t){return t.offsetParent||document.documentElement}function h(){if(S)return S;var t=document.createElement("div");t.style.width="100%",t.style.height="200px";var e=document.createElement("div");f(e.style,{position:"absolute",top:0,left:0,pointerEvents:"none",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),e.appendChild(t),document.body.appendChild(e);var n=t.offsetWidth;e.style.overflow="scroll";var i=t.offsetWidth;n===i&&(i=e.clientWidth),document.body.removeChild(e);var o=n-i;return S={width:o,height:o}}function f(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],e=[];return Array.prototype.push.apply(e,arguments),e.slice(1).forEach(function(e){if(e)for(var n in e)({}).hasOwnProperty.call(e,n)&&(t[n]=e[n])}),t}function u(t,e){if("undefined"!=typeof t.classList)e.split(" ").forEach(function(e){e.trim()&&t.classList.remove(e)});else{var n=new RegExp("(^| )"+e.split(" ").join("|")+"( |$)","gi"),i=p(t).replace(n," ");g(t,i)}}function c(t,e){if("undefined"!=typeof t.classList)e.split(" ").forEach(function(e){e.trim()&&t.classList.add(e)});else{u(t,e);var n=p(t)+(" "+e);g(t,n)}}function d(t,e){if("undefined"!=typeof t.classList)return t.classList.contains(e);var n=p(t);return new RegExp("(^| )"+e+"( |$)","gi").test(n)}function p(t){return t.className instanceof t.ownerDocument.defaultView.SVGAnimatedString?t.className.baseVal:t.className}function g(t,e){t.setAttribute("class",e)}function v(t,e,n){n.forEach(function(n){e.indexOf(n)===-1&&d(t,n)&&u(t,n)}),e.forEach(function(e){d(t,e)||c(t,e)})}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function m(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function _(t,e){var n=arguments.length<=2||void 0===arguments[2]?1:arguments[2];return t+n>=e&&e>=t-n}function y(){return"undefined"!=typeof performance&&"undefined"!=typeof performance.now?performance.now():+new Date}function E(){for(var t={top:0,left:0},e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];return n.forEach(function(e){var n=e.top,i=e.left;"string"==typeof n&&(n=parseFloat(n,10)),"string"==typeof i&&(i=parseFloat(i,10)),t.top+=n,t.left+=i}),t}function T(t,e){return"string"==typeof t.left&&t.left.indexOf("%")!==-1&&(t.left=parseFloat(t.left,10)/100*e.width),"string"==typeof t.top&&t.top.indexOf("%")!==-1&&(t.top=parseFloat(t.top,10)/100*e.height),t}function C(t,e){return"scrollParent"===e?e=t.scrollParents[0]:"window"===e&&(e=[pageXOffset,pageYOffset,innerWidth+pageXOffset,innerHeight+pageYOffset]),e===document&&(e=e.documentElement),"undefined"!=typeof e.nodeType&&!function(){var t=e,n=a(e),i=n,o=getComputedStyle(e);if(e=[i.left,i.top,n.width+i.left,n.height+i.top],t.ownerDocument!==document){var r=t.ownerDocument.defaultView;e[0]+=r.pageXOffset,e[1]+=r.pageYOffset,e[2]+=r.pageXOffset,e[3]+=r.pageYOffset}z.forEach(function(t,n){t=t[0].toUpperCase()+t.substr(1),"Top"===t||"Left"===t?e[n]+=parseFloat(o["border"+t+"Width"]):e[n]-=parseFloat(o["border"+t+"Width"])})}(),e}var I=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),A=void 0;"undefined"==typeof A&&(A={modules:[]});var b=null,O=function(){var t=0;return function(){return++t}}(),D={},w=function(){var t=b;t||(t=document.createElement("div"),t.setAttribute("data-tether-id",O()),f(t.style,{top:0,left:0,position:"absolute"}),document.body.appendChild(t),b=t);var e=t.getAttribute("data-tether-id");return"undefined"==typeof D[e]&&(D[e]=o(t),k(function(){delete D[e]})),D[e]},S=null,N=[],k=function(t){N.push(t)},L=function(){for(var t=void 0;t=N.pop();)t()},P=function(){function t(){i(this,t)}return I(t,[{key:"on",value:function(t,e,n){var i=!(arguments.length<=3||void 0===arguments[3])&&arguments[3];"undefined"==typeof this.bindings&&(this.bindings={}),"undefined"==typeof this.bindings[t]&&(this.bindings[t]=[]),this.bindings[t].push({handler:e,ctx:n,once:i})}},{key:"once",value:function(t,e,n){this.on(t,e,n,!0)}},{key:"off",value:function(t,e){if("undefined"!=typeof this.bindings&&"undefined"!=typeof this.bindings[t])if("undefined"==typeof e)delete this.bindings[t];else for(var n=0;n<this.bindings[t].length;)this.bindings[t][n].handler===e?this.bindings[t].splice(n,1):++n}},{key:"trigger",value:function(t){if("undefined"!=typeof this.bindings&&this.bindings[t]){for(var e=0,n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];for(;e<this.bindings[t].length;){var r=this.bindings[t][e],s=r.handler,a=r.ctx,l=r.once,h=a;"undefined"==typeof h&&(h=this),s.apply(h,i),l?this.bindings[t].splice(e,1):++e}}}}]),t}();A.Utils={getActualBoundingClientRect:o,getScrollParents:r,getBounds:a,getOffsetParent:l,extend:f,addClass:c,removeClass:u,hasClass:d,updateClasses:v,defer:k,flush:L,uniqueId:O,Evented:P,getScrollBarSize:h,removeUtilElements:s};var x=function(){function t(t,e){var n=[],i=!0,o=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(l){o=!0,r=l}finally{try{!i&&a["return"]&&a["return"]()}finally{if(o)throw r}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),I=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),R=function(t,e,n){for(var i=!0;i;){var o=t,r=e,s=n;i=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,r);if(void 0!==a){if("value"in a)return a.value;var l=a.get;if(void 0===l)return;return l.call(s)}var h=Object.getPrototypeOf(o);if(null===h)return;t=h,e=r,n=s,i=!0,a=h=void 0}};if("undefined"==typeof A)throw new Error("You must include the utils.js file before tether.js");var H=A.Utils,r=H.getScrollParents,a=H.getBounds,l=H.getOffsetParent,f=H.extend,c=H.addClass,u=H.removeClass,v=H.updateClasses,k=H.defer,L=H.flush,h=H.getScrollBarSize,s=H.removeUtilElements,W=function(){if("undefined"==typeof document)return"";for(var t=document.createElement("div"),e=["transform","WebkitTransform","OTransform","MozTransform","msTransform"],n=0;n<e.length;++n){var i=e[n];if(void 0!==t.style[i])return i}}(),M=[],j=function(){M.forEach(function(t){t.position(!1)}),L()};!function(){var t=null,e=null,n=null,i=function o(){return"undefined"!=typeof e&&e>16?(e=Math.min(e-16,250),void(n=setTimeout(o,250))):void("undefined"!=typeof t&&y()-t<10||(null!=n&&(clearTimeout(n),n=null),t=y(),j(),e=y()-t))};"undefined"!=typeof window&&"undefined"!=typeof window.addEventListener&&["resize","scroll","touchmove"].forEach(function(t){window.addEventListener(t,i)})}();var V={center:"center",left:"right",right:"left"},U={middle:"middle",top:"bottom",bottom:"top"},F={top:0,left:0,middle:"50%",center:"50%",bottom:"100%",right:"100%"},B=function(t,e){var n=t.left,i=t.top;return"auto"===n&&(n=V[e.left]),"auto"===i&&(i=U[e.top]),{left:n,top:i}},K=function(t){var e=t.left,n=t.top;return"undefined"!=typeof F[t.left]&&(e=F[t.left]),"undefined"!=typeof F[t.top]&&(n=F[t.top]),{left:e,top:n}},Q=function(t){var e=t.split(" "),n=x(e,2),i=n[0],o=n[1];return{top:i,left:o}},G=Q,Y=function(t){function e(t){var n=this;i(this,e),R(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.position=this.position.bind(this),M.push(this),this.history=[],this.setOptions(t,!1),A.modules.forEach(function(t){"undefined"!=typeof t.initialize&&t.initialize.call(n)}),this.position()}return m(e,t),I(e,[{key:"getClass",value:function(){var t=arguments.length<=0||void 0===arguments[0]?"":arguments[0],e=this.options.classes;return"undefined"!=typeof e&&e[t]?this.options.classes[t]:this.options.classPrefix?this.options.classPrefix+"-"+t:t}},{key:"setOptions",value:function(t){var e=this,n=arguments.length<=1||void 0===arguments[1]||arguments[1],i={offset:"0 0",targetOffset:"0 0",targetAttachment:"auto auto",classPrefix:"tether"};this.options=f(i,t);var o=this.options,s=o.element,a=o.target,l=o.targetModifier;if(this.element=s,this.target=a,this.targetModifier=l,"viewport"===this.target?(this.target=document.body,this.targetModifier="visible"):"scroll-handle"===this.target&&(this.target=document.body,this.targetModifier="scroll-handle"),["element","target"].forEach(function(t){if("undefined"==typeof e[t])throw new Error("Tether Error: Both element and target must be defined");"undefined"!=typeof e[t].jquery?e[t]=e[t][0]:"string"==typeof e[t]&&(e[t]=document.querySelector(e[t]))}),c(this.element,this.getClass("element")),this.options.addTargetClasses!==!1&&c(this.target,this.getClass("target")),!this.options.attachment)throw new Error("Tether Error: You must provide an attachment");this.targetAttachment=G(this.options.targetAttachment),this.attachment=G(this.options.attachment),this.offset=Q(this.options.offset),this.targetOffset=Q(this.options.targetOffset),"undefined"!=typeof this.scrollParents&&this.disable(),"scroll-handle"===this.targetModifier?this.scrollParents=[this.target]:this.scrollParents=r(this.target),this.options.enabled!==!1&&this.enable(n)}},{key:"getTargetBounds",value:function(){if("undefined"==typeof this.targetModifier)return a(this.target);if("visible"===this.targetModifier){if(this.target===document.body)return{top:pageYOffset,left:pageXOffset,height:innerHeight,width:innerWidth};var t=a(this.target),e={height:t.height,width:t.width,top:t.top,left:t.left};return e.height=Math.min(e.height,t.height-(pageYOffset-t.top)),e.height=Math.min(e.height,t.height-(t.top+t.height-(pageYOffset+innerHeight))),e.height=Math.min(innerHeight,e.height),e.height-=2,e.width=Math.min(e.width,t.width-(pageXOffset-t.left)),e.width=Math.min(e.width,t.width-(t.left+t.width-(pageXOffset+innerWidth))),e.width=Math.min(innerWidth,e.width),e.width-=2,e.top<pageYOffset&&(e.top=pageYOffset),e.left<pageXOffset&&(e.left=pageXOffset),e}if("scroll-handle"===this.targetModifier){var t=void 0,n=this.target;n===document.body?(n=document.documentElement,t={left:pageXOffset,top:pageYOffset,height:innerHeight,width:innerWidth}):t=a(n);var i=getComputedStyle(n),o=n.scrollWidth>n.clientWidth||[i.overflow,i.overflowX].indexOf("scroll")>=0||this.target!==document.body,r=0;o&&(r=15);var s=t.height-parseFloat(i.borderTopWidth)-parseFloat(i.borderBottomWidth)-r,e={width:15,height:.975*s*(s/n.scrollHeight),left:t.left+t.width-parseFloat(i.borderLeftWidth)-15},l=0;s<408&&this.target===document.body&&(l=-11e-5*Math.pow(s,2)-.00727*s+22.58),this.target!==document.body&&(e.height=Math.max(e.height,24));var h=this.target.scrollTop/(n.scrollHeight-s);return e.top=h*(s-e.height-l)+t.top+parseFloat(i.borderTopWidth),this.target===document.body&&(e.height=Math.max(e.height,24)),e}}},{key:"clearCache",value:function(){this._cache={}}},{key:"cache",value:function(t,e){return"undefined"==typeof this._cache&&(this._cache={}),"undefined"==typeof this._cache[t]&&(this._cache[t]=e.call(this)),this._cache[t]}},{key:"enable",value:function(){var t=this,e=arguments.length<=0||void 0===arguments[0]||arguments[0];this.options.addTargetClasses!==!1&&c(this.target,this.getClass("enabled")),c(this.element,this.getClass("enabled")),this.enabled=!0,this.scrollParents.forEach(function(e){e!==t.target.ownerDocument&&e.addEventListener("scroll",t.position)}),e&&this.position()}},{key:"disable",value:function(){var t=this;u(this.target,this.getClass("enabled")),u(this.element,this.getClass("enabled")),this.enabled=!1,"undefined"!=typeof this.scrollParents&&this.scrollParents.forEach(function(e){e.removeEventListener("scroll",t.position)})}},{key:"destroy",value:function(){var t=this;this.disable(),M.forEach(function(e,n){e===t&&M.splice(n,1)}),0===M.length&&s()}},{key:"updateAttachClasses",value:function(t,e){var n=this;t=t||this.attachment,e=e||this.targetAttachment;var i=["left","top","bottom","right","middle","center"];"undefined"!=typeof this._addAttachClasses&&this._addAttachClasses.length&&this._addAttachClasses.splice(0,this._addAttachClasses.length),"undefined"==typeof this._addAttachClasses&&(this._addAttachClasses=[]);var o=this._addAttachClasses;t.top&&o.push(this.getClass("element-attached")+"-"+t.top),t.left&&o.push(this.getClass("element-attached")+"-"+t.left),e.top&&o.push(this.getClass("target-attached")+"-"+e.top),e.left&&o.push(this.getClass("target-attached")+"-"+e.left);var r=[];i.forEach(function(t){r.push(n.getClass("element-attached")+"-"+t),r.push(n.getClass("target-attached")+"-"+t)}),k(function(){"undefined"!=typeof n._addAttachClasses&&(v(n.element,n._addAttachClasses,r),n.options.addTargetClasses!==!1&&v(n.target,n._addAttachClasses,r),delete n._addAttachClasses)})}},{key:"position",value:function(){var t=this,e=arguments.length<=0||void 0===arguments[0]||arguments[0];if(this.enabled){this.clearCache();var n=B(this.targetAttachment,this.attachment);this.updateAttachClasses(this.attachment,n);var i=this.cache("element-bounds",function(){return a(t.element)}),o=i.width,r=i.height;if(0===o&&0===r&&"undefined"!=typeof this.lastSize){var s=this.lastSize;o=s.width,r=s.height}else this.lastSize={width:o,height:r};var f=this.cache("target-bounds",function(){return t.getTargetBounds()}),u=f,c=T(K(this.attachment),{width:o,height:r}),d=T(K(n),u),p=T(this.offset,{width:o,height:r}),g=T(this.targetOffset,u);c=E(c,p),d=E(d,g);for(var v=f.left+d.left-c.left,m=f.top+d.top-c.top,_=0;_<A.modules.length;++_){var y=A.modules[_],C=y.position.call(this,{left:v,top:m,targetAttachment:n,targetPos:f,elementPos:i,offset:c,targetOffset:d,manualOffset:p,manualTargetOffset:g,scrollbarSize:D,attachment:this.attachment});if(C===!1)return!1;"undefined"!=typeof C&&"object"==typeof C&&(m=C.top,v=C.left)}var I={page:{top:m,left:v},viewport:{top:m-pageYOffset,bottom:pageYOffset-m-r+innerHeight,left:v-pageXOffset,right:pageXOffset-v-o+innerWidth}},b=this.target.ownerDocument,O=b.defaultView,D=void 0;return O.innerHeight>b.documentElement.clientHeight&&(D=this.cache("scrollbar-size",h),I.viewport.bottom-=D.height),O.innerWidth>b.documentElement.clientWidth&&(D=this.cache("scrollbar-size",h),I.viewport.right-=D.width),["","static"].indexOf(b.body.style.position)!==-1&&["","static"].indexOf(b.body.parentElement.style.position)!==-1||(I.page.bottom=b.body.scrollHeight-m-r,I.page.right=b.body.scrollWidth-v-o),"undefined"!=typeof this.options.optimizations&&this.options.optimizations.moveElement!==!1&&"undefined"==typeof this.targetModifier&&!function(){var e=t.cache("target-offsetparent",function(){return l(t.target)}),n=t.cache("target-offsetparent-bounds",function(){return a(e)}),i=getComputedStyle(e),o=n,r={};if(["Top","Left","Bottom","Right"].forEach(function(t){r[t.toLowerCase()]=parseFloat(i["border"+t+"Width"])}),n.right=b.body.scrollWidth-n.left-o.width+r.right,n.bottom=b.body.scrollHeight-n.top-o.height+r.bottom,I.page.top>=n.top+r.top&&I.page.bottom>=n.bottom&&I.page.left>=n.left+r.left&&I.page.right>=n.right){var s=e.scrollTop,h=e.scrollLeft;I.offset={top:I.page.top-n.top+s-r.top,left:I.page.left-n.left+h-r.left}}}(),this.move(I),this.history.unshift(I),this.history.length>3&&this.history.pop(),e&&L(),!0}}},{key:"move",value:function(t){var e=this;if("undefined"!=typeof this.element.parentNode){var n={};for(var i in t){n[i]={};for(var o in t[i]){for(var r=!1,s=0;s<this.history.length;++s){var a=this.history[s];if("undefined"!=typeof a[i]&&!_(a[i][o],t[i][o])){r=!0;break}}r||(n[i][o]=!0)}}var h={top:"",left:"",right:"",bottom:""},u=function(t,n){var i="undefined"!=typeof e.options.optimizations,o=i?e.options.optimizations.gpu:null;if(o!==!1){var r=void 0,s=void 0;if(t.top?(h.top=0,r=n.top):(h.bottom=0,r=-n.bottom),t.left?(h.left=0,s=n.left):(h.right=0,s=-n.right),window.matchMedia){var a=window.matchMedia("only screen and (min-resolution: 1.3dppx)").matches||window.matchMedia("only screen and (-webkit-min-device-pixel-ratio: 1.3)").matches;a||(s=Math.round(s),r=Math.round(r))}h[W]="translateX("+s+"px) translateY("+r+"px)","msTransform"!==W&&(h[W]+=" translateZ(0)")}else t.top?h.top=n.top+"px":h.bottom=n.bottom+"px",t.left?h.left=n.left+"px":h.right=n.right+"px"},c=!1;if((n.page.top||n.page.bottom)&&(n.page.left||n.page.right)?(h.position="absolute",u(n.page,t.page)):(n.viewport.top||n.viewport.bottom)&&(n.viewport.left||n.viewport.right)?(h.position="fixed",u(n.viewport,t.viewport)):"undefined"!=typeof n.offset&&n.offset.top&&n.offset.left?!function(){h.position="absolute";var i=e.cache("target-offsetparent",function(){return l(e.target)});l(e.element)!==i&&k(function(){e.element.parentNode.removeChild(e.element),i.appendChild(e.element)}),u(n.offset,t.offset),c=!0}():(h.position="absolute",u({top:!0,left:!0},t.page)),!c){for(var d=!0,p=this.element.parentNode;p&&1===p.nodeType&&"BODY"!==p.tagName;){if("static"!==getComputedStyle(p).position){d=!1;break}p=p.parentNode}d||(this.element.parentNode.removeChild(this.element),this.element.ownerDocument.body.appendChild(this.element))}var g={},v=!1;for(var o in h){var m=h[o],y=this.element.style[o];y!==m&&(v=!0,g[o]=m)}v&&k(function(){f(e.element.style,g),e.trigger("repositioned")})}}}]),e}(P);Y.modules=[],A.position=j;var X=f(Y,A),x=function(){function t(t,e){var n=[],i=!0,o=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(l){o=!0,r=l}finally{try{!i&&a["return"]&&a["return"]()}finally{if(o)throw r}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),H=A.Utils,a=H.getBounds,f=H.extend,v=H.updateClasses,k=H.defer,z=["left","top","right","bottom"];A.modules.push({position:function(t){var e=this,n=t.top,i=t.left,o=t.targetAttachment;if(!this.options.constraints)return!0;var r=this.cache("element-bounds",function(){return a(e.element)}),s=r.height,l=r.width;if(0===l&&0===s&&"undefined"!=typeof this.lastSize){var h=this.lastSize;l=h.width,s=h.height}var u=this.cache("target-bounds",function(){return e.getTargetBounds()}),c=u.height,d=u.width,p=[this.getClass("pinned"),this.getClass("out-of-bounds")];this.options.constraints.forEach(function(t){var e=t.outOfBoundsClass,n=t.pinnedClass;e&&p.push(e),n&&p.push(n)}),p.forEach(function(t){["left","top","right","bottom"].forEach(function(e){p.push(t+"-"+e)})});var g=[],m=f({},o),_=f({},this.attachment);return this.options.constraints.forEach(function(t){var r=t.to,a=t.attachment,h=t.pin;"undefined"==typeof a&&(a="");var f=void 0,u=void 0;if(a.indexOf(" ")>=0){var p=a.split(" "),v=x(p,2);u=v[0],f=v[1]}else f=u=a;var y=C(e,r);"target"!==u&&"both"!==u||(n<y[1]&&"top"===m.top&&(n+=c,m.top="bottom"),n+s>y[3]&&"bottom"===m.top&&(n-=c,m.top="top")),"together"===u&&("top"===m.top&&("bottom"===_.top&&n<y[1]?(n+=c,m.top="bottom",n+=s,_.top="top"):"top"===_.top&&n+s>y[3]&&n-(s-c)>=y[1]&&(n-=s-c,m.top="bottom",_.top="bottom")),"bottom"===m.top&&("top"===_.top&&n+s>y[3]?(n-=c,m.top="top",n-=s,_.top="bottom"):"bottom"===_.top&&n<y[1]&&n+(2*s-c)<=y[3]&&(n+=s-c,m.top="top",_.top="top")),"middle"===m.top&&(n+s>y[3]&&"top"===_.top?(n-=s,_.top="bottom"):n<y[1]&&"bottom"===_.top&&(n+=s,_.top="top"))),"target"!==f&&"both"!==f||(i<y[0]&&"left"===m.left&&(i+=d,m.left="right"),i+l>y[2]&&"right"===m.left&&(i-=d,m.left="left")),"together"===f&&(i<y[0]&&"left"===m.left?"right"===_.left?(i+=d,m.left="right",i+=l,_.left="left"):"left"===_.left&&(i+=d,m.left="right",i-=l,_.left="right"):i+l>y[2]&&"right"===m.left?"left"===_.left?(i-=d,m.left="left",i-=l,_.left="right"):"right"===_.left&&(i-=d,m.left="left",i+=l,_.left="left"):"center"===m.left&&(i+l>y[2]&&"left"===_.left?(i-=l,_.left="right"):i<y[0]&&"right"===_.left&&(i+=l,_.left="left"))),"element"!==u&&"both"!==u||(n<y[1]&&"bottom"===_.top&&(n+=s,_.top="top"),n+s>y[3]&&"top"===_.top&&(n-=s,_.top="bottom")),"element"!==f&&"both"!==f||(i<y[0]&&("right"===_.left?(i+=l,_.left="left"):"center"===_.left&&(i+=l/2,_.left="left")),i+l>y[2]&&("left"===_.left?(i-=l,_.left="right"):"center"===_.left&&(i-=l/2,_.left="right"))),"string"==typeof h?h=h.split(",").map(function(t){return t.trim()}):h===!0&&(h=["top","left","right","bottom"]),h=h||[];var E=[],T=[];n<y[1]&&(h.indexOf("top")>=0?(n=y[1],E.push("top")):T.push("top")),n+s>y[3]&&(h.indexOf("bottom")>=0?(n=y[3]-s,E.push("bottom")):T.push("bottom")),i<y[0]&&(h.indexOf("left")>=0?(i=y[0],E.push("left")):T.push("left")),i+l>y[2]&&(h.indexOf("right")>=0?(i=y[2]-l,E.push("right")):T.push("right")),E.length&&!function(){var t=void 0;t="undefined"!=typeof e.options.pinnedClass?e.options.pinnedClass:e.getClass("pinned"),g.push(t),E.forEach(function(e){g.push(t+"-"+e)})}(),T.length&&!function(){var t=void 0;t="undefined"!=typeof e.options.outOfBoundsClass?e.options.outOfBoundsClass:e.getClass("out-of-bounds"),g.push(t),T.forEach(function(e){g.push(t+"-"+e)})}(),(E.indexOf("left")>=0||E.indexOf("right")>=0)&&(_.left=m.left=!1),(E.indexOf("top")>=0||E.indexOf("bottom")>=0)&&(_.top=m.top=!1),m.top===o.top&&m.left===o.left&&_.top===e.attachment.top&&_.left===e.attachment.left||(e.updateAttachClasses(_,m),e.trigger("update",{attachment:_,targetAttachment:m}))}),k(function(){e.options.addTargetClasses!==!1&&v(e.target,g,p),v(e.element,g,p)}),{top:n,left:i}}});var H=A.Utils,a=H.getBounds,v=H.updateClasses,k=H.defer;A.modules.push({position:function(t){var e=this,n=t.top,i=t.left,o=this.cache("element-bounds",function(){return a(e.element)}),r=o.height,s=o.width,l=this.getTargetBounds(),h=n+r,f=i+s,u=[];n<=l.bottom&&h>=l.top&&["left","right"].forEach(function(t){var e=l[t];e!==i&&e!==f||u.push(t)}),i<=l.right&&f>=l.left&&["top","bottom"].forEach(function(t){var e=l[t];e!==n&&e!==h||u.push(t)});var c=[],d=[],p=["left","top","right","bottom"];return c.push(this.getClass("abutted")),p.forEach(function(t){c.push(e.getClass("abutted")+"-"+t)}),u.length&&d.push(this.getClass("abutted")),u.forEach(function(t){d.push(e.getClass("abutted")+"-"+t)}),k(function(){e.options.addTargetClasses!==!1&&v(e.target,d,c),v(e.element,d,c)}),!0}});var x=function(){function t(t,e){var n=[],i=!0,o=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(l){o=!0,r=l}finally{try{!i&&a["return"]&&a["return"]()}finally{if(o)throw r}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();return A.modules.push({position:function(t){var e=t.top,n=t.left;if(this.options.shift){var i=this.options.shift;"function"==typeof this.options.shift&&(i=this.options.shift.call(this,{top:e,left:n}));var o=void 0,r=void 0;if("string"==typeof i){i=i.split(" "),i[1]=i[1]||i[0];var s=i,a=x(s,2);o=a[0],r=a[1],o=parseFloat(o,10),r=parseFloat(r,10)}else o=i.top,r=i.left;return e+=o,n+=r,{top:e,left:n}}}}),X})},function(t,e){/*!
	 * Bootstrap v4.0.0-alpha.4 (http://getbootstrap.com)
	 * Copyright 2011-2016 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
	 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
	 */
if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(t){var e=t.fn.jquery.split(" ")[0].split(".");if(e[0]<2&&e[1]<9||1==e[0]&&9==e[1]&&e[2]<1||e[0]>=4)throw new Error("Bootstrap's JavaScript requires at least jQuery v1.9.1 but less than v4.0.0")}(jQuery),+function(t){"use strict";function e(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(t,e,n){for(var i=!0;i;){var o=t,r=e,s=n;i=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,r);if(void 0!==a){if("value"in a)return a.value;var l=a.get;if(void 0===l)return;return l.call(s)}var h=Object.getPrototypeOf(o);if(null===h)return;t=h,e=r,n=s,i=!0,a=h=void 0}},o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(t){function e(t){return{}.toString.call(t).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function n(t){return(t[0]||t).nodeType}function i(){return{bindType:a.end,delegateType:a.end,handle:function(e){if(t(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}}}function o(){if(window.QUnit)return!1;var t=document.createElement("bootstrap");for(var e in h)if(void 0!==t.style[e])return{end:h[e]};return!1}function r(e){var n=this,i=!1;return t(this).one(f.TRANSITION_END,function(){i=!0}),setTimeout(function(){i||f.triggerTransitionEnd(n)},e),this}function s(){a=o(),t.fn.emulateTransitionEnd=r,f.supportsTransitionEnd()&&(t.event.special[f.TRANSITION_END]=i())}var a=!1,l=1e6,h={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},f={TRANSITION_END:"bsTransitionEnd",getUID:function(t){do t+=~~(Math.random()*l);while(document.getElementById(t));return t},getSelectorFromElement:function(t){var e=t.getAttribute("data-target");return e||(e=t.getAttribute("href")||"",e=/^#[a-z]/i.test(e)?e:null),e},reflow:function(t){new Function("bs","return bs")(t.offsetHeight)},triggerTransitionEnd:function(e){t(e).trigger(a.end)},supportsTransitionEnd:function(){return Boolean(a)},typeCheckConfig:function(t,i,o){for(var r in o)if(o.hasOwnProperty(r)){var s=o[r],a=i[r],l=void 0;if(l=a&&n(a)?"element":e(a),!new RegExp(s).test(l))throw new Error(t.toUpperCase()+": "+('Option "'+r+'" provided type "'+l+'" ')+('but expected type "'+s+'".'))}}};return s(),f}(jQuery),s=(function(t){var e="alert",i="4.0.0-alpha.4",s="bs.alert",a="."+s,l=".data-api",h=t.fn[e],f=150,u={DISMISS:'[data-dismiss="alert"]'},c={CLOSE:"close"+a,CLOSED:"closed"+a,CLICK_DATA_API:"click"+a+l},d={ALERT:"alert",FADE:"fade",IN:"in"},p=function(){function e(t){n(this,e),this._element=t}return o(e,[{key:"close",value:function(t){t=t||this._element;var e=this._getRootElement(t),n=this._triggerCloseEvent(e);n.isDefaultPrevented()||this._removeElement(e)}},{key:"dispose",value:function(){t.removeData(this._element,s),this._element=null}},{key:"_getRootElement",value:function(e){var n=r.getSelectorFromElement(e),i=!1;return n&&(i=t(n)[0]),i||(i=t(e).closest("."+d.ALERT)[0]),i}},{key:"_triggerCloseEvent",value:function(e){var n=t.Event(c.CLOSE);return t(e).trigger(n),n}},{key:"_removeElement",value:function(e){return t(e).removeClass(d.IN),r.supportsTransitionEnd()&&t(e).hasClass(d.FADE)?void t(e).one(r.TRANSITION_END,t.proxy(this._destroyElement,this,e)).emulateTransitionEnd(f):void this._destroyElement(e)}},{key:"_destroyElement",value:function(e){t(e).detach().trigger(c.CLOSED).remove()}}],[{key:"_jQueryInterface",value:function(n){return this.each(function(){var i=t(this),o=i.data(s);o||(o=new e(this),i.data(s,o)),"close"===n&&o[n](this)})}},{key:"_handleDismiss",value:function(t){return function(e){e&&e.preventDefault(),t.close(this)}}},{key:"VERSION",get:function(){return i}}]),e}();return t(document).on(c.CLICK_DATA_API,u.DISMISS,p._handleDismiss(new p)),t.fn[e]=p._jQueryInterface,t.fn[e].Constructor=p,t.fn[e].noConflict=function(){return t.fn[e]=h,p._jQueryInterface},p}(jQuery),function(t){var e="button",i="4.0.0-alpha.4",r="bs.button",s="."+r,a=".data-api",l=t.fn[e],h={ACTIVE:"active",BUTTON:"btn",FOCUS:"focus"},f={DATA_TOGGLE_CARROT:'[data-toggle^="button"]',DATA_TOGGLE:'[data-toggle="buttons"]',INPUT:"input",ACTIVE:".active",BUTTON:".btn"},u={CLICK_DATA_API:"click"+s+a,FOCUS_BLUR_DATA_API:"focus"+s+a+" "+("blur"+s+a)},c=function(){function e(t){n(this,e),this._element=t}return o(e,[{key:"toggle",value:function(){var e=!0,n=t(this._element).closest(f.DATA_TOGGLE)[0];if(n){var i=t(this._element).find(f.INPUT)[0];if(i){if("radio"===i.type)if(i.checked&&t(this._element).hasClass(h.ACTIVE))e=!1;else{var o=t(n).find(f.ACTIVE)[0];o&&t(o).removeClass(h.ACTIVE)}e&&(i.checked=!t(this._element).hasClass(h.ACTIVE),t(this._element).trigger("change")),i.focus()}}else this._element.setAttribute("aria-pressed",!t(this._element).hasClass(h.ACTIVE));e&&t(this._element).toggleClass(h.ACTIVE)}},{key:"dispose",value:function(){t.removeData(this._element,r),this._element=null}}],[{key:"_jQueryInterface",value:function(n){return this.each(function(){var i=t(this).data(r);i||(i=new e(this),t(this).data(r,i)),"toggle"===n&&i[n]()})}},{key:"VERSION",get:function(){return i}}]),e}();return t(document).on(u.CLICK_DATA_API,f.DATA_TOGGLE_CARROT,function(e){e.preventDefault();var n=e.target;t(n).hasClass(h.BUTTON)||(n=t(n).closest(f.BUTTON)),c._jQueryInterface.call(t(n),"toggle")}).on(u.FOCUS_BLUR_DATA_API,f.DATA_TOGGLE_CARROT,function(e){var n=t(e.target).closest(f.BUTTON)[0];t(n).toggleClass(h.FOCUS,/^focus(in)?$/.test(e.type))}),t.fn[e]=c._jQueryInterface,t.fn[e].Constructor=c,t.fn[e].noConflict=function(){return t.fn[e]=l,c._jQueryInterface},c}(jQuery),function(t){var e="carousel",i="4.0.0-alpha.4",s="bs.carousel",a="."+s,l=".data-api",h=t.fn[e],f=600,u=37,c=39,d={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0},p={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean"},g={NEXT:"next",PREVIOUS:"prev"},v={SLIDE:"slide"+a,SLID:"slid"+a,KEYDOWN:"keydown"+a,MOUSEENTER:"mouseenter"+a,MOUSELEAVE:"mouseleave"+a,LOAD_DATA_API:"load"+a+l,CLICK_DATA_API:"click"+a+l},m={CAROUSEL:"carousel",ACTIVE:"active",SLIDE:"slide",RIGHT:"right",LEFT:"left",ITEM:"carousel-item"},_={ACTIVE:".active",ACTIVE_ITEM:".active.carousel-item",ITEM:".carousel-item",NEXT_PREV:".next, .prev",INDICATORS:".carousel-indicators",DATA_SLIDE:"[data-slide], [data-slide-to]",DATA_RIDE:'[data-ride="carousel"]'},y=function(){function l(e,i){n(this,l),this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this._config=this._getConfig(i),this._element=t(e)[0],this._indicatorsElement=t(this._element).find(_.INDICATORS)[0],this._addEventListeners()}return o(l,[{key:"next",value:function(){this._isSliding||this._slide(g.NEXT)}},{key:"nextWhenVisible",value:function(){document.hidden||this.next()}},{key:"prev",value:function(){this._isSliding||this._slide(g.PREVIOUS)}},{key:"pause",value:function(e){e||(this._isPaused=!0),t(this._element).find(_.NEXT_PREV)[0]&&r.supportsTransitionEnd()&&(r.triggerTransitionEnd(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null}},{key:"cycle",value:function(e){e||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config.interval&&!this._isPaused&&(this._interval=setInterval(t.proxy(document.visibilityState?this.nextWhenVisible:this.next,this),this._config.interval))}},{key:"to",value:function(e){var n=this;this._activeElement=t(this._element).find(_.ACTIVE_ITEM)[0];var i=this._getItemIndex(this._activeElement);if(!(e>this._items.length-1||e<0)){if(this._isSliding)return void t(this._element).one(v.SLID,function(){return n.to(e)});if(i===e)return this.pause(),void this.cycle();var o=e>i?g.NEXT:g.PREVIOUS;this._slide(o,this._items[e])}}},{key:"dispose",value:function(){t(this._element).off(a),t.removeData(this._element,s),this._items=null,this._config=null,this._element=null,this._interval=null,this._isPaused=null,this._isSliding=null,this._activeElement=null,this._indicatorsElement=null}},{key:"_getConfig",value:function(n){return n=t.extend({},d,n),r.typeCheckConfig(e,n,p),n}},{key:"_addEventListeners",value:function(){this._config.keyboard&&t(this._element).on(v.KEYDOWN,t.proxy(this._keydown,this)),"hover"!==this._config.pause||"ontouchstart"in document.documentElement||t(this._element).on(v.MOUSEENTER,t.proxy(this.pause,this)).on(v.MOUSELEAVE,t.proxy(this.cycle,this))}},{key:"_keydown",value:function(t){if(t.preventDefault(),!/input|textarea/i.test(t.target.tagName))switch(t.which){case u:this.prev();break;case c:this.next();break;default:return}}},{key:"_getItemIndex",value:function(e){return this._items=t.makeArray(t(e).parent().find(_.ITEM)),this._items.indexOf(e)}},{key:"_getItemByDirection",value:function(t,e){var n=t===g.NEXT,i=t===g.PREVIOUS,o=this._getItemIndex(e),r=this._items.length-1,s=i&&0===o||n&&o===r;if(s&&!this._config.wrap)return e;var a=t===g.PREVIOUS?-1:1,l=(o+a)%this._items.length;return l===-1?this._items[this._items.length-1]:this._items[l]}},{key:"_triggerSlideEvent",value:function(e,n){var i=t.Event(v.SLIDE,{relatedTarget:e,direction:n});return t(this._element).trigger(i),i}},{key:"_setActiveIndicatorElement",value:function(e){if(this._indicatorsElement){t(this._indicatorsElement).find(_.ACTIVE).removeClass(m.ACTIVE);var n=this._indicatorsElement.children[this._getItemIndex(e)];n&&t(n).addClass(m.ACTIVE)}}},{key:"_slide",value:function(e,n){var i=this,o=t(this._element).find(_.ACTIVE_ITEM)[0],s=n||o&&this._getItemByDirection(e,o),a=Boolean(this._interval),l=e===g.NEXT?m.LEFT:m.RIGHT;if(s&&t(s).hasClass(m.ACTIVE))return void(this._isSliding=!1);var h=this._triggerSlideEvent(s,l);if(!h.isDefaultPrevented()&&o&&s){this._isSliding=!0,a&&this.pause(),this._setActiveIndicatorElement(s);var u=t.Event(v.SLID,{relatedTarget:s,direction:l});r.supportsTransitionEnd()&&t(this._element).hasClass(m.SLIDE)?(t(s).addClass(e),r.reflow(s),t(o).addClass(l),t(s).addClass(l),t(o).one(r.TRANSITION_END,function(){t(s).removeClass(l).removeClass(e),t(s).addClass(m.ACTIVE),t(o).removeClass(m.ACTIVE).removeClass(e).removeClass(l),i._isSliding=!1,setTimeout(function(){return t(i._element).trigger(u)},0)}).emulateTransitionEnd(f)):(t(o).removeClass(m.ACTIVE),t(s).addClass(m.ACTIVE),this._isSliding=!1,t(this._element).trigger(u)),a&&this.cycle()}}}],[{key:"_jQueryInterface",value:function(e){return this.each(function(){var n=t(this).data(s),i=t.extend({},d,t(this).data());"object"==typeof e&&t.extend(i,e);var o="string"==typeof e?e:i.slide;if(n||(n=new l(this,i),t(this).data(s,n)),"number"==typeof e)n.to(e);else if("string"==typeof o){if(void 0===n[o])throw new Error('No method named "'+o+'"');n[o]()}else i.interval&&(n.pause(),n.cycle())})}},{key:"_dataApiClickHandler",value:function(e){var n=r.getSelectorFromElement(this);if(n){var i=t(n)[0];if(i&&t(i).hasClass(m.CAROUSEL)){var o=t.extend({},t(i).data(),t(this).data()),a=this.getAttribute("data-slide-to");a&&(o.interval=!1),l._jQueryInterface.call(t(i),o),a&&t(i).data(s).to(a),e.preventDefault()}}}},{key:"VERSION",get:function(){return i}},{key:"Default",get:function(){return d}}]),l}();return t(document).on(v.CLICK_DATA_API,_.DATA_SLIDE,y._dataApiClickHandler),t(window).on(v.LOAD_DATA_API,function(){t(_.DATA_RIDE).each(function(){var e=t(this);y._jQueryInterface.call(e,e.data())})}),t.fn[e]=y._jQueryInterface,t.fn[e].Constructor=y,t.fn[e].noConflict=function(){return t.fn[e]=h,y._jQueryInterface},y}(jQuery),function(t){var e="collapse",i="4.0.0-alpha.4",s="bs.collapse",a="."+s,l=".data-api",h=t.fn[e],f=600,u={toggle:!0,parent:""},c={toggle:"boolean",parent:"string"},d={SHOW:"show"+a,SHOWN:"shown"+a,HIDE:"hide"+a,HIDDEN:"hidden"+a,CLICK_DATA_API:"click"+a+l},p={IN:"in",COLLAPSE:"collapse",COLLAPSING:"collapsing",COLLAPSED:"collapsed"},g={WIDTH:"width",HEIGHT:"height"},v={ACTIVES:".panel > .in, .panel > .collapsing",DATA_TOGGLE:'[data-toggle="collapse"]'},m=function(){function a(e,i){n(this,a),this._isTransitioning=!1,this._element=e,this._config=this._getConfig(i),this._triggerArray=t.makeArray(t('[data-toggle="collapse"][href="#'+e.id+'"],'+('[data-toggle="collapse"][data-target="#'+e.id+'"]'))),this._parent=this._config.parent?this._getParent():null,this._config.parent||this._addAriaAndCollapsedClass(this._element,this._triggerArray),this._config.toggle&&this.toggle()}return o(a,[{key:"toggle",value:function(){t(this._element).hasClass(p.IN)?this.hide():this.show()}},{key:"show",value:function(){var e=this;if(!this._isTransitioning&&!t(this._element).hasClass(p.IN)){var n=void 0,i=void 0;if(this._parent&&(n=t.makeArray(t(v.ACTIVES)),n.length||(n=null)),!(n&&(i=t(n).data(s),i&&i._isTransitioning))){var o=t.Event(d.SHOW);if(t(this._element).trigger(o),!o.isDefaultPrevented()){n&&(a._jQueryInterface.call(t(n),"hide"),i||t(n).data(s,null));var l=this._getDimension();t(this._element).removeClass(p.COLLAPSE).addClass(p.COLLAPSING),this._element.style[l]=0,this._element.setAttribute("aria-expanded",!0),this._triggerArray.length&&t(this._triggerArray).removeClass(p.COLLAPSED).attr("aria-expanded",!0),this.setTransitioning(!0);var h=function(){t(e._element).removeClass(p.COLLAPSING).addClass(p.COLLAPSE).addClass(p.IN),e._element.style[l]="",e.setTransitioning(!1),t(e._element).trigger(d.SHOWN)};if(!r.supportsTransitionEnd())return void h();var u=l[0].toUpperCase()+l.slice(1),c="scroll"+u;t(this._element).one(r.TRANSITION_END,h).emulateTransitionEnd(f),this._element.style[l]=this._element[c]+"px"}}}}},{key:"hide",value:function(){var e=this;if(!this._isTransitioning&&t(this._element).hasClass(p.IN)){var n=t.Event(d.HIDE);if(t(this._element).trigger(n),!n.isDefaultPrevented()){var i=this._getDimension(),o=i===g.WIDTH?"offsetWidth":"offsetHeight";this._element.style[i]=this._element[o]+"px",r.reflow(this._element),t(this._element).addClass(p.COLLAPSING).removeClass(p.COLLAPSE).removeClass(p.IN),this._element.setAttribute("aria-expanded",!1),this._triggerArray.length&&t(this._triggerArray).addClass(p.COLLAPSED).attr("aria-expanded",!1),this.setTransitioning(!0);var s=function(){e.setTransitioning(!1),t(e._element).removeClass(p.COLLAPSING).addClass(p.COLLAPSE).trigger(d.HIDDEN)};return this._element.style[i]=0,r.supportsTransitionEnd()?void t(this._element).one(r.TRANSITION_END,s).emulateTransitionEnd(f):void s()}}}},{key:"setTransitioning",value:function(t){this._isTransitioning=t}},{key:"dispose",value:function(){t.removeData(this._element,s),this._config=null,this._parent=null,this._element=null,this._triggerArray=null,this._isTransitioning=null}},{key:"_getConfig",value:function(n){return n=t.extend({},u,n),n.toggle=Boolean(n.toggle),r.typeCheckConfig(e,n,c),n}},{key:"_getDimension",value:function(){var e=t(this._element).hasClass(g.WIDTH);return e?g.WIDTH:g.HEIGHT}},{key:"_getParent",value:function(){var e=this,n=t(this._config.parent)[0],i='[data-toggle="collapse"][data-parent="'+this._config.parent+'"]';return t(n).find(i).each(function(t,n){e._addAriaAndCollapsedClass(a._getTargetFromElement(n),[n])}),n}},{key:"_addAriaAndCollapsedClass",value:function(e,n){if(e){var i=t(e).hasClass(p.IN);e.setAttribute("aria-expanded",i),n.length&&t(n).toggleClass(p.COLLAPSED,!i).attr("aria-expanded",i)}}}],[{key:"_getTargetFromElement",value:function(e){var n=r.getSelectorFromElement(e);return n?t(n)[0]:null}},{key:"_jQueryInterface",value:function(e){return this.each(function(){var n=t(this),i=n.data(s),o=t.extend({},u,n.data(),"object"==typeof e&&e);if(!i&&o.toggle&&/show|hide/.test(e)&&(o.toggle=!1),i||(i=new a(this,o),n.data(s,i)),"string"==typeof e){if(void 0===i[e])throw new Error('No method named "'+e+'"');i[e]()}})}},{key:"VERSION",get:function(){return i}},{key:"Default",get:function(){return u}}]),a}();return t(document).on(d.CLICK_DATA_API,v.DATA_TOGGLE,function(e){e.preventDefault();var n=m._getTargetFromElement(this),i=t(n).data(s),o=i?"toggle":t(this).data();m._jQueryInterface.call(t(n),o)}),t.fn[e]=m._jQueryInterface,t.fn[e].Constructor=m,t.fn[e].noConflict=function(){return t.fn[e]=h,m._jQueryInterface},m}(jQuery),function(t){var e="dropdown",i="4.0.0-alpha.4",s="bs.dropdown",a="."+s,l=".data-api",h=t.fn[e],f=27,u=38,c=40,d=3,p={HIDE:"hide"+a,HIDDEN:"hidden"+a,SHOW:"show"+a,SHOWN:"shown"+a,CLICK:"click"+a,CLICK_DATA_API:"click"+a+l,KEYDOWN_DATA_API:"keydown"+a+l},g={BACKDROP:"dropdown-backdrop",DISABLED:"disabled",OPEN:"open"},v={BACKDROP:".dropdown-backdrop",DATA_TOGGLE:'[data-toggle="dropdown"]',FORM_CHILD:".dropdown form",ROLE_MENU:'[role="menu"]',ROLE_LISTBOX:'[role="listbox"]',NAVBAR_NAV:".navbar-nav",VISIBLE_ITEMS:'[role="menu"] li:not(.disabled) a, [role="listbox"] li:not(.disabled) a'},m=function(){function e(t){n(this,e),this._element=t,this._addEventListeners()}return o(e,[{key:"toggle",value:function(){if(this.disabled||t(this).hasClass(g.DISABLED))return!1;var n=e._getParentFromElement(this),i=t(n).hasClass(g.OPEN);if(e._clearMenus(),i)return!1;if("ontouchstart"in document.documentElement&&!t(n).closest(v.NAVBAR_NAV).length){var o=document.createElement("div");o.className=g.BACKDROP,t(o).insertBefore(this),t(o).on("click",e._clearMenus)}var r={relatedTarget:this},s=t.Event(p.SHOW,r);return t(n).trigger(s),!s.isDefaultPrevented()&&(this.focus(),this.setAttribute("aria-expanded","true"),t(n).toggleClass(g.OPEN),t(n).trigger(t.Event(p.SHOWN,r)),!1)}},{key:"dispose",value:function(){t.removeData(this._element,s),t(this._element).off(a),this._element=null}},{key:"_addEventListeners",value:function(){t(this._element).on(p.CLICK,this.toggle)}}],[{key:"_jQueryInterface",value:function(n){return this.each(function(){var i=t(this).data(s);if(i||t(this).data(s,i=new e(this)),"string"==typeof n){if(void 0===i[n])throw new Error('No method named "'+n+'"');i[n].call(this)}})}},{key:"_clearMenus",value:function(n){if(!n||n.which!==d){var i=t(v.BACKDROP)[0];i&&i.parentNode.removeChild(i);for(var o=t.makeArray(t(v.DATA_TOGGLE)),r=0;r<o.length;r++){var s=e._getParentFromElement(o[r]),a={relatedTarget:o[r]};if(t(s).hasClass(g.OPEN)&&!(n&&"click"===n.type&&/input|textarea/i.test(n.target.tagName)&&t.contains(s,n.target))){var l=t.Event(p.HIDE,a);t(s).trigger(l),l.isDefaultPrevented()||(o[r].setAttribute("aria-expanded","false"),t(s).removeClass(g.OPEN).trigger(t.Event(p.HIDDEN,a)))}}}}},{key:"_getParentFromElement",value:function(e){var n=void 0,i=r.getSelectorFromElement(e);return i&&(n=t(i)[0]),n||e.parentNode}},{key:"_dataApiKeydownHandler",value:function(n){if(/(38|40|27|32)/.test(n.which)&&!/input|textarea/i.test(n.target.tagName)&&(n.preventDefault(),n.stopPropagation(),!this.disabled&&!t(this).hasClass(g.DISABLED))){var i=e._getParentFromElement(this),o=t(i).hasClass(g.OPEN);if(!o&&n.which!==f||o&&n.which===f){if(n.which===f){var r=t(i).find(v.DATA_TOGGLE)[0];t(r).trigger("focus")}return void t(this).trigger("click")}var s=t.makeArray(t(v.VISIBLE_ITEMS));if(s=s.filter(function(t){return t.offsetWidth||t.offsetHeight}),s.length){var a=s.indexOf(n.target);n.which===u&&a>0&&a--,n.which===c&&a<s.length-1&&a++,a<0&&(a=0),s[a].focus()}}}},{key:"VERSION",get:function(){return i}}]),e}();return t(document).on(p.KEYDOWN_DATA_API,v.DATA_TOGGLE,m._dataApiKeydownHandler).on(p.KEYDOWN_DATA_API,v.ROLE_MENU,m._dataApiKeydownHandler).on(p.KEYDOWN_DATA_API,v.ROLE_LISTBOX,m._dataApiKeydownHandler).on(p.CLICK_DATA_API,m._clearMenus).on(p.CLICK_DATA_API,v.DATA_TOGGLE,m.prototype.toggle).on(p.CLICK_DATA_API,v.FORM_CHILD,function(t){t.stopPropagation()}),t.fn[e]=m._jQueryInterface,t.fn[e].Constructor=m,t.fn[e].noConflict=function(){return t.fn[e]=h,m._jQueryInterface},m}(jQuery),function(t){var e="modal",i="4.0.0-alpha.4",s="bs.modal",a="."+s,l=".data-api",h=t.fn[e],f=300,u=150,c=27,d={backdrop:!0,keyboard:!0,focus:!0,show:!0},p={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean",show:"boolean"},g={HIDE:"hide"+a,HIDDEN:"hidden"+a,SHOW:"show"+a,SHOWN:"shown"+a,FOCUSIN:"focusin"+a,RESIZE:"resize"+a,CLICK_DISMISS:"click.dismiss"+a,KEYDOWN_DISMISS:"keydown.dismiss"+a,MOUSEUP_DISMISS:"mouseup.dismiss"+a,MOUSEDOWN_DISMISS:"mousedown.dismiss"+a,CLICK_DATA_API:"click"+a+l},v={SCROLLBAR_MEASURER:"modal-scrollbar-measure",BACKDROP:"modal-backdrop",OPEN:"modal-open",FADE:"fade",IN:"in"},m={DIALOG:".modal-dialog",DATA_TOGGLE:'[data-toggle="modal"]',DATA_DISMISS:'[data-dismiss="modal"]',FIXED_CONTENT:".navbar-fixed-top, .navbar-fixed-bottom, .is-fixed"},_=function(){function l(e,i){n(this,l),this._config=this._getConfig(i),this._element=e,this._dialog=t(e).find(m.DIALOG)[0],this._backdrop=null,this._isShown=!1,this._isBodyOverflowing=!1,this._ignoreBackdropClick=!1,this._originalBodyPadding=0,this._scrollbarWidth=0}return o(l,[{key:"toggle",value:function(t){return this._isShown?this.hide():this.show(t)}},{key:"show",value:function(e){var n=this,i=t.Event(g.SHOW,{relatedTarget:e});t(this._element).trigger(i),this._isShown||i.isDefaultPrevented()||(this._isShown=!0,this._checkScrollbar(),this._setScrollbar(),t(document.body).addClass(v.OPEN),this._setEscapeEvent(),this._setResizeEvent(),t(this._element).on(g.CLICK_DISMISS,m.DATA_DISMISS,t.proxy(this.hide,this)),t(this._dialog).on(g.MOUSEDOWN_DISMISS,function(){t(n._element).one(g.MOUSEUP_DISMISS,function(e){t(e.target).is(n._element)&&(n._ignoreBackdropClick=!0)})}),this._showBackdrop(t.proxy(this._showElement,this,e)))}},{key:"hide",value:function(e){e&&e.preventDefault();var n=t.Event(g.HIDE);t(this._element).trigger(n),this._isShown&&!n.isDefaultPrevented()&&(this._isShown=!1,this._setEscapeEvent(),this._setResizeEvent(),t(document).off(g.FOCUSIN),t(this._element).removeClass(v.IN),t(this._element).off(g.CLICK_DISMISS),t(this._dialog).off(g.MOUSEDOWN_DISMISS),r.supportsTransitionEnd()&&t(this._element).hasClass(v.FADE)?t(this._element).one(r.TRANSITION_END,t.proxy(this._hideModal,this)).emulateTransitionEnd(f):this._hideModal())}},{key:"dispose",value:function(){t.removeData(this._element,s),t(window).off(a),t(document).off(a),t(this._element).off(a),t(this._backdrop).off(a),this._config=null,this._element=null,this._dialog=null,this._backdrop=null,this._isShown=null,this._isBodyOverflowing=null,this._ignoreBackdropClick=null,this._originalBodyPadding=null,this._scrollbarWidth=null}},{key:"_getConfig",value:function(n){return n=t.extend({},d,n),r.typeCheckConfig(e,n,p),n}},{key:"_showElement",value:function(e){var n=this,i=r.supportsTransitionEnd()&&t(this._element).hasClass(v.FADE);this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.appendChild(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.scrollTop=0,i&&r.reflow(this._element),t(this._element).addClass(v.IN),this._config.focus&&this._enforceFocus();var o=t.Event(g.SHOWN,{relatedTarget:e}),s=function(){n._config.focus&&n._element.focus(),t(n._element).trigger(o)};i?t(this._dialog).one(r.TRANSITION_END,s).emulateTransitionEnd(f):s()}},{key:"_enforceFocus",value:function(){var e=this;t(document).off(g.FOCUSIN).on(g.FOCUSIN,function(n){document===n.target||e._element===n.target||t(e._element).has(n.target).length||e._element.focus()})}},{key:"_setEscapeEvent",value:function(){var e=this;this._isShown&&this._config.keyboard?t(this._element).on(g.KEYDOWN_DISMISS,function(t){t.which===c&&e.hide()}):this._isShown||t(this._element).off(g.KEYDOWN_DISMISS)}},{key:"_setResizeEvent",value:function(){this._isShown?t(window).on(g.RESIZE,t.proxy(this._handleUpdate,this)):t(window).off(g.RESIZE)}},{key:"_hideModal",value:function(){var e=this;this._element.style.display="none",this._element.setAttribute("aria-hidden","true"),this._showBackdrop(function(){t(document.body).removeClass(v.OPEN),e._resetAdjustments(),e._resetScrollbar(),t(e._element).trigger(g.HIDDEN)})}},{key:"_removeBackdrop",value:function(){this._backdrop&&(t(this._backdrop).remove(),this._backdrop=null)}},{key:"_showBackdrop",value:function(e){var n=this,i=t(this._element).hasClass(v.FADE)?v.FADE:"";if(this._isShown&&this._config.backdrop){var o=r.supportsTransitionEnd()&&i;if(this._backdrop=document.createElement("div"),this._backdrop.className=v.BACKDROP,i&&t(this._backdrop).addClass(i),t(this._backdrop).appendTo(document.body),t(this._element).on(g.CLICK_DISMISS,function(t){return n._ignoreBackdropClick?void(n._ignoreBackdropClick=!1):void(t.target===t.currentTarget&&("static"===n._config.backdrop?n._element.focus():n.hide()))}),o&&r.reflow(this._backdrop),t(this._backdrop).addClass(v.IN),!e)return;if(!o)return void e();t(this._backdrop).one(r.TRANSITION_END,e).emulateTransitionEnd(u)}else if(!this._isShown&&this._backdrop){t(this._backdrop).removeClass(v.IN);var s=function(){n._removeBackdrop(),e&&e()};r.supportsTransitionEnd()&&t(this._element).hasClass(v.FADE)?t(this._backdrop).one(r.TRANSITION_END,s).emulateTransitionEnd(u):s()}else e&&e()}},{key:"_handleUpdate",value:function(){this._adjustDialog()}},{key:"_adjustDialog",value:function(){var t=this._element.scrollHeight>document.documentElement.clientHeight;!this._isBodyOverflowing&&t&&(this._element.style.paddingLeft=this._scrollbarWidth+"px"),this._isBodyOverflowing&&!t&&(this._element.style.paddingRight=this._scrollbarWidth+"px")}},{key:"_resetAdjustments",value:function(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}},{key:"_checkScrollbar",value:function(){this._isBodyOverflowing=document.body.clientWidth<window.innerWidth,this._scrollbarWidth=this._getScrollbarWidth()}},{key:"_setScrollbar",value:function(){var e=parseInt(t(m.FIXED_CONTENT).css("padding-right")||0,10);this._originalBodyPadding=document.body.style.paddingRight||"",this._isBodyOverflowing&&(document.body.style.paddingRight=e+this._scrollbarWidth+"px")}},{key:"_resetScrollbar",value:function(){document.body.style.paddingRight=this._originalBodyPadding}},{key:"_getScrollbarWidth",value:function(){var t=document.createElement("div");t.className=v.SCROLLBAR_MEASURER,document.body.appendChild(t);var e=t.offsetWidth-t.clientWidth;return document.body.removeChild(t),e}}],[{key:"_jQueryInterface",value:function(e,n){return this.each(function(){var i=t(this).data(s),o=t.extend({},l.Default,t(this).data(),"object"==typeof e&&e);if(i||(i=new l(this,o),t(this).data(s,i)),"string"==typeof e){if(void 0===i[e])throw new Error('No method named "'+e+'"');i[e](n)}else o.show&&i.show(n)})}},{key:"VERSION",get:function(){return i}},{key:"Default",get:function(){return d}}]),l}();return t(document).on(g.CLICK_DATA_API,m.DATA_TOGGLE,function(e){var n=this,i=void 0,o=r.getSelectorFromElement(this);o&&(i=t(o)[0]);var a=t(i).data(s)?"toggle":t.extend({},t(i).data(),t(this).data());"A"===this.tagName&&e.preventDefault();var l=t(i).one(g.SHOW,function(e){e.isDefaultPrevented()||l.one(g.HIDDEN,function(){t(n).is(":visible")&&n.focus()})});_._jQueryInterface.call(t(i),a,this)}),t.fn[e]=_._jQueryInterface,t.fn[e].Constructor=_,t.fn[e].noConflict=function(){return t.fn[e]=h,_._jQueryInterface},_}(jQuery),function(t){var e="scrollspy",i="4.0.0-alpha.4",s="bs.scrollspy",a="."+s,l=".data-api",h=t.fn[e],f={offset:10,method:"auto",target:""},u={offset:"number",method:"string",target:"(string|element)"},c={ACTIVATE:"activate"+a,SCROLL:"scroll"+a,LOAD_DATA_API:"load"+a+l},d={DROPDOWN_ITEM:"dropdown-item",DROPDOWN_MENU:"dropdown-menu",NAV_LINK:"nav-link",NAV:"nav",ACTIVE:"active"},p={DATA_SPY:'[data-spy="scroll"]',ACTIVE:".active",LIST_ITEM:".list-item",LI:"li",LI_DROPDOWN:"li.dropdown",NAV_LINKS:".nav-link",DROPDOWN:".dropdown",DROPDOWN_ITEMS:".dropdown-item",DROPDOWN_TOGGLE:".dropdown-toggle"},g={OFFSET:"offset",POSITION:"position"},v=function(){function l(e,i){n(this,l),this._element=e,this._scrollElement="BODY"===e.tagName?window:e,this._config=this._getConfig(i),this._selector=this._config.target+" "+p.NAV_LINKS+","+(this._config.target+" "+p.DROPDOWN_ITEMS),this._offsets=[],this._targets=[],this._activeTarget=null,this._scrollHeight=0,t(this._scrollElement).on(c.SCROLL,t.proxy(this._process,this)),this.refresh(),this._process()}return o(l,[{key:"refresh",value:function(){var e=this,n=this._scrollElement!==this._scrollElement.window?g.POSITION:g.OFFSET,i="auto"===this._config.method?n:this._config.method,o=i===g.POSITION?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight();var s=t.makeArray(t(this._selector));s.map(function(e){var n=void 0,s=r.getSelectorFromElement(e);return s&&(n=t(s)[0]),n&&(n.offsetWidth||n.offsetHeight)?[t(n)[i]().top+o,s]:null}).filter(function(t){return t}).sort(function(t,e){return t[0]-e[0]}).forEach(function(t){e._offsets.push(t[0]),e._targets.push(t[1])})}},{key:"dispose",value:function(){t.removeData(this._element,s),t(this._scrollElement).off(a),this._element=null,this._scrollElement=null,this._config=null,this._selector=null,this._offsets=null,this._targets=null,this._activeTarget=null,this._scrollHeight=null}},{key:"_getConfig",value:function(n){if(n=t.extend({},f,n),"string"!=typeof n.target){var i=t(n.target).attr("id");i||(i=r.getUID(e),t(n.target).attr("id",i)),n.target="#"+i}return r.typeCheckConfig(e,n,u),n}},{key:"_getScrollTop",value:function(){return this._scrollElement===window?this._scrollElement.scrollY:this._scrollElement.scrollTop}},{key:"_getScrollHeight",value:function(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)}},{key:"_process",value:function(){var t=this._getScrollTop()+this._config.offset,e=this._getScrollHeight(),n=this._config.offset+e-this._scrollElement.offsetHeight;if(this._scrollHeight!==e&&this.refresh(),t>=n){var i=this._targets[this._targets.length-1];this._activeTarget!==i&&this._activate(i)}if(this._activeTarget&&t<this._offsets[0])return this._activeTarget=null,void this._clear();for(var o=this._offsets.length;o--;){var r=this._activeTarget!==this._targets[o]&&t>=this._offsets[o]&&(void 0===this._offsets[o+1]||t<this._offsets[o+1]);r&&this._activate(this._targets[o])}}},{key:"_activate",value:function(e){this._activeTarget=e,this._clear();var n=this._selector.split(",");n=n.map(function(t){return t+'[data-target="'+e+'"],'+(t+'[href="'+e+'"]')});var i=t(n.join(","));i.hasClass(d.DROPDOWN_ITEM)?(i.closest(p.DROPDOWN).find(p.DROPDOWN_TOGGLE).addClass(d.ACTIVE),i.addClass(d.ACTIVE)):i.parents(p.LI).find(p.NAV_LINKS).addClass(d.ACTIVE),t(this._scrollElement).trigger(c.ACTIVATE,{relatedTarget:e})}},{key:"_clear",value:function(){t(this._selector).filter(p.ACTIVE).removeClass(d.ACTIVE)}}],[{key:"_jQueryInterface",value:function(e){return this.each(function(){var n=t(this).data(s),i="object"==typeof e&&e||null;if(n||(n=new l(this,i),t(this).data(s,n)),"string"==typeof e){if(void 0===n[e])throw new Error('No method named "'+e+'"');n[e]()}})}},{key:"VERSION",get:function(){return i}},{key:"Default",get:function(){return f}}]),l}();return t(window).on(c.LOAD_DATA_API,function(){for(var e=t.makeArray(t(p.DATA_SPY)),n=e.length;n--;){var i=t(e[n]);v._jQueryInterface.call(i,i.data())}}),t.fn[e]=v._jQueryInterface,t.fn[e].Constructor=v,t.fn[e].noConflict=function(){return t.fn[e]=h,v._jQueryInterface},v}(jQuery),function(t){var e="tab",i="4.0.0-alpha.4",s="bs.tab",a="."+s,l=".data-api",h=t.fn[e],f=150,u={HIDE:"hide"+a,HIDDEN:"hidden"+a,SHOW:"show"+a,SHOWN:"shown"+a,CLICK_DATA_API:"click"+a+l},c={DROPDOWN_MENU:"dropdown-menu",ACTIVE:"active",FADE:"fade",IN:"in"},d={A:"a",LI:"li",DROPDOWN:".dropdown",UL:"ul:not(.dropdown-menu)",FADE_CHILD:"> .nav-item .fade, > .fade",
ACTIVE:".active",ACTIVE_CHILD:"> .nav-item > .active, > .active",DATA_TOGGLE:'[data-toggle="tab"], [data-toggle="pill"]',DROPDOWN_TOGGLE:".dropdown-toggle",DROPDOWN_ACTIVE_CHILD:"> .dropdown-menu .active"},p=function(){function e(t){n(this,e),this._element=t}return o(e,[{key:"show",value:function(){var e=this;if(!this._element.parentNode||this._element.parentNode.nodeType!==Node.ELEMENT_NODE||!t(this._element).hasClass(c.ACTIVE)){var n=void 0,i=void 0,o=t(this._element).closest(d.UL)[0],s=r.getSelectorFromElement(this._element);o&&(i=t.makeArray(t(o).find(d.ACTIVE)),i=i[i.length-1]);var a=t.Event(u.HIDE,{relatedTarget:this._element}),l=t.Event(u.SHOW,{relatedTarget:i});if(i&&t(i).trigger(a),t(this._element).trigger(l),!l.isDefaultPrevented()&&!a.isDefaultPrevented()){s&&(n=t(s)[0]),this._activate(this._element,o);var h=function(){var n=t.Event(u.HIDDEN,{relatedTarget:e._element}),o=t.Event(u.SHOWN,{relatedTarget:i});t(i).trigger(n),t(e._element).trigger(o)};n?this._activate(n,n.parentNode,h):h()}}}},{key:"dispose",value:function(){t.removeClass(this._element,s),this._element=null}},{key:"_activate",value:function(e,n,i){var o=t(n).find(d.ACTIVE_CHILD)[0],s=i&&r.supportsTransitionEnd()&&(o&&t(o).hasClass(c.FADE)||Boolean(t(n).find(d.FADE_CHILD)[0])),a=t.proxy(this._transitionComplete,this,e,o,s,i);o&&s?t(o).one(r.TRANSITION_END,a).emulateTransitionEnd(f):a(),o&&t(o).removeClass(c.IN)}},{key:"_transitionComplete",value:function(e,n,i,o){if(n){t(n).removeClass(c.ACTIVE);var s=t(n).find(d.DROPDOWN_ACTIVE_CHILD)[0];s&&t(s).removeClass(c.ACTIVE),n.setAttribute("aria-expanded",!1)}if(t(e).addClass(c.ACTIVE),e.setAttribute("aria-expanded",!0),i?(r.reflow(e),t(e).addClass(c.IN)):t(e).removeClass(c.FADE),e.parentNode&&t(e.parentNode).hasClass(c.DROPDOWN_MENU)){var a=t(e).closest(d.DROPDOWN)[0];a&&t(a).find(d.DROPDOWN_TOGGLE).addClass(c.ACTIVE),e.setAttribute("aria-expanded",!0)}o&&o()}}],[{key:"_jQueryInterface",value:function(n){return this.each(function(){var i=t(this),o=i.data(s);if(o||(o=o=new e(this),i.data(s,o)),"string"==typeof n){if(void 0===o[n])throw new Error('No method named "'+n+'"');o[n]()}})}},{key:"VERSION",get:function(){return i}}]),e}();return t(document).on(u.CLICK_DATA_API,d.DATA_TOGGLE,function(e){e.preventDefault(),p._jQueryInterface.call(t(this),"show")}),t.fn[e]=p._jQueryInterface,t.fn[e].Constructor=p,t.fn[e].noConflict=function(){return t.fn[e]=h,p._jQueryInterface},p}(jQuery),function(t){if(void 0===window.Tether)throw new Error("Bootstrap tooltips require Tether (http://github.hubspot.com/tether/)");var e="tooltip",i="4.0.0-alpha.4",s="bs.tooltip",a="."+s,l=t.fn[e],h=150,f="bs-tether",u={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:"0 0",constraints:[]},c={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"string",constraints:"array"},d={TOP:"bottom center",RIGHT:"middle left",BOTTOM:"top center",LEFT:"middle right"},p={IN:"in",OUT:"out"},g={HIDE:"hide"+a,HIDDEN:"hidden"+a,SHOW:"show"+a,SHOWN:"shown"+a,INSERTED:"inserted"+a,CLICK:"click"+a,FOCUSIN:"focusin"+a,FOCUSOUT:"focusout"+a,MOUSEENTER:"mouseenter"+a,MOUSELEAVE:"mouseleave"+a},v={FADE:"fade",IN:"in"},m={TOOLTIP:".tooltip",TOOLTIP_INNER:".tooltip-inner"},_={element:!1,enabled:!1},y={HOVER:"hover",FOCUS:"focus",CLICK:"click",MANUAL:"manual"},E=function(){function l(t,e){n(this,l),this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._tether=null,this.element=t,this.config=this._getConfig(e),this.tip=null,this._setListeners()}return o(l,[{key:"enable",value:function(){this._isEnabled=!0}},{key:"disable",value:function(){this._isEnabled=!1}},{key:"toggleEnabled",value:function(){this._isEnabled=!this._isEnabled}},{key:"toggle",value:function(e){if(e){var n=this.constructor.DATA_KEY,i=t(e.currentTarget).data(n);i||(i=new this.constructor(e.currentTarget,this._getDelegateConfig()),t(e.currentTarget).data(n,i)),i._activeTrigger.click=!i._activeTrigger.click,i._isWithActiveTrigger()?i._enter(null,i):i._leave(null,i)}else{if(t(this.getTipElement()).hasClass(v.IN))return void this._leave(null,this);this._enter(null,this)}}},{key:"dispose",value:function(){clearTimeout(this._timeout),this.cleanupTether(),t.removeData(this.element,this.constructor.DATA_KEY),t(this.element).off(this.constructor.EVENT_KEY),this.tip&&t(this.tip).remove(),this._isEnabled=null,this._timeout=null,this._hoverState=null,this._activeTrigger=null,this._tether=null,this.element=null,this.config=null,this.tip=null}},{key:"show",value:function(){var e=this,n=t.Event(this.constructor.Event.SHOW);if(this.isWithContent()&&this._isEnabled){t(this.element).trigger(n);var i=t.contains(this.element.ownerDocument.documentElement,this.element);if(n.isDefaultPrevented()||!i)return;var o=this.getTipElement(),s=r.getUID(this.constructor.NAME);o.setAttribute("id",s),this.element.setAttribute("aria-describedby",s),this.setContent(),this.config.animation&&t(o).addClass(v.FADE);var a="function"==typeof this.config.placement?this.config.placement.call(this,o,this.element):this.config.placement,h=this._getAttachment(a);t(o).data(this.constructor.DATA_KEY,this).appendTo(document.body),t(this.element).trigger(this.constructor.Event.INSERTED),this._tether=new Tether({attachment:h,element:o,target:this.element,classes:_,classPrefix:f,offset:this.config.offset,constraints:this.config.constraints,addTargetClasses:!1}),r.reflow(o),this._tether.position(),t(o).addClass(v.IN);var u=function(){var n=e._hoverState;e._hoverState=null,t(e.element).trigger(e.constructor.Event.SHOWN),n===p.OUT&&e._leave(null,e)};if(r.supportsTransitionEnd()&&t(this.tip).hasClass(v.FADE))return void t(this.tip).one(r.TRANSITION_END,u).emulateTransitionEnd(l._TRANSITION_DURATION);u()}}},{key:"hide",value:function(e){var n=this,i=this.getTipElement(),o=t.Event(this.constructor.Event.HIDE),s=function(){n._hoverState!==p.IN&&i.parentNode&&i.parentNode.removeChild(i),n.element.removeAttribute("aria-describedby"),t(n.element).trigger(n.constructor.Event.HIDDEN),n.cleanupTether(),e&&e()};t(this.element).trigger(o),o.isDefaultPrevented()||(t(i).removeClass(v.IN),r.supportsTransitionEnd()&&t(this.tip).hasClass(v.FADE)?t(i).one(r.TRANSITION_END,s).emulateTransitionEnd(h):s(),this._hoverState="")}},{key:"isWithContent",value:function(){return Boolean(this.getTitle())}},{key:"getTipElement",value:function(){return this.tip=this.tip||t(this.config.template)[0]}},{key:"setContent",value:function(){var e=t(this.getTipElement());this.setElementContent(e.find(m.TOOLTIP_INNER),this.getTitle()),e.removeClass(v.FADE).removeClass(v.IN),this.cleanupTether()}},{key:"setElementContent",value:function(e,n){var i=this.config.html;"object"==typeof n&&(n.nodeType||n.jquery)?i?t(n).parent().is(e)||e.empty().append(n):e.text(t(n).text()):e[i?"html":"text"](n)}},{key:"getTitle",value:function(){var t=this.element.getAttribute("data-original-title");return t||(t="function"==typeof this.config.title?this.config.title.call(this.element):this.config.title),t}},{key:"cleanupTether",value:function(){this._tether&&this._tether.destroy()}},{key:"_getAttachment",value:function(t){return d[t.toUpperCase()]}},{key:"_setListeners",value:function(){var e=this,n=this.config.trigger.split(" ");n.forEach(function(n){if("click"===n)t(e.element).on(e.constructor.Event.CLICK,e.config.selector,t.proxy(e.toggle,e));else if(n!==y.MANUAL){var i=n===y.HOVER?e.constructor.Event.MOUSEENTER:e.constructor.Event.FOCUSIN,o=n===y.HOVER?e.constructor.Event.MOUSELEAVE:e.constructor.Event.FOCUSOUT;t(e.element).on(i,e.config.selector,t.proxy(e._enter,e)).on(o,e.config.selector,t.proxy(e._leave,e))}}),this.config.selector?this.config=t.extend({},this.config,{trigger:"manual",selector:""}):this._fixTitle()}},{key:"_fixTitle",value:function(){var t=typeof this.element.getAttribute("data-original-title");(this.element.getAttribute("title")||"string"!==t)&&(this.element.setAttribute("data-original-title",this.element.getAttribute("title")||""),this.element.setAttribute("title",""))}},{key:"_enter",value:function(e,n){var i=this.constructor.DATA_KEY;return n=n||t(e.currentTarget).data(i),n||(n=new this.constructor(e.currentTarget,this._getDelegateConfig()),t(e.currentTarget).data(i,n)),e&&(n._activeTrigger["focusin"===e.type?y.FOCUS:y.HOVER]=!0),t(n.getTipElement()).hasClass(v.IN)||n._hoverState===p.IN?void(n._hoverState=p.IN):(clearTimeout(n._timeout),n._hoverState=p.IN,n.config.delay&&n.config.delay.show?void(n._timeout=setTimeout(function(){n._hoverState===p.IN&&n.show()},n.config.delay.show)):void n.show())}},{key:"_leave",value:function(e,n){var i=this.constructor.DATA_KEY;if(n=n||t(e.currentTarget).data(i),n||(n=new this.constructor(e.currentTarget,this._getDelegateConfig()),t(e.currentTarget).data(i,n)),e&&(n._activeTrigger["focusout"===e.type?y.FOCUS:y.HOVER]=!1),!n._isWithActiveTrigger())return clearTimeout(n._timeout),n._hoverState=p.OUT,n.config.delay&&n.config.delay.hide?void(n._timeout=setTimeout(function(){n._hoverState===p.OUT&&n.hide()},n.config.delay.hide)):void n.hide()}},{key:"_isWithActiveTrigger",value:function(){for(var t in this._activeTrigger)if(this._activeTrigger[t])return!0;return!1}},{key:"_getConfig",value:function(n){return n=t.extend({},this.constructor.Default,t(this.element).data(),n),n.delay&&"number"==typeof n.delay&&(n.delay={show:n.delay,hide:n.delay}),r.typeCheckConfig(e,n,this.constructor.DefaultType),n}},{key:"_getDelegateConfig",value:function(){var t={};if(this.config)for(var e in this.config)this.constructor.Default[e]!==this.config[e]&&(t[e]=this.config[e]);return t}}],[{key:"_jQueryInterface",value:function(e){return this.each(function(){var n=t(this).data(s),i="object"==typeof e?e:null;if((n||!/destroy|hide/.test(e))&&(n||(n=new l(this,i),t(this).data(s,n)),"string"==typeof e)){if(void 0===n[e])throw new Error('No method named "'+e+'"');n[e]()}})}},{key:"VERSION",get:function(){return i}},{key:"Default",get:function(){return u}},{key:"NAME",get:function(){return e}},{key:"DATA_KEY",get:function(){return s}},{key:"Event",get:function(){return g}},{key:"EVENT_KEY",get:function(){return a}},{key:"DefaultType",get:function(){return c}}]),l}();return t.fn[e]=E._jQueryInterface,t.fn[e].Constructor=E,t.fn[e].noConflict=function(){return t.fn[e]=l,E._jQueryInterface},E}(jQuery));(function(t){var r="popover",a="4.0.0-alpha.4",l="bs.popover",h="."+l,f=t.fn[r],u=t.extend({},s.Default,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),c=t.extend({},s.DefaultType,{content:"(string|element|function)"}),d={FADE:"fade",IN:"in"},p={TITLE:".popover-title",CONTENT:".popover-content",ARROW:".popover-arrow"},g={HIDE:"hide"+h,HIDDEN:"hidden"+h,SHOW:"show"+h,SHOWN:"shown"+h,INSERTED:"inserted"+h,CLICK:"click"+h,FOCUSIN:"focusin"+h,FOCUSOUT:"focusout"+h,MOUSEENTER:"mouseenter"+h,MOUSELEAVE:"mouseleave"+h},v=function(s){function f(){n(this,f),i(Object.getPrototypeOf(f.prototype),"constructor",this).apply(this,arguments)}return e(f,s),o(f,[{key:"isWithContent",value:function(){return this.getTitle()||this._getContent()}},{key:"getTipElement",value:function(){return this.tip=this.tip||t(this.config.template)[0]}},{key:"setContent",value:function(){var e=t(this.getTipElement());this.setElementContent(e.find(p.TITLE),this.getTitle()),this.setElementContent(e.find(p.CONTENT),this._getContent()),e.removeClass(d.FADE).removeClass(d.IN),this.cleanupTether()}},{key:"_getContent",value:function(){return this.element.getAttribute("data-content")||("function"==typeof this.config.content?this.config.content.call(this.element):this.config.content)}}],[{key:"_jQueryInterface",value:function(e){return this.each(function(){var n=t(this).data(l),i="object"==typeof e?e:null;if((n||!/destroy|hide/.test(e))&&(n||(n=new f(this,i),t(this).data(l,n)),"string"==typeof e)){if(void 0===n[e])throw new Error('No method named "'+e+'"');n[e]()}})}},{key:"VERSION",get:function(){return a}},{key:"Default",get:function(){return u}},{key:"NAME",get:function(){return r}},{key:"DATA_KEY",get:function(){return l}},{key:"Event",get:function(){return g}},{key:"EVENT_KEY",get:function(){return h}},{key:"DefaultType",get:function(){return c}}]),f}(s);return t.fn[r]=v._jQueryInterface,t.fn[r].Constructor=v,t.fn[r].noConflict=function(){return t.fn[r]=f,v._jQueryInterface},v})(jQuery)}(jQuery)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vdmVuZG9yLmpzIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCA4MjI0MzhmY2NmZDM1MmM0Y2U4NSIsIndlYnBhY2s6Ly8vLi9+L3RldGhlci9kaXN0L2pzL3RldGhlci5qcz81ZDlmIiwid2VicGFjazovLy8uL34vdGV0aGVyL2Rpc3QvanMvdGV0aGVyLmpzP2JjY2IiLCJ3ZWJwYWNrOi8vLy4vfi90ZXRoZXIvZGlzdC9qcy90ZXRoZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9ib290c3RyYXAvZGlzdC9qcy9ib290c3RyYXAuanMiXSwibmFtZXMiOlsibW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImluc3RhbGxlZE1vZHVsZXMiLCJleHBvcnRzIiwibW9kdWxlIiwiaWQiLCJsb2FkZWQiLCJjYWxsIiwicGFyZW50SnNvbnBGdW5jdGlvbiIsIndpbmRvdyIsImNodW5rSWRzIiwibW9yZU1vZHVsZXMiLCJjaHVua0lkIiwiaSIsImNhbGxiYWNrcyIsImxlbmd0aCIsImluc3RhbGxlZENodW5rcyIsInB1c2giLCJhcHBseSIsInNoaWZ0IiwiMSIsImUiLCJjYWxsYmFjayIsInVuZGVmaW5lZCIsImhlYWQiLCJkb2N1bWVudCIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwic2NyaXB0IiwiY3JlYXRlRWxlbWVudCIsInR5cGUiLCJjaGFyc2V0IiwiYXN5bmMiLCJzcmMiLCJwIiwiYXBwZW5kQ2hpbGQiLCJtIiwiYyIsImdsb2JhbCIsInRoaXMiLCJfX1dFQlBBQ0tfQU1EX0RFRklORV9GQUNUT1JZX18iLCJfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyIsInJvb3QiLCJmYWN0b3J5IiwicmVxdWlyZSIsIl9jbGFzc0NhbGxDaGVjayIsImluc3RhbmNlIiwiQ29uc3RydWN0b3IiLCJUeXBlRXJyb3IiLCJnZXRBY3R1YWxCb3VuZGluZ0NsaWVudFJlY3QiLCJub2RlIiwiYm91bmRpbmdSZWN0IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwicmVjdCIsImsiLCJvd25lckRvY3VtZW50IiwiX2ZyYW1lRWxlbWVudCIsImRlZmF1bHRWaWV3IiwiZnJhbWVFbGVtZW50IiwiZnJhbWVSZWN0IiwidG9wIiwiYm90dG9tIiwibGVmdCIsInJpZ2h0IiwiZ2V0U2Nyb2xsUGFyZW50cyIsImVsIiwiY29tcHV0ZWRTdHlsZSIsImdldENvbXB1dGVkU3R5bGUiLCJwb3NpdGlvbiIsInBhcmVudHMiLCJwYXJlbnQiLCJwYXJlbnROb2RlIiwibm9kZVR5cGUiLCJzdHlsZSIsImVyciIsIl9zdHlsZSIsIm92ZXJmbG93Iiwib3ZlcmZsb3dYIiwib3ZlcmZsb3dZIiwidGVzdCIsImluZGV4T2YiLCJib2R5IiwicmVtb3ZlVXRpbEVsZW1lbnRzIiwiemVyb0VsZW1lbnQiLCJyZW1vdmVDaGlsZCIsImdldEJvdW5kcyIsImRvYyIsImRvY3VtZW50RWxlbWVudCIsImRvY0VsIiwiYm94Iiwib3JpZ2luIiwiZ2V0T3JpZ2luIiwid2lkdGgiLCJzY3JvbGxXaWR0aCIsImhlaWdodCIsInNjcm9sbEhlaWdodCIsImNsaWVudFRvcCIsImNsaWVudExlZnQiLCJjbGllbnRXaWR0aCIsImNsaWVudEhlaWdodCIsImdldE9mZnNldFBhcmVudCIsIm9mZnNldFBhcmVudCIsImdldFNjcm9sbEJhclNpemUiLCJfc2Nyb2xsQmFyU2l6ZSIsImlubmVyIiwib3V0ZXIiLCJleHRlbmQiLCJwb2ludGVyRXZlbnRzIiwidmlzaWJpbGl0eSIsIndpZHRoQ29udGFpbmVkIiwib2Zmc2V0V2lkdGgiLCJ3aWR0aFNjcm9sbCIsIm91dCIsImFyZ3VtZW50cyIsImFyZ3MiLCJBcnJheSIsInByb3RvdHlwZSIsInNsaWNlIiwiZm9yRWFjaCIsIm9iaiIsImtleSIsImhhc093blByb3BlcnR5IiwicmVtb3ZlQ2xhc3MiLCJuYW1lIiwiY2xhc3NMaXN0Iiwic3BsaXQiLCJjbHMiLCJ0cmltIiwicmVtb3ZlIiwicmVnZXgiLCJSZWdFeHAiLCJqb2luIiwiY2xhc3NOYW1lIiwiZ2V0Q2xhc3NOYW1lIiwicmVwbGFjZSIsInNldENsYXNzTmFtZSIsImFkZENsYXNzIiwiYWRkIiwiaGFzQ2xhc3MiLCJjb250YWlucyIsIlNWR0FuaW1hdGVkU3RyaW5nIiwiYmFzZVZhbCIsInNldEF0dHJpYnV0ZSIsInVwZGF0ZUNsYXNzZXMiLCJhbGwiLCJfaW5oZXJpdHMiLCJzdWJDbGFzcyIsInN1cGVyQ2xhc3MiLCJPYmplY3QiLCJjcmVhdGUiLCJjb25zdHJ1Y3RvciIsInZhbHVlIiwiZW51bWVyYWJsZSIsIndyaXRhYmxlIiwiY29uZmlndXJhYmxlIiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJ3aXRoaW4iLCJhIiwiYiIsImRpZmYiLCJub3ciLCJwZXJmb3JtYW5jZSIsIkRhdGUiLCJhZGRPZmZzZXQiLCJfbGVuIiwib2Zmc2V0cyIsIl9rZXkiLCJfcmVmIiwicGFyc2VGbG9hdCIsIm9mZnNldFRvUHgiLCJvZmZzZXQiLCJzaXplIiwiZ2V0Qm91bmRpbmdSZWN0IiwidGV0aGVyIiwidG8iLCJzY3JvbGxQYXJlbnRzIiwicGFnZVhPZmZzZXQiLCJwYWdlWU9mZnNldCIsImlubmVyV2lkdGgiLCJpbm5lckhlaWdodCIsInBvcyIsIndpbiIsIkJPVU5EU19GT1JNQVQiLCJzaWRlIiwidG9VcHBlckNhc2UiLCJzdWJzdHIiLCJfY3JlYXRlQ2xhc3MiLCJkZWZpbmVQcm9wZXJ0aWVzIiwidGFyZ2V0IiwicHJvcHMiLCJkZXNjcmlwdG9yIiwiZGVmaW5lUHJvcGVydHkiLCJwcm90b1Byb3BzIiwic3RhdGljUHJvcHMiLCJUZXRoZXJCYXNlIiwidW5pcXVlSWQiLCJ6ZXJvUG9zQ2FjaGUiLCJnZXRBdHRyaWJ1dGUiLCJkZWZlciIsImRlZmVycmVkIiwiZm4iLCJmbHVzaCIsInBvcCIsIkV2ZW50ZWQiLCJldmVudCIsImhhbmRsZXIiLCJjdHgiLCJvbmNlIiwiYmluZGluZ3MiLCJvbiIsInNwbGljZSIsIl9iaW5kaW5ncyRldmVudCRpIiwiY29udGV4dCIsIlV0aWxzIiwiX3NsaWNlZFRvQXJyYXkiLCJzbGljZUl0ZXJhdG9yIiwiYXJyIiwiX2FyciIsIl9uIiwiX2QiLCJfZSIsIl9zIiwiX2kiLCJTeW1ib2wiLCJpdGVyYXRvciIsIm5leHQiLCJkb25lIiwiaXNBcnJheSIsIl9nZXQiLCJfeDYiLCJfeDciLCJfeDgiLCJfYWdhaW4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInJlY2VpdmVyIiwiRnVuY3Rpb24iLCJkZXNjIiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiZ2V0dGVyIiwiZ2V0IiwiZ2V0UHJvdG90eXBlT2YiLCJFcnJvciIsIl9UZXRoZXJCYXNlJFV0aWxzIiwidHJhbnNmb3JtS2V5IiwidHJhbnNmb3JtcyIsInRldGhlcnMiLCJsYXN0Q2FsbCIsImxhc3REdXJhdGlvbiIsInBlbmRpbmdUaW1lb3V0IiwidGljayIsIk1hdGgiLCJtaW4iLCJzZXRUaW1lb3V0IiwiY2xlYXJUaW1lb3V0IiwiYWRkRXZlbnRMaXN0ZW5lciIsIk1JUlJPUl9MUiIsImNlbnRlciIsIk1JUlJPUl9UQiIsIm1pZGRsZSIsIk9GRlNFVF9NQVAiLCJhdXRvVG9GaXhlZEF0dGFjaG1lbnQiLCJhdHRhY2htZW50IiwicmVsYXRpdmVUb0F0dGFjaG1lbnQiLCJhdHRhY2htZW50VG9PZmZzZXQiLCJwYXJzZU9mZnNldCIsIl92YWx1ZSRzcGxpdCIsIl92YWx1ZSRzcGxpdDIiLCJwYXJzZUF0dGFjaG1lbnQiLCJUZXRoZXJDbGFzcyIsIl9FdmVudGVkIiwib3B0aW9ucyIsIl90aGlzIiwiYmluZCIsImhpc3RvcnkiLCJzZXRPcHRpb25zIiwiaW5pdGlhbGl6ZSIsImNsYXNzZXMiLCJjbGFzc1ByZWZpeCIsIl90aGlzMiIsImRlZmF1bHRzIiwidGFyZ2V0T2Zmc2V0IiwidGFyZ2V0QXR0YWNobWVudCIsIl9vcHRpb25zIiwiZWxlbWVudCIsInRhcmdldE1vZGlmaWVyIiwianF1ZXJ5IiwicXVlcnlTZWxlY3RvciIsImdldENsYXNzIiwiYWRkVGFyZ2V0Q2xhc3NlcyIsImRpc2FibGUiLCJlbmFibGVkIiwiZW5hYmxlIiwiYm91bmRzIiwiaGFzQm90dG9tU2Nyb2xsIiwic2Nyb2xsQm90dG9tIiwiYm9yZGVyVG9wV2lkdGgiLCJib3JkZXJCb3R0b21XaWR0aCIsImJvcmRlckxlZnRXaWR0aCIsImZpdEFkaiIsInBvdyIsIm1heCIsInNjcm9sbFBlcmNlbnRhZ2UiLCJzY3JvbGxUb3AiLCJfY2FjaGUiLCJfdGhpczMiLCJfdGhpczQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiX3RoaXM1IiwiZWxlbWVudEF0dGFjaCIsInRhcmdldEF0dGFjaCIsIl90aGlzNiIsInNpZGVzIiwiX2FkZEF0dGFjaENsYXNzZXMiLCJfdGhpczciLCJmbHVzaENoYW5nZXMiLCJjbGVhckNhY2hlIiwidXBkYXRlQXR0YWNoQ2xhc3NlcyIsImVsZW1lbnRQb3MiLCJjYWNoZSIsImxhc3RTaXplIiwiX2xhc3RTaXplIiwidGFyZ2V0UG9zIiwiZ2V0VGFyZ2V0Qm91bmRzIiwidGFyZ2V0U2l6ZSIsIm1hbnVhbE9mZnNldCIsIm1hbnVhbFRhcmdldE9mZnNldCIsIl9tb2R1bGUyIiwicmV0Iiwic2Nyb2xsYmFyU2l6ZSIsInBhZ2UiLCJ2aWV3cG9ydCIsInBhcmVudEVsZW1lbnQiLCJvcHRpbWl6YXRpb25zIiwibW92ZUVsZW1lbnQiLCJvZmZzZXRQb3NpdGlvbiIsIm9mZnNldFBhcmVudFN0eWxlIiwib2Zmc2V0UGFyZW50U2l6ZSIsIm9mZnNldEJvcmRlciIsInRvTG93ZXJDYXNlIiwic2Nyb2xsTGVmdCIsIm1vdmUiLCJ1bnNoaWZ0IiwiX3RoaXM4Iiwic2FtZSIsImZvdW5kIiwicG9pbnQiLCJjc3MiLCJ0cmFuc2NyaWJlIiwiX3NhbWUiLCJfcG9zIiwiaGFzT3B0aW1pemF0aW9ucyIsImdwdSIsInlQb3MiLCJ4UG9zIiwibWF0Y2hNZWRpYSIsInJldGluYSIsIm1hdGNoZXMiLCJyb3VuZCIsIm1vdmVkIiwib2Zmc2V0UGFyZW50SXNCb2R5IiwiY3VycmVudE5vZGUiLCJ0YWdOYW1lIiwid3JpdGVDU1MiLCJ3cml0ZSIsInZhbCIsImVsVmFsIiwidHJpZ2dlciIsIlRldGhlciIsImNvbnN0cmFpbnRzIiwidGFyZ2V0SGVpZ2h0IiwidGFyZ2V0V2lkdGgiLCJhbGxDbGFzc2VzIiwiY29uc3RyYWludCIsIm91dE9mQm91bmRzQ2xhc3MiLCJwaW5uZWRDbGFzcyIsImFkZENsYXNzZXMiLCJ0QXR0YWNobWVudCIsImVBdHRhY2htZW50IiwicGluIiwiY2hhbmdlQXR0YWNoWCIsImNoYW5nZUF0dGFjaFkiLCJfYXR0YWNobWVudCRzcGxpdCIsIl9hdHRhY2htZW50JHNwbGl0MiIsIm1hcCIsInBpbm5lZCIsIm9vYiIsIm9vYkNsYXNzIiwiYWJ1dHRlZCIsInRhcmdldFBvc1NpZGUiLCJzaGlmdFRvcCIsInNoaWZ0TGVmdCIsIl9zaGlmdCIsIl9zaGlmdDIiLCJqUXVlcnkiLCIkIiwidmVyc2lvbiIsIl94IiwiX3gyIiwiX3gzIiwiVXRpbCIsInRvVHlwZSIsInRvU3RyaW5nIiwibWF0Y2giLCJpc0VsZW1lbnQiLCJnZXRTcGVjaWFsVHJhbnNpdGlvbkVuZEV2ZW50IiwiYmluZFR5cGUiLCJ0cmFuc2l0aW9uIiwiZW5kIiwiZGVsZWdhdGVUeXBlIiwiaGFuZGxlIiwiaXMiLCJoYW5kbGVPYmoiLCJ0cmFuc2l0aW9uRW5kVGVzdCIsIlFVbml0IiwiX25hbWUiLCJUcmFuc2l0aW9uRW5kRXZlbnQiLCJ0cmFuc2l0aW9uRW5kRW11bGF0b3IiLCJkdXJhdGlvbiIsImNhbGxlZCIsIm9uZSIsIlRSQU5TSVRJT05fRU5EIiwidHJpZ2dlclRyYW5zaXRpb25FbmQiLCJzZXRUcmFuc2l0aW9uRW5kU3VwcG9ydCIsImVtdWxhdGVUcmFuc2l0aW9uRW5kIiwic3VwcG9ydHNUcmFuc2l0aW9uRW5kIiwic3BlY2lhbCIsIk1BWF9VSUQiLCJXZWJraXRUcmFuc2l0aW9uIiwiTW96VHJhbnNpdGlvbiIsIk9UcmFuc2l0aW9uIiwiZ2V0VUlEIiwicHJlZml4IiwicmFuZG9tIiwiZ2V0RWxlbWVudEJ5SWQiLCJnZXRTZWxlY3RvckZyb21FbGVtZW50Iiwic2VsZWN0b3IiLCJyZWZsb3ciLCJvZmZzZXRIZWlnaHQiLCJCb29sZWFuIiwidHlwZUNoZWNrQ29uZmlnIiwiY29tcG9uZW50TmFtZSIsImNvbmZpZyIsImNvbmZpZ1R5cGVzIiwiZXhwZWN0ZWRUeXBlcyIsInZhbHVlVHlwZSIsIlRvb2x0aXAiLCJOQU1FIiwiVkVSU0lPTiIsIkRBVEFfS0VZIiwiRVZFTlRfS0VZIiwiREFUQV9BUElfS0VZIiwiSlFVRVJZX05PX0NPTkZMSUNUIiwiVFJBTlNJVElPTl9EVVJBVElPTiIsIlNlbGVjdG9yIiwiRElTTUlTUyIsIkV2ZW50IiwiQ0xPU0UiLCJDTE9TRUQiLCJDTElDS19EQVRBX0FQSSIsIkNsYXNzTmFtZSIsIkFMRVJUIiwiRkFERSIsIklOIiwiQWxlcnQiLCJfZWxlbWVudCIsInJvb3RFbGVtZW50IiwiX2dldFJvb3RFbGVtZW50IiwiY3VzdG9tRXZlbnQiLCJfdHJpZ2dlckNsb3NlRXZlbnQiLCJpc0RlZmF1bHRQcmV2ZW50ZWQiLCJfcmVtb3ZlRWxlbWVudCIsInJlbW92ZURhdGEiLCJjbG9zZXN0IiwiY2xvc2VFdmVudCIsInByb3h5IiwiX2Rlc3Ryb3lFbGVtZW50IiwiZGV0YWNoIiwiZWFjaCIsIiRlbGVtZW50IiwiZGF0YSIsImFsZXJ0SW5zdGFuY2UiLCJwcmV2ZW50RGVmYXVsdCIsImNsb3NlIiwiX2hhbmRsZURpc21pc3MiLCJfalF1ZXJ5SW50ZXJmYWNlIiwibm9Db25mbGljdCIsIkFDVElWRSIsIkJVVFRPTiIsIkZPQ1VTIiwiREFUQV9UT0dHTEVfQ0FSUk9UIiwiREFUQV9UT0dHTEUiLCJJTlBVVCIsIkZPQ1VTX0JMVVJfREFUQV9BUEkiLCJCdXR0b24iLCJ0cmlnZ2VyQ2hhbmdlRXZlbnQiLCJpbnB1dCIsImZpbmQiLCJjaGVja2VkIiwiYWN0aXZlRWxlbWVudCIsImZvY3VzIiwidG9nZ2xlQ2xhc3MiLCJidXR0b24iLCJBUlJPV19MRUZUX0tFWUNPREUiLCJBUlJPV19SSUdIVF9LRVlDT0RFIiwiRGVmYXVsdCIsImludGVydmFsIiwia2V5Ym9hcmQiLCJzbGlkZSIsInBhdXNlIiwid3JhcCIsIkRlZmF1bHRUeXBlIiwiRGlyZWN0aW9uIiwiTkVYVCIsIlBSRVZJT1VTIiwiU0xJREUiLCJTTElEIiwiS0VZRE9XTiIsIk1PVVNFRU5URVIiLCJNT1VTRUxFQVZFIiwiTE9BRF9EQVRBX0FQSSIsIkNBUk9VU0VMIiwiUklHSFQiLCJMRUZUIiwiSVRFTSIsIkFDVElWRV9JVEVNIiwiTkVYVF9QUkVWIiwiSU5ESUNBVE9SUyIsIkRBVEFfU0xJREUiLCJEQVRBX1JJREUiLCJDYXJvdXNlbCIsIl9pdGVtcyIsIl9pbnRlcnZhbCIsIl9hY3RpdmVFbGVtZW50IiwiX2lzUGF1c2VkIiwiX2lzU2xpZGluZyIsIl9jb25maWciLCJfZ2V0Q29uZmlnIiwiX2luZGljYXRvcnNFbGVtZW50IiwiX2FkZEV2ZW50TGlzdGVuZXJzIiwiX3NsaWRlIiwiaGlkZGVuIiwiY3ljbGUiLCJjbGVhckludGVydmFsIiwic2V0SW50ZXJ2YWwiLCJ2aXNpYmlsaXR5U3RhdGUiLCJuZXh0V2hlblZpc2libGUiLCJpbmRleCIsImFjdGl2ZUluZGV4IiwiX2dldEl0ZW1JbmRleCIsImRpcmVjdGlvbiIsIm9mZiIsIl9rZXlkb3duIiwid2hpY2giLCJwcmV2IiwibWFrZUFycmF5IiwiaXNOZXh0RGlyZWN0aW9uIiwiaXNQcmV2RGlyZWN0aW9uIiwibGFzdEl0ZW1JbmRleCIsImlzR29pbmdUb1dyYXAiLCJkZWx0YSIsIml0ZW1JbmRleCIsInJlbGF0ZWRUYXJnZXQiLCJkaXJlY3Rpb25hbENsYXNzbmFtZSIsInNsaWRlRXZlbnQiLCJuZXh0SW5kaWNhdG9yIiwiY2hpbGRyZW4iLCJuZXh0RWxlbWVudCIsIl9nZXRJdGVtQnlEaXJlY3Rpb24iLCJpc0N5Y2xpbmciLCJkaXJlY3Rpb25hbENsYXNzTmFtZSIsIl90cmlnZ2VyU2xpZGVFdmVudCIsIl9zZXRBY3RpdmVJbmRpY2F0b3JFbGVtZW50Iiwic2xpZEV2ZW50IiwiYWN0aW9uIiwic2xpZGVJbmRleCIsIl9kYXRhQXBpQ2xpY2tIYW5kbGVyIiwiJGNhcm91c2VsIiwidG9nZ2xlIiwiU0hPVyIsIlNIT1dOIiwiSElERSIsIkhJRERFTiIsIkNPTExBUFNFIiwiQ09MTEFQU0lORyIsIkNPTExBUFNFRCIsIkRpbWVuc2lvbiIsIldJRFRIIiwiSEVJR0hUIiwiQUNUSVZFUyIsIkNvbGxhcHNlIiwiX2lzVHJhbnNpdGlvbmluZyIsIl90cmlnZ2VyQXJyYXkiLCJfcGFyZW50IiwiX2dldFBhcmVudCIsIl9hZGRBcmlhQW5kQ29sbGFwc2VkQ2xhc3MiLCJoaWRlIiwic2hvdyIsImFjdGl2ZXMiLCJhY3RpdmVzRGF0YSIsInN0YXJ0RXZlbnQiLCJkaW1lbnNpb24iLCJfZ2V0RGltZW5zaW9uIiwiYXR0ciIsInNldFRyYW5zaXRpb25pbmciLCJjb21wbGV0ZSIsImNhcGl0YWxpemVkRGltZW5zaW9uIiwic2Nyb2xsU2l6ZSIsIm9mZnNldERpbWVuc2lvbiIsImlzVHJhbnNpdGlvbmluZyIsImhhc1dpZHRoIiwiX2dldFRhcmdldEZyb21FbGVtZW50IiwidHJpZ2dlckFycmF5IiwiaXNPcGVuIiwiJHRoaXMiLCJFU0NBUEVfS0VZQ09ERSIsIkFSUk9XX1VQX0tFWUNPREUiLCJBUlJPV19ET1dOX0tFWUNPREUiLCJSSUdIVF9NT1VTRV9CVVRUT05fV0hJQ0giLCJDTElDSyIsIktFWURPV05fREFUQV9BUEkiLCJCQUNLRFJPUCIsIkRJU0FCTEVEIiwiT1BFTiIsIkZPUk1fQ0hJTEQiLCJST0xFX01FTlUiLCJST0xFX0xJU1RCT1giLCJOQVZCQVJfTkFWIiwiVklTSUJMRV9JVEVNUyIsIkRyb3Bkb3duIiwiZGlzYWJsZWQiLCJfZ2V0UGFyZW50RnJvbUVsZW1lbnQiLCJpc0FjdGl2ZSIsIl9jbGVhck1lbnVzIiwiZHJvcGRvd24iLCJpbnNlcnRCZWZvcmUiLCJzaG93RXZlbnQiLCJiYWNrZHJvcCIsInRvZ2dsZXMiLCJoaWRlRXZlbnQiLCJzdG9wUHJvcGFnYXRpb24iLCJpdGVtcyIsImZpbHRlciIsIml0ZW0iLCJfZGF0YUFwaUtleWRvd25IYW5kbGVyIiwiQkFDS0RST1BfVFJBTlNJVElPTl9EVVJBVElPTiIsIkZPQ1VTSU4iLCJSRVNJWkUiLCJDTElDS19ESVNNSVNTIiwiS0VZRE9XTl9ESVNNSVNTIiwiTU9VU0VVUF9ESVNNSVNTIiwiTU9VU0VET1dOX0RJU01JU1MiLCJTQ1JPTExCQVJfTUVBU1VSRVIiLCJESUFMT0ciLCJEQVRBX0RJU01JU1MiLCJGSVhFRF9DT05URU5UIiwiTW9kYWwiLCJfZGlhbG9nIiwiX2JhY2tkcm9wIiwiX2lzU2hvd24iLCJfaXNCb2R5T3ZlcmZsb3dpbmciLCJfaWdub3JlQmFja2Ryb3BDbGljayIsIl9vcmlnaW5hbEJvZHlQYWRkaW5nIiwiX3Njcm9sbGJhcldpZHRoIiwiX2NoZWNrU2Nyb2xsYmFyIiwiX3NldFNjcm9sbGJhciIsIl9zZXRFc2NhcGVFdmVudCIsIl9zZXRSZXNpemVFdmVudCIsIl9zaG93QmFja2Ryb3AiLCJfc2hvd0VsZW1lbnQiLCJfaGlkZU1vZGFsIiwiTm9kZSIsIkVMRU1FTlRfTk9ERSIsImRpc3BsYXkiLCJyZW1vdmVBdHRyaWJ1dGUiLCJfZW5mb3JjZUZvY3VzIiwic2hvd25FdmVudCIsInRyYW5zaXRpb25Db21wbGV0ZSIsIl90aGlzOSIsImhhcyIsIl90aGlzMTAiLCJfaGFuZGxlVXBkYXRlIiwiX3RoaXMxMSIsIl9yZXNldEFkanVzdG1lbnRzIiwiX3Jlc2V0U2Nyb2xsYmFyIiwiX3RoaXMxMiIsImFuaW1hdGUiLCJkb0FuaW1hdGUiLCJhcHBlbmRUbyIsImN1cnJlbnRUYXJnZXQiLCJjYWxsYmFja1JlbW92ZSIsIl9yZW1vdmVCYWNrZHJvcCIsIl9hZGp1c3REaWFsb2ciLCJpc01vZGFsT3ZlcmZsb3dpbmciLCJwYWRkaW5nTGVmdCIsInBhZGRpbmdSaWdodCIsIl9nZXRTY3JvbGxiYXJXaWR0aCIsImJvZHlQYWRkaW5nIiwicGFyc2VJbnQiLCJzY3JvbGxEaXYiLCJzY3JvbGxiYXJXaWR0aCIsIl90aGlzMTMiLCIkdGFyZ2V0IiwibWV0aG9kIiwiQUNUSVZBVEUiLCJTQ1JPTEwiLCJEUk9QRE9XTl9JVEVNIiwiRFJPUERPV05fTUVOVSIsIk5BVl9MSU5LIiwiTkFWIiwiREFUQV9TUFkiLCJMSVNUX0lURU0iLCJMSSIsIkxJX0RST1BET1dOIiwiTkFWX0xJTktTIiwiRFJPUERPV04iLCJEUk9QRE9XTl9JVEVNUyIsIkRST1BET1dOX1RPR0dMRSIsIk9mZnNldE1ldGhvZCIsIk9GRlNFVCIsIlBPU0lUSU9OIiwiU2Nyb2xsU3B5IiwiX3Njcm9sbEVsZW1lbnQiLCJfc2VsZWN0b3IiLCJfb2Zmc2V0cyIsIl90YXJnZXRzIiwiX2FjdGl2ZVRhcmdldCIsIl9zY3JvbGxIZWlnaHQiLCJfcHJvY2VzcyIsInJlZnJlc2giLCJfdGhpczE0IiwiYXV0b01ldGhvZCIsIm9mZnNldE1ldGhvZCIsIm9mZnNldEJhc2UiLCJfZ2V0U2Nyb2xsVG9wIiwiX2dldFNjcm9sbEhlaWdodCIsInRhcmdldHMiLCJ0YXJnZXRTZWxlY3RvciIsInNvcnQiLCJzY3JvbGxZIiwibWF4U2Nyb2xsIiwiX2FjdGl2YXRlIiwiX2NsZWFyIiwiaXNBY3RpdmVUYXJnZXQiLCJxdWVyaWVzIiwiJGxpbmsiLCJzY3JvbGxTcHlzIiwiJHNweSIsIkEiLCJVTCIsIkZBREVfQ0hJTEQiLCJBQ1RJVkVfQ0hJTEQiLCJEUk9QRE9XTl9BQ1RJVkVfQ0hJTEQiLCJUYWIiLCJfdGhpczE1IiwicHJldmlvdXMiLCJ1bEVsZW1lbnQiLCJoaWRkZW5FdmVudCIsImNvbnRhaW5lciIsImFjdGl2ZSIsIl90cmFuc2l0aW9uQ29tcGxldGUiLCJkcm9wZG93bkNoaWxkIiwiZHJvcGRvd25FbGVtZW50IiwiQ0xBU1NfUFJFRklYIiwiYW5pbWF0aW9uIiwidGVtcGxhdGUiLCJ0aXRsZSIsImRlbGF5IiwiaHRtbCIsInBsYWNlbWVudCIsIkF0dGFjaG1lbnRNYXAiLCJUT1AiLCJCT1RUT00iLCJIb3ZlclN0YXRlIiwiT1VUIiwiSU5TRVJURUQiLCJGT0NVU09VVCIsIlRPT0xUSVAiLCJUT09MVElQX0lOTkVSIiwiVHJpZ2dlciIsIkhPVkVSIiwiTUFOVUFMIiwiX2lzRW5hYmxlZCIsIl90aW1lb3V0IiwiX2hvdmVyU3RhdGUiLCJfYWN0aXZlVHJpZ2dlciIsIl90ZXRoZXIiLCJ0aXAiLCJfc2V0TGlzdGVuZXJzIiwiZGF0YUtleSIsIl9nZXREZWxlZ2F0ZUNvbmZpZyIsImNsaWNrIiwiX2lzV2l0aEFjdGl2ZVRyaWdnZXIiLCJfZW50ZXIiLCJfbGVhdmUiLCJnZXRUaXBFbGVtZW50IiwiY2xlYW51cFRldGhlciIsIl90aGlzMTYiLCJpc1dpdGhDb250ZW50IiwiaXNJblRoZURvbSIsInRpcElkIiwic2V0Q29udGVudCIsIl9nZXRBdHRhY2htZW50IiwicHJldkhvdmVyU3RhdGUiLCJfVFJBTlNJVElPTl9EVVJBVElPTiIsIl90aGlzMTciLCJnZXRUaXRsZSIsIiR0aXAiLCJzZXRFbGVtZW50Q29udGVudCIsImNvbnRlbnQiLCJlbXB0eSIsImFwcGVuZCIsInRleHQiLCJkZXN0cm95IiwiX3RoaXMxOCIsInRyaWdnZXJzIiwiZXZlbnRJbiIsImV2ZW50T3V0IiwiX2ZpeFRpdGxlIiwidGl0bGVUeXBlIiwiVElUTEUiLCJDT05URU5UIiwiQVJST1ciLCJQb3BvdmVyIiwiX1Rvb2x0aXAiLCJfZ2V0Q29udGVudCJdLCJtYXBwaW5ncyI6IkNBQVMsU0FBVUEsR0NtQ25CLFFBQUFDLEdBQUFDLEdBR0EsR0FBQUMsRUFBQUQsR0FDQSxNQUFBQyxHQUFBRCxHQUFBRSxPQUdBLElBQUFDLEdBQUFGLEVBQUFELElBQ0FFLFdBQ0FFLEdBQUFKLEVBQ0FLLFFBQUEsRUFVQSxPQU5BUCxHQUFBRSxHQUFBTSxLQUFBSCxFQUFBRCxRQUFBQyxJQUFBRCxRQUFBSCxHQUdBSSxFQUFBRSxRQUFBLEVBR0FGLEVBQUFELFFBdERBLEdBQUFLLEdBQUFDLE9BQUEsWUFDQUEsUUFBQSxzQkFBQUMsRUFBQUMsR0FJQSxJQURBLEdBQUFWLEdBQUFXLEVBQUFDLEVBQUEsRUFBQUMsS0FDUUQsRUFBQUgsRUFBQUssT0FBb0JGLElBQzVCRCxFQUFBRixFQUFBRyxH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UCxHQUFBSyxFQUNBbVgsRUFBQWxWLGtCQUdBa1YsSUFDQzdhLFNBRUFBIiwiZmlsZSI6InZlbmRvci5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXBcbi8qKioqKiovIFx0Ly8gaW5zdGFsbCBhIEpTT05QIGNhbGxiYWNrIGZvciBjaHVuayBsb2FkaW5nXG4vKioqKioqLyBcdHZhciBwYXJlbnRKc29ucEZ1bmN0aW9uID0gd2luZG93W1wid2VicGFja0pzb25wXCJdO1xuLyoqKioqKi8gXHR3aW5kb3dbXCJ3ZWJwYWNrSnNvbnBcIl0gPSBmdW5jdGlvbiB3ZWJwYWNrSnNvbnBDYWxsYmFjayhjaHVua0lkcywgbW9yZU1vZHVsZXMpIHtcbi8qKioqKiovIFx0XHQvLyBhZGQgXCJtb3JlTW9kdWxlc1wiIHRvIHRoZSBtb2R1bGVzIG9iamVjdCxcbi8qKioqKiovIFx0XHQvLyB0aGVuIGZsYWcgYWxsIFwiY2h1bmtJZHNcIiBhcyBsb2FkZWQgYW5kIGZpcmUgY2FsbGJhY2tcbi8qKioqKiovIFx0XHR2YXIgbW9kdWxlSWQsIGNodW5rSWQsIGkgPSAwLCBjYWxsYmFja3MgPSBbXTtcbi8qKioqKiovIFx0XHRmb3IoO2kgPCBjaHVua0lkcy5sZW5ndGg7IGkrKykge1xuLyoqKioqKi8gXHRcdFx0Y2h1bmtJZCA9IGNodW5rSWRzW2ldO1xuLyoqKioqKi8gXHRcdFx0aWYoaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdKVxuLyoqKioqKi8gXHRcdFx0XHRjYWxsYmFja3MucHVzaC5hcHBseShjYWxsYmFja3MsIGluc3RhbGxlZENodW5rc1tjaHVua0lkXSk7XG4vKioqKioqLyBcdFx0XHRpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPSAwO1xuLyoqKioqKi8gXHRcdH1cbi8qKioqKiovIFx0XHRmb3IobW9kdWxlSWQgaW4gbW9yZU1vZHVsZXMpIHtcbi8qKioqKiovIFx0XHRcdG1vZHVsZXNbbW9kdWxlSWRdID0gbW9yZU1vZHVsZXNbbW9kdWxlSWRdO1xuLyoqKioqKi8gXHRcdH1cbi8qKioqKiovIFx0XHRpZihwYXJlbnRKc29ucEZ1bmN0aW9uKSBwYXJlbnRKc29ucEZ1bmN0aW9uKGNodW5rSWRzLCBtb3JlTW9kdWxlcyk7XG4vKioqKioqLyBcdFx0d2hpbGUoY2FsbGJhY2tzLmxlbmd0aClcbi8qKioqKiovIFx0XHRcdGNhbGxiYWNrcy5zaGlmdCgpLmNhbGwobnVsbCwgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG4vKioqKioqLyBcdFx0aWYobW9yZU1vZHVsZXNbMF0pIHtcbi8qKioqKiovIFx0XHRcdGluc3RhbGxlZE1vZHVsZXNbMF0gPSAwO1xuLyoqKioqKi8gXHRcdFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XG4vKioqKioqLyBcdFx0fVxuLyoqKioqKi8gXHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gb2JqZWN0IHRvIHN0b3JlIGxvYWRlZCBhbmQgbG9hZGluZyBjaHVua3Ncbi8qKioqKiovIFx0Ly8gXCIwXCIgbWVhbnMgXCJhbHJlYWR5IGxvYWRlZFwiXG4vKioqKioqLyBcdC8vIEFycmF5IG1lYW5zIFwibG9hZGluZ1wiLCBhcnJheSBjb250YWlucyBjYWxsYmFja3Ncbi8qKioqKiovIFx0dmFyIGluc3RhbGxlZENodW5rcyA9IHtcbi8qKioqKiovIFx0XHQxOjBcbi8qKioqKiovIFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4vKioqKioqLyBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4vKioqKioqLyBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pXG4vKioqKioqLyBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbi8qKioqKiovIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4vKioqKioqLyBcdFx0XHRleHBvcnRzOiB7fSxcbi8qKioqKiovIFx0XHRcdGlkOiBtb2R1bGVJZCxcbi8qKioqKiovIFx0XHRcdGxvYWRlZDogZmFsc2Vcbi8qKioqKiovIFx0XHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbi8qKioqKiovIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuLyoqKioqKi8gXHRcdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuLyoqKioqKi8gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbi8qKioqKiovIFx0fVxuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gVGhpcyBmaWxlIGNvbnRhaW5zIG9ubHkgdGhlIGVudHJ5IGNodW5rLlxuLyoqKioqKi8gXHQvLyBUaGUgY2h1bmsgbG9hZGluZyBmdW5jdGlvbiBmb3IgYWRkaXRpb25hbCBjaHVua3Ncbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5lID0gZnVuY3Rpb24gcmVxdWlyZUVuc3VyZShjaHVua0lkLCBjYWxsYmFjaykge1xuLyoqKioqKi8gXHRcdC8vIFwiMFwiIGlzIHRoZSBzaWduYWwgZm9yIFwiYWxyZWFkeSBsb2FkZWRcIlxuLyoqKioqKi8gXHRcdGlmKGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9PT0gMClcbi8qKioqKiovIFx0XHRcdHJldHVybiBjYWxsYmFjay5jYWxsKG51bGwsIF9fd2VicGFja19yZXF1aXJlX18pO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBhbiBhcnJheSBtZWFucyBcImN1cnJlbnRseSBsb2FkaW5nXCIuXG4vKioqKioqLyBcdFx0aWYoaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdICE9PSB1bmRlZmluZWQpIHtcbi8qKioqKiovIFx0XHRcdGluc3RhbGxlZENodW5rc1tjaHVua0lkXS5wdXNoKGNhbGxiYWNrKTtcbi8qKioqKiovIFx0XHR9IGVsc2Uge1xuLyoqKioqKi8gXHRcdFx0Ly8gc3RhcnQgY2h1bmsgbG9hZGluZ1xuLyoqKioqKi8gXHRcdFx0aW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdID0gW2NhbGxiYWNrXTtcbi8qKioqKiovIFx0XHRcdHZhciBoZWFkID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXTtcbi8qKioqKiovIFx0XHRcdHZhciBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcbi8qKioqKiovIFx0XHRcdHNjcmlwdC50eXBlID0gJ3RleHQvamF2YXNjcmlwdCc7XG4vKioqKioqLyBcdFx0XHRzY3JpcHQuY2hhcnNldCA9ICd1dGYtOCc7XG4vKioqKioqLyBcdFx0XHRzY3JpcHQuYXN5bmMgPSB0cnVlO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHRcdHNjcmlwdC5zcmMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLnAgKyBcIlwiICsgY2h1bmtJZCArIFwiLmFwcC5qc1wiO1xuLyoqKioqKi8gXHRcdFx0aGVhZC5hcHBlbmRDaGlsZChzY3JpcHQpO1xuLyoqKioqKi8gXHRcdH1cbi8qKioqKiovIFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcbi8qKioqKiovIH0pXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKioqKi8gKFtcbi8qIDAgKi8sXG4vKiAxICovLFxuLyogMiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKGdsb2JhbCkge21vZHVsZS5leHBvcnRzID0gZ2xvYmFsW1wiVGV0aGVyXCJdID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIChmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0oKSkpKVxuXG4vKioqLyB9LFxuLyogMyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKGdsb2JhbCkge21vZHVsZS5leHBvcnRzID0gZ2xvYmFsW1wiJFwiXSA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCAoZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KCkpKSlcblxuLyoqKi8gfSxcbi8qIDQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBfX1dFQlBBQ0tfQU1EX0RFRklORV9GQUNUT1JZX18sIF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fOy8qISB0ZXRoZXIgMS4zLjcgKi9cblx0XG5cdChmdW5jdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdCAgaWYgKHRydWUpIHtcblx0ICAgICEoX19XRUJQQUNLX0FNRF9ERUZJTkVfRkFDVE9SWV9fID0gKGZhY3RvcnkpLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyA9ICh0eXBlb2YgX19XRUJQQUNLX0FNRF9ERUZJTkVfRkFDVE9SWV9fID09PSAnZnVuY3Rpb24nID8gKF9fV0VCUEFDS19BTURfREVGSU5FX0ZBQ1RPUllfXy5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18sIGV4cG9ydHMsIG1vZHVsZSkpIDogX19XRUJQQUNLX0FNRF9ERUZJTkVfRkFDVE9SWV9fKSwgX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18gIT09IHVuZGVmaW5lZCAmJiAobW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXykpO1xuXHQgIH0gZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKSB7XG5cdCAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkocmVxdWlyZSwgZXhwb3J0cywgbW9kdWxlKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgcm9vdC5UZXRoZXIgPSBmYWN0b3J5KCk7XG5cdCAgfVxuXHR9KHRoaXMsIGZ1bmN0aW9uKHJlcXVpcmUsIGV4cG9ydHMsIG1vZHVsZSkge1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IChmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoJ3ZhbHVlJyBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSkoKTtcblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uJyk7IH0gfVxuXHRcblx0dmFyIFRldGhlckJhc2UgPSB1bmRlZmluZWQ7XG5cdGlmICh0eXBlb2YgVGV0aGVyQmFzZSA9PT0gJ3VuZGVmaW5lZCcpIHtcblx0ICBUZXRoZXJCYXNlID0geyBtb2R1bGVzOiBbXSB9O1xuXHR9XG5cdFxuXHR2YXIgemVyb0VsZW1lbnQgPSBudWxsO1xuXHRcblx0Ly8gU2FtZSBhcyBuYXRpdmUgZ2V0Qm91bmRpbmdDbGllbnRSZWN0LCBleGNlcHQgaXQgdGFrZXMgaW50byBhY2NvdW50IHBhcmVudCA8ZnJhbWU+IG9mZnNldHNcblx0Ly8gaWYgdGhlIGVsZW1lbnQgbGllcyB3aXRoaW4gYSBuZXN0ZWQgZG9jdW1lbnQgKDxmcmFtZT4gb3IgPGlmcmFtZT4tbGlrZSkuXG5cdGZ1bmN0aW9uIGdldEFjdHVhbEJvdW5kaW5nQ2xpZW50UmVjdChub2RlKSB7XG5cdCAgdmFyIGJvdW5kaW5nUmVjdCA9IG5vZGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cdFxuXHQgIC8vIFRoZSBvcmlnaW5hbCBvYmplY3QgcmV0dXJuZWQgYnkgZ2V0Qm91bmRpbmdDbGllbnRSZWN0IGlzIGltbXV0YWJsZSwgc28gd2UgY2xvbmUgaXRcblx0ICAvLyBXZSBjYW4ndCB1c2UgZXh0ZW5kIGJlY2F1c2UgdGhlIHByb3BlcnRpZXMgYXJlIG5vdCBjb25zaWRlcmVkIHBhcnQgb2YgdGhlIG9iamVjdCBieSBoYXNPd25Qcm9wZXJ0eSBpbiBJRTlcblx0ICB2YXIgcmVjdCA9IHt9O1xuXHQgIGZvciAodmFyIGsgaW4gYm91bmRpbmdSZWN0KSB7XG5cdCAgICByZWN0W2tdID0gYm91bmRpbmdSZWN0W2tdO1xuXHQgIH1cblx0XG5cdCAgaWYgKG5vZGUub3duZXJEb2N1bWVudCAhPT0gZG9jdW1lbnQpIHtcblx0ICAgIHZhciBfZnJhbWVFbGVtZW50ID0gbm9kZS5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3LmZyYW1lRWxlbWVudDtcblx0ICAgIGlmIChfZnJhbWVFbGVtZW50KSB7XG5cdCAgICAgIHZhciBmcmFtZVJlY3QgPSBnZXRBY3R1YWxCb3VuZGluZ0NsaWVudFJlY3QoX2ZyYW1lRWxlbWVudCk7XG5cdCAgICAgIHJlY3QudG9wICs9IGZyYW1lUmVjdC50b3A7XG5cdCAgICAgIHJlY3QuYm90dG9tICs9IGZyYW1lUmVjdC50b3A7XG5cdCAgICAgIHJlY3QubGVmdCArPSBmcmFtZVJlY3QubGVmdDtcblx0ICAgICAgcmVjdC5yaWdodCArPSBmcmFtZVJlY3QubGVmdDtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHJldHVybiByZWN0O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBnZXRTY3JvbGxQYXJlbnRzKGVsKSB7XG5cdCAgLy8gSW4gZmlyZWZveCBpZiB0aGUgZWwgaXMgaW5zaWRlIGFuIGlmcmFtZSB3aXRoIGRpc3BsYXk6IG5vbmU7IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKCkgd2lsbCByZXR1cm4gbnVsbDtcblx0ICAvLyBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD01NDgzOTdcblx0ICB2YXIgY29tcHV0ZWRTdHlsZSA9IGdldENvbXB1dGVkU3R5bGUoZWwpIHx8IHt9O1xuXHQgIHZhciBwb3NpdGlvbiA9IGNvbXB1dGVkU3R5bGUucG9zaXRpb247XG5cdCAgdmFyIHBhcmVudHMgPSBbXTtcblx0XG5cdCAgaWYgKHBvc2l0aW9uID09PSAnZml4ZWQnKSB7XG5cdCAgICByZXR1cm4gW2VsXTtcblx0ICB9XG5cdFxuXHQgIHZhciBwYXJlbnQgPSBlbDtcblx0ICB3aGlsZSAoKHBhcmVudCA9IHBhcmVudC5wYXJlbnROb2RlKSAmJiBwYXJlbnQgJiYgcGFyZW50Lm5vZGVUeXBlID09PSAxKSB7XG5cdCAgICB2YXIgc3R5bGUgPSB1bmRlZmluZWQ7XG5cdCAgICB0cnkge1xuXHQgICAgICBzdHlsZSA9IGdldENvbXB1dGVkU3R5bGUocGFyZW50KTtcblx0ICAgIH0gY2F0Y2ggKGVycikge31cblx0XG5cdCAgICBpZiAodHlwZW9mIHN0eWxlID09PSAndW5kZWZpbmVkJyB8fCBzdHlsZSA9PT0gbnVsbCkge1xuXHQgICAgICBwYXJlbnRzLnB1c2gocGFyZW50KTtcblx0ICAgICAgcmV0dXJuIHBhcmVudHM7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIF9zdHlsZSA9IHN0eWxlO1xuXHQgICAgdmFyIG92ZXJmbG93ID0gX3N0eWxlLm92ZXJmbG93O1xuXHQgICAgdmFyIG92ZXJmbG93WCA9IF9zdHlsZS5vdmVyZmxvd1g7XG5cdCAgICB2YXIgb3ZlcmZsb3dZID0gX3N0eWxlLm92ZXJmbG93WTtcblx0XG5cdCAgICBpZiAoLyhhdXRvfHNjcm9sbCkvLnRlc3Qob3ZlcmZsb3cgKyBvdmVyZmxvd1kgKyBvdmVyZmxvd1gpKSB7XG5cdCAgICAgIGlmIChwb3NpdGlvbiAhPT0gJ2Fic29sdXRlJyB8fCBbJ3JlbGF0aXZlJywgJ2Fic29sdXRlJywgJ2ZpeGVkJ10uaW5kZXhPZihzdHlsZS5wb3NpdGlvbikgPj0gMCkge1xuXHQgICAgICAgIHBhcmVudHMucHVzaChwYXJlbnQpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBwYXJlbnRzLnB1c2goZWwub3duZXJEb2N1bWVudC5ib2R5KTtcblx0XG5cdCAgLy8gSWYgdGhlIG5vZGUgaXMgd2l0aGluIGEgZnJhbWUsIGFjY291bnQgZm9yIHRoZSBwYXJlbnQgd2luZG93IHNjcm9sbFxuXHQgIGlmIChlbC5vd25lckRvY3VtZW50ICE9PSBkb2N1bWVudCkge1xuXHQgICAgcGFyZW50cy5wdXNoKGVsLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcpO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIHBhcmVudHM7XG5cdH1cblx0XG5cdHZhciB1bmlxdWVJZCA9IChmdW5jdGlvbiAoKSB7XG5cdCAgdmFyIGlkID0gMDtcblx0ICByZXR1cm4gZnVuY3Rpb24gKCkge1xuXHQgICAgcmV0dXJuICsraWQ7XG5cdCAgfTtcblx0fSkoKTtcblx0XG5cdHZhciB6ZXJvUG9zQ2FjaGUgPSB7fTtcblx0dmFyIGdldE9yaWdpbiA9IGZ1bmN0aW9uIGdldE9yaWdpbigpIHtcblx0ICAvLyBnZXRCb3VuZGluZ0NsaWVudFJlY3QgaXMgdW5mb3J0dW5hdGVseSB0b28gYWNjdXJhdGUuICBJdCBpbnRyb2R1Y2VzIGEgcGl4ZWwgb3IgdHdvIG9mXG5cdCAgLy8gaml0dGVyIGFzIHRoZSB1c2VyIHNjcm9sbHMgdGhhdCBtZXNzZXMgd2l0aCBvdXIgYWJpbGl0eSB0byBkZXRlY3QgaWYgdHdvIHBvc2l0aW9uc1xuXHQgIC8vIGFyZSBlcXVpdmlsYW50IG9yIG5vdC4gIFdlIHBsYWNlIGFuIGVsZW1lbnQgYXQgdGhlIHRvcCBsZWZ0IG9mIHRoZSBwYWdlIHRoYXQgd2lsbFxuXHQgIC8vIGdldCB0aGUgc2FtZSBqaXR0ZXIsIHNvIHdlIGNhbiBjYW5jZWwgdGhlIHR3byBvdXQuXG5cdCAgdmFyIG5vZGUgPSB6ZXJvRWxlbWVudDtcblx0ICBpZiAoIW5vZGUpIHtcblx0ICAgIG5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0ICAgIG5vZGUuc2V0QXR0cmlidXRlKCdkYXRhLXRldGhlci1pZCcsIHVuaXF1ZUlkKCkpO1xuXHQgICAgZXh0ZW5kKG5vZGUuc3R5bGUsIHtcblx0ICAgICAgdG9wOiAwLFxuXHQgICAgICBsZWZ0OiAwLFxuXHQgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJ1xuXHQgICAgfSk7XG5cdFxuXHQgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChub2RlKTtcblx0XG5cdCAgICB6ZXJvRWxlbWVudCA9IG5vZGU7XG5cdCAgfVxuXHRcblx0ICB2YXIgaWQgPSBub2RlLmdldEF0dHJpYnV0ZSgnZGF0YS10ZXRoZXItaWQnKTtcblx0ICBpZiAodHlwZW9mIHplcm9Qb3NDYWNoZVtpZF0gPT09ICd1bmRlZmluZWQnKSB7XG5cdCAgICB6ZXJvUG9zQ2FjaGVbaWRdID0gZ2V0QWN0dWFsQm91bmRpbmdDbGllbnRSZWN0KG5vZGUpO1xuXHRcblx0ICAgIC8vIENsZWFyIHRoZSBjYWNoZSB3aGVuIHRoaXMgcG9zaXRpb24gY2FsbCBpcyBkb25lXG5cdCAgICBkZWZlcihmdW5jdGlvbiAoKSB7XG5cdCAgICAgIGRlbGV0ZSB6ZXJvUG9zQ2FjaGVbaWRdO1xuXHQgICAgfSk7XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gemVyb1Bvc0NhY2hlW2lkXTtcblx0fTtcblx0XG5cdGZ1bmN0aW9uIHJlbW92ZVV0aWxFbGVtZW50cygpIHtcblx0ICBpZiAoemVyb0VsZW1lbnQpIHtcblx0ICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoemVyb0VsZW1lbnQpO1xuXHQgIH1cblx0ICB6ZXJvRWxlbWVudCA9IG51bGw7XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBnZXRCb3VuZHMoZWwpIHtcblx0ICB2YXIgZG9jID0gdW5kZWZpbmVkO1xuXHQgIGlmIChlbCA9PT0gZG9jdW1lbnQpIHtcblx0ICAgIGRvYyA9IGRvY3VtZW50O1xuXHQgICAgZWwgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG5cdCAgfSBlbHNlIHtcblx0ICAgIGRvYyA9IGVsLm93bmVyRG9jdW1lbnQ7XG5cdCAgfVxuXHRcblx0ICB2YXIgZG9jRWwgPSBkb2MuZG9jdW1lbnRFbGVtZW50O1xuXHRcblx0ICB2YXIgYm94ID0gZ2V0QWN0dWFsQm91bmRpbmdDbGllbnRSZWN0KGVsKTtcblx0XG5cdCAgdmFyIG9yaWdpbiA9IGdldE9yaWdpbigpO1xuXHRcblx0ICBib3gudG9wIC09IG9yaWdpbi50b3A7XG5cdCAgYm94LmxlZnQgLT0gb3JpZ2luLmxlZnQ7XG5cdFxuXHQgIGlmICh0eXBlb2YgYm94LndpZHRoID09PSAndW5kZWZpbmVkJykge1xuXHQgICAgYm94LndpZHRoID0gZG9jdW1lbnQuYm9keS5zY3JvbGxXaWR0aCAtIGJveC5sZWZ0IC0gYm94LnJpZ2h0O1xuXHQgIH1cblx0ICBpZiAodHlwZW9mIGJveC5oZWlnaHQgPT09ICd1bmRlZmluZWQnKSB7XG5cdCAgICBib3guaGVpZ2h0ID0gZG9jdW1lbnQuYm9keS5zY3JvbGxIZWlnaHQgLSBib3gudG9wIC0gYm94LmJvdHRvbTtcblx0ICB9XG5cdFxuXHQgIGJveC50b3AgPSBib3gudG9wIC0gZG9jRWwuY2xpZW50VG9wO1xuXHQgIGJveC5sZWZ0ID0gYm94LmxlZnQgLSBkb2NFbC5jbGllbnRMZWZ0O1xuXHQgIGJveC5yaWdodCA9IGRvYy5ib2R5LmNsaWVudFdpZHRoIC0gYm94LndpZHRoIC0gYm94LmxlZnQ7XG5cdCAgYm94LmJvdHRvbSA9IGRvYy5ib2R5LmNsaWVudEhlaWdodCAtIGJveC5oZWlnaHQgLSBib3gudG9wO1xuXHRcblx0ICByZXR1cm4gYm94O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBnZXRPZmZzZXRQYXJlbnQoZWwpIHtcblx0ICByZXR1cm4gZWwub2Zmc2V0UGFyZW50IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcblx0fVxuXHRcblx0dmFyIF9zY3JvbGxCYXJTaXplID0gbnVsbDtcblx0ZnVuY3Rpb24gZ2V0U2Nyb2xsQmFyU2l6ZSgpIHtcblx0ICBpZiAoX3Njcm9sbEJhclNpemUpIHtcblx0ICAgIHJldHVybiBfc2Nyb2xsQmFyU2l6ZTtcblx0ICB9XG5cdCAgdmFyIGlubmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdCAgaW5uZXIuc3R5bGUud2lkdGggPSAnMTAwJSc7XG5cdCAgaW5uZXIuc3R5bGUuaGVpZ2h0ID0gJzIwMHB4Jztcblx0XG5cdCAgdmFyIG91dGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdCAgZXh0ZW5kKG91dGVyLnN0eWxlLCB7XG5cdCAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcblx0ICAgIHRvcDogMCxcblx0ICAgIGxlZnQ6IDAsXG5cdCAgICBwb2ludGVyRXZlbnRzOiAnbm9uZScsXG5cdCAgICB2aXNpYmlsaXR5OiAnaGlkZGVuJyxcblx0ICAgIHdpZHRoOiAnMjAwcHgnLFxuXHQgICAgaGVpZ2h0OiAnMTUwcHgnLFxuXHQgICAgb3ZlcmZsb3c6ICdoaWRkZW4nXG5cdCAgfSk7XG5cdFxuXHQgIG91dGVyLmFwcGVuZENoaWxkKGlubmVyKTtcblx0XG5cdCAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChvdXRlcik7XG5cdFxuXHQgIHZhciB3aWR0aENvbnRhaW5lZCA9IGlubmVyLm9mZnNldFdpZHRoO1xuXHQgIG91dGVyLnN0eWxlLm92ZXJmbG93ID0gJ3Njcm9sbCc7XG5cdCAgdmFyIHdpZHRoU2Nyb2xsID0gaW5uZXIub2Zmc2V0V2lkdGg7XG5cdFxuXHQgIGlmICh3aWR0aENvbnRhaW5lZCA9PT0gd2lkdGhTY3JvbGwpIHtcblx0ICAgIHdpZHRoU2Nyb2xsID0gb3V0ZXIuY2xpZW50V2lkdGg7XG5cdCAgfVxuXHRcblx0ICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKG91dGVyKTtcblx0XG5cdCAgdmFyIHdpZHRoID0gd2lkdGhDb250YWluZWQgLSB3aWR0aFNjcm9sbDtcblx0XG5cdCAgX3Njcm9sbEJhclNpemUgPSB7IHdpZHRoOiB3aWR0aCwgaGVpZ2h0OiB3aWR0aCB9O1xuXHQgIHJldHVybiBfc2Nyb2xsQmFyU2l6ZTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZXh0ZW5kKCkge1xuXHQgIHZhciBvdXQgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDAgfHwgYXJndW1lbnRzWzBdID09PSB1bmRlZmluZWQgPyB7fSA6IGFyZ3VtZW50c1swXTtcblx0XG5cdCAgdmFyIGFyZ3MgPSBbXTtcblx0XG5cdCAgQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkoYXJncywgYXJndW1lbnRzKTtcblx0XG5cdCAgYXJncy5zbGljZSgxKS5mb3JFYWNoKGZ1bmN0aW9uIChvYmopIHtcblx0ICAgIGlmIChvYmopIHtcblx0ICAgICAgZm9yICh2YXIga2V5IGluIG9iaikge1xuXHQgICAgICAgIGlmICgoe30pLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7XG5cdCAgICAgICAgICBvdXRba2V5XSA9IG9ialtrZXldO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0pO1xuXHRcblx0ICByZXR1cm4gb3V0O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiByZW1vdmVDbGFzcyhlbCwgbmFtZSkge1xuXHQgIGlmICh0eXBlb2YgZWwuY2xhc3NMaXN0ICE9PSAndW5kZWZpbmVkJykge1xuXHQgICAgbmFtZS5zcGxpdCgnICcpLmZvckVhY2goZnVuY3Rpb24gKGNscykge1xuXHQgICAgICBpZiAoY2xzLnRyaW0oKSkge1xuXHQgICAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoY2xzKTtcblx0ICAgICAgfVxuXHQgICAgfSk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhciByZWdleCA9IG5ldyBSZWdFeHAoJyhefCApJyArIG5hbWUuc3BsaXQoJyAnKS5qb2luKCd8JykgKyAnKCB8JCknLCAnZ2knKTtcblx0ICAgIHZhciBjbGFzc05hbWUgPSBnZXRDbGFzc05hbWUoZWwpLnJlcGxhY2UocmVnZXgsICcgJyk7XG5cdCAgICBzZXRDbGFzc05hbWUoZWwsIGNsYXNzTmFtZSk7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBhZGRDbGFzcyhlbCwgbmFtZSkge1xuXHQgIGlmICh0eXBlb2YgZWwuY2xhc3NMaXN0ICE9PSAndW5kZWZpbmVkJykge1xuXHQgICAgbmFtZS5zcGxpdCgnICcpLmZvckVhY2goZnVuY3Rpb24gKGNscykge1xuXHQgICAgICBpZiAoY2xzLnRyaW0oKSkge1xuXHQgICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoY2xzKTtcblx0ICAgICAgfVxuXHQgICAgfSk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHJlbW92ZUNsYXNzKGVsLCBuYW1lKTtcblx0ICAgIHZhciBjbHMgPSBnZXRDbGFzc05hbWUoZWwpICsgKCcgJyArIG5hbWUpO1xuXHQgICAgc2V0Q2xhc3NOYW1lKGVsLCBjbHMpO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gaGFzQ2xhc3MoZWwsIG5hbWUpIHtcblx0ICBpZiAodHlwZW9mIGVsLmNsYXNzTGlzdCAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0ICAgIHJldHVybiBlbC5jbGFzc0xpc3QuY29udGFpbnMobmFtZSk7XG5cdCAgfVxuXHQgIHZhciBjbGFzc05hbWUgPSBnZXRDbGFzc05hbWUoZWwpO1xuXHQgIHJldHVybiBuZXcgUmVnRXhwKCcoXnwgKScgKyBuYW1lICsgJyggfCQpJywgJ2dpJykudGVzdChjbGFzc05hbWUpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBnZXRDbGFzc05hbWUoZWwpIHtcblx0ICAvLyBDYW4ndCB1c2UganVzdCBTVkdBbmltYXRlZFN0cmluZyBoZXJlIHNpbmNlIG5vZGVzIHdpdGhpbiBhIEZyYW1lIGluIElFIGhhdmVcblx0ICAvLyBjb21wbGV0ZWx5IHNlcGFyYXRlbHkgU1ZHQW5pbWF0ZWRTdHJpbmcgYmFzZSBjbGFzc2VzXG5cdCAgaWYgKGVsLmNsYXNzTmFtZSBpbnN0YW5jZW9mIGVsLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcuU1ZHQW5pbWF0ZWRTdHJpbmcpIHtcblx0ICAgIHJldHVybiBlbC5jbGFzc05hbWUuYmFzZVZhbDtcblx0ICB9XG5cdCAgcmV0dXJuIGVsLmNsYXNzTmFtZTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gc2V0Q2xhc3NOYW1lKGVsLCBjbGFzc05hbWUpIHtcblx0ICBlbC5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgY2xhc3NOYW1lKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gdXBkYXRlQ2xhc3NlcyhlbCwgYWRkLCBhbGwpIHtcblx0ICAvLyBPZiB0aGUgc2V0IG9mICdhbGwnIGNsYXNzZXMsIHdlIG5lZWQgdGhlICdhZGQnIGNsYXNzZXMsIGFuZCBvbmx5IHRoZVxuXHQgIC8vICdhZGQnIGNsYXNzZXMgdG8gYmUgc2V0LlxuXHQgIGFsbC5mb3JFYWNoKGZ1bmN0aW9uIChjbHMpIHtcblx0ICAgIGlmIChhZGQuaW5kZXhPZihjbHMpID09PSAtMSAmJiBoYXNDbGFzcyhlbCwgY2xzKSkge1xuXHQgICAgICByZW1vdmVDbGFzcyhlbCwgY2xzKTtcblx0ICAgIH1cblx0ICB9KTtcblx0XG5cdCAgYWRkLmZvckVhY2goZnVuY3Rpb24gKGNscykge1xuXHQgICAgaWYgKCFoYXNDbGFzcyhlbCwgY2xzKSkge1xuXHQgICAgICBhZGRDbGFzcyhlbCwgY2xzKTtcblx0ICAgIH1cblx0ICB9KTtcblx0fVxuXHRcblx0dmFyIGRlZmVycmVkID0gW107XG5cdFxuXHR2YXIgZGVmZXIgPSBmdW5jdGlvbiBkZWZlcihmbikge1xuXHQgIGRlZmVycmVkLnB1c2goZm4pO1xuXHR9O1xuXHRcblx0dmFyIGZsdXNoID0gZnVuY3Rpb24gZmx1c2goKSB7XG5cdCAgdmFyIGZuID0gdW5kZWZpbmVkO1xuXHQgIHdoaWxlIChmbiA9IGRlZmVycmVkLnBvcCgpKSB7XG5cdCAgICBmbigpO1xuXHQgIH1cblx0fTtcblx0XG5cdHZhciBFdmVudGVkID0gKGZ1bmN0aW9uICgpIHtcblx0ICBmdW5jdGlvbiBFdmVudGVkKCkge1xuXHQgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEV2ZW50ZWQpO1xuXHQgIH1cblx0XG5cdCAgX2NyZWF0ZUNsYXNzKEV2ZW50ZWQsIFt7XG5cdCAgICBrZXk6ICdvbicsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gb24oZXZlbnQsIGhhbmRsZXIsIGN0eCkge1xuXHQgICAgICB2YXIgb25jZSA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMyB8fCBhcmd1bWVudHNbM10gPT09IHVuZGVmaW5lZCA/IGZhbHNlIDogYXJndW1lbnRzWzNdO1xuXHRcblx0ICAgICAgaWYgKHR5cGVvZiB0aGlzLmJpbmRpbmdzID09PSAndW5kZWZpbmVkJykge1xuXHQgICAgICAgIHRoaXMuYmluZGluZ3MgPSB7fTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAodHlwZW9mIHRoaXMuYmluZGluZ3NbZXZlbnRdID09PSAndW5kZWZpbmVkJykge1xuXHQgICAgICAgIHRoaXMuYmluZGluZ3NbZXZlbnRdID0gW107XG5cdCAgICAgIH1cblx0ICAgICAgdGhpcy5iaW5kaW5nc1tldmVudF0ucHVzaCh7IGhhbmRsZXI6IGhhbmRsZXIsIGN0eDogY3R4LCBvbmNlOiBvbmNlIH0pO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ29uY2UnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIG9uY2UoZXZlbnQsIGhhbmRsZXIsIGN0eCkge1xuXHQgICAgICB0aGlzLm9uKGV2ZW50LCBoYW5kbGVyLCBjdHgsIHRydWUpO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ29mZicsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gb2ZmKGV2ZW50LCBoYW5kbGVyKSB7XG5cdCAgICAgIGlmICh0eXBlb2YgdGhpcy5iaW5kaW5ncyA9PT0gJ3VuZGVmaW5lZCcgfHwgdHlwZW9mIHRoaXMuYmluZGluZ3NbZXZlbnRdID09PSAndW5kZWZpbmVkJykge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKHR5cGVvZiBoYW5kbGVyID09PSAndW5kZWZpbmVkJykge1xuXHQgICAgICAgIGRlbGV0ZSB0aGlzLmJpbmRpbmdzW2V2ZW50XTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB2YXIgaSA9IDA7XG5cdCAgICAgICAgd2hpbGUgKGkgPCB0aGlzLmJpbmRpbmdzW2V2ZW50XS5sZW5ndGgpIHtcblx0ICAgICAgICAgIGlmICh0aGlzLmJpbmRpbmdzW2V2ZW50XVtpXS5oYW5kbGVyID09PSBoYW5kbGVyKSB7XG5cdCAgICAgICAgICAgIHRoaXMuYmluZGluZ3NbZXZlbnRdLnNwbGljZShpLCAxKTtcblx0ICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICsraTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICd0cmlnZ2VyJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiB0cmlnZ2VyKGV2ZW50KSB7XG5cdCAgICAgIGlmICh0eXBlb2YgdGhpcy5iaW5kaW5ncyAhPT0gJ3VuZGVmaW5lZCcgJiYgdGhpcy5iaW5kaW5nc1tldmVudF0pIHtcblx0ICAgICAgICB2YXIgaSA9IDA7XG5cdFxuXHQgICAgICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbiA+IDEgPyBfbGVuIC0gMSA6IDApLCBfa2V5ID0gMTsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuXHQgICAgICAgICAgYXJnc1tfa2V5IC0gMV0gPSBhcmd1bWVudHNbX2tleV07XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICB3aGlsZSAoaSA8IHRoaXMuYmluZGluZ3NbZXZlbnRdLmxlbmd0aCkge1xuXHQgICAgICAgICAgdmFyIF9iaW5kaW5ncyRldmVudCRpID0gdGhpcy5iaW5kaW5nc1tldmVudF1baV07XG5cdCAgICAgICAgICB2YXIgaGFuZGxlciA9IF9iaW5kaW5ncyRldmVudCRpLmhhbmRsZXI7XG5cdCAgICAgICAgICB2YXIgY3R4ID0gX2JpbmRpbmdzJGV2ZW50JGkuY3R4O1xuXHQgICAgICAgICAgdmFyIG9uY2UgPSBfYmluZGluZ3MkZXZlbnQkaS5vbmNlO1xuXHRcblx0ICAgICAgICAgIHZhciBjb250ZXh0ID0gY3R4O1xuXHQgICAgICAgICAgaWYgKHR5cGVvZiBjb250ZXh0ID09PSAndW5kZWZpbmVkJykge1xuXHQgICAgICAgICAgICBjb250ZXh0ID0gdGhpcztcblx0ICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICBoYW5kbGVyLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuXHRcblx0ICAgICAgICAgIGlmIChvbmNlKSB7XG5cdCAgICAgICAgICAgIHRoaXMuYmluZGluZ3NbZXZlbnRdLnNwbGljZShpLCAxKTtcblx0ICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICsraTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XSk7XG5cdFxuXHQgIHJldHVybiBFdmVudGVkO1xuXHR9KSgpO1xuXHRcblx0VGV0aGVyQmFzZS5VdGlscyA9IHtcblx0ICBnZXRBY3R1YWxCb3VuZGluZ0NsaWVudFJlY3Q6IGdldEFjdHVhbEJvdW5kaW5nQ2xpZW50UmVjdCxcblx0ICBnZXRTY3JvbGxQYXJlbnRzOiBnZXRTY3JvbGxQYXJlbnRzLFxuXHQgIGdldEJvdW5kczogZ2V0Qm91bmRzLFxuXHQgIGdldE9mZnNldFBhcmVudDogZ2V0T2Zmc2V0UGFyZW50LFxuXHQgIGV4dGVuZDogZXh0ZW5kLFxuXHQgIGFkZENsYXNzOiBhZGRDbGFzcyxcblx0ICByZW1vdmVDbGFzczogcmVtb3ZlQ2xhc3MsXG5cdCAgaGFzQ2xhc3M6IGhhc0NsYXNzLFxuXHQgIHVwZGF0ZUNsYXNzZXM6IHVwZGF0ZUNsYXNzZXMsXG5cdCAgZGVmZXI6IGRlZmVyLFxuXHQgIGZsdXNoOiBmbHVzaCxcblx0ICB1bmlxdWVJZDogdW5pcXVlSWQsXG5cdCAgRXZlbnRlZDogRXZlbnRlZCxcblx0ICBnZXRTY3JvbGxCYXJTaXplOiBnZXRTY3JvbGxCYXJTaXplLFxuXHQgIHJlbW92ZVV0aWxFbGVtZW50czogcmVtb3ZlVXRpbEVsZW1lbnRzXG5cdH07XG5cdC8qIGdsb2JhbHMgVGV0aGVyQmFzZSwgcGVyZm9ybWFuY2UgKi9cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBfc2xpY2VkVG9BcnJheSA9IChmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIHNsaWNlSXRlcmF0b3IoYXJyLCBpKSB7IHZhciBfYXJyID0gW107IHZhciBfbiA9IHRydWU7IHZhciBfZCA9IGZhbHNlOyB2YXIgX2UgPSB1bmRlZmluZWQ7IHRyeSB7IGZvciAodmFyIF9pID0gYXJyW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3M7ICEoX24gPSAoX3MgPSBfaS5uZXh0KCkpLmRvbmUpOyBfbiA9IHRydWUpIHsgX2Fyci5wdXNoKF9zLnZhbHVlKTsgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrOyB9IH0gY2F0Y2ggKGVycikgeyBfZCA9IHRydWU7IF9lID0gZXJyOyB9IGZpbmFsbHkgeyB0cnkgeyBpZiAoIV9uICYmIF9pWydyZXR1cm4nXSkgX2lbJ3JldHVybiddKCk7IH0gZmluYWxseSB7IGlmIChfZCkgdGhyb3cgX2U7IH0gfSByZXR1cm4gX2FycjsgfSByZXR1cm4gZnVuY3Rpb24gKGFyciwgaSkgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7IHJldHVybiBhcnI7IH0gZWxzZSBpZiAoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChhcnIpKSB7IHJldHVybiBzbGljZUl0ZXJhdG9yKGFyciwgaSk7IH0gZWxzZSB7IHRocm93IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UnKTsgfSB9OyB9KSgpO1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IChmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoJ3ZhbHVlJyBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSkoKTtcblx0XG5cdHZhciBfZ2V0ID0gZnVuY3Rpb24gZ2V0KF94NiwgX3g3LCBfeDgpIHsgdmFyIF9hZ2FpbiA9IHRydWU7IF9mdW5jdGlvbjogd2hpbGUgKF9hZ2FpbikgeyB2YXIgb2JqZWN0ID0gX3g2LCBwcm9wZXJ0eSA9IF94NywgcmVjZWl2ZXIgPSBfeDg7IF9hZ2FpbiA9IGZhbHNlOyBpZiAob2JqZWN0ID09PSBudWxsKSBvYmplY3QgPSBGdW5jdGlvbi5wcm90b3R5cGU7IHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHByb3BlcnR5KTsgaWYgKGRlc2MgPT09IHVuZGVmaW5lZCkgeyB2YXIgcGFyZW50ID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKG9iamVjdCk7IGlmIChwYXJlbnQgPT09IG51bGwpIHsgcmV0dXJuIHVuZGVmaW5lZDsgfSBlbHNlIHsgX3g2ID0gcGFyZW50OyBfeDcgPSBwcm9wZXJ0eTsgX3g4ID0gcmVjZWl2ZXI7IF9hZ2FpbiA9IHRydWU7IGRlc2MgPSBwYXJlbnQgPSB1bmRlZmluZWQ7IGNvbnRpbnVlIF9mdW5jdGlvbjsgfSB9IGVsc2UgaWYgKCd2YWx1ZScgaW4gZGVzYykgeyByZXR1cm4gZGVzYy52YWx1ZTsgfSBlbHNlIHsgdmFyIGdldHRlciA9IGRlc2MuZ2V0OyBpZiAoZ2V0dGVyID09PSB1bmRlZmluZWQpIHsgcmV0dXJuIHVuZGVmaW5lZDsgfSByZXR1cm4gZ2V0dGVyLmNhbGwocmVjZWl2ZXIpOyB9IH0gfTtcblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uJyk7IH0gfVxuXHRcblx0ZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gJ2Z1bmN0aW9uJyAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoJ1N1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgJyArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblx0XG5cdGlmICh0eXBlb2YgVGV0aGVyQmFzZSA9PT0gJ3VuZGVmaW5lZCcpIHtcblx0ICB0aHJvdyBuZXcgRXJyb3IoJ1lvdSBtdXN0IGluY2x1ZGUgdGhlIHV0aWxzLmpzIGZpbGUgYmVmb3JlIHRldGhlci5qcycpO1xuXHR9XG5cdFxuXHR2YXIgX1RldGhlckJhc2UkVXRpbHMgPSBUZXRoZXJCYXNlLlV0aWxzO1xuXHR2YXIgZ2V0U2Nyb2xsUGFyZW50cyA9IF9UZXRoZXJCYXNlJFV0aWxzLmdldFNjcm9sbFBhcmVudHM7XG5cdHZhciBnZXRCb3VuZHMgPSBfVGV0aGVyQmFzZSRVdGlscy5nZXRCb3VuZHM7XG5cdHZhciBnZXRPZmZzZXRQYXJlbnQgPSBfVGV0aGVyQmFzZSRVdGlscy5nZXRPZmZzZXRQYXJlbnQ7XG5cdHZhciBleHRlbmQgPSBfVGV0aGVyQmFzZSRVdGlscy5leHRlbmQ7XG5cdHZhciBhZGRDbGFzcyA9IF9UZXRoZXJCYXNlJFV0aWxzLmFkZENsYXNzO1xuXHR2YXIgcmVtb3ZlQ2xhc3MgPSBfVGV0aGVyQmFzZSRVdGlscy5yZW1vdmVDbGFzcztcblx0dmFyIHVwZGF0ZUNsYXNzZXMgPSBfVGV0aGVyQmFzZSRVdGlscy51cGRhdGVDbGFzc2VzO1xuXHR2YXIgZGVmZXIgPSBfVGV0aGVyQmFzZSRVdGlscy5kZWZlcjtcblx0dmFyIGZsdXNoID0gX1RldGhlckJhc2UkVXRpbHMuZmx1c2g7XG5cdHZhciBnZXRTY3JvbGxCYXJTaXplID0gX1RldGhlckJhc2UkVXRpbHMuZ2V0U2Nyb2xsQmFyU2l6ZTtcblx0dmFyIHJlbW92ZVV0aWxFbGVtZW50cyA9IF9UZXRoZXJCYXNlJFV0aWxzLnJlbW92ZVV0aWxFbGVtZW50cztcblx0XG5cdGZ1bmN0aW9uIHdpdGhpbihhLCBiKSB7XG5cdCAgdmFyIGRpZmYgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDIgfHwgYXJndW1lbnRzWzJdID09PSB1bmRlZmluZWQgPyAxIDogYXJndW1lbnRzWzJdO1xuXHRcblx0ICByZXR1cm4gYSArIGRpZmYgPj0gYiAmJiBiID49IGEgLSBkaWZmO1xuXHR9XG5cdFxuXHR2YXIgdHJhbnNmb3JtS2V5ID0gKGZ1bmN0aW9uICgpIHtcblx0ICBpZiAodHlwZW9mIGRvY3VtZW50ID09PSAndW5kZWZpbmVkJykge1xuXHQgICAgcmV0dXJuICcnO1xuXHQgIH1cblx0ICB2YXIgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0XG5cdCAgdmFyIHRyYW5zZm9ybXMgPSBbJ3RyYW5zZm9ybScsICdXZWJraXRUcmFuc2Zvcm0nLCAnT1RyYW5zZm9ybScsICdNb3pUcmFuc2Zvcm0nLCAnbXNUcmFuc2Zvcm0nXTtcblx0ICBmb3IgKHZhciBpID0gMDsgaSA8IHRyYW5zZm9ybXMubGVuZ3RoOyArK2kpIHtcblx0ICAgIHZhciBrZXkgPSB0cmFuc2Zvcm1zW2ldO1xuXHQgICAgaWYgKGVsLnN0eWxlW2tleV0gIT09IHVuZGVmaW5lZCkge1xuXHQgICAgICByZXR1cm4ga2V5O1xuXHQgICAgfVxuXHQgIH1cblx0fSkoKTtcblx0XG5cdHZhciB0ZXRoZXJzID0gW107XG5cdFxuXHR2YXIgcG9zaXRpb24gPSBmdW5jdGlvbiBwb3NpdGlvbigpIHtcblx0ICB0ZXRoZXJzLmZvckVhY2goZnVuY3Rpb24gKHRldGhlcikge1xuXHQgICAgdGV0aGVyLnBvc2l0aW9uKGZhbHNlKTtcblx0ICB9KTtcblx0ICBmbHVzaCgpO1xuXHR9O1xuXHRcblx0ZnVuY3Rpb24gbm93KCkge1xuXHQgIGlmICh0eXBlb2YgcGVyZm9ybWFuY2UgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBwZXJmb3JtYW5jZS5ub3cgIT09ICd1bmRlZmluZWQnKSB7XG5cdCAgICByZXR1cm4gcGVyZm9ybWFuY2Uubm93KCk7XG5cdCAgfVxuXHQgIHJldHVybiArbmV3IERhdGUoKTtcblx0fVxuXHRcblx0KGZ1bmN0aW9uICgpIHtcblx0ICB2YXIgbGFzdENhbGwgPSBudWxsO1xuXHQgIHZhciBsYXN0RHVyYXRpb24gPSBudWxsO1xuXHQgIHZhciBwZW5kaW5nVGltZW91dCA9IG51bGw7XG5cdFxuXHQgIHZhciB0aWNrID0gZnVuY3Rpb24gdGljaygpIHtcblx0ICAgIGlmICh0eXBlb2YgbGFzdER1cmF0aW9uICE9PSAndW5kZWZpbmVkJyAmJiBsYXN0RHVyYXRpb24gPiAxNikge1xuXHQgICAgICAvLyBXZSB2b2x1bnRhcmlseSB0aHJvdHRsZSBvdXJzZWx2ZXMgaWYgd2UgY2FuJ3QgbWFuYWdlIDYwZnBzXG5cdCAgICAgIGxhc3REdXJhdGlvbiA9IE1hdGgubWluKGxhc3REdXJhdGlvbiAtIDE2LCAyNTApO1xuXHRcblx0ICAgICAgLy8gSnVzdCBpbiBjYXNlIHRoaXMgaXMgdGhlIGxhc3QgZXZlbnQsIHJlbWVtYmVyIHRvIHBvc2l0aW9uIGp1c3Qgb25jZSBtb3JlXG5cdCAgICAgIHBlbmRpbmdUaW1lb3V0ID0gc2V0VGltZW91dCh0aWNrLCAyNTApO1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKHR5cGVvZiBsYXN0Q2FsbCAhPT0gJ3VuZGVmaW5lZCcgJiYgbm93KCkgLSBsYXN0Q2FsbCA8IDEwKSB7XG5cdCAgICAgIC8vIFNvbWUgYnJvd3NlcnMgY2FsbCBldmVudHMgYSBsaXR0bGUgdG9vIGZyZXF1ZW50bHksIHJlZnVzZSB0byBydW4gbW9yZSB0aGFuIGlzIHJlYXNvbmFibGVcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHRcblx0ICAgIGlmIChwZW5kaW5nVGltZW91dCAhPSBudWxsKSB7XG5cdCAgICAgIGNsZWFyVGltZW91dChwZW5kaW5nVGltZW91dCk7XG5cdCAgICAgIHBlbmRpbmdUaW1lb3V0ID0gbnVsbDtcblx0ICAgIH1cblx0XG5cdCAgICBsYXN0Q2FsbCA9IG5vdygpO1xuXHQgICAgcG9zaXRpb24oKTtcblx0ICAgIGxhc3REdXJhdGlvbiA9IG5vdygpIC0gbGFzdENhbGw7XG5cdCAgfTtcblx0XG5cdCAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0ICAgIFsncmVzaXplJywgJ3Njcm9sbCcsICd0b3VjaG1vdmUnXS5mb3JFYWNoKGZ1bmN0aW9uIChldmVudCkge1xuXHQgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgdGljayk7XG5cdCAgICB9KTtcblx0ICB9XG5cdH0pKCk7XG5cdFxuXHR2YXIgTUlSUk9SX0xSID0ge1xuXHQgIGNlbnRlcjogJ2NlbnRlcicsXG5cdCAgbGVmdDogJ3JpZ2h0Jyxcblx0ICByaWdodDogJ2xlZnQnXG5cdH07XG5cdFxuXHR2YXIgTUlSUk9SX1RCID0ge1xuXHQgIG1pZGRsZTogJ21pZGRsZScsXG5cdCAgdG9wOiAnYm90dG9tJyxcblx0ICBib3R0b206ICd0b3AnXG5cdH07XG5cdFxuXHR2YXIgT0ZGU0VUX01BUCA9IHtcblx0ICB0b3A6IDAsXG5cdCAgbGVmdDogMCxcblx0ICBtaWRkbGU6ICc1MCUnLFxuXHQgIGNlbnRlcjogJzUwJScsXG5cdCAgYm90dG9tOiAnMTAwJScsXG5cdCAgcmlnaHQ6ICcxMDAlJ1xuXHR9O1xuXHRcblx0dmFyIGF1dG9Ub0ZpeGVkQXR0YWNobWVudCA9IGZ1bmN0aW9uIGF1dG9Ub0ZpeGVkQXR0YWNobWVudChhdHRhY2htZW50LCByZWxhdGl2ZVRvQXR0YWNobWVudCkge1xuXHQgIHZhciBsZWZ0ID0gYXR0YWNobWVudC5sZWZ0O1xuXHQgIHZhciB0b3AgPSBhdHRhY2htZW50LnRvcDtcblx0XG5cdCAgaWYgKGxlZnQgPT09ICdhdXRvJykge1xuXHQgICAgbGVmdCA9IE1JUlJPUl9MUltyZWxhdGl2ZVRvQXR0YWNobWVudC5sZWZ0XTtcblx0ICB9XG5cdFxuXHQgIGlmICh0b3AgPT09ICdhdXRvJykge1xuXHQgICAgdG9wID0gTUlSUk9SX1RCW3JlbGF0aXZlVG9BdHRhY2htZW50LnRvcF07XG5cdCAgfVxuXHRcblx0ICByZXR1cm4geyBsZWZ0OiBsZWZ0LCB0b3A6IHRvcCB9O1xuXHR9O1xuXHRcblx0dmFyIGF0dGFjaG1lbnRUb09mZnNldCA9IGZ1bmN0aW9uIGF0dGFjaG1lbnRUb09mZnNldChhdHRhY2htZW50KSB7XG5cdCAgdmFyIGxlZnQgPSBhdHRhY2htZW50LmxlZnQ7XG5cdCAgdmFyIHRvcCA9IGF0dGFjaG1lbnQudG9wO1xuXHRcblx0ICBpZiAodHlwZW9mIE9GRlNFVF9NQVBbYXR0YWNobWVudC5sZWZ0XSAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0ICAgIGxlZnQgPSBPRkZTRVRfTUFQW2F0dGFjaG1lbnQubGVmdF07XG5cdCAgfVxuXHRcblx0ICBpZiAodHlwZW9mIE9GRlNFVF9NQVBbYXR0YWNobWVudC50b3BdICE9PSAndW5kZWZpbmVkJykge1xuXHQgICAgdG9wID0gT0ZGU0VUX01BUFthdHRhY2htZW50LnRvcF07XG5cdCAgfVxuXHRcblx0ICByZXR1cm4geyBsZWZ0OiBsZWZ0LCB0b3A6IHRvcCB9O1xuXHR9O1xuXHRcblx0ZnVuY3Rpb24gYWRkT2Zmc2V0KCkge1xuXHQgIHZhciBvdXQgPSB7IHRvcDogMCwgbGVmdDogMCB9O1xuXHRcblx0ICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgb2Zmc2V0cyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuXHQgICAgb2Zmc2V0c1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcblx0ICB9XG5cdFxuXHQgIG9mZnNldHMuZm9yRWFjaChmdW5jdGlvbiAoX3JlZikge1xuXHQgICAgdmFyIHRvcCA9IF9yZWYudG9wO1xuXHQgICAgdmFyIGxlZnQgPSBfcmVmLmxlZnQ7XG5cdFxuXHQgICAgaWYgKHR5cGVvZiB0b3AgPT09ICdzdHJpbmcnKSB7XG5cdCAgICAgIHRvcCA9IHBhcnNlRmxvYXQodG9wLCAxMCk7XG5cdCAgICB9XG5cdCAgICBpZiAodHlwZW9mIGxlZnQgPT09ICdzdHJpbmcnKSB7XG5cdCAgICAgIGxlZnQgPSBwYXJzZUZsb2F0KGxlZnQsIDEwKTtcblx0ICAgIH1cblx0XG5cdCAgICBvdXQudG9wICs9IHRvcDtcblx0ICAgIG91dC5sZWZ0ICs9IGxlZnQ7XG5cdCAgfSk7XG5cdFxuXHQgIHJldHVybiBvdXQ7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG9mZnNldFRvUHgob2Zmc2V0LCBzaXplKSB7XG5cdCAgaWYgKHR5cGVvZiBvZmZzZXQubGVmdCA9PT0gJ3N0cmluZycgJiYgb2Zmc2V0LmxlZnQuaW5kZXhPZignJScpICE9PSAtMSkge1xuXHQgICAgb2Zmc2V0LmxlZnQgPSBwYXJzZUZsb2F0KG9mZnNldC5sZWZ0LCAxMCkgLyAxMDAgKiBzaXplLndpZHRoO1xuXHQgIH1cblx0ICBpZiAodHlwZW9mIG9mZnNldC50b3AgPT09ICdzdHJpbmcnICYmIG9mZnNldC50b3AuaW5kZXhPZignJScpICE9PSAtMSkge1xuXHQgICAgb2Zmc2V0LnRvcCA9IHBhcnNlRmxvYXQob2Zmc2V0LnRvcCwgMTApIC8gMTAwICogc2l6ZS5oZWlnaHQ7XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gb2Zmc2V0O1xuXHR9XG5cdFxuXHR2YXIgcGFyc2VPZmZzZXQgPSBmdW5jdGlvbiBwYXJzZU9mZnNldCh2YWx1ZSkge1xuXHQgIHZhciBfdmFsdWUkc3BsaXQgPSB2YWx1ZS5zcGxpdCgnICcpO1xuXHRcblx0ICB2YXIgX3ZhbHVlJHNwbGl0MiA9IF9zbGljZWRUb0FycmF5KF92YWx1ZSRzcGxpdCwgMik7XG5cdFxuXHQgIHZhciB0b3AgPSBfdmFsdWUkc3BsaXQyWzBdO1xuXHQgIHZhciBsZWZ0ID0gX3ZhbHVlJHNwbGl0MlsxXTtcblx0XG5cdCAgcmV0dXJuIHsgdG9wOiB0b3AsIGxlZnQ6IGxlZnQgfTtcblx0fTtcblx0dmFyIHBhcnNlQXR0YWNobWVudCA9IHBhcnNlT2Zmc2V0O1xuXHRcblx0dmFyIFRldGhlckNsYXNzID0gKGZ1bmN0aW9uIChfRXZlbnRlZCkge1xuXHQgIF9pbmhlcml0cyhUZXRoZXJDbGFzcywgX0V2ZW50ZWQpO1xuXHRcblx0ICBmdW5jdGlvbiBUZXRoZXJDbGFzcyhvcHRpb25zKSB7XG5cdCAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXHRcblx0ICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBUZXRoZXJDbGFzcyk7XG5cdFxuXHQgICAgX2dldChPYmplY3QuZ2V0UHJvdG90eXBlT2YoVGV0aGVyQ2xhc3MucHJvdG90eXBlKSwgJ2NvbnN0cnVjdG9yJywgdGhpcykuY2FsbCh0aGlzKTtcblx0ICAgIHRoaXMucG9zaXRpb24gPSB0aGlzLnBvc2l0aW9uLmJpbmQodGhpcyk7XG5cdFxuXHQgICAgdGV0aGVycy5wdXNoKHRoaXMpO1xuXHRcblx0ICAgIHRoaXMuaGlzdG9yeSA9IFtdO1xuXHRcblx0ICAgIHRoaXMuc2V0T3B0aW9ucyhvcHRpb25zLCBmYWxzZSk7XG5cdFxuXHQgICAgVGV0aGVyQmFzZS5tb2R1bGVzLmZvckVhY2goZnVuY3Rpb24gKG1vZHVsZSkge1xuXHQgICAgICBpZiAodHlwZW9mIG1vZHVsZS5pbml0aWFsaXplICE9PSAndW5kZWZpbmVkJykge1xuXHQgICAgICAgIG1vZHVsZS5pbml0aWFsaXplLmNhbGwoX3RoaXMpO1xuXHQgICAgICB9XG5cdCAgICB9KTtcblx0XG5cdCAgICB0aGlzLnBvc2l0aW9uKCk7XG5cdCAgfVxuXHRcblx0ICBfY3JlYXRlQ2xhc3MoVGV0aGVyQ2xhc3MsIFt7XG5cdCAgICBrZXk6ICdnZXRDbGFzcycsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Q2xhc3MoKSB7XG5cdCAgICAgIHZhciBrZXkgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDAgfHwgYXJndW1lbnRzWzBdID09PSB1bmRlZmluZWQgPyAnJyA6IGFyZ3VtZW50c1swXTtcblx0ICAgICAgdmFyIGNsYXNzZXMgPSB0aGlzLm9wdGlvbnMuY2xhc3Nlcztcblx0XG5cdCAgICAgIGlmICh0eXBlb2YgY2xhc3NlcyAhPT0gJ3VuZGVmaW5lZCcgJiYgY2xhc3Nlc1trZXldKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5jbGFzc2VzW2tleV07XG5cdCAgICAgIH0gZWxzZSBpZiAodGhpcy5vcHRpb25zLmNsYXNzUHJlZml4KSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5jbGFzc1ByZWZpeCArICctJyArIGtleTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICByZXR1cm4ga2V5O1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnc2V0T3B0aW9ucycsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gc2V0T3B0aW9ucyhvcHRpb25zKSB7XG5cdCAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXHRcblx0ICAgICAgdmFyIHBvcyA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMSB8fCBhcmd1bWVudHNbMV0gPT09IHVuZGVmaW5lZCA/IHRydWUgOiBhcmd1bWVudHNbMV07XG5cdFxuXHQgICAgICB2YXIgZGVmYXVsdHMgPSB7XG5cdCAgICAgICAgb2Zmc2V0OiAnMCAwJyxcblx0ICAgICAgICB0YXJnZXRPZmZzZXQ6ICcwIDAnLFxuXHQgICAgICAgIHRhcmdldEF0dGFjaG1lbnQ6ICdhdXRvIGF1dG8nLFxuXHQgICAgICAgIGNsYXNzUHJlZml4OiAndGV0aGVyJ1xuXHQgICAgICB9O1xuXHRcblx0ICAgICAgdGhpcy5vcHRpb25zID0gZXh0ZW5kKGRlZmF1bHRzLCBvcHRpb25zKTtcblx0XG5cdCAgICAgIHZhciBfb3B0aW9ucyA9IHRoaXMub3B0aW9ucztcblx0ICAgICAgdmFyIGVsZW1lbnQgPSBfb3B0aW9ucy5lbGVtZW50O1xuXHQgICAgICB2YXIgdGFyZ2V0ID0gX29wdGlvbnMudGFyZ2V0O1xuXHQgICAgICB2YXIgdGFyZ2V0TW9kaWZpZXIgPSBfb3B0aW9ucy50YXJnZXRNb2RpZmllcjtcblx0XG5cdCAgICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG5cdCAgICAgIHRoaXMudGFyZ2V0ID0gdGFyZ2V0O1xuXHQgICAgICB0aGlzLnRhcmdldE1vZGlmaWVyID0gdGFyZ2V0TW9kaWZpZXI7XG5cdFxuXHQgICAgICBpZiAodGhpcy50YXJnZXQgPT09ICd2aWV3cG9ydCcpIHtcblx0ICAgICAgICB0aGlzLnRhcmdldCA9IGRvY3VtZW50LmJvZHk7XG5cdCAgICAgICAgdGhpcy50YXJnZXRNb2RpZmllciA9ICd2aXNpYmxlJztcblx0ICAgICAgfSBlbHNlIGlmICh0aGlzLnRhcmdldCA9PT0gJ3Njcm9sbC1oYW5kbGUnKSB7XG5cdCAgICAgICAgdGhpcy50YXJnZXQgPSBkb2N1bWVudC5ib2R5O1xuXHQgICAgICAgIHRoaXMudGFyZ2V0TW9kaWZpZXIgPSAnc2Nyb2xsLWhhbmRsZSc7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIFsnZWxlbWVudCcsICd0YXJnZXQnXS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgICAgICBpZiAodHlwZW9mIF90aGlzMltrZXldID09PSAndW5kZWZpbmVkJykge1xuXHQgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUZXRoZXIgRXJyb3I6IEJvdGggZWxlbWVudCBhbmQgdGFyZ2V0IG11c3QgYmUgZGVmaW5lZCcpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgaWYgKHR5cGVvZiBfdGhpczJba2V5XS5qcXVlcnkgIT09ICd1bmRlZmluZWQnKSB7XG5cdCAgICAgICAgICBfdGhpczJba2V5XSA9IF90aGlzMltrZXldWzBdO1xuXHQgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIF90aGlzMltrZXldID09PSAnc3RyaW5nJykge1xuXHQgICAgICAgICAgX3RoaXMyW2tleV0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKF90aGlzMltrZXldKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHRcblx0ICAgICAgYWRkQ2xhc3ModGhpcy5lbGVtZW50LCB0aGlzLmdldENsYXNzKCdlbGVtZW50JykpO1xuXHQgICAgICBpZiAoISh0aGlzLm9wdGlvbnMuYWRkVGFyZ2V0Q2xhc3NlcyA9PT0gZmFsc2UpKSB7XG5cdCAgICAgICAgYWRkQ2xhc3ModGhpcy50YXJnZXQsIHRoaXMuZ2V0Q2xhc3MoJ3RhcmdldCcpKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKCF0aGlzLm9wdGlvbnMuYXR0YWNobWVudCkge1xuXHQgICAgICAgIHRocm93IG5ldyBFcnJvcignVGV0aGVyIEVycm9yOiBZb3UgbXVzdCBwcm92aWRlIGFuIGF0dGFjaG1lbnQnKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdGhpcy50YXJnZXRBdHRhY2htZW50ID0gcGFyc2VBdHRhY2htZW50KHRoaXMub3B0aW9ucy50YXJnZXRBdHRhY2htZW50KTtcblx0ICAgICAgdGhpcy5hdHRhY2htZW50ID0gcGFyc2VBdHRhY2htZW50KHRoaXMub3B0aW9ucy5hdHRhY2htZW50KTtcblx0ICAgICAgdGhpcy5vZmZzZXQgPSBwYXJzZU9mZnNldCh0aGlzLm9wdGlvbnMub2Zmc2V0KTtcblx0ICAgICAgdGhpcy50YXJnZXRPZmZzZXQgPSBwYXJzZU9mZnNldCh0aGlzLm9wdGlvbnMudGFyZ2V0T2Zmc2V0KTtcblx0XG5cdCAgICAgIGlmICh0eXBlb2YgdGhpcy5zY3JvbGxQYXJlbnRzICE9PSAndW5kZWZpbmVkJykge1xuXHQgICAgICAgIHRoaXMuZGlzYWJsZSgpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAodGhpcy50YXJnZXRNb2RpZmllciA9PT0gJ3Njcm9sbC1oYW5kbGUnKSB7XG5cdCAgICAgICAgdGhpcy5zY3JvbGxQYXJlbnRzID0gW3RoaXMudGFyZ2V0XTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB0aGlzLnNjcm9sbFBhcmVudHMgPSBnZXRTY3JvbGxQYXJlbnRzKHRoaXMudGFyZ2V0KTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKCEodGhpcy5vcHRpb25zLmVuYWJsZWQgPT09IGZhbHNlKSkge1xuXHQgICAgICAgIHRoaXMuZW5hYmxlKHBvcyk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdnZXRUYXJnZXRCb3VuZHMnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGdldFRhcmdldEJvdW5kcygpIHtcblx0ICAgICAgaWYgKHR5cGVvZiB0aGlzLnRhcmdldE1vZGlmaWVyICE9PSAndW5kZWZpbmVkJykge1xuXHQgICAgICAgIGlmICh0aGlzLnRhcmdldE1vZGlmaWVyID09PSAndmlzaWJsZScpIHtcblx0ICAgICAgICAgIGlmICh0aGlzLnRhcmdldCA9PT0gZG9jdW1lbnQuYm9keSkge1xuXHQgICAgICAgICAgICByZXR1cm4geyB0b3A6IHBhZ2VZT2Zmc2V0LCBsZWZ0OiBwYWdlWE9mZnNldCwgaGVpZ2h0OiBpbm5lckhlaWdodCwgd2lkdGg6IGlubmVyV2lkdGggfTtcblx0ICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIHZhciBib3VuZHMgPSBnZXRCb3VuZHModGhpcy50YXJnZXQpO1xuXHRcblx0ICAgICAgICAgICAgdmFyIG91dCA9IHtcblx0ICAgICAgICAgICAgICBoZWlnaHQ6IGJvdW5kcy5oZWlnaHQsXG5cdCAgICAgICAgICAgICAgd2lkdGg6IGJvdW5kcy53aWR0aCxcblx0ICAgICAgICAgICAgICB0b3A6IGJvdW5kcy50b3AsXG5cdCAgICAgICAgICAgICAgbGVmdDogYm91bmRzLmxlZnRcblx0ICAgICAgICAgICAgfTtcblx0XG5cdCAgICAgICAgICAgIG91dC5oZWlnaHQgPSBNYXRoLm1pbihvdXQuaGVpZ2h0LCBib3VuZHMuaGVpZ2h0IC0gKHBhZ2VZT2Zmc2V0IC0gYm91bmRzLnRvcCkpO1xuXHQgICAgICAgICAgICBvdXQuaGVpZ2h0ID0gTWF0aC5taW4ob3V0LmhlaWdodCwgYm91bmRzLmhlaWdodCAtIChib3VuZHMudG9wICsgYm91bmRzLmhlaWdodCAtIChwYWdlWU9mZnNldCArIGlubmVySGVpZ2h0KSkpO1xuXHQgICAgICAgICAgICBvdXQuaGVpZ2h0ID0gTWF0aC5taW4oaW5uZXJIZWlnaHQsIG91dC5oZWlnaHQpO1xuXHQgICAgICAgICAgICBvdXQuaGVpZ2h0IC09IDI7XG5cdFxuXHQgICAgICAgICAgICBvdXQud2lkdGggPSBNYXRoLm1pbihvdXQud2lkdGgsIGJvdW5kcy53aWR0aCAtIChwYWdlWE9mZnNldCAtIGJvdW5kcy5sZWZ0KSk7XG5cdCAgICAgICAgICAgIG91dC53aWR0aCA9IE1hdGgubWluKG91dC53aWR0aCwgYm91bmRzLndpZHRoIC0gKGJvdW5kcy5sZWZ0ICsgYm91bmRzLndpZHRoIC0gKHBhZ2VYT2Zmc2V0ICsgaW5uZXJXaWR0aCkpKTtcblx0ICAgICAgICAgICAgb3V0LndpZHRoID0gTWF0aC5taW4oaW5uZXJXaWR0aCwgb3V0LndpZHRoKTtcblx0ICAgICAgICAgICAgb3V0LndpZHRoIC09IDI7XG5cdFxuXHQgICAgICAgICAgICBpZiAob3V0LnRvcCA8IHBhZ2VZT2Zmc2V0KSB7XG5cdCAgICAgICAgICAgICAgb3V0LnRvcCA9IHBhZ2VZT2Zmc2V0O1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGlmIChvdXQubGVmdCA8IHBhZ2VYT2Zmc2V0KSB7XG5cdCAgICAgICAgICAgICAgb3V0LmxlZnQgPSBwYWdlWE9mZnNldDtcblx0ICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgcmV0dXJuIG91dDtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9IGVsc2UgaWYgKHRoaXMudGFyZ2V0TW9kaWZpZXIgPT09ICdzY3JvbGwtaGFuZGxlJykge1xuXHQgICAgICAgICAgdmFyIGJvdW5kcyA9IHVuZGVmaW5lZDtcblx0ICAgICAgICAgIHZhciB0YXJnZXQgPSB0aGlzLnRhcmdldDtcblx0ICAgICAgICAgIGlmICh0YXJnZXQgPT09IGRvY3VtZW50LmJvZHkpIHtcblx0ICAgICAgICAgICAgdGFyZ2V0ID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xuXHRcblx0ICAgICAgICAgICAgYm91bmRzID0ge1xuXHQgICAgICAgICAgICAgIGxlZnQ6IHBhZ2VYT2Zmc2V0LFxuXHQgICAgICAgICAgICAgIHRvcDogcGFnZVlPZmZzZXQsXG5cdCAgICAgICAgICAgICAgaGVpZ2h0OiBpbm5lckhlaWdodCxcblx0ICAgICAgICAgICAgICB3aWR0aDogaW5uZXJXaWR0aFxuXHQgICAgICAgICAgICB9O1xuXHQgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgYm91bmRzID0gZ2V0Qm91bmRzKHRhcmdldCk7XG5cdCAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgdmFyIHN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZSh0YXJnZXQpO1xuXHRcblx0ICAgICAgICAgIHZhciBoYXNCb3R0b21TY3JvbGwgPSB0YXJnZXQuc2Nyb2xsV2lkdGggPiB0YXJnZXQuY2xpZW50V2lkdGggfHwgW3N0eWxlLm92ZXJmbG93LCBzdHlsZS5vdmVyZmxvd1hdLmluZGV4T2YoJ3Njcm9sbCcpID49IDAgfHwgdGhpcy50YXJnZXQgIT09IGRvY3VtZW50LmJvZHk7XG5cdFxuXHQgICAgICAgICAgdmFyIHNjcm9sbEJvdHRvbSA9IDA7XG5cdCAgICAgICAgICBpZiAoaGFzQm90dG9tU2Nyb2xsKSB7XG5cdCAgICAgICAgICAgIHNjcm9sbEJvdHRvbSA9IDE1O1xuXHQgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgIHZhciBoZWlnaHQgPSBib3VuZHMuaGVpZ2h0IC0gcGFyc2VGbG9hdChzdHlsZS5ib3JkZXJUb3BXaWR0aCkgLSBwYXJzZUZsb2F0KHN0eWxlLmJvcmRlckJvdHRvbVdpZHRoKSAtIHNjcm9sbEJvdHRvbTtcblx0XG5cdCAgICAgICAgICB2YXIgb3V0ID0ge1xuXHQgICAgICAgICAgICB3aWR0aDogMTUsXG5cdCAgICAgICAgICAgIGhlaWdodDogaGVpZ2h0ICogMC45NzUgKiAoaGVpZ2h0IC8gdGFyZ2V0LnNjcm9sbEhlaWdodCksXG5cdCAgICAgICAgICAgIGxlZnQ6IGJvdW5kcy5sZWZ0ICsgYm91bmRzLndpZHRoIC0gcGFyc2VGbG9hdChzdHlsZS5ib3JkZXJMZWZ0V2lkdGgpIC0gMTVcblx0ICAgICAgICAgIH07XG5cdFxuXHQgICAgICAgICAgdmFyIGZpdEFkaiA9IDA7XG5cdCAgICAgICAgICBpZiAoaGVpZ2h0IDwgNDA4ICYmIHRoaXMudGFyZ2V0ID09PSBkb2N1bWVudC5ib2R5KSB7XG5cdCAgICAgICAgICAgIGZpdEFkaiA9IC0wLjAwMDExICogTWF0aC5wb3coaGVpZ2h0LCAyKSAtIDAuMDA3MjcgKiBoZWlnaHQgKyAyMi41ODtcblx0ICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICBpZiAodGhpcy50YXJnZXQgIT09IGRvY3VtZW50LmJvZHkpIHtcblx0ICAgICAgICAgICAgb3V0LmhlaWdodCA9IE1hdGgubWF4KG91dC5oZWlnaHQsIDI0KTtcblx0ICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICB2YXIgc2Nyb2xsUGVyY2VudGFnZSA9IHRoaXMudGFyZ2V0LnNjcm9sbFRvcCAvICh0YXJnZXQuc2Nyb2xsSGVpZ2h0IC0gaGVpZ2h0KTtcblx0ICAgICAgICAgIG91dC50b3AgPSBzY3JvbGxQZXJjZW50YWdlICogKGhlaWdodCAtIG91dC5oZWlnaHQgLSBmaXRBZGopICsgYm91bmRzLnRvcCArIHBhcnNlRmxvYXQoc3R5bGUuYm9yZGVyVG9wV2lkdGgpO1xuXHRcblx0ICAgICAgICAgIGlmICh0aGlzLnRhcmdldCA9PT0gZG9jdW1lbnQuYm9keSkge1xuXHQgICAgICAgICAgICBvdXQuaGVpZ2h0ID0gTWF0aC5tYXgob3V0LmhlaWdodCwgMjQpO1xuXHQgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgIHJldHVybiBvdXQ7XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHJldHVybiBnZXRCb3VuZHModGhpcy50YXJnZXQpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnY2xlYXJDYWNoZScsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gY2xlYXJDYWNoZSgpIHtcblx0ICAgICAgdGhpcy5fY2FjaGUgPSB7fTtcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdjYWNoZScsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gY2FjaGUoaywgZ2V0dGVyKSB7XG5cdCAgICAgIC8vIE1vcmUgdGhhbiBvbmUgbW9kdWxlIHdpbGwgb2Z0ZW4gbmVlZCB0aGUgc2FtZSBET00gaW5mbywgc29cblx0ICAgICAgLy8gd2Uga2VlcCBhIGNhY2hlIHdoaWNoIGlzIGNsZWFyZWQgb24gZWFjaCBwb3NpdGlvbiBjYWxsXG5cdCAgICAgIGlmICh0eXBlb2YgdGhpcy5fY2FjaGUgPT09ICd1bmRlZmluZWQnKSB7XG5cdCAgICAgICAgdGhpcy5fY2FjaGUgPSB7fTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKHR5cGVvZiB0aGlzLl9jYWNoZVtrXSA9PT0gJ3VuZGVmaW5lZCcpIHtcblx0ICAgICAgICB0aGlzLl9jYWNoZVtrXSA9IGdldHRlci5jYWxsKHRoaXMpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICByZXR1cm4gdGhpcy5fY2FjaGVba107XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnZW5hYmxlJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBlbmFibGUoKSB7XG5cdCAgICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXHRcblx0ICAgICAgdmFyIHBvcyA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMCB8fCBhcmd1bWVudHNbMF0gPT09IHVuZGVmaW5lZCA/IHRydWUgOiBhcmd1bWVudHNbMF07XG5cdFxuXHQgICAgICBpZiAoISh0aGlzLm9wdGlvbnMuYWRkVGFyZ2V0Q2xhc3NlcyA9PT0gZmFsc2UpKSB7XG5cdCAgICAgICAgYWRkQ2xhc3ModGhpcy50YXJnZXQsIHRoaXMuZ2V0Q2xhc3MoJ2VuYWJsZWQnKSk7XG5cdCAgICAgIH1cblx0ICAgICAgYWRkQ2xhc3ModGhpcy5lbGVtZW50LCB0aGlzLmdldENsYXNzKCdlbmFibGVkJykpO1xuXHQgICAgICB0aGlzLmVuYWJsZWQgPSB0cnVlO1xuXHRcblx0ICAgICAgdGhpcy5zY3JvbGxQYXJlbnRzLmZvckVhY2goZnVuY3Rpb24gKHBhcmVudCkge1xuXHQgICAgICAgIGlmIChwYXJlbnQgIT09IF90aGlzMy50YXJnZXQub3duZXJEb2N1bWVudCkge1xuXHQgICAgICAgICAgcGFyZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIF90aGlzMy5wb3NpdGlvbik7XG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0XG5cdCAgICAgIGlmIChwb3MpIHtcblx0ICAgICAgICB0aGlzLnBvc2l0aW9uKCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdkaXNhYmxlJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBkaXNhYmxlKCkge1xuXHQgICAgICB2YXIgX3RoaXM0ID0gdGhpcztcblx0XG5cdCAgICAgIHJlbW92ZUNsYXNzKHRoaXMudGFyZ2V0LCB0aGlzLmdldENsYXNzKCdlbmFibGVkJykpO1xuXHQgICAgICByZW1vdmVDbGFzcyh0aGlzLmVsZW1lbnQsIHRoaXMuZ2V0Q2xhc3MoJ2VuYWJsZWQnKSk7XG5cdCAgICAgIHRoaXMuZW5hYmxlZCA9IGZhbHNlO1xuXHRcblx0ICAgICAgaWYgKHR5cGVvZiB0aGlzLnNjcm9sbFBhcmVudHMgIT09ICd1bmRlZmluZWQnKSB7XG5cdCAgICAgICAgdGhpcy5zY3JvbGxQYXJlbnRzLmZvckVhY2goZnVuY3Rpb24gKHBhcmVudCkge1xuXHQgICAgICAgICAgcGFyZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIF90aGlzNC5wb3NpdGlvbik7XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdkZXN0cm95Jyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBkZXN0cm95KCkge1xuXHQgICAgICB2YXIgX3RoaXM1ID0gdGhpcztcblx0XG5cdCAgICAgIHRoaXMuZGlzYWJsZSgpO1xuXHRcblx0ICAgICAgdGV0aGVycy5mb3JFYWNoKGZ1bmN0aW9uICh0ZXRoZXIsIGkpIHtcblx0ICAgICAgICBpZiAodGV0aGVyID09PSBfdGhpczUpIHtcblx0ICAgICAgICAgIHRldGhlcnMuc3BsaWNlKGksIDEpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdFxuXHQgICAgICAvLyBSZW1vdmUgYW55IGVsZW1lbnRzIHdlIHdlcmUgdXNpbmcgZm9yIGNvbnZlbmllbmNlIGZyb20gdGhlIERPTVxuXHQgICAgICBpZiAodGV0aGVycy5sZW5ndGggPT09IDApIHtcblx0ICAgICAgICByZW1vdmVVdGlsRWxlbWVudHMoKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ3VwZGF0ZUF0dGFjaENsYXNzZXMnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZUF0dGFjaENsYXNzZXMoZWxlbWVudEF0dGFjaCwgdGFyZ2V0QXR0YWNoKSB7XG5cdCAgICAgIHZhciBfdGhpczYgPSB0aGlzO1xuXHRcblx0ICAgICAgZWxlbWVudEF0dGFjaCA9IGVsZW1lbnRBdHRhY2ggfHwgdGhpcy5hdHRhY2htZW50O1xuXHQgICAgICB0YXJnZXRBdHRhY2ggPSB0YXJnZXRBdHRhY2ggfHwgdGhpcy50YXJnZXRBdHRhY2htZW50O1xuXHQgICAgICB2YXIgc2lkZXMgPSBbJ2xlZnQnLCAndG9wJywgJ2JvdHRvbScsICdyaWdodCcsICdtaWRkbGUnLCAnY2VudGVyJ107XG5cdFxuXHQgICAgICBpZiAodHlwZW9mIHRoaXMuX2FkZEF0dGFjaENsYXNzZXMgIT09ICd1bmRlZmluZWQnICYmIHRoaXMuX2FkZEF0dGFjaENsYXNzZXMubGVuZ3RoKSB7XG5cdCAgICAgICAgLy8gdXBkYXRlQXR0YWNoQ2xhc3NlcyBjYW4gYmUgY2FsbGVkIG1vcmUgdGhhbiBvbmNlIGluIGEgcG9zaXRpb24gY2FsbCwgc29cblx0ICAgICAgICAvLyB3ZSBuZWVkIHRvIGNsZWFuIHVwIGFmdGVyIG91cnNlbHZlcyBzdWNoIHRoYXQgd2hlbiB0aGUgbGFzdCBkZWZlciBnZXRzXG5cdCAgICAgICAgLy8gcmFuIGl0IGRvZXNuJ3QgYWRkIGFueSBleHRyYSBjbGFzc2VzIGZyb20gcHJldmlvdXMgY2FsbHMuXG5cdCAgICAgICAgdGhpcy5fYWRkQXR0YWNoQ2xhc3Nlcy5zcGxpY2UoMCwgdGhpcy5fYWRkQXR0YWNoQ2xhc3Nlcy5sZW5ndGgpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAodHlwZW9mIHRoaXMuX2FkZEF0dGFjaENsYXNzZXMgPT09ICd1bmRlZmluZWQnKSB7XG5cdCAgICAgICAgdGhpcy5fYWRkQXR0YWNoQ2xhc3NlcyA9IFtdO1xuXHQgICAgICB9XG5cdCAgICAgIHZhciBhZGQgPSB0aGlzLl9hZGRBdHRhY2hDbGFzc2VzO1xuXHRcblx0ICAgICAgaWYgKGVsZW1lbnRBdHRhY2gudG9wKSB7XG5cdCAgICAgICAgYWRkLnB1c2godGhpcy5nZXRDbGFzcygnZWxlbWVudC1hdHRhY2hlZCcpICsgJy0nICsgZWxlbWVudEF0dGFjaC50b3ApO1xuXHQgICAgICB9XG5cdCAgICAgIGlmIChlbGVtZW50QXR0YWNoLmxlZnQpIHtcblx0ICAgICAgICBhZGQucHVzaCh0aGlzLmdldENsYXNzKCdlbGVtZW50LWF0dGFjaGVkJykgKyAnLScgKyBlbGVtZW50QXR0YWNoLmxlZnQpO1xuXHQgICAgICB9XG5cdCAgICAgIGlmICh0YXJnZXRBdHRhY2gudG9wKSB7XG5cdCAgICAgICAgYWRkLnB1c2godGhpcy5nZXRDbGFzcygndGFyZ2V0LWF0dGFjaGVkJykgKyAnLScgKyB0YXJnZXRBdHRhY2gudG9wKTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAodGFyZ2V0QXR0YWNoLmxlZnQpIHtcblx0ICAgICAgICBhZGQucHVzaCh0aGlzLmdldENsYXNzKCd0YXJnZXQtYXR0YWNoZWQnKSArICctJyArIHRhcmdldEF0dGFjaC5sZWZ0KTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdmFyIGFsbCA9IFtdO1xuXHQgICAgICBzaWRlcy5mb3JFYWNoKGZ1bmN0aW9uIChzaWRlKSB7XG5cdCAgICAgICAgYWxsLnB1c2goX3RoaXM2LmdldENsYXNzKCdlbGVtZW50LWF0dGFjaGVkJykgKyAnLScgKyBzaWRlKTtcblx0ICAgICAgICBhbGwucHVzaChfdGhpczYuZ2V0Q2xhc3MoJ3RhcmdldC1hdHRhY2hlZCcpICsgJy0nICsgc2lkZSk7XG5cdCAgICAgIH0pO1xuXHRcblx0ICAgICAgZGVmZXIoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGlmICghKHR5cGVvZiBfdGhpczYuX2FkZEF0dGFjaENsYXNzZXMgIT09ICd1bmRlZmluZWQnKSkge1xuXHQgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgdXBkYXRlQ2xhc3NlcyhfdGhpczYuZWxlbWVudCwgX3RoaXM2Ll9hZGRBdHRhY2hDbGFzc2VzLCBhbGwpO1xuXHQgICAgICAgIGlmICghKF90aGlzNi5vcHRpb25zLmFkZFRhcmdldENsYXNzZXMgPT09IGZhbHNlKSkge1xuXHQgICAgICAgICAgdXBkYXRlQ2xhc3NlcyhfdGhpczYudGFyZ2V0LCBfdGhpczYuX2FkZEF0dGFjaENsYXNzZXMsIGFsbCk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBkZWxldGUgX3RoaXM2Ll9hZGRBdHRhY2hDbGFzc2VzO1xuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdwb3NpdGlvbicsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gcG9zaXRpb24oKSB7XG5cdCAgICAgIHZhciBfdGhpczcgPSB0aGlzO1xuXHRcblx0ICAgICAgdmFyIGZsdXNoQ2hhbmdlcyA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMCB8fCBhcmd1bWVudHNbMF0gPT09IHVuZGVmaW5lZCA/IHRydWUgOiBhcmd1bWVudHNbMF07XG5cdFxuXHQgICAgICAvLyBmbHVzaENoYW5nZXMgY29tbWl0cyB0aGUgY2hhbmdlcyBpbW1lZGlhdGVseSwgbGVhdmUgdHJ1ZSB1bmxlc3MgeW91IGFyZSBwb3NpdGlvbmluZyBtdWx0aXBsZVxuXHQgICAgICAvLyB0ZXRoZXJzIChpbiB3aGljaCBjYXNlIGNhbGwgVGV0aGVyLlV0aWxzLmZsdXNoIHlvdXJzZWxmIHdoZW4geW91J3JlIGRvbmUpXG5cdFxuXHQgICAgICBpZiAoIXRoaXMuZW5hYmxlZCkge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdGhpcy5jbGVhckNhY2hlKCk7XG5cdFxuXHQgICAgICAvLyBUdXJuICdhdXRvJyBhdHRhY2htZW50cyBpbnRvIHRoZSBhcHByb3ByaWF0ZSBjb3JuZXIgb3IgZWRnZVxuXHQgICAgICB2YXIgdGFyZ2V0QXR0YWNobWVudCA9IGF1dG9Ub0ZpeGVkQXR0YWNobWVudCh0aGlzLnRhcmdldEF0dGFjaG1lbnQsIHRoaXMuYXR0YWNobWVudCk7XG5cdFxuXHQgICAgICB0aGlzLnVwZGF0ZUF0dGFjaENsYXNzZXModGhpcy5hdHRhY2htZW50LCB0YXJnZXRBdHRhY2htZW50KTtcblx0XG5cdCAgICAgIHZhciBlbGVtZW50UG9zID0gdGhpcy5jYWNoZSgnZWxlbWVudC1ib3VuZHMnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgcmV0dXJuIGdldEJvdW5kcyhfdGhpczcuZWxlbWVudCk7XG5cdCAgICAgIH0pO1xuXHRcblx0ICAgICAgdmFyIHdpZHRoID0gZWxlbWVudFBvcy53aWR0aDtcblx0ICAgICAgdmFyIGhlaWdodCA9IGVsZW1lbnRQb3MuaGVpZ2h0O1xuXHRcblx0ICAgICAgaWYgKHdpZHRoID09PSAwICYmIGhlaWdodCA9PT0gMCAmJiB0eXBlb2YgdGhpcy5sYXN0U2l6ZSAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0ICAgICAgICB2YXIgX2xhc3RTaXplID0gdGhpcy5sYXN0U2l6ZTtcblx0XG5cdCAgICAgICAgLy8gV2UgY2FjaGUgdGhlIGhlaWdodCBhbmQgd2lkdGggdG8gbWFrZSBpdCBwb3NzaWJsZSB0byBwb3NpdGlvbiBlbGVtZW50cyB0aGF0IGFyZVxuXHQgICAgICAgIC8vIGdldHRpbmcgaGlkZGVuLlxuXHQgICAgICAgIHdpZHRoID0gX2xhc3RTaXplLndpZHRoO1xuXHQgICAgICAgIGhlaWdodCA9IF9sYXN0U2l6ZS5oZWlnaHQ7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgdGhpcy5sYXN0U2l6ZSA9IHsgd2lkdGg6IHdpZHRoLCBoZWlnaHQ6IGhlaWdodCB9O1xuXHQgICAgICB9XG5cdFxuXHQgICAgICB2YXIgdGFyZ2V0UG9zID0gdGhpcy5jYWNoZSgndGFyZ2V0LWJvdW5kcycsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICByZXR1cm4gX3RoaXM3LmdldFRhcmdldEJvdW5kcygpO1xuXHQgICAgICB9KTtcblx0ICAgICAgdmFyIHRhcmdldFNpemUgPSB0YXJnZXRQb3M7XG5cdFxuXHQgICAgICAvLyBHZXQgYW4gYWN0dWFsIHB4IG9mZnNldCBmcm9tIHRoZSBhdHRhY2htZW50XG5cdCAgICAgIHZhciBvZmZzZXQgPSBvZmZzZXRUb1B4KGF0dGFjaG1lbnRUb09mZnNldCh0aGlzLmF0dGFjaG1lbnQpLCB7IHdpZHRoOiB3aWR0aCwgaGVpZ2h0OiBoZWlnaHQgfSk7XG5cdCAgICAgIHZhciB0YXJnZXRPZmZzZXQgPSBvZmZzZXRUb1B4KGF0dGFjaG1lbnRUb09mZnNldCh0YXJnZXRBdHRhY2htZW50KSwgdGFyZ2V0U2l6ZSk7XG5cdFxuXHQgICAgICB2YXIgbWFudWFsT2Zmc2V0ID0gb2Zmc2V0VG9QeCh0aGlzLm9mZnNldCwgeyB3aWR0aDogd2lkdGgsIGhlaWdodDogaGVpZ2h0IH0pO1xuXHQgICAgICB2YXIgbWFudWFsVGFyZ2V0T2Zmc2V0ID0gb2Zmc2V0VG9QeCh0aGlzLnRhcmdldE9mZnNldCwgdGFyZ2V0U2l6ZSk7XG5cdFxuXHQgICAgICAvLyBBZGQgdGhlIG1hbnVhbGx5IHByb3ZpZGVkIG9mZnNldFxuXHQgICAgICBvZmZzZXQgPSBhZGRPZmZzZXQob2Zmc2V0LCBtYW51YWxPZmZzZXQpO1xuXHQgICAgICB0YXJnZXRPZmZzZXQgPSBhZGRPZmZzZXQodGFyZ2V0T2Zmc2V0LCBtYW51YWxUYXJnZXRPZmZzZXQpO1xuXHRcblx0ICAgICAgLy8gSXQncyBub3cgb3VyIGdvYWwgdG8gbWFrZSAoZWxlbWVudCBwb3NpdGlvbiArIG9mZnNldCkgPT0gKHRhcmdldCBwb3NpdGlvbiArIHRhcmdldCBvZmZzZXQpXG5cdCAgICAgIHZhciBsZWZ0ID0gdGFyZ2V0UG9zLmxlZnQgKyB0YXJnZXRPZmZzZXQubGVmdCAtIG9mZnNldC5sZWZ0O1xuXHQgICAgICB2YXIgdG9wID0gdGFyZ2V0UG9zLnRvcCArIHRhcmdldE9mZnNldC50b3AgLSBvZmZzZXQudG9wO1xuXHRcblx0ICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBUZXRoZXJCYXNlLm1vZHVsZXMubGVuZ3RoOyArK2kpIHtcblx0ICAgICAgICB2YXIgX21vZHVsZTIgPSBUZXRoZXJCYXNlLm1vZHVsZXNbaV07XG5cdCAgICAgICAgdmFyIHJldCA9IF9tb2R1bGUyLnBvc2l0aW9uLmNhbGwodGhpcywge1xuXHQgICAgICAgICAgbGVmdDogbGVmdCxcblx0ICAgICAgICAgIHRvcDogdG9wLFxuXHQgICAgICAgICAgdGFyZ2V0QXR0YWNobWVudDogdGFyZ2V0QXR0YWNobWVudCxcblx0ICAgICAgICAgIHRhcmdldFBvczogdGFyZ2V0UG9zLFxuXHQgICAgICAgICAgZWxlbWVudFBvczogZWxlbWVudFBvcyxcblx0ICAgICAgICAgIG9mZnNldDogb2Zmc2V0LFxuXHQgICAgICAgICAgdGFyZ2V0T2Zmc2V0OiB0YXJnZXRPZmZzZXQsXG5cdCAgICAgICAgICBtYW51YWxPZmZzZXQ6IG1hbnVhbE9mZnNldCxcblx0ICAgICAgICAgIG1hbnVhbFRhcmdldE9mZnNldDogbWFudWFsVGFyZ2V0T2Zmc2V0LFxuXHQgICAgICAgICAgc2Nyb2xsYmFyU2l6ZTogc2Nyb2xsYmFyU2l6ZSxcblx0ICAgICAgICAgIGF0dGFjaG1lbnQ6IHRoaXMuYXR0YWNobWVudFxuXHQgICAgICAgIH0pO1xuXHRcblx0ICAgICAgICBpZiAocmV0ID09PSBmYWxzZSkge1xuXHQgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHJldCA9PT0gJ3VuZGVmaW5lZCcgfHwgdHlwZW9mIHJldCAhPT0gJ29iamVjdCcpIHtcblx0ICAgICAgICAgIGNvbnRpbnVlO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICB0b3AgPSByZXQudG9wO1xuXHQgICAgICAgICAgbGVmdCA9IHJldC5sZWZ0O1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHRcblx0ICAgICAgLy8gV2UgZGVzY3JpYmUgdGhlIHBvc2l0aW9uIHRocmVlIGRpZmZlcmVudCB3YXlzIHRvIGdpdmUgdGhlIG9wdGltaXplclxuXHQgICAgICAvLyBhIGNoYW5jZSB0byBkZWNpZGUgdGhlIGJlc3QgcG9zc2libGUgd2F5IHRvIHBvc2l0aW9uIHRoZSBlbGVtZW50XG5cdCAgICAgIC8vIHdpdGggdGhlIGZld2VzdCByZXBhaW50cy5cblx0ICAgICAgdmFyIG5leHQgPSB7XG5cdCAgICAgICAgLy8gSXQncyBwb3NpdGlvbiByZWxhdGl2ZSB0byB0aGUgcGFnZSAoYWJzb2x1dGUgcG9zaXRpb25pbmcgd2hlblxuXHQgICAgICAgIC8vIHRoZSBlbGVtZW50IGlzIGEgY2hpbGQgb2YgdGhlIGJvZHkpXG5cdCAgICAgICAgcGFnZToge1xuXHQgICAgICAgICAgdG9wOiB0b3AsXG5cdCAgICAgICAgICBsZWZ0OiBsZWZ0XG5cdCAgICAgICAgfSxcblx0XG5cdCAgICAgICAgLy8gSXQncyBwb3NpdGlvbiByZWxhdGl2ZSB0byB0aGUgdmlld3BvcnQgKGZpeGVkIHBvc2l0aW9uaW5nKVxuXHQgICAgICAgIHZpZXdwb3J0OiB7XG5cdCAgICAgICAgICB0b3A6IHRvcCAtIHBhZ2VZT2Zmc2V0LFxuXHQgICAgICAgICAgYm90dG9tOiBwYWdlWU9mZnNldCAtIHRvcCAtIGhlaWdodCArIGlubmVySGVpZ2h0LFxuXHQgICAgICAgICAgbGVmdDogbGVmdCAtIHBhZ2VYT2Zmc2V0LFxuXHQgICAgICAgICAgcmlnaHQ6IHBhZ2VYT2Zmc2V0IC0gbGVmdCAtIHdpZHRoICsgaW5uZXJXaWR0aFxuXHQgICAgICAgIH1cblx0ICAgICAgfTtcblx0XG5cdCAgICAgIHZhciBkb2MgPSB0aGlzLnRhcmdldC5vd25lckRvY3VtZW50O1xuXHQgICAgICB2YXIgd2luID0gZG9jLmRlZmF1bHRWaWV3O1xuXHRcblx0ICAgICAgdmFyIHNjcm9sbGJhclNpemUgPSB1bmRlZmluZWQ7XG5cdCAgICAgIGlmICh3aW4uaW5uZXJIZWlnaHQgPiBkb2MuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCkge1xuXHQgICAgICAgIHNjcm9sbGJhclNpemUgPSB0aGlzLmNhY2hlKCdzY3JvbGxiYXItc2l6ZScsIGdldFNjcm9sbEJhclNpemUpO1xuXHQgICAgICAgIG5leHQudmlld3BvcnQuYm90dG9tIC09IHNjcm9sbGJhclNpemUuaGVpZ2h0O1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAod2luLmlubmVyV2lkdGggPiBkb2MuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoKSB7XG5cdCAgICAgICAgc2Nyb2xsYmFyU2l6ZSA9IHRoaXMuY2FjaGUoJ3Njcm9sbGJhci1zaXplJywgZ2V0U2Nyb2xsQmFyU2l6ZSk7XG5cdCAgICAgICAgbmV4dC52aWV3cG9ydC5yaWdodCAtPSBzY3JvbGxiYXJTaXplLndpZHRoO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAoWycnLCAnc3RhdGljJ10uaW5kZXhPZihkb2MuYm9keS5zdHlsZS5wb3NpdGlvbikgPT09IC0xIHx8IFsnJywgJ3N0YXRpYyddLmluZGV4T2YoZG9jLmJvZHkucGFyZW50RWxlbWVudC5zdHlsZS5wb3NpdGlvbikgPT09IC0xKSB7XG5cdCAgICAgICAgLy8gQWJzb2x1dGUgcG9zaXRpb25pbmcgaW4gdGhlIGJvZHkgd2lsbCBiZSByZWxhdGl2ZSB0byB0aGUgcGFnZSwgbm90IHRoZSAnaW5pdGlhbCBjb250YWluaW5nIGJsb2NrJ1xuXHQgICAgICAgIG5leHQucGFnZS5ib3R0b20gPSBkb2MuYm9keS5zY3JvbGxIZWlnaHQgLSB0b3AgLSBoZWlnaHQ7XG5cdCAgICAgICAgbmV4dC5wYWdlLnJpZ2h0ID0gZG9jLmJvZHkuc2Nyb2xsV2lkdGggLSBsZWZ0IC0gd2lkdGg7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmICh0eXBlb2YgdGhpcy5vcHRpb25zLm9wdGltaXphdGlvbnMgIT09ICd1bmRlZmluZWQnICYmIHRoaXMub3B0aW9ucy5vcHRpbWl6YXRpb25zLm1vdmVFbGVtZW50ICE9PSBmYWxzZSAmJiAhKHR5cGVvZiB0aGlzLnRhcmdldE1vZGlmaWVyICE9PSAndW5kZWZpbmVkJykpIHtcblx0ICAgICAgICAoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgdmFyIG9mZnNldFBhcmVudCA9IF90aGlzNy5jYWNoZSgndGFyZ2V0LW9mZnNldHBhcmVudCcsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIGdldE9mZnNldFBhcmVudChfdGhpczcudGFyZ2V0KTtcblx0ICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgdmFyIG9mZnNldFBvc2l0aW9uID0gX3RoaXM3LmNhY2hlKCd0YXJnZXQtb2Zmc2V0cGFyZW50LWJvdW5kcycsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIGdldEJvdW5kcyhvZmZzZXRQYXJlbnQpO1xuXHQgICAgICAgICAgfSk7XG5cdCAgICAgICAgICB2YXIgb2Zmc2V0UGFyZW50U3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKG9mZnNldFBhcmVudCk7XG5cdCAgICAgICAgICB2YXIgb2Zmc2V0UGFyZW50U2l6ZSA9IG9mZnNldFBvc2l0aW9uO1xuXHRcblx0ICAgICAgICAgIHZhciBvZmZzZXRCb3JkZXIgPSB7fTtcblx0ICAgICAgICAgIFsnVG9wJywgJ0xlZnQnLCAnQm90dG9tJywgJ1JpZ2h0J10uZm9yRWFjaChmdW5jdGlvbiAoc2lkZSkge1xuXHQgICAgICAgICAgICBvZmZzZXRCb3JkZXJbc2lkZS50b0xvd2VyQ2FzZSgpXSA9IHBhcnNlRmxvYXQob2Zmc2V0UGFyZW50U3R5bGVbJ2JvcmRlcicgKyBzaWRlICsgJ1dpZHRoJ10pO1xuXHQgICAgICAgICAgfSk7XG5cdFxuXHQgICAgICAgICAgb2Zmc2V0UG9zaXRpb24ucmlnaHQgPSBkb2MuYm9keS5zY3JvbGxXaWR0aCAtIG9mZnNldFBvc2l0aW9uLmxlZnQgLSBvZmZzZXRQYXJlbnRTaXplLndpZHRoICsgb2Zmc2V0Qm9yZGVyLnJpZ2h0O1xuXHQgICAgICAgICAgb2Zmc2V0UG9zaXRpb24uYm90dG9tID0gZG9jLmJvZHkuc2Nyb2xsSGVpZ2h0IC0gb2Zmc2V0UG9zaXRpb24udG9wIC0gb2Zmc2V0UGFyZW50U2l6ZS5oZWlnaHQgKyBvZmZzZXRCb3JkZXIuYm90dG9tO1xuXHRcblx0ICAgICAgICAgIGlmIChuZXh0LnBhZ2UudG9wID49IG9mZnNldFBvc2l0aW9uLnRvcCArIG9mZnNldEJvcmRlci50b3AgJiYgbmV4dC5wYWdlLmJvdHRvbSA+PSBvZmZzZXRQb3NpdGlvbi5ib3R0b20pIHtcblx0ICAgICAgICAgICAgaWYgKG5leHQucGFnZS5sZWZ0ID49IG9mZnNldFBvc2l0aW9uLmxlZnQgKyBvZmZzZXRCb3JkZXIubGVmdCAmJiBuZXh0LnBhZ2UucmlnaHQgPj0gb2Zmc2V0UG9zaXRpb24ucmlnaHQpIHtcblx0ICAgICAgICAgICAgICAvLyBXZSdyZSB3aXRoaW4gdGhlIHZpc2libGUgcGFydCBvZiB0aGUgdGFyZ2V0J3Mgc2Nyb2xsIHBhcmVudFxuXHQgICAgICAgICAgICAgIHZhciBzY3JvbGxUb3AgPSBvZmZzZXRQYXJlbnQuc2Nyb2xsVG9wO1xuXHQgICAgICAgICAgICAgIHZhciBzY3JvbGxMZWZ0ID0gb2Zmc2V0UGFyZW50LnNjcm9sbExlZnQ7XG5cdFxuXHQgICAgICAgICAgICAgIC8vIEl0J3MgcG9zaXRpb24gcmVsYXRpdmUgdG8gdGhlIHRhcmdldCdzIG9mZnNldCBwYXJlbnQgKGFic29sdXRlIHBvc2l0aW9uaW5nIHdoZW5cblx0ICAgICAgICAgICAgICAvLyB0aGUgZWxlbWVudCBpcyBtb3ZlZCB0byBiZSBhIGNoaWxkIG9mIHRoZSB0YXJnZXQncyBvZmZzZXQgcGFyZW50KS5cblx0ICAgICAgICAgICAgICBuZXh0Lm9mZnNldCA9IHtcblx0ICAgICAgICAgICAgICAgIHRvcDogbmV4dC5wYWdlLnRvcCAtIG9mZnNldFBvc2l0aW9uLnRvcCArIHNjcm9sbFRvcCAtIG9mZnNldEJvcmRlci50b3AsXG5cdCAgICAgICAgICAgICAgICBsZWZ0OiBuZXh0LnBhZ2UubGVmdCAtIG9mZnNldFBvc2l0aW9uLmxlZnQgKyBzY3JvbGxMZWZ0IC0gb2Zmc2V0Qm9yZGVyLmxlZnRcblx0ICAgICAgICAgICAgICB9O1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSkoKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgLy8gV2UgY291bGQgYWxzbyB0cmF2ZWwgdXAgdGhlIERPTSBhbmQgdHJ5IGVhY2ggY29udGFpbmluZyBjb250ZXh0LCByYXRoZXIgdGhhbiBvbmx5XG5cdCAgICAgIC8vIGxvb2tpbmcgYXQgdGhlIGJvZHksIGJ1dCB3ZSdyZSBnb25uYSBnZXQgZGltaW5pc2hpbmcgcmV0dXJucy5cblx0XG5cdCAgICAgIHRoaXMubW92ZShuZXh0KTtcblx0XG5cdCAgICAgIHRoaXMuaGlzdG9yeS51bnNoaWZ0KG5leHQpO1xuXHRcblx0ICAgICAgaWYgKHRoaXMuaGlzdG9yeS5sZW5ndGggPiAzKSB7XG5cdCAgICAgICAgdGhpcy5oaXN0b3J5LnBvcCgpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAoZmx1c2hDaGFuZ2VzKSB7XG5cdCAgICAgICAgZmx1c2goKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgcmV0dXJuIHRydWU7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gVEhFIElTU1VFXG5cdCAgfSwge1xuXHQgICAga2V5OiAnbW92ZScsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gbW92ZShwb3MpIHtcblx0ICAgICAgdmFyIF90aGlzOCA9IHRoaXM7XG5cdFxuXHQgICAgICBpZiAoISh0eXBlb2YgdGhpcy5lbGVtZW50LnBhcmVudE5vZGUgIT09ICd1bmRlZmluZWQnKSkge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdmFyIHNhbWUgPSB7fTtcblx0XG5cdCAgICAgIGZvciAodmFyIHR5cGUgaW4gcG9zKSB7XG5cdCAgICAgICAgc2FtZVt0eXBlXSA9IHt9O1xuXHRcblx0ICAgICAgICBmb3IgKHZhciBrZXkgaW4gcG9zW3R5cGVdKSB7XG5cdCAgICAgICAgICB2YXIgZm91bmQgPSBmYWxzZTtcblx0XG5cdCAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuaGlzdG9yeS5sZW5ndGg7ICsraSkge1xuXHQgICAgICAgICAgICB2YXIgcG9pbnQgPSB0aGlzLmhpc3RvcnlbaV07XG5cdCAgICAgICAgICAgIGlmICh0eXBlb2YgcG9pbnRbdHlwZV0gIT09ICd1bmRlZmluZWQnICYmICF3aXRoaW4ocG9pbnRbdHlwZV1ba2V5XSwgcG9zW3R5cGVdW2tleV0pKSB7XG5cdCAgICAgICAgICAgICAgZm91bmQgPSB0cnVlO1xuXHQgICAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgaWYgKCFmb3VuZCkge1xuXHQgICAgICAgICAgICBzYW1lW3R5cGVdW2tleV0gPSB0cnVlO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHRcblx0ICAgICAgdmFyIGNzcyA9IHsgdG9wOiAnJywgbGVmdDogJycsIHJpZ2h0OiAnJywgYm90dG9tOiAnJyB9O1xuXHRcblx0ICAgICAgdmFyIHRyYW5zY3JpYmUgPSBmdW5jdGlvbiB0cmFuc2NyaWJlKF9zYW1lLCBfcG9zKSB7XG5cdCAgICAgICAgdmFyIGhhc09wdGltaXphdGlvbnMgPSB0eXBlb2YgX3RoaXM4Lm9wdGlvbnMub3B0aW1pemF0aW9ucyAhPT0gJ3VuZGVmaW5lZCc7XG5cdCAgICAgICAgdmFyIGdwdSA9IGhhc09wdGltaXphdGlvbnMgPyBfdGhpczgub3B0aW9ucy5vcHRpbWl6YXRpb25zLmdwdSA6IG51bGw7XG5cdCAgICAgICAgaWYgKGdwdSAhPT0gZmFsc2UpIHtcblx0ICAgICAgICAgIHZhciB5UG9zID0gdW5kZWZpbmVkLFxuXHQgICAgICAgICAgICAgIHhQb3MgPSB1bmRlZmluZWQ7XG5cdCAgICAgICAgICBpZiAoX3NhbWUudG9wKSB7XG5cdCAgICAgICAgICAgIGNzcy50b3AgPSAwO1xuXHQgICAgICAgICAgICB5UG9zID0gX3Bvcy50b3A7XG5cdCAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBjc3MuYm90dG9tID0gMDtcblx0ICAgICAgICAgICAgeVBvcyA9IC1fcG9zLmJvdHRvbTtcblx0ICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICBpZiAoX3NhbWUubGVmdCkge1xuXHQgICAgICAgICAgICBjc3MubGVmdCA9IDA7XG5cdCAgICAgICAgICAgIHhQb3MgPSBfcG9zLmxlZnQ7XG5cdCAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBjc3MucmlnaHQgPSAwO1xuXHQgICAgICAgICAgICB4UG9zID0gLV9wb3MucmlnaHQ7XG5cdCAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgaWYgKHdpbmRvdy5tYXRjaE1lZGlhKSB7XG5cdCAgICAgICAgICAgIC8vIEh1YlNwb3QvdGV0aGVyIzIwN1xuXHQgICAgICAgICAgICB2YXIgcmV0aW5hID0gd2luZG93Lm1hdGNoTWVkaWEoJ29ubHkgc2NyZWVuIGFuZCAobWluLXJlc29sdXRpb246IDEuM2RwcHgpJykubWF0Y2hlcyB8fCB3aW5kb3cubWF0Y2hNZWRpYSgnb25seSBzY3JlZW4gYW5kICgtd2Via2l0LW1pbi1kZXZpY2UtcGl4ZWwtcmF0aW86IDEuMyknKS5tYXRjaGVzO1xuXHQgICAgICAgICAgICBpZiAoIXJldGluYSkge1xuXHQgICAgICAgICAgICAgIHhQb3MgPSBNYXRoLnJvdW5kKHhQb3MpO1xuXHQgICAgICAgICAgICAgIHlQb3MgPSBNYXRoLnJvdW5kKHlQb3MpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgY3NzW3RyYW5zZm9ybUtleV0gPSAndHJhbnNsYXRlWCgnICsgeFBvcyArICdweCkgdHJhbnNsYXRlWSgnICsgeVBvcyArICdweCknO1xuXHRcblx0ICAgICAgICAgIGlmICh0cmFuc2Zvcm1LZXkgIT09ICdtc1RyYW5zZm9ybScpIHtcblx0ICAgICAgICAgICAgLy8gVGhlIFogdHJhbnNmb3JtIHdpbGwga2VlcCB0aGlzIGluIHRoZSBHUFUgKGZhc3RlciwgYW5kIHByZXZlbnRzIGFydGlmYWN0cyksXG5cdCAgICAgICAgICAgIC8vIGJ1dCBJRTkgZG9lc24ndCBzdXBwb3J0IDNkIHRyYW5zZm9ybXMgYW5kIHdpbGwgY2hva2UuXG5cdCAgICAgICAgICAgIGNzc1t0cmFuc2Zvcm1LZXldICs9IFwiIHRyYW5zbGF0ZVooMClcIjtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgaWYgKF9zYW1lLnRvcCkge1xuXHQgICAgICAgICAgICBjc3MudG9wID0gX3Bvcy50b3AgKyAncHgnO1xuXHQgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgY3NzLmJvdHRvbSA9IF9wb3MuYm90dG9tICsgJ3B4Jztcblx0ICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICBpZiAoX3NhbWUubGVmdCkge1xuXHQgICAgICAgICAgICBjc3MubGVmdCA9IF9wb3MubGVmdCArICdweCc7XG5cdCAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBjc3MucmlnaHQgPSBfcG9zLnJpZ2h0ICsgJ3B4Jztcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH07XG5cdFxuXHQgICAgICB2YXIgbW92ZWQgPSBmYWxzZTtcblx0ICAgICAgaWYgKChzYW1lLnBhZ2UudG9wIHx8IHNhbWUucGFnZS5ib3R0b20pICYmIChzYW1lLnBhZ2UubGVmdCB8fCBzYW1lLnBhZ2UucmlnaHQpKSB7XG5cdCAgICAgICAgY3NzLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcblx0ICAgICAgICB0cmFuc2NyaWJlKHNhbWUucGFnZSwgcG9zLnBhZ2UpO1xuXHQgICAgICB9IGVsc2UgaWYgKChzYW1lLnZpZXdwb3J0LnRvcCB8fCBzYW1lLnZpZXdwb3J0LmJvdHRvbSkgJiYgKHNhbWUudmlld3BvcnQubGVmdCB8fCBzYW1lLnZpZXdwb3J0LnJpZ2h0KSkge1xuXHQgICAgICAgIGNzcy5wb3NpdGlvbiA9ICdmaXhlZCc7XG5cdCAgICAgICAgdHJhbnNjcmliZShzYW1lLnZpZXdwb3J0LCBwb3Mudmlld3BvcnQpO1xuXHQgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBzYW1lLm9mZnNldCAhPT0gJ3VuZGVmaW5lZCcgJiYgc2FtZS5vZmZzZXQudG9wICYmIHNhbWUub2Zmc2V0LmxlZnQpIHtcblx0ICAgICAgICAoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgY3NzLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcblx0ICAgICAgICAgIHZhciBvZmZzZXRQYXJlbnQgPSBfdGhpczguY2FjaGUoJ3RhcmdldC1vZmZzZXRwYXJlbnQnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBnZXRPZmZzZXRQYXJlbnQoX3RoaXM4LnRhcmdldCk7XG5cdCAgICAgICAgICB9KTtcblx0XG5cdCAgICAgICAgICBpZiAoZ2V0T2Zmc2V0UGFyZW50KF90aGlzOC5lbGVtZW50KSAhPT0gb2Zmc2V0UGFyZW50KSB7XG5cdCAgICAgICAgICAgIGRlZmVyKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgICBfdGhpczguZWxlbWVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKF90aGlzOC5lbGVtZW50KTtcblx0ICAgICAgICAgICAgICBvZmZzZXRQYXJlbnQuYXBwZW5kQ2hpbGQoX3RoaXM4LmVsZW1lbnQpO1xuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICB0cmFuc2NyaWJlKHNhbWUub2Zmc2V0LCBwb3Mub2Zmc2V0KTtcblx0ICAgICAgICAgIG1vdmVkID0gdHJ1ZTtcblx0ICAgICAgICB9KSgpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIGNzcy5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG5cdCAgICAgICAgdHJhbnNjcmliZSh7IHRvcDogdHJ1ZSwgbGVmdDogdHJ1ZSB9LCBwb3MucGFnZSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmICghbW92ZWQpIHtcblx0ICAgICAgICB2YXIgb2Zmc2V0UGFyZW50SXNCb2R5ID0gdHJ1ZTtcblx0ICAgICAgICB2YXIgY3VycmVudE5vZGUgPSB0aGlzLmVsZW1lbnQucGFyZW50Tm9kZTtcblx0ICAgICAgICB3aGlsZSAoY3VycmVudE5vZGUgJiYgY3VycmVudE5vZGUubm9kZVR5cGUgPT09IDEgJiYgY3VycmVudE5vZGUudGFnTmFtZSAhPT0gJ0JPRFknKSB7XG5cdCAgICAgICAgICBpZiAoZ2V0Q29tcHV0ZWRTdHlsZShjdXJyZW50Tm9kZSkucG9zaXRpb24gIT09ICdzdGF0aWMnKSB7XG5cdCAgICAgICAgICAgIG9mZnNldFBhcmVudElzQm9keSA9IGZhbHNlO1xuXHQgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICBjdXJyZW50Tm9kZSA9IGN1cnJlbnROb2RlLnBhcmVudE5vZGU7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBpZiAoIW9mZnNldFBhcmVudElzQm9keSkge1xuXHQgICAgICAgICAgdGhpcy5lbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5lbGVtZW50KTtcblx0ICAgICAgICAgIHRoaXMuZWxlbWVudC5vd25lckRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5lbGVtZW50KTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8vIEFueSBjc3MgY2hhbmdlIHdpbGwgdHJpZ2dlciBhIHJlcGFpbnQsIHNvIGxldCdzIGF2b2lkIG9uZSBpZiBub3RoaW5nIGNoYW5nZWRcblx0ICAgICAgdmFyIHdyaXRlQ1NTID0ge307XG5cdCAgICAgIHZhciB3cml0ZSA9IGZhbHNlO1xuXHQgICAgICBmb3IgKHZhciBrZXkgaW4gY3NzKSB7XG5cdCAgICAgICAgdmFyIHZhbCA9IGNzc1trZXldO1xuXHQgICAgICAgIHZhciBlbFZhbCA9IHRoaXMuZWxlbWVudC5zdHlsZVtrZXldO1xuXHRcblx0ICAgICAgICBpZiAoZWxWYWwgIT09IHZhbCkge1xuXHQgICAgICAgICAgd3JpdGUgPSB0cnVlO1xuXHQgICAgICAgICAgd3JpdGVDU1Nba2V5XSA9IHZhbDtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmICh3cml0ZSkge1xuXHQgICAgICAgIGRlZmVyKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgIGV4dGVuZChfdGhpczguZWxlbWVudC5zdHlsZSwgd3JpdGVDU1MpO1xuXHQgICAgICAgICAgX3RoaXM4LnRyaWdnZXIoJ3JlcG9zaXRpb25lZCcpO1xuXHQgICAgICAgIH0pO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfV0pO1xuXHRcblx0ICByZXR1cm4gVGV0aGVyQ2xhc3M7XG5cdH0pKEV2ZW50ZWQpO1xuXHRcblx0VGV0aGVyQ2xhc3MubW9kdWxlcyA9IFtdO1xuXHRcblx0VGV0aGVyQmFzZS5wb3NpdGlvbiA9IHBvc2l0aW9uO1xuXHRcblx0dmFyIFRldGhlciA9IGV4dGVuZChUZXRoZXJDbGFzcywgVGV0aGVyQmFzZSk7XG5cdC8qIGdsb2JhbHMgVGV0aGVyQmFzZSAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIF9zbGljZWRUb0FycmF5ID0gKGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gc2xpY2VJdGVyYXRvcihhcnIsIGkpIHsgdmFyIF9hcnIgPSBbXTsgdmFyIF9uID0gdHJ1ZTsgdmFyIF9kID0gZmFsc2U7IHZhciBfZSA9IHVuZGVmaW5lZDsgdHJ5IHsgZm9yICh2YXIgX2kgPSBhcnJbU3ltYm9sLml0ZXJhdG9yXSgpLCBfczsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkgeyBfYXJyLnB1c2goX3MudmFsdWUpOyBpZiAoaSAmJiBfYXJyLmxlbmd0aCA9PT0gaSkgYnJlYWs7IH0gfSBjYXRjaCAoZXJyKSB7IF9kID0gdHJ1ZTsgX2UgPSBlcnI7IH0gZmluYWxseSB7IHRyeSB7IGlmICghX24gJiYgX2lbJ3JldHVybiddKSBfaVsncmV0dXJuJ10oKTsgfSBmaW5hbGx5IHsgaWYgKF9kKSB0aHJvdyBfZTsgfSB9IHJldHVybiBfYXJyOyB9IHJldHVybiBmdW5jdGlvbiAoYXJyLCBpKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHsgcmV0dXJuIGFycjsgfSBlbHNlIGlmIChTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGFycikpIHsgcmV0dXJuIHNsaWNlSXRlcmF0b3IoYXJyLCBpKTsgfSBlbHNlIHsgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZScpOyB9IH07IH0pKCk7XG5cdFxuXHR2YXIgX1RldGhlckJhc2UkVXRpbHMgPSBUZXRoZXJCYXNlLlV0aWxzO1xuXHR2YXIgZ2V0Qm91bmRzID0gX1RldGhlckJhc2UkVXRpbHMuZ2V0Qm91bmRzO1xuXHR2YXIgZXh0ZW5kID0gX1RldGhlckJhc2UkVXRpbHMuZXh0ZW5kO1xuXHR2YXIgdXBkYXRlQ2xhc3NlcyA9IF9UZXRoZXJCYXNlJFV0aWxzLnVwZGF0ZUNsYXNzZXM7XG5cdHZhciBkZWZlciA9IF9UZXRoZXJCYXNlJFV0aWxzLmRlZmVyO1xuXHRcblx0dmFyIEJPVU5EU19GT1JNQVQgPSBbJ2xlZnQnLCAndG9wJywgJ3JpZ2h0JywgJ2JvdHRvbSddO1xuXHRcblx0ZnVuY3Rpb24gZ2V0Qm91bmRpbmdSZWN0KHRldGhlciwgdG8pIHtcblx0ICBpZiAodG8gPT09ICdzY3JvbGxQYXJlbnQnKSB7XG5cdCAgICB0byA9IHRldGhlci5zY3JvbGxQYXJlbnRzWzBdO1xuXHQgIH0gZWxzZSBpZiAodG8gPT09ICd3aW5kb3cnKSB7XG5cdCAgICB0byA9IFtwYWdlWE9mZnNldCwgcGFnZVlPZmZzZXQsIGlubmVyV2lkdGggKyBwYWdlWE9mZnNldCwgaW5uZXJIZWlnaHQgKyBwYWdlWU9mZnNldF07XG5cdCAgfVxuXHRcblx0ICBpZiAodG8gPT09IGRvY3VtZW50KSB7XG5cdCAgICB0byA9IHRvLmRvY3VtZW50RWxlbWVudDtcblx0ICB9XG5cdFxuXHQgIGlmICh0eXBlb2YgdG8ubm9kZVR5cGUgIT09ICd1bmRlZmluZWQnKSB7XG5cdCAgICAoZnVuY3Rpb24gKCkge1xuXHQgICAgICB2YXIgbm9kZSA9IHRvO1xuXHQgICAgICB2YXIgc2l6ZSA9IGdldEJvdW5kcyh0byk7XG5cdCAgICAgIHZhciBwb3MgPSBzaXplO1xuXHQgICAgICB2YXIgc3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKHRvKTtcblx0XG5cdCAgICAgIHRvID0gW3Bvcy5sZWZ0LCBwb3MudG9wLCBzaXplLndpZHRoICsgcG9zLmxlZnQsIHNpemUuaGVpZ2h0ICsgcG9zLnRvcF07XG5cdFxuXHQgICAgICAvLyBBY2NvdW50IGFueSBwYXJlbnQgRnJhbWVzIHNjcm9sbCBvZmZzZXRcblx0ICAgICAgaWYgKG5vZGUub3duZXJEb2N1bWVudCAhPT0gZG9jdW1lbnQpIHtcblx0ICAgICAgICB2YXIgd2luID0gbm9kZS5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3O1xuXHQgICAgICAgIHRvWzBdICs9IHdpbi5wYWdlWE9mZnNldDtcblx0ICAgICAgICB0b1sxXSArPSB3aW4ucGFnZVlPZmZzZXQ7XG5cdCAgICAgICAgdG9bMl0gKz0gd2luLnBhZ2VYT2Zmc2V0O1xuXHQgICAgICAgIHRvWzNdICs9IHdpbi5wYWdlWU9mZnNldDtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgQk9VTkRTX0ZPUk1BVC5mb3JFYWNoKGZ1bmN0aW9uIChzaWRlLCBpKSB7XG5cdCAgICAgICAgc2lkZSA9IHNpZGVbMF0udG9VcHBlckNhc2UoKSArIHNpZGUuc3Vic3RyKDEpO1xuXHQgICAgICAgIGlmIChzaWRlID09PSAnVG9wJyB8fCBzaWRlID09PSAnTGVmdCcpIHtcblx0ICAgICAgICAgIHRvW2ldICs9IHBhcnNlRmxvYXQoc3R5bGVbJ2JvcmRlcicgKyBzaWRlICsgJ1dpZHRoJ10pO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICB0b1tpXSAtPSBwYXJzZUZsb2F0KHN0eWxlWydib3JkZXInICsgc2lkZSArICdXaWR0aCddKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgfSkoKTtcblx0ICB9XG5cdFxuXHQgIHJldHVybiB0bztcblx0fVxuXHRcblx0VGV0aGVyQmFzZS5tb2R1bGVzLnB1c2goe1xuXHQgIHBvc2l0aW9uOiBmdW5jdGlvbiBwb3NpdGlvbihfcmVmKSB7XG5cdCAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXHRcblx0ICAgIHZhciB0b3AgPSBfcmVmLnRvcDtcblx0ICAgIHZhciBsZWZ0ID0gX3JlZi5sZWZ0O1xuXHQgICAgdmFyIHRhcmdldEF0dGFjaG1lbnQgPSBfcmVmLnRhcmdldEF0dGFjaG1lbnQ7XG5cdFxuXHQgICAgaWYgKCF0aGlzLm9wdGlvbnMuY29uc3RyYWludHMpIHtcblx0ICAgICAgcmV0dXJuIHRydWU7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIF9jYWNoZSA9IHRoaXMuY2FjaGUoJ2VsZW1lbnQtYm91bmRzJywgZnVuY3Rpb24gKCkge1xuXHQgICAgICByZXR1cm4gZ2V0Qm91bmRzKF90aGlzLmVsZW1lbnQpO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgdmFyIGhlaWdodCA9IF9jYWNoZS5oZWlnaHQ7XG5cdCAgICB2YXIgd2lkdGggPSBfY2FjaGUud2lkdGg7XG5cdFxuXHQgICAgaWYgKHdpZHRoID09PSAwICYmIGhlaWdodCA9PT0gMCAmJiB0eXBlb2YgdGhpcy5sYXN0U2l6ZSAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0ICAgICAgdmFyIF9sYXN0U2l6ZSA9IHRoaXMubGFzdFNpemU7XG5cdFxuXHQgICAgICAvLyBIYW5kbGUgdGhlIGl0ZW0gZ2V0dGluZyBoaWRkZW4gYXMgYSByZXN1bHQgb2Ygb3VyIHBvc2l0aW9uaW5nIHdpdGhvdXQgZ2xpdGNoaW5nXG5cdCAgICAgIC8vIHRoZSBjbGFzc2VzIGluIGFuZCBvdXRcblx0ICAgICAgd2lkdGggPSBfbGFzdFNpemUud2lkdGg7XG5cdCAgICAgIGhlaWdodCA9IF9sYXN0U2l6ZS5oZWlnaHQ7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIHRhcmdldFNpemUgPSB0aGlzLmNhY2hlKCd0YXJnZXQtYm91bmRzJywgZnVuY3Rpb24gKCkge1xuXHQgICAgICByZXR1cm4gX3RoaXMuZ2V0VGFyZ2V0Qm91bmRzKCk7XG5cdCAgICB9KTtcblx0XG5cdCAgICB2YXIgdGFyZ2V0SGVpZ2h0ID0gdGFyZ2V0U2l6ZS5oZWlnaHQ7XG5cdCAgICB2YXIgdGFyZ2V0V2lkdGggPSB0YXJnZXRTaXplLndpZHRoO1xuXHRcblx0ICAgIHZhciBhbGxDbGFzc2VzID0gW3RoaXMuZ2V0Q2xhc3MoJ3Bpbm5lZCcpLCB0aGlzLmdldENsYXNzKCdvdXQtb2YtYm91bmRzJyldO1xuXHRcblx0ICAgIHRoaXMub3B0aW9ucy5jb25zdHJhaW50cy5mb3JFYWNoKGZ1bmN0aW9uIChjb25zdHJhaW50KSB7XG5cdCAgICAgIHZhciBvdXRPZkJvdW5kc0NsYXNzID0gY29uc3RyYWludC5vdXRPZkJvdW5kc0NsYXNzO1xuXHQgICAgICB2YXIgcGlubmVkQ2xhc3MgPSBjb25zdHJhaW50LnBpbm5lZENsYXNzO1xuXHRcblx0ICAgICAgaWYgKG91dE9mQm91bmRzQ2xhc3MpIHtcblx0ICAgICAgICBhbGxDbGFzc2VzLnB1c2gob3V0T2ZCb3VuZHNDbGFzcyk7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKHBpbm5lZENsYXNzKSB7XG5cdCAgICAgICAgYWxsQ2xhc3Nlcy5wdXNoKHBpbm5lZENsYXNzKTtcblx0ICAgICAgfVxuXHQgICAgfSk7XG5cdFxuXHQgICAgYWxsQ2xhc3Nlcy5mb3JFYWNoKGZ1bmN0aW9uIChjbHMpIHtcblx0ICAgICAgWydsZWZ0JywgJ3RvcCcsICdyaWdodCcsICdib3R0b20nXS5mb3JFYWNoKGZ1bmN0aW9uIChzaWRlKSB7XG5cdCAgICAgICAgYWxsQ2xhc3Nlcy5wdXNoKGNscyArICctJyArIHNpZGUpO1xuXHQgICAgICB9KTtcblx0ICAgIH0pO1xuXHRcblx0ICAgIHZhciBhZGRDbGFzc2VzID0gW107XG5cdFxuXHQgICAgdmFyIHRBdHRhY2htZW50ID0gZXh0ZW5kKHt9LCB0YXJnZXRBdHRhY2htZW50KTtcblx0ICAgIHZhciBlQXR0YWNobWVudCA9IGV4dGVuZCh7fSwgdGhpcy5hdHRhY2htZW50KTtcblx0XG5cdCAgICB0aGlzLm9wdGlvbnMuY29uc3RyYWludHMuZm9yRWFjaChmdW5jdGlvbiAoY29uc3RyYWludCkge1xuXHQgICAgICB2YXIgdG8gPSBjb25zdHJhaW50LnRvO1xuXHQgICAgICB2YXIgYXR0YWNobWVudCA9IGNvbnN0cmFpbnQuYXR0YWNobWVudDtcblx0ICAgICAgdmFyIHBpbiA9IGNvbnN0cmFpbnQucGluO1xuXHRcblx0ICAgICAgaWYgKHR5cGVvZiBhdHRhY2htZW50ID09PSAndW5kZWZpbmVkJykge1xuXHQgICAgICAgIGF0dGFjaG1lbnQgPSAnJztcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdmFyIGNoYW5nZUF0dGFjaFggPSB1bmRlZmluZWQsXG5cdCAgICAgICAgICBjaGFuZ2VBdHRhY2hZID0gdW5kZWZpbmVkO1xuXHQgICAgICBpZiAoYXR0YWNobWVudC5pbmRleE9mKCcgJykgPj0gMCkge1xuXHQgICAgICAgIHZhciBfYXR0YWNobWVudCRzcGxpdCA9IGF0dGFjaG1lbnQuc3BsaXQoJyAnKTtcblx0XG5cdCAgICAgICAgdmFyIF9hdHRhY2htZW50JHNwbGl0MiA9IF9zbGljZWRUb0FycmF5KF9hdHRhY2htZW50JHNwbGl0LCAyKTtcblx0XG5cdCAgICAgICAgY2hhbmdlQXR0YWNoWSA9IF9hdHRhY2htZW50JHNwbGl0MlswXTtcblx0ICAgICAgICBjaGFuZ2VBdHRhY2hYID0gX2F0dGFjaG1lbnQkc3BsaXQyWzFdO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIGNoYW5nZUF0dGFjaFggPSBjaGFuZ2VBdHRhY2hZID0gYXR0YWNobWVudDtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdmFyIGJvdW5kcyA9IGdldEJvdW5kaW5nUmVjdChfdGhpcywgdG8pO1xuXHRcblx0ICAgICAgaWYgKGNoYW5nZUF0dGFjaFkgPT09ICd0YXJnZXQnIHx8IGNoYW5nZUF0dGFjaFkgPT09ICdib3RoJykge1xuXHQgICAgICAgIGlmICh0b3AgPCBib3VuZHNbMV0gJiYgdEF0dGFjaG1lbnQudG9wID09PSAndG9wJykge1xuXHQgICAgICAgICAgdG9wICs9IHRhcmdldEhlaWdodDtcblx0ICAgICAgICAgIHRBdHRhY2htZW50LnRvcCA9ICdib3R0b20nO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgaWYgKHRvcCArIGhlaWdodCA+IGJvdW5kc1szXSAmJiB0QXR0YWNobWVudC50b3AgPT09ICdib3R0b20nKSB7XG5cdCAgICAgICAgICB0b3AgLT0gdGFyZ2V0SGVpZ2h0O1xuXHQgICAgICAgICAgdEF0dGFjaG1lbnQudG9wID0gJ3RvcCc7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAoY2hhbmdlQXR0YWNoWSA9PT0gJ3RvZ2V0aGVyJykge1xuXHQgICAgICAgIGlmICh0QXR0YWNobWVudC50b3AgPT09ICd0b3AnKSB7XG5cdCAgICAgICAgICBpZiAoZUF0dGFjaG1lbnQudG9wID09PSAnYm90dG9tJyAmJiB0b3AgPCBib3VuZHNbMV0pIHtcblx0ICAgICAgICAgICAgdG9wICs9IHRhcmdldEhlaWdodDtcblx0ICAgICAgICAgICAgdEF0dGFjaG1lbnQudG9wID0gJ2JvdHRvbSc7XG5cdFxuXHQgICAgICAgICAgICB0b3AgKz0gaGVpZ2h0O1xuXHQgICAgICAgICAgICBlQXR0YWNobWVudC50b3AgPSAndG9wJztcblx0ICAgICAgICAgIH0gZWxzZSBpZiAoZUF0dGFjaG1lbnQudG9wID09PSAndG9wJyAmJiB0b3AgKyBoZWlnaHQgPiBib3VuZHNbM10gJiYgdG9wIC0gKGhlaWdodCAtIHRhcmdldEhlaWdodCkgPj0gYm91bmRzWzFdKSB7XG5cdCAgICAgICAgICAgIHRvcCAtPSBoZWlnaHQgLSB0YXJnZXRIZWlnaHQ7XG5cdCAgICAgICAgICAgIHRBdHRhY2htZW50LnRvcCA9ICdib3R0b20nO1xuXHRcblx0ICAgICAgICAgICAgZUF0dGFjaG1lbnQudG9wID0gJ2JvdHRvbSc7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBpZiAodEF0dGFjaG1lbnQudG9wID09PSAnYm90dG9tJykge1xuXHQgICAgICAgICAgaWYgKGVBdHRhY2htZW50LnRvcCA9PT0gJ3RvcCcgJiYgdG9wICsgaGVpZ2h0ID4gYm91bmRzWzNdKSB7XG5cdCAgICAgICAgICAgIHRvcCAtPSB0YXJnZXRIZWlnaHQ7XG5cdCAgICAgICAgICAgIHRBdHRhY2htZW50LnRvcCA9ICd0b3AnO1xuXHRcblx0ICAgICAgICAgICAgdG9wIC09IGhlaWdodDtcblx0ICAgICAgICAgICAgZUF0dGFjaG1lbnQudG9wID0gJ2JvdHRvbSc7XG5cdCAgICAgICAgICB9IGVsc2UgaWYgKGVBdHRhY2htZW50LnRvcCA9PT0gJ2JvdHRvbScgJiYgdG9wIDwgYm91bmRzWzFdICYmIHRvcCArIChoZWlnaHQgKiAyIC0gdGFyZ2V0SGVpZ2h0KSA8PSBib3VuZHNbM10pIHtcblx0ICAgICAgICAgICAgdG9wICs9IGhlaWdodCAtIHRhcmdldEhlaWdodDtcblx0ICAgICAgICAgICAgdEF0dGFjaG1lbnQudG9wID0gJ3RvcCc7XG5cdFxuXHQgICAgICAgICAgICBlQXR0YWNobWVudC50b3AgPSAndG9wJztcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGlmICh0QXR0YWNobWVudC50b3AgPT09ICdtaWRkbGUnKSB7XG5cdCAgICAgICAgICBpZiAodG9wICsgaGVpZ2h0ID4gYm91bmRzWzNdICYmIGVBdHRhY2htZW50LnRvcCA9PT0gJ3RvcCcpIHtcblx0ICAgICAgICAgICAgdG9wIC09IGhlaWdodDtcblx0ICAgICAgICAgICAgZUF0dGFjaG1lbnQudG9wID0gJ2JvdHRvbSc7XG5cdCAgICAgICAgICB9IGVsc2UgaWYgKHRvcCA8IGJvdW5kc1sxXSAmJiBlQXR0YWNobWVudC50b3AgPT09ICdib3R0b20nKSB7XG5cdCAgICAgICAgICAgIHRvcCArPSBoZWlnaHQ7XG5cdCAgICAgICAgICAgIGVBdHRhY2htZW50LnRvcCA9ICd0b3AnO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKGNoYW5nZUF0dGFjaFggPT09ICd0YXJnZXQnIHx8IGNoYW5nZUF0dGFjaFggPT09ICdib3RoJykge1xuXHQgICAgICAgIGlmIChsZWZ0IDwgYm91bmRzWzBdICYmIHRBdHRhY2htZW50LmxlZnQgPT09ICdsZWZ0Jykge1xuXHQgICAgICAgICAgbGVmdCArPSB0YXJnZXRXaWR0aDtcblx0ICAgICAgICAgIHRBdHRhY2htZW50LmxlZnQgPSAncmlnaHQnO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgaWYgKGxlZnQgKyB3aWR0aCA+IGJvdW5kc1syXSAmJiB0QXR0YWNobWVudC5sZWZ0ID09PSAncmlnaHQnKSB7XG5cdCAgICAgICAgICBsZWZ0IC09IHRhcmdldFdpZHRoO1xuXHQgICAgICAgICAgdEF0dGFjaG1lbnQubGVmdCA9ICdsZWZ0Jztcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmIChjaGFuZ2VBdHRhY2hYID09PSAndG9nZXRoZXInKSB7XG5cdCAgICAgICAgaWYgKGxlZnQgPCBib3VuZHNbMF0gJiYgdEF0dGFjaG1lbnQubGVmdCA9PT0gJ2xlZnQnKSB7XG5cdCAgICAgICAgICBpZiAoZUF0dGFjaG1lbnQubGVmdCA9PT0gJ3JpZ2h0Jykge1xuXHQgICAgICAgICAgICBsZWZ0ICs9IHRhcmdldFdpZHRoO1xuXHQgICAgICAgICAgICB0QXR0YWNobWVudC5sZWZ0ID0gJ3JpZ2h0Jztcblx0XG5cdCAgICAgICAgICAgIGxlZnQgKz0gd2lkdGg7XG5cdCAgICAgICAgICAgIGVBdHRhY2htZW50LmxlZnQgPSAnbGVmdCc7XG5cdCAgICAgICAgICB9IGVsc2UgaWYgKGVBdHRhY2htZW50LmxlZnQgPT09ICdsZWZ0Jykge1xuXHQgICAgICAgICAgICBsZWZ0ICs9IHRhcmdldFdpZHRoO1xuXHQgICAgICAgICAgICB0QXR0YWNobWVudC5sZWZ0ID0gJ3JpZ2h0Jztcblx0XG5cdCAgICAgICAgICAgIGxlZnQgLT0gd2lkdGg7XG5cdCAgICAgICAgICAgIGVBdHRhY2htZW50LmxlZnQgPSAncmlnaHQnO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0gZWxzZSBpZiAobGVmdCArIHdpZHRoID4gYm91bmRzWzJdICYmIHRBdHRhY2htZW50LmxlZnQgPT09ICdyaWdodCcpIHtcblx0ICAgICAgICAgIGlmIChlQXR0YWNobWVudC5sZWZ0ID09PSAnbGVmdCcpIHtcblx0ICAgICAgICAgICAgbGVmdCAtPSB0YXJnZXRXaWR0aDtcblx0ICAgICAgICAgICAgdEF0dGFjaG1lbnQubGVmdCA9ICdsZWZ0Jztcblx0XG5cdCAgICAgICAgICAgIGxlZnQgLT0gd2lkdGg7XG5cdCAgICAgICAgICAgIGVBdHRhY2htZW50LmxlZnQgPSAncmlnaHQnO1xuXHQgICAgICAgICAgfSBlbHNlIGlmIChlQXR0YWNobWVudC5sZWZ0ID09PSAncmlnaHQnKSB7XG5cdCAgICAgICAgICAgIGxlZnQgLT0gdGFyZ2V0V2lkdGg7XG5cdCAgICAgICAgICAgIHRBdHRhY2htZW50LmxlZnQgPSAnbGVmdCc7XG5cdFxuXHQgICAgICAgICAgICBsZWZ0ICs9IHdpZHRoO1xuXHQgICAgICAgICAgICBlQXR0YWNobWVudC5sZWZ0ID0gJ2xlZnQnO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0gZWxzZSBpZiAodEF0dGFjaG1lbnQubGVmdCA9PT0gJ2NlbnRlcicpIHtcblx0ICAgICAgICAgIGlmIChsZWZ0ICsgd2lkdGggPiBib3VuZHNbMl0gJiYgZUF0dGFjaG1lbnQubGVmdCA9PT0gJ2xlZnQnKSB7XG5cdCAgICAgICAgICAgIGxlZnQgLT0gd2lkdGg7XG5cdCAgICAgICAgICAgIGVBdHRhY2htZW50LmxlZnQgPSAncmlnaHQnO1xuXHQgICAgICAgICAgfSBlbHNlIGlmIChsZWZ0IDwgYm91bmRzWzBdICYmIGVBdHRhY2htZW50LmxlZnQgPT09ICdyaWdodCcpIHtcblx0ICAgICAgICAgICAgbGVmdCArPSB3aWR0aDtcblx0ICAgICAgICAgICAgZUF0dGFjaG1lbnQubGVmdCA9ICdsZWZ0Jztcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmIChjaGFuZ2VBdHRhY2hZID09PSAnZWxlbWVudCcgfHwgY2hhbmdlQXR0YWNoWSA9PT0gJ2JvdGgnKSB7XG5cdCAgICAgICAgaWYgKHRvcCA8IGJvdW5kc1sxXSAmJiBlQXR0YWNobWVudC50b3AgPT09ICdib3R0b20nKSB7XG5cdCAgICAgICAgICB0b3AgKz0gaGVpZ2h0O1xuXHQgICAgICAgICAgZUF0dGFjaG1lbnQudG9wID0gJ3RvcCc7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBpZiAodG9wICsgaGVpZ2h0ID4gYm91bmRzWzNdICYmIGVBdHRhY2htZW50LnRvcCA9PT0gJ3RvcCcpIHtcblx0ICAgICAgICAgIHRvcCAtPSBoZWlnaHQ7XG5cdCAgICAgICAgICBlQXR0YWNobWVudC50b3AgPSAnYm90dG9tJztcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmIChjaGFuZ2VBdHRhY2hYID09PSAnZWxlbWVudCcgfHwgY2hhbmdlQXR0YWNoWCA9PT0gJ2JvdGgnKSB7XG5cdCAgICAgICAgaWYgKGxlZnQgPCBib3VuZHNbMF0pIHtcblx0ICAgICAgICAgIGlmIChlQXR0YWNobWVudC5sZWZ0ID09PSAncmlnaHQnKSB7XG5cdCAgICAgICAgICAgIGxlZnQgKz0gd2lkdGg7XG5cdCAgICAgICAgICAgIGVBdHRhY2htZW50LmxlZnQgPSAnbGVmdCc7XG5cdCAgICAgICAgICB9IGVsc2UgaWYgKGVBdHRhY2htZW50LmxlZnQgPT09ICdjZW50ZXInKSB7XG5cdCAgICAgICAgICAgIGxlZnQgKz0gd2lkdGggLyAyO1xuXHQgICAgICAgICAgICBlQXR0YWNobWVudC5sZWZ0ID0gJ2xlZnQnO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgaWYgKGxlZnQgKyB3aWR0aCA+IGJvdW5kc1syXSkge1xuXHQgICAgICAgICAgaWYgKGVBdHRhY2htZW50LmxlZnQgPT09ICdsZWZ0Jykge1xuXHQgICAgICAgICAgICBsZWZ0IC09IHdpZHRoO1xuXHQgICAgICAgICAgICBlQXR0YWNobWVudC5sZWZ0ID0gJ3JpZ2h0Jztcblx0ICAgICAgICAgIH0gZWxzZSBpZiAoZUF0dGFjaG1lbnQubGVmdCA9PT0gJ2NlbnRlcicpIHtcblx0ICAgICAgICAgICAgbGVmdCAtPSB3aWR0aCAvIDI7XG5cdCAgICAgICAgICAgIGVBdHRhY2htZW50LmxlZnQgPSAncmlnaHQnO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKHR5cGVvZiBwaW4gPT09ICdzdHJpbmcnKSB7XG5cdCAgICAgICAgcGluID0gcGluLnNwbGl0KCcsJykubWFwKGZ1bmN0aW9uIChwKSB7XG5cdCAgICAgICAgICByZXR1cm4gcC50cmltKCk7XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH0gZWxzZSBpZiAocGluID09PSB0cnVlKSB7XG5cdCAgICAgICAgcGluID0gWyd0b3AnLCAnbGVmdCcsICdyaWdodCcsICdib3R0b20nXTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgcGluID0gcGluIHx8IFtdO1xuXHRcblx0ICAgICAgdmFyIHBpbm5lZCA9IFtdO1xuXHQgICAgICB2YXIgb29iID0gW107XG5cdFxuXHQgICAgICBpZiAodG9wIDwgYm91bmRzWzFdKSB7XG5cdCAgICAgICAgaWYgKHBpbi5pbmRleE9mKCd0b3AnKSA+PSAwKSB7XG5cdCAgICAgICAgICB0b3AgPSBib3VuZHNbMV07XG5cdCAgICAgICAgICBwaW5uZWQucHVzaCgndG9wJyk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIG9vYi5wdXNoKCd0b3AnKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmICh0b3AgKyBoZWlnaHQgPiBib3VuZHNbM10pIHtcblx0ICAgICAgICBpZiAocGluLmluZGV4T2YoJ2JvdHRvbScpID49IDApIHtcblx0ICAgICAgICAgIHRvcCA9IGJvdW5kc1szXSAtIGhlaWdodDtcblx0ICAgICAgICAgIHBpbm5lZC5wdXNoKCdib3R0b20nKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgb29iLnB1c2goJ2JvdHRvbScpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKGxlZnQgPCBib3VuZHNbMF0pIHtcblx0ICAgICAgICBpZiAocGluLmluZGV4T2YoJ2xlZnQnKSA+PSAwKSB7XG5cdCAgICAgICAgICBsZWZ0ID0gYm91bmRzWzBdO1xuXHQgICAgICAgICAgcGlubmVkLnB1c2goJ2xlZnQnKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgb29iLnB1c2goJ2xlZnQnKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmIChsZWZ0ICsgd2lkdGggPiBib3VuZHNbMl0pIHtcblx0ICAgICAgICBpZiAocGluLmluZGV4T2YoJ3JpZ2h0JykgPj0gMCkge1xuXHQgICAgICAgICAgbGVmdCA9IGJvdW5kc1syXSAtIHdpZHRoO1xuXHQgICAgICAgICAgcGlubmVkLnB1c2goJ3JpZ2h0Jyk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIG9vYi5wdXNoKCdyaWdodCcpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKHBpbm5lZC5sZW5ndGgpIHtcblx0ICAgICAgICAoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgdmFyIHBpbm5lZENsYXNzID0gdW5kZWZpbmVkO1xuXHQgICAgICAgICAgaWYgKHR5cGVvZiBfdGhpcy5vcHRpb25zLnBpbm5lZENsYXNzICE9PSAndW5kZWZpbmVkJykge1xuXHQgICAgICAgICAgICBwaW5uZWRDbGFzcyA9IF90aGlzLm9wdGlvbnMucGlubmVkQ2xhc3M7XG5cdCAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBwaW5uZWRDbGFzcyA9IF90aGlzLmdldENsYXNzKCdwaW5uZWQnKTtcblx0ICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICBhZGRDbGFzc2VzLnB1c2gocGlubmVkQ2xhc3MpO1xuXHQgICAgICAgICAgcGlubmVkLmZvckVhY2goZnVuY3Rpb24gKHNpZGUpIHtcblx0ICAgICAgICAgICAgYWRkQ2xhc3Nlcy5wdXNoKHBpbm5lZENsYXNzICsgJy0nICsgc2lkZSk7XG5cdCAgICAgICAgICB9KTtcblx0ICAgICAgICB9KSgpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAob29iLmxlbmd0aCkge1xuXHQgICAgICAgIChmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICB2YXIgb29iQ2xhc3MgPSB1bmRlZmluZWQ7XG5cdCAgICAgICAgICBpZiAodHlwZW9mIF90aGlzLm9wdGlvbnMub3V0T2ZCb3VuZHNDbGFzcyAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0ICAgICAgICAgICAgb29iQ2xhc3MgPSBfdGhpcy5vcHRpb25zLm91dE9mQm91bmRzQ2xhc3M7XG5cdCAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBvb2JDbGFzcyA9IF90aGlzLmdldENsYXNzKCdvdXQtb2YtYm91bmRzJyk7XG5cdCAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgYWRkQ2xhc3Nlcy5wdXNoKG9vYkNsYXNzKTtcblx0ICAgICAgICAgIG9vYi5mb3JFYWNoKGZ1bmN0aW9uIChzaWRlKSB7XG5cdCAgICAgICAgICAgIGFkZENsYXNzZXMucHVzaChvb2JDbGFzcyArICctJyArIHNpZGUpO1xuXHQgICAgICAgICAgfSk7XG5cdCAgICAgICAgfSkoKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKHBpbm5lZC5pbmRleE9mKCdsZWZ0JykgPj0gMCB8fCBwaW5uZWQuaW5kZXhPZigncmlnaHQnKSA+PSAwKSB7XG5cdCAgICAgICAgZUF0dGFjaG1lbnQubGVmdCA9IHRBdHRhY2htZW50LmxlZnQgPSBmYWxzZTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAocGlubmVkLmluZGV4T2YoJ3RvcCcpID49IDAgfHwgcGlubmVkLmluZGV4T2YoJ2JvdHRvbScpID49IDApIHtcblx0ICAgICAgICBlQXR0YWNobWVudC50b3AgPSB0QXR0YWNobWVudC50b3AgPSBmYWxzZTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKHRBdHRhY2htZW50LnRvcCAhPT0gdGFyZ2V0QXR0YWNobWVudC50b3AgfHwgdEF0dGFjaG1lbnQubGVmdCAhPT0gdGFyZ2V0QXR0YWNobWVudC5sZWZ0IHx8IGVBdHRhY2htZW50LnRvcCAhPT0gX3RoaXMuYXR0YWNobWVudC50b3AgfHwgZUF0dGFjaG1lbnQubGVmdCAhPT0gX3RoaXMuYXR0YWNobWVudC5sZWZ0KSB7XG5cdCAgICAgICAgX3RoaXMudXBkYXRlQXR0YWNoQ2xhc3NlcyhlQXR0YWNobWVudCwgdEF0dGFjaG1lbnQpO1xuXHQgICAgICAgIF90aGlzLnRyaWdnZXIoJ3VwZGF0ZScsIHtcblx0ICAgICAgICAgIGF0dGFjaG1lbnQ6IGVBdHRhY2htZW50LFxuXHQgICAgICAgICAgdGFyZ2V0QXR0YWNobWVudDogdEF0dGFjaG1lbnRcblx0ICAgICAgICB9KTtcblx0ICAgICAgfVxuXHQgICAgfSk7XG5cdFxuXHQgICAgZGVmZXIoZnVuY3Rpb24gKCkge1xuXHQgICAgICBpZiAoIShfdGhpcy5vcHRpb25zLmFkZFRhcmdldENsYXNzZXMgPT09IGZhbHNlKSkge1xuXHQgICAgICAgIHVwZGF0ZUNsYXNzZXMoX3RoaXMudGFyZ2V0LCBhZGRDbGFzc2VzLCBhbGxDbGFzc2VzKTtcblx0ICAgICAgfVxuXHQgICAgICB1cGRhdGVDbGFzc2VzKF90aGlzLmVsZW1lbnQsIGFkZENsYXNzZXMsIGFsbENsYXNzZXMpO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgcmV0dXJuIHsgdG9wOiB0b3AsIGxlZnQ6IGxlZnQgfTtcblx0ICB9XG5cdH0pO1xuXHQvKiBnbG9iYWxzIFRldGhlckJhc2UgKi9cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBfVGV0aGVyQmFzZSRVdGlscyA9IFRldGhlckJhc2UuVXRpbHM7XG5cdHZhciBnZXRCb3VuZHMgPSBfVGV0aGVyQmFzZSRVdGlscy5nZXRCb3VuZHM7XG5cdHZhciB1cGRhdGVDbGFzc2VzID0gX1RldGhlckJhc2UkVXRpbHMudXBkYXRlQ2xhc3Nlcztcblx0dmFyIGRlZmVyID0gX1RldGhlckJhc2UkVXRpbHMuZGVmZXI7XG5cdFxuXHRUZXRoZXJCYXNlLm1vZHVsZXMucHVzaCh7XG5cdCAgcG9zaXRpb246IGZ1bmN0aW9uIHBvc2l0aW9uKF9yZWYpIHtcblx0ICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cdFxuXHQgICAgdmFyIHRvcCA9IF9yZWYudG9wO1xuXHQgICAgdmFyIGxlZnQgPSBfcmVmLmxlZnQ7XG5cdFxuXHQgICAgdmFyIF9jYWNoZSA9IHRoaXMuY2FjaGUoJ2VsZW1lbnQtYm91bmRzJywgZnVuY3Rpb24gKCkge1xuXHQgICAgICByZXR1cm4gZ2V0Qm91bmRzKF90aGlzLmVsZW1lbnQpO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgdmFyIGhlaWdodCA9IF9jYWNoZS5oZWlnaHQ7XG5cdCAgICB2YXIgd2lkdGggPSBfY2FjaGUud2lkdGg7XG5cdFxuXHQgICAgdmFyIHRhcmdldFBvcyA9IHRoaXMuZ2V0VGFyZ2V0Qm91bmRzKCk7XG5cdFxuXHQgICAgdmFyIGJvdHRvbSA9IHRvcCArIGhlaWdodDtcblx0ICAgIHZhciByaWdodCA9IGxlZnQgKyB3aWR0aDtcblx0XG5cdCAgICB2YXIgYWJ1dHRlZCA9IFtdO1xuXHQgICAgaWYgKHRvcCA8PSB0YXJnZXRQb3MuYm90dG9tICYmIGJvdHRvbSA+PSB0YXJnZXRQb3MudG9wKSB7XG5cdCAgICAgIFsnbGVmdCcsICdyaWdodCddLmZvckVhY2goZnVuY3Rpb24gKHNpZGUpIHtcblx0ICAgICAgICB2YXIgdGFyZ2V0UG9zU2lkZSA9IHRhcmdldFBvc1tzaWRlXTtcblx0ICAgICAgICBpZiAodGFyZ2V0UG9zU2lkZSA9PT0gbGVmdCB8fCB0YXJnZXRQb3NTaWRlID09PSByaWdodCkge1xuXHQgICAgICAgICAgYWJ1dHRlZC5wdXNoKHNpZGUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKGxlZnQgPD0gdGFyZ2V0UG9zLnJpZ2h0ICYmIHJpZ2h0ID49IHRhcmdldFBvcy5sZWZ0KSB7XG5cdCAgICAgIFsndG9wJywgJ2JvdHRvbSddLmZvckVhY2goZnVuY3Rpb24gKHNpZGUpIHtcblx0ICAgICAgICB2YXIgdGFyZ2V0UG9zU2lkZSA9IHRhcmdldFBvc1tzaWRlXTtcblx0ICAgICAgICBpZiAodGFyZ2V0UG9zU2lkZSA9PT0gdG9wIHx8IHRhcmdldFBvc1NpZGUgPT09IGJvdHRvbSkge1xuXHQgICAgICAgICAgYWJ1dHRlZC5wdXNoKHNpZGUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIGFsbENsYXNzZXMgPSBbXTtcblx0ICAgIHZhciBhZGRDbGFzc2VzID0gW107XG5cdFxuXHQgICAgdmFyIHNpZGVzID0gWydsZWZ0JywgJ3RvcCcsICdyaWdodCcsICdib3R0b20nXTtcblx0ICAgIGFsbENsYXNzZXMucHVzaCh0aGlzLmdldENsYXNzKCdhYnV0dGVkJykpO1xuXHQgICAgc2lkZXMuZm9yRWFjaChmdW5jdGlvbiAoc2lkZSkge1xuXHQgICAgICBhbGxDbGFzc2VzLnB1c2goX3RoaXMuZ2V0Q2xhc3MoJ2FidXR0ZWQnKSArICctJyArIHNpZGUpO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgaWYgKGFidXR0ZWQubGVuZ3RoKSB7XG5cdCAgICAgIGFkZENsYXNzZXMucHVzaCh0aGlzLmdldENsYXNzKCdhYnV0dGVkJykpO1xuXHQgICAgfVxuXHRcblx0ICAgIGFidXR0ZWQuZm9yRWFjaChmdW5jdGlvbiAoc2lkZSkge1xuXHQgICAgICBhZGRDbGFzc2VzLnB1c2goX3RoaXMuZ2V0Q2xhc3MoJ2FidXR0ZWQnKSArICctJyArIHNpZGUpO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgZGVmZXIoZnVuY3Rpb24gKCkge1xuXHQgICAgICBpZiAoIShfdGhpcy5vcHRpb25zLmFkZFRhcmdldENsYXNzZXMgPT09IGZhbHNlKSkge1xuXHQgICAgICAgIHVwZGF0ZUNsYXNzZXMoX3RoaXMudGFyZ2V0LCBhZGRDbGFzc2VzLCBhbGxDbGFzc2VzKTtcblx0ICAgICAgfVxuXHQgICAgICB1cGRhdGVDbGFzc2VzKF90aGlzLmVsZW1lbnQsIGFkZENsYXNzZXMsIGFsbENsYXNzZXMpO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgcmV0dXJuIHRydWU7XG5cdCAgfVxuXHR9KTtcblx0LyogZ2xvYmFscyBUZXRoZXJCYXNlICovXG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgX3NsaWNlZFRvQXJyYXkgPSAoZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBzbGljZUl0ZXJhdG9yKGFyciwgaSkgeyB2YXIgX2FyciA9IFtdOyB2YXIgX24gPSB0cnVlOyB2YXIgX2QgPSBmYWxzZTsgdmFyIF9lID0gdW5kZWZpbmVkOyB0cnkgeyBmb3IgKHZhciBfaSA9IGFycltTeW1ib2wuaXRlcmF0b3JdKCksIF9zOyAhKF9uID0gKF9zID0gX2kubmV4dCgpKS5kb25lKTsgX24gPSB0cnVlKSB7IF9hcnIucHVzaChfcy52YWx1ZSk7IGlmIChpICYmIF9hcnIubGVuZ3RoID09PSBpKSBicmVhazsgfSB9IGNhdGNoIChlcnIpIHsgX2QgPSB0cnVlOyBfZSA9IGVycjsgfSBmaW5hbGx5IHsgdHJ5IHsgaWYgKCFfbiAmJiBfaVsncmV0dXJuJ10pIF9pWydyZXR1cm4nXSgpOyB9IGZpbmFsbHkgeyBpZiAoX2QpIHRocm93IF9lOyB9IH0gcmV0dXJuIF9hcnI7IH0gcmV0dXJuIGZ1bmN0aW9uIChhcnIsIGkpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgeyByZXR1cm4gYXJyOyB9IGVsc2UgaWYgKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoYXJyKSkgeyByZXR1cm4gc2xpY2VJdGVyYXRvcihhcnIsIGkpOyB9IGVsc2UgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCdJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlJyk7IH0gfTsgfSkoKTtcblx0XG5cdFRldGhlckJhc2UubW9kdWxlcy5wdXNoKHtcblx0ICBwb3NpdGlvbjogZnVuY3Rpb24gcG9zaXRpb24oX3JlZikge1xuXHQgICAgdmFyIHRvcCA9IF9yZWYudG9wO1xuXHQgICAgdmFyIGxlZnQgPSBfcmVmLmxlZnQ7XG5cdFxuXHQgICAgaWYgKCF0aGlzLm9wdGlvbnMuc2hpZnQpIHtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBzaGlmdCA9IHRoaXMub3B0aW9ucy5zaGlmdDtcblx0ICAgIGlmICh0eXBlb2YgdGhpcy5vcHRpb25zLnNoaWZ0ID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgIHNoaWZ0ID0gdGhpcy5vcHRpb25zLnNoaWZ0LmNhbGwodGhpcywgeyB0b3A6IHRvcCwgbGVmdDogbGVmdCB9KTtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgc2hpZnRUb3AgPSB1bmRlZmluZWQsXG5cdCAgICAgICAgc2hpZnRMZWZ0ID0gdW5kZWZpbmVkO1xuXHQgICAgaWYgKHR5cGVvZiBzaGlmdCA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgc2hpZnQgPSBzaGlmdC5zcGxpdCgnICcpO1xuXHQgICAgICBzaGlmdFsxXSA9IHNoaWZ0WzFdIHx8IHNoaWZ0WzBdO1xuXHRcblx0ICAgICAgdmFyIF9zaGlmdCA9IHNoaWZ0O1xuXHRcblx0ICAgICAgdmFyIF9zaGlmdDIgPSBfc2xpY2VkVG9BcnJheShfc2hpZnQsIDIpO1xuXHRcblx0ICAgICAgc2hpZnRUb3AgPSBfc2hpZnQyWzBdO1xuXHQgICAgICBzaGlmdExlZnQgPSBfc2hpZnQyWzFdO1xuXHRcblx0ICAgICAgc2hpZnRUb3AgPSBwYXJzZUZsb2F0KHNoaWZ0VG9wLCAxMCk7XG5cdCAgICAgIHNoaWZ0TGVmdCA9IHBhcnNlRmxvYXQoc2hpZnRMZWZ0LCAxMCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBzaGlmdFRvcCA9IHNoaWZ0LnRvcDtcblx0ICAgICAgc2hpZnRMZWZ0ID0gc2hpZnQubGVmdDtcblx0ICAgIH1cblx0XG5cdCAgICB0b3AgKz0gc2hpZnRUb3A7XG5cdCAgICBsZWZ0ICs9IHNoaWZ0TGVmdDtcblx0XG5cdCAgICByZXR1cm4geyB0b3A6IHRvcCwgbGVmdDogbGVmdCB9O1xuXHQgIH1cblx0fSk7XG5cdHJldHVybiBUZXRoZXI7XG5cdFxuXHR9KSk7XG5cblxuLyoqKi8gfSxcbi8qIDUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qIVxuXHQgKiBCb290c3RyYXAgdjQuMC4wLWFscGhhLjQgKGh0dHA6Ly9nZXRib290c3RyYXAuY29tKVxuXHQgKiBDb3B5cmlnaHQgMjAxMS0yMDE2IFRoZSBCb290c3RyYXAgQXV0aG9ycyAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2dyYXBocy9jb250cmlidXRvcnMpXG5cdCAqIExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2Jsb2IvbWFzdGVyL0xJQ0VOU0UpXG5cdCAqL1xuXHRcblx0aWYgKHR5cGVvZiBqUXVlcnkgPT09ICd1bmRlZmluZWQnKSB7XG5cdCAgdGhyb3cgbmV3IEVycm9yKCdCb290c3RyYXBcXCdzIEphdmFTY3JpcHQgcmVxdWlyZXMgalF1ZXJ5Jylcblx0fVxuXHRcblx0K2Z1bmN0aW9uICgkKSB7XG5cdCAgdmFyIHZlcnNpb24gPSAkLmZuLmpxdWVyeS5zcGxpdCgnICcpWzBdLnNwbGl0KCcuJylcblx0ICBpZiAoKHZlcnNpb25bMF0gPCAyICYmIHZlcnNpb25bMV0gPCA5KSB8fCAodmVyc2lvblswXSA9PSAxICYmIHZlcnNpb25bMV0gPT0gOSAmJiB2ZXJzaW9uWzJdIDwgMSkgfHwgKHZlcnNpb25bMF0gPj0gNCkpIHtcblx0ICAgIHRocm93IG5ldyBFcnJvcignQm9vdHN0cmFwXFwncyBKYXZhU2NyaXB0IHJlcXVpcmVzIGF0IGxlYXN0IGpRdWVyeSB2MS45LjEgYnV0IGxlc3MgdGhhbiB2NC4wLjAnKVxuXHQgIH1cblx0fShqUXVlcnkpO1xuXHRcblx0XG5cdCtmdW5jdGlvbiAoJCkge1xuXHRcblx0LyoqXG5cdCAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCAqIEJvb3RzdHJhcCAodjQuMC4wLWFscGhhLjQpOiB1dGlsLmpzXG5cdCAqIExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2Jsb2IvbWFzdGVyL0xJQ0VOU0UpXG5cdCAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIF9nZXQgPSBmdW5jdGlvbiBnZXQoX3gsIF94MiwgX3gzKSB7IHZhciBfYWdhaW4gPSB0cnVlOyBfZnVuY3Rpb246IHdoaWxlIChfYWdhaW4pIHsgdmFyIG9iamVjdCA9IF94LCBwcm9wZXJ0eSA9IF94MiwgcmVjZWl2ZXIgPSBfeDM7IF9hZ2FpbiA9IGZhbHNlOyBpZiAob2JqZWN0ID09PSBudWxsKSBvYmplY3QgPSBGdW5jdGlvbi5wcm90b3R5cGU7IHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHByb3BlcnR5KTsgaWYgKGRlc2MgPT09IHVuZGVmaW5lZCkgeyB2YXIgcGFyZW50ID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKG9iamVjdCk7IGlmIChwYXJlbnQgPT09IG51bGwpIHsgcmV0dXJuIHVuZGVmaW5lZDsgfSBlbHNlIHsgX3ggPSBwYXJlbnQ7IF94MiA9IHByb3BlcnR5OyBfeDMgPSByZWNlaXZlcjsgX2FnYWluID0gdHJ1ZTsgZGVzYyA9IHBhcmVudCA9IHVuZGVmaW5lZDsgY29udGludWUgX2Z1bmN0aW9uOyB9IH0gZWxzZSBpZiAoJ3ZhbHVlJyBpbiBkZXNjKSB7IHJldHVybiBkZXNjLnZhbHVlOyB9IGVsc2UgeyB2YXIgZ2V0dGVyID0gZGVzYy5nZXQ7IGlmIChnZXR0ZXIgPT09IHVuZGVmaW5lZCkgeyByZXR1cm4gdW5kZWZpbmVkOyB9IHJldHVybiBnZXR0ZXIuY2FsbChyZWNlaXZlcik7IH0gfSB9O1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IChmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoJ3ZhbHVlJyBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSkoKTtcblx0XG5cdGZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09ICdmdW5jdGlvbicgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCdTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90ICcgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbicpOyB9IH1cblx0XG5cdHZhciBVdGlsID0gKGZ1bmN0aW9uICgkKSB7XG5cdFxuXHQgIC8qKlxuXHQgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQgICAqIFByaXZhdGUgVHJhbnNpdGlvbkVuZCBIZWxwZXJzXG5cdCAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCAgICovXG5cdFxuXHQgIHZhciB0cmFuc2l0aW9uID0gZmFsc2U7XG5cdFxuXHQgIHZhciBNQVhfVUlEID0gMTAwMDAwMDtcblx0XG5cdCAgdmFyIFRyYW5zaXRpb25FbmRFdmVudCA9IHtcblx0ICAgIFdlYmtpdFRyYW5zaXRpb246ICd3ZWJraXRUcmFuc2l0aW9uRW5kJyxcblx0ICAgIE1velRyYW5zaXRpb246ICd0cmFuc2l0aW9uZW5kJyxcblx0ICAgIE9UcmFuc2l0aW9uOiAnb1RyYW5zaXRpb25FbmQgb3RyYW5zaXRpb25lbmQnLFxuXHQgICAgdHJhbnNpdGlvbjogJ3RyYW5zaXRpb25lbmQnXG5cdCAgfTtcblx0XG5cdCAgLy8gc2hvdXRvdXQgQW5ndXNDcm9sbCAoaHR0cHM6Ly9nb28uZ2wvcHh3UUdwKVxuXHQgIGZ1bmN0aW9uIHRvVHlwZShvYmopIHtcblx0ICAgIHJldHVybiAoe30pLnRvU3RyaW5nLmNhbGwob2JqKS5tYXRjaCgvXFxzKFthLXpBLVpdKykvKVsxXS50b0xvd2VyQ2FzZSgpO1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gaXNFbGVtZW50KG9iaikge1xuXHQgICAgcmV0dXJuIChvYmpbMF0gfHwgb2JqKS5ub2RlVHlwZTtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGdldFNwZWNpYWxUcmFuc2l0aW9uRW5kRXZlbnQoKSB7XG5cdCAgICByZXR1cm4ge1xuXHQgICAgICBiaW5kVHlwZTogdHJhbnNpdGlvbi5lbmQsXG5cdCAgICAgIGRlbGVnYXRlVHlwZTogdHJhbnNpdGlvbi5lbmQsXG5cdCAgICAgIGhhbmRsZTogZnVuY3Rpb24gaGFuZGxlKGV2ZW50KSB7XG5cdCAgICAgICAgaWYgKCQoZXZlbnQudGFyZ2V0KS5pcyh0aGlzKSkge1xuXHQgICAgICAgICAgcmV0dXJuIGV2ZW50LmhhbmRsZU9iai5oYW5kbGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgcHJlZmVyLXJlc3QtcGFyYW1zXG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiB0cmFuc2l0aW9uRW5kVGVzdCgpIHtcblx0ICAgIGlmICh3aW5kb3cuUVVuaXQpIHtcblx0ICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2Jvb3RzdHJhcCcpO1xuXHRcblx0ICAgIGZvciAodmFyIF9uYW1lIGluIFRyYW5zaXRpb25FbmRFdmVudCkge1xuXHQgICAgICBpZiAoZWwuc3R5bGVbX25hbWVdICE9PSB1bmRlZmluZWQpIHtcblx0ICAgICAgICByZXR1cm4geyBlbmQ6IFRyYW5zaXRpb25FbmRFdmVudFtfbmFtZV0gfTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiBmYWxzZTtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIHRyYW5zaXRpb25FbmRFbXVsYXRvcihkdXJhdGlvbikge1xuXHQgICAgdmFyIF90aGlzID0gdGhpcztcblx0XG5cdCAgICB2YXIgY2FsbGVkID0gZmFsc2U7XG5cdFxuXHQgICAgJCh0aGlzKS5vbmUoVXRpbC5UUkFOU0lUSU9OX0VORCwgZnVuY3Rpb24gKCkge1xuXHQgICAgICBjYWxsZWQgPSB0cnVlO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdCAgICAgIGlmICghY2FsbGVkKSB7XG5cdCAgICAgICAgVXRpbC50cmlnZ2VyVHJhbnNpdGlvbkVuZChfdGhpcyk7XG5cdCAgICAgIH1cblx0ICAgIH0sIGR1cmF0aW9uKTtcblx0XG5cdCAgICByZXR1cm4gdGhpcztcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIHNldFRyYW5zaXRpb25FbmRTdXBwb3J0KCkge1xuXHQgICAgdHJhbnNpdGlvbiA9IHRyYW5zaXRpb25FbmRUZXN0KCk7XG5cdFxuXHQgICAgJC5mbi5lbXVsYXRlVHJhbnNpdGlvbkVuZCA9IHRyYW5zaXRpb25FbmRFbXVsYXRvcjtcblx0XG5cdCAgICBpZiAoVXRpbC5zdXBwb3J0c1RyYW5zaXRpb25FbmQoKSkge1xuXHQgICAgICAkLmV2ZW50LnNwZWNpYWxbVXRpbC5UUkFOU0lUSU9OX0VORF0gPSBnZXRTcGVjaWFsVHJhbnNpdGlvbkVuZEV2ZW50KCk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQgICAqIFB1YmxpYyBVdGlsIEFwaVxuXHQgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCAgICovXG5cdFxuXHQgIHZhciBVdGlsID0ge1xuXHRcblx0ICAgIFRSQU5TSVRJT05fRU5EOiAnYnNUcmFuc2l0aW9uRW5kJyxcblx0XG5cdCAgICBnZXRVSUQ6IGZ1bmN0aW9uIGdldFVJRChwcmVmaXgpIHtcblx0ICAgICAgZG8ge1xuXHQgICAgICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLWJpdHdpc2UgKi9cblx0ICAgICAgICBwcmVmaXggKz0gfiB+KE1hdGgucmFuZG9tKCkgKiBNQVhfVUlEKTsgLy8gXCJ+flwiIGFjdHMgbGlrZSBhIGZhc3RlciBNYXRoLmZsb29yKCkgaGVyZVxuXHQgICAgICAgIC8qIGVzbGludC1lbmFibGUgbm8tYml0d2lzZSAqL1xuXHQgICAgICB9IHdoaWxlIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChwcmVmaXgpKTtcblx0ICAgICAgcmV0dXJuIHByZWZpeDtcblx0ICAgIH0sXG5cdFxuXHQgICAgZ2V0U2VsZWN0b3JGcm9tRWxlbWVudDogZnVuY3Rpb24gZ2V0U2VsZWN0b3JGcm9tRWxlbWVudChlbGVtZW50KSB7XG5cdCAgICAgIHZhciBzZWxlY3RvciA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLXRhcmdldCcpO1xuXHRcblx0ICAgICAgaWYgKCFzZWxlY3Rvcikge1xuXHQgICAgICAgIHNlbGVjdG9yID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2hyZWYnKSB8fCAnJztcblx0ICAgICAgICBzZWxlY3RvciA9IC9eI1thLXpdL2kudGVzdChzZWxlY3RvcikgPyBzZWxlY3RvciA6IG51bGw7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHJldHVybiBzZWxlY3Rvcjtcblx0ICAgIH0sXG5cdFxuXHQgICAgcmVmbG93OiBmdW5jdGlvbiByZWZsb3coZWxlbWVudCkge1xuXHQgICAgICBuZXcgRnVuY3Rpb24oJ2JzJywgJ3JldHVybiBicycpKGVsZW1lbnQub2Zmc2V0SGVpZ2h0KTtcblx0ICAgIH0sXG5cdFxuXHQgICAgdHJpZ2dlclRyYW5zaXRpb25FbmQ6IGZ1bmN0aW9uIHRyaWdnZXJUcmFuc2l0aW9uRW5kKGVsZW1lbnQpIHtcblx0ICAgICAgJChlbGVtZW50KS50cmlnZ2VyKHRyYW5zaXRpb24uZW5kKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgc3VwcG9ydHNUcmFuc2l0aW9uRW5kOiBmdW5jdGlvbiBzdXBwb3J0c1RyYW5zaXRpb25FbmQoKSB7XG5cdCAgICAgIHJldHVybiBCb29sZWFuKHRyYW5zaXRpb24pO1xuXHQgICAgfSxcblx0XG5cdCAgICB0eXBlQ2hlY2tDb25maWc6IGZ1bmN0aW9uIHR5cGVDaGVja0NvbmZpZyhjb21wb25lbnROYW1lLCBjb25maWcsIGNvbmZpZ1R5cGVzKSB7XG5cdCAgICAgIGZvciAodmFyIHByb3BlcnR5IGluIGNvbmZpZ1R5cGVzKSB7XG5cdCAgICAgICAgaWYgKGNvbmZpZ1R5cGVzLmhhc093blByb3BlcnR5KHByb3BlcnR5KSkge1xuXHQgICAgICAgICAgdmFyIGV4cGVjdGVkVHlwZXMgPSBjb25maWdUeXBlc1twcm9wZXJ0eV07XG5cdCAgICAgICAgICB2YXIgdmFsdWUgPSBjb25maWdbcHJvcGVydHldO1xuXHQgICAgICAgICAgdmFyIHZhbHVlVHlwZSA9IHVuZGVmaW5lZDtcblx0XG5cdCAgICAgICAgICBpZiAodmFsdWUgJiYgaXNFbGVtZW50KHZhbHVlKSkge1xuXHQgICAgICAgICAgICB2YWx1ZVR5cGUgPSAnZWxlbWVudCc7XG5cdCAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICB2YWx1ZVR5cGUgPSB0b1R5cGUodmFsdWUpO1xuXHQgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgIGlmICghbmV3IFJlZ0V4cChleHBlY3RlZFR5cGVzKS50ZXN0KHZhbHVlVHlwZSkpIHtcblx0ICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGNvbXBvbmVudE5hbWUudG9VcHBlckNhc2UoKSArICc6ICcgKyAoJ09wdGlvbiBcIicgKyBwcm9wZXJ0eSArICdcIiBwcm92aWRlZCB0eXBlIFwiJyArIHZhbHVlVHlwZSArICdcIiAnKSArICgnYnV0IGV4cGVjdGVkIHR5cGUgXCInICsgZXhwZWN0ZWRUeXBlcyArICdcIi4nKSk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgc2V0VHJhbnNpdGlvbkVuZFN1cHBvcnQoKTtcblx0XG5cdCAgcmV0dXJuIFV0aWw7XG5cdH0pKGpRdWVyeSk7XG5cdFxuXHQvKipcblx0ICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0ICogQm9vdHN0cmFwICh2NC4wLjAtYWxwaGEuNCk6IGFsZXJ0LmpzXG5cdCAqIExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2Jsb2IvbWFzdGVyL0xJQ0VOU0UpXG5cdCAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCAqL1xuXHRcblx0dmFyIEFsZXJ0ID0gKGZ1bmN0aW9uICgkKSB7XG5cdFxuXHQgIC8qKlxuXHQgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQgICAqIENvbnN0YW50c1xuXHQgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQgICAqL1xuXHRcblx0ICB2YXIgTkFNRSA9ICdhbGVydCc7XG5cdCAgdmFyIFZFUlNJT04gPSAnNC4wLjAtYWxwaGEuNCc7XG5cdCAgdmFyIERBVEFfS0VZID0gJ2JzLmFsZXJ0Jztcblx0ICB2YXIgRVZFTlRfS0VZID0gJy4nICsgREFUQV9LRVk7XG5cdCAgdmFyIERBVEFfQVBJX0tFWSA9ICcuZGF0YS1hcGknO1xuXHQgIHZhciBKUVVFUllfTk9fQ09ORkxJQ1QgPSAkLmZuW05BTUVdO1xuXHQgIHZhciBUUkFOU0lUSU9OX0RVUkFUSU9OID0gMTUwO1xuXHRcblx0ICB2YXIgU2VsZWN0b3IgPSB7XG5cdCAgICBESVNNSVNTOiAnW2RhdGEtZGlzbWlzcz1cImFsZXJ0XCJdJ1xuXHQgIH07XG5cdFxuXHQgIHZhciBFdmVudCA9IHtcblx0ICAgIENMT1NFOiAnY2xvc2UnICsgRVZFTlRfS0VZLFxuXHQgICAgQ0xPU0VEOiAnY2xvc2VkJyArIEVWRU5UX0tFWSxcblx0ICAgIENMSUNLX0RBVEFfQVBJOiAnY2xpY2snICsgRVZFTlRfS0VZICsgREFUQV9BUElfS0VZXG5cdCAgfTtcblx0XG5cdCAgdmFyIENsYXNzTmFtZSA9IHtcblx0ICAgIEFMRVJUOiAnYWxlcnQnLFxuXHQgICAgRkFERTogJ2ZhZGUnLFxuXHQgICAgSU46ICdpbidcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0ICAgKiBDbGFzcyBEZWZpbml0aW9uXG5cdCAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCAgICovXG5cdFxuXHQgIHZhciBBbGVydCA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBBbGVydChlbGVtZW50KSB7XG5cdCAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBBbGVydCk7XG5cdFxuXHQgICAgICB0aGlzLl9lbGVtZW50ID0gZWxlbWVudDtcblx0ICAgIH1cblx0XG5cdCAgICAvKipcblx0ICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQgICAgICogRGF0YSBBcGkgaW1wbGVtZW50YXRpb25cblx0ICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQgICAgICovXG5cdFxuXHQgICAgLy8gZ2V0dGVyc1xuXHRcblx0ICAgIF9jcmVhdGVDbGFzcyhBbGVydCwgW3tcblx0ICAgICAga2V5OiAnY2xvc2UnLFxuXHRcblx0ICAgICAgLy8gcHVibGljXG5cdFxuXHQgICAgICB2YWx1ZTogZnVuY3Rpb24gY2xvc2UoZWxlbWVudCkge1xuXHQgICAgICAgIGVsZW1lbnQgPSBlbGVtZW50IHx8IHRoaXMuX2VsZW1lbnQ7XG5cdFxuXHQgICAgICAgIHZhciByb290RWxlbWVudCA9IHRoaXMuX2dldFJvb3RFbGVtZW50KGVsZW1lbnQpO1xuXHQgICAgICAgIHZhciBjdXN0b21FdmVudCA9IHRoaXMuX3RyaWdnZXJDbG9zZUV2ZW50KHJvb3RFbGVtZW50KTtcblx0XG5cdCAgICAgICAgaWYgKGN1c3RvbUV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpKSB7XG5cdCAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICB0aGlzLl9yZW1vdmVFbGVtZW50KHJvb3RFbGVtZW50KTtcblx0ICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICBrZXk6ICdkaXNwb3NlJyxcblx0ICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRpc3Bvc2UoKSB7XG5cdCAgICAgICAgJC5yZW1vdmVEYXRhKHRoaXMuX2VsZW1lbnQsIERBVEFfS0VZKTtcblx0ICAgICAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgLy8gcHJpdmF0ZVxuXHRcblx0ICAgIH0sIHtcblx0ICAgICAga2V5OiAnX2dldFJvb3RFbGVtZW50Jyxcblx0ICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9nZXRSb290RWxlbWVudChlbGVtZW50KSB7XG5cdCAgICAgICAgdmFyIHNlbGVjdG9yID0gVXRpbC5nZXRTZWxlY3RvckZyb21FbGVtZW50KGVsZW1lbnQpO1xuXHQgICAgICAgIHZhciBwYXJlbnQgPSBmYWxzZTtcblx0XG5cdCAgICAgICAgaWYgKHNlbGVjdG9yKSB7XG5cdCAgICAgICAgICBwYXJlbnQgPSAkKHNlbGVjdG9yKVswXTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGlmICghcGFyZW50KSB7XG5cdCAgICAgICAgICBwYXJlbnQgPSAkKGVsZW1lbnQpLmNsb3Nlc3QoJy4nICsgQ2xhc3NOYW1lLkFMRVJUKVswXTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHJldHVybiBwYXJlbnQ7XG5cdCAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAga2V5OiAnX3RyaWdnZXJDbG9zZUV2ZW50Jyxcblx0ICAgICAgdmFsdWU6IGZ1bmN0aW9uIF90cmlnZ2VyQ2xvc2VFdmVudChlbGVtZW50KSB7XG5cdCAgICAgICAgdmFyIGNsb3NlRXZlbnQgPSAkLkV2ZW50KEV2ZW50LkNMT1NFKTtcblx0XG5cdCAgICAgICAgJChlbGVtZW50KS50cmlnZ2VyKGNsb3NlRXZlbnQpO1xuXHQgICAgICAgIHJldHVybiBjbG9zZUV2ZW50O1xuXHQgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgIGtleTogJ19yZW1vdmVFbGVtZW50Jyxcblx0ICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9yZW1vdmVFbGVtZW50KGVsZW1lbnQpIHtcblx0ICAgICAgICAkKGVsZW1lbnQpLnJlbW92ZUNsYXNzKENsYXNzTmFtZS5JTik7XG5cdFxuXHQgICAgICAgIGlmICghVXRpbC5zdXBwb3J0c1RyYW5zaXRpb25FbmQoKSB8fCAhJChlbGVtZW50KS5oYXNDbGFzcyhDbGFzc05hbWUuRkFERSkpIHtcblx0ICAgICAgICAgIHRoaXMuX2Rlc3Ryb3lFbGVtZW50KGVsZW1lbnQpO1xuXHQgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgJChlbGVtZW50KS5vbmUoVXRpbC5UUkFOU0lUSU9OX0VORCwgJC5wcm94eSh0aGlzLl9kZXN0cm95RWxlbWVudCwgdGhpcywgZWxlbWVudCkpLmVtdWxhdGVUcmFuc2l0aW9uRW5kKFRSQU5TSVRJT05fRFVSQVRJT04pO1xuXHQgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgIGtleTogJ19kZXN0cm95RWxlbWVudCcsXG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiBfZGVzdHJveUVsZW1lbnQoZWxlbWVudCkge1xuXHQgICAgICAgICQoZWxlbWVudCkuZGV0YWNoKCkudHJpZ2dlcihFdmVudC5DTE9TRUQpLnJlbW92ZSgpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICAvLyBzdGF0aWNcblx0XG5cdCAgICB9XSwgW3tcblx0ICAgICAga2V5OiAnX2pRdWVyeUludGVyZmFjZScsXG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiBfalF1ZXJ5SW50ZXJmYWNlKGNvbmZpZykge1xuXHQgICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgdmFyICRlbGVtZW50ID0gJCh0aGlzKTtcblx0ICAgICAgICAgIHZhciBkYXRhID0gJGVsZW1lbnQuZGF0YShEQVRBX0tFWSk7XG5cdFxuXHQgICAgICAgICAgaWYgKCFkYXRhKSB7XG5cdCAgICAgICAgICAgIGRhdGEgPSBuZXcgQWxlcnQodGhpcyk7XG5cdCAgICAgICAgICAgICRlbGVtZW50LmRhdGEoREFUQV9LRVksIGRhdGEpO1xuXHQgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgIGlmIChjb25maWcgPT09ICdjbG9zZScpIHtcblx0ICAgICAgICAgICAgZGF0YVtjb25maWddKHRoaXMpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0pO1xuXHQgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgIGtleTogJ19oYW5kbGVEaXNtaXNzJyxcblx0ICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVEaXNtaXNzKGFsZXJ0SW5zdGFuY2UpIHtcblx0ICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGV2ZW50KSB7XG5cdCAgICAgICAgICBpZiAoZXZlbnQpIHtcblx0ICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0ICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICBhbGVydEluc3RhbmNlLmNsb3NlKHRoaXMpO1xuXHQgICAgICAgIH07XG5cdCAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAga2V5OiAnVkVSU0lPTicsXG5cdCAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgICAgIHJldHVybiBWRVJTSU9OO1xuXHQgICAgICB9XG5cdCAgICB9XSk7XG5cdFxuXHQgICAgcmV0dXJuIEFsZXJ0O1xuXHQgIH0pKCk7XG5cdFxuXHQgICQoZG9jdW1lbnQpLm9uKEV2ZW50LkNMSUNLX0RBVEFfQVBJLCBTZWxlY3Rvci5ESVNNSVNTLCBBbGVydC5faGFuZGxlRGlzbWlzcyhuZXcgQWxlcnQoKSkpO1xuXHRcblx0ICAvKipcblx0ICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0ICAgKiBqUXVlcnlcblx0ICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0ICAgKi9cblx0XG5cdCAgJC5mbltOQU1FXSA9IEFsZXJ0Ll9qUXVlcnlJbnRlcmZhY2U7XG5cdCAgJC5mbltOQU1FXS5Db25zdHJ1Y3RvciA9IEFsZXJ0O1xuXHQgICQuZm5bTkFNRV0ubm9Db25mbGljdCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICQuZm5bTkFNRV0gPSBKUVVFUllfTk9fQ09ORkxJQ1Q7XG5cdCAgICByZXR1cm4gQWxlcnQuX2pRdWVyeUludGVyZmFjZTtcblx0ICB9O1xuXHRcblx0ICByZXR1cm4gQWxlcnQ7XG5cdH0pKGpRdWVyeSk7XG5cdFxuXHQvKipcblx0ICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0ICogQm9vdHN0cmFwICh2NC4wLjAtYWxwaGEuNCk6IGJ1dHRvbi5qc1xuXHQgKiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ibG9iL21hc3Rlci9MSUNFTlNFKVxuXHQgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQgKi9cblx0XG5cdHZhciBCdXR0b24gPSAoZnVuY3Rpb24gKCQpIHtcblx0XG5cdCAgLyoqXG5cdCAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCAgICogQ29uc3RhbnRzXG5cdCAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCAgICovXG5cdFxuXHQgIHZhciBOQU1FID0gJ2J1dHRvbic7XG5cdCAgdmFyIFZFUlNJT04gPSAnNC4wLjAtYWxwaGEuNCc7XG5cdCAgdmFyIERBVEFfS0VZID0gJ2JzLmJ1dHRvbic7XG5cdCAgdmFyIEVWRU5UX0tFWSA9ICcuJyArIERBVEFfS0VZO1xuXHQgIHZhciBEQVRBX0FQSV9LRVkgPSAnLmRhdGEtYXBpJztcblx0ICB2YXIgSlFVRVJZX05PX0NPTkZMSUNUID0gJC5mbltOQU1FXTtcblx0XG5cdCAgdmFyIENsYXNzTmFtZSA9IHtcblx0ICAgIEFDVElWRTogJ2FjdGl2ZScsXG5cdCAgICBCVVRUT046ICdidG4nLFxuXHQgICAgRk9DVVM6ICdmb2N1cydcblx0ICB9O1xuXHRcblx0ICB2YXIgU2VsZWN0b3IgPSB7XG5cdCAgICBEQVRBX1RPR0dMRV9DQVJST1Q6ICdbZGF0YS10b2dnbGVePVwiYnV0dG9uXCJdJyxcblx0ICAgIERBVEFfVE9HR0xFOiAnW2RhdGEtdG9nZ2xlPVwiYnV0dG9uc1wiXScsXG5cdCAgICBJTlBVVDogJ2lucHV0Jyxcblx0ICAgIEFDVElWRTogJy5hY3RpdmUnLFxuXHQgICAgQlVUVE9OOiAnLmJ0bidcblx0ICB9O1xuXHRcblx0ICB2YXIgRXZlbnQgPSB7XG5cdCAgICBDTElDS19EQVRBX0FQSTogJ2NsaWNrJyArIEVWRU5UX0tFWSArIERBVEFfQVBJX0tFWSxcblx0ICAgIEZPQ1VTX0JMVVJfREFUQV9BUEk6ICdmb2N1cycgKyBFVkVOVF9LRVkgKyBEQVRBX0FQSV9LRVkgKyAnICcgKyAoJ2JsdXInICsgRVZFTlRfS0VZICsgREFUQV9BUElfS0VZKVxuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQgICAqIENsYXNzIERlZmluaXRpb25cblx0ICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0ICAgKi9cblx0XG5cdCAgdmFyIEJ1dHRvbiA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBCdXR0b24oZWxlbWVudCkge1xuXHQgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQnV0dG9uKTtcblx0XG5cdCAgICAgIHRoaXMuX2VsZW1lbnQgPSBlbGVtZW50O1xuXHQgICAgfVxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCAgICAgKiBEYXRhIEFwaSBpbXBsZW1lbnRhdGlvblxuXHQgICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCAgICAgKi9cblx0XG5cdCAgICAvLyBnZXR0ZXJzXG5cdFxuXHQgICAgX2NyZWF0ZUNsYXNzKEJ1dHRvbiwgW3tcblx0ICAgICAga2V5OiAndG9nZ2xlJyxcblx0XG5cdCAgICAgIC8vIHB1YmxpY1xuXHRcblx0ICAgICAgdmFsdWU6IGZ1bmN0aW9uIHRvZ2dsZSgpIHtcblx0ICAgICAgICB2YXIgdHJpZ2dlckNoYW5nZUV2ZW50ID0gdHJ1ZTtcblx0ICAgICAgICB2YXIgcm9vdEVsZW1lbnQgPSAkKHRoaXMuX2VsZW1lbnQpLmNsb3Nlc3QoU2VsZWN0b3IuREFUQV9UT0dHTEUpWzBdO1xuXHRcblx0ICAgICAgICBpZiAocm9vdEVsZW1lbnQpIHtcblx0ICAgICAgICAgIHZhciBpbnB1dCA9ICQodGhpcy5fZWxlbWVudCkuZmluZChTZWxlY3Rvci5JTlBVVClbMF07XG5cdFxuXHQgICAgICAgICAgaWYgKGlucHV0KSB7XG5cdCAgICAgICAgICAgIGlmIChpbnB1dC50eXBlID09PSAncmFkaW8nKSB7XG5cdCAgICAgICAgICAgICAgaWYgKGlucHV0LmNoZWNrZWQgJiYgJCh0aGlzLl9lbGVtZW50KS5oYXNDbGFzcyhDbGFzc05hbWUuQUNUSVZFKSkge1xuXHQgICAgICAgICAgICAgICAgdHJpZ2dlckNoYW5nZUV2ZW50ID0gZmFsc2U7XG5cdCAgICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAgIHZhciBhY3RpdmVFbGVtZW50ID0gJChyb290RWxlbWVudCkuZmluZChTZWxlY3Rvci5BQ1RJVkUpWzBdO1xuXHRcblx0ICAgICAgICAgICAgICAgIGlmIChhY3RpdmVFbGVtZW50KSB7XG5cdCAgICAgICAgICAgICAgICAgICQoYWN0aXZlRWxlbWVudCkucmVtb3ZlQ2xhc3MoQ2xhc3NOYW1lLkFDVElWRSk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICBpZiAodHJpZ2dlckNoYW5nZUV2ZW50KSB7XG5cdCAgICAgICAgICAgICAgaW5wdXQuY2hlY2tlZCA9ICEkKHRoaXMuX2VsZW1lbnQpLmhhc0NsYXNzKENsYXNzTmFtZS5BQ1RJVkUpO1xuXHQgICAgICAgICAgICAgICQodGhpcy5fZWxlbWVudCkudHJpZ2dlcignY2hhbmdlJyk7XG5cdCAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAgIGlucHV0LmZvY3VzKCk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHRoaXMuX2VsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLXByZXNzZWQnLCAhJCh0aGlzLl9lbGVtZW50KS5oYXNDbGFzcyhDbGFzc05hbWUuQUNUSVZFKSk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBpZiAodHJpZ2dlckNoYW5nZUV2ZW50KSB7XG5cdCAgICAgICAgICAkKHRoaXMuX2VsZW1lbnQpLnRvZ2dsZUNsYXNzKENsYXNzTmFtZS5BQ1RJVkUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICBrZXk6ICdkaXNwb3NlJyxcblx0ICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRpc3Bvc2UoKSB7XG5cdCAgICAgICAgJC5yZW1vdmVEYXRhKHRoaXMuX2VsZW1lbnQsIERBVEFfS0VZKTtcblx0ICAgICAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgLy8gc3RhdGljXG5cdFxuXHQgICAgfV0sIFt7XG5cdCAgICAgIGtleTogJ19qUXVlcnlJbnRlcmZhY2UnLFxuXHQgICAgICB2YWx1ZTogZnVuY3Rpb24gX2pRdWVyeUludGVyZmFjZShjb25maWcpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgIHZhciBkYXRhID0gJCh0aGlzKS5kYXRhKERBVEFfS0VZKTtcblx0XG5cdCAgICAgICAgICBpZiAoIWRhdGEpIHtcblx0ICAgICAgICAgICAgZGF0YSA9IG5ldyBCdXR0b24odGhpcyk7XG5cdCAgICAgICAgICAgICQodGhpcykuZGF0YShEQVRBX0tFWSwgZGF0YSk7XG5cdCAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgaWYgKGNvbmZpZyA9PT0gJ3RvZ2dsZScpIHtcblx0ICAgICAgICAgICAgZGF0YVtjb25maWddKCk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAga2V5OiAnVkVSU0lPTicsXG5cdCAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgICAgIHJldHVybiBWRVJTSU9OO1xuXHQgICAgICB9XG5cdCAgICB9XSk7XG5cdFxuXHQgICAgcmV0dXJuIEJ1dHRvbjtcblx0ICB9KSgpO1xuXHRcblx0ICAkKGRvY3VtZW50KS5vbihFdmVudC5DTElDS19EQVRBX0FQSSwgU2VsZWN0b3IuREFUQV9UT0dHTEVfQ0FSUk9ULCBmdW5jdGlvbiAoZXZlbnQpIHtcblx0ICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFxuXHQgICAgdmFyIGJ1dHRvbiA9IGV2ZW50LnRhcmdldDtcblx0XG5cdCAgICBpZiAoISQoYnV0dG9uKS5oYXNDbGFzcyhDbGFzc05hbWUuQlVUVE9OKSkge1xuXHQgICAgICBidXR0b24gPSAkKGJ1dHRvbikuY2xvc2VzdChTZWxlY3Rvci5CVVRUT04pO1xuXHQgICAgfVxuXHRcblx0ICAgIEJ1dHRvbi5falF1ZXJ5SW50ZXJmYWNlLmNhbGwoJChidXR0b24pLCAndG9nZ2xlJyk7XG5cdCAgfSkub24oRXZlbnQuRk9DVVNfQkxVUl9EQVRBX0FQSSwgU2VsZWN0b3IuREFUQV9UT0dHTEVfQ0FSUk9ULCBmdW5jdGlvbiAoZXZlbnQpIHtcblx0ICAgIHZhciBidXR0b24gPSAkKGV2ZW50LnRhcmdldCkuY2xvc2VzdChTZWxlY3Rvci5CVVRUT04pWzBdO1xuXHQgICAgJChidXR0b24pLnRvZ2dsZUNsYXNzKENsYXNzTmFtZS5GT0NVUywgL15mb2N1cyhpbik/JC8udGVzdChldmVudC50eXBlKSk7XG5cdCAgfSk7XG5cdFxuXHQgIC8qKlxuXHQgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQgICAqIGpRdWVyeVxuXHQgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQgICAqL1xuXHRcblx0ICAkLmZuW05BTUVdID0gQnV0dG9uLl9qUXVlcnlJbnRlcmZhY2U7XG5cdCAgJC5mbltOQU1FXS5Db25zdHJ1Y3RvciA9IEJ1dHRvbjtcblx0ICAkLmZuW05BTUVdLm5vQ29uZmxpY3QgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAkLmZuW05BTUVdID0gSlFVRVJZX05PX0NPTkZMSUNUO1xuXHQgICAgcmV0dXJuIEJ1dHRvbi5falF1ZXJ5SW50ZXJmYWNlO1xuXHQgIH07XG5cdFxuXHQgIHJldHVybiBCdXR0b247XG5cdH0pKGpRdWVyeSk7XG5cdFxuXHQvKipcblx0ICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0ICogQm9vdHN0cmFwICh2NC4wLjAtYWxwaGEuNCk6IGNhcm91c2VsLmpzXG5cdCAqIExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2Jsb2IvbWFzdGVyL0xJQ0VOU0UpXG5cdCAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCAqL1xuXHRcblx0dmFyIENhcm91c2VsID0gKGZ1bmN0aW9uICgkKSB7XG5cdFxuXHQgIC8qKlxuXHQgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQgICAqIENvbnN0YW50c1xuXHQgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQgICAqL1xuXHRcblx0ICB2YXIgTkFNRSA9ICdjYXJvdXNlbCc7XG5cdCAgdmFyIFZFUlNJT04gPSAnNC4wLjAtYWxwaGEuNCc7XG5cdCAgdmFyIERBVEFfS0VZID0gJ2JzLmNhcm91c2VsJztcblx0ICB2YXIgRVZFTlRfS0VZID0gJy4nICsgREFUQV9LRVk7XG5cdCAgdmFyIERBVEFfQVBJX0tFWSA9ICcuZGF0YS1hcGknO1xuXHQgIHZhciBKUVVFUllfTk9fQ09ORkxJQ1QgPSAkLmZuW05BTUVdO1xuXHQgIHZhciBUUkFOU0lUSU9OX0RVUkFUSU9OID0gNjAwO1xuXHQgIHZhciBBUlJPV19MRUZUX0tFWUNPREUgPSAzNzsgLy8gS2V5Ym9hcmRFdmVudC53aGljaCB2YWx1ZSBmb3IgbGVmdCBhcnJvdyBrZXlcblx0ICB2YXIgQVJST1dfUklHSFRfS0VZQ09ERSA9IDM5OyAvLyBLZXlib2FyZEV2ZW50LndoaWNoIHZhbHVlIGZvciByaWdodCBhcnJvdyBrZXlcblx0XG5cdCAgdmFyIERlZmF1bHQgPSB7XG5cdCAgICBpbnRlcnZhbDogNTAwMCxcblx0ICAgIGtleWJvYXJkOiB0cnVlLFxuXHQgICAgc2xpZGU6IGZhbHNlLFxuXHQgICAgcGF1c2U6ICdob3ZlcicsXG5cdCAgICB3cmFwOiB0cnVlXG5cdCAgfTtcblx0XG5cdCAgdmFyIERlZmF1bHRUeXBlID0ge1xuXHQgICAgaW50ZXJ2YWw6ICcobnVtYmVyfGJvb2xlYW4pJyxcblx0ICAgIGtleWJvYXJkOiAnYm9vbGVhbicsXG5cdCAgICBzbGlkZTogJyhib29sZWFufHN0cmluZyknLFxuXHQgICAgcGF1c2U6ICcoc3RyaW5nfGJvb2xlYW4pJyxcblx0ICAgIHdyYXA6ICdib29sZWFuJ1xuXHQgIH07XG5cdFxuXHQgIHZhciBEaXJlY3Rpb24gPSB7XG5cdCAgICBORVhUOiAnbmV4dCcsXG5cdCAgICBQUkVWSU9VUzogJ3ByZXYnXG5cdCAgfTtcblx0XG5cdCAgdmFyIEV2ZW50ID0ge1xuXHQgICAgU0xJREU6ICdzbGlkZScgKyBFVkVOVF9LRVksXG5cdCAgICBTTElEOiAnc2xpZCcgKyBFVkVOVF9LRVksXG5cdCAgICBLRVlET1dOOiAna2V5ZG93bicgKyBFVkVOVF9LRVksXG5cdCAgICBNT1VTRUVOVEVSOiAnbW91c2VlbnRlcicgKyBFVkVOVF9LRVksXG5cdCAgICBNT1VTRUxFQVZFOiAnbW91c2VsZWF2ZScgKyBFVkVOVF9LRVksXG5cdCAgICBMT0FEX0RBVEFfQVBJOiAnbG9hZCcgKyBFVkVOVF9LRVkgKyBEQVRBX0FQSV9LRVksXG5cdCAgICBDTElDS19EQVRBX0FQSTogJ2NsaWNrJyArIEVWRU5UX0tFWSArIERBVEFfQVBJX0tFWVxuXHQgIH07XG5cdFxuXHQgIHZhciBDbGFzc05hbWUgPSB7XG5cdCAgICBDQVJPVVNFTDogJ2Nhcm91c2VsJyxcblx0ICAgIEFDVElWRTogJ2FjdGl2ZScsXG5cdCAgICBTTElERTogJ3NsaWRlJyxcblx0ICAgIFJJR0hUOiAncmlnaHQnLFxuXHQgICAgTEVGVDogJ2xlZnQnLFxuXHQgICAgSVRFTTogJ2Nhcm91c2VsLWl0ZW0nXG5cdCAgfTtcblx0XG5cdCAgdmFyIFNlbGVjdG9yID0ge1xuXHQgICAgQUNUSVZFOiAnLmFjdGl2ZScsXG5cdCAgICBBQ1RJVkVfSVRFTTogJy5hY3RpdmUuY2Fyb3VzZWwtaXRlbScsXG5cdCAgICBJVEVNOiAnLmNhcm91c2VsLWl0ZW0nLFxuXHQgICAgTkVYVF9QUkVWOiAnLm5leHQsIC5wcmV2Jyxcblx0ICAgIElORElDQVRPUlM6ICcuY2Fyb3VzZWwtaW5kaWNhdG9ycycsXG5cdCAgICBEQVRBX1NMSURFOiAnW2RhdGEtc2xpZGVdLCBbZGF0YS1zbGlkZS10b10nLFxuXHQgICAgREFUQV9SSURFOiAnW2RhdGEtcmlkZT1cImNhcm91c2VsXCJdJ1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQgICAqIENsYXNzIERlZmluaXRpb25cblx0ICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0ICAgKi9cblx0XG5cdCAgdmFyIENhcm91c2VsID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIENhcm91c2VsKGVsZW1lbnQsIGNvbmZpZykge1xuXHQgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ2Fyb3VzZWwpO1xuXHRcblx0ICAgICAgdGhpcy5faXRlbXMgPSBudWxsO1xuXHQgICAgICB0aGlzLl9pbnRlcnZhbCA9IG51bGw7XG5cdCAgICAgIHRoaXMuX2FjdGl2ZUVsZW1lbnQgPSBudWxsO1xuXHRcblx0ICAgICAgdGhpcy5faXNQYXVzZWQgPSBmYWxzZTtcblx0ICAgICAgdGhpcy5faXNTbGlkaW5nID0gZmFsc2U7XG5cdFxuXHQgICAgICB0aGlzLl9jb25maWcgPSB0aGlzLl9nZXRDb25maWcoY29uZmlnKTtcblx0ICAgICAgdGhpcy5fZWxlbWVudCA9ICQoZWxlbWVudClbMF07XG5cdCAgICAgIHRoaXMuX2luZGljYXRvcnNFbGVtZW50ID0gJCh0aGlzLl9lbGVtZW50KS5maW5kKFNlbGVjdG9yLklORElDQVRPUlMpWzBdO1xuXHRcblx0ICAgICAgdGhpcy5fYWRkRXZlbnRMaXN0ZW5lcnMoKTtcblx0ICAgIH1cblx0XG5cdCAgICAvKipcblx0ICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQgICAgICogRGF0YSBBcGkgaW1wbGVtZW50YXRpb25cblx0ICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQgICAgICovXG5cdFxuXHQgICAgLy8gZ2V0dGVyc1xuXHRcblx0ICAgIF9jcmVhdGVDbGFzcyhDYXJvdXNlbCwgW3tcblx0ICAgICAga2V5OiAnbmV4dCcsXG5cdFxuXHQgICAgICAvLyBwdWJsaWNcblx0XG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiBuZXh0KCkge1xuXHQgICAgICAgIGlmICghdGhpcy5faXNTbGlkaW5nKSB7XG5cdCAgICAgICAgICB0aGlzLl9zbGlkZShEaXJlY3Rpb24uTkVYVCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgIGtleTogJ25leHRXaGVuVmlzaWJsZScsXG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiBuZXh0V2hlblZpc2libGUoKSB7XG5cdCAgICAgICAgLy8gRG9uJ3QgY2FsbCBuZXh0IHdoZW4gdGhlIHBhZ2UgaXNuJ3QgdmlzaWJsZVxuXHQgICAgICAgIGlmICghZG9jdW1lbnQuaGlkZGVuKSB7XG5cdCAgICAgICAgICB0aGlzLm5leHQoKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAga2V5OiAncHJldicsXG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiBwcmV2KCkge1xuXHQgICAgICAgIGlmICghdGhpcy5faXNTbGlkaW5nKSB7XG5cdCAgICAgICAgICB0aGlzLl9zbGlkZShEaXJlY3Rpb24uUFJFVklPVVMpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICBrZXk6ICdwYXVzZScsXG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiBwYXVzZShldmVudCkge1xuXHQgICAgICAgIGlmICghZXZlbnQpIHtcblx0ICAgICAgICAgIHRoaXMuX2lzUGF1c2VkID0gdHJ1ZTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGlmICgkKHRoaXMuX2VsZW1lbnQpLmZpbmQoU2VsZWN0b3IuTkVYVF9QUkVWKVswXSAmJiBVdGlsLnN1cHBvcnRzVHJhbnNpdGlvbkVuZCgpKSB7XG5cdCAgICAgICAgICBVdGlsLnRyaWdnZXJUcmFuc2l0aW9uRW5kKHRoaXMuX2VsZW1lbnQpO1xuXHQgICAgICAgICAgdGhpcy5jeWNsZSh0cnVlKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5faW50ZXJ2YWwpO1xuXHQgICAgICAgIHRoaXMuX2ludGVydmFsID0gbnVsbDtcblx0ICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICBrZXk6ICdjeWNsZScsXG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiBjeWNsZShldmVudCkge1xuXHQgICAgICAgIGlmICghZXZlbnQpIHtcblx0ICAgICAgICAgIHRoaXMuX2lzUGF1c2VkID0gZmFsc2U7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBpZiAodGhpcy5faW50ZXJ2YWwpIHtcblx0ICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5faW50ZXJ2YWwpO1xuXHQgICAgICAgICAgdGhpcy5faW50ZXJ2YWwgPSBudWxsO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgaWYgKHRoaXMuX2NvbmZpZy5pbnRlcnZhbCAmJiAhdGhpcy5faXNQYXVzZWQpIHtcblx0ICAgICAgICAgIHRoaXMuX2ludGVydmFsID0gc2V0SW50ZXJ2YWwoJC5wcm94eShkb2N1bWVudC52aXNpYmlsaXR5U3RhdGUgPyB0aGlzLm5leHRXaGVuVmlzaWJsZSA6IHRoaXMubmV4dCwgdGhpcyksIHRoaXMuX2NvbmZpZy5pbnRlcnZhbCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgIGtleTogJ3RvJyxcblx0ICAgICAgdmFsdWU6IGZ1bmN0aW9uIHRvKGluZGV4KSB7XG5cdCAgICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cdFxuXHQgICAgICAgIHRoaXMuX2FjdGl2ZUVsZW1lbnQgPSAkKHRoaXMuX2VsZW1lbnQpLmZpbmQoU2VsZWN0b3IuQUNUSVZFX0lURU0pWzBdO1xuXHRcblx0ICAgICAgICB2YXIgYWN0aXZlSW5kZXggPSB0aGlzLl9nZXRJdGVtSW5kZXgodGhpcy5fYWN0aXZlRWxlbWVudCk7XG5cdFxuXHQgICAgICAgIGlmIChpbmRleCA+IHRoaXMuX2l0ZW1zLmxlbmd0aCAtIDEgfHwgaW5kZXggPCAwKSB7XG5cdCAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBpZiAodGhpcy5faXNTbGlkaW5nKSB7XG5cdCAgICAgICAgICAkKHRoaXMuX2VsZW1lbnQpLm9uZShFdmVudC5TTElELCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBfdGhpczIudG8oaW5kZXgpO1xuXHQgICAgICAgICAgfSk7XG5cdCAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBpZiAoYWN0aXZlSW5kZXggPT09IGluZGV4KSB7XG5cdCAgICAgICAgICB0aGlzLnBhdXNlKCk7XG5cdCAgICAgICAgICB0aGlzLmN5Y2xlKCk7XG5cdCAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICB2YXIgZGlyZWN0aW9uID0gaW5kZXggPiBhY3RpdmVJbmRleCA/IERpcmVjdGlvbi5ORVhUIDogRGlyZWN0aW9uLlBSRVZJT1VTO1xuXHRcblx0ICAgICAgICB0aGlzLl9zbGlkZShkaXJlY3Rpb24sIHRoaXMuX2l0ZW1zW2luZGV4XSk7XG5cdCAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAga2V5OiAnZGlzcG9zZScsXG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiBkaXNwb3NlKCkge1xuXHQgICAgICAgICQodGhpcy5fZWxlbWVudCkub2ZmKEVWRU5UX0tFWSk7XG5cdCAgICAgICAgJC5yZW1vdmVEYXRhKHRoaXMuX2VsZW1lbnQsIERBVEFfS0VZKTtcblx0XG5cdCAgICAgICAgdGhpcy5faXRlbXMgPSBudWxsO1xuXHQgICAgICAgIHRoaXMuX2NvbmZpZyA9IG51bGw7XG5cdCAgICAgICAgdGhpcy5fZWxlbWVudCA9IG51bGw7XG5cdCAgICAgICAgdGhpcy5faW50ZXJ2YWwgPSBudWxsO1xuXHQgICAgICAgIHRoaXMuX2lzUGF1c2VkID0gbnVsbDtcblx0ICAgICAgICB0aGlzLl9pc1NsaWRpbmcgPSBudWxsO1xuXHQgICAgICAgIHRoaXMuX2FjdGl2ZUVsZW1lbnQgPSBudWxsO1xuXHQgICAgICAgIHRoaXMuX2luZGljYXRvcnNFbGVtZW50ID0gbnVsbDtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgLy8gcHJpdmF0ZVxuXHRcblx0ICAgIH0sIHtcblx0ICAgICAga2V5OiAnX2dldENvbmZpZycsXG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiBfZ2V0Q29uZmlnKGNvbmZpZykge1xuXHQgICAgICAgIGNvbmZpZyA9ICQuZXh0ZW5kKHt9LCBEZWZhdWx0LCBjb25maWcpO1xuXHQgICAgICAgIFV0aWwudHlwZUNoZWNrQ29uZmlnKE5BTUUsIGNvbmZpZywgRGVmYXVsdFR5cGUpO1xuXHQgICAgICAgIHJldHVybiBjb25maWc7XG5cdCAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAga2V5OiAnX2FkZEV2ZW50TGlzdGVuZXJzJyxcblx0ICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9hZGRFdmVudExpc3RlbmVycygpIHtcblx0ICAgICAgICBpZiAodGhpcy5fY29uZmlnLmtleWJvYXJkKSB7XG5cdCAgICAgICAgICAkKHRoaXMuX2VsZW1lbnQpLm9uKEV2ZW50LktFWURPV04sICQucHJveHkodGhpcy5fa2V5ZG93biwgdGhpcykpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgaWYgKHRoaXMuX2NvbmZpZy5wYXVzZSA9PT0gJ2hvdmVyJyAmJiAhKCdvbnRvdWNoc3RhcnQnIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkpIHtcblx0ICAgICAgICAgICQodGhpcy5fZWxlbWVudCkub24oRXZlbnQuTU9VU0VFTlRFUiwgJC5wcm94eSh0aGlzLnBhdXNlLCB0aGlzKSkub24oRXZlbnQuTU9VU0VMRUFWRSwgJC5wcm94eSh0aGlzLmN5Y2xlLCB0aGlzKSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgIGtleTogJ19rZXlkb3duJyxcblx0ICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9rZXlkb3duKGV2ZW50KSB7XG5cdCAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XG5cdCAgICAgICAgaWYgKC9pbnB1dHx0ZXh0YXJlYS9pLnRlc3QoZXZlbnQudGFyZ2V0LnRhZ05hbWUpKSB7XG5cdCAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBzd2l0Y2ggKGV2ZW50LndoaWNoKSB7XG5cdCAgICAgICAgICBjYXNlIEFSUk9XX0xFRlRfS0VZQ09ERTpcblx0ICAgICAgICAgICAgdGhpcy5wcmV2KCk7XG5cdCAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgY2FzZSBBUlJPV19SSUdIVF9LRVlDT0RFOlxuXHQgICAgICAgICAgICB0aGlzLm5leHQoKTtcblx0ICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgICBkZWZhdWx0OlxuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgIGtleTogJ19nZXRJdGVtSW5kZXgnLFxuXHQgICAgICB2YWx1ZTogZnVuY3Rpb24gX2dldEl0ZW1JbmRleChlbGVtZW50KSB7XG5cdCAgICAgICAgdGhpcy5faXRlbXMgPSAkLm1ha2VBcnJheSgkKGVsZW1lbnQpLnBhcmVudCgpLmZpbmQoU2VsZWN0b3IuSVRFTSkpO1xuXHQgICAgICAgIHJldHVybiB0aGlzLl9pdGVtcy5pbmRleE9mKGVsZW1lbnQpO1xuXHQgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgIGtleTogJ19nZXRJdGVtQnlEaXJlY3Rpb24nLFxuXHQgICAgICB2YWx1ZTogZnVuY3Rpb24gX2dldEl0ZW1CeURpcmVjdGlvbihkaXJlY3Rpb24sIGFjdGl2ZUVsZW1lbnQpIHtcblx0ICAgICAgICB2YXIgaXNOZXh0RGlyZWN0aW9uID0gZGlyZWN0aW9uID09PSBEaXJlY3Rpb24uTkVYVDtcblx0ICAgICAgICB2YXIgaXNQcmV2RGlyZWN0aW9uID0gZGlyZWN0aW9uID09PSBEaXJlY3Rpb24uUFJFVklPVVM7XG5cdCAgICAgICAgdmFyIGFjdGl2ZUluZGV4ID0gdGhpcy5fZ2V0SXRlbUluZGV4KGFjdGl2ZUVsZW1lbnQpO1xuXHQgICAgICAgIHZhciBsYXN0SXRlbUluZGV4ID0gdGhpcy5faXRlbXMubGVuZ3RoIC0gMTtcblx0ICAgICAgICB2YXIgaXNHb2luZ1RvV3JhcCA9IGlzUHJldkRpcmVjdGlvbiAmJiBhY3RpdmVJbmRleCA9PT0gMCB8fCBpc05leHREaXJlY3Rpb24gJiYgYWN0aXZlSW5kZXggPT09IGxhc3RJdGVtSW5kZXg7XG5cdFxuXHQgICAgICAgIGlmIChpc0dvaW5nVG9XcmFwICYmICF0aGlzLl9jb25maWcud3JhcCkge1xuXHQgICAgICAgICAgcmV0dXJuIGFjdGl2ZUVsZW1lbnQ7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICB2YXIgZGVsdGEgPSBkaXJlY3Rpb24gPT09IERpcmVjdGlvbi5QUkVWSU9VUyA/IC0xIDogMTtcblx0ICAgICAgICB2YXIgaXRlbUluZGV4ID0gKGFjdGl2ZUluZGV4ICsgZGVsdGEpICUgdGhpcy5faXRlbXMubGVuZ3RoO1xuXHRcblx0ICAgICAgICByZXR1cm4gaXRlbUluZGV4ID09PSAtMSA/IHRoaXMuX2l0ZW1zW3RoaXMuX2l0ZW1zLmxlbmd0aCAtIDFdIDogdGhpcy5faXRlbXNbaXRlbUluZGV4XTtcblx0ICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICBrZXk6ICdfdHJpZ2dlclNsaWRlRXZlbnQnLFxuXHQgICAgICB2YWx1ZTogZnVuY3Rpb24gX3RyaWdnZXJTbGlkZUV2ZW50KHJlbGF0ZWRUYXJnZXQsIGRpcmVjdGlvbmFsQ2xhc3NuYW1lKSB7XG5cdCAgICAgICAgdmFyIHNsaWRlRXZlbnQgPSAkLkV2ZW50KEV2ZW50LlNMSURFLCB7XG5cdCAgICAgICAgICByZWxhdGVkVGFyZ2V0OiByZWxhdGVkVGFyZ2V0LFxuXHQgICAgICAgICAgZGlyZWN0aW9uOiBkaXJlY3Rpb25hbENsYXNzbmFtZVxuXHQgICAgICAgIH0pO1xuXHRcblx0ICAgICAgICAkKHRoaXMuX2VsZW1lbnQpLnRyaWdnZXIoc2xpZGVFdmVudCk7XG5cdFxuXHQgICAgICAgIHJldHVybiBzbGlkZUV2ZW50O1xuXHQgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgIGtleTogJ19zZXRBY3RpdmVJbmRpY2F0b3JFbGVtZW50Jyxcblx0ICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9zZXRBY3RpdmVJbmRpY2F0b3JFbGVtZW50KGVsZW1lbnQpIHtcblx0ICAgICAgICBpZiAodGhpcy5faW5kaWNhdG9yc0VsZW1lbnQpIHtcblx0ICAgICAgICAgICQodGhpcy5faW5kaWNhdG9yc0VsZW1lbnQpLmZpbmQoU2VsZWN0b3IuQUNUSVZFKS5yZW1vdmVDbGFzcyhDbGFzc05hbWUuQUNUSVZFKTtcblx0XG5cdCAgICAgICAgICB2YXIgbmV4dEluZGljYXRvciA9IHRoaXMuX2luZGljYXRvcnNFbGVtZW50LmNoaWxkcmVuW3RoaXMuX2dldEl0ZW1JbmRleChlbGVtZW50KV07XG5cdFxuXHQgICAgICAgICAgaWYgKG5leHRJbmRpY2F0b3IpIHtcblx0ICAgICAgICAgICAgJChuZXh0SW5kaWNhdG9yKS5hZGRDbGFzcyhDbGFzc05hbWUuQUNUSVZFKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAga2V5OiAnX3NsaWRlJyxcblx0ICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9zbGlkZShkaXJlY3Rpb24sIGVsZW1lbnQpIHtcblx0ICAgICAgICB2YXIgX3RoaXMzID0gdGhpcztcblx0XG5cdCAgICAgICAgdmFyIGFjdGl2ZUVsZW1lbnQgPSAkKHRoaXMuX2VsZW1lbnQpLmZpbmQoU2VsZWN0b3IuQUNUSVZFX0lURU0pWzBdO1xuXHQgICAgICAgIHZhciBuZXh0RWxlbWVudCA9IGVsZW1lbnQgfHwgYWN0aXZlRWxlbWVudCAmJiB0aGlzLl9nZXRJdGVtQnlEaXJlY3Rpb24oZGlyZWN0aW9uLCBhY3RpdmVFbGVtZW50KTtcblx0XG5cdCAgICAgICAgdmFyIGlzQ3ljbGluZyA9IEJvb2xlYW4odGhpcy5faW50ZXJ2YWwpO1xuXHRcblx0ICAgICAgICB2YXIgZGlyZWN0aW9uYWxDbGFzc05hbWUgPSBkaXJlY3Rpb24gPT09IERpcmVjdGlvbi5ORVhUID8gQ2xhc3NOYW1lLkxFRlQgOiBDbGFzc05hbWUuUklHSFQ7XG5cdFxuXHQgICAgICAgIGlmIChuZXh0RWxlbWVudCAmJiAkKG5leHRFbGVtZW50KS5oYXNDbGFzcyhDbGFzc05hbWUuQUNUSVZFKSkge1xuXHQgICAgICAgICAgdGhpcy5faXNTbGlkaW5nID0gZmFsc2U7XG5cdCAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICB2YXIgc2xpZGVFdmVudCA9IHRoaXMuX3RyaWdnZXJTbGlkZUV2ZW50KG5leHRFbGVtZW50LCBkaXJlY3Rpb25hbENsYXNzTmFtZSk7XG5cdCAgICAgICAgaWYgKHNsaWRlRXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkpIHtcblx0ICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGlmICghYWN0aXZlRWxlbWVudCB8fCAhbmV4dEVsZW1lbnQpIHtcblx0ICAgICAgICAgIC8vIHNvbWUgd2VpcmRuZXNzIGlzIGhhcHBlbmluZywgc28gd2UgYmFpbFxuXHQgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgdGhpcy5faXNTbGlkaW5nID0gdHJ1ZTtcblx0XG5cdCAgICAgICAgaWYgKGlzQ3ljbGluZykge1xuXHQgICAgICAgICAgdGhpcy5wYXVzZSgpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgdGhpcy5fc2V0QWN0aXZlSW5kaWNhdG9yRWxlbWVudChuZXh0RWxlbWVudCk7XG5cdFxuXHQgICAgICAgIHZhciBzbGlkRXZlbnQgPSAkLkV2ZW50KEV2ZW50LlNMSUQsIHtcblx0ICAgICAgICAgIHJlbGF0ZWRUYXJnZXQ6IG5leHRFbGVtZW50LFxuXHQgICAgICAgICAgZGlyZWN0aW9uOiBkaXJlY3Rpb25hbENsYXNzTmFtZVxuXHQgICAgICAgIH0pO1xuXHRcblx0ICAgICAgICBpZiAoVXRpbC5zdXBwb3J0c1RyYW5zaXRpb25FbmQoKSAmJiAkKHRoaXMuX2VsZW1lbnQpLmhhc0NsYXNzKENsYXNzTmFtZS5TTElERSkpIHtcblx0XG5cdCAgICAgICAgICAkKG5leHRFbGVtZW50KS5hZGRDbGFzcyhkaXJlY3Rpb24pO1xuXHRcblx0ICAgICAgICAgIFV0aWwucmVmbG93KG5leHRFbGVtZW50KTtcblx0XG5cdCAgICAgICAgICAkKGFjdGl2ZUVsZW1lbnQpLmFkZENsYXNzKGRpcmVjdGlvbmFsQ2xhc3NOYW1lKTtcblx0ICAgICAgICAgICQobmV4dEVsZW1lbnQpLmFkZENsYXNzKGRpcmVjdGlvbmFsQ2xhc3NOYW1lKTtcblx0XG5cdCAgICAgICAgICAkKGFjdGl2ZUVsZW1lbnQpLm9uZShVdGlsLlRSQU5TSVRJT05fRU5ELCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICQobmV4dEVsZW1lbnQpLnJlbW92ZUNsYXNzKGRpcmVjdGlvbmFsQ2xhc3NOYW1lKS5yZW1vdmVDbGFzcyhkaXJlY3Rpb24pO1xuXHRcblx0ICAgICAgICAgICAgJChuZXh0RWxlbWVudCkuYWRkQ2xhc3MoQ2xhc3NOYW1lLkFDVElWRSk7XG5cdFxuXHQgICAgICAgICAgICAkKGFjdGl2ZUVsZW1lbnQpLnJlbW92ZUNsYXNzKENsYXNzTmFtZS5BQ1RJVkUpLnJlbW92ZUNsYXNzKGRpcmVjdGlvbikucmVtb3ZlQ2xhc3MoZGlyZWN0aW9uYWxDbGFzc05hbWUpO1xuXHRcblx0ICAgICAgICAgICAgX3RoaXMzLl9pc1NsaWRpbmcgPSBmYWxzZTtcblx0XG5cdCAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgIHJldHVybiAkKF90aGlzMy5fZWxlbWVudCkudHJpZ2dlcihzbGlkRXZlbnQpO1xuXHQgICAgICAgICAgICB9LCAwKTtcblx0ICAgICAgICAgIH0pLmVtdWxhdGVUcmFuc2l0aW9uRW5kKFRSQU5TSVRJT05fRFVSQVRJT04pO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAkKGFjdGl2ZUVsZW1lbnQpLnJlbW92ZUNsYXNzKENsYXNzTmFtZS5BQ1RJVkUpO1xuXHQgICAgICAgICAgJChuZXh0RWxlbWVudCkuYWRkQ2xhc3MoQ2xhc3NOYW1lLkFDVElWRSk7XG5cdFxuXHQgICAgICAgICAgdGhpcy5faXNTbGlkaW5nID0gZmFsc2U7XG5cdCAgICAgICAgICAkKHRoaXMuX2VsZW1lbnQpLnRyaWdnZXIoc2xpZEV2ZW50KTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGlmIChpc0N5Y2xpbmcpIHtcblx0ICAgICAgICAgIHRoaXMuY3ljbGUoKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8vIHN0YXRpY1xuXHRcblx0ICAgIH1dLCBbe1xuXHQgICAgICBrZXk6ICdfalF1ZXJ5SW50ZXJmYWNlJyxcblx0ICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9qUXVlcnlJbnRlcmZhY2UoY29uZmlnKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICB2YXIgZGF0YSA9ICQodGhpcykuZGF0YShEQVRBX0tFWSk7XG5cdCAgICAgICAgICB2YXIgX2NvbmZpZyA9ICQuZXh0ZW5kKHt9LCBEZWZhdWx0LCAkKHRoaXMpLmRhdGEoKSk7XG5cdFxuXHQgICAgICAgICAgaWYgKHR5cGVvZiBjb25maWcgPT09ICdvYmplY3QnKSB7XG5cdCAgICAgICAgICAgICQuZXh0ZW5kKF9jb25maWcsIGNvbmZpZyk7XG5cdCAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgdmFyIGFjdGlvbiA9IHR5cGVvZiBjb25maWcgPT09ICdzdHJpbmcnID8gY29uZmlnIDogX2NvbmZpZy5zbGlkZTtcblx0XG5cdCAgICAgICAgICBpZiAoIWRhdGEpIHtcblx0ICAgICAgICAgICAgZGF0YSA9IG5ldyBDYXJvdXNlbCh0aGlzLCBfY29uZmlnKTtcblx0ICAgICAgICAgICAgJCh0aGlzKS5kYXRhKERBVEFfS0VZLCBkYXRhKTtcblx0ICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICBpZiAodHlwZW9mIGNvbmZpZyA9PT0gJ251bWJlcicpIHtcblx0ICAgICAgICAgICAgZGF0YS50byhjb25maWcpO1xuXHQgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgYWN0aW9uID09PSAnc3RyaW5nJykge1xuXHQgICAgICAgICAgICBpZiAoZGF0YVthY3Rpb25dID09PSB1bmRlZmluZWQpIHtcblx0ICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIG1ldGhvZCBuYW1lZCBcIicgKyBhY3Rpb24gKyAnXCInKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBkYXRhW2FjdGlvbl0oKTtcblx0ICAgICAgICAgIH0gZWxzZSBpZiAoX2NvbmZpZy5pbnRlcnZhbCkge1xuXHQgICAgICAgICAgICBkYXRhLnBhdXNlKCk7XG5cdCAgICAgICAgICAgIGRhdGEuY3ljbGUoKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9KTtcblx0ICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICBrZXk6ICdfZGF0YUFwaUNsaWNrSGFuZGxlcicsXG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiBfZGF0YUFwaUNsaWNrSGFuZGxlcihldmVudCkge1xuXHQgICAgICAgIHZhciBzZWxlY3RvciA9IFV0aWwuZ2V0U2VsZWN0b3JGcm9tRWxlbWVudCh0aGlzKTtcblx0XG5cdCAgICAgICAgaWYgKCFzZWxlY3Rvcikge1xuXHQgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgdmFyIHRhcmdldCA9ICQoc2VsZWN0b3IpWzBdO1xuXHRcblx0ICAgICAgICBpZiAoIXRhcmdldCB8fCAhJCh0YXJnZXQpLmhhc0NsYXNzKENsYXNzTmFtZS5DQVJPVVNFTCkpIHtcblx0ICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHZhciBjb25maWcgPSAkLmV4dGVuZCh7fSwgJCh0YXJnZXQpLmRhdGEoKSwgJCh0aGlzKS5kYXRhKCkpO1xuXHQgICAgICAgIHZhciBzbGlkZUluZGV4ID0gdGhpcy5nZXRBdHRyaWJ1dGUoJ2RhdGEtc2xpZGUtdG8nKTtcblx0XG5cdCAgICAgICAgaWYgKHNsaWRlSW5kZXgpIHtcblx0ICAgICAgICAgIGNvbmZpZy5pbnRlcnZhbCA9IGZhbHNlO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgQ2Fyb3VzZWwuX2pRdWVyeUludGVyZmFjZS5jYWxsKCQodGFyZ2V0KSwgY29uZmlnKTtcblx0XG5cdCAgICAgICAgaWYgKHNsaWRlSW5kZXgpIHtcblx0ICAgICAgICAgICQodGFyZ2V0KS5kYXRhKERBVEFfS0VZKS50byhzbGlkZUluZGV4KTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdCAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAga2V5OiAnVkVSU0lPTicsXG5cdCAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgICAgIHJldHVybiBWRVJTSU9OO1xuXHQgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgIGtleTogJ0RlZmF1bHQnLFxuXHQgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0ICAgICAgICByZXR1cm4gRGVmYXVsdDtcblx0ICAgICAgfVxuXHQgICAgfV0pO1xuXHRcblx0ICAgIHJldHVybiBDYXJvdXNlbDtcblx0ICB9KSgpO1xuXHRcblx0ICAkKGRvY3VtZW50KS5vbihFdmVudC5DTElDS19EQVRBX0FQSSwgU2VsZWN0b3IuREFUQV9TTElERSwgQ2Fyb3VzZWwuX2RhdGFBcGlDbGlja0hhbmRsZXIpO1xuXHRcblx0ICAkKHdpbmRvdykub24oRXZlbnQuTE9BRF9EQVRBX0FQSSwgZnVuY3Rpb24gKCkge1xuXHQgICAgJChTZWxlY3Rvci5EQVRBX1JJREUpLmVhY2goZnVuY3Rpb24gKCkge1xuXHQgICAgICB2YXIgJGNhcm91c2VsID0gJCh0aGlzKTtcblx0ICAgICAgQ2Fyb3VzZWwuX2pRdWVyeUludGVyZmFjZS5jYWxsKCRjYXJvdXNlbCwgJGNhcm91c2VsLmRhdGEoKSk7XG5cdCAgICB9KTtcblx0ICB9KTtcblx0XG5cdCAgLyoqXG5cdCAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCAgICogalF1ZXJ5XG5cdCAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCAgICovXG5cdFxuXHQgICQuZm5bTkFNRV0gPSBDYXJvdXNlbC5falF1ZXJ5SW50ZXJmYWNlO1xuXHQgICQuZm5bTkFNRV0uQ29uc3RydWN0b3IgPSBDYXJvdXNlbDtcblx0ICAkLmZuW05BTUVdLm5vQ29uZmxpY3QgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAkLmZuW05BTUVdID0gSlFVRVJZX05PX0NPTkZMSUNUO1xuXHQgICAgcmV0dXJuIENhcm91c2VsLl9qUXVlcnlJbnRlcmZhY2U7XG5cdCAgfTtcblx0XG5cdCAgcmV0dXJuIENhcm91c2VsO1xuXHR9KShqUXVlcnkpO1xuXHRcblx0LyoqXG5cdCAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCAqIEJvb3RzdHJhcCAodjQuMC4wLWFscGhhLjQpOiBjb2xsYXBzZS5qc1xuXHQgKiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ibG9iL21hc3Rlci9MSUNFTlNFKVxuXHQgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQgKi9cblx0XG5cdHZhciBDb2xsYXBzZSA9IChmdW5jdGlvbiAoJCkge1xuXHRcblx0ICAvKipcblx0ICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0ICAgKiBDb25zdGFudHNcblx0ICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0ICAgKi9cblx0XG5cdCAgdmFyIE5BTUUgPSAnY29sbGFwc2UnO1xuXHQgIHZhciBWRVJTSU9OID0gJzQuMC4wLWFscGhhLjQnO1xuXHQgIHZhciBEQVRBX0tFWSA9ICdicy5jb2xsYXBzZSc7XG5cdCAgdmFyIEVWRU5UX0tFWSA9ICcuJyArIERBVEFfS0VZO1xuXHQgIHZhciBEQVRBX0FQSV9LRVkgPSAnLmRhdGEtYXBpJztcblx0ICB2YXIgSlFVRVJZX05PX0NPTkZMSUNUID0gJC5mbltOQU1FXTtcblx0ICB2YXIgVFJBTlNJVElPTl9EVVJBVElPTiA9IDYwMDtcblx0XG5cdCAgdmFyIERlZmF1bHQgPSB7XG5cdCAgICB0b2dnbGU6IHRydWUsXG5cdCAgICBwYXJlbnQ6ICcnXG5cdCAgfTtcblx0XG5cdCAgdmFyIERlZmF1bHRUeXBlID0ge1xuXHQgICAgdG9nZ2xlOiAnYm9vbGVhbicsXG5cdCAgICBwYXJlbnQ6ICdzdHJpbmcnXG5cdCAgfTtcblx0XG5cdCAgdmFyIEV2ZW50ID0ge1xuXHQgICAgU0hPVzogJ3Nob3cnICsgRVZFTlRfS0VZLFxuXHQgICAgU0hPV046ICdzaG93bicgKyBFVkVOVF9LRVksXG5cdCAgICBISURFOiAnaGlkZScgKyBFVkVOVF9LRVksXG5cdCAgICBISURERU46ICdoaWRkZW4nICsgRVZFTlRfS0VZLFxuXHQgICAgQ0xJQ0tfREFUQV9BUEk6ICdjbGljaycgKyBFVkVOVF9LRVkgKyBEQVRBX0FQSV9LRVlcblx0ICB9O1xuXHRcblx0ICB2YXIgQ2xhc3NOYW1lID0ge1xuXHQgICAgSU46ICdpbicsXG5cdCAgICBDT0xMQVBTRTogJ2NvbGxhcHNlJyxcblx0ICAgIENPTExBUFNJTkc6ICdjb2xsYXBzaW5nJyxcblx0ICAgIENPTExBUFNFRDogJ2NvbGxhcHNlZCdcblx0ICB9O1xuXHRcblx0ICB2YXIgRGltZW5zaW9uID0ge1xuXHQgICAgV0lEVEg6ICd3aWR0aCcsXG5cdCAgICBIRUlHSFQ6ICdoZWlnaHQnXG5cdCAgfTtcblx0XG5cdCAgdmFyIFNlbGVjdG9yID0ge1xuXHQgICAgQUNUSVZFUzogJy5wYW5lbCA+IC5pbiwgLnBhbmVsID4gLmNvbGxhcHNpbmcnLFxuXHQgICAgREFUQV9UT0dHTEU6ICdbZGF0YS10b2dnbGU9XCJjb2xsYXBzZVwiXSdcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0ICAgKiBDbGFzcyBEZWZpbml0aW9uXG5cdCAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCAgICovXG5cdFxuXHQgIHZhciBDb2xsYXBzZSA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBDb2xsYXBzZShlbGVtZW50LCBjb25maWcpIHtcblx0ICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENvbGxhcHNlKTtcblx0XG5cdCAgICAgIHRoaXMuX2lzVHJhbnNpdGlvbmluZyA9IGZhbHNlO1xuXHQgICAgICB0aGlzLl9lbGVtZW50ID0gZWxlbWVudDtcblx0ICAgICAgdGhpcy5fY29uZmlnID0gdGhpcy5fZ2V0Q29uZmlnKGNvbmZpZyk7XG5cdCAgICAgIHRoaXMuX3RyaWdnZXJBcnJheSA9ICQubWFrZUFycmF5KCQoJ1tkYXRhLXRvZ2dsZT1cImNvbGxhcHNlXCJdW2hyZWY9XCIjJyArIGVsZW1lbnQuaWQgKyAnXCJdLCcgKyAoJ1tkYXRhLXRvZ2dsZT1cImNvbGxhcHNlXCJdW2RhdGEtdGFyZ2V0PVwiIycgKyBlbGVtZW50LmlkICsgJ1wiXScpKSk7XG5cdFxuXHQgICAgICB0aGlzLl9wYXJlbnQgPSB0aGlzLl9jb25maWcucGFyZW50ID8gdGhpcy5fZ2V0UGFyZW50KCkgOiBudWxsO1xuXHRcblx0ICAgICAgaWYgKCF0aGlzLl9jb25maWcucGFyZW50KSB7XG5cdCAgICAgICAgdGhpcy5fYWRkQXJpYUFuZENvbGxhcHNlZENsYXNzKHRoaXMuX2VsZW1lbnQsIHRoaXMuX3RyaWdnZXJBcnJheSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmICh0aGlzLl9jb25maWcudG9nZ2xlKSB7XG5cdCAgICAgICAgdGhpcy50b2dnbGUoKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCAgICAgKiBEYXRhIEFwaSBpbXBsZW1lbnRhdGlvblxuXHQgICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCAgICAgKi9cblx0XG5cdCAgICAvLyBnZXR0ZXJzXG5cdFxuXHQgICAgX2NyZWF0ZUNsYXNzKENvbGxhcHNlLCBbe1xuXHQgICAgICBrZXk6ICd0b2dnbGUnLFxuXHRcblx0ICAgICAgLy8gcHVibGljXG5cdFxuXHQgICAgICB2YWx1ZTogZnVuY3Rpb24gdG9nZ2xlKCkge1xuXHQgICAgICAgIGlmICgkKHRoaXMuX2VsZW1lbnQpLmhhc0NsYXNzKENsYXNzTmFtZS5JTikpIHtcblx0ICAgICAgICAgIHRoaXMuaGlkZSgpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICB0aGlzLnNob3coKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAga2V5OiAnc2hvdycsXG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiBzaG93KCkge1xuXHQgICAgICAgIHZhciBfdGhpczQgPSB0aGlzO1xuXHRcblx0ICAgICAgICBpZiAodGhpcy5faXNUcmFuc2l0aW9uaW5nIHx8ICQodGhpcy5fZWxlbWVudCkuaGFzQ2xhc3MoQ2xhc3NOYW1lLklOKSkge1xuXHQgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgdmFyIGFjdGl2ZXMgPSB1bmRlZmluZWQ7XG5cdCAgICAgICAgdmFyIGFjdGl2ZXNEYXRhID0gdW5kZWZpbmVkO1xuXHRcblx0ICAgICAgICBpZiAodGhpcy5fcGFyZW50KSB7XG5cdCAgICAgICAgICBhY3RpdmVzID0gJC5tYWtlQXJyYXkoJChTZWxlY3Rvci5BQ1RJVkVTKSk7XG5cdCAgICAgICAgICBpZiAoIWFjdGl2ZXMubGVuZ3RoKSB7XG5cdCAgICAgICAgICAgIGFjdGl2ZXMgPSBudWxsO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgaWYgKGFjdGl2ZXMpIHtcblx0ICAgICAgICAgIGFjdGl2ZXNEYXRhID0gJChhY3RpdmVzKS5kYXRhKERBVEFfS0VZKTtcblx0ICAgICAgICAgIGlmIChhY3RpdmVzRGF0YSAmJiBhY3RpdmVzRGF0YS5faXNUcmFuc2l0aW9uaW5nKSB7XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHZhciBzdGFydEV2ZW50ID0gJC5FdmVudChFdmVudC5TSE9XKTtcblx0ICAgICAgICAkKHRoaXMuX2VsZW1lbnQpLnRyaWdnZXIoc3RhcnRFdmVudCk7XG5cdCAgICAgICAgaWYgKHN0YXJ0RXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkpIHtcblx0ICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGlmIChhY3RpdmVzKSB7XG5cdCAgICAgICAgICBDb2xsYXBzZS5falF1ZXJ5SW50ZXJmYWNlLmNhbGwoJChhY3RpdmVzKSwgJ2hpZGUnKTtcblx0ICAgICAgICAgIGlmICghYWN0aXZlc0RhdGEpIHtcblx0ICAgICAgICAgICAgJChhY3RpdmVzKS5kYXRhKERBVEFfS0VZLCBudWxsKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHZhciBkaW1lbnNpb24gPSB0aGlzLl9nZXREaW1lbnNpb24oKTtcblx0XG5cdCAgICAgICAgJCh0aGlzLl9lbGVtZW50KS5yZW1vdmVDbGFzcyhDbGFzc05hbWUuQ09MTEFQU0UpLmFkZENsYXNzKENsYXNzTmFtZS5DT0xMQVBTSU5HKTtcblx0XG5cdCAgICAgICAgdGhpcy5fZWxlbWVudC5zdHlsZVtkaW1lbnNpb25dID0gMDtcblx0ICAgICAgICB0aGlzLl9lbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsIHRydWUpO1xuXHRcblx0ICAgICAgICBpZiAodGhpcy5fdHJpZ2dlckFycmF5Lmxlbmd0aCkge1xuXHQgICAgICAgICAgJCh0aGlzLl90cmlnZ2VyQXJyYXkpLnJlbW92ZUNsYXNzKENsYXNzTmFtZS5DT0xMQVBTRUQpLmF0dHIoJ2FyaWEtZXhwYW5kZWQnLCB0cnVlKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHRoaXMuc2V0VHJhbnNpdGlvbmluZyh0cnVlKTtcblx0XG5cdCAgICAgICAgdmFyIGNvbXBsZXRlID0gZnVuY3Rpb24gY29tcGxldGUoKSB7XG5cdCAgICAgICAgICAkKF90aGlzNC5fZWxlbWVudCkucmVtb3ZlQ2xhc3MoQ2xhc3NOYW1lLkNPTExBUFNJTkcpLmFkZENsYXNzKENsYXNzTmFtZS5DT0xMQVBTRSkuYWRkQ2xhc3MoQ2xhc3NOYW1lLklOKTtcblx0XG5cdCAgICAgICAgICBfdGhpczQuX2VsZW1lbnQuc3R5bGVbZGltZW5zaW9uXSA9ICcnO1xuXHRcblx0ICAgICAgICAgIF90aGlzNC5zZXRUcmFuc2l0aW9uaW5nKGZhbHNlKTtcblx0XG5cdCAgICAgICAgICAkKF90aGlzNC5fZWxlbWVudCkudHJpZ2dlcihFdmVudC5TSE9XTik7XG5cdCAgICAgICAgfTtcblx0XG5cdCAgICAgICAgaWYgKCFVdGlsLnN1cHBvcnRzVHJhbnNpdGlvbkVuZCgpKSB7XG5cdCAgICAgICAgICBjb21wbGV0ZSgpO1xuXHQgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgdmFyIGNhcGl0YWxpemVkRGltZW5zaW9uID0gZGltZW5zaW9uWzBdLnRvVXBwZXJDYXNlKCkgKyBkaW1lbnNpb24uc2xpY2UoMSk7XG5cdCAgICAgICAgdmFyIHNjcm9sbFNpemUgPSAnc2Nyb2xsJyArIGNhcGl0YWxpemVkRGltZW5zaW9uO1xuXHRcblx0ICAgICAgICAkKHRoaXMuX2VsZW1lbnQpLm9uZShVdGlsLlRSQU5TSVRJT05fRU5ELCBjb21wbGV0ZSkuZW11bGF0ZVRyYW5zaXRpb25FbmQoVFJBTlNJVElPTl9EVVJBVElPTik7XG5cdFxuXHQgICAgICAgIHRoaXMuX2VsZW1lbnQuc3R5bGVbZGltZW5zaW9uXSA9IHRoaXMuX2VsZW1lbnRbc2Nyb2xsU2l6ZV0gKyAncHgnO1xuXHQgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgIGtleTogJ2hpZGUnLFxuXHQgICAgICB2YWx1ZTogZnVuY3Rpb24gaGlkZSgpIHtcblx0ICAgICAgICB2YXIgX3RoaXM1ID0gdGhpcztcblx0XG5cdCAgICAgICAgaWYgKHRoaXMuX2lzVHJhbnNpdGlvbmluZyB8fCAhJCh0aGlzLl9lbGVtZW50KS5oYXNDbGFzcyhDbGFzc05hbWUuSU4pKSB7XG5cdCAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICB2YXIgc3RhcnRFdmVudCA9ICQuRXZlbnQoRXZlbnQuSElERSk7XG5cdCAgICAgICAgJCh0aGlzLl9lbGVtZW50KS50cmlnZ2VyKHN0YXJ0RXZlbnQpO1xuXHQgICAgICAgIGlmIChzdGFydEV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpKSB7XG5cdCAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICB2YXIgZGltZW5zaW9uID0gdGhpcy5fZ2V0RGltZW5zaW9uKCk7XG5cdCAgICAgICAgdmFyIG9mZnNldERpbWVuc2lvbiA9IGRpbWVuc2lvbiA9PT0gRGltZW5zaW9uLldJRFRIID8gJ29mZnNldFdpZHRoJyA6ICdvZmZzZXRIZWlnaHQnO1xuXHRcblx0ICAgICAgICB0aGlzLl9lbGVtZW50LnN0eWxlW2RpbWVuc2lvbl0gPSB0aGlzLl9lbGVtZW50W29mZnNldERpbWVuc2lvbl0gKyAncHgnO1xuXHRcblx0ICAgICAgICBVdGlsLnJlZmxvdyh0aGlzLl9lbGVtZW50KTtcblx0XG5cdCAgICAgICAgJCh0aGlzLl9lbGVtZW50KS5hZGRDbGFzcyhDbGFzc05hbWUuQ09MTEFQU0lORykucmVtb3ZlQ2xhc3MoQ2xhc3NOYW1lLkNPTExBUFNFKS5yZW1vdmVDbGFzcyhDbGFzc05hbWUuSU4pO1xuXHRcblx0ICAgICAgICB0aGlzLl9lbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsIGZhbHNlKTtcblx0XG5cdCAgICAgICAgaWYgKHRoaXMuX3RyaWdnZXJBcnJheS5sZW5ndGgpIHtcblx0ICAgICAgICAgICQodGhpcy5fdHJpZ2dlckFycmF5KS5hZGRDbGFzcyhDbGFzc05hbWUuQ09MTEFQU0VEKS5hdHRyKCdhcmlhLWV4cGFuZGVkJywgZmFsc2UpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgdGhpcy5zZXRUcmFuc2l0aW9uaW5nKHRydWUpO1xuXHRcblx0ICAgICAgICB2YXIgY29tcGxldGUgPSBmdW5jdGlvbiBjb21wbGV0ZSgpIHtcblx0ICAgICAgICAgIF90aGlzNS5zZXRUcmFuc2l0aW9uaW5nKGZhbHNlKTtcblx0ICAgICAgICAgICQoX3RoaXM1Ll9lbGVtZW50KS5yZW1vdmVDbGFzcyhDbGFzc05hbWUuQ09MTEFQU0lORykuYWRkQ2xhc3MoQ2xhc3NOYW1lLkNPTExBUFNFKS50cmlnZ2VyKEV2ZW50LkhJRERFTik7XG5cdCAgICAgICAgfTtcblx0XG5cdCAgICAgICAgdGhpcy5fZWxlbWVudC5zdHlsZVtkaW1lbnNpb25dID0gMDtcblx0XG5cdCAgICAgICAgaWYgKCFVdGlsLnN1cHBvcnRzVHJhbnNpdGlvbkVuZCgpKSB7XG5cdCAgICAgICAgICBjb21wbGV0ZSgpO1xuXHQgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgJCh0aGlzLl9lbGVtZW50KS5vbmUoVXRpbC5UUkFOU0lUSU9OX0VORCwgY29tcGxldGUpLmVtdWxhdGVUcmFuc2l0aW9uRW5kKFRSQU5TSVRJT05fRFVSQVRJT04pO1xuXHQgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgIGtleTogJ3NldFRyYW5zaXRpb25pbmcnLFxuXHQgICAgICB2YWx1ZTogZnVuY3Rpb24gc2V0VHJhbnNpdGlvbmluZyhpc1RyYW5zaXRpb25pbmcpIHtcblx0ICAgICAgICB0aGlzLl9pc1RyYW5zaXRpb25pbmcgPSBpc1RyYW5zaXRpb25pbmc7XG5cdCAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAga2V5OiAnZGlzcG9zZScsXG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiBkaXNwb3NlKCkge1xuXHQgICAgICAgICQucmVtb3ZlRGF0YSh0aGlzLl9lbGVtZW50LCBEQVRBX0tFWSk7XG5cdFxuXHQgICAgICAgIHRoaXMuX2NvbmZpZyA9IG51bGw7XG5cdCAgICAgICAgdGhpcy5fcGFyZW50ID0gbnVsbDtcblx0ICAgICAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcblx0ICAgICAgICB0aGlzLl90cmlnZ2VyQXJyYXkgPSBudWxsO1xuXHQgICAgICAgIHRoaXMuX2lzVHJhbnNpdGlvbmluZyA9IG51bGw7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8vIHByaXZhdGVcblx0XG5cdCAgICB9LCB7XG5cdCAgICAgIGtleTogJ19nZXRDb25maWcnLFxuXHQgICAgICB2YWx1ZTogZnVuY3Rpb24gX2dldENvbmZpZyhjb25maWcpIHtcblx0ICAgICAgICBjb25maWcgPSAkLmV4dGVuZCh7fSwgRGVmYXVsdCwgY29uZmlnKTtcblx0ICAgICAgICBjb25maWcudG9nZ2xlID0gQm9vbGVhbihjb25maWcudG9nZ2xlKTsgLy8gY29lcmNlIHN0cmluZyB2YWx1ZXNcblx0ICAgICAgICBVdGlsLnR5cGVDaGVja0NvbmZpZyhOQU1FLCBjb25maWcsIERlZmF1bHRUeXBlKTtcblx0ICAgICAgICByZXR1cm4gY29uZmlnO1xuXHQgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgIGtleTogJ19nZXREaW1lbnNpb24nLFxuXHQgICAgICB2YWx1ZTogZnVuY3Rpb24gX2dldERpbWVuc2lvbigpIHtcblx0ICAgICAgICB2YXIgaGFzV2lkdGggPSAkKHRoaXMuX2VsZW1lbnQpLmhhc0NsYXNzKERpbWVuc2lvbi5XSURUSCk7XG5cdCAgICAgICAgcmV0dXJuIGhhc1dpZHRoID8gRGltZW5zaW9uLldJRFRIIDogRGltZW5zaW9uLkhFSUdIVDtcblx0ICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICBrZXk6ICdfZ2V0UGFyZW50Jyxcblx0ICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9nZXRQYXJlbnQoKSB7XG5cdCAgICAgICAgdmFyIF90aGlzNiA9IHRoaXM7XG5cdFxuXHQgICAgICAgIHZhciBwYXJlbnQgPSAkKHRoaXMuX2NvbmZpZy5wYXJlbnQpWzBdO1xuXHQgICAgICAgIHZhciBzZWxlY3RvciA9ICdbZGF0YS10b2dnbGU9XCJjb2xsYXBzZVwiXVtkYXRhLXBhcmVudD1cIicgKyB0aGlzLl9jb25maWcucGFyZW50ICsgJ1wiXSc7XG5cdFxuXHQgICAgICAgICQocGFyZW50KS5maW5kKHNlbGVjdG9yKS5lYWNoKGZ1bmN0aW9uIChpLCBlbGVtZW50KSB7XG5cdCAgICAgICAgICBfdGhpczYuX2FkZEFyaWFBbmRDb2xsYXBzZWRDbGFzcyhDb2xsYXBzZS5fZ2V0VGFyZ2V0RnJvbUVsZW1lbnQoZWxlbWVudCksIFtlbGVtZW50XSk7XG5cdCAgICAgICAgfSk7XG5cdFxuXHQgICAgICAgIHJldHVybiBwYXJlbnQ7XG5cdCAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAga2V5OiAnX2FkZEFyaWFBbmRDb2xsYXBzZWRDbGFzcycsXG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiBfYWRkQXJpYUFuZENvbGxhcHNlZENsYXNzKGVsZW1lbnQsIHRyaWdnZXJBcnJheSkge1xuXHQgICAgICAgIGlmIChlbGVtZW50KSB7XG5cdCAgICAgICAgICB2YXIgaXNPcGVuID0gJChlbGVtZW50KS5oYXNDbGFzcyhDbGFzc05hbWUuSU4pO1xuXHQgICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLCBpc09wZW4pO1xuXHRcblx0ICAgICAgICAgIGlmICh0cmlnZ2VyQXJyYXkubGVuZ3RoKSB7XG5cdCAgICAgICAgICAgICQodHJpZ2dlckFycmF5KS50b2dnbGVDbGFzcyhDbGFzc05hbWUuQ09MTEFQU0VELCAhaXNPcGVuKS5hdHRyKCdhcmlhLWV4cGFuZGVkJywgaXNPcGVuKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8vIHN0YXRpY1xuXHRcblx0ICAgIH1dLCBbe1xuXHQgICAgICBrZXk6ICdfZ2V0VGFyZ2V0RnJvbUVsZW1lbnQnLFxuXHQgICAgICB2YWx1ZTogZnVuY3Rpb24gX2dldFRhcmdldEZyb21FbGVtZW50KGVsZW1lbnQpIHtcblx0ICAgICAgICB2YXIgc2VsZWN0b3IgPSBVdGlsLmdldFNlbGVjdG9yRnJvbUVsZW1lbnQoZWxlbWVudCk7XG5cdCAgICAgICAgcmV0dXJuIHNlbGVjdG9yID8gJChzZWxlY3RvcilbMF0gOiBudWxsO1xuXHQgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgIGtleTogJ19qUXVlcnlJbnRlcmZhY2UnLFxuXHQgICAgICB2YWx1ZTogZnVuY3Rpb24gX2pRdWVyeUludGVyZmFjZShjb25maWcpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7XG5cdCAgICAgICAgICB2YXIgZGF0YSA9ICR0aGlzLmRhdGEoREFUQV9LRVkpO1xuXHQgICAgICAgICAgdmFyIF9jb25maWcgPSAkLmV4dGVuZCh7fSwgRGVmYXVsdCwgJHRoaXMuZGF0YSgpLCB0eXBlb2YgY29uZmlnID09PSAnb2JqZWN0JyAmJiBjb25maWcpO1xuXHRcblx0ICAgICAgICAgIGlmICghZGF0YSAmJiBfY29uZmlnLnRvZ2dsZSAmJiAvc2hvd3xoaWRlLy50ZXN0KGNvbmZpZykpIHtcblx0ICAgICAgICAgICAgX2NvbmZpZy50b2dnbGUgPSBmYWxzZTtcblx0ICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICBpZiAoIWRhdGEpIHtcblx0ICAgICAgICAgICAgZGF0YSA9IG5ldyBDb2xsYXBzZSh0aGlzLCBfY29uZmlnKTtcblx0ICAgICAgICAgICAgJHRoaXMuZGF0YShEQVRBX0tFWSwgZGF0YSk7XG5cdCAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgaWYgKHR5cGVvZiBjb25maWcgPT09ICdzdHJpbmcnKSB7XG5cdCAgICAgICAgICAgIGlmIChkYXRhW2NvbmZpZ10gPT09IHVuZGVmaW5lZCkge1xuXHQgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gbWV0aG9kIG5hbWVkIFwiJyArIGNvbmZpZyArICdcIicpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGRhdGFbY29uZmlnXSgpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0pO1xuXHQgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgIGtleTogJ1ZFUlNJT04nLFxuXHQgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0ICAgICAgICByZXR1cm4gVkVSU0lPTjtcblx0ICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICBrZXk6ICdEZWZhdWx0Jyxcblx0ICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG5cdCAgICAgICAgcmV0dXJuIERlZmF1bHQ7XG5cdCAgICAgIH1cblx0ICAgIH1dKTtcblx0XG5cdCAgICByZXR1cm4gQ29sbGFwc2U7XG5cdCAgfSkoKTtcblx0XG5cdCAgJChkb2N1bWVudCkub24oRXZlbnQuQ0xJQ0tfREFUQV9BUEksIFNlbGVjdG9yLkRBVEFfVE9HR0xFLCBmdW5jdGlvbiAoZXZlbnQpIHtcblx0ICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFxuXHQgICAgdmFyIHRhcmdldCA9IENvbGxhcHNlLl9nZXRUYXJnZXRGcm9tRWxlbWVudCh0aGlzKTtcblx0ICAgIHZhciBkYXRhID0gJCh0YXJnZXQpLmRhdGEoREFUQV9LRVkpO1xuXHQgICAgdmFyIGNvbmZpZyA9IGRhdGEgPyAndG9nZ2xlJyA6ICQodGhpcykuZGF0YSgpO1xuXHRcblx0ICAgIENvbGxhcHNlLl9qUXVlcnlJbnRlcmZhY2UuY2FsbCgkKHRhcmdldCksIGNvbmZpZyk7XG5cdCAgfSk7XG5cdFxuXHQgIC8qKlxuXHQgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQgICAqIGpRdWVyeVxuXHQgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQgICAqL1xuXHRcblx0ICAkLmZuW05BTUVdID0gQ29sbGFwc2UuX2pRdWVyeUludGVyZmFjZTtcblx0ICAkLmZuW05BTUVdLkNvbnN0cnVjdG9yID0gQ29sbGFwc2U7XG5cdCAgJC5mbltOQU1FXS5ub0NvbmZsaWN0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgJC5mbltOQU1FXSA9IEpRVUVSWV9OT19DT05GTElDVDtcblx0ICAgIHJldHVybiBDb2xsYXBzZS5falF1ZXJ5SW50ZXJmYWNlO1xuXHQgIH07XG5cdFxuXHQgIHJldHVybiBDb2xsYXBzZTtcblx0fSkoalF1ZXJ5KTtcblx0XG5cdC8qKlxuXHQgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQgKiBCb290c3RyYXAgKHY0LjAuMC1hbHBoYS40KTogZHJvcGRvd24uanNcblx0ICogTGljZW5zZWQgdW5kZXIgTUlUIChodHRwczovL2dpdGh1Yi5jb20vdHdicy9ib290c3RyYXAvYmxvYi9tYXN0ZXIvTElDRU5TRSlcblx0ICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0ICovXG5cdFxuXHR2YXIgRHJvcGRvd24gPSAoZnVuY3Rpb24gKCQpIHtcblx0XG5cdCAgLyoqXG5cdCAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCAgICogQ29uc3RhbnRzXG5cdCAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCAgICovXG5cdFxuXHQgIHZhciBOQU1FID0gJ2Ryb3Bkb3duJztcblx0ICB2YXIgVkVSU0lPTiA9ICc0LjAuMC1hbHBoYS40Jztcblx0ICB2YXIgREFUQV9LRVkgPSAnYnMuZHJvcGRvd24nO1xuXHQgIHZhciBFVkVOVF9LRVkgPSAnLicgKyBEQVRBX0tFWTtcblx0ICB2YXIgREFUQV9BUElfS0VZID0gJy5kYXRhLWFwaSc7XG5cdCAgdmFyIEpRVUVSWV9OT19DT05GTElDVCA9ICQuZm5bTkFNRV07XG5cdCAgdmFyIEVTQ0FQRV9LRVlDT0RFID0gMjc7IC8vIEtleWJvYXJkRXZlbnQud2hpY2ggdmFsdWUgZm9yIEVzY2FwZSAoRXNjKSBrZXlcblx0ICB2YXIgQVJST1dfVVBfS0VZQ09ERSA9IDM4OyAvLyBLZXlib2FyZEV2ZW50LndoaWNoIHZhbHVlIGZvciB1cCBhcnJvdyBrZXlcblx0ICB2YXIgQVJST1dfRE9XTl9LRVlDT0RFID0gNDA7IC8vIEtleWJvYXJkRXZlbnQud2hpY2ggdmFsdWUgZm9yIGRvd24gYXJyb3cga2V5XG5cdCAgdmFyIFJJR0hUX01PVVNFX0JVVFRPTl9XSElDSCA9IDM7IC8vIE1vdXNlRXZlbnQud2hpY2ggdmFsdWUgZm9yIHRoZSByaWdodCBidXR0b24gKGFzc3VtaW5nIGEgcmlnaHQtaGFuZGVkIG1vdXNlKVxuXHRcblx0ICB2YXIgRXZlbnQgPSB7XG5cdCAgICBISURFOiAnaGlkZScgKyBFVkVOVF9LRVksXG5cdCAgICBISURERU46ICdoaWRkZW4nICsgRVZFTlRfS0VZLFxuXHQgICAgU0hPVzogJ3Nob3cnICsgRVZFTlRfS0VZLFxuXHQgICAgU0hPV046ICdzaG93bicgKyBFVkVOVF9LRVksXG5cdCAgICBDTElDSzogJ2NsaWNrJyArIEVWRU5UX0tFWSxcblx0ICAgIENMSUNLX0RBVEFfQVBJOiAnY2xpY2snICsgRVZFTlRfS0VZICsgREFUQV9BUElfS0VZLFxuXHQgICAgS0VZRE9XTl9EQVRBX0FQSTogJ2tleWRvd24nICsgRVZFTlRfS0VZICsgREFUQV9BUElfS0VZXG5cdCAgfTtcblx0XG5cdCAgdmFyIENsYXNzTmFtZSA9IHtcblx0ICAgIEJBQ0tEUk9QOiAnZHJvcGRvd24tYmFja2Ryb3AnLFxuXHQgICAgRElTQUJMRUQ6ICdkaXNhYmxlZCcsXG5cdCAgICBPUEVOOiAnb3Blbidcblx0ICB9O1xuXHRcblx0ICB2YXIgU2VsZWN0b3IgPSB7XG5cdCAgICBCQUNLRFJPUDogJy5kcm9wZG93bi1iYWNrZHJvcCcsXG5cdCAgICBEQVRBX1RPR0dMRTogJ1tkYXRhLXRvZ2dsZT1cImRyb3Bkb3duXCJdJyxcblx0ICAgIEZPUk1fQ0hJTEQ6ICcuZHJvcGRvd24gZm9ybScsXG5cdCAgICBST0xFX01FTlU6ICdbcm9sZT1cIm1lbnVcIl0nLFxuXHQgICAgUk9MRV9MSVNUQk9YOiAnW3JvbGU9XCJsaXN0Ym94XCJdJyxcblx0ICAgIE5BVkJBUl9OQVY6ICcubmF2YmFyLW5hdicsXG5cdCAgICBWSVNJQkxFX0lURU1TOiAnW3JvbGU9XCJtZW51XCJdIGxpOm5vdCguZGlzYWJsZWQpIGEsICcgKyAnW3JvbGU9XCJsaXN0Ym94XCJdIGxpOm5vdCguZGlzYWJsZWQpIGEnXG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCAgICogQ2xhc3MgRGVmaW5pdGlvblxuXHQgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQgICAqL1xuXHRcblx0ICB2YXIgRHJvcGRvd24gPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gRHJvcGRvd24oZWxlbWVudCkge1xuXHQgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRHJvcGRvd24pO1xuXHRcblx0ICAgICAgdGhpcy5fZWxlbWVudCA9IGVsZW1lbnQ7XG5cdFxuXHQgICAgICB0aGlzLl9hZGRFdmVudExpc3RlbmVycygpO1xuXHQgICAgfVxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCAgICAgKiBEYXRhIEFwaSBpbXBsZW1lbnRhdGlvblxuXHQgICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCAgICAgKi9cblx0XG5cdCAgICAvLyBnZXR0ZXJzXG5cdFxuXHQgICAgX2NyZWF0ZUNsYXNzKERyb3Bkb3duLCBbe1xuXHQgICAgICBrZXk6ICd0b2dnbGUnLFxuXHRcblx0ICAgICAgLy8gcHVibGljXG5cdFxuXHQgICAgICB2YWx1ZTogZnVuY3Rpb24gdG9nZ2xlKCkge1xuXHQgICAgICAgIGlmICh0aGlzLmRpc2FibGVkIHx8ICQodGhpcykuaGFzQ2xhc3MoQ2xhc3NOYW1lLkRJU0FCTEVEKSkge1xuXHQgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgdmFyIHBhcmVudCA9IERyb3Bkb3duLl9nZXRQYXJlbnRGcm9tRWxlbWVudCh0aGlzKTtcblx0ICAgICAgICB2YXIgaXNBY3RpdmUgPSAkKHBhcmVudCkuaGFzQ2xhc3MoQ2xhc3NOYW1lLk9QRU4pO1xuXHRcblx0ICAgICAgICBEcm9wZG93bi5fY2xlYXJNZW51cygpO1xuXHRcblx0ICAgICAgICBpZiAoaXNBY3RpdmUpIHtcblx0ICAgICAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGlmICgnb250b3VjaHN0YXJ0JyBpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgJiYgISQocGFyZW50KS5jbG9zZXN0KFNlbGVjdG9yLk5BVkJBUl9OQVYpLmxlbmd0aCkge1xuXHRcblx0ICAgICAgICAgIC8vIGlmIG1vYmlsZSB3ZSB1c2UgYSBiYWNrZHJvcCBiZWNhdXNlIGNsaWNrIGV2ZW50cyBkb24ndCBkZWxlZ2F0ZVxuXHQgICAgICAgICAgdmFyIGRyb3Bkb3duID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdCAgICAgICAgICBkcm9wZG93bi5jbGFzc05hbWUgPSBDbGFzc05hbWUuQkFDS0RST1A7XG5cdCAgICAgICAgICAkKGRyb3Bkb3duKS5pbnNlcnRCZWZvcmUodGhpcyk7XG5cdCAgICAgICAgICAkKGRyb3Bkb3duKS5vbignY2xpY2snLCBEcm9wZG93bi5fY2xlYXJNZW51cyk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICB2YXIgcmVsYXRlZFRhcmdldCA9IHsgcmVsYXRlZFRhcmdldDogdGhpcyB9O1xuXHQgICAgICAgIHZhciBzaG93RXZlbnQgPSAkLkV2ZW50KEV2ZW50LlNIT1csIHJlbGF0ZWRUYXJnZXQpO1xuXHRcblx0ICAgICAgICAkKHBhcmVudCkudHJpZ2dlcihzaG93RXZlbnQpO1xuXHRcblx0ICAgICAgICBpZiAoc2hvd0V2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpKSB7XG5cdCAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICB0aGlzLmZvY3VzKCk7XG5cdCAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLCAndHJ1ZScpO1xuXHRcblx0ICAgICAgICAkKHBhcmVudCkudG9nZ2xlQ2xhc3MoQ2xhc3NOYW1lLk9QRU4pO1xuXHQgICAgICAgICQocGFyZW50KS50cmlnZ2VyKCQuRXZlbnQoRXZlbnQuU0hPV04sIHJlbGF0ZWRUYXJnZXQpKTtcblx0XG5cdCAgICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgIGtleTogJ2Rpc3Bvc2UnLFxuXHQgICAgICB2YWx1ZTogZnVuY3Rpb24gZGlzcG9zZSgpIHtcblx0ICAgICAgICAkLnJlbW92ZURhdGEodGhpcy5fZWxlbWVudCwgREFUQV9LRVkpO1xuXHQgICAgICAgICQodGhpcy5fZWxlbWVudCkub2ZmKEVWRU5UX0tFWSk7XG5cdCAgICAgICAgdGhpcy5fZWxlbWVudCA9IG51bGw7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8vIHByaXZhdGVcblx0XG5cdCAgICB9LCB7XG5cdCAgICAgIGtleTogJ19hZGRFdmVudExpc3RlbmVycycsXG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiBfYWRkRXZlbnRMaXN0ZW5lcnMoKSB7XG5cdCAgICAgICAgJCh0aGlzLl9lbGVtZW50KS5vbihFdmVudC5DTElDSywgdGhpcy50b2dnbGUpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICAvLyBzdGF0aWNcblx0XG5cdCAgICB9XSwgW3tcblx0ICAgICAga2V5OiAnX2pRdWVyeUludGVyZmFjZScsXG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiBfalF1ZXJ5SW50ZXJmYWNlKGNvbmZpZykge1xuXHQgICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgdmFyIGRhdGEgPSAkKHRoaXMpLmRhdGEoREFUQV9LRVkpO1xuXHRcblx0ICAgICAgICAgIGlmICghZGF0YSkge1xuXHQgICAgICAgICAgICAkKHRoaXMpLmRhdGEoREFUQV9LRVksIGRhdGEgPSBuZXcgRHJvcGRvd24odGhpcykpO1xuXHQgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgIGlmICh0eXBlb2YgY29uZmlnID09PSAnc3RyaW5nJykge1xuXHQgICAgICAgICAgICBpZiAoZGF0YVtjb25maWddID09PSB1bmRlZmluZWQpIHtcblx0ICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIG1ldGhvZCBuYW1lZCBcIicgKyBjb25maWcgKyAnXCInKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBkYXRhW2NvbmZpZ10uY2FsbCh0aGlzKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9KTtcblx0ICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICBrZXk6ICdfY2xlYXJNZW51cycsXG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiBfY2xlYXJNZW51cyhldmVudCkge1xuXHQgICAgICAgIGlmIChldmVudCAmJiBldmVudC53aGljaCA9PT0gUklHSFRfTU9VU0VfQlVUVE9OX1dISUNIKSB7XG5cdCAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICB2YXIgYmFja2Ryb3AgPSAkKFNlbGVjdG9yLkJBQ0tEUk9QKVswXTtcblx0ICAgICAgICBpZiAoYmFja2Ryb3ApIHtcblx0ICAgICAgICAgIGJhY2tkcm9wLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYmFja2Ryb3ApO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgdmFyIHRvZ2dsZXMgPSAkLm1ha2VBcnJheSgkKFNlbGVjdG9yLkRBVEFfVE9HR0xFKSk7XG5cdFxuXHQgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdG9nZ2xlcy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgdmFyIF9wYXJlbnQgPSBEcm9wZG93bi5fZ2V0UGFyZW50RnJvbUVsZW1lbnQodG9nZ2xlc1tpXSk7XG5cdCAgICAgICAgICB2YXIgcmVsYXRlZFRhcmdldCA9IHsgcmVsYXRlZFRhcmdldDogdG9nZ2xlc1tpXSB9O1xuXHRcblx0ICAgICAgICAgIGlmICghJChfcGFyZW50KS5oYXNDbGFzcyhDbGFzc05hbWUuT1BFTikpIHtcblx0ICAgICAgICAgICAgY29udGludWU7XG5cdCAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgaWYgKGV2ZW50ICYmIGV2ZW50LnR5cGUgPT09ICdjbGljaycgJiYgL2lucHV0fHRleHRhcmVhL2kudGVzdChldmVudC50YXJnZXQudGFnTmFtZSkgJiYgJC5jb250YWlucyhfcGFyZW50LCBldmVudC50YXJnZXQpKSB7XG5cdCAgICAgICAgICAgIGNvbnRpbnVlO1xuXHQgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgIHZhciBoaWRlRXZlbnQgPSAkLkV2ZW50KEV2ZW50LkhJREUsIHJlbGF0ZWRUYXJnZXQpO1xuXHQgICAgICAgICAgJChfcGFyZW50KS50cmlnZ2VyKGhpZGVFdmVudCk7XG5cdCAgICAgICAgICBpZiAoaGlkZUV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpKSB7XG5cdCAgICAgICAgICAgIGNvbnRpbnVlO1xuXHQgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgIHRvZ2dsZXNbaV0uc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgJ2ZhbHNlJyk7XG5cdFxuXHQgICAgICAgICAgJChfcGFyZW50KS5yZW1vdmVDbGFzcyhDbGFzc05hbWUuT1BFTikudHJpZ2dlcigkLkV2ZW50KEV2ZW50LkhJRERFTiwgcmVsYXRlZFRhcmdldCkpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICBrZXk6ICdfZ2V0UGFyZW50RnJvbUVsZW1lbnQnLFxuXHQgICAgICB2YWx1ZTogZnVuY3Rpb24gX2dldFBhcmVudEZyb21FbGVtZW50KGVsZW1lbnQpIHtcblx0ICAgICAgICB2YXIgcGFyZW50ID0gdW5kZWZpbmVkO1xuXHQgICAgICAgIHZhciBzZWxlY3RvciA9IFV0aWwuZ2V0U2VsZWN0b3JGcm9tRWxlbWVudChlbGVtZW50KTtcblx0XG5cdCAgICAgICAgaWYgKHNlbGVjdG9yKSB7XG5cdCAgICAgICAgICBwYXJlbnQgPSAkKHNlbGVjdG9yKVswXTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHJldHVybiBwYXJlbnQgfHwgZWxlbWVudC5wYXJlbnROb2RlO1xuXHQgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgIGtleTogJ19kYXRhQXBpS2V5ZG93bkhhbmRsZXInLFxuXHQgICAgICB2YWx1ZTogZnVuY3Rpb24gX2RhdGFBcGlLZXlkb3duSGFuZGxlcihldmVudCkge1xuXHQgICAgICAgIGlmICghLygzOHw0MHwyN3wzMikvLnRlc3QoZXZlbnQud2hpY2gpIHx8IC9pbnB1dHx0ZXh0YXJlYS9pLnRlc3QoZXZlbnQudGFyZ2V0LnRhZ05hbWUpKSB7XG5cdCAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHQgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcblx0ICAgICAgICBpZiAodGhpcy5kaXNhYmxlZCB8fCAkKHRoaXMpLmhhc0NsYXNzKENsYXNzTmFtZS5ESVNBQkxFRCkpIHtcblx0ICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHZhciBwYXJlbnQgPSBEcm9wZG93bi5fZ2V0UGFyZW50RnJvbUVsZW1lbnQodGhpcyk7XG5cdCAgICAgICAgdmFyIGlzQWN0aXZlID0gJChwYXJlbnQpLmhhc0NsYXNzKENsYXNzTmFtZS5PUEVOKTtcblx0XG5cdCAgICAgICAgaWYgKCFpc0FjdGl2ZSAmJiBldmVudC53aGljaCAhPT0gRVNDQVBFX0tFWUNPREUgfHwgaXNBY3RpdmUgJiYgZXZlbnQud2hpY2ggPT09IEVTQ0FQRV9LRVlDT0RFKSB7XG5cdFxuXHQgICAgICAgICAgaWYgKGV2ZW50LndoaWNoID09PSBFU0NBUEVfS0VZQ09ERSkge1xuXHQgICAgICAgICAgICB2YXIgdG9nZ2xlID0gJChwYXJlbnQpLmZpbmQoU2VsZWN0b3IuREFUQV9UT0dHTEUpWzBdO1xuXHQgICAgICAgICAgICAkKHRvZ2dsZSkudHJpZ2dlcignZm9jdXMnKTtcblx0ICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAkKHRoaXMpLnRyaWdnZXIoJ2NsaWNrJyk7XG5cdCAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICB2YXIgaXRlbXMgPSAkLm1ha2VBcnJheSgkKFNlbGVjdG9yLlZJU0lCTEVfSVRFTVMpKTtcblx0XG5cdCAgICAgICAgaXRlbXMgPSBpdGVtcy5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHtcblx0ICAgICAgICAgIHJldHVybiBpdGVtLm9mZnNldFdpZHRoIHx8IGl0ZW0ub2Zmc2V0SGVpZ2h0O1xuXHQgICAgICAgIH0pO1xuXHRcblx0ICAgICAgICBpZiAoIWl0ZW1zLmxlbmd0aCkge1xuXHQgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgdmFyIGluZGV4ID0gaXRlbXMuaW5kZXhPZihldmVudC50YXJnZXQpO1xuXHRcblx0ICAgICAgICBpZiAoZXZlbnQud2hpY2ggPT09IEFSUk9XX1VQX0tFWUNPREUgJiYgaW5kZXggPiAwKSB7XG5cdCAgICAgICAgICAvLyB1cFxuXHQgICAgICAgICAgaW5kZXgtLTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGlmIChldmVudC53aGljaCA9PT0gQVJST1dfRE9XTl9LRVlDT0RFICYmIGluZGV4IDwgaXRlbXMubGVuZ3RoIC0gMSkge1xuXHQgICAgICAgICAgLy8gZG93blxuXHQgICAgICAgICAgaW5kZXgrKztcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGlmIChpbmRleCA8IDApIHtcblx0ICAgICAgICAgIGluZGV4ID0gMDtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGl0ZW1zW2luZGV4XS5mb2N1cygpO1xuXHQgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgIGtleTogJ1ZFUlNJT04nLFxuXHQgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0ICAgICAgICByZXR1cm4gVkVSU0lPTjtcblx0ICAgICAgfVxuXHQgICAgfV0pO1xuXHRcblx0ICAgIHJldHVybiBEcm9wZG93bjtcblx0ICB9KSgpO1xuXHRcblx0ICAkKGRvY3VtZW50KS5vbihFdmVudC5LRVlET1dOX0RBVEFfQVBJLCBTZWxlY3Rvci5EQVRBX1RPR0dMRSwgRHJvcGRvd24uX2RhdGFBcGlLZXlkb3duSGFuZGxlcikub24oRXZlbnQuS0VZRE9XTl9EQVRBX0FQSSwgU2VsZWN0b3IuUk9MRV9NRU5VLCBEcm9wZG93bi5fZGF0YUFwaUtleWRvd25IYW5kbGVyKS5vbihFdmVudC5LRVlET1dOX0RBVEFfQVBJLCBTZWxlY3Rvci5ST0xFX0xJU1RCT1gsIERyb3Bkb3duLl9kYXRhQXBpS2V5ZG93bkhhbmRsZXIpLm9uKEV2ZW50LkNMSUNLX0RBVEFfQVBJLCBEcm9wZG93bi5fY2xlYXJNZW51cykub24oRXZlbnQuQ0xJQ0tfREFUQV9BUEksIFNlbGVjdG9yLkRBVEFfVE9HR0xFLCBEcm9wZG93bi5wcm90b3R5cGUudG9nZ2xlKS5vbihFdmVudC5DTElDS19EQVRBX0FQSSwgU2VsZWN0b3IuRk9STV9DSElMRCwgZnVuY3Rpb24gKGUpIHtcblx0ICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdCAgfSk7XG5cdFxuXHQgIC8qKlxuXHQgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQgICAqIGpRdWVyeVxuXHQgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQgICAqL1xuXHRcblx0ICAkLmZuW05BTUVdID0gRHJvcGRvd24uX2pRdWVyeUludGVyZmFjZTtcblx0ICAkLmZuW05BTUVdLkNvbnN0cnVjdG9yID0gRHJvcGRvd247XG5cdCAgJC5mbltOQU1FXS5ub0NvbmZsaWN0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgJC5mbltOQU1FXSA9IEpRVUVSWV9OT19DT05GTElDVDtcblx0ICAgIHJldHVybiBEcm9wZG93bi5falF1ZXJ5SW50ZXJmYWNlO1xuXHQgIH07XG5cdFxuXHQgIHJldHVybiBEcm9wZG93bjtcblx0fSkoalF1ZXJ5KTtcblx0XG5cdC8qKlxuXHQgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQgKiBCb290c3RyYXAgKHY0LjAuMC1hbHBoYS40KTogbW9kYWwuanNcblx0ICogTGljZW5zZWQgdW5kZXIgTUlUIChodHRwczovL2dpdGh1Yi5jb20vdHdicy9ib290c3RyYXAvYmxvYi9tYXN0ZXIvTElDRU5TRSlcblx0ICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0ICovXG5cdFxuXHR2YXIgTW9kYWwgPSAoZnVuY3Rpb24gKCQpIHtcblx0XG5cdCAgLyoqXG5cdCAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCAgICogQ29uc3RhbnRzXG5cdCAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCAgICovXG5cdFxuXHQgIHZhciBOQU1FID0gJ21vZGFsJztcblx0ICB2YXIgVkVSU0lPTiA9ICc0LjAuMC1hbHBoYS40Jztcblx0ICB2YXIgREFUQV9LRVkgPSAnYnMubW9kYWwnO1xuXHQgIHZhciBFVkVOVF9LRVkgPSAnLicgKyBEQVRBX0tFWTtcblx0ICB2YXIgREFUQV9BUElfS0VZID0gJy5kYXRhLWFwaSc7XG5cdCAgdmFyIEpRVUVSWV9OT19DT05GTElDVCA9ICQuZm5bTkFNRV07XG5cdCAgdmFyIFRSQU5TSVRJT05fRFVSQVRJT04gPSAzMDA7XG5cdCAgdmFyIEJBQ0tEUk9QX1RSQU5TSVRJT05fRFVSQVRJT04gPSAxNTA7XG5cdCAgdmFyIEVTQ0FQRV9LRVlDT0RFID0gMjc7IC8vIEtleWJvYXJkRXZlbnQud2hpY2ggdmFsdWUgZm9yIEVzY2FwZSAoRXNjKSBrZXlcblx0XG5cdCAgdmFyIERlZmF1bHQgPSB7XG5cdCAgICBiYWNrZHJvcDogdHJ1ZSxcblx0ICAgIGtleWJvYXJkOiB0cnVlLFxuXHQgICAgZm9jdXM6IHRydWUsXG5cdCAgICBzaG93OiB0cnVlXG5cdCAgfTtcblx0XG5cdCAgdmFyIERlZmF1bHRUeXBlID0ge1xuXHQgICAgYmFja2Ryb3A6ICcoYm9vbGVhbnxzdHJpbmcpJyxcblx0ICAgIGtleWJvYXJkOiAnYm9vbGVhbicsXG5cdCAgICBmb2N1czogJ2Jvb2xlYW4nLFxuXHQgICAgc2hvdzogJ2Jvb2xlYW4nXG5cdCAgfTtcblx0XG5cdCAgdmFyIEV2ZW50ID0ge1xuXHQgICAgSElERTogJ2hpZGUnICsgRVZFTlRfS0VZLFxuXHQgICAgSElEREVOOiAnaGlkZGVuJyArIEVWRU5UX0tFWSxcblx0ICAgIFNIT1c6ICdzaG93JyArIEVWRU5UX0tFWSxcblx0ICAgIFNIT1dOOiAnc2hvd24nICsgRVZFTlRfS0VZLFxuXHQgICAgRk9DVVNJTjogJ2ZvY3VzaW4nICsgRVZFTlRfS0VZLFxuXHQgICAgUkVTSVpFOiAncmVzaXplJyArIEVWRU5UX0tFWSxcblx0ICAgIENMSUNLX0RJU01JU1M6ICdjbGljay5kaXNtaXNzJyArIEVWRU5UX0tFWSxcblx0ICAgIEtFWURPV05fRElTTUlTUzogJ2tleWRvd24uZGlzbWlzcycgKyBFVkVOVF9LRVksXG5cdCAgICBNT1VTRVVQX0RJU01JU1M6ICdtb3VzZXVwLmRpc21pc3MnICsgRVZFTlRfS0VZLFxuXHQgICAgTU9VU0VET1dOX0RJU01JU1M6ICdtb3VzZWRvd24uZGlzbWlzcycgKyBFVkVOVF9LRVksXG5cdCAgICBDTElDS19EQVRBX0FQSTogJ2NsaWNrJyArIEVWRU5UX0tFWSArIERBVEFfQVBJX0tFWVxuXHQgIH07XG5cdFxuXHQgIHZhciBDbGFzc05hbWUgPSB7XG5cdCAgICBTQ1JPTExCQVJfTUVBU1VSRVI6ICdtb2RhbC1zY3JvbGxiYXItbWVhc3VyZScsXG5cdCAgICBCQUNLRFJPUDogJ21vZGFsLWJhY2tkcm9wJyxcblx0ICAgIE9QRU46ICdtb2RhbC1vcGVuJyxcblx0ICAgIEZBREU6ICdmYWRlJyxcblx0ICAgIElOOiAnaW4nXG5cdCAgfTtcblx0XG5cdCAgdmFyIFNlbGVjdG9yID0ge1xuXHQgICAgRElBTE9HOiAnLm1vZGFsLWRpYWxvZycsXG5cdCAgICBEQVRBX1RPR0dMRTogJ1tkYXRhLXRvZ2dsZT1cIm1vZGFsXCJdJyxcblx0ICAgIERBVEFfRElTTUlTUzogJ1tkYXRhLWRpc21pc3M9XCJtb2RhbFwiXScsXG5cdCAgICBGSVhFRF9DT05URU5UOiAnLm5hdmJhci1maXhlZC10b3AsIC5uYXZiYXItZml4ZWQtYm90dG9tLCAuaXMtZml4ZWQnXG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCAgICogQ2xhc3MgRGVmaW5pdGlvblxuXHQgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQgICAqL1xuXHRcblx0ICB2YXIgTW9kYWwgPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gTW9kYWwoZWxlbWVudCwgY29uZmlnKSB7XG5cdCAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBNb2RhbCk7XG5cdFxuXHQgICAgICB0aGlzLl9jb25maWcgPSB0aGlzLl9nZXRDb25maWcoY29uZmlnKTtcblx0ICAgICAgdGhpcy5fZWxlbWVudCA9IGVsZW1lbnQ7XG5cdCAgICAgIHRoaXMuX2RpYWxvZyA9ICQoZWxlbWVudCkuZmluZChTZWxlY3Rvci5ESUFMT0cpWzBdO1xuXHQgICAgICB0aGlzLl9iYWNrZHJvcCA9IG51bGw7XG5cdCAgICAgIHRoaXMuX2lzU2hvd24gPSBmYWxzZTtcblx0ICAgICAgdGhpcy5faXNCb2R5T3ZlcmZsb3dpbmcgPSBmYWxzZTtcblx0ICAgICAgdGhpcy5faWdub3JlQmFja2Ryb3BDbGljayA9IGZhbHNlO1xuXHQgICAgICB0aGlzLl9vcmlnaW5hbEJvZHlQYWRkaW5nID0gMDtcblx0ICAgICAgdGhpcy5fc2Nyb2xsYmFyV2lkdGggPSAwO1xuXHQgICAgfVxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCAgICAgKiBEYXRhIEFwaSBpbXBsZW1lbnRhdGlvblxuXHQgICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCAgICAgKi9cblx0XG5cdCAgICAvLyBnZXR0ZXJzXG5cdFxuXHQgICAgX2NyZWF0ZUNsYXNzKE1vZGFsLCBbe1xuXHQgICAgICBrZXk6ICd0b2dnbGUnLFxuXHRcblx0ICAgICAgLy8gcHVibGljXG5cdFxuXHQgICAgICB2YWx1ZTogZnVuY3Rpb24gdG9nZ2xlKHJlbGF0ZWRUYXJnZXQpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5faXNTaG93biA/IHRoaXMuaGlkZSgpIDogdGhpcy5zaG93KHJlbGF0ZWRUYXJnZXQpO1xuXHQgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgIGtleTogJ3Nob3cnLFxuXHQgICAgICB2YWx1ZTogZnVuY3Rpb24gc2hvdyhyZWxhdGVkVGFyZ2V0KSB7XG5cdCAgICAgICAgdmFyIF90aGlzNyA9IHRoaXM7XG5cdFxuXHQgICAgICAgIHZhciBzaG93RXZlbnQgPSAkLkV2ZW50KEV2ZW50LlNIT1csIHtcblx0ICAgICAgICAgIHJlbGF0ZWRUYXJnZXQ6IHJlbGF0ZWRUYXJnZXRcblx0ICAgICAgICB9KTtcblx0XG5cdCAgICAgICAgJCh0aGlzLl9lbGVtZW50KS50cmlnZ2VyKHNob3dFdmVudCk7XG5cdFxuXHQgICAgICAgIGlmICh0aGlzLl9pc1Nob3duIHx8IHNob3dFdmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSkge1xuXHQgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgdGhpcy5faXNTaG93biA9IHRydWU7XG5cdFxuXHQgICAgICAgIHRoaXMuX2NoZWNrU2Nyb2xsYmFyKCk7XG5cdCAgICAgICAgdGhpcy5fc2V0U2Nyb2xsYmFyKCk7XG5cdFxuXHQgICAgICAgICQoZG9jdW1lbnQuYm9keSkuYWRkQ2xhc3MoQ2xhc3NOYW1lLk9QRU4pO1xuXHRcblx0ICAgICAgICB0aGlzLl9zZXRFc2NhcGVFdmVudCgpO1xuXHQgICAgICAgIHRoaXMuX3NldFJlc2l6ZUV2ZW50KCk7XG5cdFxuXHQgICAgICAgICQodGhpcy5fZWxlbWVudCkub24oRXZlbnQuQ0xJQ0tfRElTTUlTUywgU2VsZWN0b3IuREFUQV9ESVNNSVNTLCAkLnByb3h5KHRoaXMuaGlkZSwgdGhpcykpO1xuXHRcblx0ICAgICAgICAkKHRoaXMuX2RpYWxvZykub24oRXZlbnQuTU9VU0VET1dOX0RJU01JU1MsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICQoX3RoaXM3Ll9lbGVtZW50KS5vbmUoRXZlbnQuTU9VU0VVUF9ESVNNSVNTLCBmdW5jdGlvbiAoZXZlbnQpIHtcblx0ICAgICAgICAgICAgaWYgKCQoZXZlbnQudGFyZ2V0KS5pcyhfdGhpczcuX2VsZW1lbnQpKSB7XG5cdCAgICAgICAgICAgICAgX3RoaXM3Ll9pZ25vcmVCYWNrZHJvcENsaWNrID0gdHJ1ZTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfSk7XG5cdCAgICAgICAgfSk7XG5cdFxuXHQgICAgICAgIHRoaXMuX3Nob3dCYWNrZHJvcCgkLnByb3h5KHRoaXMuX3Nob3dFbGVtZW50LCB0aGlzLCByZWxhdGVkVGFyZ2V0KSk7XG5cdCAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAga2V5OiAnaGlkZScsXG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiBoaWRlKGV2ZW50KSB7XG5cdCAgICAgICAgaWYgKGV2ZW50KSB7XG5cdCAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgdmFyIGhpZGVFdmVudCA9ICQuRXZlbnQoRXZlbnQuSElERSk7XG5cdFxuXHQgICAgICAgICQodGhpcy5fZWxlbWVudCkudHJpZ2dlcihoaWRlRXZlbnQpO1xuXHRcblx0ICAgICAgICBpZiAoIXRoaXMuX2lzU2hvd24gfHwgaGlkZUV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpKSB7XG5cdCAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICB0aGlzLl9pc1Nob3duID0gZmFsc2U7XG5cdFxuXHQgICAgICAgIHRoaXMuX3NldEVzY2FwZUV2ZW50KCk7XG5cdCAgICAgICAgdGhpcy5fc2V0UmVzaXplRXZlbnQoKTtcblx0XG5cdCAgICAgICAgJChkb2N1bWVudCkub2ZmKEV2ZW50LkZPQ1VTSU4pO1xuXHRcblx0ICAgICAgICAkKHRoaXMuX2VsZW1lbnQpLnJlbW92ZUNsYXNzKENsYXNzTmFtZS5JTik7XG5cdFxuXHQgICAgICAgICQodGhpcy5fZWxlbWVudCkub2ZmKEV2ZW50LkNMSUNLX0RJU01JU1MpO1xuXHQgICAgICAgICQodGhpcy5fZGlhbG9nKS5vZmYoRXZlbnQuTU9VU0VET1dOX0RJU01JU1MpO1xuXHRcblx0ICAgICAgICBpZiAoVXRpbC5zdXBwb3J0c1RyYW5zaXRpb25FbmQoKSAmJiAkKHRoaXMuX2VsZW1lbnQpLmhhc0NsYXNzKENsYXNzTmFtZS5GQURFKSkge1xuXHRcblx0ICAgICAgICAgICQodGhpcy5fZWxlbWVudCkub25lKFV0aWwuVFJBTlNJVElPTl9FTkQsICQucHJveHkodGhpcy5faGlkZU1vZGFsLCB0aGlzKSkuZW11bGF0ZVRyYW5zaXRpb25FbmQoVFJBTlNJVElPTl9EVVJBVElPTik7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHRoaXMuX2hpZGVNb2RhbCgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICBrZXk6ICdkaXNwb3NlJyxcblx0ICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRpc3Bvc2UoKSB7XG5cdCAgICAgICAgJC5yZW1vdmVEYXRhKHRoaXMuX2VsZW1lbnQsIERBVEFfS0VZKTtcblx0XG5cdCAgICAgICAgJCh3aW5kb3cpLm9mZihFVkVOVF9LRVkpO1xuXHQgICAgICAgICQoZG9jdW1lbnQpLm9mZihFVkVOVF9LRVkpO1xuXHQgICAgICAgICQodGhpcy5fZWxlbWVudCkub2ZmKEVWRU5UX0tFWSk7XG5cdCAgICAgICAgJCh0aGlzLl9iYWNrZHJvcCkub2ZmKEVWRU5UX0tFWSk7XG5cdFxuXHQgICAgICAgIHRoaXMuX2NvbmZpZyA9IG51bGw7XG5cdCAgICAgICAgdGhpcy5fZWxlbWVudCA9IG51bGw7XG5cdCAgICAgICAgdGhpcy5fZGlhbG9nID0gbnVsbDtcblx0ICAgICAgICB0aGlzLl9iYWNrZHJvcCA9IG51bGw7XG5cdCAgICAgICAgdGhpcy5faXNTaG93biA9IG51bGw7XG5cdCAgICAgICAgdGhpcy5faXNCb2R5T3ZlcmZsb3dpbmcgPSBudWxsO1xuXHQgICAgICAgIHRoaXMuX2lnbm9yZUJhY2tkcm9wQ2xpY2sgPSBudWxsO1xuXHQgICAgICAgIHRoaXMuX29yaWdpbmFsQm9keVBhZGRpbmcgPSBudWxsO1xuXHQgICAgICAgIHRoaXMuX3Njcm9sbGJhcldpZHRoID0gbnVsbDtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgLy8gcHJpdmF0ZVxuXHRcblx0ICAgIH0sIHtcblx0ICAgICAga2V5OiAnX2dldENvbmZpZycsXG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiBfZ2V0Q29uZmlnKGNvbmZpZykge1xuXHQgICAgICAgIGNvbmZpZyA9ICQuZXh0ZW5kKHt9LCBEZWZhdWx0LCBjb25maWcpO1xuXHQgICAgICAgIFV0aWwudHlwZUNoZWNrQ29uZmlnKE5BTUUsIGNvbmZpZywgRGVmYXVsdFR5cGUpO1xuXHQgICAgICAgIHJldHVybiBjb25maWc7XG5cdCAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAga2V5OiAnX3Nob3dFbGVtZW50Jyxcblx0ICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9zaG93RWxlbWVudChyZWxhdGVkVGFyZ2V0KSB7XG5cdCAgICAgICAgdmFyIF90aGlzOCA9IHRoaXM7XG5cdFxuXHQgICAgICAgIHZhciB0cmFuc2l0aW9uID0gVXRpbC5zdXBwb3J0c1RyYW5zaXRpb25FbmQoKSAmJiAkKHRoaXMuX2VsZW1lbnQpLmhhc0NsYXNzKENsYXNzTmFtZS5GQURFKTtcblx0XG5cdCAgICAgICAgaWYgKCF0aGlzLl9lbGVtZW50LnBhcmVudE5vZGUgfHwgdGhpcy5fZWxlbWVudC5wYXJlbnROb2RlLm5vZGVUeXBlICE9PSBOb2RlLkVMRU1FTlRfTk9ERSkge1xuXHQgICAgICAgICAgLy8gZG9uJ3QgbW92ZSBtb2RhbHMgZG9tIHBvc2l0aW9uXG5cdCAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMuX2VsZW1lbnQpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgdGhpcy5fZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcblx0ICAgICAgICB0aGlzLl9lbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nKTtcblx0ICAgICAgICB0aGlzLl9lbGVtZW50LnNjcm9sbFRvcCA9IDA7XG5cdFxuXHQgICAgICAgIGlmICh0cmFuc2l0aW9uKSB7XG5cdCAgICAgICAgICBVdGlsLnJlZmxvdyh0aGlzLl9lbGVtZW50KTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgICQodGhpcy5fZWxlbWVudCkuYWRkQ2xhc3MoQ2xhc3NOYW1lLklOKTtcblx0XG5cdCAgICAgICAgaWYgKHRoaXMuX2NvbmZpZy5mb2N1cykge1xuXHQgICAgICAgICAgdGhpcy5fZW5mb3JjZUZvY3VzKCk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICB2YXIgc2hvd25FdmVudCA9ICQuRXZlbnQoRXZlbnQuU0hPV04sIHtcblx0ICAgICAgICAgIHJlbGF0ZWRUYXJnZXQ6IHJlbGF0ZWRUYXJnZXRcblx0ICAgICAgICB9KTtcblx0XG5cdCAgICAgICAgdmFyIHRyYW5zaXRpb25Db21wbGV0ZSA9IGZ1bmN0aW9uIHRyYW5zaXRpb25Db21wbGV0ZSgpIHtcblx0ICAgICAgICAgIGlmIChfdGhpczguX2NvbmZpZy5mb2N1cykge1xuXHQgICAgICAgICAgICBfdGhpczguX2VsZW1lbnQuZm9jdXMoKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgICQoX3RoaXM4Ll9lbGVtZW50KS50cmlnZ2VyKHNob3duRXZlbnQpO1xuXHQgICAgICAgIH07XG5cdFxuXHQgICAgICAgIGlmICh0cmFuc2l0aW9uKSB7XG5cdCAgICAgICAgICAkKHRoaXMuX2RpYWxvZykub25lKFV0aWwuVFJBTlNJVElPTl9FTkQsIHRyYW5zaXRpb25Db21wbGV0ZSkuZW11bGF0ZVRyYW5zaXRpb25FbmQoVFJBTlNJVElPTl9EVVJBVElPTik7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHRyYW5zaXRpb25Db21wbGV0ZSgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICBrZXk6ICdfZW5mb3JjZUZvY3VzJyxcblx0ICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9lbmZvcmNlRm9jdXMoKSB7XG5cdCAgICAgICAgdmFyIF90aGlzOSA9IHRoaXM7XG5cdFxuXHQgICAgICAgICQoZG9jdW1lbnQpLm9mZihFdmVudC5GT0NVU0lOKSAvLyBndWFyZCBhZ2FpbnN0IGluZmluaXRlIGZvY3VzIGxvb3Bcblx0ICAgICAgICAub24oRXZlbnQuRk9DVVNJTiwgZnVuY3Rpb24gKGV2ZW50KSB7XG5cdCAgICAgICAgICBpZiAoZG9jdW1lbnQgIT09IGV2ZW50LnRhcmdldCAmJiBfdGhpczkuX2VsZW1lbnQgIT09IGV2ZW50LnRhcmdldCAmJiAhJChfdGhpczkuX2VsZW1lbnQpLmhhcyhldmVudC50YXJnZXQpLmxlbmd0aCkge1xuXHQgICAgICAgICAgICBfdGhpczkuX2VsZW1lbnQuZm9jdXMoKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9KTtcblx0ICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICBrZXk6ICdfc2V0RXNjYXBlRXZlbnQnLFxuXHQgICAgICB2YWx1ZTogZnVuY3Rpb24gX3NldEVzY2FwZUV2ZW50KCkge1xuXHQgICAgICAgIHZhciBfdGhpczEwID0gdGhpcztcblx0XG5cdCAgICAgICAgaWYgKHRoaXMuX2lzU2hvd24gJiYgdGhpcy5fY29uZmlnLmtleWJvYXJkKSB7XG5cdCAgICAgICAgICAkKHRoaXMuX2VsZW1lbnQpLm9uKEV2ZW50LktFWURPV05fRElTTUlTUywgZnVuY3Rpb24gKGV2ZW50KSB7XG5cdCAgICAgICAgICAgIGlmIChldmVudC53aGljaCA9PT0gRVNDQVBFX0tFWUNPREUpIHtcblx0ICAgICAgICAgICAgICBfdGhpczEwLmhpZGUoKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfSk7XG5cdCAgICAgICAgfSBlbHNlIGlmICghdGhpcy5faXNTaG93bikge1xuXHQgICAgICAgICAgJCh0aGlzLl9lbGVtZW50KS5vZmYoRXZlbnQuS0VZRE9XTl9ESVNNSVNTKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAga2V5OiAnX3NldFJlc2l6ZUV2ZW50Jyxcblx0ICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9zZXRSZXNpemVFdmVudCgpIHtcblx0ICAgICAgICBpZiAodGhpcy5faXNTaG93bikge1xuXHQgICAgICAgICAgJCh3aW5kb3cpLm9uKEV2ZW50LlJFU0laRSwgJC5wcm94eSh0aGlzLl9oYW5kbGVVcGRhdGUsIHRoaXMpKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgJCh3aW5kb3cpLm9mZihFdmVudC5SRVNJWkUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICBrZXk6ICdfaGlkZU1vZGFsJyxcblx0ICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oaWRlTW9kYWwoKSB7XG5cdCAgICAgICAgdmFyIF90aGlzMTEgPSB0aGlzO1xuXHRcblx0ICAgICAgICB0aGlzLl9lbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cdCAgICAgICAgdGhpcy5fZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJywgJ3RydWUnKTtcblx0ICAgICAgICB0aGlzLl9zaG93QmFja2Ryb3AoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgJChkb2N1bWVudC5ib2R5KS5yZW1vdmVDbGFzcyhDbGFzc05hbWUuT1BFTik7XG5cdCAgICAgICAgICBfdGhpczExLl9yZXNldEFkanVzdG1lbnRzKCk7XG5cdCAgICAgICAgICBfdGhpczExLl9yZXNldFNjcm9sbGJhcigpO1xuXHQgICAgICAgICAgJChfdGhpczExLl9lbGVtZW50KS50cmlnZ2VyKEV2ZW50LkhJRERFTik7XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAga2V5OiAnX3JlbW92ZUJhY2tkcm9wJyxcblx0ICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9yZW1vdmVCYWNrZHJvcCgpIHtcblx0ICAgICAgICBpZiAodGhpcy5fYmFja2Ryb3ApIHtcblx0ICAgICAgICAgICQodGhpcy5fYmFja2Ryb3ApLnJlbW92ZSgpO1xuXHQgICAgICAgICAgdGhpcy5fYmFja2Ryb3AgPSBudWxsO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICBrZXk6ICdfc2hvd0JhY2tkcm9wJyxcblx0ICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9zaG93QmFja2Ryb3AoY2FsbGJhY2spIHtcblx0ICAgICAgICB2YXIgX3RoaXMxMiA9IHRoaXM7XG5cdFxuXHQgICAgICAgIHZhciBhbmltYXRlID0gJCh0aGlzLl9lbGVtZW50KS5oYXNDbGFzcyhDbGFzc05hbWUuRkFERSkgPyBDbGFzc05hbWUuRkFERSA6ICcnO1xuXHRcblx0ICAgICAgICBpZiAodGhpcy5faXNTaG93biAmJiB0aGlzLl9jb25maWcuYmFja2Ryb3ApIHtcblx0ICAgICAgICAgIHZhciBkb0FuaW1hdGUgPSBVdGlsLnN1cHBvcnRzVHJhbnNpdGlvbkVuZCgpICYmIGFuaW1hdGU7XG5cdFxuXHQgICAgICAgICAgdGhpcy5fYmFja2Ryb3AgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0ICAgICAgICAgIHRoaXMuX2JhY2tkcm9wLmNsYXNzTmFtZSA9IENsYXNzTmFtZS5CQUNLRFJPUDtcblx0XG5cdCAgICAgICAgICBpZiAoYW5pbWF0ZSkge1xuXHQgICAgICAgICAgICAkKHRoaXMuX2JhY2tkcm9wKS5hZGRDbGFzcyhhbmltYXRlKTtcblx0ICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAkKHRoaXMuX2JhY2tkcm9wKS5hcHBlbmRUbyhkb2N1bWVudC5ib2R5KTtcblx0XG5cdCAgICAgICAgICAkKHRoaXMuX2VsZW1lbnQpLm9uKEV2ZW50LkNMSUNLX0RJU01JU1MsIGZ1bmN0aW9uIChldmVudCkge1xuXHQgICAgICAgICAgICBpZiAoX3RoaXMxMi5faWdub3JlQmFja2Ryb3BDbGljaykge1xuXHQgICAgICAgICAgICAgIF90aGlzMTIuX2lnbm9yZUJhY2tkcm9wQ2xpY2sgPSBmYWxzZTtcblx0ICAgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgaWYgKGV2ZW50LnRhcmdldCAhPT0gZXZlbnQuY3VycmVudFRhcmdldCkge1xuXHQgICAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBpZiAoX3RoaXMxMi5fY29uZmlnLmJhY2tkcm9wID09PSAnc3RhdGljJykge1xuXHQgICAgICAgICAgICAgIF90aGlzMTIuX2VsZW1lbnQuZm9jdXMoKTtcblx0ICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICBfdGhpczEyLmhpZGUoKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfSk7XG5cdFxuXHQgICAgICAgICAgaWYgKGRvQW5pbWF0ZSkge1xuXHQgICAgICAgICAgICBVdGlsLnJlZmxvdyh0aGlzLl9iYWNrZHJvcCk7XG5cdCAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgJCh0aGlzLl9iYWNrZHJvcCkuYWRkQ2xhc3MoQ2xhc3NOYW1lLklOKTtcblx0XG5cdCAgICAgICAgICBpZiAoIWNhbGxiYWNrKSB7XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICBpZiAoIWRvQW5pbWF0ZSkge1xuXHQgICAgICAgICAgICBjYWxsYmFjaygpO1xuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgJCh0aGlzLl9iYWNrZHJvcCkub25lKFV0aWwuVFJBTlNJVElPTl9FTkQsIGNhbGxiYWNrKS5lbXVsYXRlVHJhbnNpdGlvbkVuZChCQUNLRFJPUF9UUkFOU0lUSU9OX0RVUkFUSU9OKTtcblx0ICAgICAgICB9IGVsc2UgaWYgKCF0aGlzLl9pc1Nob3duICYmIHRoaXMuX2JhY2tkcm9wKSB7XG5cdCAgICAgICAgICAkKHRoaXMuX2JhY2tkcm9wKS5yZW1vdmVDbGFzcyhDbGFzc05hbWUuSU4pO1xuXHRcblx0ICAgICAgICAgIHZhciBjYWxsYmFja1JlbW92ZSA9IGZ1bmN0aW9uIGNhbGxiYWNrUmVtb3ZlKCkge1xuXHQgICAgICAgICAgICBfdGhpczEyLl9yZW1vdmVCYWNrZHJvcCgpO1xuXHQgICAgICAgICAgICBpZiAoY2FsbGJhY2spIHtcblx0ICAgICAgICAgICAgICBjYWxsYmFjaygpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9O1xuXHRcblx0ICAgICAgICAgIGlmIChVdGlsLnN1cHBvcnRzVHJhbnNpdGlvbkVuZCgpICYmICQodGhpcy5fZWxlbWVudCkuaGFzQ2xhc3MoQ2xhc3NOYW1lLkZBREUpKSB7XG5cdCAgICAgICAgICAgICQodGhpcy5fYmFja2Ryb3ApLm9uZShVdGlsLlRSQU5TSVRJT05fRU5ELCBjYWxsYmFja1JlbW92ZSkuZW11bGF0ZVRyYW5zaXRpb25FbmQoQkFDS0RST1BfVFJBTlNJVElPTl9EVVJBVElPTik7XG5cdCAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBjYWxsYmFja1JlbW92ZSgpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0gZWxzZSBpZiAoY2FsbGJhY2spIHtcblx0ICAgICAgICAgIGNhbGxiYWNrKCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdFxuXHQgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCAgICAgIC8vIHRoZSBmb2xsb3dpbmcgbWV0aG9kcyBhcmUgdXNlZCB0byBoYW5kbGUgb3ZlcmZsb3dpbmcgbW9kYWxzXG5cdCAgICAgIC8vIHRvZG8gKGZhdCk6IHRoZXNlIHNob3VsZCBwcm9iYWJseSBiZSByZWZhY3RvcmVkIG91dCBvZiBtb2RhbC5qc1xuXHQgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdFxuXHQgICAgfSwge1xuXHQgICAgICBrZXk6ICdfaGFuZGxlVXBkYXRlJyxcblx0ICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVVcGRhdGUoKSB7XG5cdCAgICAgICAgdGhpcy5fYWRqdXN0RGlhbG9nKCk7XG5cdCAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAga2V5OiAnX2FkanVzdERpYWxvZycsXG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiBfYWRqdXN0RGlhbG9nKCkge1xuXHQgICAgICAgIHZhciBpc01vZGFsT3ZlcmZsb3dpbmcgPSB0aGlzLl9lbGVtZW50LnNjcm9sbEhlaWdodCA+IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQ7XG5cdFxuXHQgICAgICAgIGlmICghdGhpcy5faXNCb2R5T3ZlcmZsb3dpbmcgJiYgaXNNb2RhbE92ZXJmbG93aW5nKSB7XG5cdCAgICAgICAgICB0aGlzLl9lbGVtZW50LnN0eWxlLnBhZGRpbmdMZWZ0ID0gdGhpcy5fc2Nyb2xsYmFyV2lkdGggKyAncHgnO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgaWYgKHRoaXMuX2lzQm9keU92ZXJmbG93aW5nICYmICFpc01vZGFsT3ZlcmZsb3dpbmcpIHtcblx0ICAgICAgICAgIHRoaXMuX2VsZW1lbnQuc3R5bGUucGFkZGluZ1JpZ2h0ID0gdGhpcy5fc2Nyb2xsYmFyV2lkdGggKyAncHgnO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICBrZXk6ICdfcmVzZXRBZGp1c3RtZW50cycsXG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVzZXRBZGp1c3RtZW50cygpIHtcblx0ICAgICAgICB0aGlzLl9lbGVtZW50LnN0eWxlLnBhZGRpbmdMZWZ0ID0gJyc7XG5cdCAgICAgICAgdGhpcy5fZWxlbWVudC5zdHlsZS5wYWRkaW5nUmlnaHQgPSAnJztcblx0ICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICBrZXk6ICdfY2hlY2tTY3JvbGxiYXInLFxuXHQgICAgICB2YWx1ZTogZnVuY3Rpb24gX2NoZWNrU2Nyb2xsYmFyKCkge1xuXHQgICAgICAgIHRoaXMuX2lzQm9keU92ZXJmbG93aW5nID0gZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aCA8IHdpbmRvdy5pbm5lcldpZHRoO1xuXHQgICAgICAgIHRoaXMuX3Njcm9sbGJhcldpZHRoID0gdGhpcy5fZ2V0U2Nyb2xsYmFyV2lkdGgoKTtcblx0ICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICBrZXk6ICdfc2V0U2Nyb2xsYmFyJyxcblx0ICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9zZXRTY3JvbGxiYXIoKSB7XG5cdCAgICAgICAgdmFyIGJvZHlQYWRkaW5nID0gcGFyc2VJbnQoJChTZWxlY3Rvci5GSVhFRF9DT05URU5UKS5jc3MoJ3BhZGRpbmctcmlnaHQnKSB8fCAwLCAxMCk7XG5cdFxuXHQgICAgICAgIHRoaXMuX29yaWdpbmFsQm9keVBhZGRpbmcgPSBkb2N1bWVudC5ib2R5LnN0eWxlLnBhZGRpbmdSaWdodCB8fCAnJztcblx0XG5cdCAgICAgICAgaWYgKHRoaXMuX2lzQm9keU92ZXJmbG93aW5nKSB7XG5cdCAgICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLnBhZGRpbmdSaWdodCA9IGJvZHlQYWRkaW5nICsgdGhpcy5fc2Nyb2xsYmFyV2lkdGggKyAncHgnO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICBrZXk6ICdfcmVzZXRTY3JvbGxiYXInLFxuXHQgICAgICB2YWx1ZTogZnVuY3Rpb24gX3Jlc2V0U2Nyb2xsYmFyKCkge1xuXHQgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUucGFkZGluZ1JpZ2h0ID0gdGhpcy5fb3JpZ2luYWxCb2R5UGFkZGluZztcblx0ICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICBrZXk6ICdfZ2V0U2Nyb2xsYmFyV2lkdGgnLFxuXHQgICAgICB2YWx1ZTogZnVuY3Rpb24gX2dldFNjcm9sbGJhcldpZHRoKCkge1xuXHQgICAgICAgIC8vIHRoeCBkLndhbHNoXG5cdCAgICAgICAgdmFyIHNjcm9sbERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHQgICAgICAgIHNjcm9sbERpdi5jbGFzc05hbWUgPSBDbGFzc05hbWUuU0NST0xMQkFSX01FQVNVUkVSO1xuXHQgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoc2Nyb2xsRGl2KTtcblx0ICAgICAgICB2YXIgc2Nyb2xsYmFyV2lkdGggPSBzY3JvbGxEaXYub2Zmc2V0V2lkdGggLSBzY3JvbGxEaXYuY2xpZW50V2lkdGg7XG5cdCAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChzY3JvbGxEaXYpO1xuXHQgICAgICAgIHJldHVybiBzY3JvbGxiYXJXaWR0aDtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgLy8gc3RhdGljXG5cdFxuXHQgICAgfV0sIFt7XG5cdCAgICAgIGtleTogJ19qUXVlcnlJbnRlcmZhY2UnLFxuXHQgICAgICB2YWx1ZTogZnVuY3Rpb24gX2pRdWVyeUludGVyZmFjZShjb25maWcsIHJlbGF0ZWRUYXJnZXQpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgIHZhciBkYXRhID0gJCh0aGlzKS5kYXRhKERBVEFfS0VZKTtcblx0ICAgICAgICAgIHZhciBfY29uZmlnID0gJC5leHRlbmQoe30sIE1vZGFsLkRlZmF1bHQsICQodGhpcykuZGF0YSgpLCB0eXBlb2YgY29uZmlnID09PSAnb2JqZWN0JyAmJiBjb25maWcpO1xuXHRcblx0ICAgICAgICAgIGlmICghZGF0YSkge1xuXHQgICAgICAgICAgICBkYXRhID0gbmV3IE1vZGFsKHRoaXMsIF9jb25maWcpO1xuXHQgICAgICAgICAgICAkKHRoaXMpLmRhdGEoREFUQV9LRVksIGRhdGEpO1xuXHQgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgIGlmICh0eXBlb2YgY29uZmlnID09PSAnc3RyaW5nJykge1xuXHQgICAgICAgICAgICBpZiAoZGF0YVtjb25maWddID09PSB1bmRlZmluZWQpIHtcblx0ICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIG1ldGhvZCBuYW1lZCBcIicgKyBjb25maWcgKyAnXCInKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBkYXRhW2NvbmZpZ10ocmVsYXRlZFRhcmdldCk7XG5cdCAgICAgICAgICB9IGVsc2UgaWYgKF9jb25maWcuc2hvdykge1xuXHQgICAgICAgICAgICBkYXRhLnNob3cocmVsYXRlZFRhcmdldCk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAga2V5OiAnVkVSU0lPTicsXG5cdCAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgICAgIHJldHVybiBWRVJTSU9OO1xuXHQgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgIGtleTogJ0RlZmF1bHQnLFxuXHQgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0ICAgICAgICByZXR1cm4gRGVmYXVsdDtcblx0ICAgICAgfVxuXHQgICAgfV0pO1xuXHRcblx0ICAgIHJldHVybiBNb2RhbDtcblx0ICB9KSgpO1xuXHRcblx0ICAkKGRvY3VtZW50KS5vbihFdmVudC5DTElDS19EQVRBX0FQSSwgU2VsZWN0b3IuREFUQV9UT0dHTEUsIGZ1bmN0aW9uIChldmVudCkge1xuXHQgICAgdmFyIF90aGlzMTMgPSB0aGlzO1xuXHRcblx0ICAgIHZhciB0YXJnZXQgPSB1bmRlZmluZWQ7XG5cdCAgICB2YXIgc2VsZWN0b3IgPSBVdGlsLmdldFNlbGVjdG9yRnJvbUVsZW1lbnQodGhpcyk7XG5cdFxuXHQgICAgaWYgKHNlbGVjdG9yKSB7XG5cdCAgICAgIHRhcmdldCA9ICQoc2VsZWN0b3IpWzBdO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBjb25maWcgPSAkKHRhcmdldCkuZGF0YShEQVRBX0tFWSkgPyAndG9nZ2xlJyA6ICQuZXh0ZW5kKHt9LCAkKHRhcmdldCkuZGF0YSgpLCAkKHRoaXMpLmRhdGEoKSk7XG5cdFxuXHQgICAgaWYgKHRoaXMudGFnTmFtZSA9PT0gJ0EnKSB7XG5cdCAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyICR0YXJnZXQgPSAkKHRhcmdldCkub25lKEV2ZW50LlNIT1csIGZ1bmN0aW9uIChzaG93RXZlbnQpIHtcblx0ICAgICAgaWYgKHNob3dFdmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSkge1xuXHQgICAgICAgIC8vIG9ubHkgcmVnaXN0ZXIgZm9jdXMgcmVzdG9yZXIgaWYgbW9kYWwgd2lsbCBhY3R1YWxseSBnZXQgc2hvd25cblx0ICAgICAgICByZXR1cm47XG5cdCAgICAgIH1cblx0XG5cdCAgICAgICR0YXJnZXQub25lKEV2ZW50LkhJRERFTiwgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGlmICgkKF90aGlzMTMpLmlzKCc6dmlzaWJsZScpKSB7XG5cdCAgICAgICAgICBfdGhpczEzLmZvY3VzKCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0ICAgIH0pO1xuXHRcblx0ICAgIE1vZGFsLl9qUXVlcnlJbnRlcmZhY2UuY2FsbCgkKHRhcmdldCksIGNvbmZpZywgdGhpcyk7XG5cdCAgfSk7XG5cdFxuXHQgIC8qKlxuXHQgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQgICAqIGpRdWVyeVxuXHQgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQgICAqL1xuXHRcblx0ICAkLmZuW05BTUVdID0gTW9kYWwuX2pRdWVyeUludGVyZmFjZTtcblx0ICAkLmZuW05BTUVdLkNvbnN0cnVjdG9yID0gTW9kYWw7XG5cdCAgJC5mbltOQU1FXS5ub0NvbmZsaWN0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgJC5mbltOQU1FXSA9IEpRVUVSWV9OT19DT05GTElDVDtcblx0ICAgIHJldHVybiBNb2RhbC5falF1ZXJ5SW50ZXJmYWNlO1xuXHQgIH07XG5cdFxuXHQgIHJldHVybiBNb2RhbDtcblx0fSkoalF1ZXJ5KTtcblx0XG5cdC8qKlxuXHQgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQgKiBCb290c3RyYXAgKHY0LjAuMC1hbHBoYS40KTogc2Nyb2xsc3B5LmpzXG5cdCAqIExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2Jsb2IvbWFzdGVyL0xJQ0VOU0UpXG5cdCAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCAqL1xuXHRcblx0dmFyIFNjcm9sbFNweSA9IChmdW5jdGlvbiAoJCkge1xuXHRcblx0ICAvKipcblx0ICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0ICAgKiBDb25zdGFudHNcblx0ICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0ICAgKi9cblx0XG5cdCAgdmFyIE5BTUUgPSAnc2Nyb2xsc3B5Jztcblx0ICB2YXIgVkVSU0lPTiA9ICc0LjAuMC1hbHBoYS40Jztcblx0ICB2YXIgREFUQV9LRVkgPSAnYnMuc2Nyb2xsc3B5Jztcblx0ICB2YXIgRVZFTlRfS0VZID0gJy4nICsgREFUQV9LRVk7XG5cdCAgdmFyIERBVEFfQVBJX0tFWSA9ICcuZGF0YS1hcGknO1xuXHQgIHZhciBKUVVFUllfTk9fQ09ORkxJQ1QgPSAkLmZuW05BTUVdO1xuXHRcblx0ICB2YXIgRGVmYXVsdCA9IHtcblx0ICAgIG9mZnNldDogMTAsXG5cdCAgICBtZXRob2Q6ICdhdXRvJyxcblx0ICAgIHRhcmdldDogJydcblx0ICB9O1xuXHRcblx0ICB2YXIgRGVmYXVsdFR5cGUgPSB7XG5cdCAgICBvZmZzZXQ6ICdudW1iZXInLFxuXHQgICAgbWV0aG9kOiAnc3RyaW5nJyxcblx0ICAgIHRhcmdldDogJyhzdHJpbmd8ZWxlbWVudCknXG5cdCAgfTtcblx0XG5cdCAgdmFyIEV2ZW50ID0ge1xuXHQgICAgQUNUSVZBVEU6ICdhY3RpdmF0ZScgKyBFVkVOVF9LRVksXG5cdCAgICBTQ1JPTEw6ICdzY3JvbGwnICsgRVZFTlRfS0VZLFxuXHQgICAgTE9BRF9EQVRBX0FQSTogJ2xvYWQnICsgRVZFTlRfS0VZICsgREFUQV9BUElfS0VZXG5cdCAgfTtcblx0XG5cdCAgdmFyIENsYXNzTmFtZSA9IHtcblx0ICAgIERST1BET1dOX0lURU06ICdkcm9wZG93bi1pdGVtJyxcblx0ICAgIERST1BET1dOX01FTlU6ICdkcm9wZG93bi1tZW51Jyxcblx0ICAgIE5BVl9MSU5LOiAnbmF2LWxpbmsnLFxuXHQgICAgTkFWOiAnbmF2Jyxcblx0ICAgIEFDVElWRTogJ2FjdGl2ZSdcblx0ICB9O1xuXHRcblx0ICB2YXIgU2VsZWN0b3IgPSB7XG5cdCAgICBEQVRBX1NQWTogJ1tkYXRhLXNweT1cInNjcm9sbFwiXScsXG5cdCAgICBBQ1RJVkU6ICcuYWN0aXZlJyxcblx0ICAgIExJU1RfSVRFTTogJy5saXN0LWl0ZW0nLFxuXHQgICAgTEk6ICdsaScsXG5cdCAgICBMSV9EUk9QRE9XTjogJ2xpLmRyb3Bkb3duJyxcblx0ICAgIE5BVl9MSU5LUzogJy5uYXYtbGluaycsXG5cdCAgICBEUk9QRE9XTjogJy5kcm9wZG93bicsXG5cdCAgICBEUk9QRE9XTl9JVEVNUzogJy5kcm9wZG93bi1pdGVtJyxcblx0ICAgIERST1BET1dOX1RPR0dMRTogJy5kcm9wZG93bi10b2dnbGUnXG5cdCAgfTtcblx0XG5cdCAgdmFyIE9mZnNldE1ldGhvZCA9IHtcblx0ICAgIE9GRlNFVDogJ29mZnNldCcsXG5cdCAgICBQT1NJVElPTjogJ3Bvc2l0aW9uJ1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQgICAqIENsYXNzIERlZmluaXRpb25cblx0ICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0ICAgKi9cblx0XG5cdCAgdmFyIFNjcm9sbFNweSA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBTY3JvbGxTcHkoZWxlbWVudCwgY29uZmlnKSB7XG5cdCAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTY3JvbGxTcHkpO1xuXHRcblx0ICAgICAgdGhpcy5fZWxlbWVudCA9IGVsZW1lbnQ7XG5cdCAgICAgIHRoaXMuX3Njcm9sbEVsZW1lbnQgPSBlbGVtZW50LnRhZ05hbWUgPT09ICdCT0RZJyA/IHdpbmRvdyA6IGVsZW1lbnQ7XG5cdCAgICAgIHRoaXMuX2NvbmZpZyA9IHRoaXMuX2dldENvbmZpZyhjb25maWcpO1xuXHQgICAgICB0aGlzLl9zZWxlY3RvciA9IHRoaXMuX2NvbmZpZy50YXJnZXQgKyAnICcgKyBTZWxlY3Rvci5OQVZfTElOS1MgKyAnLCcgKyAodGhpcy5fY29uZmlnLnRhcmdldCArICcgJyArIFNlbGVjdG9yLkRST1BET1dOX0lURU1TKTtcblx0ICAgICAgdGhpcy5fb2Zmc2V0cyA9IFtdO1xuXHQgICAgICB0aGlzLl90YXJnZXRzID0gW107XG5cdCAgICAgIHRoaXMuX2FjdGl2ZVRhcmdldCA9IG51bGw7XG5cdCAgICAgIHRoaXMuX3Njcm9sbEhlaWdodCA9IDA7XG5cdFxuXHQgICAgICAkKHRoaXMuX3Njcm9sbEVsZW1lbnQpLm9uKEV2ZW50LlNDUk9MTCwgJC5wcm94eSh0aGlzLl9wcm9jZXNzLCB0aGlzKSk7XG5cdFxuXHQgICAgICB0aGlzLnJlZnJlc2goKTtcblx0ICAgICAgdGhpcy5fcHJvY2VzcygpO1xuXHQgICAgfVxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCAgICAgKiBEYXRhIEFwaSBpbXBsZW1lbnRhdGlvblxuXHQgICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCAgICAgKi9cblx0XG5cdCAgICAvLyBnZXR0ZXJzXG5cdFxuXHQgICAgX2NyZWF0ZUNsYXNzKFNjcm9sbFNweSwgW3tcblx0ICAgICAga2V5OiAncmVmcmVzaCcsXG5cdFxuXHQgICAgICAvLyBwdWJsaWNcblx0XG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiByZWZyZXNoKCkge1xuXHQgICAgICAgIHZhciBfdGhpczE0ID0gdGhpcztcblx0XG5cdCAgICAgICAgdmFyIGF1dG9NZXRob2QgPSB0aGlzLl9zY3JvbGxFbGVtZW50ICE9PSB0aGlzLl9zY3JvbGxFbGVtZW50LndpbmRvdyA/IE9mZnNldE1ldGhvZC5QT1NJVElPTiA6IE9mZnNldE1ldGhvZC5PRkZTRVQ7XG5cdFxuXHQgICAgICAgIHZhciBvZmZzZXRNZXRob2QgPSB0aGlzLl9jb25maWcubWV0aG9kID09PSAnYXV0bycgPyBhdXRvTWV0aG9kIDogdGhpcy5fY29uZmlnLm1ldGhvZDtcblx0XG5cdCAgICAgICAgdmFyIG9mZnNldEJhc2UgPSBvZmZzZXRNZXRob2QgPT09IE9mZnNldE1ldGhvZC5QT1NJVElPTiA/IHRoaXMuX2dldFNjcm9sbFRvcCgpIDogMDtcblx0XG5cdCAgICAgICAgdGhpcy5fb2Zmc2V0cyA9IFtdO1xuXHQgICAgICAgIHRoaXMuX3RhcmdldHMgPSBbXTtcblx0XG5cdCAgICAgICAgdGhpcy5fc2Nyb2xsSGVpZ2h0ID0gdGhpcy5fZ2V0U2Nyb2xsSGVpZ2h0KCk7XG5cdFxuXHQgICAgICAgIHZhciB0YXJnZXRzID0gJC5tYWtlQXJyYXkoJCh0aGlzLl9zZWxlY3RvcikpO1xuXHRcblx0ICAgICAgICB0YXJnZXRzLm1hcChmdW5jdGlvbiAoZWxlbWVudCkge1xuXHQgICAgICAgICAgdmFyIHRhcmdldCA9IHVuZGVmaW5lZDtcblx0ICAgICAgICAgIHZhciB0YXJnZXRTZWxlY3RvciA9IFV0aWwuZ2V0U2VsZWN0b3JGcm9tRWxlbWVudChlbGVtZW50KTtcblx0XG5cdCAgICAgICAgICBpZiAodGFyZ2V0U2VsZWN0b3IpIHtcblx0ICAgICAgICAgICAgdGFyZ2V0ID0gJCh0YXJnZXRTZWxlY3RvcilbMF07XG5cdCAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgaWYgKHRhcmdldCAmJiAodGFyZ2V0Lm9mZnNldFdpZHRoIHx8IHRhcmdldC5vZmZzZXRIZWlnaHQpKSB7XG5cdCAgICAgICAgICAgIC8vIHRvZG8gKGZhdCk6IHJlbW92ZSBza2V0Y2ggcmVsaWFuY2Ugb24galF1ZXJ5IHBvc2l0aW9uL29mZnNldFxuXHQgICAgICAgICAgICByZXR1cm4gWyQodGFyZ2V0KVtvZmZzZXRNZXRob2RdKCkudG9wICsgb2Zmc2V0QmFzZSwgdGFyZ2V0U2VsZWN0b3JdO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgcmV0dXJuIG51bGw7XG5cdCAgICAgICAgfSkuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgICAgICAgICByZXR1cm4gaXRlbTtcblx0ICAgICAgICB9KS5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG5cdCAgICAgICAgICByZXR1cm4gYVswXSAtIGJbMF07XG5cdCAgICAgICAgfSkuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgICAgICAgX3RoaXMxNC5fb2Zmc2V0cy5wdXNoKGl0ZW1bMF0pO1xuXHQgICAgICAgICAgX3RoaXMxNC5fdGFyZ2V0cy5wdXNoKGl0ZW1bMV0pO1xuXHQgICAgICAgIH0pO1xuXHQgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgIGtleTogJ2Rpc3Bvc2UnLFxuXHQgICAgICB2YWx1ZTogZnVuY3Rpb24gZGlzcG9zZSgpIHtcblx0ICAgICAgICAkLnJlbW92ZURhdGEodGhpcy5fZWxlbWVudCwgREFUQV9LRVkpO1xuXHQgICAgICAgICQodGhpcy5fc2Nyb2xsRWxlbWVudCkub2ZmKEVWRU5UX0tFWSk7XG5cdFxuXHQgICAgICAgIHRoaXMuX2VsZW1lbnQgPSBudWxsO1xuXHQgICAgICAgIHRoaXMuX3Njcm9sbEVsZW1lbnQgPSBudWxsO1xuXHQgICAgICAgIHRoaXMuX2NvbmZpZyA9IG51bGw7XG5cdCAgICAgICAgdGhpcy5fc2VsZWN0b3IgPSBudWxsO1xuXHQgICAgICAgIHRoaXMuX29mZnNldHMgPSBudWxsO1xuXHQgICAgICAgIHRoaXMuX3RhcmdldHMgPSBudWxsO1xuXHQgICAgICAgIHRoaXMuX2FjdGl2ZVRhcmdldCA9IG51bGw7XG5cdCAgICAgICAgdGhpcy5fc2Nyb2xsSGVpZ2h0ID0gbnVsbDtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgLy8gcHJpdmF0ZVxuXHRcblx0ICAgIH0sIHtcblx0ICAgICAga2V5OiAnX2dldENvbmZpZycsXG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiBfZ2V0Q29uZmlnKGNvbmZpZykge1xuXHQgICAgICAgIGNvbmZpZyA9ICQuZXh0ZW5kKHt9LCBEZWZhdWx0LCBjb25maWcpO1xuXHRcblx0ICAgICAgICBpZiAodHlwZW9mIGNvbmZpZy50YXJnZXQgIT09ICdzdHJpbmcnKSB7XG5cdCAgICAgICAgICB2YXIgaWQgPSAkKGNvbmZpZy50YXJnZXQpLmF0dHIoJ2lkJyk7XG5cdCAgICAgICAgICBpZiAoIWlkKSB7XG5cdCAgICAgICAgICAgIGlkID0gVXRpbC5nZXRVSUQoTkFNRSk7XG5cdCAgICAgICAgICAgICQoY29uZmlnLnRhcmdldCkuYXR0cignaWQnLCBpZCk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICBjb25maWcudGFyZ2V0ID0gJyMnICsgaWQ7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBVdGlsLnR5cGVDaGVja0NvbmZpZyhOQU1FLCBjb25maWcsIERlZmF1bHRUeXBlKTtcblx0XG5cdCAgICAgICAgcmV0dXJuIGNvbmZpZztcblx0ICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICBrZXk6ICdfZ2V0U2Nyb2xsVG9wJyxcblx0ICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9nZXRTY3JvbGxUb3AoKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuX3Njcm9sbEVsZW1lbnQgPT09IHdpbmRvdyA/IHRoaXMuX3Njcm9sbEVsZW1lbnQuc2Nyb2xsWSA6IHRoaXMuX3Njcm9sbEVsZW1lbnQuc2Nyb2xsVG9wO1xuXHQgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgIGtleTogJ19nZXRTY3JvbGxIZWlnaHQnLFxuXHQgICAgICB2YWx1ZTogZnVuY3Rpb24gX2dldFNjcm9sbEhlaWdodCgpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5fc2Nyb2xsRWxlbWVudC5zY3JvbGxIZWlnaHQgfHwgTWF0aC5tYXgoZG9jdW1lbnQuYm9keS5zY3JvbGxIZWlnaHQsIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxIZWlnaHQpO1xuXHQgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgIGtleTogJ19wcm9jZXNzJyxcblx0ICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9wcm9jZXNzKCkge1xuXHQgICAgICAgIHZhciBzY3JvbGxUb3AgPSB0aGlzLl9nZXRTY3JvbGxUb3AoKSArIHRoaXMuX2NvbmZpZy5vZmZzZXQ7XG5cdCAgICAgICAgdmFyIHNjcm9sbEhlaWdodCA9IHRoaXMuX2dldFNjcm9sbEhlaWdodCgpO1xuXHQgICAgICAgIHZhciBtYXhTY3JvbGwgPSB0aGlzLl9jb25maWcub2Zmc2V0ICsgc2Nyb2xsSGVpZ2h0IC0gdGhpcy5fc2Nyb2xsRWxlbWVudC5vZmZzZXRIZWlnaHQ7XG5cdFxuXHQgICAgICAgIGlmICh0aGlzLl9zY3JvbGxIZWlnaHQgIT09IHNjcm9sbEhlaWdodCkge1xuXHQgICAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBpZiAoc2Nyb2xsVG9wID49IG1heFNjcm9sbCkge1xuXHQgICAgICAgICAgdmFyIHRhcmdldCA9IHRoaXMuX3RhcmdldHNbdGhpcy5fdGFyZ2V0cy5sZW5ndGggLSAxXTtcblx0XG5cdCAgICAgICAgICBpZiAodGhpcy5fYWN0aXZlVGFyZ2V0ICE9PSB0YXJnZXQpIHtcblx0ICAgICAgICAgICAgdGhpcy5fYWN0aXZhdGUodGFyZ2V0KTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGlmICh0aGlzLl9hY3RpdmVUYXJnZXQgJiYgc2Nyb2xsVG9wIDwgdGhpcy5fb2Zmc2V0c1swXSkge1xuXHQgICAgICAgICAgdGhpcy5fYWN0aXZlVGFyZ2V0ID0gbnVsbDtcblx0ICAgICAgICAgIHRoaXMuX2NsZWFyKCk7XG5cdCAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBmb3IgKHZhciBpID0gdGhpcy5fb2Zmc2V0cy5sZW5ndGg7IGktLTspIHtcblx0ICAgICAgICAgIHZhciBpc0FjdGl2ZVRhcmdldCA9IHRoaXMuX2FjdGl2ZVRhcmdldCAhPT0gdGhpcy5fdGFyZ2V0c1tpXSAmJiBzY3JvbGxUb3AgPj0gdGhpcy5fb2Zmc2V0c1tpXSAmJiAodGhpcy5fb2Zmc2V0c1tpICsgMV0gPT09IHVuZGVmaW5lZCB8fCBzY3JvbGxUb3AgPCB0aGlzLl9vZmZzZXRzW2kgKyAxXSk7XG5cdFxuXHQgICAgICAgICAgaWYgKGlzQWN0aXZlVGFyZ2V0KSB7XG5cdCAgICAgICAgICAgIHRoaXMuX2FjdGl2YXRlKHRoaXMuX3RhcmdldHNbaV0pO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICBrZXk6ICdfYWN0aXZhdGUnLFxuXHQgICAgICB2YWx1ZTogZnVuY3Rpb24gX2FjdGl2YXRlKHRhcmdldCkge1xuXHQgICAgICAgIHRoaXMuX2FjdGl2ZVRhcmdldCA9IHRhcmdldDtcblx0XG5cdCAgICAgICAgdGhpcy5fY2xlYXIoKTtcblx0XG5cdCAgICAgICAgdmFyIHF1ZXJpZXMgPSB0aGlzLl9zZWxlY3Rvci5zcGxpdCgnLCcpO1xuXHQgICAgICAgIHF1ZXJpZXMgPSBxdWVyaWVzLm1hcChmdW5jdGlvbiAoc2VsZWN0b3IpIHtcblx0ICAgICAgICAgIHJldHVybiBzZWxlY3RvciArICdbZGF0YS10YXJnZXQ9XCInICsgdGFyZ2V0ICsgJ1wiXSwnICsgKHNlbGVjdG9yICsgJ1tocmVmPVwiJyArIHRhcmdldCArICdcIl0nKTtcblx0ICAgICAgICB9KTtcblx0XG5cdCAgICAgICAgdmFyICRsaW5rID0gJChxdWVyaWVzLmpvaW4oJywnKSk7XG5cdFxuXHQgICAgICAgIGlmICgkbGluay5oYXNDbGFzcyhDbGFzc05hbWUuRFJPUERPV05fSVRFTSkpIHtcblx0ICAgICAgICAgICRsaW5rLmNsb3Nlc3QoU2VsZWN0b3IuRFJPUERPV04pLmZpbmQoU2VsZWN0b3IuRFJPUERPV05fVE9HR0xFKS5hZGRDbGFzcyhDbGFzc05hbWUuQUNUSVZFKTtcblx0ICAgICAgICAgICRsaW5rLmFkZENsYXNzKENsYXNzTmFtZS5BQ1RJVkUpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAvLyB0b2RvIChmYXQpIHRoaXMgaXMga2luZGEgc3VzLi4uXG5cdCAgICAgICAgICAvLyByZWN1cnNpdmVseSBhZGQgYWN0aXZlcyB0byB0ZXN0ZWQgbmF2LWxpbmtzXG5cdCAgICAgICAgICAkbGluay5wYXJlbnRzKFNlbGVjdG9yLkxJKS5maW5kKFNlbGVjdG9yLk5BVl9MSU5LUykuYWRkQ2xhc3MoQ2xhc3NOYW1lLkFDVElWRSk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICAkKHRoaXMuX3Njcm9sbEVsZW1lbnQpLnRyaWdnZXIoRXZlbnQuQUNUSVZBVEUsIHtcblx0ICAgICAgICAgIHJlbGF0ZWRUYXJnZXQ6IHRhcmdldFxuXHQgICAgICAgIH0pO1xuXHQgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgIGtleTogJ19jbGVhcicsXG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiBfY2xlYXIoKSB7XG5cdCAgICAgICAgJCh0aGlzLl9zZWxlY3RvcikuZmlsdGVyKFNlbGVjdG9yLkFDVElWRSkucmVtb3ZlQ2xhc3MoQ2xhc3NOYW1lLkFDVElWRSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8vIHN0YXRpY1xuXHRcblx0ICAgIH1dLCBbe1xuXHQgICAgICBrZXk6ICdfalF1ZXJ5SW50ZXJmYWNlJyxcblx0ICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9qUXVlcnlJbnRlcmZhY2UoY29uZmlnKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICB2YXIgZGF0YSA9ICQodGhpcykuZGF0YShEQVRBX0tFWSk7XG5cdCAgICAgICAgICB2YXIgX2NvbmZpZyA9IHR5cGVvZiBjb25maWcgPT09ICdvYmplY3QnICYmIGNvbmZpZyB8fCBudWxsO1xuXHRcblx0ICAgICAgICAgIGlmICghZGF0YSkge1xuXHQgICAgICAgICAgICBkYXRhID0gbmV3IFNjcm9sbFNweSh0aGlzLCBfY29uZmlnKTtcblx0ICAgICAgICAgICAgJCh0aGlzKS5kYXRhKERBVEFfS0VZLCBkYXRhKTtcblx0ICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICBpZiAodHlwZW9mIGNvbmZpZyA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgICAgICAgaWYgKGRhdGFbY29uZmlnXSA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBtZXRob2QgbmFtZWQgXCInICsgY29uZmlnICsgJ1wiJyk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgZGF0YVtjb25maWddKCk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAga2V5OiAnVkVSU0lPTicsXG5cdCAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgICAgIHJldHVybiBWRVJTSU9OO1xuXHQgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgIGtleTogJ0RlZmF1bHQnLFxuXHQgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0ICAgICAgICByZXR1cm4gRGVmYXVsdDtcblx0ICAgICAgfVxuXHQgICAgfV0pO1xuXHRcblx0ICAgIHJldHVybiBTY3JvbGxTcHk7XG5cdCAgfSkoKTtcblx0XG5cdCAgJCh3aW5kb3cpLm9uKEV2ZW50LkxPQURfREFUQV9BUEksIGZ1bmN0aW9uICgpIHtcblx0ICAgIHZhciBzY3JvbGxTcHlzID0gJC5tYWtlQXJyYXkoJChTZWxlY3Rvci5EQVRBX1NQWSkpO1xuXHRcblx0ICAgIGZvciAodmFyIGkgPSBzY3JvbGxTcHlzLmxlbmd0aDsgaS0tOykge1xuXHQgICAgICB2YXIgJHNweSA9ICQoc2Nyb2xsU3B5c1tpXSk7XG5cdCAgICAgIFNjcm9sbFNweS5falF1ZXJ5SW50ZXJmYWNlLmNhbGwoJHNweSwgJHNweS5kYXRhKCkpO1xuXHQgICAgfVxuXHQgIH0pO1xuXHRcblx0ICAvKipcblx0ICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0ICAgKiBqUXVlcnlcblx0ICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0ICAgKi9cblx0XG5cdCAgJC5mbltOQU1FXSA9IFNjcm9sbFNweS5falF1ZXJ5SW50ZXJmYWNlO1xuXHQgICQuZm5bTkFNRV0uQ29uc3RydWN0b3IgPSBTY3JvbGxTcHk7XG5cdCAgJC5mbltOQU1FXS5ub0NvbmZsaWN0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgJC5mbltOQU1FXSA9IEpRVUVSWV9OT19DT05GTElDVDtcblx0ICAgIHJldHVybiBTY3JvbGxTcHkuX2pRdWVyeUludGVyZmFjZTtcblx0ICB9O1xuXHRcblx0ICByZXR1cm4gU2Nyb2xsU3B5O1xuXHR9KShqUXVlcnkpO1xuXHRcblx0LyoqXG5cdCAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCAqIEJvb3RzdHJhcCAodjQuMC4wLWFscGhhLjQpOiB0YWIuanNcblx0ICogTGljZW5zZWQgdW5kZXIgTUlUIChodHRwczovL2dpdGh1Yi5jb20vdHdicy9ib290c3RyYXAvYmxvYi9tYXN0ZXIvTElDRU5TRSlcblx0ICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0ICovXG5cdFxuXHR2YXIgVGFiID0gKGZ1bmN0aW9uICgkKSB7XG5cdFxuXHQgIC8qKlxuXHQgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQgICAqIENvbnN0YW50c1xuXHQgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQgICAqL1xuXHRcblx0ICB2YXIgTkFNRSA9ICd0YWInO1xuXHQgIHZhciBWRVJTSU9OID0gJzQuMC4wLWFscGhhLjQnO1xuXHQgIHZhciBEQVRBX0tFWSA9ICdicy50YWInO1xuXHQgIHZhciBFVkVOVF9LRVkgPSAnLicgKyBEQVRBX0tFWTtcblx0ICB2YXIgREFUQV9BUElfS0VZID0gJy5kYXRhLWFwaSc7XG5cdCAgdmFyIEpRVUVSWV9OT19DT05GTElDVCA9ICQuZm5bTkFNRV07XG5cdCAgdmFyIFRSQU5TSVRJT05fRFVSQVRJT04gPSAxNTA7XG5cdFxuXHQgIHZhciBFdmVudCA9IHtcblx0ICAgIEhJREU6ICdoaWRlJyArIEVWRU5UX0tFWSxcblx0ICAgIEhJRERFTjogJ2hpZGRlbicgKyBFVkVOVF9LRVksXG5cdCAgICBTSE9XOiAnc2hvdycgKyBFVkVOVF9LRVksXG5cdCAgICBTSE9XTjogJ3Nob3duJyArIEVWRU5UX0tFWSxcblx0ICAgIENMSUNLX0RBVEFfQVBJOiAnY2xpY2snICsgRVZFTlRfS0VZICsgREFUQV9BUElfS0VZXG5cdCAgfTtcblx0XG5cdCAgdmFyIENsYXNzTmFtZSA9IHtcblx0ICAgIERST1BET1dOX01FTlU6ICdkcm9wZG93bi1tZW51Jyxcblx0ICAgIEFDVElWRTogJ2FjdGl2ZScsXG5cdCAgICBGQURFOiAnZmFkZScsXG5cdCAgICBJTjogJ2luJ1xuXHQgIH07XG5cdFxuXHQgIHZhciBTZWxlY3RvciA9IHtcblx0ICAgIEE6ICdhJyxcblx0ICAgIExJOiAnbGknLFxuXHQgICAgRFJPUERPV046ICcuZHJvcGRvd24nLFxuXHQgICAgVUw6ICd1bDpub3QoLmRyb3Bkb3duLW1lbnUpJyxcblx0ICAgIEZBREVfQ0hJTEQ6ICc+IC5uYXYtaXRlbSAuZmFkZSwgPiAuZmFkZScsXG5cdCAgICBBQ1RJVkU6ICcuYWN0aXZlJyxcblx0ICAgIEFDVElWRV9DSElMRDogJz4gLm5hdi1pdGVtID4gLmFjdGl2ZSwgPiAuYWN0aXZlJyxcblx0ICAgIERBVEFfVE9HR0xFOiAnW2RhdGEtdG9nZ2xlPVwidGFiXCJdLCBbZGF0YS10b2dnbGU9XCJwaWxsXCJdJyxcblx0ICAgIERST1BET1dOX1RPR0dMRTogJy5kcm9wZG93bi10b2dnbGUnLFxuXHQgICAgRFJPUERPV05fQUNUSVZFX0NISUxEOiAnPiAuZHJvcGRvd24tbWVudSAuYWN0aXZlJ1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQgICAqIENsYXNzIERlZmluaXRpb25cblx0ICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0ICAgKi9cblx0XG5cdCAgdmFyIFRhYiA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBUYWIoZWxlbWVudCkge1xuXHQgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVGFiKTtcblx0XG5cdCAgICAgIHRoaXMuX2VsZW1lbnQgPSBlbGVtZW50O1xuXHQgICAgfVxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCAgICAgKiBEYXRhIEFwaSBpbXBsZW1lbnRhdGlvblxuXHQgICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCAgICAgKi9cblx0XG5cdCAgICAvLyBnZXR0ZXJzXG5cdFxuXHQgICAgX2NyZWF0ZUNsYXNzKFRhYiwgW3tcblx0ICAgICAga2V5OiAnc2hvdycsXG5cdFxuXHQgICAgICAvLyBwdWJsaWNcblx0XG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiBzaG93KCkge1xuXHQgICAgICAgIHZhciBfdGhpczE1ID0gdGhpcztcblx0XG5cdCAgICAgICAgaWYgKHRoaXMuX2VsZW1lbnQucGFyZW50Tm9kZSAmJiB0aGlzLl9lbGVtZW50LnBhcmVudE5vZGUubm9kZVR5cGUgPT09IE5vZGUuRUxFTUVOVF9OT0RFICYmICQodGhpcy5fZWxlbWVudCkuaGFzQ2xhc3MoQ2xhc3NOYW1lLkFDVElWRSkpIHtcblx0ICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHZhciB0YXJnZXQgPSB1bmRlZmluZWQ7XG5cdCAgICAgICAgdmFyIHByZXZpb3VzID0gdW5kZWZpbmVkO1xuXHQgICAgICAgIHZhciB1bEVsZW1lbnQgPSAkKHRoaXMuX2VsZW1lbnQpLmNsb3Nlc3QoU2VsZWN0b3IuVUwpWzBdO1xuXHQgICAgICAgIHZhciBzZWxlY3RvciA9IFV0aWwuZ2V0U2VsZWN0b3JGcm9tRWxlbWVudCh0aGlzLl9lbGVtZW50KTtcblx0XG5cdCAgICAgICAgaWYgKHVsRWxlbWVudCkge1xuXHQgICAgICAgICAgcHJldmlvdXMgPSAkLm1ha2VBcnJheSgkKHVsRWxlbWVudCkuZmluZChTZWxlY3Rvci5BQ1RJVkUpKTtcblx0ICAgICAgICAgIHByZXZpb3VzID0gcHJldmlvdXNbcHJldmlvdXMubGVuZ3RoIC0gMV07XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICB2YXIgaGlkZUV2ZW50ID0gJC5FdmVudChFdmVudC5ISURFLCB7XG5cdCAgICAgICAgICByZWxhdGVkVGFyZ2V0OiB0aGlzLl9lbGVtZW50XG5cdCAgICAgICAgfSk7XG5cdFxuXHQgICAgICAgIHZhciBzaG93RXZlbnQgPSAkLkV2ZW50KEV2ZW50LlNIT1csIHtcblx0ICAgICAgICAgIHJlbGF0ZWRUYXJnZXQ6IHByZXZpb3VzXG5cdCAgICAgICAgfSk7XG5cdFxuXHQgICAgICAgIGlmIChwcmV2aW91cykge1xuXHQgICAgICAgICAgJChwcmV2aW91cykudHJpZ2dlcihoaWRlRXZlbnQpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgJCh0aGlzLl9lbGVtZW50KS50cmlnZ2VyKHNob3dFdmVudCk7XG5cdFxuXHQgICAgICAgIGlmIChzaG93RXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkgfHwgaGlkZUV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpKSB7XG5cdCAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBpZiAoc2VsZWN0b3IpIHtcblx0ICAgICAgICAgIHRhcmdldCA9ICQoc2VsZWN0b3IpWzBdO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgdGhpcy5fYWN0aXZhdGUodGhpcy5fZWxlbWVudCwgdWxFbGVtZW50KTtcblx0XG5cdCAgICAgICAgdmFyIGNvbXBsZXRlID0gZnVuY3Rpb24gY29tcGxldGUoKSB7XG5cdCAgICAgICAgICB2YXIgaGlkZGVuRXZlbnQgPSAkLkV2ZW50KEV2ZW50LkhJRERFTiwge1xuXHQgICAgICAgICAgICByZWxhdGVkVGFyZ2V0OiBfdGhpczE1Ll9lbGVtZW50XG5cdCAgICAgICAgICB9KTtcblx0XG5cdCAgICAgICAgICB2YXIgc2hvd25FdmVudCA9ICQuRXZlbnQoRXZlbnQuU0hPV04sIHtcblx0ICAgICAgICAgICAgcmVsYXRlZFRhcmdldDogcHJldmlvdXNcblx0ICAgICAgICAgIH0pO1xuXHRcblx0ICAgICAgICAgICQocHJldmlvdXMpLnRyaWdnZXIoaGlkZGVuRXZlbnQpO1xuXHQgICAgICAgICAgJChfdGhpczE1Ll9lbGVtZW50KS50cmlnZ2VyKHNob3duRXZlbnQpO1xuXHQgICAgICAgIH07XG5cdFxuXHQgICAgICAgIGlmICh0YXJnZXQpIHtcblx0ICAgICAgICAgIHRoaXMuX2FjdGl2YXRlKHRhcmdldCwgdGFyZ2V0LnBhcmVudE5vZGUsIGNvbXBsZXRlKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgY29tcGxldGUoKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAga2V5OiAnZGlzcG9zZScsXG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiBkaXNwb3NlKCkge1xuXHQgICAgICAgICQucmVtb3ZlQ2xhc3ModGhpcy5fZWxlbWVudCwgREFUQV9LRVkpO1xuXHQgICAgICAgIHRoaXMuX2VsZW1lbnQgPSBudWxsO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICAvLyBwcml2YXRlXG5cdFxuXHQgICAgfSwge1xuXHQgICAgICBrZXk6ICdfYWN0aXZhdGUnLFxuXHQgICAgICB2YWx1ZTogZnVuY3Rpb24gX2FjdGl2YXRlKGVsZW1lbnQsIGNvbnRhaW5lciwgY2FsbGJhY2spIHtcblx0ICAgICAgICB2YXIgYWN0aXZlID0gJChjb250YWluZXIpLmZpbmQoU2VsZWN0b3IuQUNUSVZFX0NISUxEKVswXTtcblx0ICAgICAgICB2YXIgaXNUcmFuc2l0aW9uaW5nID0gY2FsbGJhY2sgJiYgVXRpbC5zdXBwb3J0c1RyYW5zaXRpb25FbmQoKSAmJiAoYWN0aXZlICYmICQoYWN0aXZlKS5oYXNDbGFzcyhDbGFzc05hbWUuRkFERSkgfHwgQm9vbGVhbigkKGNvbnRhaW5lcikuZmluZChTZWxlY3Rvci5GQURFX0NISUxEKVswXSkpO1xuXHRcblx0ICAgICAgICB2YXIgY29tcGxldGUgPSAkLnByb3h5KHRoaXMuX3RyYW5zaXRpb25Db21wbGV0ZSwgdGhpcywgZWxlbWVudCwgYWN0aXZlLCBpc1RyYW5zaXRpb25pbmcsIGNhbGxiYWNrKTtcblx0XG5cdCAgICAgICAgaWYgKGFjdGl2ZSAmJiBpc1RyYW5zaXRpb25pbmcpIHtcblx0ICAgICAgICAgICQoYWN0aXZlKS5vbmUoVXRpbC5UUkFOU0lUSU9OX0VORCwgY29tcGxldGUpLmVtdWxhdGVUcmFuc2l0aW9uRW5kKFRSQU5TSVRJT05fRFVSQVRJT04pO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBjb21wbGV0ZSgpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgaWYgKGFjdGl2ZSkge1xuXHQgICAgICAgICAgJChhY3RpdmUpLnJlbW92ZUNsYXNzKENsYXNzTmFtZS5JTik7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgIGtleTogJ190cmFuc2l0aW9uQ29tcGxldGUnLFxuXHQgICAgICB2YWx1ZTogZnVuY3Rpb24gX3RyYW5zaXRpb25Db21wbGV0ZShlbGVtZW50LCBhY3RpdmUsIGlzVHJhbnNpdGlvbmluZywgY2FsbGJhY2spIHtcblx0ICAgICAgICBpZiAoYWN0aXZlKSB7XG5cdCAgICAgICAgICAkKGFjdGl2ZSkucmVtb3ZlQ2xhc3MoQ2xhc3NOYW1lLkFDVElWRSk7XG5cdFxuXHQgICAgICAgICAgdmFyIGRyb3Bkb3duQ2hpbGQgPSAkKGFjdGl2ZSkuZmluZChTZWxlY3Rvci5EUk9QRE9XTl9BQ1RJVkVfQ0hJTEQpWzBdO1xuXHRcblx0ICAgICAgICAgIGlmIChkcm9wZG93bkNoaWxkKSB7XG5cdCAgICAgICAgICAgICQoZHJvcGRvd25DaGlsZCkucmVtb3ZlQ2xhc3MoQ2xhc3NOYW1lLkFDVElWRSk7XG5cdCAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgYWN0aXZlLnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsIGZhbHNlKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgICQoZWxlbWVudCkuYWRkQ2xhc3MoQ2xhc3NOYW1lLkFDVElWRSk7XG5cdCAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLCB0cnVlKTtcblx0XG5cdCAgICAgICAgaWYgKGlzVHJhbnNpdGlvbmluZykge1xuXHQgICAgICAgICAgVXRpbC5yZWZsb3coZWxlbWVudCk7XG5cdCAgICAgICAgICAkKGVsZW1lbnQpLmFkZENsYXNzKENsYXNzTmFtZS5JTik7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICQoZWxlbWVudCkucmVtb3ZlQ2xhc3MoQ2xhc3NOYW1lLkZBREUpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgaWYgKGVsZW1lbnQucGFyZW50Tm9kZSAmJiAkKGVsZW1lbnQucGFyZW50Tm9kZSkuaGFzQ2xhc3MoQ2xhc3NOYW1lLkRST1BET1dOX01FTlUpKSB7XG5cdFxuXHQgICAgICAgICAgdmFyIGRyb3Bkb3duRWxlbWVudCA9ICQoZWxlbWVudCkuY2xvc2VzdChTZWxlY3Rvci5EUk9QRE9XTilbMF07XG5cdCAgICAgICAgICBpZiAoZHJvcGRvd25FbGVtZW50KSB7XG5cdCAgICAgICAgICAgICQoZHJvcGRvd25FbGVtZW50KS5maW5kKFNlbGVjdG9yLkRST1BET1dOX1RPR0dMRSkuYWRkQ2xhc3MoQ2xhc3NOYW1lLkFDVElWRSk7XG5cdCAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLCB0cnVlKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGlmIChjYWxsYmFjaykge1xuXHQgICAgICAgICAgY2FsbGJhY2soKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8vIHN0YXRpY1xuXHRcblx0ICAgIH1dLCBbe1xuXHQgICAgICBrZXk6ICdfalF1ZXJ5SW50ZXJmYWNlJyxcblx0ICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9qUXVlcnlJbnRlcmZhY2UoY29uZmlnKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpO1xuXHQgICAgICAgICAgdmFyIGRhdGEgPSAkdGhpcy5kYXRhKERBVEFfS0VZKTtcblx0XG5cdCAgICAgICAgICBpZiAoIWRhdGEpIHtcblx0ICAgICAgICAgICAgZGF0YSA9IGRhdGEgPSBuZXcgVGFiKHRoaXMpO1xuXHQgICAgICAgICAgICAkdGhpcy5kYXRhKERBVEFfS0VZLCBkYXRhKTtcblx0ICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICBpZiAodHlwZW9mIGNvbmZpZyA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgICAgICAgaWYgKGRhdGFbY29uZmlnXSA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBtZXRob2QgbmFtZWQgXCInICsgY29uZmlnICsgJ1wiJyk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgZGF0YVtjb25maWddKCk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAga2V5OiAnVkVSU0lPTicsXG5cdCAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgICAgIHJldHVybiBWRVJTSU9OO1xuXHQgICAgICB9XG5cdCAgICB9XSk7XG5cdFxuXHQgICAgcmV0dXJuIFRhYjtcblx0ICB9KSgpO1xuXHRcblx0ICAkKGRvY3VtZW50KS5vbihFdmVudC5DTElDS19EQVRBX0FQSSwgU2VsZWN0b3IuREFUQV9UT0dHTEUsIGZ1bmN0aW9uIChldmVudCkge1xuXHQgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0ICAgIFRhYi5falF1ZXJ5SW50ZXJmYWNlLmNhbGwoJCh0aGlzKSwgJ3Nob3cnKTtcblx0ICB9KTtcblx0XG5cdCAgLyoqXG5cdCAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCAgICogalF1ZXJ5XG5cdCAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCAgICovXG5cdFxuXHQgICQuZm5bTkFNRV0gPSBUYWIuX2pRdWVyeUludGVyZmFjZTtcblx0ICAkLmZuW05BTUVdLkNvbnN0cnVjdG9yID0gVGFiO1xuXHQgICQuZm5bTkFNRV0ubm9Db25mbGljdCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICQuZm5bTkFNRV0gPSBKUVVFUllfTk9fQ09ORkxJQ1Q7XG5cdCAgICByZXR1cm4gVGFiLl9qUXVlcnlJbnRlcmZhY2U7XG5cdCAgfTtcblx0XG5cdCAgcmV0dXJuIFRhYjtcblx0fSkoalF1ZXJ5KTtcblx0XG5cdC8qIGdsb2JhbCBUZXRoZXIgKi9cblx0XG5cdC8qKlxuXHQgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQgKiBCb290c3RyYXAgKHY0LjAuMC1hbHBoYS40KTogdG9vbHRpcC5qc1xuXHQgKiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ibG9iL21hc3Rlci9MSUNFTlNFKVxuXHQgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQgKi9cblx0XG5cdHZhciBUb29sdGlwID0gKGZ1bmN0aW9uICgkKSB7XG5cdFxuXHQgIC8qKlxuXHQgICAqIENoZWNrIGZvciBUZXRoZXIgZGVwZW5kZW5jeVxuXHQgICAqIFRldGhlciAtIGh0dHA6Ly9naXRodWIuaHVic3BvdC5jb20vdGV0aGVyL1xuXHQgICAqL1xuXHQgIGlmICh3aW5kb3cuVGV0aGVyID09PSB1bmRlZmluZWQpIHtcblx0ICAgIHRocm93IG5ldyBFcnJvcignQm9vdHN0cmFwIHRvb2x0aXBzIHJlcXVpcmUgVGV0aGVyIChodHRwOi8vZ2l0aHViLmh1YnNwb3QuY29tL3RldGhlci8pJyk7XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0ICAgKiBDb25zdGFudHNcblx0ICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0ICAgKi9cblx0XG5cdCAgdmFyIE5BTUUgPSAndG9vbHRpcCc7XG5cdCAgdmFyIFZFUlNJT04gPSAnNC4wLjAtYWxwaGEuNCc7XG5cdCAgdmFyIERBVEFfS0VZID0gJ2JzLnRvb2x0aXAnO1xuXHQgIHZhciBFVkVOVF9LRVkgPSAnLicgKyBEQVRBX0tFWTtcblx0ICB2YXIgSlFVRVJZX05PX0NPTkZMSUNUID0gJC5mbltOQU1FXTtcblx0ICB2YXIgVFJBTlNJVElPTl9EVVJBVElPTiA9IDE1MDtcblx0ICB2YXIgQ0xBU1NfUFJFRklYID0gJ2JzLXRldGhlcic7XG5cdFxuXHQgIHZhciBEZWZhdWx0ID0ge1xuXHQgICAgYW5pbWF0aW9uOiB0cnVlLFxuXHQgICAgdGVtcGxhdGU6ICc8ZGl2IGNsYXNzPVwidG9vbHRpcFwiIHJvbGU9XCJ0b29sdGlwXCI+JyArICc8ZGl2IGNsYXNzPVwidG9vbHRpcC1hcnJvd1wiPjwvZGl2PicgKyAnPGRpdiBjbGFzcz1cInRvb2x0aXAtaW5uZXJcIj48L2Rpdj48L2Rpdj4nLFxuXHQgICAgdHJpZ2dlcjogJ2hvdmVyIGZvY3VzJyxcblx0ICAgIHRpdGxlOiAnJyxcblx0ICAgIGRlbGF5OiAwLFxuXHQgICAgaHRtbDogZmFsc2UsXG5cdCAgICBzZWxlY3RvcjogZmFsc2UsXG5cdCAgICBwbGFjZW1lbnQ6ICd0b3AnLFxuXHQgICAgb2Zmc2V0OiAnMCAwJyxcblx0ICAgIGNvbnN0cmFpbnRzOiBbXVxuXHQgIH07XG5cdFxuXHQgIHZhciBEZWZhdWx0VHlwZSA9IHtcblx0ICAgIGFuaW1hdGlvbjogJ2Jvb2xlYW4nLFxuXHQgICAgdGVtcGxhdGU6ICdzdHJpbmcnLFxuXHQgICAgdGl0bGU6ICcoc3RyaW5nfGVsZW1lbnR8ZnVuY3Rpb24pJyxcblx0ICAgIHRyaWdnZXI6ICdzdHJpbmcnLFxuXHQgICAgZGVsYXk6ICcobnVtYmVyfG9iamVjdCknLFxuXHQgICAgaHRtbDogJ2Jvb2xlYW4nLFxuXHQgICAgc2VsZWN0b3I6ICcoc3RyaW5nfGJvb2xlYW4pJyxcblx0ICAgIHBsYWNlbWVudDogJyhzdHJpbmd8ZnVuY3Rpb24pJyxcblx0ICAgIG9mZnNldDogJ3N0cmluZycsXG5cdCAgICBjb25zdHJhaW50czogJ2FycmF5J1xuXHQgIH07XG5cdFxuXHQgIHZhciBBdHRhY2htZW50TWFwID0ge1xuXHQgICAgVE9QOiAnYm90dG9tIGNlbnRlcicsXG5cdCAgICBSSUdIVDogJ21pZGRsZSBsZWZ0Jyxcblx0ICAgIEJPVFRPTTogJ3RvcCBjZW50ZXInLFxuXHQgICAgTEVGVDogJ21pZGRsZSByaWdodCdcblx0ICB9O1xuXHRcblx0ICB2YXIgSG92ZXJTdGF0ZSA9IHtcblx0ICAgIElOOiAnaW4nLFxuXHQgICAgT1VUOiAnb3V0J1xuXHQgIH07XG5cdFxuXHQgIHZhciBFdmVudCA9IHtcblx0ICAgIEhJREU6ICdoaWRlJyArIEVWRU5UX0tFWSxcblx0ICAgIEhJRERFTjogJ2hpZGRlbicgKyBFVkVOVF9LRVksXG5cdCAgICBTSE9XOiAnc2hvdycgKyBFVkVOVF9LRVksXG5cdCAgICBTSE9XTjogJ3Nob3duJyArIEVWRU5UX0tFWSxcblx0ICAgIElOU0VSVEVEOiAnaW5zZXJ0ZWQnICsgRVZFTlRfS0VZLFxuXHQgICAgQ0xJQ0s6ICdjbGljaycgKyBFVkVOVF9LRVksXG5cdCAgICBGT0NVU0lOOiAnZm9jdXNpbicgKyBFVkVOVF9LRVksXG5cdCAgICBGT0NVU09VVDogJ2ZvY3Vzb3V0JyArIEVWRU5UX0tFWSxcblx0ICAgIE1PVVNFRU5URVI6ICdtb3VzZWVudGVyJyArIEVWRU5UX0tFWSxcblx0ICAgIE1PVVNFTEVBVkU6ICdtb3VzZWxlYXZlJyArIEVWRU5UX0tFWVxuXHQgIH07XG5cdFxuXHQgIHZhciBDbGFzc05hbWUgPSB7XG5cdCAgICBGQURFOiAnZmFkZScsXG5cdCAgICBJTjogJ2luJ1xuXHQgIH07XG5cdFxuXHQgIHZhciBTZWxlY3RvciA9IHtcblx0ICAgIFRPT0xUSVA6ICcudG9vbHRpcCcsXG5cdCAgICBUT09MVElQX0lOTkVSOiAnLnRvb2x0aXAtaW5uZXInXG5cdCAgfTtcblx0XG5cdCAgdmFyIFRldGhlckNsYXNzID0ge1xuXHQgICAgZWxlbWVudDogZmFsc2UsXG5cdCAgICBlbmFibGVkOiBmYWxzZVxuXHQgIH07XG5cdFxuXHQgIHZhciBUcmlnZ2VyID0ge1xuXHQgICAgSE9WRVI6ICdob3ZlcicsXG5cdCAgICBGT0NVUzogJ2ZvY3VzJyxcblx0ICAgIENMSUNLOiAnY2xpY2snLFxuXHQgICAgTUFOVUFMOiAnbWFudWFsJ1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQgICAqIENsYXNzIERlZmluaXRpb25cblx0ICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0ICAgKi9cblx0XG5cdCAgdmFyIFRvb2x0aXAgPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gVG9vbHRpcChlbGVtZW50LCBjb25maWcpIHtcblx0ICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFRvb2x0aXApO1xuXHRcblx0ICAgICAgLy8gcHJpdmF0ZVxuXHQgICAgICB0aGlzLl9pc0VuYWJsZWQgPSB0cnVlO1xuXHQgICAgICB0aGlzLl90aW1lb3V0ID0gMDtcblx0ICAgICAgdGhpcy5faG92ZXJTdGF0ZSA9ICcnO1xuXHQgICAgICB0aGlzLl9hY3RpdmVUcmlnZ2VyID0ge307XG5cdCAgICAgIHRoaXMuX3RldGhlciA9IG51bGw7XG5cdFxuXHQgICAgICAvLyBwcm90ZWN0ZWRcblx0ICAgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcblx0ICAgICAgdGhpcy5jb25maWcgPSB0aGlzLl9nZXRDb25maWcoY29uZmlnKTtcblx0ICAgICAgdGhpcy50aXAgPSBudWxsO1xuXHRcblx0ICAgICAgdGhpcy5fc2V0TGlzdGVuZXJzKCk7XG5cdCAgICB9XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0ICAgICAqIGpRdWVyeVxuXHQgICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCAgICAgKi9cblx0XG5cdCAgICAvLyBnZXR0ZXJzXG5cdFxuXHQgICAgX2NyZWF0ZUNsYXNzKFRvb2x0aXAsIFt7XG5cdCAgICAgIGtleTogJ2VuYWJsZScsXG5cdFxuXHQgICAgICAvLyBwdWJsaWNcblx0XG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiBlbmFibGUoKSB7XG5cdCAgICAgICAgdGhpcy5faXNFbmFibGVkID0gdHJ1ZTtcblx0ICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICBrZXk6ICdkaXNhYmxlJyxcblx0ICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRpc2FibGUoKSB7XG5cdCAgICAgICAgdGhpcy5faXNFbmFibGVkID0gZmFsc2U7XG5cdCAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAga2V5OiAndG9nZ2xlRW5hYmxlZCcsXG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiB0b2dnbGVFbmFibGVkKCkge1xuXHQgICAgICAgIHRoaXMuX2lzRW5hYmxlZCA9ICF0aGlzLl9pc0VuYWJsZWQ7XG5cdCAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAga2V5OiAndG9nZ2xlJyxcblx0ICAgICAgdmFsdWU6IGZ1bmN0aW9uIHRvZ2dsZShldmVudCkge1xuXHQgICAgICAgIGlmIChldmVudCkge1xuXHQgICAgICAgICAgdmFyIGRhdGFLZXkgPSB0aGlzLmNvbnN0cnVjdG9yLkRBVEFfS0VZO1xuXHQgICAgICAgICAgdmFyIGNvbnRleHQgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLmRhdGEoZGF0YUtleSk7XG5cdFxuXHQgICAgICAgICAgaWYgKCFjb250ZXh0KSB7XG5cdCAgICAgICAgICAgIGNvbnRleHQgPSBuZXcgdGhpcy5jb25zdHJ1Y3RvcihldmVudC5jdXJyZW50VGFyZ2V0LCB0aGlzLl9nZXREZWxlZ2F0ZUNvbmZpZygpKTtcblx0ICAgICAgICAgICAgJChldmVudC5jdXJyZW50VGFyZ2V0KS5kYXRhKGRhdGFLZXksIGNvbnRleHQpO1xuXHQgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgIGNvbnRleHQuX2FjdGl2ZVRyaWdnZXIuY2xpY2sgPSAhY29udGV4dC5fYWN0aXZlVHJpZ2dlci5jbGljaztcblx0XG5cdCAgICAgICAgICBpZiAoY29udGV4dC5faXNXaXRoQWN0aXZlVHJpZ2dlcigpKSB7XG5cdCAgICAgICAgICAgIGNvbnRleHQuX2VudGVyKG51bGwsIGNvbnRleHQpO1xuXHQgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgY29udGV4dC5fbGVhdmUobnVsbCwgY29udGV4dCk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSBlbHNlIHtcblx0XG5cdCAgICAgICAgICBpZiAoJCh0aGlzLmdldFRpcEVsZW1lbnQoKSkuaGFzQ2xhc3MoQ2xhc3NOYW1lLklOKSkge1xuXHQgICAgICAgICAgICB0aGlzLl9sZWF2ZShudWxsLCB0aGlzKTtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgIHRoaXMuX2VudGVyKG51bGwsIHRoaXMpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICBrZXk6ICdkaXNwb3NlJyxcblx0ICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRpc3Bvc2UoKSB7XG5cdCAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX3RpbWVvdXQpO1xuXHRcblx0ICAgICAgICB0aGlzLmNsZWFudXBUZXRoZXIoKTtcblx0XG5cdCAgICAgICAgJC5yZW1vdmVEYXRhKHRoaXMuZWxlbWVudCwgdGhpcy5jb25zdHJ1Y3Rvci5EQVRBX0tFWSk7XG5cdFxuXHQgICAgICAgICQodGhpcy5lbGVtZW50KS5vZmYodGhpcy5jb25zdHJ1Y3Rvci5FVkVOVF9LRVkpO1xuXHRcblx0ICAgICAgICBpZiAodGhpcy50aXApIHtcblx0ICAgICAgICAgICQodGhpcy50aXApLnJlbW92ZSgpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgdGhpcy5faXNFbmFibGVkID0gbnVsbDtcblx0ICAgICAgICB0aGlzLl90aW1lb3V0ID0gbnVsbDtcblx0ICAgICAgICB0aGlzLl9ob3ZlclN0YXRlID0gbnVsbDtcblx0ICAgICAgICB0aGlzLl9hY3RpdmVUcmlnZ2VyID0gbnVsbDtcblx0ICAgICAgICB0aGlzLl90ZXRoZXIgPSBudWxsO1xuXHRcblx0ICAgICAgICB0aGlzLmVsZW1lbnQgPSBudWxsO1xuXHQgICAgICAgIHRoaXMuY29uZmlnID0gbnVsbDtcblx0ICAgICAgICB0aGlzLnRpcCA9IG51bGw7XG5cdCAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAga2V5OiAnc2hvdycsXG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiBzaG93KCkge1xuXHQgICAgICAgIHZhciBfdGhpczE2ID0gdGhpcztcblx0XG5cdCAgICAgICAgdmFyIHNob3dFdmVudCA9ICQuRXZlbnQodGhpcy5jb25zdHJ1Y3Rvci5FdmVudC5TSE9XKTtcblx0XG5cdCAgICAgICAgaWYgKHRoaXMuaXNXaXRoQ29udGVudCgpICYmIHRoaXMuX2lzRW5hYmxlZCkge1xuXHQgICAgICAgICAgJCh0aGlzLmVsZW1lbnQpLnRyaWdnZXIoc2hvd0V2ZW50KTtcblx0XG5cdCAgICAgICAgICB2YXIgaXNJblRoZURvbSA9ICQuY29udGFpbnModGhpcy5lbGVtZW50Lm93bmVyRG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LCB0aGlzLmVsZW1lbnQpO1xuXHRcblx0ICAgICAgICAgIGlmIChzaG93RXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkgfHwgIWlzSW5UaGVEb20pIHtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgIHZhciB0aXAgPSB0aGlzLmdldFRpcEVsZW1lbnQoKTtcblx0ICAgICAgICAgIHZhciB0aXBJZCA9IFV0aWwuZ2V0VUlEKHRoaXMuY29uc3RydWN0b3IuTkFNRSk7XG5cdFxuXHQgICAgICAgICAgdGlwLnNldEF0dHJpYnV0ZSgnaWQnLCB0aXBJZCk7XG5cdCAgICAgICAgICB0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLWRlc2NyaWJlZGJ5JywgdGlwSWQpO1xuXHRcblx0ICAgICAgICAgIHRoaXMuc2V0Q29udGVudCgpO1xuXHRcblx0ICAgICAgICAgIGlmICh0aGlzLmNvbmZpZy5hbmltYXRpb24pIHtcblx0ICAgICAgICAgICAgJCh0aXApLmFkZENsYXNzKENsYXNzTmFtZS5GQURFKTtcblx0ICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICB2YXIgcGxhY2VtZW50ID0gdHlwZW9mIHRoaXMuY29uZmlnLnBsYWNlbWVudCA9PT0gJ2Z1bmN0aW9uJyA/IHRoaXMuY29uZmlnLnBsYWNlbWVudC5jYWxsKHRoaXMsIHRpcCwgdGhpcy5lbGVtZW50KSA6IHRoaXMuY29uZmlnLnBsYWNlbWVudDtcblx0XG5cdCAgICAgICAgICB2YXIgYXR0YWNobWVudCA9IHRoaXMuX2dldEF0dGFjaG1lbnQocGxhY2VtZW50KTtcblx0XG5cdCAgICAgICAgICAkKHRpcCkuZGF0YSh0aGlzLmNvbnN0cnVjdG9yLkRBVEFfS0VZLCB0aGlzKS5hcHBlbmRUbyhkb2N1bWVudC5ib2R5KTtcblx0XG5cdCAgICAgICAgICAkKHRoaXMuZWxlbWVudCkudHJpZ2dlcih0aGlzLmNvbnN0cnVjdG9yLkV2ZW50LklOU0VSVEVEKTtcblx0XG5cdCAgICAgICAgICB0aGlzLl90ZXRoZXIgPSBuZXcgVGV0aGVyKHtcblx0ICAgICAgICAgICAgYXR0YWNobWVudDogYXR0YWNobWVudCxcblx0ICAgICAgICAgICAgZWxlbWVudDogdGlwLFxuXHQgICAgICAgICAgICB0YXJnZXQ6IHRoaXMuZWxlbWVudCxcblx0ICAgICAgICAgICAgY2xhc3NlczogVGV0aGVyQ2xhc3MsXG5cdCAgICAgICAgICAgIGNsYXNzUHJlZml4OiBDTEFTU19QUkVGSVgsXG5cdCAgICAgICAgICAgIG9mZnNldDogdGhpcy5jb25maWcub2Zmc2V0LFxuXHQgICAgICAgICAgICBjb25zdHJhaW50czogdGhpcy5jb25maWcuY29uc3RyYWludHMsXG5cdCAgICAgICAgICAgIGFkZFRhcmdldENsYXNzZXM6IGZhbHNlXG5cdCAgICAgICAgICB9KTtcblx0XG5cdCAgICAgICAgICBVdGlsLnJlZmxvdyh0aXApO1xuXHQgICAgICAgICAgdGhpcy5fdGV0aGVyLnBvc2l0aW9uKCk7XG5cdFxuXHQgICAgICAgICAgJCh0aXApLmFkZENsYXNzKENsYXNzTmFtZS5JTik7XG5cdFxuXHQgICAgICAgICAgdmFyIGNvbXBsZXRlID0gZnVuY3Rpb24gY29tcGxldGUoKSB7XG5cdCAgICAgICAgICAgIHZhciBwcmV2SG92ZXJTdGF0ZSA9IF90aGlzMTYuX2hvdmVyU3RhdGU7XG5cdCAgICAgICAgICAgIF90aGlzMTYuX2hvdmVyU3RhdGUgPSBudWxsO1xuXHRcblx0ICAgICAgICAgICAgJChfdGhpczE2LmVsZW1lbnQpLnRyaWdnZXIoX3RoaXMxNi5jb25zdHJ1Y3Rvci5FdmVudC5TSE9XTik7XG5cdFxuXHQgICAgICAgICAgICBpZiAocHJldkhvdmVyU3RhdGUgPT09IEhvdmVyU3RhdGUuT1VUKSB7XG5cdCAgICAgICAgICAgICAgX3RoaXMxNi5fbGVhdmUobnVsbCwgX3RoaXMxNik7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgIH07XG5cdFxuXHQgICAgICAgICAgaWYgKFV0aWwuc3VwcG9ydHNUcmFuc2l0aW9uRW5kKCkgJiYgJCh0aGlzLnRpcCkuaGFzQ2xhc3MoQ2xhc3NOYW1lLkZBREUpKSB7XG5cdCAgICAgICAgICAgICQodGhpcy50aXApLm9uZShVdGlsLlRSQU5TSVRJT05fRU5ELCBjb21wbGV0ZSkuZW11bGF0ZVRyYW5zaXRpb25FbmQoVG9vbHRpcC5fVFJBTlNJVElPTl9EVVJBVElPTik7XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICBjb21wbGV0ZSgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICBrZXk6ICdoaWRlJyxcblx0ICAgICAgdmFsdWU6IGZ1bmN0aW9uIGhpZGUoY2FsbGJhY2spIHtcblx0ICAgICAgICB2YXIgX3RoaXMxNyA9IHRoaXM7XG5cdFxuXHQgICAgICAgIHZhciB0aXAgPSB0aGlzLmdldFRpcEVsZW1lbnQoKTtcblx0ICAgICAgICB2YXIgaGlkZUV2ZW50ID0gJC5FdmVudCh0aGlzLmNvbnN0cnVjdG9yLkV2ZW50LkhJREUpO1xuXHQgICAgICAgIHZhciBjb21wbGV0ZSA9IGZ1bmN0aW9uIGNvbXBsZXRlKCkge1xuXHQgICAgICAgICAgaWYgKF90aGlzMTcuX2hvdmVyU3RhdGUgIT09IEhvdmVyU3RhdGUuSU4gJiYgdGlwLnBhcmVudE5vZGUpIHtcblx0ICAgICAgICAgICAgdGlwLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGlwKTtcblx0ICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICBfdGhpczE3LmVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdhcmlhLWRlc2NyaWJlZGJ5Jyk7XG5cdCAgICAgICAgICAkKF90aGlzMTcuZWxlbWVudCkudHJpZ2dlcihfdGhpczE3LmNvbnN0cnVjdG9yLkV2ZW50LkhJRERFTik7XG5cdCAgICAgICAgICBfdGhpczE3LmNsZWFudXBUZXRoZXIoKTtcblx0XG5cdCAgICAgICAgICBpZiAoY2FsbGJhY2spIHtcblx0ICAgICAgICAgICAgY2FsbGJhY2soKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9O1xuXHRcblx0ICAgICAgICAkKHRoaXMuZWxlbWVudCkudHJpZ2dlcihoaWRlRXZlbnQpO1xuXHRcblx0ICAgICAgICBpZiAoaGlkZUV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpKSB7XG5cdCAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICAkKHRpcCkucmVtb3ZlQ2xhc3MoQ2xhc3NOYW1lLklOKTtcblx0XG5cdCAgICAgICAgaWYgKFV0aWwuc3VwcG9ydHNUcmFuc2l0aW9uRW5kKCkgJiYgJCh0aGlzLnRpcCkuaGFzQ2xhc3MoQ2xhc3NOYW1lLkZBREUpKSB7XG5cdFxuXHQgICAgICAgICAgJCh0aXApLm9uZShVdGlsLlRSQU5TSVRJT05fRU5ELCBjb21wbGV0ZSkuZW11bGF0ZVRyYW5zaXRpb25FbmQoVFJBTlNJVElPTl9EVVJBVElPTik7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIGNvbXBsZXRlKCk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICB0aGlzLl9ob3ZlclN0YXRlID0gJyc7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8vIHByb3RlY3RlZFxuXHRcblx0ICAgIH0sIHtcblx0ICAgICAga2V5OiAnaXNXaXRoQ29udGVudCcsXG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiBpc1dpdGhDb250ZW50KCkge1xuXHQgICAgICAgIHJldHVybiBCb29sZWFuKHRoaXMuZ2V0VGl0bGUoKSk7XG5cdCAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAga2V5OiAnZ2V0VGlwRWxlbWVudCcsXG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRUaXBFbGVtZW50KCkge1xuXHQgICAgICAgIHJldHVybiB0aGlzLnRpcCA9IHRoaXMudGlwIHx8ICQodGhpcy5jb25maWcudGVtcGxhdGUpWzBdO1xuXHQgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgIGtleTogJ3NldENvbnRlbnQnLFxuXHQgICAgICB2YWx1ZTogZnVuY3Rpb24gc2V0Q29udGVudCgpIHtcblx0ICAgICAgICB2YXIgJHRpcCA9ICQodGhpcy5nZXRUaXBFbGVtZW50KCkpO1xuXHRcblx0ICAgICAgICB0aGlzLnNldEVsZW1lbnRDb250ZW50KCR0aXAuZmluZChTZWxlY3Rvci5UT09MVElQX0lOTkVSKSwgdGhpcy5nZXRUaXRsZSgpKTtcblx0XG5cdCAgICAgICAgJHRpcC5yZW1vdmVDbGFzcyhDbGFzc05hbWUuRkFERSkucmVtb3ZlQ2xhc3MoQ2xhc3NOYW1lLklOKTtcblx0XG5cdCAgICAgICAgdGhpcy5jbGVhbnVwVGV0aGVyKCk7XG5cdCAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAga2V5OiAnc2V0RWxlbWVudENvbnRlbnQnLFxuXHQgICAgICB2YWx1ZTogZnVuY3Rpb24gc2V0RWxlbWVudENvbnRlbnQoJGVsZW1lbnQsIGNvbnRlbnQpIHtcblx0ICAgICAgICB2YXIgaHRtbCA9IHRoaXMuY29uZmlnLmh0bWw7XG5cdCAgICAgICAgaWYgKHR5cGVvZiBjb250ZW50ID09PSAnb2JqZWN0JyAmJiAoY29udGVudC5ub2RlVHlwZSB8fCBjb250ZW50LmpxdWVyeSkpIHtcblx0ICAgICAgICAgIC8vIGNvbnRlbnQgaXMgYSBET00gbm9kZSBvciBhIGpRdWVyeVxuXHQgICAgICAgICAgaWYgKGh0bWwpIHtcblx0ICAgICAgICAgICAgaWYgKCEkKGNvbnRlbnQpLnBhcmVudCgpLmlzKCRlbGVtZW50KSkge1xuXHQgICAgICAgICAgICAgICRlbGVtZW50LmVtcHR5KCkuYXBwZW5kKGNvbnRlbnQpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAkZWxlbWVudC50ZXh0KCQoY29udGVudCkudGV4dCgpKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgJGVsZW1lbnRbaHRtbCA/ICdodG1sJyA6ICd0ZXh0J10oY29udGVudCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgIGtleTogJ2dldFRpdGxlJyxcblx0ICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldFRpdGxlKCkge1xuXHQgICAgICAgIHZhciB0aXRsZSA9IHRoaXMuZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtb3JpZ2luYWwtdGl0bGUnKTtcblx0XG5cdCAgICAgICAgaWYgKCF0aXRsZSkge1xuXHQgICAgICAgICAgdGl0bGUgPSB0eXBlb2YgdGhpcy5jb25maWcudGl0bGUgPT09ICdmdW5jdGlvbicgPyB0aGlzLmNvbmZpZy50aXRsZS5jYWxsKHRoaXMuZWxlbWVudCkgOiB0aGlzLmNvbmZpZy50aXRsZTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHJldHVybiB0aXRsZTtcblx0ICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICBrZXk6ICdjbGVhbnVwVGV0aGVyJyxcblx0ICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNsZWFudXBUZXRoZXIoKSB7XG5cdCAgICAgICAgaWYgKHRoaXMuX3RldGhlcikge1xuXHQgICAgICAgICAgdGhpcy5fdGV0aGVyLmRlc3Ryb3koKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8vIHByaXZhdGVcblx0XG5cdCAgICB9LCB7XG5cdCAgICAgIGtleTogJ19nZXRBdHRhY2htZW50Jyxcblx0ICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9nZXRBdHRhY2htZW50KHBsYWNlbWVudCkge1xuXHQgICAgICAgIHJldHVybiBBdHRhY2htZW50TWFwW3BsYWNlbWVudC50b1VwcGVyQ2FzZSgpXTtcblx0ICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICBrZXk6ICdfc2V0TGlzdGVuZXJzJyxcblx0ICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9zZXRMaXN0ZW5lcnMoKSB7XG5cdCAgICAgICAgdmFyIF90aGlzMTggPSB0aGlzO1xuXHRcblx0ICAgICAgICB2YXIgdHJpZ2dlcnMgPSB0aGlzLmNvbmZpZy50cmlnZ2VyLnNwbGl0KCcgJyk7XG5cdFxuXHQgICAgICAgIHRyaWdnZXJzLmZvckVhY2goZnVuY3Rpb24gKHRyaWdnZXIpIHtcblx0ICAgICAgICAgIGlmICh0cmlnZ2VyID09PSAnY2xpY2snKSB7XG5cdCAgICAgICAgICAgICQoX3RoaXMxOC5lbGVtZW50KS5vbihfdGhpczE4LmNvbnN0cnVjdG9yLkV2ZW50LkNMSUNLLCBfdGhpczE4LmNvbmZpZy5zZWxlY3RvciwgJC5wcm94eShfdGhpczE4LnRvZ2dsZSwgX3RoaXMxOCkpO1xuXHQgICAgICAgICAgfSBlbHNlIGlmICh0cmlnZ2VyICE9PSBUcmlnZ2VyLk1BTlVBTCkge1xuXHQgICAgICAgICAgICB2YXIgZXZlbnRJbiA9IHRyaWdnZXIgPT09IFRyaWdnZXIuSE9WRVIgPyBfdGhpczE4LmNvbnN0cnVjdG9yLkV2ZW50Lk1PVVNFRU5URVIgOiBfdGhpczE4LmNvbnN0cnVjdG9yLkV2ZW50LkZPQ1VTSU47XG5cdCAgICAgICAgICAgIHZhciBldmVudE91dCA9IHRyaWdnZXIgPT09IFRyaWdnZXIuSE9WRVIgPyBfdGhpczE4LmNvbnN0cnVjdG9yLkV2ZW50Lk1PVVNFTEVBVkUgOiBfdGhpczE4LmNvbnN0cnVjdG9yLkV2ZW50LkZPQ1VTT1VUO1xuXHRcblx0ICAgICAgICAgICAgJChfdGhpczE4LmVsZW1lbnQpLm9uKGV2ZW50SW4sIF90aGlzMTguY29uZmlnLnNlbGVjdG9yLCAkLnByb3h5KF90aGlzMTguX2VudGVyLCBfdGhpczE4KSkub24oZXZlbnRPdXQsIF90aGlzMTguY29uZmlnLnNlbGVjdG9yLCAkLnByb3h5KF90aGlzMTguX2xlYXZlLCBfdGhpczE4KSk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cdFxuXHQgICAgICAgIGlmICh0aGlzLmNvbmZpZy5zZWxlY3Rvcikge1xuXHQgICAgICAgICAgdGhpcy5jb25maWcgPSAkLmV4dGVuZCh7fSwgdGhpcy5jb25maWcsIHtcblx0ICAgICAgICAgICAgdHJpZ2dlcjogJ21hbnVhbCcsXG5cdCAgICAgICAgICAgIHNlbGVjdG9yOiAnJ1xuXHQgICAgICAgICAgfSk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHRoaXMuX2ZpeFRpdGxlKCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgIGtleTogJ19maXhUaXRsZScsXG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiBfZml4VGl0bGUoKSB7XG5cdCAgICAgICAgdmFyIHRpdGxlVHlwZSA9IHR5cGVvZiB0aGlzLmVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLW9yaWdpbmFsLXRpdGxlJyk7XG5cdCAgICAgICAgaWYgKHRoaXMuZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ3RpdGxlJykgfHwgdGl0bGVUeXBlICE9PSAnc3RyaW5nJykge1xuXHQgICAgICAgICAgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZSgnZGF0YS1vcmlnaW5hbC10aXRsZScsIHRoaXMuZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ3RpdGxlJykgfHwgJycpO1xuXHQgICAgICAgICAgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZSgndGl0bGUnLCAnJyk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgIGtleTogJ19lbnRlcicsXG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiBfZW50ZXIoZXZlbnQsIGNvbnRleHQpIHtcblx0ICAgICAgICB2YXIgZGF0YUtleSA9IHRoaXMuY29uc3RydWN0b3IuREFUQV9LRVk7XG5cdFxuXHQgICAgICAgIGNvbnRleHQgPSBjb250ZXh0IHx8ICQoZXZlbnQuY3VycmVudFRhcmdldCkuZGF0YShkYXRhS2V5KTtcblx0XG5cdCAgICAgICAgaWYgKCFjb250ZXh0KSB7XG5cdCAgICAgICAgICBjb250ZXh0ID0gbmV3IHRoaXMuY29uc3RydWN0b3IoZXZlbnQuY3VycmVudFRhcmdldCwgdGhpcy5fZ2V0RGVsZWdhdGVDb25maWcoKSk7XG5cdCAgICAgICAgICAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLmRhdGEoZGF0YUtleSwgY29udGV4dCk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBpZiAoZXZlbnQpIHtcblx0ICAgICAgICAgIGNvbnRleHQuX2FjdGl2ZVRyaWdnZXJbZXZlbnQudHlwZSA9PT0gJ2ZvY3VzaW4nID8gVHJpZ2dlci5GT0NVUyA6IFRyaWdnZXIuSE9WRVJdID0gdHJ1ZTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGlmICgkKGNvbnRleHQuZ2V0VGlwRWxlbWVudCgpKS5oYXNDbGFzcyhDbGFzc05hbWUuSU4pIHx8IGNvbnRleHQuX2hvdmVyU3RhdGUgPT09IEhvdmVyU3RhdGUuSU4pIHtcblx0ICAgICAgICAgIGNvbnRleHQuX2hvdmVyU3RhdGUgPSBIb3ZlclN0YXRlLklOO1xuXHQgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgY2xlYXJUaW1lb3V0KGNvbnRleHQuX3RpbWVvdXQpO1xuXHRcblx0ICAgICAgICBjb250ZXh0Ll9ob3ZlclN0YXRlID0gSG92ZXJTdGF0ZS5JTjtcblx0XG5cdCAgICAgICAgaWYgKCFjb250ZXh0LmNvbmZpZy5kZWxheSB8fCAhY29udGV4dC5jb25maWcuZGVsYXkuc2hvdykge1xuXHQgICAgICAgICAgY29udGV4dC5zaG93KCk7XG5cdCAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBjb250ZXh0Ll90aW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICBpZiAoY29udGV4dC5faG92ZXJTdGF0ZSA9PT0gSG92ZXJTdGF0ZS5JTikge1xuXHQgICAgICAgICAgICBjb250ZXh0LnNob3coKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9LCBjb250ZXh0LmNvbmZpZy5kZWxheS5zaG93KTtcblx0ICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICBrZXk6ICdfbGVhdmUnLFxuXHQgICAgICB2YWx1ZTogZnVuY3Rpb24gX2xlYXZlKGV2ZW50LCBjb250ZXh0KSB7XG5cdCAgICAgICAgdmFyIGRhdGFLZXkgPSB0aGlzLmNvbnN0cnVjdG9yLkRBVEFfS0VZO1xuXHRcblx0ICAgICAgICBjb250ZXh0ID0gY29udGV4dCB8fCAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLmRhdGEoZGF0YUtleSk7XG5cdFxuXHQgICAgICAgIGlmICghY29udGV4dCkge1xuXHQgICAgICAgICAgY29udGV4dCA9IG5ldyB0aGlzLmNvbnN0cnVjdG9yKGV2ZW50LmN1cnJlbnRUYXJnZXQsIHRoaXMuX2dldERlbGVnYXRlQ29uZmlnKCkpO1xuXHQgICAgICAgICAgJChldmVudC5jdXJyZW50VGFyZ2V0KS5kYXRhKGRhdGFLZXksIGNvbnRleHQpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgaWYgKGV2ZW50KSB7XG5cdCAgICAgICAgICBjb250ZXh0Ll9hY3RpdmVUcmlnZ2VyW2V2ZW50LnR5cGUgPT09ICdmb2N1c291dCcgPyBUcmlnZ2VyLkZPQ1VTIDogVHJpZ2dlci5IT1ZFUl0gPSBmYWxzZTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGlmIChjb250ZXh0Ll9pc1dpdGhBY3RpdmVUcmlnZ2VyKCkpIHtcblx0ICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGNsZWFyVGltZW91dChjb250ZXh0Ll90aW1lb3V0KTtcblx0XG5cdCAgICAgICAgY29udGV4dC5faG92ZXJTdGF0ZSA9IEhvdmVyU3RhdGUuT1VUO1xuXHRcblx0ICAgICAgICBpZiAoIWNvbnRleHQuY29uZmlnLmRlbGF5IHx8ICFjb250ZXh0LmNvbmZpZy5kZWxheS5oaWRlKSB7XG5cdCAgICAgICAgICBjb250ZXh0LmhpZGUoKTtcblx0ICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGNvbnRleHQuX3RpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgIGlmIChjb250ZXh0Ll9ob3ZlclN0YXRlID09PSBIb3ZlclN0YXRlLk9VVCkge1xuXHQgICAgICAgICAgICBjb250ZXh0LmhpZGUoKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9LCBjb250ZXh0LmNvbmZpZy5kZWxheS5oaWRlKTtcblx0ICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICBrZXk6ICdfaXNXaXRoQWN0aXZlVHJpZ2dlcicsXG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaXNXaXRoQWN0aXZlVHJpZ2dlcigpIHtcblx0ICAgICAgICBmb3IgKHZhciB0cmlnZ2VyIGluIHRoaXMuX2FjdGl2ZVRyaWdnZXIpIHtcblx0ICAgICAgICAgIGlmICh0aGlzLl9hY3RpdmVUcmlnZ2VyW3RyaWdnZXJdKSB7XG5cdCAgICAgICAgICAgIHJldHVybiB0cnVlO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgIGtleTogJ19nZXRDb25maWcnLFxuXHQgICAgICB2YWx1ZTogZnVuY3Rpb24gX2dldENvbmZpZyhjb25maWcpIHtcblx0ICAgICAgICBjb25maWcgPSAkLmV4dGVuZCh7fSwgdGhpcy5jb25zdHJ1Y3Rvci5EZWZhdWx0LCAkKHRoaXMuZWxlbWVudCkuZGF0YSgpLCBjb25maWcpO1xuXHRcblx0ICAgICAgICBpZiAoY29uZmlnLmRlbGF5ICYmIHR5cGVvZiBjb25maWcuZGVsYXkgPT09ICdudW1iZXInKSB7XG5cdCAgICAgICAgICBjb25maWcuZGVsYXkgPSB7XG5cdCAgICAgICAgICAgIHNob3c6IGNvbmZpZy5kZWxheSxcblx0ICAgICAgICAgICAgaGlkZTogY29uZmlnLmRlbGF5XG5cdCAgICAgICAgICB9O1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgVXRpbC50eXBlQ2hlY2tDb25maWcoTkFNRSwgY29uZmlnLCB0aGlzLmNvbnN0cnVjdG9yLkRlZmF1bHRUeXBlKTtcblx0XG5cdCAgICAgICAgcmV0dXJuIGNvbmZpZztcblx0ICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICBrZXk6ICdfZ2V0RGVsZWdhdGVDb25maWcnLFxuXHQgICAgICB2YWx1ZTogZnVuY3Rpb24gX2dldERlbGVnYXRlQ29uZmlnKCkge1xuXHQgICAgICAgIHZhciBjb25maWcgPSB7fTtcblx0XG5cdCAgICAgICAgaWYgKHRoaXMuY29uZmlnKSB7XG5cdCAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gdGhpcy5jb25maWcpIHtcblx0ICAgICAgICAgICAgaWYgKHRoaXMuY29uc3RydWN0b3IuRGVmYXVsdFtrZXldICE9PSB0aGlzLmNvbmZpZ1trZXldKSB7XG5cdCAgICAgICAgICAgICAgY29uZmlnW2tleV0gPSB0aGlzLmNvbmZpZ1trZXldO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICByZXR1cm4gY29uZmlnO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICAvLyBzdGF0aWNcblx0XG5cdCAgICB9XSwgW3tcblx0ICAgICAga2V5OiAnX2pRdWVyeUludGVyZmFjZScsXG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiBfalF1ZXJ5SW50ZXJmYWNlKGNvbmZpZykge1xuXHQgICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgdmFyIGRhdGEgPSAkKHRoaXMpLmRhdGEoREFUQV9LRVkpO1xuXHQgICAgICAgICAgdmFyIF9jb25maWcgPSB0eXBlb2YgY29uZmlnID09PSAnb2JqZWN0JyA/IGNvbmZpZyA6IG51bGw7XG5cdFxuXHQgICAgICAgICAgaWYgKCFkYXRhICYmIC9kZXN0cm95fGhpZGUvLnRlc3QoY29uZmlnKSkge1xuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgaWYgKCFkYXRhKSB7XG5cdCAgICAgICAgICAgIGRhdGEgPSBuZXcgVG9vbHRpcCh0aGlzLCBfY29uZmlnKTtcblx0ICAgICAgICAgICAgJCh0aGlzKS5kYXRhKERBVEFfS0VZLCBkYXRhKTtcblx0ICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICBpZiAodHlwZW9mIGNvbmZpZyA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgICAgICAgaWYgKGRhdGFbY29uZmlnXSA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBtZXRob2QgbmFtZWQgXCInICsgY29uZmlnICsgJ1wiJyk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgZGF0YVtjb25maWddKCk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAga2V5OiAnVkVSU0lPTicsXG5cdCAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgICAgIHJldHVybiBWRVJTSU9OO1xuXHQgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgIGtleTogJ0RlZmF1bHQnLFxuXHQgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0ICAgICAgICByZXR1cm4gRGVmYXVsdDtcblx0ICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICBrZXk6ICdOQU1FJyxcblx0ICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG5cdCAgICAgICAgcmV0dXJuIE5BTUU7XG5cdCAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAga2V5OiAnREFUQV9LRVknLFxuXHQgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0ICAgICAgICByZXR1cm4gREFUQV9LRVk7XG5cdCAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAga2V5OiAnRXZlbnQnLFxuXHQgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0ICAgICAgICByZXR1cm4gRXZlbnQ7XG5cdCAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAga2V5OiAnRVZFTlRfS0VZJyxcblx0ICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG5cdCAgICAgICAgcmV0dXJuIEVWRU5UX0tFWTtcblx0ICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICBrZXk6ICdEZWZhdWx0VHlwZScsXG5cdCAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgICAgIHJldHVybiBEZWZhdWx0VHlwZTtcblx0ICAgICAgfVxuXHQgICAgfV0pO1xuXHRcblx0ICAgIHJldHVybiBUb29sdGlwO1xuXHQgIH0pKCk7XG5cdFxuXHQgICQuZm5bTkFNRV0gPSBUb29sdGlwLl9qUXVlcnlJbnRlcmZhY2U7XG5cdCAgJC5mbltOQU1FXS5Db25zdHJ1Y3RvciA9IFRvb2x0aXA7XG5cdCAgJC5mbltOQU1FXS5ub0NvbmZsaWN0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgJC5mbltOQU1FXSA9IEpRVUVSWV9OT19DT05GTElDVDtcblx0ICAgIHJldHVybiBUb29sdGlwLl9qUXVlcnlJbnRlcmZhY2U7XG5cdCAgfTtcblx0XG5cdCAgcmV0dXJuIFRvb2x0aXA7XG5cdH0pKGpRdWVyeSk7XG5cdFxuXHQvKipcblx0ICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0ICogQm9vdHN0cmFwICh2NC4wLjAtYWxwaGEuNCk6IHBvcG92ZXIuanNcblx0ICogTGljZW5zZWQgdW5kZXIgTUlUIChodHRwczovL2dpdGh1Yi5jb20vdHdicy9ib290c3RyYXAvYmxvYi9tYXN0ZXIvTElDRU5TRSlcblx0ICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0ICovXG5cdFxuXHR2YXIgUG9wb3ZlciA9IChmdW5jdGlvbiAoJCkge1xuXHRcblx0ICAvKipcblx0ICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0ICAgKiBDb25zdGFudHNcblx0ICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0ICAgKi9cblx0XG5cdCAgdmFyIE5BTUUgPSAncG9wb3Zlcic7XG5cdCAgdmFyIFZFUlNJT04gPSAnNC4wLjAtYWxwaGEuNCc7XG5cdCAgdmFyIERBVEFfS0VZID0gJ2JzLnBvcG92ZXInO1xuXHQgIHZhciBFVkVOVF9LRVkgPSAnLicgKyBEQVRBX0tFWTtcblx0ICB2YXIgSlFVRVJZX05PX0NPTkZMSUNUID0gJC5mbltOQU1FXTtcblx0XG5cdCAgdmFyIERlZmF1bHQgPSAkLmV4dGVuZCh7fSwgVG9vbHRpcC5EZWZhdWx0LCB7XG5cdCAgICBwbGFjZW1lbnQ6ICdyaWdodCcsXG5cdCAgICB0cmlnZ2VyOiAnY2xpY2snLFxuXHQgICAgY29udGVudDogJycsXG5cdCAgICB0ZW1wbGF0ZTogJzxkaXYgY2xhc3M9XCJwb3BvdmVyXCIgcm9sZT1cInRvb2x0aXBcIj4nICsgJzxkaXYgY2xhc3M9XCJwb3BvdmVyLWFycm93XCI+PC9kaXY+JyArICc8aDMgY2xhc3M9XCJwb3BvdmVyLXRpdGxlXCI+PC9oMz4nICsgJzxkaXYgY2xhc3M9XCJwb3BvdmVyLWNvbnRlbnRcIj48L2Rpdj48L2Rpdj4nXG5cdCAgfSk7XG5cdFxuXHQgIHZhciBEZWZhdWx0VHlwZSA9ICQuZXh0ZW5kKHt9LCBUb29sdGlwLkRlZmF1bHRUeXBlLCB7XG5cdCAgICBjb250ZW50OiAnKHN0cmluZ3xlbGVtZW50fGZ1bmN0aW9uKSdcblx0ICB9KTtcblx0XG5cdCAgdmFyIENsYXNzTmFtZSA9IHtcblx0ICAgIEZBREU6ICdmYWRlJyxcblx0ICAgIElOOiAnaW4nXG5cdCAgfTtcblx0XG5cdCAgdmFyIFNlbGVjdG9yID0ge1xuXHQgICAgVElUTEU6ICcucG9wb3Zlci10aXRsZScsXG5cdCAgICBDT05URU5UOiAnLnBvcG92ZXItY29udGVudCcsXG5cdCAgICBBUlJPVzogJy5wb3BvdmVyLWFycm93J1xuXHQgIH07XG5cdFxuXHQgIHZhciBFdmVudCA9IHtcblx0ICAgIEhJREU6ICdoaWRlJyArIEVWRU5UX0tFWSxcblx0ICAgIEhJRERFTjogJ2hpZGRlbicgKyBFVkVOVF9LRVksXG5cdCAgICBTSE9XOiAnc2hvdycgKyBFVkVOVF9LRVksXG5cdCAgICBTSE9XTjogJ3Nob3duJyArIEVWRU5UX0tFWSxcblx0ICAgIElOU0VSVEVEOiAnaW5zZXJ0ZWQnICsgRVZFTlRfS0VZLFxuXHQgICAgQ0xJQ0s6ICdjbGljaycgKyBFVkVOVF9LRVksXG5cdCAgICBGT0NVU0lOOiAnZm9jdXNpbicgKyBFVkVOVF9LRVksXG5cdCAgICBGT0NVU09VVDogJ2ZvY3Vzb3V0JyArIEVWRU5UX0tFWSxcblx0ICAgIE1PVVNFRU5URVI6ICdtb3VzZWVudGVyJyArIEVWRU5UX0tFWSxcblx0ICAgIE1PVVNFTEVBVkU6ICdtb3VzZWxlYXZlJyArIEVWRU5UX0tFWVxuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQgICAqIENsYXNzIERlZmluaXRpb25cblx0ICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0ICAgKi9cblx0XG5cdCAgdmFyIFBvcG92ZXIgPSAoZnVuY3Rpb24gKF9Ub29sdGlwKSB7XG5cdCAgICBfaW5oZXJpdHMoUG9wb3ZlciwgX1Rvb2x0aXApO1xuXHRcblx0ICAgIGZ1bmN0aW9uIFBvcG92ZXIoKSB7XG5cdCAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBQb3BvdmVyKTtcblx0XG5cdCAgICAgIF9nZXQoT2JqZWN0LmdldFByb3RvdHlwZU9mKFBvcG92ZXIucHJvdG90eXBlKSwgJ2NvbnN0cnVjdG9yJywgdGhpcykuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0ICAgIH1cblx0XG5cdCAgICAvKipcblx0ICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQgICAgICogalF1ZXJ5XG5cdCAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0ICAgICAqL1xuXHRcblx0ICAgIF9jcmVhdGVDbGFzcyhQb3BvdmVyLCBbe1xuXHQgICAgICBrZXk6ICdpc1dpdGhDb250ZW50Jyxcblx0XG5cdCAgICAgIC8vIG92ZXJyaWRlc1xuXHRcblx0ICAgICAgdmFsdWU6IGZ1bmN0aW9uIGlzV2l0aENvbnRlbnQoKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VGl0bGUoKSB8fCB0aGlzLl9nZXRDb250ZW50KCk7XG5cdCAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAga2V5OiAnZ2V0VGlwRWxlbWVudCcsXG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRUaXBFbGVtZW50KCkge1xuXHQgICAgICAgIHJldHVybiB0aGlzLnRpcCA9IHRoaXMudGlwIHx8ICQodGhpcy5jb25maWcudGVtcGxhdGUpWzBdO1xuXHQgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgIGtleTogJ3NldENvbnRlbnQnLFxuXHQgICAgICB2YWx1ZTogZnVuY3Rpb24gc2V0Q29udGVudCgpIHtcblx0ICAgICAgICB2YXIgJHRpcCA9ICQodGhpcy5nZXRUaXBFbGVtZW50KCkpO1xuXHRcblx0ICAgICAgICAvLyB3ZSB1c2UgYXBwZW5kIGZvciBodG1sIG9iamVjdHMgdG8gbWFpbnRhaW4ganMgZXZlbnRzXG5cdCAgICAgICAgdGhpcy5zZXRFbGVtZW50Q29udGVudCgkdGlwLmZpbmQoU2VsZWN0b3IuVElUTEUpLCB0aGlzLmdldFRpdGxlKCkpO1xuXHQgICAgICAgIHRoaXMuc2V0RWxlbWVudENvbnRlbnQoJHRpcC5maW5kKFNlbGVjdG9yLkNPTlRFTlQpLCB0aGlzLl9nZXRDb250ZW50KCkpO1xuXHRcblx0ICAgICAgICAkdGlwLnJlbW92ZUNsYXNzKENsYXNzTmFtZS5GQURFKS5yZW1vdmVDbGFzcyhDbGFzc05hbWUuSU4pO1xuXHRcblx0ICAgICAgICB0aGlzLmNsZWFudXBUZXRoZXIoKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgLy8gcHJpdmF0ZVxuXHRcblx0ICAgIH0sIHtcblx0ICAgICAga2V5OiAnX2dldENvbnRlbnQnLFxuXHQgICAgICB2YWx1ZTogZnVuY3Rpb24gX2dldENvbnRlbnQoKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtY29udGVudCcpIHx8ICh0eXBlb2YgdGhpcy5jb25maWcuY29udGVudCA9PT0gJ2Z1bmN0aW9uJyA/IHRoaXMuY29uZmlnLmNvbnRlbnQuY2FsbCh0aGlzLmVsZW1lbnQpIDogdGhpcy5jb25maWcuY29udGVudCk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8vIHN0YXRpY1xuXHRcblx0ICAgIH1dLCBbe1xuXHQgICAgICBrZXk6ICdfalF1ZXJ5SW50ZXJmYWNlJyxcblx0ICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9qUXVlcnlJbnRlcmZhY2UoY29uZmlnKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICB2YXIgZGF0YSA9ICQodGhpcykuZGF0YShEQVRBX0tFWSk7XG5cdCAgICAgICAgICB2YXIgX2NvbmZpZyA9IHR5cGVvZiBjb25maWcgPT09ICdvYmplY3QnID8gY29uZmlnIDogbnVsbDtcblx0XG5cdCAgICAgICAgICBpZiAoIWRhdGEgJiYgL2Rlc3Ryb3l8aGlkZS8udGVzdChjb25maWcpKSB7XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICBpZiAoIWRhdGEpIHtcblx0ICAgICAgICAgICAgZGF0YSA9IG5ldyBQb3BvdmVyKHRoaXMsIF9jb25maWcpO1xuXHQgICAgICAgICAgICAkKHRoaXMpLmRhdGEoREFUQV9LRVksIGRhdGEpO1xuXHQgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgIGlmICh0eXBlb2YgY29uZmlnID09PSAnc3RyaW5nJykge1xuXHQgICAgICAgICAgICBpZiAoZGF0YVtjb25maWddID09PSB1bmRlZmluZWQpIHtcblx0ICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIG1ldGhvZCBuYW1lZCBcIicgKyBjb25maWcgKyAnXCInKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBkYXRhW2NvbmZpZ10oKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9KTtcblx0ICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICBrZXk6ICdWRVJTSU9OJyxcblx0XG5cdCAgICAgIC8vIGdldHRlcnNcblx0XG5cdCAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgICAgIHJldHVybiBWRVJTSU9OO1xuXHQgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgIGtleTogJ0RlZmF1bHQnLFxuXHQgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0ICAgICAgICByZXR1cm4gRGVmYXVsdDtcblx0ICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICBrZXk6ICdOQU1FJyxcblx0ICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG5cdCAgICAgICAgcmV0dXJuIE5BTUU7XG5cdCAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAga2V5OiAnREFUQV9LRVknLFxuXHQgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0ICAgICAgICByZXR1cm4gREFUQV9LRVk7XG5cdCAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAga2V5OiAnRXZlbnQnLFxuXHQgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0ICAgICAgICByZXR1cm4gRXZlbnQ7XG5cdCAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAga2V5OiAnRVZFTlRfS0VZJyxcblx0ICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG5cdCAgICAgICAgcmV0dXJuIEVWRU5UX0tFWTtcblx0ICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICBrZXk6ICdEZWZhdWx0VHlwZScsXG5cdCAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgICAgIHJldHVybiBEZWZhdWx0VHlwZTtcblx0ICAgICAgfVxuXHQgICAgfV0pO1xuXHRcblx0ICAgIHJldHVybiBQb3BvdmVyO1xuXHQgIH0pKFRvb2x0aXApO1xuXHRcblx0ICAkLmZuW05BTUVdID0gUG9wb3Zlci5falF1ZXJ5SW50ZXJmYWNlO1xuXHQgICQuZm5bTkFNRV0uQ29uc3RydWN0b3IgPSBQb3BvdmVyO1xuXHQgICQuZm5bTkFNRV0ubm9Db25mbGljdCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICQuZm5bTkFNRV0gPSBKUVVFUllfTk9fQ09ORkxJQ1Q7XG5cdCAgICByZXR1cm4gUG9wb3Zlci5falF1ZXJ5SW50ZXJmYWNlO1xuXHQgIH07XG5cdFxuXHQgIHJldHVybiBQb3BvdmVyO1xuXHR9KShqUXVlcnkpO1xuXHRcblx0fShqUXVlcnkpO1xuXG5cbi8qKiovIH1cbi8qKioqKiovIF0pO1xuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIHZlbmRvci5qc1xuICoqLyIsIiBcdC8vIGluc3RhbGwgYSBKU09OUCBjYWxsYmFjayBmb3IgY2h1bmsgbG9hZGluZ1xuIFx0dmFyIHBhcmVudEpzb25wRnVuY3Rpb24gPSB3aW5kb3dbXCJ3ZWJwYWNrSnNvbnBcIl07XG4gXHR3aW5kb3dbXCJ3ZWJwYWNrSnNvbnBcIl0gPSBmdW5jdGlvbiB3ZWJwYWNrSnNvbnBDYWxsYmFjayhjaHVua0lkcywgbW9yZU1vZHVsZXMpIHtcbiBcdFx0Ly8gYWRkIFwibW9yZU1vZHVsZXNcIiB0byB0aGUgbW9kdWxlcyBvYmplY3QsXG4gXHRcdC8vIHRoZW4gZmxhZyBhbGwgXCJjaHVua0lkc1wiIGFzIGxvYWRlZCBhbmQgZmlyZSBjYWxsYmFja1xuIFx0XHR2YXIgbW9kdWxlSWQsIGNodW5rSWQsIGkgPSAwLCBjYWxsYmFja3MgPSBbXTtcbiBcdFx0Zm9yKDtpIDwgY2h1bmtJZHMubGVuZ3RoOyBpKyspIHtcbiBcdFx0XHRjaHVua0lkID0gY2h1bmtJZHNbaV07XG4gXHRcdFx0aWYoaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdKVxuIFx0XHRcdFx0Y2FsbGJhY2tzLnB1c2guYXBwbHkoY2FsbGJhY2tzLCBpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0pO1xuIFx0XHRcdGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9IDA7XG4gXHRcdH1cbiBcdFx0Zm9yKG1vZHVsZUlkIGluIG1vcmVNb2R1bGVzKSB7XG4gXHRcdFx0bW9kdWxlc1ttb2R1bGVJZF0gPSBtb3JlTW9kdWxlc1ttb2R1bGVJZF07XG4gXHRcdH1cbiBcdFx0aWYocGFyZW50SnNvbnBGdW5jdGlvbikgcGFyZW50SnNvbnBGdW5jdGlvbihjaHVua0lkcywgbW9yZU1vZHVsZXMpO1xuIFx0XHR3aGlsZShjYWxsYmFja3MubGVuZ3RoKVxuIFx0XHRcdGNhbGxiYWNrcy5zaGlmdCgpLmNhbGwobnVsbCwgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG4gXHRcdGlmKG1vcmVNb2R1bGVzWzBdKSB7XG4gXHRcdFx0aW5zdGFsbGVkTW9kdWxlc1swXSA9IDA7XG4gXHRcdFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIG9iamVjdCB0byBzdG9yZSBsb2FkZWQgYW5kIGxvYWRpbmcgY2h1bmtzXG4gXHQvLyBcIjBcIiBtZWFucyBcImFscmVhZHkgbG9hZGVkXCJcbiBcdC8vIEFycmF5IG1lYW5zIFwibG9hZGluZ1wiLCBhcnJheSBjb250YWlucyBjYWxsYmFja3NcbiBcdHZhciBpbnN0YWxsZWRDaHVua3MgPSB7XG4gXHRcdDE6MFxuIFx0fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pXG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG5cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGV4cG9ydHM6IHt9LFxuIFx0XHRcdGlkOiBtb2R1bGVJZCxcbiBcdFx0XHRsb2FkZWQ6IGZhbHNlXG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG4gXHQvLyBUaGlzIGZpbGUgY29udGFpbnMgb25seSB0aGUgZW50cnkgY2h1bmsuXG4gXHQvLyBUaGUgY2h1bmsgbG9hZGluZyBmdW5jdGlvbiBmb3IgYWRkaXRpb25hbCBjaHVua3NcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZSA9IGZ1bmN0aW9uIHJlcXVpcmVFbnN1cmUoY2h1bmtJZCwgY2FsbGJhY2spIHtcbiBcdFx0Ly8gXCIwXCIgaXMgdGhlIHNpZ25hbCBmb3IgXCJhbHJlYWR5IGxvYWRlZFwiXG4gXHRcdGlmKGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9PT0gMClcbiBcdFx0XHRyZXR1cm4gY2FsbGJhY2suY2FsbChudWxsLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBhbiBhcnJheSBtZWFucyBcImN1cnJlbnRseSBsb2FkaW5nXCIuXG4gXHRcdGlmKGluc3RhbGxlZENodW5rc1tjaHVua0lkXSAhPT0gdW5kZWZpbmVkKSB7XG4gXHRcdFx0aW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdLnB1c2goY2FsbGJhY2spO1xuIFx0XHR9IGVsc2Uge1xuIFx0XHRcdC8vIHN0YXJ0IGNodW5rIGxvYWRpbmdcbiBcdFx0XHRpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPSBbY2FsbGJhY2tdO1xuIFx0XHRcdHZhciBoZWFkID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXTtcbiBcdFx0XHR2YXIgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG4gXHRcdFx0c2NyaXB0LnR5cGUgPSAndGV4dC9qYXZhc2NyaXB0JztcbiBcdFx0XHRzY3JpcHQuY2hhcnNldCA9ICd1dGYtOCc7XG4gXHRcdFx0c2NyaXB0LmFzeW5jID0gdHJ1ZTtcblxuIFx0XHRcdHNjcmlwdC5zcmMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLnAgKyBcIlwiICsgY2h1bmtJZCArIFwiLmFwcC5qc1wiO1xuIFx0XHRcdGhlYWQuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIHdlYnBhY2svYm9vdHN0cmFwIDgyMjQzOGZjY2ZkMzUyYzRjZTg1XG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBnbG9iYWxbXCJUZXRoZXJcIl0gPSByZXF1aXJlKFwiLSEvVXNlcnMvcmFmYWVsbm93cm90ZWsvRG9jdW1lbnRzL1Byb2pla3RlL0tpY2tzQXBwL1dvcmtzcGFjZS9raWNrcy1hcHAtd29yZHByZXNzL3dwLWNvbnRlbnQvdGhlbWVzL2tpY2tzLWFwcC9ub2RlX21vZHVsZXMvZXhwb3NlLWxvYWRlci9pbmRleC5qcz8kIS9Vc2Vycy9yYWZhZWxub3dyb3Rlay9Eb2N1bWVudHMvUHJvamVrdGUvS2lja3NBcHAvV29ya3NwYWNlL2tpY2tzLWFwcC13b3JkcHJlc3Mvd3AtY29udGVudC90aGVtZXMva2lja3MtYXBwL25vZGVfbW9kdWxlcy90ZXRoZXIvZGlzdC9qcy90ZXRoZXIuanNcIik7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vdGV0aGVyL2Rpc3QvanMvdGV0aGVyLmpzXG4gKiogbW9kdWxlIGlkID0gMlxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBnbG9iYWxbXCIkXCJdID0gcmVxdWlyZShcIi0hL1VzZXJzL3JhZmFlbG5vd3JvdGVrL0RvY3VtZW50cy9Qcm9qZWt0ZS9LaWNrc0FwcC9Xb3Jrc3BhY2Uva2lja3MtYXBwLXdvcmRwcmVzcy93cC1jb250ZW50L3RoZW1lcy9raWNrcy1hcHAvbm9kZV9tb2R1bGVzL3RldGhlci9kaXN0L2pzL3RldGhlci5qc1wiKTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9leHBvc2UtbG9hZGVyPyQhLi9+L3RldGhlci9kaXN0L2pzL3RldGhlci5qc1xuICoqIG1vZHVsZSBpZCA9IDNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIi8qISB0ZXRoZXIgMS4zLjcgKi9cblxuKGZ1bmN0aW9uKHJvb3QsIGZhY3RvcnkpIHtcbiAgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuICAgIGRlZmluZShmYWN0b3J5KTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkocmVxdWlyZSwgZXhwb3J0cywgbW9kdWxlKTtcbiAgfSBlbHNlIHtcbiAgICByb290LlRldGhlciA9IGZhY3RvcnkoKTtcbiAgfVxufSh0aGlzLCBmdW5jdGlvbihyZXF1aXJlLCBleHBvcnRzLCBtb2R1bGUpIHtcblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gKGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgndmFsdWUnIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KSgpO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbicpOyB9IH1cblxudmFyIFRldGhlckJhc2UgPSB1bmRlZmluZWQ7XG5pZiAodHlwZW9mIFRldGhlckJhc2UgPT09ICd1bmRlZmluZWQnKSB7XG4gIFRldGhlckJhc2UgPSB7IG1vZHVsZXM6IFtdIH07XG59XG5cbnZhciB6ZXJvRWxlbWVudCA9IG51bGw7XG5cbi8vIFNhbWUgYXMgbmF0aXZlIGdldEJvdW5kaW5nQ2xpZW50UmVjdCwgZXhjZXB0IGl0IHRha2VzIGludG8gYWNjb3VudCBwYXJlbnQgPGZyYW1lPiBvZmZzZXRzXG4vLyBpZiB0aGUgZWxlbWVudCBsaWVzIHdpdGhpbiBhIG5lc3RlZCBkb2N1bWVudCAoPGZyYW1lPiBvciA8aWZyYW1lPi1saWtlKS5cbmZ1bmN0aW9uIGdldEFjdHVhbEJvdW5kaW5nQ2xpZW50UmVjdChub2RlKSB7XG4gIHZhciBib3VuZGluZ1JlY3QgPSBub2RlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG4gIC8vIFRoZSBvcmlnaW5hbCBvYmplY3QgcmV0dXJuZWQgYnkgZ2V0Qm91bmRpbmdDbGllbnRSZWN0IGlzIGltbXV0YWJsZSwgc28gd2UgY2xvbmUgaXRcbiAgLy8gV2UgY2FuJ3QgdXNlIGV4dGVuZCBiZWNhdXNlIHRoZSBwcm9wZXJ0aWVzIGFyZSBub3QgY29uc2lkZXJlZCBwYXJ0IG9mIHRoZSBvYmplY3QgYnkgaGFzT3duUHJvcGVydHkgaW4gSUU5XG4gIHZhciByZWN0ID0ge307XG4gIGZvciAodmFyIGsgaW4gYm91bmRpbmdSZWN0KSB7XG4gICAgcmVjdFtrXSA9IGJvdW5kaW5nUmVjdFtrXTtcbiAgfVxuXG4gIGlmIChub2RlLm93bmVyRG9jdW1lbnQgIT09IGRvY3VtZW50KSB7XG4gICAgdmFyIF9mcmFtZUVsZW1lbnQgPSBub2RlLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcuZnJhbWVFbGVtZW50O1xuICAgIGlmIChfZnJhbWVFbGVtZW50KSB7XG4gICAgICB2YXIgZnJhbWVSZWN0ID0gZ2V0QWN0dWFsQm91bmRpbmdDbGllbnRSZWN0KF9mcmFtZUVsZW1lbnQpO1xuICAgICAgcmVjdC50b3AgKz0gZnJhbWVSZWN0LnRvcDtcbiAgICAgIHJlY3QuYm90dG9tICs9IGZyYW1lUmVjdC50b3A7XG4gICAgICByZWN0LmxlZnQgKz0gZnJhbWVSZWN0LmxlZnQ7XG4gICAgICByZWN0LnJpZ2h0ICs9IGZyYW1lUmVjdC5sZWZ0O1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiByZWN0O1xufVxuXG5mdW5jdGlvbiBnZXRTY3JvbGxQYXJlbnRzKGVsKSB7XG4gIC8vIEluIGZpcmVmb3ggaWYgdGhlIGVsIGlzIGluc2lkZSBhbiBpZnJhbWUgd2l0aCBkaXNwbGF5OiBub25lOyB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSgpIHdpbGwgcmV0dXJuIG51bGw7XG4gIC8vIGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTU0ODM5N1xuICB2YXIgY29tcHV0ZWRTdHlsZSA9IGdldENvbXB1dGVkU3R5bGUoZWwpIHx8IHt9O1xuICB2YXIgcG9zaXRpb24gPSBjb21wdXRlZFN0eWxlLnBvc2l0aW9uO1xuICB2YXIgcGFyZW50cyA9IFtdO1xuXG4gIGlmIChwb3NpdGlvbiA9PT0gJ2ZpeGVkJykge1xuICAgIHJldHVybiBbZWxdO1xuICB9XG5cbiAgdmFyIHBhcmVudCA9IGVsO1xuICB3aGlsZSAoKHBhcmVudCA9IHBhcmVudC5wYXJlbnROb2RlKSAmJiBwYXJlbnQgJiYgcGFyZW50Lm5vZGVUeXBlID09PSAxKSB7XG4gICAgdmFyIHN0eWxlID0gdW5kZWZpbmVkO1xuICAgIHRyeSB7XG4gICAgICBzdHlsZSA9IGdldENvbXB1dGVkU3R5bGUocGFyZW50KTtcbiAgICB9IGNhdGNoIChlcnIpIHt9XG5cbiAgICBpZiAodHlwZW9mIHN0eWxlID09PSAndW5kZWZpbmVkJyB8fCBzdHlsZSA9PT0gbnVsbCkge1xuICAgICAgcGFyZW50cy5wdXNoKHBhcmVudCk7XG4gICAgICByZXR1cm4gcGFyZW50cztcbiAgICB9XG5cbiAgICB2YXIgX3N0eWxlID0gc3R5bGU7XG4gICAgdmFyIG92ZXJmbG93ID0gX3N0eWxlLm92ZXJmbG93O1xuICAgIHZhciBvdmVyZmxvd1ggPSBfc3R5bGUub3ZlcmZsb3dYO1xuICAgIHZhciBvdmVyZmxvd1kgPSBfc3R5bGUub3ZlcmZsb3dZO1xuXG4gICAgaWYgKC8oYXV0b3xzY3JvbGwpLy50ZXN0KG92ZXJmbG93ICsgb3ZlcmZsb3dZICsgb3ZlcmZsb3dYKSkge1xuICAgICAgaWYgKHBvc2l0aW9uICE9PSAnYWJzb2x1dGUnIHx8IFsncmVsYXRpdmUnLCAnYWJzb2x1dGUnLCAnZml4ZWQnXS5pbmRleE9mKHN0eWxlLnBvc2l0aW9uKSA+PSAwKSB7XG4gICAgICAgIHBhcmVudHMucHVzaChwYXJlbnQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHBhcmVudHMucHVzaChlbC5vd25lckRvY3VtZW50LmJvZHkpO1xuXG4gIC8vIElmIHRoZSBub2RlIGlzIHdpdGhpbiBhIGZyYW1lLCBhY2NvdW50IGZvciB0aGUgcGFyZW50IHdpbmRvdyBzY3JvbGxcbiAgaWYgKGVsLm93bmVyRG9jdW1lbnQgIT09IGRvY3VtZW50KSB7XG4gICAgcGFyZW50cy5wdXNoKGVsLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcpO1xuICB9XG5cbiAgcmV0dXJuIHBhcmVudHM7XG59XG5cbnZhciB1bmlxdWVJZCA9IChmdW5jdGlvbiAoKSB7XG4gIHZhciBpZCA9IDA7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuICsraWQ7XG4gIH07XG59KSgpO1xuXG52YXIgemVyb1Bvc0NhY2hlID0ge307XG52YXIgZ2V0T3JpZ2luID0gZnVuY3Rpb24gZ2V0T3JpZ2luKCkge1xuICAvLyBnZXRCb3VuZGluZ0NsaWVudFJlY3QgaXMgdW5mb3J0dW5hdGVseSB0b28gYWNjdXJhdGUuICBJdCBpbnRyb2R1Y2VzIGEgcGl4ZWwgb3IgdHdvIG9mXG4gIC8vIGppdHRlciBhcyB0aGUgdXNlciBzY3JvbGxzIHRoYXQgbWVzc2VzIHdpdGggb3VyIGFiaWxpdHkgdG8gZGV0ZWN0IGlmIHR3byBwb3NpdGlvbnNcbiAgLy8gYXJlIGVxdWl2aWxhbnQgb3Igbm90LiAgV2UgcGxhY2UgYW4gZWxlbWVudCBhdCB0aGUgdG9wIGxlZnQgb2YgdGhlIHBhZ2UgdGhhdCB3aWxsXG4gIC8vIGdldCB0aGUgc2FtZSBqaXR0ZXIsIHNvIHdlIGNhbiBjYW5jZWwgdGhlIHR3byBvdXQuXG4gIHZhciBub2RlID0gemVyb0VsZW1lbnQ7XG4gIGlmICghbm9kZSkge1xuICAgIG5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBub2RlLnNldEF0dHJpYnV0ZSgnZGF0YS10ZXRoZXItaWQnLCB1bmlxdWVJZCgpKTtcbiAgICBleHRlbmQobm9kZS5zdHlsZSwge1xuICAgICAgdG9wOiAwLFxuICAgICAgbGVmdDogMCxcbiAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnXG4gICAgfSk7XG5cbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG5vZGUpO1xuXG4gICAgemVyb0VsZW1lbnQgPSBub2RlO1xuICB9XG5cbiAgdmFyIGlkID0gbm9kZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtdGV0aGVyLWlkJyk7XG4gIGlmICh0eXBlb2YgemVyb1Bvc0NhY2hlW2lkXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB6ZXJvUG9zQ2FjaGVbaWRdID0gZ2V0QWN0dWFsQm91bmRpbmdDbGllbnRSZWN0KG5vZGUpO1xuXG4gICAgLy8gQ2xlYXIgdGhlIGNhY2hlIHdoZW4gdGhpcyBwb3NpdGlvbiBjYWxsIGlzIGRvbmVcbiAgICBkZWZlcihmdW5jdGlvbiAoKSB7XG4gICAgICBkZWxldGUgemVyb1Bvc0NhY2hlW2lkXTtcbiAgICB9KTtcbiAgfVxuXG4gIHJldHVybiB6ZXJvUG9zQ2FjaGVbaWRdO1xufTtcblxuZnVuY3Rpb24gcmVtb3ZlVXRpbEVsZW1lbnRzKCkge1xuICBpZiAoemVyb0VsZW1lbnQpIHtcbiAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHplcm9FbGVtZW50KTtcbiAgfVxuICB6ZXJvRWxlbWVudCA9IG51bGw7XG59O1xuXG5mdW5jdGlvbiBnZXRCb3VuZHMoZWwpIHtcbiAgdmFyIGRvYyA9IHVuZGVmaW5lZDtcbiAgaWYgKGVsID09PSBkb2N1bWVudCkge1xuICAgIGRvYyA9IGRvY3VtZW50O1xuICAgIGVsID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xuICB9IGVsc2Uge1xuICAgIGRvYyA9IGVsLm93bmVyRG9jdW1lbnQ7XG4gIH1cblxuICB2YXIgZG9jRWwgPSBkb2MuZG9jdW1lbnRFbGVtZW50O1xuXG4gIHZhciBib3ggPSBnZXRBY3R1YWxCb3VuZGluZ0NsaWVudFJlY3QoZWwpO1xuXG4gIHZhciBvcmlnaW4gPSBnZXRPcmlnaW4oKTtcblxuICBib3gudG9wIC09IG9yaWdpbi50b3A7XG4gIGJveC5sZWZ0IC09IG9yaWdpbi5sZWZ0O1xuXG4gIGlmICh0eXBlb2YgYm94LndpZHRoID09PSAndW5kZWZpbmVkJykge1xuICAgIGJveC53aWR0aCA9IGRvY3VtZW50LmJvZHkuc2Nyb2xsV2lkdGggLSBib3gubGVmdCAtIGJveC5yaWdodDtcbiAgfVxuICBpZiAodHlwZW9mIGJveC5oZWlnaHQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgYm94LmhlaWdodCA9IGRvY3VtZW50LmJvZHkuc2Nyb2xsSGVpZ2h0IC0gYm94LnRvcCAtIGJveC5ib3R0b207XG4gIH1cblxuICBib3gudG9wID0gYm94LnRvcCAtIGRvY0VsLmNsaWVudFRvcDtcbiAgYm94LmxlZnQgPSBib3gubGVmdCAtIGRvY0VsLmNsaWVudExlZnQ7XG4gIGJveC5yaWdodCA9IGRvYy5ib2R5LmNsaWVudFdpZHRoIC0gYm94LndpZHRoIC0gYm94LmxlZnQ7XG4gIGJveC5ib3R0b20gPSBkb2MuYm9keS5jbGllbnRIZWlnaHQgLSBib3guaGVpZ2h0IC0gYm94LnRvcDtcblxuICByZXR1cm4gYm94O1xufVxuXG5mdW5jdGlvbiBnZXRPZmZzZXRQYXJlbnQoZWwpIHtcbiAgcmV0dXJuIGVsLm9mZnNldFBhcmVudCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG59XG5cbnZhciBfc2Nyb2xsQmFyU2l6ZSA9IG51bGw7XG5mdW5jdGlvbiBnZXRTY3JvbGxCYXJTaXplKCkge1xuICBpZiAoX3Njcm9sbEJhclNpemUpIHtcbiAgICByZXR1cm4gX3Njcm9sbEJhclNpemU7XG4gIH1cbiAgdmFyIGlubmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGlubmVyLnN0eWxlLndpZHRoID0gJzEwMCUnO1xuICBpbm5lci5zdHlsZS5oZWlnaHQgPSAnMjAwcHgnO1xuXG4gIHZhciBvdXRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICBleHRlbmQob3V0ZXIuc3R5bGUsIHtcbiAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICB0b3A6IDAsXG4gICAgbGVmdDogMCxcbiAgICBwb2ludGVyRXZlbnRzOiAnbm9uZScsXG4gICAgdmlzaWJpbGl0eTogJ2hpZGRlbicsXG4gICAgd2lkdGg6ICcyMDBweCcsXG4gICAgaGVpZ2h0OiAnMTUwcHgnLFxuICAgIG92ZXJmbG93OiAnaGlkZGVuJ1xuICB9KTtcblxuICBvdXRlci5hcHBlbmRDaGlsZChpbm5lcik7XG5cbiAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChvdXRlcik7XG5cbiAgdmFyIHdpZHRoQ29udGFpbmVkID0gaW5uZXIub2Zmc2V0V2lkdGg7XG4gIG91dGVyLnN0eWxlLm92ZXJmbG93ID0gJ3Njcm9sbCc7XG4gIHZhciB3aWR0aFNjcm9sbCA9IGlubmVyLm9mZnNldFdpZHRoO1xuXG4gIGlmICh3aWR0aENvbnRhaW5lZCA9PT0gd2lkdGhTY3JvbGwpIHtcbiAgICB3aWR0aFNjcm9sbCA9IG91dGVyLmNsaWVudFdpZHRoO1xuICB9XG5cbiAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChvdXRlcik7XG5cbiAgdmFyIHdpZHRoID0gd2lkdGhDb250YWluZWQgLSB3aWR0aFNjcm9sbDtcblxuICBfc2Nyb2xsQmFyU2l6ZSA9IHsgd2lkdGg6IHdpZHRoLCBoZWlnaHQ6IHdpZHRoIH07XG4gIHJldHVybiBfc2Nyb2xsQmFyU2l6ZTtcbn1cblxuZnVuY3Rpb24gZXh0ZW5kKCkge1xuICB2YXIgb3V0ID0gYXJndW1lbnRzLmxlbmd0aCA8PSAwIHx8IGFyZ3VtZW50c1swXSA9PT0gdW5kZWZpbmVkID8ge30gOiBhcmd1bWVudHNbMF07XG5cbiAgdmFyIGFyZ3MgPSBbXTtcblxuICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShhcmdzLCBhcmd1bWVudHMpO1xuXG4gIGFyZ3Muc2xpY2UoMSkuZm9yRWFjaChmdW5jdGlvbiAob2JqKSB7XG4gICAgaWYgKG9iaikge1xuICAgICAgZm9yICh2YXIga2V5IGluIG9iaikge1xuICAgICAgICBpZiAoKHt9KS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkge1xuICAgICAgICAgIG91dFtrZXldID0gb2JqW2tleV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiBvdXQ7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZUNsYXNzKGVsLCBuYW1lKSB7XG4gIGlmICh0eXBlb2YgZWwuY2xhc3NMaXN0ICE9PSAndW5kZWZpbmVkJykge1xuICAgIG5hbWUuc3BsaXQoJyAnKS5mb3JFYWNoKGZ1bmN0aW9uIChjbHMpIHtcbiAgICAgIGlmIChjbHMudHJpbSgpKSB7XG4gICAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoY2xzKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgcmVnZXggPSBuZXcgUmVnRXhwKCcoXnwgKScgKyBuYW1lLnNwbGl0KCcgJykuam9pbignfCcpICsgJyggfCQpJywgJ2dpJyk7XG4gICAgdmFyIGNsYXNzTmFtZSA9IGdldENsYXNzTmFtZShlbCkucmVwbGFjZShyZWdleCwgJyAnKTtcbiAgICBzZXRDbGFzc05hbWUoZWwsIGNsYXNzTmFtZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gYWRkQ2xhc3MoZWwsIG5hbWUpIHtcbiAgaWYgKHR5cGVvZiBlbC5jbGFzc0xpc3QgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgbmFtZS5zcGxpdCgnICcpLmZvckVhY2goZnVuY3Rpb24gKGNscykge1xuICAgICAgaWYgKGNscy50cmltKCkpIHtcbiAgICAgICAgZWwuY2xhc3NMaXN0LmFkZChjbHMpO1xuICAgICAgfVxuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIHJlbW92ZUNsYXNzKGVsLCBuYW1lKTtcbiAgICB2YXIgY2xzID0gZ2V0Q2xhc3NOYW1lKGVsKSArICgnICcgKyBuYW1lKTtcbiAgICBzZXRDbGFzc05hbWUoZWwsIGNscyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gaGFzQ2xhc3MoZWwsIG5hbWUpIHtcbiAgaWYgKHR5cGVvZiBlbC5jbGFzc0xpc3QgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgcmV0dXJuIGVsLmNsYXNzTGlzdC5jb250YWlucyhuYW1lKTtcbiAgfVxuICB2YXIgY2xhc3NOYW1lID0gZ2V0Q2xhc3NOYW1lKGVsKTtcbiAgcmV0dXJuIG5ldyBSZWdFeHAoJyhefCApJyArIG5hbWUgKyAnKCB8JCknLCAnZ2knKS50ZXN0KGNsYXNzTmFtZSk7XG59XG5cbmZ1bmN0aW9uIGdldENsYXNzTmFtZShlbCkge1xuICAvLyBDYW4ndCB1c2UganVzdCBTVkdBbmltYXRlZFN0cmluZyBoZXJlIHNpbmNlIG5vZGVzIHdpdGhpbiBhIEZyYW1lIGluIElFIGhhdmVcbiAgLy8gY29tcGxldGVseSBzZXBhcmF0ZWx5IFNWR0FuaW1hdGVkU3RyaW5nIGJhc2UgY2xhc3Nlc1xuICBpZiAoZWwuY2xhc3NOYW1lIGluc3RhbmNlb2YgZWwub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldy5TVkdBbmltYXRlZFN0cmluZykge1xuICAgIHJldHVybiBlbC5jbGFzc05hbWUuYmFzZVZhbDtcbiAgfVxuICByZXR1cm4gZWwuY2xhc3NOYW1lO1xufVxuXG5mdW5jdGlvbiBzZXRDbGFzc05hbWUoZWwsIGNsYXNzTmFtZSkge1xuICBlbC5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgY2xhc3NOYW1lKTtcbn1cblxuZnVuY3Rpb24gdXBkYXRlQ2xhc3NlcyhlbCwgYWRkLCBhbGwpIHtcbiAgLy8gT2YgdGhlIHNldCBvZiAnYWxsJyBjbGFzc2VzLCB3ZSBuZWVkIHRoZSAnYWRkJyBjbGFzc2VzLCBhbmQgb25seSB0aGVcbiAgLy8gJ2FkZCcgY2xhc3NlcyB0byBiZSBzZXQuXG4gIGFsbC5mb3JFYWNoKGZ1bmN0aW9uIChjbHMpIHtcbiAgICBpZiAoYWRkLmluZGV4T2YoY2xzKSA9PT0gLTEgJiYgaGFzQ2xhc3MoZWwsIGNscykpIHtcbiAgICAgIHJlbW92ZUNsYXNzKGVsLCBjbHMpO1xuICAgIH1cbiAgfSk7XG5cbiAgYWRkLmZvckVhY2goZnVuY3Rpb24gKGNscykge1xuICAgIGlmICghaGFzQ2xhc3MoZWwsIGNscykpIHtcbiAgICAgIGFkZENsYXNzKGVsLCBjbHMpO1xuICAgIH1cbiAgfSk7XG59XG5cbnZhciBkZWZlcnJlZCA9IFtdO1xuXG52YXIgZGVmZXIgPSBmdW5jdGlvbiBkZWZlcihmbikge1xuICBkZWZlcnJlZC5wdXNoKGZuKTtcbn07XG5cbnZhciBmbHVzaCA9IGZ1bmN0aW9uIGZsdXNoKCkge1xuICB2YXIgZm4gPSB1bmRlZmluZWQ7XG4gIHdoaWxlIChmbiA9IGRlZmVycmVkLnBvcCgpKSB7XG4gICAgZm4oKTtcbiAgfVxufTtcblxudmFyIEV2ZW50ZWQgPSAoZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBFdmVudGVkKCkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBFdmVudGVkKTtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhFdmVudGVkLCBbe1xuICAgIGtleTogJ29uJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gb24oZXZlbnQsIGhhbmRsZXIsIGN0eCkge1xuICAgICAgdmFyIG9uY2UgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDMgfHwgYXJndW1lbnRzWzNdID09PSB1bmRlZmluZWQgPyBmYWxzZSA6IGFyZ3VtZW50c1szXTtcblxuICAgICAgaWYgKHR5cGVvZiB0aGlzLmJpbmRpbmdzID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICB0aGlzLmJpbmRpbmdzID0ge307XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIHRoaXMuYmluZGluZ3NbZXZlbnRdID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICB0aGlzLmJpbmRpbmdzW2V2ZW50XSA9IFtdO1xuICAgICAgfVxuICAgICAgdGhpcy5iaW5kaW5nc1tldmVudF0ucHVzaCh7IGhhbmRsZXI6IGhhbmRsZXIsIGN0eDogY3R4LCBvbmNlOiBvbmNlIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ29uY2UnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvbmNlKGV2ZW50LCBoYW5kbGVyLCBjdHgpIHtcbiAgICAgIHRoaXMub24oZXZlbnQsIGhhbmRsZXIsIGN0eCwgdHJ1ZSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnb2ZmJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gb2ZmKGV2ZW50LCBoYW5kbGVyKSB7XG4gICAgICBpZiAodHlwZW9mIHRoaXMuYmluZGluZ3MgPT09ICd1bmRlZmluZWQnIHx8IHR5cGVvZiB0aGlzLmJpbmRpbmdzW2V2ZW50XSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIGhhbmRsZXIgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLmJpbmRpbmdzW2V2ZW50XTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgd2hpbGUgKGkgPCB0aGlzLmJpbmRpbmdzW2V2ZW50XS5sZW5ndGgpIHtcbiAgICAgICAgICBpZiAodGhpcy5iaW5kaW5nc1tldmVudF1baV0uaGFuZGxlciA9PT0gaGFuZGxlcikge1xuICAgICAgICAgICAgdGhpcy5iaW5kaW5nc1tldmVudF0uc3BsaWNlKGksIDEpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICArK2k7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAndHJpZ2dlcicsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHRyaWdnZXIoZXZlbnQpIHtcbiAgICAgIGlmICh0eXBlb2YgdGhpcy5iaW5kaW5ncyAhPT0gJ3VuZGVmaW5lZCcgJiYgdGhpcy5iaW5kaW5nc1tldmVudF0pIHtcbiAgICAgICAgdmFyIGkgPSAwO1xuXG4gICAgICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbiA+IDEgPyBfbGVuIC0gMSA6IDApLCBfa2V5ID0gMTsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgICAgIGFyZ3NbX2tleSAtIDFdID0gYXJndW1lbnRzW19rZXldO1xuICAgICAgICB9XG5cbiAgICAgICAgd2hpbGUgKGkgPCB0aGlzLmJpbmRpbmdzW2V2ZW50XS5sZW5ndGgpIHtcbiAgICAgICAgICB2YXIgX2JpbmRpbmdzJGV2ZW50JGkgPSB0aGlzLmJpbmRpbmdzW2V2ZW50XVtpXTtcbiAgICAgICAgICB2YXIgaGFuZGxlciA9IF9iaW5kaW5ncyRldmVudCRpLmhhbmRsZXI7XG4gICAgICAgICAgdmFyIGN0eCA9IF9iaW5kaW5ncyRldmVudCRpLmN0eDtcbiAgICAgICAgICB2YXIgb25jZSA9IF9iaW5kaW5ncyRldmVudCRpLm9uY2U7XG5cbiAgICAgICAgICB2YXIgY29udGV4dCA9IGN0eDtcbiAgICAgICAgICBpZiAodHlwZW9mIGNvbnRleHQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBjb250ZXh0ID0gdGhpcztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBoYW5kbGVyLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuXG4gICAgICAgICAgaWYgKG9uY2UpIHtcbiAgICAgICAgICAgIHRoaXMuYmluZGluZ3NbZXZlbnRdLnNwbGljZShpLCAxKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgKytpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBFdmVudGVkO1xufSkoKTtcblxuVGV0aGVyQmFzZS5VdGlscyA9IHtcbiAgZ2V0QWN0dWFsQm91bmRpbmdDbGllbnRSZWN0OiBnZXRBY3R1YWxCb3VuZGluZ0NsaWVudFJlY3QsXG4gIGdldFNjcm9sbFBhcmVudHM6IGdldFNjcm9sbFBhcmVudHMsXG4gIGdldEJvdW5kczogZ2V0Qm91bmRzLFxuICBnZXRPZmZzZXRQYXJlbnQ6IGdldE9mZnNldFBhcmVudCxcbiAgZXh0ZW5kOiBleHRlbmQsXG4gIGFkZENsYXNzOiBhZGRDbGFzcyxcbiAgcmVtb3ZlQ2xhc3M6IHJlbW92ZUNsYXNzLFxuICBoYXNDbGFzczogaGFzQ2xhc3MsXG4gIHVwZGF0ZUNsYXNzZXM6IHVwZGF0ZUNsYXNzZXMsXG4gIGRlZmVyOiBkZWZlcixcbiAgZmx1c2g6IGZsdXNoLFxuICB1bmlxdWVJZDogdW5pcXVlSWQsXG4gIEV2ZW50ZWQ6IEV2ZW50ZWQsXG4gIGdldFNjcm9sbEJhclNpemU6IGdldFNjcm9sbEJhclNpemUsXG4gIHJlbW92ZVV0aWxFbGVtZW50czogcmVtb3ZlVXRpbEVsZW1lbnRzXG59O1xuLyogZ2xvYmFscyBUZXRoZXJCYXNlLCBwZXJmb3JtYW5jZSAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBfc2xpY2VkVG9BcnJheSA9IChmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIHNsaWNlSXRlcmF0b3IoYXJyLCBpKSB7IHZhciBfYXJyID0gW107IHZhciBfbiA9IHRydWU7IHZhciBfZCA9IGZhbHNlOyB2YXIgX2UgPSB1bmRlZmluZWQ7IHRyeSB7IGZvciAodmFyIF9pID0gYXJyW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3M7ICEoX24gPSAoX3MgPSBfaS5uZXh0KCkpLmRvbmUpOyBfbiA9IHRydWUpIHsgX2Fyci5wdXNoKF9zLnZhbHVlKTsgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrOyB9IH0gY2F0Y2ggKGVycikgeyBfZCA9IHRydWU7IF9lID0gZXJyOyB9IGZpbmFsbHkgeyB0cnkgeyBpZiAoIV9uICYmIF9pWydyZXR1cm4nXSkgX2lbJ3JldHVybiddKCk7IH0gZmluYWxseSB7IGlmIChfZCkgdGhyb3cgX2U7IH0gfSByZXR1cm4gX2FycjsgfSByZXR1cm4gZnVuY3Rpb24gKGFyciwgaSkgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7IHJldHVybiBhcnI7IH0gZWxzZSBpZiAoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChhcnIpKSB7IHJldHVybiBzbGljZUl0ZXJhdG9yKGFyciwgaSk7IH0gZWxzZSB7IHRocm93IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UnKTsgfSB9OyB9KSgpO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gKGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgndmFsdWUnIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KSgpO1xuXG52YXIgX2dldCA9IGZ1bmN0aW9uIGdldChfeDYsIF94NywgX3g4KSB7IHZhciBfYWdhaW4gPSB0cnVlOyBfZnVuY3Rpb246IHdoaWxlIChfYWdhaW4pIHsgdmFyIG9iamVjdCA9IF94NiwgcHJvcGVydHkgPSBfeDcsIHJlY2VpdmVyID0gX3g4OyBfYWdhaW4gPSBmYWxzZTsgaWYgKG9iamVjdCA9PT0gbnVsbCkgb2JqZWN0ID0gRnVuY3Rpb24ucHJvdG90eXBlOyB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBwcm9wZXJ0eSk7IGlmIChkZXNjID09PSB1bmRlZmluZWQpIHsgdmFyIHBhcmVudCA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihvYmplY3QpOyBpZiAocGFyZW50ID09PSBudWxsKSB7IHJldHVybiB1bmRlZmluZWQ7IH0gZWxzZSB7IF94NiA9IHBhcmVudDsgX3g3ID0gcHJvcGVydHk7IF94OCA9IHJlY2VpdmVyOyBfYWdhaW4gPSB0cnVlOyBkZXNjID0gcGFyZW50ID0gdW5kZWZpbmVkOyBjb250aW51ZSBfZnVuY3Rpb247IH0gfSBlbHNlIGlmICgndmFsdWUnIGluIGRlc2MpIHsgcmV0dXJuIGRlc2MudmFsdWU7IH0gZWxzZSB7IHZhciBnZXR0ZXIgPSBkZXNjLmdldDsgaWYgKGdldHRlciA9PT0gdW5kZWZpbmVkKSB7IHJldHVybiB1bmRlZmluZWQ7IH0gcmV0dXJuIGdldHRlci5jYWxsKHJlY2VpdmVyKTsgfSB9IH07XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uJyk7IH0gfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSAnZnVuY3Rpb24nICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcignU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAnICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG5pZiAodHlwZW9mIFRldGhlckJhc2UgPT09ICd1bmRlZmluZWQnKSB7XG4gIHRocm93IG5ldyBFcnJvcignWW91IG11c3QgaW5jbHVkZSB0aGUgdXRpbHMuanMgZmlsZSBiZWZvcmUgdGV0aGVyLmpzJyk7XG59XG5cbnZhciBfVGV0aGVyQmFzZSRVdGlscyA9IFRldGhlckJhc2UuVXRpbHM7XG52YXIgZ2V0U2Nyb2xsUGFyZW50cyA9IF9UZXRoZXJCYXNlJFV0aWxzLmdldFNjcm9sbFBhcmVudHM7XG52YXIgZ2V0Qm91bmRzID0gX1RldGhlckJhc2UkVXRpbHMuZ2V0Qm91bmRzO1xudmFyIGdldE9mZnNldFBhcmVudCA9IF9UZXRoZXJCYXNlJFV0aWxzLmdldE9mZnNldFBhcmVudDtcbnZhciBleHRlbmQgPSBfVGV0aGVyQmFzZSRVdGlscy5leHRlbmQ7XG52YXIgYWRkQ2xhc3MgPSBfVGV0aGVyQmFzZSRVdGlscy5hZGRDbGFzcztcbnZhciByZW1vdmVDbGFzcyA9IF9UZXRoZXJCYXNlJFV0aWxzLnJlbW92ZUNsYXNzO1xudmFyIHVwZGF0ZUNsYXNzZXMgPSBfVGV0aGVyQmFzZSRVdGlscy51cGRhdGVDbGFzc2VzO1xudmFyIGRlZmVyID0gX1RldGhlckJhc2UkVXRpbHMuZGVmZXI7XG52YXIgZmx1c2ggPSBfVGV0aGVyQmFzZSRVdGlscy5mbHVzaDtcbnZhciBnZXRTY3JvbGxCYXJTaXplID0gX1RldGhlckJhc2UkVXRpbHMuZ2V0U2Nyb2xsQmFyU2l6ZTtcbnZhciByZW1vdmVVdGlsRWxlbWVudHMgPSBfVGV0aGVyQmFzZSRVdGlscy5yZW1vdmVVdGlsRWxlbWVudHM7XG5cbmZ1bmN0aW9uIHdpdGhpbihhLCBiKSB7XG4gIHZhciBkaWZmID0gYXJndW1lbnRzLmxlbmd0aCA8PSAyIHx8IGFyZ3VtZW50c1syXSA9PT0gdW5kZWZpbmVkID8gMSA6IGFyZ3VtZW50c1syXTtcblxuICByZXR1cm4gYSArIGRpZmYgPj0gYiAmJiBiID49IGEgLSBkaWZmO1xufVxuXG52YXIgdHJhbnNmb3JtS2V5ID0gKGZ1bmN0aW9uICgpIHtcbiAgaWYgKHR5cGVvZiBkb2N1bWVudCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm4gJyc7XG4gIH1cbiAgdmFyIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbiAgdmFyIHRyYW5zZm9ybXMgPSBbJ3RyYW5zZm9ybScsICdXZWJraXRUcmFuc2Zvcm0nLCAnT1RyYW5zZm9ybScsICdNb3pUcmFuc2Zvcm0nLCAnbXNUcmFuc2Zvcm0nXTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCB0cmFuc2Zvcm1zLmxlbmd0aDsgKytpKSB7XG4gICAgdmFyIGtleSA9IHRyYW5zZm9ybXNbaV07XG4gICAgaWYgKGVsLnN0eWxlW2tleV0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIGtleTtcbiAgICB9XG4gIH1cbn0pKCk7XG5cbnZhciB0ZXRoZXJzID0gW107XG5cbnZhciBwb3NpdGlvbiA9IGZ1bmN0aW9uIHBvc2l0aW9uKCkge1xuICB0ZXRoZXJzLmZvckVhY2goZnVuY3Rpb24gKHRldGhlcikge1xuICAgIHRldGhlci5wb3NpdGlvbihmYWxzZSk7XG4gIH0pO1xuICBmbHVzaCgpO1xufTtcblxuZnVuY3Rpb24gbm93KCkge1xuICBpZiAodHlwZW9mIHBlcmZvcm1hbmNlICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgcGVyZm9ybWFuY2Uubm93ICE9PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybiBwZXJmb3JtYW5jZS5ub3coKTtcbiAgfVxuICByZXR1cm4gK25ldyBEYXRlKCk7XG59XG5cbihmdW5jdGlvbiAoKSB7XG4gIHZhciBsYXN0Q2FsbCA9IG51bGw7XG4gIHZhciBsYXN0RHVyYXRpb24gPSBudWxsO1xuICB2YXIgcGVuZGluZ1RpbWVvdXQgPSBudWxsO1xuXG4gIHZhciB0aWNrID0gZnVuY3Rpb24gdGljaygpIHtcbiAgICBpZiAodHlwZW9mIGxhc3REdXJhdGlvbiAhPT0gJ3VuZGVmaW5lZCcgJiYgbGFzdER1cmF0aW9uID4gMTYpIHtcbiAgICAgIC8vIFdlIHZvbHVudGFyaWx5IHRocm90dGxlIG91cnNlbHZlcyBpZiB3ZSBjYW4ndCBtYW5hZ2UgNjBmcHNcbiAgICAgIGxhc3REdXJhdGlvbiA9IE1hdGgubWluKGxhc3REdXJhdGlvbiAtIDE2LCAyNTApO1xuXG4gICAgICAvLyBKdXN0IGluIGNhc2UgdGhpcyBpcyB0aGUgbGFzdCBldmVudCwgcmVtZW1iZXIgdG8gcG9zaXRpb24ganVzdCBvbmNlIG1vcmVcbiAgICAgIHBlbmRpbmdUaW1lb3V0ID0gc2V0VGltZW91dCh0aWNrLCAyNTApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgbGFzdENhbGwgIT09ICd1bmRlZmluZWQnICYmIG5vdygpIC0gbGFzdENhbGwgPCAxMCkge1xuICAgICAgLy8gU29tZSBicm93c2VycyBjYWxsIGV2ZW50cyBhIGxpdHRsZSB0b28gZnJlcXVlbnRseSwgcmVmdXNlIHRvIHJ1biBtb3JlIHRoYW4gaXMgcmVhc29uYWJsZVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChwZW5kaW5nVGltZW91dCAhPSBudWxsKSB7XG4gICAgICBjbGVhclRpbWVvdXQocGVuZGluZ1RpbWVvdXQpO1xuICAgICAgcGVuZGluZ1RpbWVvdXQgPSBudWxsO1xuICAgIH1cblxuICAgIGxhc3RDYWxsID0gbm93KCk7XG4gICAgcG9zaXRpb24oKTtcbiAgICBsYXN0RHVyYXRpb24gPSBub3coKSAtIGxhc3RDYWxsO1xuICB9O1xuXG4gIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2Ygd2luZG93LmFkZEV2ZW50TGlzdGVuZXIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgWydyZXNpemUnLCAnc2Nyb2xsJywgJ3RvdWNobW92ZSddLmZvckVhY2goZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgdGljayk7XG4gICAgfSk7XG4gIH1cbn0pKCk7XG5cbnZhciBNSVJST1JfTFIgPSB7XG4gIGNlbnRlcjogJ2NlbnRlcicsXG4gIGxlZnQ6ICdyaWdodCcsXG4gIHJpZ2h0OiAnbGVmdCdcbn07XG5cbnZhciBNSVJST1JfVEIgPSB7XG4gIG1pZGRsZTogJ21pZGRsZScsXG4gIHRvcDogJ2JvdHRvbScsXG4gIGJvdHRvbTogJ3RvcCdcbn07XG5cbnZhciBPRkZTRVRfTUFQID0ge1xuICB0b3A6IDAsXG4gIGxlZnQ6IDAsXG4gIG1pZGRsZTogJzUwJScsXG4gIGNlbnRlcjogJzUwJScsXG4gIGJvdHRvbTogJzEwMCUnLFxuICByaWdodDogJzEwMCUnXG59O1xuXG52YXIgYXV0b1RvRml4ZWRBdHRhY2htZW50ID0gZnVuY3Rpb24gYXV0b1RvRml4ZWRBdHRhY2htZW50KGF0dGFjaG1lbnQsIHJlbGF0aXZlVG9BdHRhY2htZW50KSB7XG4gIHZhciBsZWZ0ID0gYXR0YWNobWVudC5sZWZ0O1xuICB2YXIgdG9wID0gYXR0YWNobWVudC50b3A7XG5cbiAgaWYgKGxlZnQgPT09ICdhdXRvJykge1xuICAgIGxlZnQgPSBNSVJST1JfTFJbcmVsYXRpdmVUb0F0dGFjaG1lbnQubGVmdF07XG4gIH1cblxuICBpZiAodG9wID09PSAnYXV0bycpIHtcbiAgICB0b3AgPSBNSVJST1JfVEJbcmVsYXRpdmVUb0F0dGFjaG1lbnQudG9wXTtcbiAgfVxuXG4gIHJldHVybiB7IGxlZnQ6IGxlZnQsIHRvcDogdG9wIH07XG59O1xuXG52YXIgYXR0YWNobWVudFRvT2Zmc2V0ID0gZnVuY3Rpb24gYXR0YWNobWVudFRvT2Zmc2V0KGF0dGFjaG1lbnQpIHtcbiAgdmFyIGxlZnQgPSBhdHRhY2htZW50LmxlZnQ7XG4gIHZhciB0b3AgPSBhdHRhY2htZW50LnRvcDtcblxuICBpZiAodHlwZW9mIE9GRlNFVF9NQVBbYXR0YWNobWVudC5sZWZ0XSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBsZWZ0ID0gT0ZGU0VUX01BUFthdHRhY2htZW50LmxlZnRdO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBPRkZTRVRfTUFQW2F0dGFjaG1lbnQudG9wXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB0b3AgPSBPRkZTRVRfTUFQW2F0dGFjaG1lbnQudG9wXTtcbiAgfVxuXG4gIHJldHVybiB7IGxlZnQ6IGxlZnQsIHRvcDogdG9wIH07XG59O1xuXG5mdW5jdGlvbiBhZGRPZmZzZXQoKSB7XG4gIHZhciBvdXQgPSB7IHRvcDogMCwgbGVmdDogMCB9O1xuXG4gIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBvZmZzZXRzID0gQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgb2Zmc2V0c1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgfVxuXG4gIG9mZnNldHMuZm9yRWFjaChmdW5jdGlvbiAoX3JlZikge1xuICAgIHZhciB0b3AgPSBfcmVmLnRvcDtcbiAgICB2YXIgbGVmdCA9IF9yZWYubGVmdDtcblxuICAgIGlmICh0eXBlb2YgdG9wID09PSAnc3RyaW5nJykge1xuICAgICAgdG9wID0gcGFyc2VGbG9hdCh0b3AsIDEwKTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBsZWZ0ID09PSAnc3RyaW5nJykge1xuICAgICAgbGVmdCA9IHBhcnNlRmxvYXQobGVmdCwgMTApO1xuICAgIH1cblxuICAgIG91dC50b3AgKz0gdG9wO1xuICAgIG91dC5sZWZ0ICs9IGxlZnQ7XG4gIH0pO1xuXG4gIHJldHVybiBvdXQ7XG59XG5cbmZ1bmN0aW9uIG9mZnNldFRvUHgob2Zmc2V0LCBzaXplKSB7XG4gIGlmICh0eXBlb2Ygb2Zmc2V0LmxlZnQgPT09ICdzdHJpbmcnICYmIG9mZnNldC5sZWZ0LmluZGV4T2YoJyUnKSAhPT0gLTEpIHtcbiAgICBvZmZzZXQubGVmdCA9IHBhcnNlRmxvYXQob2Zmc2V0LmxlZnQsIDEwKSAvIDEwMCAqIHNpemUud2lkdGg7XG4gIH1cbiAgaWYgKHR5cGVvZiBvZmZzZXQudG9wID09PSAnc3RyaW5nJyAmJiBvZmZzZXQudG9wLmluZGV4T2YoJyUnKSAhPT0gLTEpIHtcbiAgICBvZmZzZXQudG9wID0gcGFyc2VGbG9hdChvZmZzZXQudG9wLCAxMCkgLyAxMDAgKiBzaXplLmhlaWdodDtcbiAgfVxuXG4gIHJldHVybiBvZmZzZXQ7XG59XG5cbnZhciBwYXJzZU9mZnNldCA9IGZ1bmN0aW9uIHBhcnNlT2Zmc2V0KHZhbHVlKSB7XG4gIHZhciBfdmFsdWUkc3BsaXQgPSB2YWx1ZS5zcGxpdCgnICcpO1xuXG4gIHZhciBfdmFsdWUkc3BsaXQyID0gX3NsaWNlZFRvQXJyYXkoX3ZhbHVlJHNwbGl0LCAyKTtcblxuICB2YXIgdG9wID0gX3ZhbHVlJHNwbGl0MlswXTtcbiAgdmFyIGxlZnQgPSBfdmFsdWUkc3BsaXQyWzFdO1xuXG4gIHJldHVybiB7IHRvcDogdG9wLCBsZWZ0OiBsZWZ0IH07XG59O1xudmFyIHBhcnNlQXR0YWNobWVudCA9IHBhcnNlT2Zmc2V0O1xuXG52YXIgVGV0aGVyQ2xhc3MgPSAoZnVuY3Rpb24gKF9FdmVudGVkKSB7XG4gIF9pbmhlcml0cyhUZXRoZXJDbGFzcywgX0V2ZW50ZWQpO1xuXG4gIGZ1bmN0aW9uIFRldGhlckNsYXNzKG9wdGlvbnMpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFRldGhlckNsYXNzKTtcblxuICAgIF9nZXQoT2JqZWN0LmdldFByb3RvdHlwZU9mKFRldGhlckNsYXNzLnByb3RvdHlwZSksICdjb25zdHJ1Y3RvcicsIHRoaXMpLmNhbGwodGhpcyk7XG4gICAgdGhpcy5wb3NpdGlvbiA9IHRoaXMucG9zaXRpb24uYmluZCh0aGlzKTtcblxuICAgIHRldGhlcnMucHVzaCh0aGlzKTtcblxuICAgIHRoaXMuaGlzdG9yeSA9IFtdO1xuXG4gICAgdGhpcy5zZXRPcHRpb25zKG9wdGlvbnMsIGZhbHNlKTtcblxuICAgIFRldGhlckJhc2UubW9kdWxlcy5mb3JFYWNoKGZ1bmN0aW9uIChtb2R1bGUpIHtcbiAgICAgIGlmICh0eXBlb2YgbW9kdWxlLmluaXRpYWxpemUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIG1vZHVsZS5pbml0aWFsaXplLmNhbGwoX3RoaXMpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy5wb3NpdGlvbigpO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKFRldGhlckNsYXNzLCBbe1xuICAgIGtleTogJ2dldENsYXNzJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Q2xhc3MoKSB7XG4gICAgICB2YXIga2V5ID0gYXJndW1lbnRzLmxlbmd0aCA8PSAwIHx8IGFyZ3VtZW50c1swXSA9PT0gdW5kZWZpbmVkID8gJycgOiBhcmd1bWVudHNbMF07XG4gICAgICB2YXIgY2xhc3NlcyA9IHRoaXMub3B0aW9ucy5jbGFzc2VzO1xuXG4gICAgICBpZiAodHlwZW9mIGNsYXNzZXMgIT09ICd1bmRlZmluZWQnICYmIGNsYXNzZXNba2V5XSkge1xuICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLmNsYXNzZXNba2V5XTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5vcHRpb25zLmNsYXNzUHJlZml4KSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMuY2xhc3NQcmVmaXggKyAnLScgKyBrZXk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4ga2V5O1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3NldE9wdGlvbnMnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRPcHRpb25zKG9wdGlvbnMpIHtcbiAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICB2YXIgcG9zID0gYXJndW1lbnRzLmxlbmd0aCA8PSAxIHx8IGFyZ3VtZW50c1sxXSA9PT0gdW5kZWZpbmVkID8gdHJ1ZSA6IGFyZ3VtZW50c1sxXTtcblxuICAgICAgdmFyIGRlZmF1bHRzID0ge1xuICAgICAgICBvZmZzZXQ6ICcwIDAnLFxuICAgICAgICB0YXJnZXRPZmZzZXQ6ICcwIDAnLFxuICAgICAgICB0YXJnZXRBdHRhY2htZW50OiAnYXV0byBhdXRvJyxcbiAgICAgICAgY2xhc3NQcmVmaXg6ICd0ZXRoZXInXG4gICAgICB9O1xuXG4gICAgICB0aGlzLm9wdGlvbnMgPSBleHRlbmQoZGVmYXVsdHMsIG9wdGlvbnMpO1xuXG4gICAgICB2YXIgX29wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG4gICAgICB2YXIgZWxlbWVudCA9IF9vcHRpb25zLmVsZW1lbnQ7XG4gICAgICB2YXIgdGFyZ2V0ID0gX29wdGlvbnMudGFyZ2V0O1xuICAgICAgdmFyIHRhcmdldE1vZGlmaWVyID0gX29wdGlvbnMudGFyZ2V0TW9kaWZpZXI7XG5cbiAgICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgICB0aGlzLnRhcmdldCA9IHRhcmdldDtcbiAgICAgIHRoaXMudGFyZ2V0TW9kaWZpZXIgPSB0YXJnZXRNb2RpZmllcjtcblxuICAgICAgaWYgKHRoaXMudGFyZ2V0ID09PSAndmlld3BvcnQnKSB7XG4gICAgICAgIHRoaXMudGFyZ2V0ID0gZG9jdW1lbnQuYm9keTtcbiAgICAgICAgdGhpcy50YXJnZXRNb2RpZmllciA9ICd2aXNpYmxlJztcbiAgICAgIH0gZWxzZSBpZiAodGhpcy50YXJnZXQgPT09ICdzY3JvbGwtaGFuZGxlJykge1xuICAgICAgICB0aGlzLnRhcmdldCA9IGRvY3VtZW50LmJvZHk7XG4gICAgICAgIHRoaXMudGFyZ2V0TW9kaWZpZXIgPSAnc2Nyb2xsLWhhbmRsZSc7XG4gICAgICB9XG5cbiAgICAgIFsnZWxlbWVudCcsICd0YXJnZXQnXS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBfdGhpczJba2V5XSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RldGhlciBFcnJvcjogQm90aCBlbGVtZW50IGFuZCB0YXJnZXQgbXVzdCBiZSBkZWZpbmVkJyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHlwZW9mIF90aGlzMltrZXldLmpxdWVyeSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBfdGhpczJba2V5XSA9IF90aGlzMltrZXldWzBdO1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBfdGhpczJba2V5XSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICBfdGhpczJba2V5XSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoX3RoaXMyW2tleV0pO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgYWRkQ2xhc3ModGhpcy5lbGVtZW50LCB0aGlzLmdldENsYXNzKCdlbGVtZW50JykpO1xuICAgICAgaWYgKCEodGhpcy5vcHRpb25zLmFkZFRhcmdldENsYXNzZXMgPT09IGZhbHNlKSkge1xuICAgICAgICBhZGRDbGFzcyh0aGlzLnRhcmdldCwgdGhpcy5nZXRDbGFzcygndGFyZ2V0JykpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIXRoaXMub3B0aW9ucy5hdHRhY2htZW50KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVGV0aGVyIEVycm9yOiBZb3UgbXVzdCBwcm92aWRlIGFuIGF0dGFjaG1lbnQnKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy50YXJnZXRBdHRhY2htZW50ID0gcGFyc2VBdHRhY2htZW50KHRoaXMub3B0aW9ucy50YXJnZXRBdHRhY2htZW50KTtcbiAgICAgIHRoaXMuYXR0YWNobWVudCA9IHBhcnNlQXR0YWNobWVudCh0aGlzLm9wdGlvbnMuYXR0YWNobWVudCk7XG4gICAgICB0aGlzLm9mZnNldCA9IHBhcnNlT2Zmc2V0KHRoaXMub3B0aW9ucy5vZmZzZXQpO1xuICAgICAgdGhpcy50YXJnZXRPZmZzZXQgPSBwYXJzZU9mZnNldCh0aGlzLm9wdGlvbnMudGFyZ2V0T2Zmc2V0KTtcblxuICAgICAgaWYgKHR5cGVvZiB0aGlzLnNjcm9sbFBhcmVudHMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHRoaXMuZGlzYWJsZSgpO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy50YXJnZXRNb2RpZmllciA9PT0gJ3Njcm9sbC1oYW5kbGUnKSB7XG4gICAgICAgIHRoaXMuc2Nyb2xsUGFyZW50cyA9IFt0aGlzLnRhcmdldF07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnNjcm9sbFBhcmVudHMgPSBnZXRTY3JvbGxQYXJlbnRzKHRoaXMudGFyZ2V0KTtcbiAgICAgIH1cblxuICAgICAgaWYgKCEodGhpcy5vcHRpb25zLmVuYWJsZWQgPT09IGZhbHNlKSkge1xuICAgICAgICB0aGlzLmVuYWJsZShwb3MpO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2dldFRhcmdldEJvdW5kcycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldFRhcmdldEJvdW5kcygpIHtcbiAgICAgIGlmICh0eXBlb2YgdGhpcy50YXJnZXRNb2RpZmllciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgaWYgKHRoaXMudGFyZ2V0TW9kaWZpZXIgPT09ICd2aXNpYmxlJykge1xuICAgICAgICAgIGlmICh0aGlzLnRhcmdldCA9PT0gZG9jdW1lbnQuYm9keSkge1xuICAgICAgICAgICAgcmV0dXJuIHsgdG9wOiBwYWdlWU9mZnNldCwgbGVmdDogcGFnZVhPZmZzZXQsIGhlaWdodDogaW5uZXJIZWlnaHQsIHdpZHRoOiBpbm5lcldpZHRoIH07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciBib3VuZHMgPSBnZXRCb3VuZHModGhpcy50YXJnZXQpO1xuXG4gICAgICAgICAgICB2YXIgb3V0ID0ge1xuICAgICAgICAgICAgICBoZWlnaHQ6IGJvdW5kcy5oZWlnaHQsXG4gICAgICAgICAgICAgIHdpZHRoOiBib3VuZHMud2lkdGgsXG4gICAgICAgICAgICAgIHRvcDogYm91bmRzLnRvcCxcbiAgICAgICAgICAgICAgbGVmdDogYm91bmRzLmxlZnRcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIG91dC5oZWlnaHQgPSBNYXRoLm1pbihvdXQuaGVpZ2h0LCBib3VuZHMuaGVpZ2h0IC0gKHBhZ2VZT2Zmc2V0IC0gYm91bmRzLnRvcCkpO1xuICAgICAgICAgICAgb3V0LmhlaWdodCA9IE1hdGgubWluKG91dC5oZWlnaHQsIGJvdW5kcy5oZWlnaHQgLSAoYm91bmRzLnRvcCArIGJvdW5kcy5oZWlnaHQgLSAocGFnZVlPZmZzZXQgKyBpbm5lckhlaWdodCkpKTtcbiAgICAgICAgICAgIG91dC5oZWlnaHQgPSBNYXRoLm1pbihpbm5lckhlaWdodCwgb3V0LmhlaWdodCk7XG4gICAgICAgICAgICBvdXQuaGVpZ2h0IC09IDI7XG5cbiAgICAgICAgICAgIG91dC53aWR0aCA9IE1hdGgubWluKG91dC53aWR0aCwgYm91bmRzLndpZHRoIC0gKHBhZ2VYT2Zmc2V0IC0gYm91bmRzLmxlZnQpKTtcbiAgICAgICAgICAgIG91dC53aWR0aCA9IE1hdGgubWluKG91dC53aWR0aCwgYm91bmRzLndpZHRoIC0gKGJvdW5kcy5sZWZ0ICsgYm91bmRzLndpZHRoIC0gKHBhZ2VYT2Zmc2V0ICsgaW5uZXJXaWR0aCkpKTtcbiAgICAgICAgICAgIG91dC53aWR0aCA9IE1hdGgubWluKGlubmVyV2lkdGgsIG91dC53aWR0aCk7XG4gICAgICAgICAgICBvdXQud2lkdGggLT0gMjtcblxuICAgICAgICAgICAgaWYgKG91dC50b3AgPCBwYWdlWU9mZnNldCkge1xuICAgICAgICAgICAgICBvdXQudG9wID0gcGFnZVlPZmZzZXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob3V0LmxlZnQgPCBwYWdlWE9mZnNldCkge1xuICAgICAgICAgICAgICBvdXQubGVmdCA9IHBhZ2VYT2Zmc2V0O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gb3V0O1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnRhcmdldE1vZGlmaWVyID09PSAnc2Nyb2xsLWhhbmRsZScpIHtcbiAgICAgICAgICB2YXIgYm91bmRzID0gdW5kZWZpbmVkO1xuICAgICAgICAgIHZhciB0YXJnZXQgPSB0aGlzLnRhcmdldDtcbiAgICAgICAgICBpZiAodGFyZ2V0ID09PSBkb2N1bWVudC5ib2R5KSB7XG4gICAgICAgICAgICB0YXJnZXQgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG5cbiAgICAgICAgICAgIGJvdW5kcyA9IHtcbiAgICAgICAgICAgICAgbGVmdDogcGFnZVhPZmZzZXQsXG4gICAgICAgICAgICAgIHRvcDogcGFnZVlPZmZzZXQsXG4gICAgICAgICAgICAgIGhlaWdodDogaW5uZXJIZWlnaHQsXG4gICAgICAgICAgICAgIHdpZHRoOiBpbm5lcldpZHRoXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBib3VuZHMgPSBnZXRCb3VuZHModGFyZ2V0KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB2YXIgc3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKHRhcmdldCk7XG5cbiAgICAgICAgICB2YXIgaGFzQm90dG9tU2Nyb2xsID0gdGFyZ2V0LnNjcm9sbFdpZHRoID4gdGFyZ2V0LmNsaWVudFdpZHRoIHx8IFtzdHlsZS5vdmVyZmxvdywgc3R5bGUub3ZlcmZsb3dYXS5pbmRleE9mKCdzY3JvbGwnKSA+PSAwIHx8IHRoaXMudGFyZ2V0ICE9PSBkb2N1bWVudC5ib2R5O1xuXG4gICAgICAgICAgdmFyIHNjcm9sbEJvdHRvbSA9IDA7XG4gICAgICAgICAgaWYgKGhhc0JvdHRvbVNjcm9sbCkge1xuICAgICAgICAgICAgc2Nyb2xsQm90dG9tID0gMTU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdmFyIGhlaWdodCA9IGJvdW5kcy5oZWlnaHQgLSBwYXJzZUZsb2F0KHN0eWxlLmJvcmRlclRvcFdpZHRoKSAtIHBhcnNlRmxvYXQoc3R5bGUuYm9yZGVyQm90dG9tV2lkdGgpIC0gc2Nyb2xsQm90dG9tO1xuXG4gICAgICAgICAgdmFyIG91dCA9IHtcbiAgICAgICAgICAgIHdpZHRoOiAxNSxcbiAgICAgICAgICAgIGhlaWdodDogaGVpZ2h0ICogMC45NzUgKiAoaGVpZ2h0IC8gdGFyZ2V0LnNjcm9sbEhlaWdodCksXG4gICAgICAgICAgICBsZWZ0OiBib3VuZHMubGVmdCArIGJvdW5kcy53aWR0aCAtIHBhcnNlRmxvYXQoc3R5bGUuYm9yZGVyTGVmdFdpZHRoKSAtIDE1XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHZhciBmaXRBZGogPSAwO1xuICAgICAgICAgIGlmIChoZWlnaHQgPCA0MDggJiYgdGhpcy50YXJnZXQgPT09IGRvY3VtZW50LmJvZHkpIHtcbiAgICAgICAgICAgIGZpdEFkaiA9IC0wLjAwMDExICogTWF0aC5wb3coaGVpZ2h0LCAyKSAtIDAuMDA3MjcgKiBoZWlnaHQgKyAyMi41ODtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAodGhpcy50YXJnZXQgIT09IGRvY3VtZW50LmJvZHkpIHtcbiAgICAgICAgICAgIG91dC5oZWlnaHQgPSBNYXRoLm1heChvdXQuaGVpZ2h0LCAyNCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdmFyIHNjcm9sbFBlcmNlbnRhZ2UgPSB0aGlzLnRhcmdldC5zY3JvbGxUb3AgLyAodGFyZ2V0LnNjcm9sbEhlaWdodCAtIGhlaWdodCk7XG4gICAgICAgICAgb3V0LnRvcCA9IHNjcm9sbFBlcmNlbnRhZ2UgKiAoaGVpZ2h0IC0gb3V0LmhlaWdodCAtIGZpdEFkaikgKyBib3VuZHMudG9wICsgcGFyc2VGbG9hdChzdHlsZS5ib3JkZXJUb3BXaWR0aCk7XG5cbiAgICAgICAgICBpZiAodGhpcy50YXJnZXQgPT09IGRvY3VtZW50LmJvZHkpIHtcbiAgICAgICAgICAgIG91dC5oZWlnaHQgPSBNYXRoLm1heChvdXQuaGVpZ2h0LCAyNCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIG91dDtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGdldEJvdW5kcyh0aGlzLnRhcmdldCk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnY2xlYXJDYWNoZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNsZWFyQ2FjaGUoKSB7XG4gICAgICB0aGlzLl9jYWNoZSA9IHt9O1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2NhY2hlJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gY2FjaGUoaywgZ2V0dGVyKSB7XG4gICAgICAvLyBNb3JlIHRoYW4gb25lIG1vZHVsZSB3aWxsIG9mdGVuIG5lZWQgdGhlIHNhbWUgRE9NIGluZm8sIHNvXG4gICAgICAvLyB3ZSBrZWVwIGEgY2FjaGUgd2hpY2ggaXMgY2xlYXJlZCBvbiBlYWNoIHBvc2l0aW9uIGNhbGxcbiAgICAgIGlmICh0eXBlb2YgdGhpcy5fY2FjaGUgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHRoaXMuX2NhY2hlID0ge307XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2YgdGhpcy5fY2FjaGVba10gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHRoaXMuX2NhY2hlW2tdID0gZ2V0dGVyLmNhbGwodGhpcyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLl9jYWNoZVtrXTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdlbmFibGUnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBlbmFibGUoKSB7XG4gICAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgICAgdmFyIHBvcyA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMCB8fCBhcmd1bWVudHNbMF0gPT09IHVuZGVmaW5lZCA/IHRydWUgOiBhcmd1bWVudHNbMF07XG5cbiAgICAgIGlmICghKHRoaXMub3B0aW9ucy5hZGRUYXJnZXRDbGFzc2VzID09PSBmYWxzZSkpIHtcbiAgICAgICAgYWRkQ2xhc3ModGhpcy50YXJnZXQsIHRoaXMuZ2V0Q2xhc3MoJ2VuYWJsZWQnKSk7XG4gICAgICB9XG4gICAgICBhZGRDbGFzcyh0aGlzLmVsZW1lbnQsIHRoaXMuZ2V0Q2xhc3MoJ2VuYWJsZWQnKSk7XG4gICAgICB0aGlzLmVuYWJsZWQgPSB0cnVlO1xuXG4gICAgICB0aGlzLnNjcm9sbFBhcmVudHMuZm9yRWFjaChmdW5jdGlvbiAocGFyZW50KSB7XG4gICAgICAgIGlmIChwYXJlbnQgIT09IF90aGlzMy50YXJnZXQub3duZXJEb2N1bWVudCkge1xuICAgICAgICAgIHBhcmVudC5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBfdGhpczMucG9zaXRpb24pO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgaWYgKHBvcykge1xuICAgICAgICB0aGlzLnBvc2l0aW9uKCk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnZGlzYWJsZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGRpc2FibGUoKSB7XG4gICAgICB2YXIgX3RoaXM0ID0gdGhpcztcblxuICAgICAgcmVtb3ZlQ2xhc3ModGhpcy50YXJnZXQsIHRoaXMuZ2V0Q2xhc3MoJ2VuYWJsZWQnKSk7XG4gICAgICByZW1vdmVDbGFzcyh0aGlzLmVsZW1lbnQsIHRoaXMuZ2V0Q2xhc3MoJ2VuYWJsZWQnKSk7XG4gICAgICB0aGlzLmVuYWJsZWQgPSBmYWxzZTtcblxuICAgICAgaWYgKHR5cGVvZiB0aGlzLnNjcm9sbFBhcmVudHMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHRoaXMuc2Nyb2xsUGFyZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChwYXJlbnQpIHtcbiAgICAgICAgICBwYXJlbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgX3RoaXM0LnBvc2l0aW9uKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnZGVzdHJveScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGRlc3Ryb3koKSB7XG4gICAgICB2YXIgX3RoaXM1ID0gdGhpcztcblxuICAgICAgdGhpcy5kaXNhYmxlKCk7XG5cbiAgICAgIHRldGhlcnMuZm9yRWFjaChmdW5jdGlvbiAodGV0aGVyLCBpKSB7XG4gICAgICAgIGlmICh0ZXRoZXIgPT09IF90aGlzNSkge1xuICAgICAgICAgIHRldGhlcnMuc3BsaWNlKGksIDEpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgLy8gUmVtb3ZlIGFueSBlbGVtZW50cyB3ZSB3ZXJlIHVzaW5nIGZvciBjb252ZW5pZW5jZSBmcm9tIHRoZSBET01cbiAgICAgIGlmICh0ZXRoZXJzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZW1vdmVVdGlsRWxlbWVudHMoKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICd1cGRhdGVBdHRhY2hDbGFzc2VzJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlQXR0YWNoQ2xhc3NlcyhlbGVtZW50QXR0YWNoLCB0YXJnZXRBdHRhY2gpIHtcbiAgICAgIHZhciBfdGhpczYgPSB0aGlzO1xuXG4gICAgICBlbGVtZW50QXR0YWNoID0gZWxlbWVudEF0dGFjaCB8fCB0aGlzLmF0dGFjaG1lbnQ7XG4gICAgICB0YXJnZXRBdHRhY2ggPSB0YXJnZXRBdHRhY2ggfHwgdGhpcy50YXJnZXRBdHRhY2htZW50O1xuICAgICAgdmFyIHNpZGVzID0gWydsZWZ0JywgJ3RvcCcsICdib3R0b20nLCAncmlnaHQnLCAnbWlkZGxlJywgJ2NlbnRlciddO1xuXG4gICAgICBpZiAodHlwZW9mIHRoaXMuX2FkZEF0dGFjaENsYXNzZXMgIT09ICd1bmRlZmluZWQnICYmIHRoaXMuX2FkZEF0dGFjaENsYXNzZXMubGVuZ3RoKSB7XG4gICAgICAgIC8vIHVwZGF0ZUF0dGFjaENsYXNzZXMgY2FuIGJlIGNhbGxlZCBtb3JlIHRoYW4gb25jZSBpbiBhIHBvc2l0aW9uIGNhbGwsIHNvXG4gICAgICAgIC8vIHdlIG5lZWQgdG8gY2xlYW4gdXAgYWZ0ZXIgb3Vyc2VsdmVzIHN1Y2ggdGhhdCB3aGVuIHRoZSBsYXN0IGRlZmVyIGdldHNcbiAgICAgICAgLy8gcmFuIGl0IGRvZXNuJ3QgYWRkIGFueSBleHRyYSBjbGFzc2VzIGZyb20gcHJldmlvdXMgY2FsbHMuXG4gICAgICAgIHRoaXMuX2FkZEF0dGFjaENsYXNzZXMuc3BsaWNlKDAsIHRoaXMuX2FkZEF0dGFjaENsYXNzZXMubGVuZ3RoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiB0aGlzLl9hZGRBdHRhY2hDbGFzc2VzID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICB0aGlzLl9hZGRBdHRhY2hDbGFzc2VzID0gW107XG4gICAgICB9XG4gICAgICB2YXIgYWRkID0gdGhpcy5fYWRkQXR0YWNoQ2xhc3NlcztcblxuICAgICAgaWYgKGVsZW1lbnRBdHRhY2gudG9wKSB7XG4gICAgICAgIGFkZC5wdXNoKHRoaXMuZ2V0Q2xhc3MoJ2VsZW1lbnQtYXR0YWNoZWQnKSArICctJyArIGVsZW1lbnRBdHRhY2gudG9wKTtcbiAgICAgIH1cbiAgICAgIGlmIChlbGVtZW50QXR0YWNoLmxlZnQpIHtcbiAgICAgICAgYWRkLnB1c2godGhpcy5nZXRDbGFzcygnZWxlbWVudC1hdHRhY2hlZCcpICsgJy0nICsgZWxlbWVudEF0dGFjaC5sZWZ0KTtcbiAgICAgIH1cbiAgICAgIGlmICh0YXJnZXRBdHRhY2gudG9wKSB7XG4gICAgICAgIGFkZC5wdXNoKHRoaXMuZ2V0Q2xhc3MoJ3RhcmdldC1hdHRhY2hlZCcpICsgJy0nICsgdGFyZ2V0QXR0YWNoLnRvcCk7XG4gICAgICB9XG4gICAgICBpZiAodGFyZ2V0QXR0YWNoLmxlZnQpIHtcbiAgICAgICAgYWRkLnB1c2godGhpcy5nZXRDbGFzcygndGFyZ2V0LWF0dGFjaGVkJykgKyAnLScgKyB0YXJnZXRBdHRhY2gubGVmdCk7XG4gICAgICB9XG5cbiAgICAgIHZhciBhbGwgPSBbXTtcbiAgICAgIHNpZGVzLmZvckVhY2goZnVuY3Rpb24gKHNpZGUpIHtcbiAgICAgICAgYWxsLnB1c2goX3RoaXM2LmdldENsYXNzKCdlbGVtZW50LWF0dGFjaGVkJykgKyAnLScgKyBzaWRlKTtcbiAgICAgICAgYWxsLnB1c2goX3RoaXM2LmdldENsYXNzKCd0YXJnZXQtYXR0YWNoZWQnKSArICctJyArIHNpZGUpO1xuICAgICAgfSk7XG5cbiAgICAgIGRlZmVyKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCEodHlwZW9mIF90aGlzNi5fYWRkQXR0YWNoQ2xhc3NlcyAhPT0gJ3VuZGVmaW5lZCcpKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdXBkYXRlQ2xhc3NlcyhfdGhpczYuZWxlbWVudCwgX3RoaXM2Ll9hZGRBdHRhY2hDbGFzc2VzLCBhbGwpO1xuICAgICAgICBpZiAoIShfdGhpczYub3B0aW9ucy5hZGRUYXJnZXRDbGFzc2VzID09PSBmYWxzZSkpIHtcbiAgICAgICAgICB1cGRhdGVDbGFzc2VzKF90aGlzNi50YXJnZXQsIF90aGlzNi5fYWRkQXR0YWNoQ2xhc3NlcywgYWxsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGRlbGV0ZSBfdGhpczYuX2FkZEF0dGFjaENsYXNzZXM7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdwb3NpdGlvbicsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHBvc2l0aW9uKCkge1xuICAgICAgdmFyIF90aGlzNyA9IHRoaXM7XG5cbiAgICAgIHZhciBmbHVzaENoYW5nZXMgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDAgfHwgYXJndW1lbnRzWzBdID09PSB1bmRlZmluZWQgPyB0cnVlIDogYXJndW1lbnRzWzBdO1xuXG4gICAgICAvLyBmbHVzaENoYW5nZXMgY29tbWl0cyB0aGUgY2hhbmdlcyBpbW1lZGlhdGVseSwgbGVhdmUgdHJ1ZSB1bmxlc3MgeW91IGFyZSBwb3NpdGlvbmluZyBtdWx0aXBsZVxuICAgICAgLy8gdGV0aGVycyAoaW4gd2hpY2ggY2FzZSBjYWxsIFRldGhlci5VdGlscy5mbHVzaCB5b3Vyc2VsZiB3aGVuIHlvdSdyZSBkb25lKVxuXG4gICAgICBpZiAoIXRoaXMuZW5hYmxlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRoaXMuY2xlYXJDYWNoZSgpO1xuXG4gICAgICAvLyBUdXJuICdhdXRvJyBhdHRhY2htZW50cyBpbnRvIHRoZSBhcHByb3ByaWF0ZSBjb3JuZXIgb3IgZWRnZVxuICAgICAgdmFyIHRhcmdldEF0dGFjaG1lbnQgPSBhdXRvVG9GaXhlZEF0dGFjaG1lbnQodGhpcy50YXJnZXRBdHRhY2htZW50LCB0aGlzLmF0dGFjaG1lbnQpO1xuXG4gICAgICB0aGlzLnVwZGF0ZUF0dGFjaENsYXNzZXModGhpcy5hdHRhY2htZW50LCB0YXJnZXRBdHRhY2htZW50KTtcblxuICAgICAgdmFyIGVsZW1lbnRQb3MgPSB0aGlzLmNhY2hlKCdlbGVtZW50LWJvdW5kcycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGdldEJvdW5kcyhfdGhpczcuZWxlbWVudCk7XG4gICAgICB9KTtcblxuICAgICAgdmFyIHdpZHRoID0gZWxlbWVudFBvcy53aWR0aDtcbiAgICAgIHZhciBoZWlnaHQgPSBlbGVtZW50UG9zLmhlaWdodDtcblxuICAgICAgaWYgKHdpZHRoID09PSAwICYmIGhlaWdodCA9PT0gMCAmJiB0eXBlb2YgdGhpcy5sYXN0U2l6ZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdmFyIF9sYXN0U2l6ZSA9IHRoaXMubGFzdFNpemU7XG5cbiAgICAgICAgLy8gV2UgY2FjaGUgdGhlIGhlaWdodCBhbmQgd2lkdGggdG8gbWFrZSBpdCBwb3NzaWJsZSB0byBwb3NpdGlvbiBlbGVtZW50cyB0aGF0IGFyZVxuICAgICAgICAvLyBnZXR0aW5nIGhpZGRlbi5cbiAgICAgICAgd2lkdGggPSBfbGFzdFNpemUud2lkdGg7XG4gICAgICAgIGhlaWdodCA9IF9sYXN0U2l6ZS5oZWlnaHQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmxhc3RTaXplID0geyB3aWR0aDogd2lkdGgsIGhlaWdodDogaGVpZ2h0IH07XG4gICAgICB9XG5cbiAgICAgIHZhciB0YXJnZXRQb3MgPSB0aGlzLmNhY2hlKCd0YXJnZXQtYm91bmRzJywgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX3RoaXM3LmdldFRhcmdldEJvdW5kcygpO1xuICAgICAgfSk7XG4gICAgICB2YXIgdGFyZ2V0U2l6ZSA9IHRhcmdldFBvcztcblxuICAgICAgLy8gR2V0IGFuIGFjdHVhbCBweCBvZmZzZXQgZnJvbSB0aGUgYXR0YWNobWVudFxuICAgICAgdmFyIG9mZnNldCA9IG9mZnNldFRvUHgoYXR0YWNobWVudFRvT2Zmc2V0KHRoaXMuYXR0YWNobWVudCksIHsgd2lkdGg6IHdpZHRoLCBoZWlnaHQ6IGhlaWdodCB9KTtcbiAgICAgIHZhciB0YXJnZXRPZmZzZXQgPSBvZmZzZXRUb1B4KGF0dGFjaG1lbnRUb09mZnNldCh0YXJnZXRBdHRhY2htZW50KSwgdGFyZ2V0U2l6ZSk7XG5cbiAgICAgIHZhciBtYW51YWxPZmZzZXQgPSBvZmZzZXRUb1B4KHRoaXMub2Zmc2V0LCB7IHdpZHRoOiB3aWR0aCwgaGVpZ2h0OiBoZWlnaHQgfSk7XG4gICAgICB2YXIgbWFudWFsVGFyZ2V0T2Zmc2V0ID0gb2Zmc2V0VG9QeCh0aGlzLnRhcmdldE9mZnNldCwgdGFyZ2V0U2l6ZSk7XG5cbiAgICAgIC8vIEFkZCB0aGUgbWFudWFsbHkgcHJvdmlkZWQgb2Zmc2V0XG4gICAgICBvZmZzZXQgPSBhZGRPZmZzZXQob2Zmc2V0LCBtYW51YWxPZmZzZXQpO1xuICAgICAgdGFyZ2V0T2Zmc2V0ID0gYWRkT2Zmc2V0KHRhcmdldE9mZnNldCwgbWFudWFsVGFyZ2V0T2Zmc2V0KTtcblxuICAgICAgLy8gSXQncyBub3cgb3VyIGdvYWwgdG8gbWFrZSAoZWxlbWVudCBwb3NpdGlvbiArIG9mZnNldCkgPT0gKHRhcmdldCBwb3NpdGlvbiArIHRhcmdldCBvZmZzZXQpXG4gICAgICB2YXIgbGVmdCA9IHRhcmdldFBvcy5sZWZ0ICsgdGFyZ2V0T2Zmc2V0LmxlZnQgLSBvZmZzZXQubGVmdDtcbiAgICAgIHZhciB0b3AgPSB0YXJnZXRQb3MudG9wICsgdGFyZ2V0T2Zmc2V0LnRvcCAtIG9mZnNldC50b3A7XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgVGV0aGVyQmFzZS5tb2R1bGVzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHZhciBfbW9kdWxlMiA9IFRldGhlckJhc2UubW9kdWxlc1tpXTtcbiAgICAgICAgdmFyIHJldCA9IF9tb2R1bGUyLnBvc2l0aW9uLmNhbGwodGhpcywge1xuICAgICAgICAgIGxlZnQ6IGxlZnQsXG4gICAgICAgICAgdG9wOiB0b3AsXG4gICAgICAgICAgdGFyZ2V0QXR0YWNobWVudDogdGFyZ2V0QXR0YWNobWVudCxcbiAgICAgICAgICB0YXJnZXRQb3M6IHRhcmdldFBvcyxcbiAgICAgICAgICBlbGVtZW50UG9zOiBlbGVtZW50UG9zLFxuICAgICAgICAgIG9mZnNldDogb2Zmc2V0LFxuICAgICAgICAgIHRhcmdldE9mZnNldDogdGFyZ2V0T2Zmc2V0LFxuICAgICAgICAgIG1hbnVhbE9mZnNldDogbWFudWFsT2Zmc2V0LFxuICAgICAgICAgIG1hbnVhbFRhcmdldE9mZnNldDogbWFudWFsVGFyZ2V0T2Zmc2V0LFxuICAgICAgICAgIHNjcm9sbGJhclNpemU6IHNjcm9sbGJhclNpemUsXG4gICAgICAgICAgYXR0YWNobWVudDogdGhpcy5hdHRhY2htZW50XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChyZXQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiByZXQgPT09ICd1bmRlZmluZWQnIHx8IHR5cGVvZiByZXQgIT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdG9wID0gcmV0LnRvcDtcbiAgICAgICAgICBsZWZ0ID0gcmV0LmxlZnQ7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gV2UgZGVzY3JpYmUgdGhlIHBvc2l0aW9uIHRocmVlIGRpZmZlcmVudCB3YXlzIHRvIGdpdmUgdGhlIG9wdGltaXplclxuICAgICAgLy8gYSBjaGFuY2UgdG8gZGVjaWRlIHRoZSBiZXN0IHBvc3NpYmxlIHdheSB0byBwb3NpdGlvbiB0aGUgZWxlbWVudFxuICAgICAgLy8gd2l0aCB0aGUgZmV3ZXN0IHJlcGFpbnRzLlxuICAgICAgdmFyIG5leHQgPSB7XG4gICAgICAgIC8vIEl0J3MgcG9zaXRpb24gcmVsYXRpdmUgdG8gdGhlIHBhZ2UgKGFic29sdXRlIHBvc2l0aW9uaW5nIHdoZW5cbiAgICAgICAgLy8gdGhlIGVsZW1lbnQgaXMgYSBjaGlsZCBvZiB0aGUgYm9keSlcbiAgICAgICAgcGFnZToge1xuICAgICAgICAgIHRvcDogdG9wLFxuICAgICAgICAgIGxlZnQ6IGxlZnRcbiAgICAgICAgfSxcblxuICAgICAgICAvLyBJdCdzIHBvc2l0aW9uIHJlbGF0aXZlIHRvIHRoZSB2aWV3cG9ydCAoZml4ZWQgcG9zaXRpb25pbmcpXG4gICAgICAgIHZpZXdwb3J0OiB7XG4gICAgICAgICAgdG9wOiB0b3AgLSBwYWdlWU9mZnNldCxcbiAgICAgICAgICBib3R0b206IHBhZ2VZT2Zmc2V0IC0gdG9wIC0gaGVpZ2h0ICsgaW5uZXJIZWlnaHQsXG4gICAgICAgICAgbGVmdDogbGVmdCAtIHBhZ2VYT2Zmc2V0LFxuICAgICAgICAgIHJpZ2h0OiBwYWdlWE9mZnNldCAtIGxlZnQgLSB3aWR0aCArIGlubmVyV2lkdGhcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgdmFyIGRvYyA9IHRoaXMudGFyZ2V0Lm93bmVyRG9jdW1lbnQ7XG4gICAgICB2YXIgd2luID0gZG9jLmRlZmF1bHRWaWV3O1xuXG4gICAgICB2YXIgc2Nyb2xsYmFyU2l6ZSA9IHVuZGVmaW5lZDtcbiAgICAgIGlmICh3aW4uaW5uZXJIZWlnaHQgPiBkb2MuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCkge1xuICAgICAgICBzY3JvbGxiYXJTaXplID0gdGhpcy5jYWNoZSgnc2Nyb2xsYmFyLXNpemUnLCBnZXRTY3JvbGxCYXJTaXplKTtcbiAgICAgICAgbmV4dC52aWV3cG9ydC5ib3R0b20gLT0gc2Nyb2xsYmFyU2l6ZS5oZWlnaHQ7XG4gICAgICB9XG5cbiAgICAgIGlmICh3aW4uaW5uZXJXaWR0aCA+IGRvYy5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGgpIHtcbiAgICAgICAgc2Nyb2xsYmFyU2l6ZSA9IHRoaXMuY2FjaGUoJ3Njcm9sbGJhci1zaXplJywgZ2V0U2Nyb2xsQmFyU2l6ZSk7XG4gICAgICAgIG5leHQudmlld3BvcnQucmlnaHQgLT0gc2Nyb2xsYmFyU2l6ZS53aWR0aDtcbiAgICAgIH1cblxuICAgICAgaWYgKFsnJywgJ3N0YXRpYyddLmluZGV4T2YoZG9jLmJvZHkuc3R5bGUucG9zaXRpb24pID09PSAtMSB8fCBbJycsICdzdGF0aWMnXS5pbmRleE9mKGRvYy5ib2R5LnBhcmVudEVsZW1lbnQuc3R5bGUucG9zaXRpb24pID09PSAtMSkge1xuICAgICAgICAvLyBBYnNvbHV0ZSBwb3NpdGlvbmluZyBpbiB0aGUgYm9keSB3aWxsIGJlIHJlbGF0aXZlIHRvIHRoZSBwYWdlLCBub3QgdGhlICdpbml0aWFsIGNvbnRhaW5pbmcgYmxvY2snXG4gICAgICAgIG5leHQucGFnZS5ib3R0b20gPSBkb2MuYm9keS5zY3JvbGxIZWlnaHQgLSB0b3AgLSBoZWlnaHQ7XG4gICAgICAgIG5leHQucGFnZS5yaWdodCA9IGRvYy5ib2R5LnNjcm9sbFdpZHRoIC0gbGVmdCAtIHdpZHRoO1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIHRoaXMub3B0aW9ucy5vcHRpbWl6YXRpb25zICE9PSAndW5kZWZpbmVkJyAmJiB0aGlzLm9wdGlvbnMub3B0aW1pemF0aW9ucy5tb3ZlRWxlbWVudCAhPT0gZmFsc2UgJiYgISh0eXBlb2YgdGhpcy50YXJnZXRNb2RpZmllciAhPT0gJ3VuZGVmaW5lZCcpKSB7XG4gICAgICAgIChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdmFyIG9mZnNldFBhcmVudCA9IF90aGlzNy5jYWNoZSgndGFyZ2V0LW9mZnNldHBhcmVudCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBnZXRPZmZzZXRQYXJlbnQoX3RoaXM3LnRhcmdldCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdmFyIG9mZnNldFBvc2l0aW9uID0gX3RoaXM3LmNhY2hlKCd0YXJnZXQtb2Zmc2V0cGFyZW50LWJvdW5kcycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBnZXRCb3VuZHMob2Zmc2V0UGFyZW50KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICB2YXIgb2Zmc2V0UGFyZW50U3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKG9mZnNldFBhcmVudCk7XG4gICAgICAgICAgdmFyIG9mZnNldFBhcmVudFNpemUgPSBvZmZzZXRQb3NpdGlvbjtcblxuICAgICAgICAgIHZhciBvZmZzZXRCb3JkZXIgPSB7fTtcbiAgICAgICAgICBbJ1RvcCcsICdMZWZ0JywgJ0JvdHRvbScsICdSaWdodCddLmZvckVhY2goZnVuY3Rpb24gKHNpZGUpIHtcbiAgICAgICAgICAgIG9mZnNldEJvcmRlcltzaWRlLnRvTG93ZXJDYXNlKCldID0gcGFyc2VGbG9hdChvZmZzZXRQYXJlbnRTdHlsZVsnYm9yZGVyJyArIHNpZGUgKyAnV2lkdGgnXSk7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBvZmZzZXRQb3NpdGlvbi5yaWdodCA9IGRvYy5ib2R5LnNjcm9sbFdpZHRoIC0gb2Zmc2V0UG9zaXRpb24ubGVmdCAtIG9mZnNldFBhcmVudFNpemUud2lkdGggKyBvZmZzZXRCb3JkZXIucmlnaHQ7XG4gICAgICAgICAgb2Zmc2V0UG9zaXRpb24uYm90dG9tID0gZG9jLmJvZHkuc2Nyb2xsSGVpZ2h0IC0gb2Zmc2V0UG9zaXRpb24udG9wIC0gb2Zmc2V0UGFyZW50U2l6ZS5oZWlnaHQgKyBvZmZzZXRCb3JkZXIuYm90dG9tO1xuXG4gICAgICAgICAgaWYgKG5leHQucGFnZS50b3AgPj0gb2Zmc2V0UG9zaXRpb24udG9wICsgb2Zmc2V0Qm9yZGVyLnRvcCAmJiBuZXh0LnBhZ2UuYm90dG9tID49IG9mZnNldFBvc2l0aW9uLmJvdHRvbSkge1xuICAgICAgICAgICAgaWYgKG5leHQucGFnZS5sZWZ0ID49IG9mZnNldFBvc2l0aW9uLmxlZnQgKyBvZmZzZXRCb3JkZXIubGVmdCAmJiBuZXh0LnBhZ2UucmlnaHQgPj0gb2Zmc2V0UG9zaXRpb24ucmlnaHQpIHtcbiAgICAgICAgICAgICAgLy8gV2UncmUgd2l0aGluIHRoZSB2aXNpYmxlIHBhcnQgb2YgdGhlIHRhcmdldCdzIHNjcm9sbCBwYXJlbnRcbiAgICAgICAgICAgICAgdmFyIHNjcm9sbFRvcCA9IG9mZnNldFBhcmVudC5zY3JvbGxUb3A7XG4gICAgICAgICAgICAgIHZhciBzY3JvbGxMZWZ0ID0gb2Zmc2V0UGFyZW50LnNjcm9sbExlZnQ7XG5cbiAgICAgICAgICAgICAgLy8gSXQncyBwb3NpdGlvbiByZWxhdGl2ZSB0byB0aGUgdGFyZ2V0J3Mgb2Zmc2V0IHBhcmVudCAoYWJzb2x1dGUgcG9zaXRpb25pbmcgd2hlblxuICAgICAgICAgICAgICAvLyB0aGUgZWxlbWVudCBpcyBtb3ZlZCB0byBiZSBhIGNoaWxkIG9mIHRoZSB0YXJnZXQncyBvZmZzZXQgcGFyZW50KS5cbiAgICAgICAgICAgICAgbmV4dC5vZmZzZXQgPSB7XG4gICAgICAgICAgICAgICAgdG9wOiBuZXh0LnBhZ2UudG9wIC0gb2Zmc2V0UG9zaXRpb24udG9wICsgc2Nyb2xsVG9wIC0gb2Zmc2V0Qm9yZGVyLnRvcCxcbiAgICAgICAgICAgICAgICBsZWZ0OiBuZXh0LnBhZ2UubGVmdCAtIG9mZnNldFBvc2l0aW9uLmxlZnQgKyBzY3JvbGxMZWZ0IC0gb2Zmc2V0Qm9yZGVyLmxlZnRcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pKCk7XG4gICAgICB9XG5cbiAgICAgIC8vIFdlIGNvdWxkIGFsc28gdHJhdmVsIHVwIHRoZSBET00gYW5kIHRyeSBlYWNoIGNvbnRhaW5pbmcgY29udGV4dCwgcmF0aGVyIHRoYW4gb25seVxuICAgICAgLy8gbG9va2luZyBhdCB0aGUgYm9keSwgYnV0IHdlJ3JlIGdvbm5hIGdldCBkaW1pbmlzaGluZyByZXR1cm5zLlxuXG4gICAgICB0aGlzLm1vdmUobmV4dCk7XG5cbiAgICAgIHRoaXMuaGlzdG9yeS51bnNoaWZ0KG5leHQpO1xuXG4gICAgICBpZiAodGhpcy5oaXN0b3J5Lmxlbmd0aCA+IDMpIHtcbiAgICAgICAgdGhpcy5oaXN0b3J5LnBvcCgpO1xuICAgICAgfVxuXG4gICAgICBpZiAoZmx1c2hDaGFuZ2VzKSB7XG4gICAgICAgIGZsdXNoKCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8vIFRIRSBJU1NVRVxuICB9LCB7XG4gICAga2V5OiAnbW92ZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG1vdmUocG9zKSB7XG4gICAgICB2YXIgX3RoaXM4ID0gdGhpcztcblxuICAgICAgaWYgKCEodHlwZW9mIHRoaXMuZWxlbWVudC5wYXJlbnROb2RlICE9PSAndW5kZWZpbmVkJykpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB2YXIgc2FtZSA9IHt9O1xuXG4gICAgICBmb3IgKHZhciB0eXBlIGluIHBvcykge1xuICAgICAgICBzYW1lW3R5cGVdID0ge307XG5cbiAgICAgICAgZm9yICh2YXIga2V5IGluIHBvc1t0eXBlXSkge1xuICAgICAgICAgIHZhciBmb3VuZCA9IGZhbHNlO1xuXG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmhpc3RvcnkubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIHZhciBwb2ludCA9IHRoaXMuaGlzdG9yeVtpXTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgcG9pbnRbdHlwZV0gIT09ICd1bmRlZmluZWQnICYmICF3aXRoaW4ocG9pbnRbdHlwZV1ba2V5XSwgcG9zW3R5cGVdW2tleV0pKSB7XG4gICAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKCFmb3VuZCkge1xuICAgICAgICAgICAgc2FtZVt0eXBlXVtrZXldID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdmFyIGNzcyA9IHsgdG9wOiAnJywgbGVmdDogJycsIHJpZ2h0OiAnJywgYm90dG9tOiAnJyB9O1xuXG4gICAgICB2YXIgdHJhbnNjcmliZSA9IGZ1bmN0aW9uIHRyYW5zY3JpYmUoX3NhbWUsIF9wb3MpIHtcbiAgICAgICAgdmFyIGhhc09wdGltaXphdGlvbnMgPSB0eXBlb2YgX3RoaXM4Lm9wdGlvbnMub3B0aW1pemF0aW9ucyAhPT0gJ3VuZGVmaW5lZCc7XG4gICAgICAgIHZhciBncHUgPSBoYXNPcHRpbWl6YXRpb25zID8gX3RoaXM4Lm9wdGlvbnMub3B0aW1pemF0aW9ucy5ncHUgOiBudWxsO1xuICAgICAgICBpZiAoZ3B1ICE9PSBmYWxzZSkge1xuICAgICAgICAgIHZhciB5UG9zID0gdW5kZWZpbmVkLFxuICAgICAgICAgICAgICB4UG9zID0gdW5kZWZpbmVkO1xuICAgICAgICAgIGlmIChfc2FtZS50b3ApIHtcbiAgICAgICAgICAgIGNzcy50b3AgPSAwO1xuICAgICAgICAgICAgeVBvcyA9IF9wb3MudG9wO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjc3MuYm90dG9tID0gMDtcbiAgICAgICAgICAgIHlQb3MgPSAtX3Bvcy5ib3R0b207XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKF9zYW1lLmxlZnQpIHtcbiAgICAgICAgICAgIGNzcy5sZWZ0ID0gMDtcbiAgICAgICAgICAgIHhQb3MgPSBfcG9zLmxlZnQ7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNzcy5yaWdodCA9IDA7XG4gICAgICAgICAgICB4UG9zID0gLV9wb3MucmlnaHQ7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHdpbmRvdy5tYXRjaE1lZGlhKSB7XG4gICAgICAgICAgICAvLyBIdWJTcG90L3RldGhlciMyMDdcbiAgICAgICAgICAgIHZhciByZXRpbmEgPSB3aW5kb3cubWF0Y2hNZWRpYSgnb25seSBzY3JlZW4gYW5kIChtaW4tcmVzb2x1dGlvbjogMS4zZHBweCknKS5tYXRjaGVzIHx8IHdpbmRvdy5tYXRjaE1lZGlhKCdvbmx5IHNjcmVlbiBhbmQgKC13ZWJraXQtbWluLWRldmljZS1waXhlbC1yYXRpbzogMS4zKScpLm1hdGNoZXM7XG4gICAgICAgICAgICBpZiAoIXJldGluYSkge1xuICAgICAgICAgICAgICB4UG9zID0gTWF0aC5yb3VuZCh4UG9zKTtcbiAgICAgICAgICAgICAgeVBvcyA9IE1hdGgucm91bmQoeVBvcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY3NzW3RyYW5zZm9ybUtleV0gPSAndHJhbnNsYXRlWCgnICsgeFBvcyArICdweCkgdHJhbnNsYXRlWSgnICsgeVBvcyArICdweCknO1xuXG4gICAgICAgICAgaWYgKHRyYW5zZm9ybUtleSAhPT0gJ21zVHJhbnNmb3JtJykge1xuICAgICAgICAgICAgLy8gVGhlIFogdHJhbnNmb3JtIHdpbGwga2VlcCB0aGlzIGluIHRoZSBHUFUgKGZhc3RlciwgYW5kIHByZXZlbnRzIGFydGlmYWN0cyksXG4gICAgICAgICAgICAvLyBidXQgSUU5IGRvZXNuJ3Qgc3VwcG9ydCAzZCB0cmFuc2Zvcm1zIGFuZCB3aWxsIGNob2tlLlxuICAgICAgICAgICAgY3NzW3RyYW5zZm9ybUtleV0gKz0gXCIgdHJhbnNsYXRlWigwKVwiO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoX3NhbWUudG9wKSB7XG4gICAgICAgICAgICBjc3MudG9wID0gX3Bvcy50b3AgKyAncHgnO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjc3MuYm90dG9tID0gX3Bvcy5ib3R0b20gKyAncHgnO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChfc2FtZS5sZWZ0KSB7XG4gICAgICAgICAgICBjc3MubGVmdCA9IF9wb3MubGVmdCArICdweCc7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNzcy5yaWdodCA9IF9wb3MucmlnaHQgKyAncHgnO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgdmFyIG1vdmVkID0gZmFsc2U7XG4gICAgICBpZiAoKHNhbWUucGFnZS50b3AgfHwgc2FtZS5wYWdlLmJvdHRvbSkgJiYgKHNhbWUucGFnZS5sZWZ0IHx8IHNhbWUucGFnZS5yaWdodCkpIHtcbiAgICAgICAgY3NzLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAgICAgdHJhbnNjcmliZShzYW1lLnBhZ2UsIHBvcy5wYWdlKTtcbiAgICAgIH0gZWxzZSBpZiAoKHNhbWUudmlld3BvcnQudG9wIHx8IHNhbWUudmlld3BvcnQuYm90dG9tKSAmJiAoc2FtZS52aWV3cG9ydC5sZWZ0IHx8IHNhbWUudmlld3BvcnQucmlnaHQpKSB7XG4gICAgICAgIGNzcy5wb3NpdGlvbiA9ICdmaXhlZCc7XG4gICAgICAgIHRyYW5zY3JpYmUoc2FtZS52aWV3cG9ydCwgcG9zLnZpZXdwb3J0KTtcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHNhbWUub2Zmc2V0ICE9PSAndW5kZWZpbmVkJyAmJiBzYW1lLm9mZnNldC50b3AgJiYgc2FtZS5vZmZzZXQubGVmdCkge1xuICAgICAgICAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGNzcy5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgICAgICAgdmFyIG9mZnNldFBhcmVudCA9IF90aGlzOC5jYWNoZSgndGFyZ2V0LW9mZnNldHBhcmVudCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBnZXRPZmZzZXRQYXJlbnQoX3RoaXM4LnRhcmdldCk7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBpZiAoZ2V0T2Zmc2V0UGFyZW50KF90aGlzOC5lbGVtZW50KSAhPT0gb2Zmc2V0UGFyZW50KSB7XG4gICAgICAgICAgICBkZWZlcihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIF90aGlzOC5lbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoX3RoaXM4LmVsZW1lbnQpO1xuICAgICAgICAgICAgICBvZmZzZXRQYXJlbnQuYXBwZW5kQ2hpbGQoX3RoaXM4LmVsZW1lbnQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdHJhbnNjcmliZShzYW1lLm9mZnNldCwgcG9zLm9mZnNldCk7XG4gICAgICAgICAgbW92ZWQgPSB0cnVlO1xuICAgICAgICB9KSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY3NzLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAgICAgdHJhbnNjcmliZSh7IHRvcDogdHJ1ZSwgbGVmdDogdHJ1ZSB9LCBwb3MucGFnZSk7XG4gICAgICB9XG5cbiAgICAgIGlmICghbW92ZWQpIHtcbiAgICAgICAgdmFyIG9mZnNldFBhcmVudElzQm9keSA9IHRydWU7XG4gICAgICAgIHZhciBjdXJyZW50Tm9kZSA9IHRoaXMuZWxlbWVudC5wYXJlbnROb2RlO1xuICAgICAgICB3aGlsZSAoY3VycmVudE5vZGUgJiYgY3VycmVudE5vZGUubm9kZVR5cGUgPT09IDEgJiYgY3VycmVudE5vZGUudGFnTmFtZSAhPT0gJ0JPRFknKSB7XG4gICAgICAgICAgaWYgKGdldENvbXB1dGVkU3R5bGUoY3VycmVudE5vZGUpLnBvc2l0aW9uICE9PSAnc3RhdGljJykge1xuICAgICAgICAgICAgb2Zmc2V0UGFyZW50SXNCb2R5ID0gZmFsc2U7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjdXJyZW50Tm9kZSA9IGN1cnJlbnROb2RlLnBhcmVudE5vZGU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIW9mZnNldFBhcmVudElzQm9keSkge1xuICAgICAgICAgIHRoaXMuZWxlbWVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgdGhpcy5lbGVtZW50Lm93bmVyRG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIEFueSBjc3MgY2hhbmdlIHdpbGwgdHJpZ2dlciBhIHJlcGFpbnQsIHNvIGxldCdzIGF2b2lkIG9uZSBpZiBub3RoaW5nIGNoYW5nZWRcbiAgICAgIHZhciB3cml0ZUNTUyA9IHt9O1xuICAgICAgdmFyIHdyaXRlID0gZmFsc2U7XG4gICAgICBmb3IgKHZhciBrZXkgaW4gY3NzKSB7XG4gICAgICAgIHZhciB2YWwgPSBjc3Nba2V5XTtcbiAgICAgICAgdmFyIGVsVmFsID0gdGhpcy5lbGVtZW50LnN0eWxlW2tleV07XG5cbiAgICAgICAgaWYgKGVsVmFsICE9PSB2YWwpIHtcbiAgICAgICAgICB3cml0ZSA9IHRydWU7XG4gICAgICAgICAgd3JpdGVDU1Nba2V5XSA9IHZhbDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAod3JpdGUpIHtcbiAgICAgICAgZGVmZXIoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGV4dGVuZChfdGhpczguZWxlbWVudC5zdHlsZSwgd3JpdGVDU1MpO1xuICAgICAgICAgIF90aGlzOC50cmlnZ2VyKCdyZXBvc2l0aW9uZWQnKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIFRldGhlckNsYXNzO1xufSkoRXZlbnRlZCk7XG5cblRldGhlckNsYXNzLm1vZHVsZXMgPSBbXTtcblxuVGV0aGVyQmFzZS5wb3NpdGlvbiA9IHBvc2l0aW9uO1xuXG52YXIgVGV0aGVyID0gZXh0ZW5kKFRldGhlckNsYXNzLCBUZXRoZXJCYXNlKTtcbi8qIGdsb2JhbHMgVGV0aGVyQmFzZSAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBfc2xpY2VkVG9BcnJheSA9IChmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIHNsaWNlSXRlcmF0b3IoYXJyLCBpKSB7IHZhciBfYXJyID0gW107IHZhciBfbiA9IHRydWU7IHZhciBfZCA9IGZhbHNlOyB2YXIgX2UgPSB1bmRlZmluZWQ7IHRyeSB7IGZvciAodmFyIF9pID0gYXJyW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3M7ICEoX24gPSAoX3MgPSBfaS5uZXh0KCkpLmRvbmUpOyBfbiA9IHRydWUpIHsgX2Fyci5wdXNoKF9zLnZhbHVlKTsgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrOyB9IH0gY2F0Y2ggKGVycikgeyBfZCA9IHRydWU7IF9lID0gZXJyOyB9IGZpbmFsbHkgeyB0cnkgeyBpZiAoIV9uICYmIF9pWydyZXR1cm4nXSkgX2lbJ3JldHVybiddKCk7IH0gZmluYWxseSB7IGlmIChfZCkgdGhyb3cgX2U7IH0gfSByZXR1cm4gX2FycjsgfSByZXR1cm4gZnVuY3Rpb24gKGFyciwgaSkgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7IHJldHVybiBhcnI7IH0gZWxzZSBpZiAoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChhcnIpKSB7IHJldHVybiBzbGljZUl0ZXJhdG9yKGFyciwgaSk7IH0gZWxzZSB7IHRocm93IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UnKTsgfSB9OyB9KSgpO1xuXG52YXIgX1RldGhlckJhc2UkVXRpbHMgPSBUZXRoZXJCYXNlLlV0aWxzO1xudmFyIGdldEJvdW5kcyA9IF9UZXRoZXJCYXNlJFV0aWxzLmdldEJvdW5kcztcbnZhciBleHRlbmQgPSBfVGV0aGVyQmFzZSRVdGlscy5leHRlbmQ7XG52YXIgdXBkYXRlQ2xhc3NlcyA9IF9UZXRoZXJCYXNlJFV0aWxzLnVwZGF0ZUNsYXNzZXM7XG52YXIgZGVmZXIgPSBfVGV0aGVyQmFzZSRVdGlscy5kZWZlcjtcblxudmFyIEJPVU5EU19GT1JNQVQgPSBbJ2xlZnQnLCAndG9wJywgJ3JpZ2h0JywgJ2JvdHRvbSddO1xuXG5mdW5jdGlvbiBnZXRCb3VuZGluZ1JlY3QodGV0aGVyLCB0bykge1xuICBpZiAodG8gPT09ICdzY3JvbGxQYXJlbnQnKSB7XG4gICAgdG8gPSB0ZXRoZXIuc2Nyb2xsUGFyZW50c1swXTtcbiAgfSBlbHNlIGlmICh0byA9PT0gJ3dpbmRvdycpIHtcbiAgICB0byA9IFtwYWdlWE9mZnNldCwgcGFnZVlPZmZzZXQsIGlubmVyV2lkdGggKyBwYWdlWE9mZnNldCwgaW5uZXJIZWlnaHQgKyBwYWdlWU9mZnNldF07XG4gIH1cblxuICBpZiAodG8gPT09IGRvY3VtZW50KSB7XG4gICAgdG8gPSB0by5kb2N1bWVudEVsZW1lbnQ7XG4gIH1cblxuICBpZiAodHlwZW9mIHRvLm5vZGVUeXBlICE9PSAndW5kZWZpbmVkJykge1xuICAgIChmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgbm9kZSA9IHRvO1xuICAgICAgdmFyIHNpemUgPSBnZXRCb3VuZHModG8pO1xuICAgICAgdmFyIHBvcyA9IHNpemU7XG4gICAgICB2YXIgc3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKHRvKTtcblxuICAgICAgdG8gPSBbcG9zLmxlZnQsIHBvcy50b3AsIHNpemUud2lkdGggKyBwb3MubGVmdCwgc2l6ZS5oZWlnaHQgKyBwb3MudG9wXTtcblxuICAgICAgLy8gQWNjb3VudCBhbnkgcGFyZW50IEZyYW1lcyBzY3JvbGwgb2Zmc2V0XG4gICAgICBpZiAobm9kZS5vd25lckRvY3VtZW50ICE9PSBkb2N1bWVudCkge1xuICAgICAgICB2YXIgd2luID0gbm9kZS5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3O1xuICAgICAgICB0b1swXSArPSB3aW4ucGFnZVhPZmZzZXQ7XG4gICAgICAgIHRvWzFdICs9IHdpbi5wYWdlWU9mZnNldDtcbiAgICAgICAgdG9bMl0gKz0gd2luLnBhZ2VYT2Zmc2V0O1xuICAgICAgICB0b1szXSArPSB3aW4ucGFnZVlPZmZzZXQ7XG4gICAgICB9XG5cbiAgICAgIEJPVU5EU19GT1JNQVQuZm9yRWFjaChmdW5jdGlvbiAoc2lkZSwgaSkge1xuICAgICAgICBzaWRlID0gc2lkZVswXS50b1VwcGVyQ2FzZSgpICsgc2lkZS5zdWJzdHIoMSk7XG4gICAgICAgIGlmIChzaWRlID09PSAnVG9wJyB8fCBzaWRlID09PSAnTGVmdCcpIHtcbiAgICAgICAgICB0b1tpXSArPSBwYXJzZUZsb2F0KHN0eWxlWydib3JkZXInICsgc2lkZSArICdXaWR0aCddKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0b1tpXSAtPSBwYXJzZUZsb2F0KHN0eWxlWydib3JkZXInICsgc2lkZSArICdXaWR0aCddKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSkoKTtcbiAgfVxuXG4gIHJldHVybiB0bztcbn1cblxuVGV0aGVyQmFzZS5tb2R1bGVzLnB1c2goe1xuICBwb3NpdGlvbjogZnVuY3Rpb24gcG9zaXRpb24oX3JlZikge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICB2YXIgdG9wID0gX3JlZi50b3A7XG4gICAgdmFyIGxlZnQgPSBfcmVmLmxlZnQ7XG4gICAgdmFyIHRhcmdldEF0dGFjaG1lbnQgPSBfcmVmLnRhcmdldEF0dGFjaG1lbnQ7XG5cbiAgICBpZiAoIXRoaXMub3B0aW9ucy5jb25zdHJhaW50cykge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgdmFyIF9jYWNoZSA9IHRoaXMuY2FjaGUoJ2VsZW1lbnQtYm91bmRzJywgZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIGdldEJvdW5kcyhfdGhpcy5lbGVtZW50KTtcbiAgICB9KTtcblxuICAgIHZhciBoZWlnaHQgPSBfY2FjaGUuaGVpZ2h0O1xuICAgIHZhciB3aWR0aCA9IF9jYWNoZS53aWR0aDtcblxuICAgIGlmICh3aWR0aCA9PT0gMCAmJiBoZWlnaHQgPT09IDAgJiYgdHlwZW9mIHRoaXMubGFzdFNpemUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB2YXIgX2xhc3RTaXplID0gdGhpcy5sYXN0U2l6ZTtcblxuICAgICAgLy8gSGFuZGxlIHRoZSBpdGVtIGdldHRpbmcgaGlkZGVuIGFzIGEgcmVzdWx0IG9mIG91ciBwb3NpdGlvbmluZyB3aXRob3V0IGdsaXRjaGluZ1xuICAgICAgLy8gdGhlIGNsYXNzZXMgaW4gYW5kIG91dFxuICAgICAgd2lkdGggPSBfbGFzdFNpemUud2lkdGg7XG4gICAgICBoZWlnaHQgPSBfbGFzdFNpemUuaGVpZ2h0O1xuICAgIH1cblxuICAgIHZhciB0YXJnZXRTaXplID0gdGhpcy5jYWNoZSgndGFyZ2V0LWJvdW5kcycsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBfdGhpcy5nZXRUYXJnZXRCb3VuZHMoKTtcbiAgICB9KTtcblxuICAgIHZhciB0YXJnZXRIZWlnaHQgPSB0YXJnZXRTaXplLmhlaWdodDtcbiAgICB2YXIgdGFyZ2V0V2lkdGggPSB0YXJnZXRTaXplLndpZHRoO1xuXG4gICAgdmFyIGFsbENsYXNzZXMgPSBbdGhpcy5nZXRDbGFzcygncGlubmVkJyksIHRoaXMuZ2V0Q2xhc3MoJ291dC1vZi1ib3VuZHMnKV07XG5cbiAgICB0aGlzLm9wdGlvbnMuY29uc3RyYWludHMuZm9yRWFjaChmdW5jdGlvbiAoY29uc3RyYWludCkge1xuICAgICAgdmFyIG91dE9mQm91bmRzQ2xhc3MgPSBjb25zdHJhaW50Lm91dE9mQm91bmRzQ2xhc3M7XG4gICAgICB2YXIgcGlubmVkQ2xhc3MgPSBjb25zdHJhaW50LnBpbm5lZENsYXNzO1xuXG4gICAgICBpZiAob3V0T2ZCb3VuZHNDbGFzcykge1xuICAgICAgICBhbGxDbGFzc2VzLnB1c2gob3V0T2ZCb3VuZHNDbGFzcyk7XG4gICAgICB9XG4gICAgICBpZiAocGlubmVkQ2xhc3MpIHtcbiAgICAgICAgYWxsQ2xhc3Nlcy5wdXNoKHBpbm5lZENsYXNzKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGFsbENsYXNzZXMuZm9yRWFjaChmdW5jdGlvbiAoY2xzKSB7XG4gICAgICBbJ2xlZnQnLCAndG9wJywgJ3JpZ2h0JywgJ2JvdHRvbSddLmZvckVhY2goZnVuY3Rpb24gKHNpZGUpIHtcbiAgICAgICAgYWxsQ2xhc3Nlcy5wdXNoKGNscyArICctJyArIHNpZGUpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICB2YXIgYWRkQ2xhc3NlcyA9IFtdO1xuXG4gICAgdmFyIHRBdHRhY2htZW50ID0gZXh0ZW5kKHt9LCB0YXJnZXRBdHRhY2htZW50KTtcbiAgICB2YXIgZUF0dGFjaG1lbnQgPSBleHRlbmQoe30sIHRoaXMuYXR0YWNobWVudCk7XG5cbiAgICB0aGlzLm9wdGlvbnMuY29uc3RyYWludHMuZm9yRWFjaChmdW5jdGlvbiAoY29uc3RyYWludCkge1xuICAgICAgdmFyIHRvID0gY29uc3RyYWludC50bztcbiAgICAgIHZhciBhdHRhY2htZW50ID0gY29uc3RyYWludC5hdHRhY2htZW50O1xuICAgICAgdmFyIHBpbiA9IGNvbnN0cmFpbnQucGluO1xuXG4gICAgICBpZiAodHlwZW9mIGF0dGFjaG1lbnQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGF0dGFjaG1lbnQgPSAnJztcbiAgICAgIH1cblxuICAgICAgdmFyIGNoYW5nZUF0dGFjaFggPSB1bmRlZmluZWQsXG4gICAgICAgICAgY2hhbmdlQXR0YWNoWSA9IHVuZGVmaW5lZDtcbiAgICAgIGlmIChhdHRhY2htZW50LmluZGV4T2YoJyAnKSA+PSAwKSB7XG4gICAgICAgIHZhciBfYXR0YWNobWVudCRzcGxpdCA9IGF0dGFjaG1lbnQuc3BsaXQoJyAnKTtcblxuICAgICAgICB2YXIgX2F0dGFjaG1lbnQkc3BsaXQyID0gX3NsaWNlZFRvQXJyYXkoX2F0dGFjaG1lbnQkc3BsaXQsIDIpO1xuXG4gICAgICAgIGNoYW5nZUF0dGFjaFkgPSBfYXR0YWNobWVudCRzcGxpdDJbMF07XG4gICAgICAgIGNoYW5nZUF0dGFjaFggPSBfYXR0YWNobWVudCRzcGxpdDJbMV07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjaGFuZ2VBdHRhY2hYID0gY2hhbmdlQXR0YWNoWSA9IGF0dGFjaG1lbnQ7XG4gICAgICB9XG5cbiAgICAgIHZhciBib3VuZHMgPSBnZXRCb3VuZGluZ1JlY3QoX3RoaXMsIHRvKTtcblxuICAgICAgaWYgKGNoYW5nZUF0dGFjaFkgPT09ICd0YXJnZXQnIHx8IGNoYW5nZUF0dGFjaFkgPT09ICdib3RoJykge1xuICAgICAgICBpZiAodG9wIDwgYm91bmRzWzFdICYmIHRBdHRhY2htZW50LnRvcCA9PT0gJ3RvcCcpIHtcbiAgICAgICAgICB0b3AgKz0gdGFyZ2V0SGVpZ2h0O1xuICAgICAgICAgIHRBdHRhY2htZW50LnRvcCA9ICdib3R0b20nO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRvcCArIGhlaWdodCA+IGJvdW5kc1szXSAmJiB0QXR0YWNobWVudC50b3AgPT09ICdib3R0b20nKSB7XG4gICAgICAgICAgdG9wIC09IHRhcmdldEhlaWdodDtcbiAgICAgICAgICB0QXR0YWNobWVudC50b3AgPSAndG9wJztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoY2hhbmdlQXR0YWNoWSA9PT0gJ3RvZ2V0aGVyJykge1xuICAgICAgICBpZiAodEF0dGFjaG1lbnQudG9wID09PSAndG9wJykge1xuICAgICAgICAgIGlmIChlQXR0YWNobWVudC50b3AgPT09ICdib3R0b20nICYmIHRvcCA8IGJvdW5kc1sxXSkge1xuICAgICAgICAgICAgdG9wICs9IHRhcmdldEhlaWdodDtcbiAgICAgICAgICAgIHRBdHRhY2htZW50LnRvcCA9ICdib3R0b20nO1xuXG4gICAgICAgICAgICB0b3AgKz0gaGVpZ2h0O1xuICAgICAgICAgICAgZUF0dGFjaG1lbnQudG9wID0gJ3RvcCc7XG4gICAgICAgICAgfSBlbHNlIGlmIChlQXR0YWNobWVudC50b3AgPT09ICd0b3AnICYmIHRvcCArIGhlaWdodCA+IGJvdW5kc1szXSAmJiB0b3AgLSAoaGVpZ2h0IC0gdGFyZ2V0SGVpZ2h0KSA+PSBib3VuZHNbMV0pIHtcbiAgICAgICAgICAgIHRvcCAtPSBoZWlnaHQgLSB0YXJnZXRIZWlnaHQ7XG4gICAgICAgICAgICB0QXR0YWNobWVudC50b3AgPSAnYm90dG9tJztcblxuICAgICAgICAgICAgZUF0dGFjaG1lbnQudG9wID0gJ2JvdHRvbSc7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRBdHRhY2htZW50LnRvcCA9PT0gJ2JvdHRvbScpIHtcbiAgICAgICAgICBpZiAoZUF0dGFjaG1lbnQudG9wID09PSAndG9wJyAmJiB0b3AgKyBoZWlnaHQgPiBib3VuZHNbM10pIHtcbiAgICAgICAgICAgIHRvcCAtPSB0YXJnZXRIZWlnaHQ7XG4gICAgICAgICAgICB0QXR0YWNobWVudC50b3AgPSAndG9wJztcblxuICAgICAgICAgICAgdG9wIC09IGhlaWdodDtcbiAgICAgICAgICAgIGVBdHRhY2htZW50LnRvcCA9ICdib3R0b20nO1xuICAgICAgICAgIH0gZWxzZSBpZiAoZUF0dGFjaG1lbnQudG9wID09PSAnYm90dG9tJyAmJiB0b3AgPCBib3VuZHNbMV0gJiYgdG9wICsgKGhlaWdodCAqIDIgLSB0YXJnZXRIZWlnaHQpIDw9IGJvdW5kc1szXSkge1xuICAgICAgICAgICAgdG9wICs9IGhlaWdodCAtIHRhcmdldEhlaWdodDtcbiAgICAgICAgICAgIHRBdHRhY2htZW50LnRvcCA9ICd0b3AnO1xuXG4gICAgICAgICAgICBlQXR0YWNobWVudC50b3AgPSAndG9wJztcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodEF0dGFjaG1lbnQudG9wID09PSAnbWlkZGxlJykge1xuICAgICAgICAgIGlmICh0b3AgKyBoZWlnaHQgPiBib3VuZHNbM10gJiYgZUF0dGFjaG1lbnQudG9wID09PSAndG9wJykge1xuICAgICAgICAgICAgdG9wIC09IGhlaWdodDtcbiAgICAgICAgICAgIGVBdHRhY2htZW50LnRvcCA9ICdib3R0b20nO1xuICAgICAgICAgIH0gZWxzZSBpZiAodG9wIDwgYm91bmRzWzFdICYmIGVBdHRhY2htZW50LnRvcCA9PT0gJ2JvdHRvbScpIHtcbiAgICAgICAgICAgIHRvcCArPSBoZWlnaHQ7XG4gICAgICAgICAgICBlQXR0YWNobWVudC50b3AgPSAndG9wJztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGNoYW5nZUF0dGFjaFggPT09ICd0YXJnZXQnIHx8IGNoYW5nZUF0dGFjaFggPT09ICdib3RoJykge1xuICAgICAgICBpZiAobGVmdCA8IGJvdW5kc1swXSAmJiB0QXR0YWNobWVudC5sZWZ0ID09PSAnbGVmdCcpIHtcbiAgICAgICAgICBsZWZ0ICs9IHRhcmdldFdpZHRoO1xuICAgICAgICAgIHRBdHRhY2htZW50LmxlZnQgPSAncmlnaHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGxlZnQgKyB3aWR0aCA+IGJvdW5kc1syXSAmJiB0QXR0YWNobWVudC5sZWZ0ID09PSAncmlnaHQnKSB7XG4gICAgICAgICAgbGVmdCAtPSB0YXJnZXRXaWR0aDtcbiAgICAgICAgICB0QXR0YWNobWVudC5sZWZ0ID0gJ2xlZnQnO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChjaGFuZ2VBdHRhY2hYID09PSAndG9nZXRoZXInKSB7XG4gICAgICAgIGlmIChsZWZ0IDwgYm91bmRzWzBdICYmIHRBdHRhY2htZW50LmxlZnQgPT09ICdsZWZ0Jykge1xuICAgICAgICAgIGlmIChlQXR0YWNobWVudC5sZWZ0ID09PSAncmlnaHQnKSB7XG4gICAgICAgICAgICBsZWZ0ICs9IHRhcmdldFdpZHRoO1xuICAgICAgICAgICAgdEF0dGFjaG1lbnQubGVmdCA9ICdyaWdodCc7XG5cbiAgICAgICAgICAgIGxlZnQgKz0gd2lkdGg7XG4gICAgICAgICAgICBlQXR0YWNobWVudC5sZWZ0ID0gJ2xlZnQnO1xuICAgICAgICAgIH0gZWxzZSBpZiAoZUF0dGFjaG1lbnQubGVmdCA9PT0gJ2xlZnQnKSB7XG4gICAgICAgICAgICBsZWZ0ICs9IHRhcmdldFdpZHRoO1xuICAgICAgICAgICAgdEF0dGFjaG1lbnQubGVmdCA9ICdyaWdodCc7XG5cbiAgICAgICAgICAgIGxlZnQgLT0gd2lkdGg7XG4gICAgICAgICAgICBlQXR0YWNobWVudC5sZWZ0ID0gJ3JpZ2h0JztcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAobGVmdCArIHdpZHRoID4gYm91bmRzWzJdICYmIHRBdHRhY2htZW50LmxlZnQgPT09ICdyaWdodCcpIHtcbiAgICAgICAgICBpZiAoZUF0dGFjaG1lbnQubGVmdCA9PT0gJ2xlZnQnKSB7XG4gICAgICAgICAgICBsZWZ0IC09IHRhcmdldFdpZHRoO1xuICAgICAgICAgICAgdEF0dGFjaG1lbnQubGVmdCA9ICdsZWZ0JztcblxuICAgICAgICAgICAgbGVmdCAtPSB3aWR0aDtcbiAgICAgICAgICAgIGVBdHRhY2htZW50LmxlZnQgPSAncmlnaHQnO1xuICAgICAgICAgIH0gZWxzZSBpZiAoZUF0dGFjaG1lbnQubGVmdCA9PT0gJ3JpZ2h0Jykge1xuICAgICAgICAgICAgbGVmdCAtPSB0YXJnZXRXaWR0aDtcbiAgICAgICAgICAgIHRBdHRhY2htZW50LmxlZnQgPSAnbGVmdCc7XG5cbiAgICAgICAgICAgIGxlZnQgKz0gd2lkdGg7XG4gICAgICAgICAgICBlQXR0YWNobWVudC5sZWZ0ID0gJ2xlZnQnO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh0QXR0YWNobWVudC5sZWZ0ID09PSAnY2VudGVyJykge1xuICAgICAgICAgIGlmIChsZWZ0ICsgd2lkdGggPiBib3VuZHNbMl0gJiYgZUF0dGFjaG1lbnQubGVmdCA9PT0gJ2xlZnQnKSB7XG4gICAgICAgICAgICBsZWZ0IC09IHdpZHRoO1xuICAgICAgICAgICAgZUF0dGFjaG1lbnQubGVmdCA9ICdyaWdodCc7XG4gICAgICAgICAgfSBlbHNlIGlmIChsZWZ0IDwgYm91bmRzWzBdICYmIGVBdHRhY2htZW50LmxlZnQgPT09ICdyaWdodCcpIHtcbiAgICAgICAgICAgIGxlZnQgKz0gd2lkdGg7XG4gICAgICAgICAgICBlQXR0YWNobWVudC5sZWZ0ID0gJ2xlZnQnO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoY2hhbmdlQXR0YWNoWSA9PT0gJ2VsZW1lbnQnIHx8IGNoYW5nZUF0dGFjaFkgPT09ICdib3RoJykge1xuICAgICAgICBpZiAodG9wIDwgYm91bmRzWzFdICYmIGVBdHRhY2htZW50LnRvcCA9PT0gJ2JvdHRvbScpIHtcbiAgICAgICAgICB0b3AgKz0gaGVpZ2h0O1xuICAgICAgICAgIGVBdHRhY2htZW50LnRvcCA9ICd0b3AnO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRvcCArIGhlaWdodCA+IGJvdW5kc1szXSAmJiBlQXR0YWNobWVudC50b3AgPT09ICd0b3AnKSB7XG4gICAgICAgICAgdG9wIC09IGhlaWdodDtcbiAgICAgICAgICBlQXR0YWNobWVudC50b3AgPSAnYm90dG9tJztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoY2hhbmdlQXR0YWNoWCA9PT0gJ2VsZW1lbnQnIHx8IGNoYW5nZUF0dGFjaFggPT09ICdib3RoJykge1xuICAgICAgICBpZiAobGVmdCA8IGJvdW5kc1swXSkge1xuICAgICAgICAgIGlmIChlQXR0YWNobWVudC5sZWZ0ID09PSAncmlnaHQnKSB7XG4gICAgICAgICAgICBsZWZ0ICs9IHdpZHRoO1xuICAgICAgICAgICAgZUF0dGFjaG1lbnQubGVmdCA9ICdsZWZ0JztcbiAgICAgICAgICB9IGVsc2UgaWYgKGVBdHRhY2htZW50LmxlZnQgPT09ICdjZW50ZXInKSB7XG4gICAgICAgICAgICBsZWZ0ICs9IHdpZHRoIC8gMjtcbiAgICAgICAgICAgIGVBdHRhY2htZW50LmxlZnQgPSAnbGVmdCc7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGxlZnQgKyB3aWR0aCA+IGJvdW5kc1syXSkge1xuICAgICAgICAgIGlmIChlQXR0YWNobWVudC5sZWZ0ID09PSAnbGVmdCcpIHtcbiAgICAgICAgICAgIGxlZnQgLT0gd2lkdGg7XG4gICAgICAgICAgICBlQXR0YWNobWVudC5sZWZ0ID0gJ3JpZ2h0JztcbiAgICAgICAgICB9IGVsc2UgaWYgKGVBdHRhY2htZW50LmxlZnQgPT09ICdjZW50ZXInKSB7XG4gICAgICAgICAgICBsZWZ0IC09IHdpZHRoIC8gMjtcbiAgICAgICAgICAgIGVBdHRhY2htZW50LmxlZnQgPSAncmlnaHQnO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIHBpbiA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgcGluID0gcGluLnNwbGl0KCcsJykubWFwKGZ1bmN0aW9uIChwKSB7XG4gICAgICAgICAgcmV0dXJuIHAudHJpbSgpO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSBpZiAocGluID09PSB0cnVlKSB7XG4gICAgICAgIHBpbiA9IFsndG9wJywgJ2xlZnQnLCAncmlnaHQnLCAnYm90dG9tJ107XG4gICAgICB9XG5cbiAgICAgIHBpbiA9IHBpbiB8fCBbXTtcblxuICAgICAgdmFyIHBpbm5lZCA9IFtdO1xuICAgICAgdmFyIG9vYiA9IFtdO1xuXG4gICAgICBpZiAodG9wIDwgYm91bmRzWzFdKSB7XG4gICAgICAgIGlmIChwaW4uaW5kZXhPZigndG9wJykgPj0gMCkge1xuICAgICAgICAgIHRvcCA9IGJvdW5kc1sxXTtcbiAgICAgICAgICBwaW5uZWQucHVzaCgndG9wJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgb29iLnB1c2goJ3RvcCcpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICh0b3AgKyBoZWlnaHQgPiBib3VuZHNbM10pIHtcbiAgICAgICAgaWYgKHBpbi5pbmRleE9mKCdib3R0b20nKSA+PSAwKSB7XG4gICAgICAgICAgdG9wID0gYm91bmRzWzNdIC0gaGVpZ2h0O1xuICAgICAgICAgIHBpbm5lZC5wdXNoKCdib3R0b20nKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBvb2IucHVzaCgnYm90dG9tJyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGxlZnQgPCBib3VuZHNbMF0pIHtcbiAgICAgICAgaWYgKHBpbi5pbmRleE9mKCdsZWZ0JykgPj0gMCkge1xuICAgICAgICAgIGxlZnQgPSBib3VuZHNbMF07XG4gICAgICAgICAgcGlubmVkLnB1c2goJ2xlZnQnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBvb2IucHVzaCgnbGVmdCcpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChsZWZ0ICsgd2lkdGggPiBib3VuZHNbMl0pIHtcbiAgICAgICAgaWYgKHBpbi5pbmRleE9mKCdyaWdodCcpID49IDApIHtcbiAgICAgICAgICBsZWZ0ID0gYm91bmRzWzJdIC0gd2lkdGg7XG4gICAgICAgICAgcGlubmVkLnB1c2goJ3JpZ2h0Jyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgb29iLnB1c2goJ3JpZ2h0Jyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHBpbm5lZC5sZW5ndGgpIHtcbiAgICAgICAgKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB2YXIgcGlubmVkQ2xhc3MgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgaWYgKHR5cGVvZiBfdGhpcy5vcHRpb25zLnBpbm5lZENsYXNzICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgcGlubmVkQ2xhc3MgPSBfdGhpcy5vcHRpb25zLnBpbm5lZENsYXNzO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwaW5uZWRDbGFzcyA9IF90aGlzLmdldENsYXNzKCdwaW5uZWQnKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBhZGRDbGFzc2VzLnB1c2gocGlubmVkQ2xhc3MpO1xuICAgICAgICAgIHBpbm5lZC5mb3JFYWNoKGZ1bmN0aW9uIChzaWRlKSB7XG4gICAgICAgICAgICBhZGRDbGFzc2VzLnB1c2gocGlubmVkQ2xhc3MgKyAnLScgKyBzaWRlKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSkoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKG9vYi5sZW5ndGgpIHtcbiAgICAgICAgKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB2YXIgb29iQ2xhc3MgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgaWYgKHR5cGVvZiBfdGhpcy5vcHRpb25zLm91dE9mQm91bmRzQ2xhc3MgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBvb2JDbGFzcyA9IF90aGlzLm9wdGlvbnMub3V0T2ZCb3VuZHNDbGFzcztcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgb29iQ2xhc3MgPSBfdGhpcy5nZXRDbGFzcygnb3V0LW9mLWJvdW5kcycpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGFkZENsYXNzZXMucHVzaChvb2JDbGFzcyk7XG4gICAgICAgICAgb29iLmZvckVhY2goZnVuY3Rpb24gKHNpZGUpIHtcbiAgICAgICAgICAgIGFkZENsYXNzZXMucHVzaChvb2JDbGFzcyArICctJyArIHNpZGUpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KSgpO1xuICAgICAgfVxuXG4gICAgICBpZiAocGlubmVkLmluZGV4T2YoJ2xlZnQnKSA+PSAwIHx8IHBpbm5lZC5pbmRleE9mKCdyaWdodCcpID49IDApIHtcbiAgICAgICAgZUF0dGFjaG1lbnQubGVmdCA9IHRBdHRhY2htZW50LmxlZnQgPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGlmIChwaW5uZWQuaW5kZXhPZigndG9wJykgPj0gMCB8fCBwaW5uZWQuaW5kZXhPZignYm90dG9tJykgPj0gMCkge1xuICAgICAgICBlQXR0YWNobWVudC50b3AgPSB0QXR0YWNobWVudC50b3AgPSBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRBdHRhY2htZW50LnRvcCAhPT0gdGFyZ2V0QXR0YWNobWVudC50b3AgfHwgdEF0dGFjaG1lbnQubGVmdCAhPT0gdGFyZ2V0QXR0YWNobWVudC5sZWZ0IHx8IGVBdHRhY2htZW50LnRvcCAhPT0gX3RoaXMuYXR0YWNobWVudC50b3AgfHwgZUF0dGFjaG1lbnQubGVmdCAhPT0gX3RoaXMuYXR0YWNobWVudC5sZWZ0KSB7XG4gICAgICAgIF90aGlzLnVwZGF0ZUF0dGFjaENsYXNzZXMoZUF0dGFjaG1lbnQsIHRBdHRhY2htZW50KTtcbiAgICAgICAgX3RoaXMudHJpZ2dlcigndXBkYXRlJywge1xuICAgICAgICAgIGF0dGFjaG1lbnQ6IGVBdHRhY2htZW50LFxuICAgICAgICAgIHRhcmdldEF0dGFjaG1lbnQ6IHRBdHRhY2htZW50XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgZGVmZXIoZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKCEoX3RoaXMub3B0aW9ucy5hZGRUYXJnZXRDbGFzc2VzID09PSBmYWxzZSkpIHtcbiAgICAgICAgdXBkYXRlQ2xhc3NlcyhfdGhpcy50YXJnZXQsIGFkZENsYXNzZXMsIGFsbENsYXNzZXMpO1xuICAgICAgfVxuICAgICAgdXBkYXRlQ2xhc3NlcyhfdGhpcy5lbGVtZW50LCBhZGRDbGFzc2VzLCBhbGxDbGFzc2VzKTtcbiAgICB9KTtcblxuICAgIHJldHVybiB7IHRvcDogdG9wLCBsZWZ0OiBsZWZ0IH07XG4gIH1cbn0pO1xuLyogZ2xvYmFscyBUZXRoZXJCYXNlICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIF9UZXRoZXJCYXNlJFV0aWxzID0gVGV0aGVyQmFzZS5VdGlscztcbnZhciBnZXRCb3VuZHMgPSBfVGV0aGVyQmFzZSRVdGlscy5nZXRCb3VuZHM7XG52YXIgdXBkYXRlQ2xhc3NlcyA9IF9UZXRoZXJCYXNlJFV0aWxzLnVwZGF0ZUNsYXNzZXM7XG52YXIgZGVmZXIgPSBfVGV0aGVyQmFzZSRVdGlscy5kZWZlcjtcblxuVGV0aGVyQmFzZS5tb2R1bGVzLnB1c2goe1xuICBwb3NpdGlvbjogZnVuY3Rpb24gcG9zaXRpb24oX3JlZikge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICB2YXIgdG9wID0gX3JlZi50b3A7XG4gICAgdmFyIGxlZnQgPSBfcmVmLmxlZnQ7XG5cbiAgICB2YXIgX2NhY2hlID0gdGhpcy5jYWNoZSgnZWxlbWVudC1ib3VuZHMnLCBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gZ2V0Qm91bmRzKF90aGlzLmVsZW1lbnQpO1xuICAgIH0pO1xuXG4gICAgdmFyIGhlaWdodCA9IF9jYWNoZS5oZWlnaHQ7XG4gICAgdmFyIHdpZHRoID0gX2NhY2hlLndpZHRoO1xuXG4gICAgdmFyIHRhcmdldFBvcyA9IHRoaXMuZ2V0VGFyZ2V0Qm91bmRzKCk7XG5cbiAgICB2YXIgYm90dG9tID0gdG9wICsgaGVpZ2h0O1xuICAgIHZhciByaWdodCA9IGxlZnQgKyB3aWR0aDtcblxuICAgIHZhciBhYnV0dGVkID0gW107XG4gICAgaWYgKHRvcCA8PSB0YXJnZXRQb3MuYm90dG9tICYmIGJvdHRvbSA+PSB0YXJnZXRQb3MudG9wKSB7XG4gICAgICBbJ2xlZnQnLCAncmlnaHQnXS5mb3JFYWNoKGZ1bmN0aW9uIChzaWRlKSB7XG4gICAgICAgIHZhciB0YXJnZXRQb3NTaWRlID0gdGFyZ2V0UG9zW3NpZGVdO1xuICAgICAgICBpZiAodGFyZ2V0UG9zU2lkZSA9PT0gbGVmdCB8fCB0YXJnZXRQb3NTaWRlID09PSByaWdodCkge1xuICAgICAgICAgIGFidXR0ZWQucHVzaChzaWRlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKGxlZnQgPD0gdGFyZ2V0UG9zLnJpZ2h0ICYmIHJpZ2h0ID49IHRhcmdldFBvcy5sZWZ0KSB7XG4gICAgICBbJ3RvcCcsICdib3R0b20nXS5mb3JFYWNoKGZ1bmN0aW9uIChzaWRlKSB7XG4gICAgICAgIHZhciB0YXJnZXRQb3NTaWRlID0gdGFyZ2V0UG9zW3NpZGVdO1xuICAgICAgICBpZiAodGFyZ2V0UG9zU2lkZSA9PT0gdG9wIHx8IHRhcmdldFBvc1NpZGUgPT09IGJvdHRvbSkge1xuICAgICAgICAgIGFidXR0ZWQucHVzaChzaWRlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgdmFyIGFsbENsYXNzZXMgPSBbXTtcbiAgICB2YXIgYWRkQ2xhc3NlcyA9IFtdO1xuXG4gICAgdmFyIHNpZGVzID0gWydsZWZ0JywgJ3RvcCcsICdyaWdodCcsICdib3R0b20nXTtcbiAgICBhbGxDbGFzc2VzLnB1c2godGhpcy5nZXRDbGFzcygnYWJ1dHRlZCcpKTtcbiAgICBzaWRlcy5mb3JFYWNoKGZ1bmN0aW9uIChzaWRlKSB7XG4gICAgICBhbGxDbGFzc2VzLnB1c2goX3RoaXMuZ2V0Q2xhc3MoJ2FidXR0ZWQnKSArICctJyArIHNpZGUpO1xuICAgIH0pO1xuXG4gICAgaWYgKGFidXR0ZWQubGVuZ3RoKSB7XG4gICAgICBhZGRDbGFzc2VzLnB1c2godGhpcy5nZXRDbGFzcygnYWJ1dHRlZCcpKTtcbiAgICB9XG5cbiAgICBhYnV0dGVkLmZvckVhY2goZnVuY3Rpb24gKHNpZGUpIHtcbiAgICAgIGFkZENsYXNzZXMucHVzaChfdGhpcy5nZXRDbGFzcygnYWJ1dHRlZCcpICsgJy0nICsgc2lkZSk7XG4gICAgfSk7XG5cbiAgICBkZWZlcihmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoIShfdGhpcy5vcHRpb25zLmFkZFRhcmdldENsYXNzZXMgPT09IGZhbHNlKSkge1xuICAgICAgICB1cGRhdGVDbGFzc2VzKF90aGlzLnRhcmdldCwgYWRkQ2xhc3NlcywgYWxsQ2xhc3Nlcyk7XG4gICAgICB9XG4gICAgICB1cGRhdGVDbGFzc2VzKF90aGlzLmVsZW1lbnQsIGFkZENsYXNzZXMsIGFsbENsYXNzZXMpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbn0pO1xuLyogZ2xvYmFscyBUZXRoZXJCYXNlICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIF9zbGljZWRUb0FycmF5ID0gKGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gc2xpY2VJdGVyYXRvcihhcnIsIGkpIHsgdmFyIF9hcnIgPSBbXTsgdmFyIF9uID0gdHJ1ZTsgdmFyIF9kID0gZmFsc2U7IHZhciBfZSA9IHVuZGVmaW5lZDsgdHJ5IHsgZm9yICh2YXIgX2kgPSBhcnJbU3ltYm9sLml0ZXJhdG9yXSgpLCBfczsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkgeyBfYXJyLnB1c2goX3MudmFsdWUpOyBpZiAoaSAmJiBfYXJyLmxlbmd0aCA9PT0gaSkgYnJlYWs7IH0gfSBjYXRjaCAoZXJyKSB7IF9kID0gdHJ1ZTsgX2UgPSBlcnI7IH0gZmluYWxseSB7IHRyeSB7IGlmICghX24gJiYgX2lbJ3JldHVybiddKSBfaVsncmV0dXJuJ10oKTsgfSBmaW5hbGx5IHsgaWYgKF9kKSB0aHJvdyBfZTsgfSB9IHJldHVybiBfYXJyOyB9IHJldHVybiBmdW5jdGlvbiAoYXJyLCBpKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHsgcmV0dXJuIGFycjsgfSBlbHNlIGlmIChTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGFycikpIHsgcmV0dXJuIHNsaWNlSXRlcmF0b3IoYXJyLCBpKTsgfSBlbHNlIHsgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZScpOyB9IH07IH0pKCk7XG5cblRldGhlckJhc2UubW9kdWxlcy5wdXNoKHtcbiAgcG9zaXRpb246IGZ1bmN0aW9uIHBvc2l0aW9uKF9yZWYpIHtcbiAgICB2YXIgdG9wID0gX3JlZi50b3A7XG4gICAgdmFyIGxlZnQgPSBfcmVmLmxlZnQ7XG5cbiAgICBpZiAoIXRoaXMub3B0aW9ucy5zaGlmdCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBzaGlmdCA9IHRoaXMub3B0aW9ucy5zaGlmdDtcbiAgICBpZiAodHlwZW9mIHRoaXMub3B0aW9ucy5zaGlmdCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgc2hpZnQgPSB0aGlzLm9wdGlvbnMuc2hpZnQuY2FsbCh0aGlzLCB7IHRvcDogdG9wLCBsZWZ0OiBsZWZ0IH0pO1xuICAgIH1cblxuICAgIHZhciBzaGlmdFRvcCA9IHVuZGVmaW5lZCxcbiAgICAgICAgc2hpZnRMZWZ0ID0gdW5kZWZpbmVkO1xuICAgIGlmICh0eXBlb2Ygc2hpZnQgPT09ICdzdHJpbmcnKSB7XG4gICAgICBzaGlmdCA9IHNoaWZ0LnNwbGl0KCcgJyk7XG4gICAgICBzaGlmdFsxXSA9IHNoaWZ0WzFdIHx8IHNoaWZ0WzBdO1xuXG4gICAgICB2YXIgX3NoaWZ0ID0gc2hpZnQ7XG5cbiAgICAgIHZhciBfc2hpZnQyID0gX3NsaWNlZFRvQXJyYXkoX3NoaWZ0LCAyKTtcblxuICAgICAgc2hpZnRUb3AgPSBfc2hpZnQyWzBdO1xuICAgICAgc2hpZnRMZWZ0ID0gX3NoaWZ0MlsxXTtcblxuICAgICAgc2hpZnRUb3AgPSBwYXJzZUZsb2F0KHNoaWZ0VG9wLCAxMCk7XG4gICAgICBzaGlmdExlZnQgPSBwYXJzZUZsb2F0KHNoaWZ0TGVmdCwgMTApO1xuICAgIH0gZWxzZSB7XG4gICAgICBzaGlmdFRvcCA9IHNoaWZ0LnRvcDtcbiAgICAgIHNoaWZ0TGVmdCA9IHNoaWZ0LmxlZnQ7XG4gICAgfVxuXG4gICAgdG9wICs9IHNoaWZ0VG9wO1xuICAgIGxlZnQgKz0gc2hpZnRMZWZ0O1xuXG4gICAgcmV0dXJuIHsgdG9wOiB0b3AsIGxlZnQ6IGxlZnQgfTtcbiAgfVxufSk7XG5yZXR1cm4gVGV0aGVyO1xuXG59KSk7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi90ZXRoZXIvZGlzdC9qcy90ZXRoZXIuanNcbiAqKiBtb2R1bGUgaWQgPSA0XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCIvKiFcbiAqIEJvb3RzdHJhcCB2NC4wLjAtYWxwaGEuNCAoaHR0cDovL2dldGJvb3RzdHJhcC5jb20pXG4gKiBDb3B5cmlnaHQgMjAxMS0yMDE2IFRoZSBCb290c3RyYXAgQXV0aG9ycyAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2dyYXBocy9jb250cmlidXRvcnMpXG4gKiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ibG9iL21hc3Rlci9MSUNFTlNFKVxuICovXG5cbmlmICh0eXBlb2YgalF1ZXJ5ID09PSAndW5kZWZpbmVkJykge1xuICB0aHJvdyBuZXcgRXJyb3IoJ0Jvb3RzdHJhcFxcJ3MgSmF2YVNjcmlwdCByZXF1aXJlcyBqUXVlcnknKVxufVxuXG4rZnVuY3Rpb24gKCQpIHtcbiAgdmFyIHZlcnNpb24gPSAkLmZuLmpxdWVyeS5zcGxpdCgnICcpWzBdLnNwbGl0KCcuJylcbiAgaWYgKCh2ZXJzaW9uWzBdIDwgMiAmJiB2ZXJzaW9uWzFdIDwgOSkgfHwgKHZlcnNpb25bMF0gPT0gMSAmJiB2ZXJzaW9uWzFdID09IDkgJiYgdmVyc2lvblsyXSA8IDEpIHx8ICh2ZXJzaW9uWzBdID49IDQpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdCb290c3RyYXBcXCdzIEphdmFTY3JpcHQgcmVxdWlyZXMgYXQgbGVhc3QgalF1ZXJ5IHYxLjkuMSBidXQgbGVzcyB0aGFuIHY0LjAuMCcpXG4gIH1cbn0oalF1ZXJ5KTtcblxuXG4rZnVuY3Rpb24gKCQpIHtcblxuLyoqXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogQm9vdHN0cmFwICh2NC4wLjAtYWxwaGEuNCk6IHV0aWwuanNcbiAqIExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2Jsb2IvbWFzdGVyL0xJQ0VOU0UpXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIF9nZXQgPSBmdW5jdGlvbiBnZXQoX3gsIF94MiwgX3gzKSB7IHZhciBfYWdhaW4gPSB0cnVlOyBfZnVuY3Rpb246IHdoaWxlIChfYWdhaW4pIHsgdmFyIG9iamVjdCA9IF94LCBwcm9wZXJ0eSA9IF94MiwgcmVjZWl2ZXIgPSBfeDM7IF9hZ2FpbiA9IGZhbHNlOyBpZiAob2JqZWN0ID09PSBudWxsKSBvYmplY3QgPSBGdW5jdGlvbi5wcm90b3R5cGU7IHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHByb3BlcnR5KTsgaWYgKGRlc2MgPT09IHVuZGVmaW5lZCkgeyB2YXIgcGFyZW50ID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKG9iamVjdCk7IGlmIChwYXJlbnQgPT09IG51bGwpIHsgcmV0dXJuIHVuZGVmaW5lZDsgfSBlbHNlIHsgX3ggPSBwYXJlbnQ7IF94MiA9IHByb3BlcnR5OyBfeDMgPSByZWNlaXZlcjsgX2FnYWluID0gdHJ1ZTsgZGVzYyA9IHBhcmVudCA9IHVuZGVmaW5lZDsgY29udGludWUgX2Z1bmN0aW9uOyB9IH0gZWxzZSBpZiAoJ3ZhbHVlJyBpbiBkZXNjKSB7IHJldHVybiBkZXNjLnZhbHVlOyB9IGVsc2UgeyB2YXIgZ2V0dGVyID0gZGVzYy5nZXQ7IGlmIChnZXR0ZXIgPT09IHVuZGVmaW5lZCkgeyByZXR1cm4gdW5kZWZpbmVkOyB9IHJldHVybiBnZXR0ZXIuY2FsbChyZWNlaXZlcik7IH0gfSB9O1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gKGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgndmFsdWUnIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KSgpO1xuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSAnZnVuY3Rpb24nICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcignU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAnICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbicpOyB9IH1cblxudmFyIFV0aWwgPSAoZnVuY3Rpb24gKCQpIHtcblxuICAvKipcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqIFByaXZhdGUgVHJhbnNpdGlvbkVuZCBIZWxwZXJzXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKi9cblxuICB2YXIgdHJhbnNpdGlvbiA9IGZhbHNlO1xuXG4gIHZhciBNQVhfVUlEID0gMTAwMDAwMDtcblxuICB2YXIgVHJhbnNpdGlvbkVuZEV2ZW50ID0ge1xuICAgIFdlYmtpdFRyYW5zaXRpb246ICd3ZWJraXRUcmFuc2l0aW9uRW5kJyxcbiAgICBNb3pUcmFuc2l0aW9uOiAndHJhbnNpdGlvbmVuZCcsXG4gICAgT1RyYW5zaXRpb246ICdvVHJhbnNpdGlvbkVuZCBvdHJhbnNpdGlvbmVuZCcsXG4gICAgdHJhbnNpdGlvbjogJ3RyYW5zaXRpb25lbmQnXG4gIH07XG5cbiAgLy8gc2hvdXRvdXQgQW5ndXNDcm9sbCAoaHR0cHM6Ly9nb28uZ2wvcHh3UUdwKVxuICBmdW5jdGlvbiB0b1R5cGUob2JqKSB7XG4gICAgcmV0dXJuICh7fSkudG9TdHJpbmcuY2FsbChvYmopLm1hdGNoKC9cXHMoW2EtekEtWl0rKS8pWzFdLnRvTG93ZXJDYXNlKCk7XG4gIH1cblxuICBmdW5jdGlvbiBpc0VsZW1lbnQob2JqKSB7XG4gICAgcmV0dXJuIChvYmpbMF0gfHwgb2JqKS5ub2RlVHlwZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldFNwZWNpYWxUcmFuc2l0aW9uRW5kRXZlbnQoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGJpbmRUeXBlOiB0cmFuc2l0aW9uLmVuZCxcbiAgICAgIGRlbGVnYXRlVHlwZTogdHJhbnNpdGlvbi5lbmQsXG4gICAgICBoYW5kbGU6IGZ1bmN0aW9uIGhhbmRsZShldmVudCkge1xuICAgICAgICBpZiAoJChldmVudC50YXJnZXQpLmlzKHRoaXMpKSB7XG4gICAgICAgICAgcmV0dXJuIGV2ZW50LmhhbmRsZU9iai5oYW5kbGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgcHJlZmVyLXJlc3QtcGFyYW1zXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgZnVuY3Rpb24gdHJhbnNpdGlvbkVuZFRlc3QoKSB7XG4gICAgaWYgKHdpbmRvdy5RVW5pdCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHZhciBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2Jvb3RzdHJhcCcpO1xuXG4gICAgZm9yICh2YXIgX25hbWUgaW4gVHJhbnNpdGlvbkVuZEV2ZW50KSB7XG4gICAgICBpZiAoZWwuc3R5bGVbX25hbWVdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHsgZW5kOiBUcmFuc2l0aW9uRW5kRXZlbnRbX25hbWVdIH07XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgZnVuY3Rpb24gdHJhbnNpdGlvbkVuZEVtdWxhdG9yKGR1cmF0aW9uKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIHZhciBjYWxsZWQgPSBmYWxzZTtcblxuICAgICQodGhpcykub25lKFV0aWwuVFJBTlNJVElPTl9FTkQsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNhbGxlZCA9IHRydWU7XG4gICAgfSk7XG5cbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICghY2FsbGVkKSB7XG4gICAgICAgIFV0aWwudHJpZ2dlclRyYW5zaXRpb25FbmQoX3RoaXMpO1xuICAgICAgfVxuICAgIH0sIGR1cmF0aW9uKTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgZnVuY3Rpb24gc2V0VHJhbnNpdGlvbkVuZFN1cHBvcnQoKSB7XG4gICAgdHJhbnNpdGlvbiA9IHRyYW5zaXRpb25FbmRUZXN0KCk7XG5cbiAgICAkLmZuLmVtdWxhdGVUcmFuc2l0aW9uRW5kID0gdHJhbnNpdGlvbkVuZEVtdWxhdG9yO1xuXG4gICAgaWYgKFV0aWwuc3VwcG9ydHNUcmFuc2l0aW9uRW5kKCkpIHtcbiAgICAgICQuZXZlbnQuc3BlY2lhbFtVdGlsLlRSQU5TSVRJT05fRU5EXSA9IGdldFNwZWNpYWxUcmFuc2l0aW9uRW5kRXZlbnQoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICogUHVibGljIFV0aWwgQXBpXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqL1xuXG4gIHZhciBVdGlsID0ge1xuXG4gICAgVFJBTlNJVElPTl9FTkQ6ICdic1RyYW5zaXRpb25FbmQnLFxuXG4gICAgZ2V0VUlEOiBmdW5jdGlvbiBnZXRVSUQocHJlZml4KSB7XG4gICAgICBkbyB7XG4gICAgICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLWJpdHdpc2UgKi9cbiAgICAgICAgcHJlZml4ICs9IH4gfihNYXRoLnJhbmRvbSgpICogTUFYX1VJRCk7IC8vIFwifn5cIiBhY3RzIGxpa2UgYSBmYXN0ZXIgTWF0aC5mbG9vcigpIGhlcmVcbiAgICAgICAgLyogZXNsaW50LWVuYWJsZSBuby1iaXR3aXNlICovXG4gICAgICB9IHdoaWxlIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChwcmVmaXgpKTtcbiAgICAgIHJldHVybiBwcmVmaXg7XG4gICAgfSxcblxuICAgIGdldFNlbGVjdG9yRnJvbUVsZW1lbnQ6IGZ1bmN0aW9uIGdldFNlbGVjdG9yRnJvbUVsZW1lbnQoZWxlbWVudCkge1xuICAgICAgdmFyIHNlbGVjdG9yID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdGFyZ2V0Jyk7XG5cbiAgICAgIGlmICghc2VsZWN0b3IpIHtcbiAgICAgICAgc2VsZWN0b3IgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnaHJlZicpIHx8ICcnO1xuICAgICAgICBzZWxlY3RvciA9IC9eI1thLXpdL2kudGVzdChzZWxlY3RvcikgPyBzZWxlY3RvciA6IG51bGw7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxlY3RvcjtcbiAgICB9LFxuXG4gICAgcmVmbG93OiBmdW5jdGlvbiByZWZsb3coZWxlbWVudCkge1xuICAgICAgbmV3IEZ1bmN0aW9uKCdicycsICdyZXR1cm4gYnMnKShlbGVtZW50Lm9mZnNldEhlaWdodCk7XG4gICAgfSxcblxuICAgIHRyaWdnZXJUcmFuc2l0aW9uRW5kOiBmdW5jdGlvbiB0cmlnZ2VyVHJhbnNpdGlvbkVuZChlbGVtZW50KSB7XG4gICAgICAkKGVsZW1lbnQpLnRyaWdnZXIodHJhbnNpdGlvbi5lbmQpO1xuICAgIH0sXG5cbiAgICBzdXBwb3J0c1RyYW5zaXRpb25FbmQ6IGZ1bmN0aW9uIHN1cHBvcnRzVHJhbnNpdGlvbkVuZCgpIHtcbiAgICAgIHJldHVybiBCb29sZWFuKHRyYW5zaXRpb24pO1xuICAgIH0sXG5cbiAgICB0eXBlQ2hlY2tDb25maWc6IGZ1bmN0aW9uIHR5cGVDaGVja0NvbmZpZyhjb21wb25lbnROYW1lLCBjb25maWcsIGNvbmZpZ1R5cGVzKSB7XG4gICAgICBmb3IgKHZhciBwcm9wZXJ0eSBpbiBjb25maWdUeXBlcykge1xuICAgICAgICBpZiAoY29uZmlnVHlwZXMuaGFzT3duUHJvcGVydHkocHJvcGVydHkpKSB7XG4gICAgICAgICAgdmFyIGV4cGVjdGVkVHlwZXMgPSBjb25maWdUeXBlc1twcm9wZXJ0eV07XG4gICAgICAgICAgdmFyIHZhbHVlID0gY29uZmlnW3Byb3BlcnR5XTtcbiAgICAgICAgICB2YXIgdmFsdWVUeXBlID0gdW5kZWZpbmVkO1xuXG4gICAgICAgICAgaWYgKHZhbHVlICYmIGlzRWxlbWVudCh2YWx1ZSkpIHtcbiAgICAgICAgICAgIHZhbHVlVHlwZSA9ICdlbGVtZW50JztcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFsdWVUeXBlID0gdG9UeXBlKHZhbHVlKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoIW5ldyBSZWdFeHAoZXhwZWN0ZWRUeXBlcykudGVzdCh2YWx1ZVR5cGUpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoY29tcG9uZW50TmFtZS50b1VwcGVyQ2FzZSgpICsgJzogJyArICgnT3B0aW9uIFwiJyArIHByb3BlcnR5ICsgJ1wiIHByb3ZpZGVkIHR5cGUgXCInICsgdmFsdWVUeXBlICsgJ1wiICcpICsgKCdidXQgZXhwZWN0ZWQgdHlwZSBcIicgKyBleHBlY3RlZFR5cGVzICsgJ1wiLicpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgc2V0VHJhbnNpdGlvbkVuZFN1cHBvcnQoKTtcblxuICByZXR1cm4gVXRpbDtcbn0pKGpRdWVyeSk7XG5cbi8qKlxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIEJvb3RzdHJhcCAodjQuMC4wLWFscGhhLjQpOiBhbGVydC5qc1xuICogTGljZW5zZWQgdW5kZXIgTUlUIChodHRwczovL2dpdGh1Yi5jb20vdHdicy9ib290c3RyYXAvYmxvYi9tYXN0ZXIvTElDRU5TRSlcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKi9cblxudmFyIEFsZXJ0ID0gKGZ1bmN0aW9uICgkKSB7XG5cbiAgLyoqXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKiBDb25zdGFudHNcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqL1xuXG4gIHZhciBOQU1FID0gJ2FsZXJ0JztcbiAgdmFyIFZFUlNJT04gPSAnNC4wLjAtYWxwaGEuNCc7XG4gIHZhciBEQVRBX0tFWSA9ICdicy5hbGVydCc7XG4gIHZhciBFVkVOVF9LRVkgPSAnLicgKyBEQVRBX0tFWTtcbiAgdmFyIERBVEFfQVBJX0tFWSA9ICcuZGF0YS1hcGknO1xuICB2YXIgSlFVRVJZX05PX0NPTkZMSUNUID0gJC5mbltOQU1FXTtcbiAgdmFyIFRSQU5TSVRJT05fRFVSQVRJT04gPSAxNTA7XG5cbiAgdmFyIFNlbGVjdG9yID0ge1xuICAgIERJU01JU1M6ICdbZGF0YS1kaXNtaXNzPVwiYWxlcnRcIl0nXG4gIH07XG5cbiAgdmFyIEV2ZW50ID0ge1xuICAgIENMT1NFOiAnY2xvc2UnICsgRVZFTlRfS0VZLFxuICAgIENMT1NFRDogJ2Nsb3NlZCcgKyBFVkVOVF9LRVksXG4gICAgQ0xJQ0tfREFUQV9BUEk6ICdjbGljaycgKyBFVkVOVF9LRVkgKyBEQVRBX0FQSV9LRVlcbiAgfTtcblxuICB2YXIgQ2xhc3NOYW1lID0ge1xuICAgIEFMRVJUOiAnYWxlcnQnLFxuICAgIEZBREU6ICdmYWRlJyxcbiAgICBJTjogJ2luJ1xuICB9O1xuXG4gIC8qKlxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICogQ2xhc3MgRGVmaW5pdGlvblxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICovXG5cbiAgdmFyIEFsZXJ0ID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBBbGVydChlbGVtZW50KSB7XG4gICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQWxlcnQpO1xuXG4gICAgICB0aGlzLl9lbGVtZW50ID0gZWxlbWVudDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgKiBEYXRhIEFwaSBpbXBsZW1lbnRhdGlvblxuICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAqL1xuXG4gICAgLy8gZ2V0dGVyc1xuXG4gICAgX2NyZWF0ZUNsYXNzKEFsZXJ0LCBbe1xuICAgICAga2V5OiAnY2xvc2UnLFxuXG4gICAgICAvLyBwdWJsaWNcblxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNsb3NlKGVsZW1lbnQpIHtcbiAgICAgICAgZWxlbWVudCA9IGVsZW1lbnQgfHwgdGhpcy5fZWxlbWVudDtcblxuICAgICAgICB2YXIgcm9vdEVsZW1lbnQgPSB0aGlzLl9nZXRSb290RWxlbWVudChlbGVtZW50KTtcbiAgICAgICAgdmFyIGN1c3RvbUV2ZW50ID0gdGhpcy5fdHJpZ2dlckNsb3NlRXZlbnQocm9vdEVsZW1lbnQpO1xuXG4gICAgICAgIGlmIChjdXN0b21FdmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX3JlbW92ZUVsZW1lbnQocm9vdEVsZW1lbnQpO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogJ2Rpc3Bvc2UnLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRpc3Bvc2UoKSB7XG4gICAgICAgICQucmVtb3ZlRGF0YSh0aGlzLl9lbGVtZW50LCBEQVRBX0tFWSk7XG4gICAgICAgIHRoaXMuX2VsZW1lbnQgPSBudWxsO1xuICAgICAgfVxuXG4gICAgICAvLyBwcml2YXRlXG5cbiAgICB9LCB7XG4gICAgICBrZXk6ICdfZ2V0Um9vdEVsZW1lbnQnLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9nZXRSb290RWxlbWVudChlbGVtZW50KSB7XG4gICAgICAgIHZhciBzZWxlY3RvciA9IFV0aWwuZ2V0U2VsZWN0b3JGcm9tRWxlbWVudChlbGVtZW50KTtcbiAgICAgICAgdmFyIHBhcmVudCA9IGZhbHNlO1xuXG4gICAgICAgIGlmIChzZWxlY3Rvcikge1xuICAgICAgICAgIHBhcmVudCA9ICQoc2VsZWN0b3IpWzBdO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFwYXJlbnQpIHtcbiAgICAgICAgICBwYXJlbnQgPSAkKGVsZW1lbnQpLmNsb3Nlc3QoJy4nICsgQ2xhc3NOYW1lLkFMRVJUKVswXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBwYXJlbnQ7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiAnX3RyaWdnZXJDbG9zZUV2ZW50JyxcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfdHJpZ2dlckNsb3NlRXZlbnQoZWxlbWVudCkge1xuICAgICAgICB2YXIgY2xvc2VFdmVudCA9ICQuRXZlbnQoRXZlbnQuQ0xPU0UpO1xuXG4gICAgICAgICQoZWxlbWVudCkudHJpZ2dlcihjbG9zZUV2ZW50KTtcbiAgICAgICAgcmV0dXJuIGNsb3NlRXZlbnQ7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiAnX3JlbW92ZUVsZW1lbnQnLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9yZW1vdmVFbGVtZW50KGVsZW1lbnQpIHtcbiAgICAgICAgJChlbGVtZW50KS5yZW1vdmVDbGFzcyhDbGFzc05hbWUuSU4pO1xuXG4gICAgICAgIGlmICghVXRpbC5zdXBwb3J0c1RyYW5zaXRpb25FbmQoKSB8fCAhJChlbGVtZW50KS5oYXNDbGFzcyhDbGFzc05hbWUuRkFERSkpIHtcbiAgICAgICAgICB0aGlzLl9kZXN0cm95RWxlbWVudChlbGVtZW50KTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAkKGVsZW1lbnQpLm9uZShVdGlsLlRSQU5TSVRJT05fRU5ELCAkLnByb3h5KHRoaXMuX2Rlc3Ryb3lFbGVtZW50LCB0aGlzLCBlbGVtZW50KSkuZW11bGF0ZVRyYW5zaXRpb25FbmQoVFJBTlNJVElPTl9EVVJBVElPTik7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiAnX2Rlc3Ryb3lFbGVtZW50JyxcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfZGVzdHJveUVsZW1lbnQoZWxlbWVudCkge1xuICAgICAgICAkKGVsZW1lbnQpLmRldGFjaCgpLnRyaWdnZXIoRXZlbnQuQ0xPU0VEKS5yZW1vdmUoKTtcbiAgICAgIH1cblxuICAgICAgLy8gc3RhdGljXG5cbiAgICB9XSwgW3tcbiAgICAgIGtleTogJ19qUXVlcnlJbnRlcmZhY2UnLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9qUXVlcnlJbnRlcmZhY2UoY29uZmlnKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHZhciAkZWxlbWVudCA9ICQodGhpcyk7XG4gICAgICAgICAgdmFyIGRhdGEgPSAkZWxlbWVudC5kYXRhKERBVEFfS0VZKTtcblxuICAgICAgICAgIGlmICghZGF0YSkge1xuICAgICAgICAgICAgZGF0YSA9IG5ldyBBbGVydCh0aGlzKTtcbiAgICAgICAgICAgICRlbGVtZW50LmRhdGEoREFUQV9LRVksIGRhdGEpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChjb25maWcgPT09ICdjbG9zZScpIHtcbiAgICAgICAgICAgIGRhdGFbY29uZmlnXSh0aGlzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogJ19oYW5kbGVEaXNtaXNzJyxcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlRGlzbWlzcyhhbGVydEluc3RhbmNlKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICBpZiAoZXZlbnQpIHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgYWxlcnRJbnN0YW5jZS5jbG9zZSh0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6ICdWRVJTSU9OJyxcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gVkVSU0lPTjtcbiAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gQWxlcnQ7XG4gIH0pKCk7XG5cbiAgJChkb2N1bWVudCkub24oRXZlbnQuQ0xJQ0tfREFUQV9BUEksIFNlbGVjdG9yLkRJU01JU1MsIEFsZXJ0Ll9oYW5kbGVEaXNtaXNzKG5ldyBBbGVydCgpKSk7XG5cbiAgLyoqXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKiBqUXVlcnlcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqL1xuXG4gICQuZm5bTkFNRV0gPSBBbGVydC5falF1ZXJ5SW50ZXJmYWNlO1xuICAkLmZuW05BTUVdLkNvbnN0cnVjdG9yID0gQWxlcnQ7XG4gICQuZm5bTkFNRV0ubm9Db25mbGljdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAkLmZuW05BTUVdID0gSlFVRVJZX05PX0NPTkZMSUNUO1xuICAgIHJldHVybiBBbGVydC5falF1ZXJ5SW50ZXJmYWNlO1xuICB9O1xuXG4gIHJldHVybiBBbGVydDtcbn0pKGpRdWVyeSk7XG5cbi8qKlxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIEJvb3RzdHJhcCAodjQuMC4wLWFscGhhLjQpOiBidXR0b24uanNcbiAqIExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2Jsb2IvbWFzdGVyL0xJQ0VOU0UpXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICovXG5cbnZhciBCdXR0b24gPSAoZnVuY3Rpb24gKCQpIHtcblxuICAvKipcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqIENvbnN0YW50c1xuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICovXG5cbiAgdmFyIE5BTUUgPSAnYnV0dG9uJztcbiAgdmFyIFZFUlNJT04gPSAnNC4wLjAtYWxwaGEuNCc7XG4gIHZhciBEQVRBX0tFWSA9ICdicy5idXR0b24nO1xuICB2YXIgRVZFTlRfS0VZID0gJy4nICsgREFUQV9LRVk7XG4gIHZhciBEQVRBX0FQSV9LRVkgPSAnLmRhdGEtYXBpJztcbiAgdmFyIEpRVUVSWV9OT19DT05GTElDVCA9ICQuZm5bTkFNRV07XG5cbiAgdmFyIENsYXNzTmFtZSA9IHtcbiAgICBBQ1RJVkU6ICdhY3RpdmUnLFxuICAgIEJVVFRPTjogJ2J0bicsXG4gICAgRk9DVVM6ICdmb2N1cydcbiAgfTtcblxuICB2YXIgU2VsZWN0b3IgPSB7XG4gICAgREFUQV9UT0dHTEVfQ0FSUk9UOiAnW2RhdGEtdG9nZ2xlXj1cImJ1dHRvblwiXScsXG4gICAgREFUQV9UT0dHTEU6ICdbZGF0YS10b2dnbGU9XCJidXR0b25zXCJdJyxcbiAgICBJTlBVVDogJ2lucHV0JyxcbiAgICBBQ1RJVkU6ICcuYWN0aXZlJyxcbiAgICBCVVRUT046ICcuYnRuJ1xuICB9O1xuXG4gIHZhciBFdmVudCA9IHtcbiAgICBDTElDS19EQVRBX0FQSTogJ2NsaWNrJyArIEVWRU5UX0tFWSArIERBVEFfQVBJX0tFWSxcbiAgICBGT0NVU19CTFVSX0RBVEFfQVBJOiAnZm9jdXMnICsgRVZFTlRfS0VZICsgREFUQV9BUElfS0VZICsgJyAnICsgKCdibHVyJyArIEVWRU5UX0tFWSArIERBVEFfQVBJX0tFWSlcbiAgfTtcblxuICAvKipcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqIENsYXNzIERlZmluaXRpb25cbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqL1xuXG4gIHZhciBCdXR0b24gPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEJ1dHRvbihlbGVtZW50KSB7XG4gICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQnV0dG9uKTtcblxuICAgICAgdGhpcy5fZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICogRGF0YSBBcGkgaW1wbGVtZW50YXRpb25cbiAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgKi9cblxuICAgIC8vIGdldHRlcnNcblxuICAgIF9jcmVhdGVDbGFzcyhCdXR0b24sIFt7XG4gICAgICBrZXk6ICd0b2dnbGUnLFxuXG4gICAgICAvLyBwdWJsaWNcblxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHRvZ2dsZSgpIHtcbiAgICAgICAgdmFyIHRyaWdnZXJDaGFuZ2VFdmVudCA9IHRydWU7XG4gICAgICAgIHZhciByb290RWxlbWVudCA9ICQodGhpcy5fZWxlbWVudCkuY2xvc2VzdChTZWxlY3Rvci5EQVRBX1RPR0dMRSlbMF07XG5cbiAgICAgICAgaWYgKHJvb3RFbGVtZW50KSB7XG4gICAgICAgICAgdmFyIGlucHV0ID0gJCh0aGlzLl9lbGVtZW50KS5maW5kKFNlbGVjdG9yLklOUFVUKVswXTtcblxuICAgICAgICAgIGlmIChpbnB1dCkge1xuICAgICAgICAgICAgaWYgKGlucHV0LnR5cGUgPT09ICdyYWRpbycpIHtcbiAgICAgICAgICAgICAgaWYgKGlucHV0LmNoZWNrZWQgJiYgJCh0aGlzLl9lbGVtZW50KS5oYXNDbGFzcyhDbGFzc05hbWUuQUNUSVZFKSkge1xuICAgICAgICAgICAgICAgIHRyaWdnZXJDaGFuZ2VFdmVudCA9IGZhbHNlO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBhY3RpdmVFbGVtZW50ID0gJChyb290RWxlbWVudCkuZmluZChTZWxlY3Rvci5BQ1RJVkUpWzBdO1xuXG4gICAgICAgICAgICAgICAgaWYgKGFjdGl2ZUVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICQoYWN0aXZlRWxlbWVudCkucmVtb3ZlQ2xhc3MoQ2xhc3NOYW1lLkFDVElWRSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0cmlnZ2VyQ2hhbmdlRXZlbnQpIHtcbiAgICAgICAgICAgICAgaW5wdXQuY2hlY2tlZCA9ICEkKHRoaXMuX2VsZW1lbnQpLmhhc0NsYXNzKENsYXNzTmFtZS5BQ1RJVkUpO1xuICAgICAgICAgICAgICAkKHRoaXMuX2VsZW1lbnQpLnRyaWdnZXIoJ2NoYW5nZScpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpbnB1dC5mb2N1cygpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLl9lbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1wcmVzc2VkJywgISQodGhpcy5fZWxlbWVudCkuaGFzQ2xhc3MoQ2xhc3NOYW1lLkFDVElWRSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRyaWdnZXJDaGFuZ2VFdmVudCkge1xuICAgICAgICAgICQodGhpcy5fZWxlbWVudCkudG9nZ2xlQ2xhc3MoQ2xhc3NOYW1lLkFDVElWRSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6ICdkaXNwb3NlJyxcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBkaXNwb3NlKCkge1xuICAgICAgICAkLnJlbW92ZURhdGEodGhpcy5fZWxlbWVudCwgREFUQV9LRVkpO1xuICAgICAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcbiAgICAgIH1cblxuICAgICAgLy8gc3RhdGljXG5cbiAgICB9XSwgW3tcbiAgICAgIGtleTogJ19qUXVlcnlJbnRlcmZhY2UnLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9qUXVlcnlJbnRlcmZhY2UoY29uZmlnKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHZhciBkYXRhID0gJCh0aGlzKS5kYXRhKERBVEFfS0VZKTtcblxuICAgICAgICAgIGlmICghZGF0YSkge1xuICAgICAgICAgICAgZGF0YSA9IG5ldyBCdXR0b24odGhpcyk7XG4gICAgICAgICAgICAkKHRoaXMpLmRhdGEoREFUQV9LRVksIGRhdGEpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChjb25maWcgPT09ICd0b2dnbGUnKSB7XG4gICAgICAgICAgICBkYXRhW2NvbmZpZ10oKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogJ1ZFUlNJT04nLFxuICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgIHJldHVybiBWRVJTSU9OO1xuICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBCdXR0b247XG4gIH0pKCk7XG5cbiAgJChkb2N1bWVudCkub24oRXZlbnQuQ0xJQ0tfREFUQV9BUEksIFNlbGVjdG9yLkRBVEFfVE9HR0xFX0NBUlJPVCwgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgIHZhciBidXR0b24gPSBldmVudC50YXJnZXQ7XG5cbiAgICBpZiAoISQoYnV0dG9uKS5oYXNDbGFzcyhDbGFzc05hbWUuQlVUVE9OKSkge1xuICAgICAgYnV0dG9uID0gJChidXR0b24pLmNsb3Nlc3QoU2VsZWN0b3IuQlVUVE9OKTtcbiAgICB9XG5cbiAgICBCdXR0b24uX2pRdWVyeUludGVyZmFjZS5jYWxsKCQoYnV0dG9uKSwgJ3RvZ2dsZScpO1xuICB9KS5vbihFdmVudC5GT0NVU19CTFVSX0RBVEFfQVBJLCBTZWxlY3Rvci5EQVRBX1RPR0dMRV9DQVJST1QsIGZ1bmN0aW9uIChldmVudCkge1xuICAgIHZhciBidXR0b24gPSAkKGV2ZW50LnRhcmdldCkuY2xvc2VzdChTZWxlY3Rvci5CVVRUT04pWzBdO1xuICAgICQoYnV0dG9uKS50b2dnbGVDbGFzcyhDbGFzc05hbWUuRk9DVVMsIC9eZm9jdXMoaW4pPyQvLnRlc3QoZXZlbnQudHlwZSkpO1xuICB9KTtcblxuICAvKipcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqIGpRdWVyeVxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICovXG5cbiAgJC5mbltOQU1FXSA9IEJ1dHRvbi5falF1ZXJ5SW50ZXJmYWNlO1xuICAkLmZuW05BTUVdLkNvbnN0cnVjdG9yID0gQnV0dG9uO1xuICAkLmZuW05BTUVdLm5vQ29uZmxpY3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgJC5mbltOQU1FXSA9IEpRVUVSWV9OT19DT05GTElDVDtcbiAgICByZXR1cm4gQnV0dG9uLl9qUXVlcnlJbnRlcmZhY2U7XG4gIH07XG5cbiAgcmV0dXJuIEJ1dHRvbjtcbn0pKGpRdWVyeSk7XG5cbi8qKlxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIEJvb3RzdHJhcCAodjQuMC4wLWFscGhhLjQpOiBjYXJvdXNlbC5qc1xuICogTGljZW5zZWQgdW5kZXIgTUlUIChodHRwczovL2dpdGh1Yi5jb20vdHdicy9ib290c3RyYXAvYmxvYi9tYXN0ZXIvTElDRU5TRSlcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKi9cblxudmFyIENhcm91c2VsID0gKGZ1bmN0aW9uICgkKSB7XG5cbiAgLyoqXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKiBDb25zdGFudHNcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqL1xuXG4gIHZhciBOQU1FID0gJ2Nhcm91c2VsJztcbiAgdmFyIFZFUlNJT04gPSAnNC4wLjAtYWxwaGEuNCc7XG4gIHZhciBEQVRBX0tFWSA9ICdicy5jYXJvdXNlbCc7XG4gIHZhciBFVkVOVF9LRVkgPSAnLicgKyBEQVRBX0tFWTtcbiAgdmFyIERBVEFfQVBJX0tFWSA9ICcuZGF0YS1hcGknO1xuICB2YXIgSlFVRVJZX05PX0NPTkZMSUNUID0gJC5mbltOQU1FXTtcbiAgdmFyIFRSQU5TSVRJT05fRFVSQVRJT04gPSA2MDA7XG4gIHZhciBBUlJPV19MRUZUX0tFWUNPREUgPSAzNzsgLy8gS2V5Ym9hcmRFdmVudC53aGljaCB2YWx1ZSBmb3IgbGVmdCBhcnJvdyBrZXlcbiAgdmFyIEFSUk9XX1JJR0hUX0tFWUNPREUgPSAzOTsgLy8gS2V5Ym9hcmRFdmVudC53aGljaCB2YWx1ZSBmb3IgcmlnaHQgYXJyb3cga2V5XG5cbiAgdmFyIERlZmF1bHQgPSB7XG4gICAgaW50ZXJ2YWw6IDUwMDAsXG4gICAga2V5Ym9hcmQ6IHRydWUsXG4gICAgc2xpZGU6IGZhbHNlLFxuICAgIHBhdXNlOiAnaG92ZXInLFxuICAgIHdyYXA6IHRydWVcbiAgfTtcblxuICB2YXIgRGVmYXVsdFR5cGUgPSB7XG4gICAgaW50ZXJ2YWw6ICcobnVtYmVyfGJvb2xlYW4pJyxcbiAgICBrZXlib2FyZDogJ2Jvb2xlYW4nLFxuICAgIHNsaWRlOiAnKGJvb2xlYW58c3RyaW5nKScsXG4gICAgcGF1c2U6ICcoc3RyaW5nfGJvb2xlYW4pJyxcbiAgICB3cmFwOiAnYm9vbGVhbidcbiAgfTtcblxuICB2YXIgRGlyZWN0aW9uID0ge1xuICAgIE5FWFQ6ICduZXh0JyxcbiAgICBQUkVWSU9VUzogJ3ByZXYnXG4gIH07XG5cbiAgdmFyIEV2ZW50ID0ge1xuICAgIFNMSURFOiAnc2xpZGUnICsgRVZFTlRfS0VZLFxuICAgIFNMSUQ6ICdzbGlkJyArIEVWRU5UX0tFWSxcbiAgICBLRVlET1dOOiAna2V5ZG93bicgKyBFVkVOVF9LRVksXG4gICAgTU9VU0VFTlRFUjogJ21vdXNlZW50ZXInICsgRVZFTlRfS0VZLFxuICAgIE1PVVNFTEVBVkU6ICdtb3VzZWxlYXZlJyArIEVWRU5UX0tFWSxcbiAgICBMT0FEX0RBVEFfQVBJOiAnbG9hZCcgKyBFVkVOVF9LRVkgKyBEQVRBX0FQSV9LRVksXG4gICAgQ0xJQ0tfREFUQV9BUEk6ICdjbGljaycgKyBFVkVOVF9LRVkgKyBEQVRBX0FQSV9LRVlcbiAgfTtcblxuICB2YXIgQ2xhc3NOYW1lID0ge1xuICAgIENBUk9VU0VMOiAnY2Fyb3VzZWwnLFxuICAgIEFDVElWRTogJ2FjdGl2ZScsXG4gICAgU0xJREU6ICdzbGlkZScsXG4gICAgUklHSFQ6ICdyaWdodCcsXG4gICAgTEVGVDogJ2xlZnQnLFxuICAgIElURU06ICdjYXJvdXNlbC1pdGVtJ1xuICB9O1xuXG4gIHZhciBTZWxlY3RvciA9IHtcbiAgICBBQ1RJVkU6ICcuYWN0aXZlJyxcbiAgICBBQ1RJVkVfSVRFTTogJy5hY3RpdmUuY2Fyb3VzZWwtaXRlbScsXG4gICAgSVRFTTogJy5jYXJvdXNlbC1pdGVtJyxcbiAgICBORVhUX1BSRVY6ICcubmV4dCwgLnByZXYnLFxuICAgIElORElDQVRPUlM6ICcuY2Fyb3VzZWwtaW5kaWNhdG9ycycsXG4gICAgREFUQV9TTElERTogJ1tkYXRhLXNsaWRlXSwgW2RhdGEtc2xpZGUtdG9dJyxcbiAgICBEQVRBX1JJREU6ICdbZGF0YS1yaWRlPVwiY2Fyb3VzZWxcIl0nXG4gIH07XG5cbiAgLyoqXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKiBDbGFzcyBEZWZpbml0aW9uXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKi9cblxuICB2YXIgQ2Fyb3VzZWwgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIENhcm91c2VsKGVsZW1lbnQsIGNvbmZpZykge1xuICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENhcm91c2VsKTtcblxuICAgICAgdGhpcy5faXRlbXMgPSBudWxsO1xuICAgICAgdGhpcy5faW50ZXJ2YWwgPSBudWxsO1xuICAgICAgdGhpcy5fYWN0aXZlRWxlbWVudCA9IG51bGw7XG5cbiAgICAgIHRoaXMuX2lzUGF1c2VkID0gZmFsc2U7XG4gICAgICB0aGlzLl9pc1NsaWRpbmcgPSBmYWxzZTtcblxuICAgICAgdGhpcy5fY29uZmlnID0gdGhpcy5fZ2V0Q29uZmlnKGNvbmZpZyk7XG4gICAgICB0aGlzLl9lbGVtZW50ID0gJChlbGVtZW50KVswXTtcbiAgICAgIHRoaXMuX2luZGljYXRvcnNFbGVtZW50ID0gJCh0aGlzLl9lbGVtZW50KS5maW5kKFNlbGVjdG9yLklORElDQVRPUlMpWzBdO1xuXG4gICAgICB0aGlzLl9hZGRFdmVudExpc3RlbmVycygpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAqIERhdGEgQXBpIGltcGxlbWVudGF0aW9uXG4gICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICovXG5cbiAgICAvLyBnZXR0ZXJzXG5cbiAgICBfY3JlYXRlQ2xhc3MoQ2Fyb3VzZWwsIFt7XG4gICAgICBrZXk6ICduZXh0JyxcblxuICAgICAgLy8gcHVibGljXG5cbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBuZXh0KCkge1xuICAgICAgICBpZiAoIXRoaXMuX2lzU2xpZGluZykge1xuICAgICAgICAgIHRoaXMuX3NsaWRlKERpcmVjdGlvbi5ORVhUKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogJ25leHRXaGVuVmlzaWJsZScsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gbmV4dFdoZW5WaXNpYmxlKCkge1xuICAgICAgICAvLyBEb24ndCBjYWxsIG5leHQgd2hlbiB0aGUgcGFnZSBpc24ndCB2aXNpYmxlXG4gICAgICAgIGlmICghZG9jdW1lbnQuaGlkZGVuKSB7XG4gICAgICAgICAgdGhpcy5uZXh0KCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6ICdwcmV2JyxcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBwcmV2KCkge1xuICAgICAgICBpZiAoIXRoaXMuX2lzU2xpZGluZykge1xuICAgICAgICAgIHRoaXMuX3NsaWRlKERpcmVjdGlvbi5QUkVWSU9VUyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6ICdwYXVzZScsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gcGF1c2UoZXZlbnQpIHtcbiAgICAgICAgaWYgKCFldmVudCkge1xuICAgICAgICAgIHRoaXMuX2lzUGF1c2VkID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICgkKHRoaXMuX2VsZW1lbnQpLmZpbmQoU2VsZWN0b3IuTkVYVF9QUkVWKVswXSAmJiBVdGlsLnN1cHBvcnRzVHJhbnNpdGlvbkVuZCgpKSB7XG4gICAgICAgICAgVXRpbC50cmlnZ2VyVHJhbnNpdGlvbkVuZCh0aGlzLl9lbGVtZW50KTtcbiAgICAgICAgICB0aGlzLmN5Y2xlKHRydWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLl9pbnRlcnZhbCk7XG4gICAgICAgIHRoaXMuX2ludGVydmFsID0gbnVsbDtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6ICdjeWNsZScsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gY3ljbGUoZXZlbnQpIHtcbiAgICAgICAgaWYgKCFldmVudCkge1xuICAgICAgICAgIHRoaXMuX2lzUGF1c2VkID0gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5faW50ZXJ2YWwpIHtcbiAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMuX2ludGVydmFsKTtcbiAgICAgICAgICB0aGlzLl9pbnRlcnZhbCA9IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5fY29uZmlnLmludGVydmFsICYmICF0aGlzLl9pc1BhdXNlZCkge1xuICAgICAgICAgIHRoaXMuX2ludGVydmFsID0gc2V0SW50ZXJ2YWwoJC5wcm94eShkb2N1bWVudC52aXNpYmlsaXR5U3RhdGUgPyB0aGlzLm5leHRXaGVuVmlzaWJsZSA6IHRoaXMubmV4dCwgdGhpcyksIHRoaXMuX2NvbmZpZy5pbnRlcnZhbCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6ICd0bycsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gdG8oaW5kZXgpIHtcbiAgICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgICAgdGhpcy5fYWN0aXZlRWxlbWVudCA9ICQodGhpcy5fZWxlbWVudCkuZmluZChTZWxlY3Rvci5BQ1RJVkVfSVRFTSlbMF07XG5cbiAgICAgICAgdmFyIGFjdGl2ZUluZGV4ID0gdGhpcy5fZ2V0SXRlbUluZGV4KHRoaXMuX2FjdGl2ZUVsZW1lbnQpO1xuXG4gICAgICAgIGlmIChpbmRleCA+IHRoaXMuX2l0ZW1zLmxlbmd0aCAtIDEgfHwgaW5kZXggPCAwKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuX2lzU2xpZGluZykge1xuICAgICAgICAgICQodGhpcy5fZWxlbWVudCkub25lKEV2ZW50LlNMSUQsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBfdGhpczIudG8oaW5kZXgpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChhY3RpdmVJbmRleCA9PT0gaW5kZXgpIHtcbiAgICAgICAgICB0aGlzLnBhdXNlKCk7XG4gICAgICAgICAgdGhpcy5jeWNsZSgpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBkaXJlY3Rpb24gPSBpbmRleCA+IGFjdGl2ZUluZGV4ID8gRGlyZWN0aW9uLk5FWFQgOiBEaXJlY3Rpb24uUFJFVklPVVM7XG5cbiAgICAgICAgdGhpcy5fc2xpZGUoZGlyZWN0aW9uLCB0aGlzLl9pdGVtc1tpbmRleF0pO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogJ2Rpc3Bvc2UnLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRpc3Bvc2UoKSB7XG4gICAgICAgICQodGhpcy5fZWxlbWVudCkub2ZmKEVWRU5UX0tFWSk7XG4gICAgICAgICQucmVtb3ZlRGF0YSh0aGlzLl9lbGVtZW50LCBEQVRBX0tFWSk7XG5cbiAgICAgICAgdGhpcy5faXRlbXMgPSBudWxsO1xuICAgICAgICB0aGlzLl9jb25maWcgPSBudWxsO1xuICAgICAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcbiAgICAgICAgdGhpcy5faW50ZXJ2YWwgPSBudWxsO1xuICAgICAgICB0aGlzLl9pc1BhdXNlZCA9IG51bGw7XG4gICAgICAgIHRoaXMuX2lzU2xpZGluZyA9IG51bGw7XG4gICAgICAgIHRoaXMuX2FjdGl2ZUVsZW1lbnQgPSBudWxsO1xuICAgICAgICB0aGlzLl9pbmRpY2F0b3JzRWxlbWVudCA9IG51bGw7XG4gICAgICB9XG5cbiAgICAgIC8vIHByaXZhdGVcblxuICAgIH0sIHtcbiAgICAgIGtleTogJ19nZXRDb25maWcnLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9nZXRDb25maWcoY29uZmlnKSB7XG4gICAgICAgIGNvbmZpZyA9ICQuZXh0ZW5kKHt9LCBEZWZhdWx0LCBjb25maWcpO1xuICAgICAgICBVdGlsLnR5cGVDaGVja0NvbmZpZyhOQU1FLCBjb25maWcsIERlZmF1bHRUeXBlKTtcbiAgICAgICAgcmV0dXJuIGNvbmZpZztcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6ICdfYWRkRXZlbnRMaXN0ZW5lcnMnLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9hZGRFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgaWYgKHRoaXMuX2NvbmZpZy5rZXlib2FyZCkge1xuICAgICAgICAgICQodGhpcy5fZWxlbWVudCkub24oRXZlbnQuS0VZRE9XTiwgJC5wcm94eSh0aGlzLl9rZXlkb3duLCB0aGlzKSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5fY29uZmlnLnBhdXNlID09PSAnaG92ZXInICYmICEoJ29udG91Y2hzdGFydCcgaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KSkge1xuICAgICAgICAgICQodGhpcy5fZWxlbWVudCkub24oRXZlbnQuTU9VU0VFTlRFUiwgJC5wcm94eSh0aGlzLnBhdXNlLCB0aGlzKSkub24oRXZlbnQuTU9VU0VMRUFWRSwgJC5wcm94eSh0aGlzLmN5Y2xlLCB0aGlzKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6ICdfa2V5ZG93bicsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2tleWRvd24oZXZlbnQpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICBpZiAoL2lucHV0fHRleHRhcmVhL2kudGVzdChldmVudC50YXJnZXQudGFnTmFtZSkpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBzd2l0Y2ggKGV2ZW50LndoaWNoKSB7XG4gICAgICAgICAgY2FzZSBBUlJPV19MRUZUX0tFWUNPREU6XG4gICAgICAgICAgICB0aGlzLnByZXYoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgQVJST1dfUklHSFRfS0VZQ09ERTpcbiAgICAgICAgICAgIHRoaXMubmV4dCgpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogJ19nZXRJdGVtSW5kZXgnLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9nZXRJdGVtSW5kZXgoZWxlbWVudCkge1xuICAgICAgICB0aGlzLl9pdGVtcyA9ICQubWFrZUFycmF5KCQoZWxlbWVudCkucGFyZW50KCkuZmluZChTZWxlY3Rvci5JVEVNKSk7XG4gICAgICAgIHJldHVybiB0aGlzLl9pdGVtcy5pbmRleE9mKGVsZW1lbnQpO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogJ19nZXRJdGVtQnlEaXJlY3Rpb24nLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9nZXRJdGVtQnlEaXJlY3Rpb24oZGlyZWN0aW9uLCBhY3RpdmVFbGVtZW50KSB7XG4gICAgICAgIHZhciBpc05leHREaXJlY3Rpb24gPSBkaXJlY3Rpb24gPT09IERpcmVjdGlvbi5ORVhUO1xuICAgICAgICB2YXIgaXNQcmV2RGlyZWN0aW9uID0gZGlyZWN0aW9uID09PSBEaXJlY3Rpb24uUFJFVklPVVM7XG4gICAgICAgIHZhciBhY3RpdmVJbmRleCA9IHRoaXMuX2dldEl0ZW1JbmRleChhY3RpdmVFbGVtZW50KTtcbiAgICAgICAgdmFyIGxhc3RJdGVtSW5kZXggPSB0aGlzLl9pdGVtcy5sZW5ndGggLSAxO1xuICAgICAgICB2YXIgaXNHb2luZ1RvV3JhcCA9IGlzUHJldkRpcmVjdGlvbiAmJiBhY3RpdmVJbmRleCA9PT0gMCB8fCBpc05leHREaXJlY3Rpb24gJiYgYWN0aXZlSW5kZXggPT09IGxhc3RJdGVtSW5kZXg7XG5cbiAgICAgICAgaWYgKGlzR29pbmdUb1dyYXAgJiYgIXRoaXMuX2NvbmZpZy53cmFwKSB7XG4gICAgICAgICAgcmV0dXJuIGFjdGl2ZUVsZW1lbnQ7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZGVsdGEgPSBkaXJlY3Rpb24gPT09IERpcmVjdGlvbi5QUkVWSU9VUyA/IC0xIDogMTtcbiAgICAgICAgdmFyIGl0ZW1JbmRleCA9IChhY3RpdmVJbmRleCArIGRlbHRhKSAlIHRoaXMuX2l0ZW1zLmxlbmd0aDtcblxuICAgICAgICByZXR1cm4gaXRlbUluZGV4ID09PSAtMSA/IHRoaXMuX2l0ZW1zW3RoaXMuX2l0ZW1zLmxlbmd0aCAtIDFdIDogdGhpcy5faXRlbXNbaXRlbUluZGV4XTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6ICdfdHJpZ2dlclNsaWRlRXZlbnQnLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF90cmlnZ2VyU2xpZGVFdmVudChyZWxhdGVkVGFyZ2V0LCBkaXJlY3Rpb25hbENsYXNzbmFtZSkge1xuICAgICAgICB2YXIgc2xpZGVFdmVudCA9ICQuRXZlbnQoRXZlbnQuU0xJREUsIHtcbiAgICAgICAgICByZWxhdGVkVGFyZ2V0OiByZWxhdGVkVGFyZ2V0LFxuICAgICAgICAgIGRpcmVjdGlvbjogZGlyZWN0aW9uYWxDbGFzc25hbWVcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJCh0aGlzLl9lbGVtZW50KS50cmlnZ2VyKHNsaWRlRXZlbnQpO1xuXG4gICAgICAgIHJldHVybiBzbGlkZUV2ZW50O1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogJ19zZXRBY3RpdmVJbmRpY2F0b3JFbGVtZW50JyxcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfc2V0QWN0aXZlSW5kaWNhdG9yRWxlbWVudChlbGVtZW50KSB7XG4gICAgICAgIGlmICh0aGlzLl9pbmRpY2F0b3JzRWxlbWVudCkge1xuICAgICAgICAgICQodGhpcy5faW5kaWNhdG9yc0VsZW1lbnQpLmZpbmQoU2VsZWN0b3IuQUNUSVZFKS5yZW1vdmVDbGFzcyhDbGFzc05hbWUuQUNUSVZFKTtcblxuICAgICAgICAgIHZhciBuZXh0SW5kaWNhdG9yID0gdGhpcy5faW5kaWNhdG9yc0VsZW1lbnQuY2hpbGRyZW5bdGhpcy5fZ2V0SXRlbUluZGV4KGVsZW1lbnQpXTtcblxuICAgICAgICAgIGlmIChuZXh0SW5kaWNhdG9yKSB7XG4gICAgICAgICAgICAkKG5leHRJbmRpY2F0b3IpLmFkZENsYXNzKENsYXNzTmFtZS5BQ1RJVkUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogJ19zbGlkZScsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX3NsaWRlKGRpcmVjdGlvbiwgZWxlbWVudCkge1xuICAgICAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgICAgICB2YXIgYWN0aXZlRWxlbWVudCA9ICQodGhpcy5fZWxlbWVudCkuZmluZChTZWxlY3Rvci5BQ1RJVkVfSVRFTSlbMF07XG4gICAgICAgIHZhciBuZXh0RWxlbWVudCA9IGVsZW1lbnQgfHwgYWN0aXZlRWxlbWVudCAmJiB0aGlzLl9nZXRJdGVtQnlEaXJlY3Rpb24oZGlyZWN0aW9uLCBhY3RpdmVFbGVtZW50KTtcblxuICAgICAgICB2YXIgaXNDeWNsaW5nID0gQm9vbGVhbih0aGlzLl9pbnRlcnZhbCk7XG5cbiAgICAgICAgdmFyIGRpcmVjdGlvbmFsQ2xhc3NOYW1lID0gZGlyZWN0aW9uID09PSBEaXJlY3Rpb24uTkVYVCA/IENsYXNzTmFtZS5MRUZUIDogQ2xhc3NOYW1lLlJJR0hUO1xuXG4gICAgICAgIGlmIChuZXh0RWxlbWVudCAmJiAkKG5leHRFbGVtZW50KS5oYXNDbGFzcyhDbGFzc05hbWUuQUNUSVZFKSkge1xuICAgICAgICAgIHRoaXMuX2lzU2xpZGluZyA9IGZhbHNlO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBzbGlkZUV2ZW50ID0gdGhpcy5fdHJpZ2dlclNsaWRlRXZlbnQobmV4dEVsZW1lbnQsIGRpcmVjdGlvbmFsQ2xhc3NOYW1lKTtcbiAgICAgICAgaWYgKHNsaWRlRXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWFjdGl2ZUVsZW1lbnQgfHwgIW5leHRFbGVtZW50KSB7XG4gICAgICAgICAgLy8gc29tZSB3ZWlyZG5lc3MgaXMgaGFwcGVuaW5nLCBzbyB3ZSBiYWlsXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5faXNTbGlkaW5nID0gdHJ1ZTtcblxuICAgICAgICBpZiAoaXNDeWNsaW5nKSB7XG4gICAgICAgICAgdGhpcy5wYXVzZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fc2V0QWN0aXZlSW5kaWNhdG9yRWxlbWVudChuZXh0RWxlbWVudCk7XG5cbiAgICAgICAgdmFyIHNsaWRFdmVudCA9ICQuRXZlbnQoRXZlbnQuU0xJRCwge1xuICAgICAgICAgIHJlbGF0ZWRUYXJnZXQ6IG5leHRFbGVtZW50LFxuICAgICAgICAgIGRpcmVjdGlvbjogZGlyZWN0aW9uYWxDbGFzc05hbWVcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKFV0aWwuc3VwcG9ydHNUcmFuc2l0aW9uRW5kKCkgJiYgJCh0aGlzLl9lbGVtZW50KS5oYXNDbGFzcyhDbGFzc05hbWUuU0xJREUpKSB7XG5cbiAgICAgICAgICAkKG5leHRFbGVtZW50KS5hZGRDbGFzcyhkaXJlY3Rpb24pO1xuXG4gICAgICAgICAgVXRpbC5yZWZsb3cobmV4dEVsZW1lbnQpO1xuXG4gICAgICAgICAgJChhY3RpdmVFbGVtZW50KS5hZGRDbGFzcyhkaXJlY3Rpb25hbENsYXNzTmFtZSk7XG4gICAgICAgICAgJChuZXh0RWxlbWVudCkuYWRkQ2xhc3MoZGlyZWN0aW9uYWxDbGFzc05hbWUpO1xuXG4gICAgICAgICAgJChhY3RpdmVFbGVtZW50KS5vbmUoVXRpbC5UUkFOU0lUSU9OX0VORCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJChuZXh0RWxlbWVudCkucmVtb3ZlQ2xhc3MoZGlyZWN0aW9uYWxDbGFzc05hbWUpLnJlbW92ZUNsYXNzKGRpcmVjdGlvbik7XG5cbiAgICAgICAgICAgICQobmV4dEVsZW1lbnQpLmFkZENsYXNzKENsYXNzTmFtZS5BQ1RJVkUpO1xuXG4gICAgICAgICAgICAkKGFjdGl2ZUVsZW1lbnQpLnJlbW92ZUNsYXNzKENsYXNzTmFtZS5BQ1RJVkUpLnJlbW92ZUNsYXNzKGRpcmVjdGlvbikucmVtb3ZlQ2xhc3MoZGlyZWN0aW9uYWxDbGFzc05hbWUpO1xuXG4gICAgICAgICAgICBfdGhpczMuX2lzU2xpZGluZyA9IGZhbHNlO1xuXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgcmV0dXJuICQoX3RoaXMzLl9lbGVtZW50KS50cmlnZ2VyKHNsaWRFdmVudCk7XG4gICAgICAgICAgICB9LCAwKTtcbiAgICAgICAgICB9KS5lbXVsYXRlVHJhbnNpdGlvbkVuZChUUkFOU0lUSU9OX0RVUkFUSU9OKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAkKGFjdGl2ZUVsZW1lbnQpLnJlbW92ZUNsYXNzKENsYXNzTmFtZS5BQ1RJVkUpO1xuICAgICAgICAgICQobmV4dEVsZW1lbnQpLmFkZENsYXNzKENsYXNzTmFtZS5BQ1RJVkUpO1xuXG4gICAgICAgICAgdGhpcy5faXNTbGlkaW5nID0gZmFsc2U7XG4gICAgICAgICAgJCh0aGlzLl9lbGVtZW50KS50cmlnZ2VyKHNsaWRFdmVudCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNDeWNsaW5nKSB7XG4gICAgICAgICAgdGhpcy5jeWNsZSgpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIHN0YXRpY1xuXG4gICAgfV0sIFt7XG4gICAgICBrZXk6ICdfalF1ZXJ5SW50ZXJmYWNlJyxcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfalF1ZXJ5SW50ZXJmYWNlKGNvbmZpZykge1xuICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB2YXIgZGF0YSA9ICQodGhpcykuZGF0YShEQVRBX0tFWSk7XG4gICAgICAgICAgdmFyIF9jb25maWcgPSAkLmV4dGVuZCh7fSwgRGVmYXVsdCwgJCh0aGlzKS5kYXRhKCkpO1xuXG4gICAgICAgICAgaWYgKHR5cGVvZiBjb25maWcgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAkLmV4dGVuZChfY29uZmlnLCBjb25maWcpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHZhciBhY3Rpb24gPSB0eXBlb2YgY29uZmlnID09PSAnc3RyaW5nJyA/IGNvbmZpZyA6IF9jb25maWcuc2xpZGU7XG5cbiAgICAgICAgICBpZiAoIWRhdGEpIHtcbiAgICAgICAgICAgIGRhdGEgPSBuZXcgQ2Fyb3VzZWwodGhpcywgX2NvbmZpZyk7XG4gICAgICAgICAgICAkKHRoaXMpLmRhdGEoREFUQV9LRVksIGRhdGEpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICh0eXBlb2YgY29uZmlnID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgZGF0YS50byhjb25maWcpO1xuICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGFjdGlvbiA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGlmIChkYXRhW2FjdGlvbl0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIG1ldGhvZCBuYW1lZCBcIicgKyBhY3Rpb24gKyAnXCInKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRhdGFbYWN0aW9uXSgpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoX2NvbmZpZy5pbnRlcnZhbCkge1xuICAgICAgICAgICAgZGF0YS5wYXVzZSgpO1xuICAgICAgICAgICAgZGF0YS5jeWNsZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiAnX2RhdGFBcGlDbGlja0hhbmRsZXInLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9kYXRhQXBpQ2xpY2tIYW5kbGVyKGV2ZW50KSB7XG4gICAgICAgIHZhciBzZWxlY3RvciA9IFV0aWwuZ2V0U2VsZWN0b3JGcm9tRWxlbWVudCh0aGlzKTtcblxuICAgICAgICBpZiAoIXNlbGVjdG9yKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHRhcmdldCA9ICQoc2VsZWN0b3IpWzBdO1xuXG4gICAgICAgIGlmICghdGFyZ2V0IHx8ICEkKHRhcmdldCkuaGFzQ2xhc3MoQ2xhc3NOYW1lLkNBUk9VU0VMKSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBjb25maWcgPSAkLmV4dGVuZCh7fSwgJCh0YXJnZXQpLmRhdGEoKSwgJCh0aGlzKS5kYXRhKCkpO1xuICAgICAgICB2YXIgc2xpZGVJbmRleCA9IHRoaXMuZ2V0QXR0cmlidXRlKCdkYXRhLXNsaWRlLXRvJyk7XG5cbiAgICAgICAgaWYgKHNsaWRlSW5kZXgpIHtcbiAgICAgICAgICBjb25maWcuaW50ZXJ2YWwgPSBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIENhcm91c2VsLl9qUXVlcnlJbnRlcmZhY2UuY2FsbCgkKHRhcmdldCksIGNvbmZpZyk7XG5cbiAgICAgICAgaWYgKHNsaWRlSW5kZXgpIHtcbiAgICAgICAgICAkKHRhcmdldCkuZGF0YShEQVRBX0tFWSkudG8oc2xpZGVJbmRleCk7XG4gICAgICAgIH1cblxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogJ1ZFUlNJT04nLFxuICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgIHJldHVybiBWRVJTSU9OO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogJ0RlZmF1bHQnLFxuICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgIHJldHVybiBEZWZhdWx0O1xuICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBDYXJvdXNlbDtcbiAgfSkoKTtcblxuICAkKGRvY3VtZW50KS5vbihFdmVudC5DTElDS19EQVRBX0FQSSwgU2VsZWN0b3IuREFUQV9TTElERSwgQ2Fyb3VzZWwuX2RhdGFBcGlDbGlja0hhbmRsZXIpO1xuXG4gICQod2luZG93KS5vbihFdmVudC5MT0FEX0RBVEFfQVBJLCBmdW5jdGlvbiAoKSB7XG4gICAgJChTZWxlY3Rvci5EQVRBX1JJREUpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgdmFyICRjYXJvdXNlbCA9ICQodGhpcyk7XG4gICAgICBDYXJvdXNlbC5falF1ZXJ5SW50ZXJmYWNlLmNhbGwoJGNhcm91c2VsLCAkY2Fyb3VzZWwuZGF0YSgpKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgLyoqXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKiBqUXVlcnlcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqL1xuXG4gICQuZm5bTkFNRV0gPSBDYXJvdXNlbC5falF1ZXJ5SW50ZXJmYWNlO1xuICAkLmZuW05BTUVdLkNvbnN0cnVjdG9yID0gQ2Fyb3VzZWw7XG4gICQuZm5bTkFNRV0ubm9Db25mbGljdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAkLmZuW05BTUVdID0gSlFVRVJZX05PX0NPTkZMSUNUO1xuICAgIHJldHVybiBDYXJvdXNlbC5falF1ZXJ5SW50ZXJmYWNlO1xuICB9O1xuXG4gIHJldHVybiBDYXJvdXNlbDtcbn0pKGpRdWVyeSk7XG5cbi8qKlxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIEJvb3RzdHJhcCAodjQuMC4wLWFscGhhLjQpOiBjb2xsYXBzZS5qc1xuICogTGljZW5zZWQgdW5kZXIgTUlUIChodHRwczovL2dpdGh1Yi5jb20vdHdicy9ib290c3RyYXAvYmxvYi9tYXN0ZXIvTElDRU5TRSlcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKi9cblxudmFyIENvbGxhcHNlID0gKGZ1bmN0aW9uICgkKSB7XG5cbiAgLyoqXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKiBDb25zdGFudHNcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqL1xuXG4gIHZhciBOQU1FID0gJ2NvbGxhcHNlJztcbiAgdmFyIFZFUlNJT04gPSAnNC4wLjAtYWxwaGEuNCc7XG4gIHZhciBEQVRBX0tFWSA9ICdicy5jb2xsYXBzZSc7XG4gIHZhciBFVkVOVF9LRVkgPSAnLicgKyBEQVRBX0tFWTtcbiAgdmFyIERBVEFfQVBJX0tFWSA9ICcuZGF0YS1hcGknO1xuICB2YXIgSlFVRVJZX05PX0NPTkZMSUNUID0gJC5mbltOQU1FXTtcbiAgdmFyIFRSQU5TSVRJT05fRFVSQVRJT04gPSA2MDA7XG5cbiAgdmFyIERlZmF1bHQgPSB7XG4gICAgdG9nZ2xlOiB0cnVlLFxuICAgIHBhcmVudDogJydcbiAgfTtcblxuICB2YXIgRGVmYXVsdFR5cGUgPSB7XG4gICAgdG9nZ2xlOiAnYm9vbGVhbicsXG4gICAgcGFyZW50OiAnc3RyaW5nJ1xuICB9O1xuXG4gIHZhciBFdmVudCA9IHtcbiAgICBTSE9XOiAnc2hvdycgKyBFVkVOVF9LRVksXG4gICAgU0hPV046ICdzaG93bicgKyBFVkVOVF9LRVksXG4gICAgSElERTogJ2hpZGUnICsgRVZFTlRfS0VZLFxuICAgIEhJRERFTjogJ2hpZGRlbicgKyBFVkVOVF9LRVksXG4gICAgQ0xJQ0tfREFUQV9BUEk6ICdjbGljaycgKyBFVkVOVF9LRVkgKyBEQVRBX0FQSV9LRVlcbiAgfTtcblxuICB2YXIgQ2xhc3NOYW1lID0ge1xuICAgIElOOiAnaW4nLFxuICAgIENPTExBUFNFOiAnY29sbGFwc2UnLFxuICAgIENPTExBUFNJTkc6ICdjb2xsYXBzaW5nJyxcbiAgICBDT0xMQVBTRUQ6ICdjb2xsYXBzZWQnXG4gIH07XG5cbiAgdmFyIERpbWVuc2lvbiA9IHtcbiAgICBXSURUSDogJ3dpZHRoJyxcbiAgICBIRUlHSFQ6ICdoZWlnaHQnXG4gIH07XG5cbiAgdmFyIFNlbGVjdG9yID0ge1xuICAgIEFDVElWRVM6ICcucGFuZWwgPiAuaW4sIC5wYW5lbCA+IC5jb2xsYXBzaW5nJyxcbiAgICBEQVRBX1RPR0dMRTogJ1tkYXRhLXRvZ2dsZT1cImNvbGxhcHNlXCJdJ1xuICB9O1xuXG4gIC8qKlxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICogQ2xhc3MgRGVmaW5pdGlvblxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICovXG5cbiAgdmFyIENvbGxhcHNlID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBDb2xsYXBzZShlbGVtZW50LCBjb25maWcpIHtcbiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDb2xsYXBzZSk7XG5cbiAgICAgIHRoaXMuX2lzVHJhbnNpdGlvbmluZyA9IGZhbHNlO1xuICAgICAgdGhpcy5fZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgICB0aGlzLl9jb25maWcgPSB0aGlzLl9nZXRDb25maWcoY29uZmlnKTtcbiAgICAgIHRoaXMuX3RyaWdnZXJBcnJheSA9ICQubWFrZUFycmF5KCQoJ1tkYXRhLXRvZ2dsZT1cImNvbGxhcHNlXCJdW2hyZWY9XCIjJyArIGVsZW1lbnQuaWQgKyAnXCJdLCcgKyAoJ1tkYXRhLXRvZ2dsZT1cImNvbGxhcHNlXCJdW2RhdGEtdGFyZ2V0PVwiIycgKyBlbGVtZW50LmlkICsgJ1wiXScpKSk7XG5cbiAgICAgIHRoaXMuX3BhcmVudCA9IHRoaXMuX2NvbmZpZy5wYXJlbnQgPyB0aGlzLl9nZXRQYXJlbnQoKSA6IG51bGw7XG5cbiAgICAgIGlmICghdGhpcy5fY29uZmlnLnBhcmVudCkge1xuICAgICAgICB0aGlzLl9hZGRBcmlhQW5kQ29sbGFwc2VkQ2xhc3ModGhpcy5fZWxlbWVudCwgdGhpcy5fdHJpZ2dlckFycmF5KTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuX2NvbmZpZy50b2dnbGUpIHtcbiAgICAgICAgdGhpcy50b2dnbGUoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgKiBEYXRhIEFwaSBpbXBsZW1lbnRhdGlvblxuICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAqL1xuXG4gICAgLy8gZ2V0dGVyc1xuXG4gICAgX2NyZWF0ZUNsYXNzKENvbGxhcHNlLCBbe1xuICAgICAga2V5OiAndG9nZ2xlJyxcblxuICAgICAgLy8gcHVibGljXG5cbiAgICAgIHZhbHVlOiBmdW5jdGlvbiB0b2dnbGUoKSB7XG4gICAgICAgIGlmICgkKHRoaXMuX2VsZW1lbnQpLmhhc0NsYXNzKENsYXNzTmFtZS5JTikpIHtcbiAgICAgICAgICB0aGlzLmhpZGUoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnNob3coKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogJ3Nob3cnLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNob3coKSB7XG4gICAgICAgIHZhciBfdGhpczQgPSB0aGlzO1xuXG4gICAgICAgIGlmICh0aGlzLl9pc1RyYW5zaXRpb25pbmcgfHwgJCh0aGlzLl9lbGVtZW50KS5oYXNDbGFzcyhDbGFzc05hbWUuSU4pKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGFjdGl2ZXMgPSB1bmRlZmluZWQ7XG4gICAgICAgIHZhciBhY3RpdmVzRGF0YSA9IHVuZGVmaW5lZDtcblxuICAgICAgICBpZiAodGhpcy5fcGFyZW50KSB7XG4gICAgICAgICAgYWN0aXZlcyA9ICQubWFrZUFycmF5KCQoU2VsZWN0b3IuQUNUSVZFUykpO1xuICAgICAgICAgIGlmICghYWN0aXZlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGFjdGl2ZXMgPSBudWxsO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChhY3RpdmVzKSB7XG4gICAgICAgICAgYWN0aXZlc0RhdGEgPSAkKGFjdGl2ZXMpLmRhdGEoREFUQV9LRVkpO1xuICAgICAgICAgIGlmIChhY3RpdmVzRGF0YSAmJiBhY3RpdmVzRGF0YS5faXNUcmFuc2l0aW9uaW5nKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHN0YXJ0RXZlbnQgPSAkLkV2ZW50KEV2ZW50LlNIT1cpO1xuICAgICAgICAkKHRoaXMuX2VsZW1lbnQpLnRyaWdnZXIoc3RhcnRFdmVudCk7XG4gICAgICAgIGlmIChzdGFydEV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGFjdGl2ZXMpIHtcbiAgICAgICAgICBDb2xsYXBzZS5falF1ZXJ5SW50ZXJmYWNlLmNhbGwoJChhY3RpdmVzKSwgJ2hpZGUnKTtcbiAgICAgICAgICBpZiAoIWFjdGl2ZXNEYXRhKSB7XG4gICAgICAgICAgICAkKGFjdGl2ZXMpLmRhdGEoREFUQV9LRVksIG51bGwpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBkaW1lbnNpb24gPSB0aGlzLl9nZXREaW1lbnNpb24oKTtcblxuICAgICAgICAkKHRoaXMuX2VsZW1lbnQpLnJlbW92ZUNsYXNzKENsYXNzTmFtZS5DT0xMQVBTRSkuYWRkQ2xhc3MoQ2xhc3NOYW1lLkNPTExBUFNJTkcpO1xuXG4gICAgICAgIHRoaXMuX2VsZW1lbnQuc3R5bGVbZGltZW5zaW9uXSA9IDA7XG4gICAgICAgIHRoaXMuX2VsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgdHJ1ZSk7XG5cbiAgICAgICAgaWYgKHRoaXMuX3RyaWdnZXJBcnJheS5sZW5ndGgpIHtcbiAgICAgICAgICAkKHRoaXMuX3RyaWdnZXJBcnJheSkucmVtb3ZlQ2xhc3MoQ2xhc3NOYW1lLkNPTExBUFNFRCkuYXR0cignYXJpYS1leHBhbmRlZCcsIHRydWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zZXRUcmFuc2l0aW9uaW5nKHRydWUpO1xuXG4gICAgICAgIHZhciBjb21wbGV0ZSA9IGZ1bmN0aW9uIGNvbXBsZXRlKCkge1xuICAgICAgICAgICQoX3RoaXM0Ll9lbGVtZW50KS5yZW1vdmVDbGFzcyhDbGFzc05hbWUuQ09MTEFQU0lORykuYWRkQ2xhc3MoQ2xhc3NOYW1lLkNPTExBUFNFKS5hZGRDbGFzcyhDbGFzc05hbWUuSU4pO1xuXG4gICAgICAgICAgX3RoaXM0Ll9lbGVtZW50LnN0eWxlW2RpbWVuc2lvbl0gPSAnJztcblxuICAgICAgICAgIF90aGlzNC5zZXRUcmFuc2l0aW9uaW5nKGZhbHNlKTtcblxuICAgICAgICAgICQoX3RoaXM0Ll9lbGVtZW50KS50cmlnZ2VyKEV2ZW50LlNIT1dOKTtcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAoIVV0aWwuc3VwcG9ydHNUcmFuc2l0aW9uRW5kKCkpIHtcbiAgICAgICAgICBjb21wbGV0ZSgpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBjYXBpdGFsaXplZERpbWVuc2lvbiA9IGRpbWVuc2lvblswXS50b1VwcGVyQ2FzZSgpICsgZGltZW5zaW9uLnNsaWNlKDEpO1xuICAgICAgICB2YXIgc2Nyb2xsU2l6ZSA9ICdzY3JvbGwnICsgY2FwaXRhbGl6ZWREaW1lbnNpb247XG5cbiAgICAgICAgJCh0aGlzLl9lbGVtZW50KS5vbmUoVXRpbC5UUkFOU0lUSU9OX0VORCwgY29tcGxldGUpLmVtdWxhdGVUcmFuc2l0aW9uRW5kKFRSQU5TSVRJT05fRFVSQVRJT04pO1xuXG4gICAgICAgIHRoaXMuX2VsZW1lbnQuc3R5bGVbZGltZW5zaW9uXSA9IHRoaXMuX2VsZW1lbnRbc2Nyb2xsU2l6ZV0gKyAncHgnO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogJ2hpZGUnLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGhpZGUoKSB7XG4gICAgICAgIHZhciBfdGhpczUgPSB0aGlzO1xuXG4gICAgICAgIGlmICh0aGlzLl9pc1RyYW5zaXRpb25pbmcgfHwgISQodGhpcy5fZWxlbWVudCkuaGFzQ2xhc3MoQ2xhc3NOYW1lLklOKSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBzdGFydEV2ZW50ID0gJC5FdmVudChFdmVudC5ISURFKTtcbiAgICAgICAgJCh0aGlzLl9lbGVtZW50KS50cmlnZ2VyKHN0YXJ0RXZlbnQpO1xuICAgICAgICBpZiAoc3RhcnRFdmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBkaW1lbnNpb24gPSB0aGlzLl9nZXREaW1lbnNpb24oKTtcbiAgICAgICAgdmFyIG9mZnNldERpbWVuc2lvbiA9IGRpbWVuc2lvbiA9PT0gRGltZW5zaW9uLldJRFRIID8gJ29mZnNldFdpZHRoJyA6ICdvZmZzZXRIZWlnaHQnO1xuXG4gICAgICAgIHRoaXMuX2VsZW1lbnQuc3R5bGVbZGltZW5zaW9uXSA9IHRoaXMuX2VsZW1lbnRbb2Zmc2V0RGltZW5zaW9uXSArICdweCc7XG5cbiAgICAgICAgVXRpbC5yZWZsb3codGhpcy5fZWxlbWVudCk7XG5cbiAgICAgICAgJCh0aGlzLl9lbGVtZW50KS5hZGRDbGFzcyhDbGFzc05hbWUuQ09MTEFQU0lORykucmVtb3ZlQ2xhc3MoQ2xhc3NOYW1lLkNPTExBUFNFKS5yZW1vdmVDbGFzcyhDbGFzc05hbWUuSU4pO1xuXG4gICAgICAgIHRoaXMuX2VsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgZmFsc2UpO1xuXG4gICAgICAgIGlmICh0aGlzLl90cmlnZ2VyQXJyYXkubGVuZ3RoKSB7XG4gICAgICAgICAgJCh0aGlzLl90cmlnZ2VyQXJyYXkpLmFkZENsYXNzKENsYXNzTmFtZS5DT0xMQVBTRUQpLmF0dHIoJ2FyaWEtZXhwYW5kZWQnLCBmYWxzZSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnNldFRyYW5zaXRpb25pbmcodHJ1ZSk7XG5cbiAgICAgICAgdmFyIGNvbXBsZXRlID0gZnVuY3Rpb24gY29tcGxldGUoKSB7XG4gICAgICAgICAgX3RoaXM1LnNldFRyYW5zaXRpb25pbmcoZmFsc2UpO1xuICAgICAgICAgICQoX3RoaXM1Ll9lbGVtZW50KS5yZW1vdmVDbGFzcyhDbGFzc05hbWUuQ09MTEFQU0lORykuYWRkQ2xhc3MoQ2xhc3NOYW1lLkNPTExBUFNFKS50cmlnZ2VyKEV2ZW50LkhJRERFTik7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5fZWxlbWVudC5zdHlsZVtkaW1lbnNpb25dID0gMDtcblxuICAgICAgICBpZiAoIVV0aWwuc3VwcG9ydHNUcmFuc2l0aW9uRW5kKCkpIHtcbiAgICAgICAgICBjb21wbGV0ZSgpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgICQodGhpcy5fZWxlbWVudCkub25lKFV0aWwuVFJBTlNJVElPTl9FTkQsIGNvbXBsZXRlKS5lbXVsYXRlVHJhbnNpdGlvbkVuZChUUkFOU0lUSU9OX0RVUkFUSU9OKTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6ICdzZXRUcmFuc2l0aW9uaW5nJyxcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRUcmFuc2l0aW9uaW5nKGlzVHJhbnNpdGlvbmluZykge1xuICAgICAgICB0aGlzLl9pc1RyYW5zaXRpb25pbmcgPSBpc1RyYW5zaXRpb25pbmc7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiAnZGlzcG9zZScsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZGlzcG9zZSgpIHtcbiAgICAgICAgJC5yZW1vdmVEYXRhKHRoaXMuX2VsZW1lbnQsIERBVEFfS0VZKTtcblxuICAgICAgICB0aGlzLl9jb25maWcgPSBudWxsO1xuICAgICAgICB0aGlzLl9wYXJlbnQgPSBudWxsO1xuICAgICAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcbiAgICAgICAgdGhpcy5fdHJpZ2dlckFycmF5ID0gbnVsbDtcbiAgICAgICAgdGhpcy5faXNUcmFuc2l0aW9uaW5nID0gbnVsbDtcbiAgICAgIH1cblxuICAgICAgLy8gcHJpdmF0ZVxuXG4gICAgfSwge1xuICAgICAga2V5OiAnX2dldENvbmZpZycsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2dldENvbmZpZyhjb25maWcpIHtcbiAgICAgICAgY29uZmlnID0gJC5leHRlbmQoe30sIERlZmF1bHQsIGNvbmZpZyk7XG4gICAgICAgIGNvbmZpZy50b2dnbGUgPSBCb29sZWFuKGNvbmZpZy50b2dnbGUpOyAvLyBjb2VyY2Ugc3RyaW5nIHZhbHVlc1xuICAgICAgICBVdGlsLnR5cGVDaGVja0NvbmZpZyhOQU1FLCBjb25maWcsIERlZmF1bHRUeXBlKTtcbiAgICAgICAgcmV0dXJuIGNvbmZpZztcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6ICdfZ2V0RGltZW5zaW9uJyxcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfZ2V0RGltZW5zaW9uKCkge1xuICAgICAgICB2YXIgaGFzV2lkdGggPSAkKHRoaXMuX2VsZW1lbnQpLmhhc0NsYXNzKERpbWVuc2lvbi5XSURUSCk7XG4gICAgICAgIHJldHVybiBoYXNXaWR0aCA/IERpbWVuc2lvbi5XSURUSCA6IERpbWVuc2lvbi5IRUlHSFQ7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiAnX2dldFBhcmVudCcsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2dldFBhcmVudCgpIHtcbiAgICAgICAgdmFyIF90aGlzNiA9IHRoaXM7XG5cbiAgICAgICAgdmFyIHBhcmVudCA9ICQodGhpcy5fY29uZmlnLnBhcmVudClbMF07XG4gICAgICAgIHZhciBzZWxlY3RvciA9ICdbZGF0YS10b2dnbGU9XCJjb2xsYXBzZVwiXVtkYXRhLXBhcmVudD1cIicgKyB0aGlzLl9jb25maWcucGFyZW50ICsgJ1wiXSc7XG5cbiAgICAgICAgJChwYXJlbnQpLmZpbmQoc2VsZWN0b3IpLmVhY2goZnVuY3Rpb24gKGksIGVsZW1lbnQpIHtcbiAgICAgICAgICBfdGhpczYuX2FkZEFyaWFBbmRDb2xsYXBzZWRDbGFzcyhDb2xsYXBzZS5fZ2V0VGFyZ2V0RnJvbUVsZW1lbnQoZWxlbWVudCksIFtlbGVtZW50XSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBwYXJlbnQ7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiAnX2FkZEFyaWFBbmRDb2xsYXBzZWRDbGFzcycsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2FkZEFyaWFBbmRDb2xsYXBzZWRDbGFzcyhlbGVtZW50LCB0cmlnZ2VyQXJyYXkpIHtcbiAgICAgICAgaWYgKGVsZW1lbnQpIHtcbiAgICAgICAgICB2YXIgaXNPcGVuID0gJChlbGVtZW50KS5oYXNDbGFzcyhDbGFzc05hbWUuSU4pO1xuICAgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgaXNPcGVuKTtcblxuICAgICAgICAgIGlmICh0cmlnZ2VyQXJyYXkubGVuZ3RoKSB7XG4gICAgICAgICAgICAkKHRyaWdnZXJBcnJheSkudG9nZ2xlQ2xhc3MoQ2xhc3NOYW1lLkNPTExBUFNFRCwgIWlzT3BlbikuYXR0cignYXJpYS1leHBhbmRlZCcsIGlzT3Blbik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIHN0YXRpY1xuXG4gICAgfV0sIFt7XG4gICAgICBrZXk6ICdfZ2V0VGFyZ2V0RnJvbUVsZW1lbnQnLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9nZXRUYXJnZXRGcm9tRWxlbWVudChlbGVtZW50KSB7XG4gICAgICAgIHZhciBzZWxlY3RvciA9IFV0aWwuZ2V0U2VsZWN0b3JGcm9tRWxlbWVudChlbGVtZW50KTtcbiAgICAgICAgcmV0dXJuIHNlbGVjdG9yID8gJChzZWxlY3RvcilbMF0gOiBudWxsO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogJ19qUXVlcnlJbnRlcmZhY2UnLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9qUXVlcnlJbnRlcmZhY2UoY29uZmlnKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7XG4gICAgICAgICAgdmFyIGRhdGEgPSAkdGhpcy5kYXRhKERBVEFfS0VZKTtcbiAgICAgICAgICB2YXIgX2NvbmZpZyA9ICQuZXh0ZW5kKHt9LCBEZWZhdWx0LCAkdGhpcy5kYXRhKCksIHR5cGVvZiBjb25maWcgPT09ICdvYmplY3QnICYmIGNvbmZpZyk7XG5cbiAgICAgICAgICBpZiAoIWRhdGEgJiYgX2NvbmZpZy50b2dnbGUgJiYgL3Nob3d8aGlkZS8udGVzdChjb25maWcpKSB7XG4gICAgICAgICAgICBfY29uZmlnLnRvZ2dsZSA9IGZhbHNlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICghZGF0YSkge1xuICAgICAgICAgICAgZGF0YSA9IG5ldyBDb2xsYXBzZSh0aGlzLCBfY29uZmlnKTtcbiAgICAgICAgICAgICR0aGlzLmRhdGEoREFUQV9LRVksIGRhdGEpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICh0eXBlb2YgY29uZmlnID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgaWYgKGRhdGFbY29uZmlnXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gbWV0aG9kIG5hbWVkIFwiJyArIGNvbmZpZyArICdcIicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGF0YVtjb25maWddKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6ICdWRVJTSU9OJyxcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gVkVSU0lPTjtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6ICdEZWZhdWx0JyxcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gRGVmYXVsdDtcbiAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gQ29sbGFwc2U7XG4gIH0pKCk7XG5cbiAgJChkb2N1bWVudCkub24oRXZlbnQuQ0xJQ0tfREFUQV9BUEksIFNlbGVjdG9yLkRBVEFfVE9HR0xFLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgdmFyIHRhcmdldCA9IENvbGxhcHNlLl9nZXRUYXJnZXRGcm9tRWxlbWVudCh0aGlzKTtcbiAgICB2YXIgZGF0YSA9ICQodGFyZ2V0KS5kYXRhKERBVEFfS0VZKTtcbiAgICB2YXIgY29uZmlnID0gZGF0YSA/ICd0b2dnbGUnIDogJCh0aGlzKS5kYXRhKCk7XG5cbiAgICBDb2xsYXBzZS5falF1ZXJ5SW50ZXJmYWNlLmNhbGwoJCh0YXJnZXQpLCBjb25maWcpO1xuICB9KTtcblxuICAvKipcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqIGpRdWVyeVxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICovXG5cbiAgJC5mbltOQU1FXSA9IENvbGxhcHNlLl9qUXVlcnlJbnRlcmZhY2U7XG4gICQuZm5bTkFNRV0uQ29uc3RydWN0b3IgPSBDb2xsYXBzZTtcbiAgJC5mbltOQU1FXS5ub0NvbmZsaWN0ID0gZnVuY3Rpb24gKCkge1xuICAgICQuZm5bTkFNRV0gPSBKUVVFUllfTk9fQ09ORkxJQ1Q7XG4gICAgcmV0dXJuIENvbGxhcHNlLl9qUXVlcnlJbnRlcmZhY2U7XG4gIH07XG5cbiAgcmV0dXJuIENvbGxhcHNlO1xufSkoalF1ZXJ5KTtcblxuLyoqXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogQm9vdHN0cmFwICh2NC4wLjAtYWxwaGEuNCk6IGRyb3Bkb3duLmpzXG4gKiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ibG9iL21hc3Rlci9MSUNFTlNFKVxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqL1xuXG52YXIgRHJvcGRvd24gPSAoZnVuY3Rpb24gKCQpIHtcblxuICAvKipcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqIENvbnN0YW50c1xuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICovXG5cbiAgdmFyIE5BTUUgPSAnZHJvcGRvd24nO1xuICB2YXIgVkVSU0lPTiA9ICc0LjAuMC1hbHBoYS40JztcbiAgdmFyIERBVEFfS0VZID0gJ2JzLmRyb3Bkb3duJztcbiAgdmFyIEVWRU5UX0tFWSA9ICcuJyArIERBVEFfS0VZO1xuICB2YXIgREFUQV9BUElfS0VZID0gJy5kYXRhLWFwaSc7XG4gIHZhciBKUVVFUllfTk9fQ09ORkxJQ1QgPSAkLmZuW05BTUVdO1xuICB2YXIgRVNDQVBFX0tFWUNPREUgPSAyNzsgLy8gS2V5Ym9hcmRFdmVudC53aGljaCB2YWx1ZSBmb3IgRXNjYXBlIChFc2MpIGtleVxuICB2YXIgQVJST1dfVVBfS0VZQ09ERSA9IDM4OyAvLyBLZXlib2FyZEV2ZW50LndoaWNoIHZhbHVlIGZvciB1cCBhcnJvdyBrZXlcbiAgdmFyIEFSUk9XX0RPV05fS0VZQ09ERSA9IDQwOyAvLyBLZXlib2FyZEV2ZW50LndoaWNoIHZhbHVlIGZvciBkb3duIGFycm93IGtleVxuICB2YXIgUklHSFRfTU9VU0VfQlVUVE9OX1dISUNIID0gMzsgLy8gTW91c2VFdmVudC53aGljaCB2YWx1ZSBmb3IgdGhlIHJpZ2h0IGJ1dHRvbiAoYXNzdW1pbmcgYSByaWdodC1oYW5kZWQgbW91c2UpXG5cbiAgdmFyIEV2ZW50ID0ge1xuICAgIEhJREU6ICdoaWRlJyArIEVWRU5UX0tFWSxcbiAgICBISURERU46ICdoaWRkZW4nICsgRVZFTlRfS0VZLFxuICAgIFNIT1c6ICdzaG93JyArIEVWRU5UX0tFWSxcbiAgICBTSE9XTjogJ3Nob3duJyArIEVWRU5UX0tFWSxcbiAgICBDTElDSzogJ2NsaWNrJyArIEVWRU5UX0tFWSxcbiAgICBDTElDS19EQVRBX0FQSTogJ2NsaWNrJyArIEVWRU5UX0tFWSArIERBVEFfQVBJX0tFWSxcbiAgICBLRVlET1dOX0RBVEFfQVBJOiAna2V5ZG93bicgKyBFVkVOVF9LRVkgKyBEQVRBX0FQSV9LRVlcbiAgfTtcblxuICB2YXIgQ2xhc3NOYW1lID0ge1xuICAgIEJBQ0tEUk9QOiAnZHJvcGRvd24tYmFja2Ryb3AnLFxuICAgIERJU0FCTEVEOiAnZGlzYWJsZWQnLFxuICAgIE9QRU46ICdvcGVuJ1xuICB9O1xuXG4gIHZhciBTZWxlY3RvciA9IHtcbiAgICBCQUNLRFJPUDogJy5kcm9wZG93bi1iYWNrZHJvcCcsXG4gICAgREFUQV9UT0dHTEU6ICdbZGF0YS10b2dnbGU9XCJkcm9wZG93blwiXScsXG4gICAgRk9STV9DSElMRDogJy5kcm9wZG93biBmb3JtJyxcbiAgICBST0xFX01FTlU6ICdbcm9sZT1cIm1lbnVcIl0nLFxuICAgIFJPTEVfTElTVEJPWDogJ1tyb2xlPVwibGlzdGJveFwiXScsXG4gICAgTkFWQkFSX05BVjogJy5uYXZiYXItbmF2JyxcbiAgICBWSVNJQkxFX0lURU1TOiAnW3JvbGU9XCJtZW51XCJdIGxpOm5vdCguZGlzYWJsZWQpIGEsICcgKyAnW3JvbGU9XCJsaXN0Ym94XCJdIGxpOm5vdCguZGlzYWJsZWQpIGEnXG4gIH07XG5cbiAgLyoqXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKiBDbGFzcyBEZWZpbml0aW9uXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKi9cblxuICB2YXIgRHJvcGRvd24gPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIERyb3Bkb3duKGVsZW1lbnQpIHtcbiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBEcm9wZG93bik7XG5cbiAgICAgIHRoaXMuX2VsZW1lbnQgPSBlbGVtZW50O1xuXG4gICAgICB0aGlzLl9hZGRFdmVudExpc3RlbmVycygpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAqIERhdGEgQXBpIGltcGxlbWVudGF0aW9uXG4gICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICovXG5cbiAgICAvLyBnZXR0ZXJzXG5cbiAgICBfY3JlYXRlQ2xhc3MoRHJvcGRvd24sIFt7XG4gICAgICBrZXk6ICd0b2dnbGUnLFxuXG4gICAgICAvLyBwdWJsaWNcblxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHRvZ2dsZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuZGlzYWJsZWQgfHwgJCh0aGlzKS5oYXNDbGFzcyhDbGFzc05hbWUuRElTQUJMRUQpKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHBhcmVudCA9IERyb3Bkb3duLl9nZXRQYXJlbnRGcm9tRWxlbWVudCh0aGlzKTtcbiAgICAgICAgdmFyIGlzQWN0aXZlID0gJChwYXJlbnQpLmhhc0NsYXNzKENsYXNzTmFtZS5PUEVOKTtcblxuICAgICAgICBEcm9wZG93bi5fY2xlYXJNZW51cygpO1xuXG4gICAgICAgIGlmIChpc0FjdGl2ZSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICgnb250b3VjaHN0YXJ0JyBpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgJiYgISQocGFyZW50KS5jbG9zZXN0KFNlbGVjdG9yLk5BVkJBUl9OQVYpLmxlbmd0aCkge1xuXG4gICAgICAgICAgLy8gaWYgbW9iaWxlIHdlIHVzZSBhIGJhY2tkcm9wIGJlY2F1c2UgY2xpY2sgZXZlbnRzIGRvbid0IGRlbGVnYXRlXG4gICAgICAgICAgdmFyIGRyb3Bkb3duID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgZHJvcGRvd24uY2xhc3NOYW1lID0gQ2xhc3NOYW1lLkJBQ0tEUk9QO1xuICAgICAgICAgICQoZHJvcGRvd24pLmluc2VydEJlZm9yZSh0aGlzKTtcbiAgICAgICAgICAkKGRyb3Bkb3duKS5vbignY2xpY2snLCBEcm9wZG93bi5fY2xlYXJNZW51cyk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgcmVsYXRlZFRhcmdldCA9IHsgcmVsYXRlZFRhcmdldDogdGhpcyB9O1xuICAgICAgICB2YXIgc2hvd0V2ZW50ID0gJC5FdmVudChFdmVudC5TSE9XLCByZWxhdGVkVGFyZ2V0KTtcblxuICAgICAgICAkKHBhcmVudCkudHJpZ2dlcihzaG93RXZlbnQpO1xuXG4gICAgICAgIGlmIChzaG93RXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmZvY3VzKCk7XG4gICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgJ3RydWUnKTtcblxuICAgICAgICAkKHBhcmVudCkudG9nZ2xlQ2xhc3MoQ2xhc3NOYW1lLk9QRU4pO1xuICAgICAgICAkKHBhcmVudCkudHJpZ2dlcigkLkV2ZW50KEV2ZW50LlNIT1dOLCByZWxhdGVkVGFyZ2V0KSk7XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogJ2Rpc3Bvc2UnLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRpc3Bvc2UoKSB7XG4gICAgICAgICQucmVtb3ZlRGF0YSh0aGlzLl9lbGVtZW50LCBEQVRBX0tFWSk7XG4gICAgICAgICQodGhpcy5fZWxlbWVudCkub2ZmKEVWRU5UX0tFWSk7XG4gICAgICAgIHRoaXMuX2VsZW1lbnQgPSBudWxsO1xuICAgICAgfVxuXG4gICAgICAvLyBwcml2YXRlXG5cbiAgICB9LCB7XG4gICAgICBrZXk6ICdfYWRkRXZlbnRMaXN0ZW5lcnMnLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9hZGRFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgJCh0aGlzLl9lbGVtZW50KS5vbihFdmVudC5DTElDSywgdGhpcy50b2dnbGUpO1xuICAgICAgfVxuXG4gICAgICAvLyBzdGF0aWNcblxuICAgIH1dLCBbe1xuICAgICAga2V5OiAnX2pRdWVyeUludGVyZmFjZScsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2pRdWVyeUludGVyZmFjZShjb25maWcpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdmFyIGRhdGEgPSAkKHRoaXMpLmRhdGEoREFUQV9LRVkpO1xuXG4gICAgICAgICAgaWYgKCFkYXRhKSB7XG4gICAgICAgICAgICAkKHRoaXMpLmRhdGEoREFUQV9LRVksIGRhdGEgPSBuZXcgRHJvcGRvd24odGhpcykpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICh0eXBlb2YgY29uZmlnID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgaWYgKGRhdGFbY29uZmlnXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gbWV0aG9kIG5hbWVkIFwiJyArIGNvbmZpZyArICdcIicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGF0YVtjb25maWddLmNhbGwodGhpcyk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6ICdfY2xlYXJNZW51cycsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2NsZWFyTWVudXMoZXZlbnQpIHtcbiAgICAgICAgaWYgKGV2ZW50ICYmIGV2ZW50LndoaWNoID09PSBSSUdIVF9NT1VTRV9CVVRUT05fV0hJQ0gpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgYmFja2Ryb3AgPSAkKFNlbGVjdG9yLkJBQ0tEUk9QKVswXTtcbiAgICAgICAgaWYgKGJhY2tkcm9wKSB7XG4gICAgICAgICAgYmFja2Ryb3AucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChiYWNrZHJvcCk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgdG9nZ2xlcyA9ICQubWFrZUFycmF5KCQoU2VsZWN0b3IuREFUQV9UT0dHTEUpKTtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRvZ2dsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICB2YXIgX3BhcmVudCA9IERyb3Bkb3duLl9nZXRQYXJlbnRGcm9tRWxlbWVudCh0b2dnbGVzW2ldKTtcbiAgICAgICAgICB2YXIgcmVsYXRlZFRhcmdldCA9IHsgcmVsYXRlZFRhcmdldDogdG9nZ2xlc1tpXSB9O1xuXG4gICAgICAgICAgaWYgKCEkKF9wYXJlbnQpLmhhc0NsYXNzKENsYXNzTmFtZS5PUEVOKSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGV2ZW50ICYmIGV2ZW50LnR5cGUgPT09ICdjbGljaycgJiYgL2lucHV0fHRleHRhcmVhL2kudGVzdChldmVudC50YXJnZXQudGFnTmFtZSkgJiYgJC5jb250YWlucyhfcGFyZW50LCBldmVudC50YXJnZXQpKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB2YXIgaGlkZUV2ZW50ID0gJC5FdmVudChFdmVudC5ISURFLCByZWxhdGVkVGFyZ2V0KTtcbiAgICAgICAgICAkKF9wYXJlbnQpLnRyaWdnZXIoaGlkZUV2ZW50KTtcbiAgICAgICAgICBpZiAoaGlkZUV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0b2dnbGVzW2ldLnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsICdmYWxzZScpO1xuXG4gICAgICAgICAgJChfcGFyZW50KS5yZW1vdmVDbGFzcyhDbGFzc05hbWUuT1BFTikudHJpZ2dlcigkLkV2ZW50KEV2ZW50LkhJRERFTiwgcmVsYXRlZFRhcmdldCkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiAnX2dldFBhcmVudEZyb21FbGVtZW50JyxcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfZ2V0UGFyZW50RnJvbUVsZW1lbnQoZWxlbWVudCkge1xuICAgICAgICB2YXIgcGFyZW50ID0gdW5kZWZpbmVkO1xuICAgICAgICB2YXIgc2VsZWN0b3IgPSBVdGlsLmdldFNlbGVjdG9yRnJvbUVsZW1lbnQoZWxlbWVudCk7XG5cbiAgICAgICAgaWYgKHNlbGVjdG9yKSB7XG4gICAgICAgICAgcGFyZW50ID0gJChzZWxlY3RvcilbMF07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcGFyZW50IHx8IGVsZW1lbnQucGFyZW50Tm9kZTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6ICdfZGF0YUFwaUtleWRvd25IYW5kbGVyJyxcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfZGF0YUFwaUtleWRvd25IYW5kbGVyKGV2ZW50KSB7XG4gICAgICAgIGlmICghLygzOHw0MHwyN3wzMikvLnRlc3QoZXZlbnQud2hpY2gpIHx8IC9pbnB1dHx0ZXh0YXJlYS9pLnRlc3QoZXZlbnQudGFyZ2V0LnRhZ05hbWUpKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICAgICAgaWYgKHRoaXMuZGlzYWJsZWQgfHwgJCh0aGlzKS5oYXNDbGFzcyhDbGFzc05hbWUuRElTQUJMRUQpKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHBhcmVudCA9IERyb3Bkb3duLl9nZXRQYXJlbnRGcm9tRWxlbWVudCh0aGlzKTtcbiAgICAgICAgdmFyIGlzQWN0aXZlID0gJChwYXJlbnQpLmhhc0NsYXNzKENsYXNzTmFtZS5PUEVOKTtcblxuICAgICAgICBpZiAoIWlzQWN0aXZlICYmIGV2ZW50LndoaWNoICE9PSBFU0NBUEVfS0VZQ09ERSB8fCBpc0FjdGl2ZSAmJiBldmVudC53aGljaCA9PT0gRVNDQVBFX0tFWUNPREUpIHtcblxuICAgICAgICAgIGlmIChldmVudC53aGljaCA9PT0gRVNDQVBFX0tFWUNPREUpIHtcbiAgICAgICAgICAgIHZhciB0b2dnbGUgPSAkKHBhcmVudCkuZmluZChTZWxlY3Rvci5EQVRBX1RPR0dMRSlbMF07XG4gICAgICAgICAgICAkKHRvZ2dsZSkudHJpZ2dlcignZm9jdXMnKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAkKHRoaXMpLnRyaWdnZXIoJ2NsaWNrJyk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGl0ZW1zID0gJC5tYWtlQXJyYXkoJChTZWxlY3Rvci5WSVNJQkxFX0lURU1TKSk7XG5cbiAgICAgICAgaXRlbXMgPSBpdGVtcy5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICByZXR1cm4gaXRlbS5vZmZzZXRXaWR0aCB8fCBpdGVtLm9mZnNldEhlaWdodDtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKCFpdGVtcy5sZW5ndGgpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgaW5kZXggPSBpdGVtcy5pbmRleE9mKGV2ZW50LnRhcmdldCk7XG5cbiAgICAgICAgaWYgKGV2ZW50LndoaWNoID09PSBBUlJPV19VUF9LRVlDT0RFICYmIGluZGV4ID4gMCkge1xuICAgICAgICAgIC8vIHVwXG4gICAgICAgICAgaW5kZXgtLTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChldmVudC53aGljaCA9PT0gQVJST1dfRE9XTl9LRVlDT0RFICYmIGluZGV4IDwgaXRlbXMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgIC8vIGRvd25cbiAgICAgICAgICBpbmRleCsrO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGluZGV4IDwgMCkge1xuICAgICAgICAgIGluZGV4ID0gMDtcbiAgICAgICAgfVxuXG4gICAgICAgIGl0ZW1zW2luZGV4XS5mb2N1cygpO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogJ1ZFUlNJT04nLFxuICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgIHJldHVybiBWRVJTSU9OO1xuICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBEcm9wZG93bjtcbiAgfSkoKTtcblxuICAkKGRvY3VtZW50KS5vbihFdmVudC5LRVlET1dOX0RBVEFfQVBJLCBTZWxlY3Rvci5EQVRBX1RPR0dMRSwgRHJvcGRvd24uX2RhdGFBcGlLZXlkb3duSGFuZGxlcikub24oRXZlbnQuS0VZRE9XTl9EQVRBX0FQSSwgU2VsZWN0b3IuUk9MRV9NRU5VLCBEcm9wZG93bi5fZGF0YUFwaUtleWRvd25IYW5kbGVyKS5vbihFdmVudC5LRVlET1dOX0RBVEFfQVBJLCBTZWxlY3Rvci5ST0xFX0xJU1RCT1gsIERyb3Bkb3duLl9kYXRhQXBpS2V5ZG93bkhhbmRsZXIpLm9uKEV2ZW50LkNMSUNLX0RBVEFfQVBJLCBEcm9wZG93bi5fY2xlYXJNZW51cykub24oRXZlbnQuQ0xJQ0tfREFUQV9BUEksIFNlbGVjdG9yLkRBVEFfVE9HR0xFLCBEcm9wZG93bi5wcm90b3R5cGUudG9nZ2xlKS5vbihFdmVudC5DTElDS19EQVRBX0FQSSwgU2VsZWN0b3IuRk9STV9DSElMRCwgZnVuY3Rpb24gKGUpIHtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICB9KTtcblxuICAvKipcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqIGpRdWVyeVxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICovXG5cbiAgJC5mbltOQU1FXSA9IERyb3Bkb3duLl9qUXVlcnlJbnRlcmZhY2U7XG4gICQuZm5bTkFNRV0uQ29uc3RydWN0b3IgPSBEcm9wZG93bjtcbiAgJC5mbltOQU1FXS5ub0NvbmZsaWN0ID0gZnVuY3Rpb24gKCkge1xuICAgICQuZm5bTkFNRV0gPSBKUVVFUllfTk9fQ09ORkxJQ1Q7XG4gICAgcmV0dXJuIERyb3Bkb3duLl9qUXVlcnlJbnRlcmZhY2U7XG4gIH07XG5cbiAgcmV0dXJuIERyb3Bkb3duO1xufSkoalF1ZXJ5KTtcblxuLyoqXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogQm9vdHN0cmFwICh2NC4wLjAtYWxwaGEuNCk6IG1vZGFsLmpzXG4gKiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ibG9iL21hc3Rlci9MSUNFTlNFKVxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqL1xuXG52YXIgTW9kYWwgPSAoZnVuY3Rpb24gKCQpIHtcblxuICAvKipcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqIENvbnN0YW50c1xuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICovXG5cbiAgdmFyIE5BTUUgPSAnbW9kYWwnO1xuICB2YXIgVkVSU0lPTiA9ICc0LjAuMC1hbHBoYS40JztcbiAgdmFyIERBVEFfS0VZID0gJ2JzLm1vZGFsJztcbiAgdmFyIEVWRU5UX0tFWSA9ICcuJyArIERBVEFfS0VZO1xuICB2YXIgREFUQV9BUElfS0VZID0gJy5kYXRhLWFwaSc7XG4gIHZhciBKUVVFUllfTk9fQ09ORkxJQ1QgPSAkLmZuW05BTUVdO1xuICB2YXIgVFJBTlNJVElPTl9EVVJBVElPTiA9IDMwMDtcbiAgdmFyIEJBQ0tEUk9QX1RSQU5TSVRJT05fRFVSQVRJT04gPSAxNTA7XG4gIHZhciBFU0NBUEVfS0VZQ09ERSA9IDI3OyAvLyBLZXlib2FyZEV2ZW50LndoaWNoIHZhbHVlIGZvciBFc2NhcGUgKEVzYykga2V5XG5cbiAgdmFyIERlZmF1bHQgPSB7XG4gICAgYmFja2Ryb3A6IHRydWUsXG4gICAga2V5Ym9hcmQ6IHRydWUsXG4gICAgZm9jdXM6IHRydWUsXG4gICAgc2hvdzogdHJ1ZVxuICB9O1xuXG4gIHZhciBEZWZhdWx0VHlwZSA9IHtcbiAgICBiYWNrZHJvcDogJyhib29sZWFufHN0cmluZyknLFxuICAgIGtleWJvYXJkOiAnYm9vbGVhbicsXG4gICAgZm9jdXM6ICdib29sZWFuJyxcbiAgICBzaG93OiAnYm9vbGVhbidcbiAgfTtcblxuICB2YXIgRXZlbnQgPSB7XG4gICAgSElERTogJ2hpZGUnICsgRVZFTlRfS0VZLFxuICAgIEhJRERFTjogJ2hpZGRlbicgKyBFVkVOVF9LRVksXG4gICAgU0hPVzogJ3Nob3cnICsgRVZFTlRfS0VZLFxuICAgIFNIT1dOOiAnc2hvd24nICsgRVZFTlRfS0VZLFxuICAgIEZPQ1VTSU46ICdmb2N1c2luJyArIEVWRU5UX0tFWSxcbiAgICBSRVNJWkU6ICdyZXNpemUnICsgRVZFTlRfS0VZLFxuICAgIENMSUNLX0RJU01JU1M6ICdjbGljay5kaXNtaXNzJyArIEVWRU5UX0tFWSxcbiAgICBLRVlET1dOX0RJU01JU1M6ICdrZXlkb3duLmRpc21pc3MnICsgRVZFTlRfS0VZLFxuICAgIE1PVVNFVVBfRElTTUlTUzogJ21vdXNldXAuZGlzbWlzcycgKyBFVkVOVF9LRVksXG4gICAgTU9VU0VET1dOX0RJU01JU1M6ICdtb3VzZWRvd24uZGlzbWlzcycgKyBFVkVOVF9LRVksXG4gICAgQ0xJQ0tfREFUQV9BUEk6ICdjbGljaycgKyBFVkVOVF9LRVkgKyBEQVRBX0FQSV9LRVlcbiAgfTtcblxuICB2YXIgQ2xhc3NOYW1lID0ge1xuICAgIFNDUk9MTEJBUl9NRUFTVVJFUjogJ21vZGFsLXNjcm9sbGJhci1tZWFzdXJlJyxcbiAgICBCQUNLRFJPUDogJ21vZGFsLWJhY2tkcm9wJyxcbiAgICBPUEVOOiAnbW9kYWwtb3BlbicsXG4gICAgRkFERTogJ2ZhZGUnLFxuICAgIElOOiAnaW4nXG4gIH07XG5cbiAgdmFyIFNlbGVjdG9yID0ge1xuICAgIERJQUxPRzogJy5tb2RhbC1kaWFsb2cnLFxuICAgIERBVEFfVE9HR0xFOiAnW2RhdGEtdG9nZ2xlPVwibW9kYWxcIl0nLFxuICAgIERBVEFfRElTTUlTUzogJ1tkYXRhLWRpc21pc3M9XCJtb2RhbFwiXScsXG4gICAgRklYRURfQ09OVEVOVDogJy5uYXZiYXItZml4ZWQtdG9wLCAubmF2YmFyLWZpeGVkLWJvdHRvbSwgLmlzLWZpeGVkJ1xuICB9O1xuXG4gIC8qKlxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICogQ2xhc3MgRGVmaW5pdGlvblxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICovXG5cbiAgdmFyIE1vZGFsID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBNb2RhbChlbGVtZW50LCBjb25maWcpIHtcbiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBNb2RhbCk7XG5cbiAgICAgIHRoaXMuX2NvbmZpZyA9IHRoaXMuX2dldENvbmZpZyhjb25maWcpO1xuICAgICAgdGhpcy5fZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgICB0aGlzLl9kaWFsb2cgPSAkKGVsZW1lbnQpLmZpbmQoU2VsZWN0b3IuRElBTE9HKVswXTtcbiAgICAgIHRoaXMuX2JhY2tkcm9wID0gbnVsbDtcbiAgICAgIHRoaXMuX2lzU2hvd24gPSBmYWxzZTtcbiAgICAgIHRoaXMuX2lzQm9keU92ZXJmbG93aW5nID0gZmFsc2U7XG4gICAgICB0aGlzLl9pZ25vcmVCYWNrZHJvcENsaWNrID0gZmFsc2U7XG4gICAgICB0aGlzLl9vcmlnaW5hbEJvZHlQYWRkaW5nID0gMDtcbiAgICAgIHRoaXMuX3Njcm9sbGJhcldpZHRoID0gMDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgKiBEYXRhIEFwaSBpbXBsZW1lbnRhdGlvblxuICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAqL1xuXG4gICAgLy8gZ2V0dGVyc1xuXG4gICAgX2NyZWF0ZUNsYXNzKE1vZGFsLCBbe1xuICAgICAga2V5OiAndG9nZ2xlJyxcblxuICAgICAgLy8gcHVibGljXG5cbiAgICAgIHZhbHVlOiBmdW5jdGlvbiB0b2dnbGUocmVsYXRlZFRhcmdldCkge1xuICAgICAgICByZXR1cm4gdGhpcy5faXNTaG93biA/IHRoaXMuaGlkZSgpIDogdGhpcy5zaG93KHJlbGF0ZWRUYXJnZXQpO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogJ3Nob3cnLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNob3cocmVsYXRlZFRhcmdldCkge1xuICAgICAgICB2YXIgX3RoaXM3ID0gdGhpcztcblxuICAgICAgICB2YXIgc2hvd0V2ZW50ID0gJC5FdmVudChFdmVudC5TSE9XLCB7XG4gICAgICAgICAgcmVsYXRlZFRhcmdldDogcmVsYXRlZFRhcmdldFxuICAgICAgICB9KTtcblxuICAgICAgICAkKHRoaXMuX2VsZW1lbnQpLnRyaWdnZXIoc2hvd0V2ZW50KTtcblxuICAgICAgICBpZiAodGhpcy5faXNTaG93biB8fCBzaG93RXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9pc1Nob3duID0gdHJ1ZTtcblxuICAgICAgICB0aGlzLl9jaGVja1Njcm9sbGJhcigpO1xuICAgICAgICB0aGlzLl9zZXRTY3JvbGxiYXIoKTtcblxuICAgICAgICAkKGRvY3VtZW50LmJvZHkpLmFkZENsYXNzKENsYXNzTmFtZS5PUEVOKTtcblxuICAgICAgICB0aGlzLl9zZXRFc2NhcGVFdmVudCgpO1xuICAgICAgICB0aGlzLl9zZXRSZXNpemVFdmVudCgpO1xuXG4gICAgICAgICQodGhpcy5fZWxlbWVudCkub24oRXZlbnQuQ0xJQ0tfRElTTUlTUywgU2VsZWN0b3IuREFUQV9ESVNNSVNTLCAkLnByb3h5KHRoaXMuaGlkZSwgdGhpcykpO1xuXG4gICAgICAgICQodGhpcy5fZGlhbG9nKS5vbihFdmVudC5NT1VTRURPV05fRElTTUlTUywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICQoX3RoaXM3Ll9lbGVtZW50KS5vbmUoRXZlbnQuTU9VU0VVUF9ESVNNSVNTLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIGlmICgkKGV2ZW50LnRhcmdldCkuaXMoX3RoaXM3Ll9lbGVtZW50KSkge1xuICAgICAgICAgICAgICBfdGhpczcuX2lnbm9yZUJhY2tkcm9wQ2xpY2sgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLl9zaG93QmFja2Ryb3AoJC5wcm94eSh0aGlzLl9zaG93RWxlbWVudCwgdGhpcywgcmVsYXRlZFRhcmdldCkpO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogJ2hpZGUnLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGhpZGUoZXZlbnQpIHtcbiAgICAgICAgaWYgKGV2ZW50KSB7XG4gICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBoaWRlRXZlbnQgPSAkLkV2ZW50KEV2ZW50LkhJREUpO1xuXG4gICAgICAgICQodGhpcy5fZWxlbWVudCkudHJpZ2dlcihoaWRlRXZlbnQpO1xuXG4gICAgICAgIGlmICghdGhpcy5faXNTaG93biB8fCBoaWRlRXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9pc1Nob3duID0gZmFsc2U7XG5cbiAgICAgICAgdGhpcy5fc2V0RXNjYXBlRXZlbnQoKTtcbiAgICAgICAgdGhpcy5fc2V0UmVzaXplRXZlbnQoKTtcblxuICAgICAgICAkKGRvY3VtZW50KS5vZmYoRXZlbnQuRk9DVVNJTik7XG5cbiAgICAgICAgJCh0aGlzLl9lbGVtZW50KS5yZW1vdmVDbGFzcyhDbGFzc05hbWUuSU4pO1xuXG4gICAgICAgICQodGhpcy5fZWxlbWVudCkub2ZmKEV2ZW50LkNMSUNLX0RJU01JU1MpO1xuICAgICAgICAkKHRoaXMuX2RpYWxvZykub2ZmKEV2ZW50Lk1PVVNFRE9XTl9ESVNNSVNTKTtcblxuICAgICAgICBpZiAoVXRpbC5zdXBwb3J0c1RyYW5zaXRpb25FbmQoKSAmJiAkKHRoaXMuX2VsZW1lbnQpLmhhc0NsYXNzKENsYXNzTmFtZS5GQURFKSkge1xuXG4gICAgICAgICAgJCh0aGlzLl9lbGVtZW50KS5vbmUoVXRpbC5UUkFOU0lUSU9OX0VORCwgJC5wcm94eSh0aGlzLl9oaWRlTW9kYWwsIHRoaXMpKS5lbXVsYXRlVHJhbnNpdGlvbkVuZChUUkFOU0lUSU9OX0RVUkFUSU9OKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLl9oaWRlTW9kYWwoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogJ2Rpc3Bvc2UnLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRpc3Bvc2UoKSB7XG4gICAgICAgICQucmVtb3ZlRGF0YSh0aGlzLl9lbGVtZW50LCBEQVRBX0tFWSk7XG5cbiAgICAgICAgJCh3aW5kb3cpLm9mZihFVkVOVF9LRVkpO1xuICAgICAgICAkKGRvY3VtZW50KS5vZmYoRVZFTlRfS0VZKTtcbiAgICAgICAgJCh0aGlzLl9lbGVtZW50KS5vZmYoRVZFTlRfS0VZKTtcbiAgICAgICAgJCh0aGlzLl9iYWNrZHJvcCkub2ZmKEVWRU5UX0tFWSk7XG5cbiAgICAgICAgdGhpcy5fY29uZmlnID0gbnVsbDtcbiAgICAgICAgdGhpcy5fZWxlbWVudCA9IG51bGw7XG4gICAgICAgIHRoaXMuX2RpYWxvZyA9IG51bGw7XG4gICAgICAgIHRoaXMuX2JhY2tkcm9wID0gbnVsbDtcbiAgICAgICAgdGhpcy5faXNTaG93biA9IG51bGw7XG4gICAgICAgIHRoaXMuX2lzQm9keU92ZXJmbG93aW5nID0gbnVsbDtcbiAgICAgICAgdGhpcy5faWdub3JlQmFja2Ryb3BDbGljayA9IG51bGw7XG4gICAgICAgIHRoaXMuX29yaWdpbmFsQm9keVBhZGRpbmcgPSBudWxsO1xuICAgICAgICB0aGlzLl9zY3JvbGxiYXJXaWR0aCA9IG51bGw7XG4gICAgICB9XG5cbiAgICAgIC8vIHByaXZhdGVcblxuICAgIH0sIHtcbiAgICAgIGtleTogJ19nZXRDb25maWcnLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9nZXRDb25maWcoY29uZmlnKSB7XG4gICAgICAgIGNvbmZpZyA9ICQuZXh0ZW5kKHt9LCBEZWZhdWx0LCBjb25maWcpO1xuICAgICAgICBVdGlsLnR5cGVDaGVja0NvbmZpZyhOQU1FLCBjb25maWcsIERlZmF1bHRUeXBlKTtcbiAgICAgICAgcmV0dXJuIGNvbmZpZztcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6ICdfc2hvd0VsZW1lbnQnLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9zaG93RWxlbWVudChyZWxhdGVkVGFyZ2V0KSB7XG4gICAgICAgIHZhciBfdGhpczggPSB0aGlzO1xuXG4gICAgICAgIHZhciB0cmFuc2l0aW9uID0gVXRpbC5zdXBwb3J0c1RyYW5zaXRpb25FbmQoKSAmJiAkKHRoaXMuX2VsZW1lbnQpLmhhc0NsYXNzKENsYXNzTmFtZS5GQURFKTtcblxuICAgICAgICBpZiAoIXRoaXMuX2VsZW1lbnQucGFyZW50Tm9kZSB8fCB0aGlzLl9lbGVtZW50LnBhcmVudE5vZGUubm9kZVR5cGUgIT09IE5vZGUuRUxFTUVOVF9OT0RFKSB7XG4gICAgICAgICAgLy8gZG9uJ3QgbW92ZSBtb2RhbHMgZG9tIHBvc2l0aW9uXG4gICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLl9lbGVtZW50KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX2VsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdhcmlhLWhpZGRlbicpO1xuICAgICAgICB0aGlzLl9lbGVtZW50LnNjcm9sbFRvcCA9IDA7XG5cbiAgICAgICAgaWYgKHRyYW5zaXRpb24pIHtcbiAgICAgICAgICBVdGlsLnJlZmxvdyh0aGlzLl9lbGVtZW50KTtcbiAgICAgICAgfVxuXG4gICAgICAgICQodGhpcy5fZWxlbWVudCkuYWRkQ2xhc3MoQ2xhc3NOYW1lLklOKTtcblxuICAgICAgICBpZiAodGhpcy5fY29uZmlnLmZvY3VzKSB7XG4gICAgICAgICAgdGhpcy5fZW5mb3JjZUZvY3VzKCk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgc2hvd25FdmVudCA9ICQuRXZlbnQoRXZlbnQuU0hPV04sIHtcbiAgICAgICAgICByZWxhdGVkVGFyZ2V0OiByZWxhdGVkVGFyZ2V0XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciB0cmFuc2l0aW9uQ29tcGxldGUgPSBmdW5jdGlvbiB0cmFuc2l0aW9uQ29tcGxldGUoKSB7XG4gICAgICAgICAgaWYgKF90aGlzOC5fY29uZmlnLmZvY3VzKSB7XG4gICAgICAgICAgICBfdGhpczguX2VsZW1lbnQuZm9jdXMoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgJChfdGhpczguX2VsZW1lbnQpLnRyaWdnZXIoc2hvd25FdmVudCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKHRyYW5zaXRpb24pIHtcbiAgICAgICAgICAkKHRoaXMuX2RpYWxvZykub25lKFV0aWwuVFJBTlNJVElPTl9FTkQsIHRyYW5zaXRpb25Db21wbGV0ZSkuZW11bGF0ZVRyYW5zaXRpb25FbmQoVFJBTlNJVElPTl9EVVJBVElPTik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdHJhbnNpdGlvbkNvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6ICdfZW5mb3JjZUZvY3VzJyxcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfZW5mb3JjZUZvY3VzKCkge1xuICAgICAgICB2YXIgX3RoaXM5ID0gdGhpcztcblxuICAgICAgICAkKGRvY3VtZW50KS5vZmYoRXZlbnQuRk9DVVNJTikgLy8gZ3VhcmQgYWdhaW5zdCBpbmZpbml0ZSBmb2N1cyBsb29wXG4gICAgICAgIC5vbihFdmVudC5GT0NVU0lOLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICBpZiAoZG9jdW1lbnQgIT09IGV2ZW50LnRhcmdldCAmJiBfdGhpczkuX2VsZW1lbnQgIT09IGV2ZW50LnRhcmdldCAmJiAhJChfdGhpczkuX2VsZW1lbnQpLmhhcyhldmVudC50YXJnZXQpLmxlbmd0aCkge1xuICAgICAgICAgICAgX3RoaXM5Ll9lbGVtZW50LmZvY3VzKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6ICdfc2V0RXNjYXBlRXZlbnQnLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9zZXRFc2NhcGVFdmVudCgpIHtcbiAgICAgICAgdmFyIF90aGlzMTAgPSB0aGlzO1xuXG4gICAgICAgIGlmICh0aGlzLl9pc1Nob3duICYmIHRoaXMuX2NvbmZpZy5rZXlib2FyZCkge1xuICAgICAgICAgICQodGhpcy5fZWxlbWVudCkub24oRXZlbnQuS0VZRE9XTl9ESVNNSVNTLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIGlmIChldmVudC53aGljaCA9PT0gRVNDQVBFX0tFWUNPREUpIHtcbiAgICAgICAgICAgICAgX3RoaXMxMC5oaWRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSBpZiAoIXRoaXMuX2lzU2hvd24pIHtcbiAgICAgICAgICAkKHRoaXMuX2VsZW1lbnQpLm9mZihFdmVudC5LRVlET1dOX0RJU01JU1MpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiAnX3NldFJlc2l6ZUV2ZW50JyxcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfc2V0UmVzaXplRXZlbnQoKSB7XG4gICAgICAgIGlmICh0aGlzLl9pc1Nob3duKSB7XG4gICAgICAgICAgJCh3aW5kb3cpLm9uKEV2ZW50LlJFU0laRSwgJC5wcm94eSh0aGlzLl9oYW5kbGVVcGRhdGUsIHRoaXMpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAkKHdpbmRvdykub2ZmKEV2ZW50LlJFU0laRSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6ICdfaGlkZU1vZGFsJyxcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGlkZU1vZGFsKCkge1xuICAgICAgICB2YXIgX3RoaXMxMSA9IHRoaXM7XG5cbiAgICAgICAgdGhpcy5fZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICB0aGlzLl9lbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCAndHJ1ZScpO1xuICAgICAgICB0aGlzLl9zaG93QmFja2Ryb3AoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICQoZG9jdW1lbnQuYm9keSkucmVtb3ZlQ2xhc3MoQ2xhc3NOYW1lLk9QRU4pO1xuICAgICAgICAgIF90aGlzMTEuX3Jlc2V0QWRqdXN0bWVudHMoKTtcbiAgICAgICAgICBfdGhpczExLl9yZXNldFNjcm9sbGJhcigpO1xuICAgICAgICAgICQoX3RoaXMxMS5fZWxlbWVudCkudHJpZ2dlcihFdmVudC5ISURERU4pO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6ICdfcmVtb3ZlQmFja2Ryb3AnLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9yZW1vdmVCYWNrZHJvcCgpIHtcbiAgICAgICAgaWYgKHRoaXMuX2JhY2tkcm9wKSB7XG4gICAgICAgICAgJCh0aGlzLl9iYWNrZHJvcCkucmVtb3ZlKCk7XG4gICAgICAgICAgdGhpcy5fYmFja2Ryb3AgPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiAnX3Nob3dCYWNrZHJvcCcsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX3Nob3dCYWNrZHJvcChjYWxsYmFjaykge1xuICAgICAgICB2YXIgX3RoaXMxMiA9IHRoaXM7XG5cbiAgICAgICAgdmFyIGFuaW1hdGUgPSAkKHRoaXMuX2VsZW1lbnQpLmhhc0NsYXNzKENsYXNzTmFtZS5GQURFKSA/IENsYXNzTmFtZS5GQURFIDogJyc7XG5cbiAgICAgICAgaWYgKHRoaXMuX2lzU2hvd24gJiYgdGhpcy5fY29uZmlnLmJhY2tkcm9wKSB7XG4gICAgICAgICAgdmFyIGRvQW5pbWF0ZSA9IFV0aWwuc3VwcG9ydHNUcmFuc2l0aW9uRW5kKCkgJiYgYW5pbWF0ZTtcblxuICAgICAgICAgIHRoaXMuX2JhY2tkcm9wID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgdGhpcy5fYmFja2Ryb3AuY2xhc3NOYW1lID0gQ2xhc3NOYW1lLkJBQ0tEUk9QO1xuXG4gICAgICAgICAgaWYgKGFuaW1hdGUpIHtcbiAgICAgICAgICAgICQodGhpcy5fYmFja2Ryb3ApLmFkZENsYXNzKGFuaW1hdGUpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgICQodGhpcy5fYmFja2Ryb3ApLmFwcGVuZFRvKGRvY3VtZW50LmJvZHkpO1xuXG4gICAgICAgICAgJCh0aGlzLl9lbGVtZW50KS5vbihFdmVudC5DTElDS19ESVNNSVNTLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIGlmIChfdGhpczEyLl9pZ25vcmVCYWNrZHJvcENsaWNrKSB7XG4gICAgICAgICAgICAgIF90aGlzMTIuX2lnbm9yZUJhY2tkcm9wQ2xpY2sgPSBmYWxzZTtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGV2ZW50LnRhcmdldCAhPT0gZXZlbnQuY3VycmVudFRhcmdldCkge1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoX3RoaXMxMi5fY29uZmlnLmJhY2tkcm9wID09PSAnc3RhdGljJykge1xuICAgICAgICAgICAgICBfdGhpczEyLl9lbGVtZW50LmZvY3VzKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBfdGhpczEyLmhpZGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGlmIChkb0FuaW1hdGUpIHtcbiAgICAgICAgICAgIFV0aWwucmVmbG93KHRoaXMuX2JhY2tkcm9wKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAkKHRoaXMuX2JhY2tkcm9wKS5hZGRDbGFzcyhDbGFzc05hbWUuSU4pO1xuXG4gICAgICAgICAgaWYgKCFjYWxsYmFjaykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICghZG9BbmltYXRlKSB7XG4gICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgICQodGhpcy5fYmFja2Ryb3ApLm9uZShVdGlsLlRSQU5TSVRJT05fRU5ELCBjYWxsYmFjaykuZW11bGF0ZVRyYW5zaXRpb25FbmQoQkFDS0RST1BfVFJBTlNJVElPTl9EVVJBVElPTik7XG4gICAgICAgIH0gZWxzZSBpZiAoIXRoaXMuX2lzU2hvd24gJiYgdGhpcy5fYmFja2Ryb3ApIHtcbiAgICAgICAgICAkKHRoaXMuX2JhY2tkcm9wKS5yZW1vdmVDbGFzcyhDbGFzc05hbWUuSU4pO1xuXG4gICAgICAgICAgdmFyIGNhbGxiYWNrUmVtb3ZlID0gZnVuY3Rpb24gY2FsbGJhY2tSZW1vdmUoKSB7XG4gICAgICAgICAgICBfdGhpczEyLl9yZW1vdmVCYWNrZHJvcCgpO1xuICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIGlmIChVdGlsLnN1cHBvcnRzVHJhbnNpdGlvbkVuZCgpICYmICQodGhpcy5fZWxlbWVudCkuaGFzQ2xhc3MoQ2xhc3NOYW1lLkZBREUpKSB7XG4gICAgICAgICAgICAkKHRoaXMuX2JhY2tkcm9wKS5vbmUoVXRpbC5UUkFOU0lUSU9OX0VORCwgY2FsbGJhY2tSZW1vdmUpLmVtdWxhdGVUcmFuc2l0aW9uRW5kKEJBQ0tEUk9QX1RSQU5TSVRJT05fRFVSQVRJT04pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWxsYmFja1JlbW92ZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChjYWxsYmFjaykge1xuICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgLy8gdGhlIGZvbGxvd2luZyBtZXRob2RzIGFyZSB1c2VkIHRvIGhhbmRsZSBvdmVyZmxvd2luZyBtb2RhbHNcbiAgICAgIC8vIHRvZG8gKGZhdCk6IHRoZXNlIHNob3VsZCBwcm9iYWJseSBiZSByZWZhY3RvcmVkIG91dCBvZiBtb2RhbC5qc1xuICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gICAgfSwge1xuICAgICAga2V5OiAnX2hhbmRsZVVwZGF0ZScsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZVVwZGF0ZSgpIHtcbiAgICAgICAgdGhpcy5fYWRqdXN0RGlhbG9nKCk7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiAnX2FkanVzdERpYWxvZycsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2FkanVzdERpYWxvZygpIHtcbiAgICAgICAgdmFyIGlzTW9kYWxPdmVyZmxvd2luZyA9IHRoaXMuX2VsZW1lbnQuc2Nyb2xsSGVpZ2h0ID4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodDtcblxuICAgICAgICBpZiAoIXRoaXMuX2lzQm9keU92ZXJmbG93aW5nICYmIGlzTW9kYWxPdmVyZmxvd2luZykge1xuICAgICAgICAgIHRoaXMuX2VsZW1lbnQuc3R5bGUucGFkZGluZ0xlZnQgPSB0aGlzLl9zY3JvbGxiYXJXaWR0aCArICdweCc7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5faXNCb2R5T3ZlcmZsb3dpbmcgJiYgIWlzTW9kYWxPdmVyZmxvd2luZykge1xuICAgICAgICAgIHRoaXMuX2VsZW1lbnQuc3R5bGUucGFkZGluZ1JpZ2h0ID0gdGhpcy5fc2Nyb2xsYmFyV2lkdGggKyAncHgnO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiAnX3Jlc2V0QWRqdXN0bWVudHMnLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9yZXNldEFkanVzdG1lbnRzKCkge1xuICAgICAgICB0aGlzLl9lbGVtZW50LnN0eWxlLnBhZGRpbmdMZWZ0ID0gJyc7XG4gICAgICAgIHRoaXMuX2VsZW1lbnQuc3R5bGUucGFkZGluZ1JpZ2h0ID0gJyc7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiAnX2NoZWNrU2Nyb2xsYmFyJyxcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfY2hlY2tTY3JvbGxiYXIoKSB7XG4gICAgICAgIHRoaXMuX2lzQm9keU92ZXJmbG93aW5nID0gZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aCA8IHdpbmRvdy5pbm5lcldpZHRoO1xuICAgICAgICB0aGlzLl9zY3JvbGxiYXJXaWR0aCA9IHRoaXMuX2dldFNjcm9sbGJhcldpZHRoKCk7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiAnX3NldFNjcm9sbGJhcicsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX3NldFNjcm9sbGJhcigpIHtcbiAgICAgICAgdmFyIGJvZHlQYWRkaW5nID0gcGFyc2VJbnQoJChTZWxlY3Rvci5GSVhFRF9DT05URU5UKS5jc3MoJ3BhZGRpbmctcmlnaHQnKSB8fCAwLCAxMCk7XG5cbiAgICAgICAgdGhpcy5fb3JpZ2luYWxCb2R5UGFkZGluZyA9IGRvY3VtZW50LmJvZHkuc3R5bGUucGFkZGluZ1JpZ2h0IHx8ICcnO1xuXG4gICAgICAgIGlmICh0aGlzLl9pc0JvZHlPdmVyZmxvd2luZykge1xuICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUucGFkZGluZ1JpZ2h0ID0gYm9keVBhZGRpbmcgKyB0aGlzLl9zY3JvbGxiYXJXaWR0aCArICdweCc7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6ICdfcmVzZXRTY3JvbGxiYXInLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9yZXNldFNjcm9sbGJhcigpIHtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5wYWRkaW5nUmlnaHQgPSB0aGlzLl9vcmlnaW5hbEJvZHlQYWRkaW5nO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogJ19nZXRTY3JvbGxiYXJXaWR0aCcsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2dldFNjcm9sbGJhcldpZHRoKCkge1xuICAgICAgICAvLyB0aHggZC53YWxzaFxuICAgICAgICB2YXIgc2Nyb2xsRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHNjcm9sbERpdi5jbGFzc05hbWUgPSBDbGFzc05hbWUuU0NST0xMQkFSX01FQVNVUkVSO1xuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHNjcm9sbERpdik7XG4gICAgICAgIHZhciBzY3JvbGxiYXJXaWR0aCA9IHNjcm9sbERpdi5vZmZzZXRXaWR0aCAtIHNjcm9sbERpdi5jbGllbnRXaWR0aDtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChzY3JvbGxEaXYpO1xuICAgICAgICByZXR1cm4gc2Nyb2xsYmFyV2lkdGg7XG4gICAgICB9XG5cbiAgICAgIC8vIHN0YXRpY1xuXG4gICAgfV0sIFt7XG4gICAgICBrZXk6ICdfalF1ZXJ5SW50ZXJmYWNlJyxcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfalF1ZXJ5SW50ZXJmYWNlKGNvbmZpZywgcmVsYXRlZFRhcmdldCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB2YXIgZGF0YSA9ICQodGhpcykuZGF0YShEQVRBX0tFWSk7XG4gICAgICAgICAgdmFyIF9jb25maWcgPSAkLmV4dGVuZCh7fSwgTW9kYWwuRGVmYXVsdCwgJCh0aGlzKS5kYXRhKCksIHR5cGVvZiBjb25maWcgPT09ICdvYmplY3QnICYmIGNvbmZpZyk7XG5cbiAgICAgICAgICBpZiAoIWRhdGEpIHtcbiAgICAgICAgICAgIGRhdGEgPSBuZXcgTW9kYWwodGhpcywgX2NvbmZpZyk7XG4gICAgICAgICAgICAkKHRoaXMpLmRhdGEoREFUQV9LRVksIGRhdGEpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICh0eXBlb2YgY29uZmlnID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgaWYgKGRhdGFbY29uZmlnXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gbWV0aG9kIG5hbWVkIFwiJyArIGNvbmZpZyArICdcIicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGF0YVtjb25maWddKHJlbGF0ZWRUYXJnZXQpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoX2NvbmZpZy5zaG93KSB7XG4gICAgICAgICAgICBkYXRhLnNob3cocmVsYXRlZFRhcmdldCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6ICdWRVJTSU9OJyxcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gVkVSU0lPTjtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6ICdEZWZhdWx0JyxcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gRGVmYXVsdDtcbiAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gTW9kYWw7XG4gIH0pKCk7XG5cbiAgJChkb2N1bWVudCkub24oRXZlbnQuQ0xJQ0tfREFUQV9BUEksIFNlbGVjdG9yLkRBVEFfVE9HR0xFLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICB2YXIgX3RoaXMxMyA9IHRoaXM7XG5cbiAgICB2YXIgdGFyZ2V0ID0gdW5kZWZpbmVkO1xuICAgIHZhciBzZWxlY3RvciA9IFV0aWwuZ2V0U2VsZWN0b3JGcm9tRWxlbWVudCh0aGlzKTtcblxuICAgIGlmIChzZWxlY3Rvcikge1xuICAgICAgdGFyZ2V0ID0gJChzZWxlY3RvcilbMF07XG4gICAgfVxuXG4gICAgdmFyIGNvbmZpZyA9ICQodGFyZ2V0KS5kYXRhKERBVEFfS0VZKSA/ICd0b2dnbGUnIDogJC5leHRlbmQoe30sICQodGFyZ2V0KS5kYXRhKCksICQodGhpcykuZGF0YSgpKTtcblxuICAgIGlmICh0aGlzLnRhZ05hbWUgPT09ICdBJykge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG5cbiAgICB2YXIgJHRhcmdldCA9ICQodGFyZ2V0KS5vbmUoRXZlbnQuU0hPVywgZnVuY3Rpb24gKHNob3dFdmVudCkge1xuICAgICAgaWYgKHNob3dFdmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSkge1xuICAgICAgICAvLyBvbmx5IHJlZ2lzdGVyIGZvY3VzIHJlc3RvcmVyIGlmIG1vZGFsIHdpbGwgYWN0dWFsbHkgZ2V0IHNob3duXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgJHRhcmdldC5vbmUoRXZlbnQuSElEREVOLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICgkKF90aGlzMTMpLmlzKCc6dmlzaWJsZScpKSB7XG4gICAgICAgICAgX3RoaXMxMy5mb2N1cygpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIE1vZGFsLl9qUXVlcnlJbnRlcmZhY2UuY2FsbCgkKHRhcmdldCksIGNvbmZpZywgdGhpcyk7XG4gIH0pO1xuXG4gIC8qKlxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICogalF1ZXJ5XG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKi9cblxuICAkLmZuW05BTUVdID0gTW9kYWwuX2pRdWVyeUludGVyZmFjZTtcbiAgJC5mbltOQU1FXS5Db25zdHJ1Y3RvciA9IE1vZGFsO1xuICAkLmZuW05BTUVdLm5vQ29uZmxpY3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgJC5mbltOQU1FXSA9IEpRVUVSWV9OT19DT05GTElDVDtcbiAgICByZXR1cm4gTW9kYWwuX2pRdWVyeUludGVyZmFjZTtcbiAgfTtcblxuICByZXR1cm4gTW9kYWw7XG59KShqUXVlcnkpO1xuXG4vKipcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiBCb290c3RyYXAgKHY0LjAuMC1hbHBoYS40KTogc2Nyb2xsc3B5LmpzXG4gKiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ibG9iL21hc3Rlci9MSUNFTlNFKVxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqL1xuXG52YXIgU2Nyb2xsU3B5ID0gKGZ1bmN0aW9uICgkKSB7XG5cbiAgLyoqXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKiBDb25zdGFudHNcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqL1xuXG4gIHZhciBOQU1FID0gJ3Njcm9sbHNweSc7XG4gIHZhciBWRVJTSU9OID0gJzQuMC4wLWFscGhhLjQnO1xuICB2YXIgREFUQV9LRVkgPSAnYnMuc2Nyb2xsc3B5JztcbiAgdmFyIEVWRU5UX0tFWSA9ICcuJyArIERBVEFfS0VZO1xuICB2YXIgREFUQV9BUElfS0VZID0gJy5kYXRhLWFwaSc7XG4gIHZhciBKUVVFUllfTk9fQ09ORkxJQ1QgPSAkLmZuW05BTUVdO1xuXG4gIHZhciBEZWZhdWx0ID0ge1xuICAgIG9mZnNldDogMTAsXG4gICAgbWV0aG9kOiAnYXV0bycsXG4gICAgdGFyZ2V0OiAnJ1xuICB9O1xuXG4gIHZhciBEZWZhdWx0VHlwZSA9IHtcbiAgICBvZmZzZXQ6ICdudW1iZXInLFxuICAgIG1ldGhvZDogJ3N0cmluZycsXG4gICAgdGFyZ2V0OiAnKHN0cmluZ3xlbGVtZW50KSdcbiAgfTtcblxuICB2YXIgRXZlbnQgPSB7XG4gICAgQUNUSVZBVEU6ICdhY3RpdmF0ZScgKyBFVkVOVF9LRVksXG4gICAgU0NST0xMOiAnc2Nyb2xsJyArIEVWRU5UX0tFWSxcbiAgICBMT0FEX0RBVEFfQVBJOiAnbG9hZCcgKyBFVkVOVF9LRVkgKyBEQVRBX0FQSV9LRVlcbiAgfTtcblxuICB2YXIgQ2xhc3NOYW1lID0ge1xuICAgIERST1BET1dOX0lURU06ICdkcm9wZG93bi1pdGVtJyxcbiAgICBEUk9QRE9XTl9NRU5VOiAnZHJvcGRvd24tbWVudScsXG4gICAgTkFWX0xJTks6ICduYXYtbGluaycsXG4gICAgTkFWOiAnbmF2JyxcbiAgICBBQ1RJVkU6ICdhY3RpdmUnXG4gIH07XG5cbiAgdmFyIFNlbGVjdG9yID0ge1xuICAgIERBVEFfU1BZOiAnW2RhdGEtc3B5PVwic2Nyb2xsXCJdJyxcbiAgICBBQ1RJVkU6ICcuYWN0aXZlJyxcbiAgICBMSVNUX0lURU06ICcubGlzdC1pdGVtJyxcbiAgICBMSTogJ2xpJyxcbiAgICBMSV9EUk9QRE9XTjogJ2xpLmRyb3Bkb3duJyxcbiAgICBOQVZfTElOS1M6ICcubmF2LWxpbmsnLFxuICAgIERST1BET1dOOiAnLmRyb3Bkb3duJyxcbiAgICBEUk9QRE9XTl9JVEVNUzogJy5kcm9wZG93bi1pdGVtJyxcbiAgICBEUk9QRE9XTl9UT0dHTEU6ICcuZHJvcGRvd24tdG9nZ2xlJ1xuICB9O1xuXG4gIHZhciBPZmZzZXRNZXRob2QgPSB7XG4gICAgT0ZGU0VUOiAnb2Zmc2V0JyxcbiAgICBQT1NJVElPTjogJ3Bvc2l0aW9uJ1xuICB9O1xuXG4gIC8qKlxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICogQ2xhc3MgRGVmaW5pdGlvblxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICovXG5cbiAgdmFyIFNjcm9sbFNweSA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gU2Nyb2xsU3B5KGVsZW1lbnQsIGNvbmZpZykge1xuICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFNjcm9sbFNweSk7XG5cbiAgICAgIHRoaXMuX2VsZW1lbnQgPSBlbGVtZW50O1xuICAgICAgdGhpcy5fc2Nyb2xsRWxlbWVudCA9IGVsZW1lbnQudGFnTmFtZSA9PT0gJ0JPRFknID8gd2luZG93IDogZWxlbWVudDtcbiAgICAgIHRoaXMuX2NvbmZpZyA9IHRoaXMuX2dldENvbmZpZyhjb25maWcpO1xuICAgICAgdGhpcy5fc2VsZWN0b3IgPSB0aGlzLl9jb25maWcudGFyZ2V0ICsgJyAnICsgU2VsZWN0b3IuTkFWX0xJTktTICsgJywnICsgKHRoaXMuX2NvbmZpZy50YXJnZXQgKyAnICcgKyBTZWxlY3Rvci5EUk9QRE9XTl9JVEVNUyk7XG4gICAgICB0aGlzLl9vZmZzZXRzID0gW107XG4gICAgICB0aGlzLl90YXJnZXRzID0gW107XG4gICAgICB0aGlzLl9hY3RpdmVUYXJnZXQgPSBudWxsO1xuICAgICAgdGhpcy5fc2Nyb2xsSGVpZ2h0ID0gMDtcblxuICAgICAgJCh0aGlzLl9zY3JvbGxFbGVtZW50KS5vbihFdmVudC5TQ1JPTEwsICQucHJveHkodGhpcy5fcHJvY2VzcywgdGhpcykpO1xuXG4gICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICAgIHRoaXMuX3Byb2Nlc3MoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgKiBEYXRhIEFwaSBpbXBsZW1lbnRhdGlvblxuICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAqL1xuXG4gICAgLy8gZ2V0dGVyc1xuXG4gICAgX2NyZWF0ZUNsYXNzKFNjcm9sbFNweSwgW3tcbiAgICAgIGtleTogJ3JlZnJlc2gnLFxuXG4gICAgICAvLyBwdWJsaWNcblxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlZnJlc2goKSB7XG4gICAgICAgIHZhciBfdGhpczE0ID0gdGhpcztcblxuICAgICAgICB2YXIgYXV0b01ldGhvZCA9IHRoaXMuX3Njcm9sbEVsZW1lbnQgIT09IHRoaXMuX3Njcm9sbEVsZW1lbnQud2luZG93ID8gT2Zmc2V0TWV0aG9kLlBPU0lUSU9OIDogT2Zmc2V0TWV0aG9kLk9GRlNFVDtcblxuICAgICAgICB2YXIgb2Zmc2V0TWV0aG9kID0gdGhpcy5fY29uZmlnLm1ldGhvZCA9PT0gJ2F1dG8nID8gYXV0b01ldGhvZCA6IHRoaXMuX2NvbmZpZy5tZXRob2Q7XG5cbiAgICAgICAgdmFyIG9mZnNldEJhc2UgPSBvZmZzZXRNZXRob2QgPT09IE9mZnNldE1ldGhvZC5QT1NJVElPTiA/IHRoaXMuX2dldFNjcm9sbFRvcCgpIDogMDtcblxuICAgICAgICB0aGlzLl9vZmZzZXRzID0gW107XG4gICAgICAgIHRoaXMuX3RhcmdldHMgPSBbXTtcblxuICAgICAgICB0aGlzLl9zY3JvbGxIZWlnaHQgPSB0aGlzLl9nZXRTY3JvbGxIZWlnaHQoKTtcblxuICAgICAgICB2YXIgdGFyZ2V0cyA9ICQubWFrZUFycmF5KCQodGhpcy5fc2VsZWN0b3IpKTtcblxuICAgICAgICB0YXJnZXRzLm1hcChmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgIHZhciB0YXJnZXQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgdmFyIHRhcmdldFNlbGVjdG9yID0gVXRpbC5nZXRTZWxlY3RvckZyb21FbGVtZW50KGVsZW1lbnQpO1xuXG4gICAgICAgICAgaWYgKHRhcmdldFNlbGVjdG9yKSB7XG4gICAgICAgICAgICB0YXJnZXQgPSAkKHRhcmdldFNlbGVjdG9yKVswXTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAodGFyZ2V0ICYmICh0YXJnZXQub2Zmc2V0V2lkdGggfHwgdGFyZ2V0Lm9mZnNldEhlaWdodCkpIHtcbiAgICAgICAgICAgIC8vIHRvZG8gKGZhdCk6IHJlbW92ZSBza2V0Y2ggcmVsaWFuY2Ugb24galF1ZXJ5IHBvc2l0aW9uL29mZnNldFxuICAgICAgICAgICAgcmV0dXJuIFskKHRhcmdldClbb2Zmc2V0TWV0aG9kXSgpLnRvcCArIG9mZnNldEJhc2UsIHRhcmdldFNlbGVjdG9yXTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH0pLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgIHJldHVybiBpdGVtO1xuICAgICAgICB9KS5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgICAgcmV0dXJuIGFbMF0gLSBiWzBdO1xuICAgICAgICB9KS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgX3RoaXMxNC5fb2Zmc2V0cy5wdXNoKGl0ZW1bMF0pO1xuICAgICAgICAgIF90aGlzMTQuX3RhcmdldHMucHVzaChpdGVtWzFdKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiAnZGlzcG9zZScsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZGlzcG9zZSgpIHtcbiAgICAgICAgJC5yZW1vdmVEYXRhKHRoaXMuX2VsZW1lbnQsIERBVEFfS0VZKTtcbiAgICAgICAgJCh0aGlzLl9zY3JvbGxFbGVtZW50KS5vZmYoRVZFTlRfS0VZKTtcblxuICAgICAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcbiAgICAgICAgdGhpcy5fc2Nyb2xsRWxlbWVudCA9IG51bGw7XG4gICAgICAgIHRoaXMuX2NvbmZpZyA9IG51bGw7XG4gICAgICAgIHRoaXMuX3NlbGVjdG9yID0gbnVsbDtcbiAgICAgICAgdGhpcy5fb2Zmc2V0cyA9IG51bGw7XG4gICAgICAgIHRoaXMuX3RhcmdldHMgPSBudWxsO1xuICAgICAgICB0aGlzLl9hY3RpdmVUYXJnZXQgPSBudWxsO1xuICAgICAgICB0aGlzLl9zY3JvbGxIZWlnaHQgPSBudWxsO1xuICAgICAgfVxuXG4gICAgICAvLyBwcml2YXRlXG5cbiAgICB9LCB7XG4gICAgICBrZXk6ICdfZ2V0Q29uZmlnJyxcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfZ2V0Q29uZmlnKGNvbmZpZykge1xuICAgICAgICBjb25maWcgPSAkLmV4dGVuZCh7fSwgRGVmYXVsdCwgY29uZmlnKTtcblxuICAgICAgICBpZiAodHlwZW9mIGNvbmZpZy50YXJnZXQgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgdmFyIGlkID0gJChjb25maWcudGFyZ2V0KS5hdHRyKCdpZCcpO1xuICAgICAgICAgIGlmICghaWQpIHtcbiAgICAgICAgICAgIGlkID0gVXRpbC5nZXRVSUQoTkFNRSk7XG4gICAgICAgICAgICAkKGNvbmZpZy50YXJnZXQpLmF0dHIoJ2lkJywgaWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25maWcudGFyZ2V0ID0gJyMnICsgaWQ7XG4gICAgICAgIH1cblxuICAgICAgICBVdGlsLnR5cGVDaGVja0NvbmZpZyhOQU1FLCBjb25maWcsIERlZmF1bHRUeXBlKTtcblxuICAgICAgICByZXR1cm4gY29uZmlnO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogJ19nZXRTY3JvbGxUb3AnLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9nZXRTY3JvbGxUb3AoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zY3JvbGxFbGVtZW50ID09PSB3aW5kb3cgPyB0aGlzLl9zY3JvbGxFbGVtZW50LnNjcm9sbFkgOiB0aGlzLl9zY3JvbGxFbGVtZW50LnNjcm9sbFRvcDtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6ICdfZ2V0U2Nyb2xsSGVpZ2h0JyxcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfZ2V0U2Nyb2xsSGVpZ2h0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2Nyb2xsRWxlbWVudC5zY3JvbGxIZWlnaHQgfHwgTWF0aC5tYXgoZG9jdW1lbnQuYm9keS5zY3JvbGxIZWlnaHQsIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxIZWlnaHQpO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogJ19wcm9jZXNzJyxcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfcHJvY2VzcygpIHtcbiAgICAgICAgdmFyIHNjcm9sbFRvcCA9IHRoaXMuX2dldFNjcm9sbFRvcCgpICsgdGhpcy5fY29uZmlnLm9mZnNldDtcbiAgICAgICAgdmFyIHNjcm9sbEhlaWdodCA9IHRoaXMuX2dldFNjcm9sbEhlaWdodCgpO1xuICAgICAgICB2YXIgbWF4U2Nyb2xsID0gdGhpcy5fY29uZmlnLm9mZnNldCArIHNjcm9sbEhlaWdodCAtIHRoaXMuX3Njcm9sbEVsZW1lbnQub2Zmc2V0SGVpZ2h0O1xuXG4gICAgICAgIGlmICh0aGlzLl9zY3JvbGxIZWlnaHQgIT09IHNjcm9sbEhlaWdodCkge1xuICAgICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNjcm9sbFRvcCA+PSBtYXhTY3JvbGwpIHtcbiAgICAgICAgICB2YXIgdGFyZ2V0ID0gdGhpcy5fdGFyZ2V0c1t0aGlzLl90YXJnZXRzLmxlbmd0aCAtIDFdO1xuXG4gICAgICAgICAgaWYgKHRoaXMuX2FjdGl2ZVRhcmdldCAhPT0gdGFyZ2V0KSB7XG4gICAgICAgICAgICB0aGlzLl9hY3RpdmF0ZSh0YXJnZXQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLl9hY3RpdmVUYXJnZXQgJiYgc2Nyb2xsVG9wIDwgdGhpcy5fb2Zmc2V0c1swXSkge1xuICAgICAgICAgIHRoaXMuX2FjdGl2ZVRhcmdldCA9IG51bGw7XG4gICAgICAgICAgdGhpcy5fY2xlYXIoKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKHZhciBpID0gdGhpcy5fb2Zmc2V0cy5sZW5ndGg7IGktLTspIHtcbiAgICAgICAgICB2YXIgaXNBY3RpdmVUYXJnZXQgPSB0aGlzLl9hY3RpdmVUYXJnZXQgIT09IHRoaXMuX3RhcmdldHNbaV0gJiYgc2Nyb2xsVG9wID49IHRoaXMuX29mZnNldHNbaV0gJiYgKHRoaXMuX29mZnNldHNbaSArIDFdID09PSB1bmRlZmluZWQgfHwgc2Nyb2xsVG9wIDwgdGhpcy5fb2Zmc2V0c1tpICsgMV0pO1xuXG4gICAgICAgICAgaWYgKGlzQWN0aXZlVGFyZ2V0KSB7XG4gICAgICAgICAgICB0aGlzLl9hY3RpdmF0ZSh0aGlzLl90YXJnZXRzW2ldKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6ICdfYWN0aXZhdGUnLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9hY3RpdmF0ZSh0YXJnZXQpIHtcbiAgICAgICAgdGhpcy5fYWN0aXZlVGFyZ2V0ID0gdGFyZ2V0O1xuXG4gICAgICAgIHRoaXMuX2NsZWFyKCk7XG5cbiAgICAgICAgdmFyIHF1ZXJpZXMgPSB0aGlzLl9zZWxlY3Rvci5zcGxpdCgnLCcpO1xuICAgICAgICBxdWVyaWVzID0gcXVlcmllcy5tYXAoZnVuY3Rpb24gKHNlbGVjdG9yKSB7XG4gICAgICAgICAgcmV0dXJuIHNlbGVjdG9yICsgJ1tkYXRhLXRhcmdldD1cIicgKyB0YXJnZXQgKyAnXCJdLCcgKyAoc2VsZWN0b3IgKyAnW2hyZWY9XCInICsgdGFyZ2V0ICsgJ1wiXScpO1xuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgJGxpbmsgPSAkKHF1ZXJpZXMuam9pbignLCcpKTtcblxuICAgICAgICBpZiAoJGxpbmsuaGFzQ2xhc3MoQ2xhc3NOYW1lLkRST1BET1dOX0lURU0pKSB7XG4gICAgICAgICAgJGxpbmsuY2xvc2VzdChTZWxlY3Rvci5EUk9QRE9XTikuZmluZChTZWxlY3Rvci5EUk9QRE9XTl9UT0dHTEUpLmFkZENsYXNzKENsYXNzTmFtZS5BQ1RJVkUpO1xuICAgICAgICAgICRsaW5rLmFkZENsYXNzKENsYXNzTmFtZS5BQ1RJVkUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIHRvZG8gKGZhdCkgdGhpcyBpcyBraW5kYSBzdXMuLi5cbiAgICAgICAgICAvLyByZWN1cnNpdmVseSBhZGQgYWN0aXZlcyB0byB0ZXN0ZWQgbmF2LWxpbmtzXG4gICAgICAgICAgJGxpbmsucGFyZW50cyhTZWxlY3Rvci5MSSkuZmluZChTZWxlY3Rvci5OQVZfTElOS1MpLmFkZENsYXNzKENsYXNzTmFtZS5BQ1RJVkUpO1xuICAgICAgICB9XG5cbiAgICAgICAgJCh0aGlzLl9zY3JvbGxFbGVtZW50KS50cmlnZ2VyKEV2ZW50LkFDVElWQVRFLCB7XG4gICAgICAgICAgcmVsYXRlZFRhcmdldDogdGFyZ2V0XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogJ19jbGVhcicsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2NsZWFyKCkge1xuICAgICAgICAkKHRoaXMuX3NlbGVjdG9yKS5maWx0ZXIoU2VsZWN0b3IuQUNUSVZFKS5yZW1vdmVDbGFzcyhDbGFzc05hbWUuQUNUSVZFKTtcbiAgICAgIH1cblxuICAgICAgLy8gc3RhdGljXG5cbiAgICB9XSwgW3tcbiAgICAgIGtleTogJ19qUXVlcnlJbnRlcmZhY2UnLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9qUXVlcnlJbnRlcmZhY2UoY29uZmlnKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHZhciBkYXRhID0gJCh0aGlzKS5kYXRhKERBVEFfS0VZKTtcbiAgICAgICAgICB2YXIgX2NvbmZpZyA9IHR5cGVvZiBjb25maWcgPT09ICdvYmplY3QnICYmIGNvbmZpZyB8fCBudWxsO1xuXG4gICAgICAgICAgaWYgKCFkYXRhKSB7XG4gICAgICAgICAgICBkYXRhID0gbmV3IFNjcm9sbFNweSh0aGlzLCBfY29uZmlnKTtcbiAgICAgICAgICAgICQodGhpcykuZGF0YShEQVRBX0tFWSwgZGF0YSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHR5cGVvZiBjb25maWcgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBpZiAoZGF0YVtjb25maWddID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBtZXRob2QgbmFtZWQgXCInICsgY29uZmlnICsgJ1wiJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkYXRhW2NvbmZpZ10oKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogJ1ZFUlNJT04nLFxuICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgIHJldHVybiBWRVJTSU9OO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogJ0RlZmF1bHQnLFxuICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgIHJldHVybiBEZWZhdWx0O1xuICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBTY3JvbGxTcHk7XG4gIH0pKCk7XG5cbiAgJCh3aW5kb3cpLm9uKEV2ZW50LkxPQURfREFUQV9BUEksIGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2Nyb2xsU3B5cyA9ICQubWFrZUFycmF5KCQoU2VsZWN0b3IuREFUQV9TUFkpKTtcblxuICAgIGZvciAodmFyIGkgPSBzY3JvbGxTcHlzLmxlbmd0aDsgaS0tOykge1xuICAgICAgdmFyICRzcHkgPSAkKHNjcm9sbFNweXNbaV0pO1xuICAgICAgU2Nyb2xsU3B5Ll9qUXVlcnlJbnRlcmZhY2UuY2FsbCgkc3B5LCAkc3B5LmRhdGEoKSk7XG4gICAgfVxuICB9KTtcblxuICAvKipcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqIGpRdWVyeVxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICovXG5cbiAgJC5mbltOQU1FXSA9IFNjcm9sbFNweS5falF1ZXJ5SW50ZXJmYWNlO1xuICAkLmZuW05BTUVdLkNvbnN0cnVjdG9yID0gU2Nyb2xsU3B5O1xuICAkLmZuW05BTUVdLm5vQ29uZmxpY3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgJC5mbltOQU1FXSA9IEpRVUVSWV9OT19DT05GTElDVDtcbiAgICByZXR1cm4gU2Nyb2xsU3B5Ll9qUXVlcnlJbnRlcmZhY2U7XG4gIH07XG5cbiAgcmV0dXJuIFNjcm9sbFNweTtcbn0pKGpRdWVyeSk7XG5cbi8qKlxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIEJvb3RzdHJhcCAodjQuMC4wLWFscGhhLjQpOiB0YWIuanNcbiAqIExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2Jsb2IvbWFzdGVyL0xJQ0VOU0UpXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICovXG5cbnZhciBUYWIgPSAoZnVuY3Rpb24gKCQpIHtcblxuICAvKipcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqIENvbnN0YW50c1xuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICovXG5cbiAgdmFyIE5BTUUgPSAndGFiJztcbiAgdmFyIFZFUlNJT04gPSAnNC4wLjAtYWxwaGEuNCc7XG4gIHZhciBEQVRBX0tFWSA9ICdicy50YWInO1xuICB2YXIgRVZFTlRfS0VZID0gJy4nICsgREFUQV9LRVk7XG4gIHZhciBEQVRBX0FQSV9LRVkgPSAnLmRhdGEtYXBpJztcbiAgdmFyIEpRVUVSWV9OT19DT05GTElDVCA9ICQuZm5bTkFNRV07XG4gIHZhciBUUkFOU0lUSU9OX0RVUkFUSU9OID0gMTUwO1xuXG4gIHZhciBFdmVudCA9IHtcbiAgICBISURFOiAnaGlkZScgKyBFVkVOVF9LRVksXG4gICAgSElEREVOOiAnaGlkZGVuJyArIEVWRU5UX0tFWSxcbiAgICBTSE9XOiAnc2hvdycgKyBFVkVOVF9LRVksXG4gICAgU0hPV046ICdzaG93bicgKyBFVkVOVF9LRVksXG4gICAgQ0xJQ0tfREFUQV9BUEk6ICdjbGljaycgKyBFVkVOVF9LRVkgKyBEQVRBX0FQSV9LRVlcbiAgfTtcblxuICB2YXIgQ2xhc3NOYW1lID0ge1xuICAgIERST1BET1dOX01FTlU6ICdkcm9wZG93bi1tZW51JyxcbiAgICBBQ1RJVkU6ICdhY3RpdmUnLFxuICAgIEZBREU6ICdmYWRlJyxcbiAgICBJTjogJ2luJ1xuICB9O1xuXG4gIHZhciBTZWxlY3RvciA9IHtcbiAgICBBOiAnYScsXG4gICAgTEk6ICdsaScsXG4gICAgRFJPUERPV046ICcuZHJvcGRvd24nLFxuICAgIFVMOiAndWw6bm90KC5kcm9wZG93bi1tZW51KScsXG4gICAgRkFERV9DSElMRDogJz4gLm5hdi1pdGVtIC5mYWRlLCA+IC5mYWRlJyxcbiAgICBBQ1RJVkU6ICcuYWN0aXZlJyxcbiAgICBBQ1RJVkVfQ0hJTEQ6ICc+IC5uYXYtaXRlbSA+IC5hY3RpdmUsID4gLmFjdGl2ZScsXG4gICAgREFUQV9UT0dHTEU6ICdbZGF0YS10b2dnbGU9XCJ0YWJcIl0sIFtkYXRhLXRvZ2dsZT1cInBpbGxcIl0nLFxuICAgIERST1BET1dOX1RPR0dMRTogJy5kcm9wZG93bi10b2dnbGUnLFxuICAgIERST1BET1dOX0FDVElWRV9DSElMRDogJz4gLmRyb3Bkb3duLW1lbnUgLmFjdGl2ZSdcbiAgfTtcblxuICAvKipcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqIENsYXNzIERlZmluaXRpb25cbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqL1xuXG4gIHZhciBUYWIgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFRhYihlbGVtZW50KSB7XG4gICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVGFiKTtcblxuICAgICAgdGhpcy5fZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICogRGF0YSBBcGkgaW1wbGVtZW50YXRpb25cbiAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgKi9cblxuICAgIC8vIGdldHRlcnNcblxuICAgIF9jcmVhdGVDbGFzcyhUYWIsIFt7XG4gICAgICBrZXk6ICdzaG93JyxcblxuICAgICAgLy8gcHVibGljXG5cbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBzaG93KCkge1xuICAgICAgICB2YXIgX3RoaXMxNSA9IHRoaXM7XG5cbiAgICAgICAgaWYgKHRoaXMuX2VsZW1lbnQucGFyZW50Tm9kZSAmJiB0aGlzLl9lbGVtZW50LnBhcmVudE5vZGUubm9kZVR5cGUgPT09IE5vZGUuRUxFTUVOVF9OT0RFICYmICQodGhpcy5fZWxlbWVudCkuaGFzQ2xhc3MoQ2xhc3NOYW1lLkFDVElWRSkpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgdGFyZ2V0ID0gdW5kZWZpbmVkO1xuICAgICAgICB2YXIgcHJldmlvdXMgPSB1bmRlZmluZWQ7XG4gICAgICAgIHZhciB1bEVsZW1lbnQgPSAkKHRoaXMuX2VsZW1lbnQpLmNsb3Nlc3QoU2VsZWN0b3IuVUwpWzBdO1xuICAgICAgICB2YXIgc2VsZWN0b3IgPSBVdGlsLmdldFNlbGVjdG9yRnJvbUVsZW1lbnQodGhpcy5fZWxlbWVudCk7XG5cbiAgICAgICAgaWYgKHVsRWxlbWVudCkge1xuICAgICAgICAgIHByZXZpb3VzID0gJC5tYWtlQXJyYXkoJCh1bEVsZW1lbnQpLmZpbmQoU2VsZWN0b3IuQUNUSVZFKSk7XG4gICAgICAgICAgcHJldmlvdXMgPSBwcmV2aW91c1twcmV2aW91cy5sZW5ndGggLSAxXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBoaWRlRXZlbnQgPSAkLkV2ZW50KEV2ZW50LkhJREUsIHtcbiAgICAgICAgICByZWxhdGVkVGFyZ2V0OiB0aGlzLl9lbGVtZW50XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciBzaG93RXZlbnQgPSAkLkV2ZW50KEV2ZW50LlNIT1csIHtcbiAgICAgICAgICByZWxhdGVkVGFyZ2V0OiBwcmV2aW91c1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAocHJldmlvdXMpIHtcbiAgICAgICAgICAkKHByZXZpb3VzKS50cmlnZ2VyKGhpZGVFdmVudCk7XG4gICAgICAgIH1cblxuICAgICAgICAkKHRoaXMuX2VsZW1lbnQpLnRyaWdnZXIoc2hvd0V2ZW50KTtcblxuICAgICAgICBpZiAoc2hvd0V2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpIHx8IGhpZGVFdmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzZWxlY3Rvcikge1xuICAgICAgICAgIHRhcmdldCA9ICQoc2VsZWN0b3IpWzBdO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fYWN0aXZhdGUodGhpcy5fZWxlbWVudCwgdWxFbGVtZW50KTtcblxuICAgICAgICB2YXIgY29tcGxldGUgPSBmdW5jdGlvbiBjb21wbGV0ZSgpIHtcbiAgICAgICAgICB2YXIgaGlkZGVuRXZlbnQgPSAkLkV2ZW50KEV2ZW50LkhJRERFTiwge1xuICAgICAgICAgICAgcmVsYXRlZFRhcmdldDogX3RoaXMxNS5fZWxlbWVudFxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgdmFyIHNob3duRXZlbnQgPSAkLkV2ZW50KEV2ZW50LlNIT1dOLCB7XG4gICAgICAgICAgICByZWxhdGVkVGFyZ2V0OiBwcmV2aW91c1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgJChwcmV2aW91cykudHJpZ2dlcihoaWRkZW5FdmVudCk7XG4gICAgICAgICAgJChfdGhpczE1Ll9lbGVtZW50KS50cmlnZ2VyKHNob3duRXZlbnQpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGlmICh0YXJnZXQpIHtcbiAgICAgICAgICB0aGlzLl9hY3RpdmF0ZSh0YXJnZXQsIHRhcmdldC5wYXJlbnROb2RlLCBjb21wbGV0ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29tcGxldGUoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogJ2Rpc3Bvc2UnLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRpc3Bvc2UoKSB7XG4gICAgICAgICQucmVtb3ZlQ2xhc3ModGhpcy5fZWxlbWVudCwgREFUQV9LRVkpO1xuICAgICAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcbiAgICAgIH1cblxuICAgICAgLy8gcHJpdmF0ZVxuXG4gICAgfSwge1xuICAgICAga2V5OiAnX2FjdGl2YXRlJyxcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfYWN0aXZhdGUoZWxlbWVudCwgY29udGFpbmVyLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgYWN0aXZlID0gJChjb250YWluZXIpLmZpbmQoU2VsZWN0b3IuQUNUSVZFX0NISUxEKVswXTtcbiAgICAgICAgdmFyIGlzVHJhbnNpdGlvbmluZyA9IGNhbGxiYWNrICYmIFV0aWwuc3VwcG9ydHNUcmFuc2l0aW9uRW5kKCkgJiYgKGFjdGl2ZSAmJiAkKGFjdGl2ZSkuaGFzQ2xhc3MoQ2xhc3NOYW1lLkZBREUpIHx8IEJvb2xlYW4oJChjb250YWluZXIpLmZpbmQoU2VsZWN0b3IuRkFERV9DSElMRClbMF0pKTtcblxuICAgICAgICB2YXIgY29tcGxldGUgPSAkLnByb3h5KHRoaXMuX3RyYW5zaXRpb25Db21wbGV0ZSwgdGhpcywgZWxlbWVudCwgYWN0aXZlLCBpc1RyYW5zaXRpb25pbmcsIGNhbGxiYWNrKTtcblxuICAgICAgICBpZiAoYWN0aXZlICYmIGlzVHJhbnNpdGlvbmluZykge1xuICAgICAgICAgICQoYWN0aXZlKS5vbmUoVXRpbC5UUkFOU0lUSU9OX0VORCwgY29tcGxldGUpLmVtdWxhdGVUcmFuc2l0aW9uRW5kKFRSQU5TSVRJT05fRFVSQVRJT04pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbXBsZXRlKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoYWN0aXZlKSB7XG4gICAgICAgICAgJChhY3RpdmUpLnJlbW92ZUNsYXNzKENsYXNzTmFtZS5JTik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6ICdfdHJhbnNpdGlvbkNvbXBsZXRlJyxcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfdHJhbnNpdGlvbkNvbXBsZXRlKGVsZW1lbnQsIGFjdGl2ZSwgaXNUcmFuc2l0aW9uaW5nLCBjYWxsYmFjaykge1xuICAgICAgICBpZiAoYWN0aXZlKSB7XG4gICAgICAgICAgJChhY3RpdmUpLnJlbW92ZUNsYXNzKENsYXNzTmFtZS5BQ1RJVkUpO1xuXG4gICAgICAgICAgdmFyIGRyb3Bkb3duQ2hpbGQgPSAkKGFjdGl2ZSkuZmluZChTZWxlY3Rvci5EUk9QRE9XTl9BQ1RJVkVfQ0hJTEQpWzBdO1xuXG4gICAgICAgICAgaWYgKGRyb3Bkb3duQ2hpbGQpIHtcbiAgICAgICAgICAgICQoZHJvcGRvd25DaGlsZCkucmVtb3ZlQ2xhc3MoQ2xhc3NOYW1lLkFDVElWRSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgYWN0aXZlLnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsIGZhbHNlKTtcbiAgICAgICAgfVxuXG4gICAgICAgICQoZWxlbWVudCkuYWRkQ2xhc3MoQ2xhc3NOYW1lLkFDVElWRSk7XG4gICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgdHJ1ZSk7XG5cbiAgICAgICAgaWYgKGlzVHJhbnNpdGlvbmluZykge1xuICAgICAgICAgIFV0aWwucmVmbG93KGVsZW1lbnQpO1xuICAgICAgICAgICQoZWxlbWVudCkuYWRkQ2xhc3MoQ2xhc3NOYW1lLklOKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAkKGVsZW1lbnQpLnJlbW92ZUNsYXNzKENsYXNzTmFtZS5GQURFKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChlbGVtZW50LnBhcmVudE5vZGUgJiYgJChlbGVtZW50LnBhcmVudE5vZGUpLmhhc0NsYXNzKENsYXNzTmFtZS5EUk9QRE9XTl9NRU5VKSkge1xuXG4gICAgICAgICAgdmFyIGRyb3Bkb3duRWxlbWVudCA9ICQoZWxlbWVudCkuY2xvc2VzdChTZWxlY3Rvci5EUk9QRE9XTilbMF07XG4gICAgICAgICAgaWYgKGRyb3Bkb3duRWxlbWVudCkge1xuICAgICAgICAgICAgJChkcm9wZG93bkVsZW1lbnQpLmZpbmQoU2VsZWN0b3IuRFJPUERPV05fVE9HR0xFKS5hZGRDbGFzcyhDbGFzc05hbWUuQUNUSVZFKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsIHRydWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBzdGF0aWNcblxuICAgIH1dLCBbe1xuICAgICAga2V5OiAnX2pRdWVyeUludGVyZmFjZScsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2pRdWVyeUludGVyZmFjZShjb25maWcpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcbiAgICAgICAgICB2YXIgZGF0YSA9ICR0aGlzLmRhdGEoREFUQV9LRVkpO1xuXG4gICAgICAgICAgaWYgKCFkYXRhKSB7XG4gICAgICAgICAgICBkYXRhID0gZGF0YSA9IG5ldyBUYWIodGhpcyk7XG4gICAgICAgICAgICAkdGhpcy5kYXRhKERBVEFfS0VZLCBkYXRhKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAodHlwZW9mIGNvbmZpZyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGlmIChkYXRhW2NvbmZpZ10gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIG1ldGhvZCBuYW1lZCBcIicgKyBjb25maWcgKyAnXCInKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRhdGFbY29uZmlnXSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiAnVkVSU0lPTicsXG4gICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIFZFUlNJT047XG4gICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIFRhYjtcbiAgfSkoKTtcblxuICAkKGRvY3VtZW50KS5vbihFdmVudC5DTElDS19EQVRBX0FQSSwgU2VsZWN0b3IuREFUQV9UT0dHTEUsIGZ1bmN0aW9uIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgVGFiLl9qUXVlcnlJbnRlcmZhY2UuY2FsbCgkKHRoaXMpLCAnc2hvdycpO1xuICB9KTtcblxuICAvKipcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqIGpRdWVyeVxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICovXG5cbiAgJC5mbltOQU1FXSA9IFRhYi5falF1ZXJ5SW50ZXJmYWNlO1xuICAkLmZuW05BTUVdLkNvbnN0cnVjdG9yID0gVGFiO1xuICAkLmZuW05BTUVdLm5vQ29uZmxpY3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgJC5mbltOQU1FXSA9IEpRVUVSWV9OT19DT05GTElDVDtcbiAgICByZXR1cm4gVGFiLl9qUXVlcnlJbnRlcmZhY2U7XG4gIH07XG5cbiAgcmV0dXJuIFRhYjtcbn0pKGpRdWVyeSk7XG5cbi8qIGdsb2JhbCBUZXRoZXIgKi9cblxuLyoqXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogQm9vdHN0cmFwICh2NC4wLjAtYWxwaGEuNCk6IHRvb2x0aXAuanNcbiAqIExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2Jsb2IvbWFzdGVyL0xJQ0VOU0UpXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICovXG5cbnZhciBUb29sdGlwID0gKGZ1bmN0aW9uICgkKSB7XG5cbiAgLyoqXG4gICAqIENoZWNrIGZvciBUZXRoZXIgZGVwZW5kZW5jeVxuICAgKiBUZXRoZXIgLSBodHRwOi8vZ2l0aHViLmh1YnNwb3QuY29tL3RldGhlci9cbiAgICovXG4gIGlmICh3aW5kb3cuVGV0aGVyID09PSB1bmRlZmluZWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0Jvb3RzdHJhcCB0b29sdGlwcyByZXF1aXJlIFRldGhlciAoaHR0cDovL2dpdGh1Yi5odWJzcG90LmNvbS90ZXRoZXIvKScpO1xuICB9XG5cbiAgLyoqXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKiBDb25zdGFudHNcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqL1xuXG4gIHZhciBOQU1FID0gJ3Rvb2x0aXAnO1xuICB2YXIgVkVSU0lPTiA9ICc0LjAuMC1hbHBoYS40JztcbiAgdmFyIERBVEFfS0VZID0gJ2JzLnRvb2x0aXAnO1xuICB2YXIgRVZFTlRfS0VZID0gJy4nICsgREFUQV9LRVk7XG4gIHZhciBKUVVFUllfTk9fQ09ORkxJQ1QgPSAkLmZuW05BTUVdO1xuICB2YXIgVFJBTlNJVElPTl9EVVJBVElPTiA9IDE1MDtcbiAgdmFyIENMQVNTX1BSRUZJWCA9ICdicy10ZXRoZXInO1xuXG4gIHZhciBEZWZhdWx0ID0ge1xuICAgIGFuaW1hdGlvbjogdHJ1ZSxcbiAgICB0ZW1wbGF0ZTogJzxkaXYgY2xhc3M9XCJ0b29sdGlwXCIgcm9sZT1cInRvb2x0aXBcIj4nICsgJzxkaXYgY2xhc3M9XCJ0b29sdGlwLWFycm93XCI+PC9kaXY+JyArICc8ZGl2IGNsYXNzPVwidG9vbHRpcC1pbm5lclwiPjwvZGl2PjwvZGl2PicsXG4gICAgdHJpZ2dlcjogJ2hvdmVyIGZvY3VzJyxcbiAgICB0aXRsZTogJycsXG4gICAgZGVsYXk6IDAsXG4gICAgaHRtbDogZmFsc2UsXG4gICAgc2VsZWN0b3I6IGZhbHNlLFxuICAgIHBsYWNlbWVudDogJ3RvcCcsXG4gICAgb2Zmc2V0OiAnMCAwJyxcbiAgICBjb25zdHJhaW50czogW11cbiAgfTtcblxuICB2YXIgRGVmYXVsdFR5cGUgPSB7XG4gICAgYW5pbWF0aW9uOiAnYm9vbGVhbicsXG4gICAgdGVtcGxhdGU6ICdzdHJpbmcnLFxuICAgIHRpdGxlOiAnKHN0cmluZ3xlbGVtZW50fGZ1bmN0aW9uKScsXG4gICAgdHJpZ2dlcjogJ3N0cmluZycsXG4gICAgZGVsYXk6ICcobnVtYmVyfG9iamVjdCknLFxuICAgIGh0bWw6ICdib29sZWFuJyxcbiAgICBzZWxlY3RvcjogJyhzdHJpbmd8Ym9vbGVhbiknLFxuICAgIHBsYWNlbWVudDogJyhzdHJpbmd8ZnVuY3Rpb24pJyxcbiAgICBvZmZzZXQ6ICdzdHJpbmcnLFxuICAgIGNvbnN0cmFpbnRzOiAnYXJyYXknXG4gIH07XG5cbiAgdmFyIEF0dGFjaG1lbnRNYXAgPSB7XG4gICAgVE9QOiAnYm90dG9tIGNlbnRlcicsXG4gICAgUklHSFQ6ICdtaWRkbGUgbGVmdCcsXG4gICAgQk9UVE9NOiAndG9wIGNlbnRlcicsXG4gICAgTEVGVDogJ21pZGRsZSByaWdodCdcbiAgfTtcblxuICB2YXIgSG92ZXJTdGF0ZSA9IHtcbiAgICBJTjogJ2luJyxcbiAgICBPVVQ6ICdvdXQnXG4gIH07XG5cbiAgdmFyIEV2ZW50ID0ge1xuICAgIEhJREU6ICdoaWRlJyArIEVWRU5UX0tFWSxcbiAgICBISURERU46ICdoaWRkZW4nICsgRVZFTlRfS0VZLFxuICAgIFNIT1c6ICdzaG93JyArIEVWRU5UX0tFWSxcbiAgICBTSE9XTjogJ3Nob3duJyArIEVWRU5UX0tFWSxcbiAgICBJTlNFUlRFRDogJ2luc2VydGVkJyArIEVWRU5UX0tFWSxcbiAgICBDTElDSzogJ2NsaWNrJyArIEVWRU5UX0tFWSxcbiAgICBGT0NVU0lOOiAnZm9jdXNpbicgKyBFVkVOVF9LRVksXG4gICAgRk9DVVNPVVQ6ICdmb2N1c291dCcgKyBFVkVOVF9LRVksXG4gICAgTU9VU0VFTlRFUjogJ21vdXNlZW50ZXInICsgRVZFTlRfS0VZLFxuICAgIE1PVVNFTEVBVkU6ICdtb3VzZWxlYXZlJyArIEVWRU5UX0tFWVxuICB9O1xuXG4gIHZhciBDbGFzc05hbWUgPSB7XG4gICAgRkFERTogJ2ZhZGUnLFxuICAgIElOOiAnaW4nXG4gIH07XG5cbiAgdmFyIFNlbGVjdG9yID0ge1xuICAgIFRPT0xUSVA6ICcudG9vbHRpcCcsXG4gICAgVE9PTFRJUF9JTk5FUjogJy50b29sdGlwLWlubmVyJ1xuICB9O1xuXG4gIHZhciBUZXRoZXJDbGFzcyA9IHtcbiAgICBlbGVtZW50OiBmYWxzZSxcbiAgICBlbmFibGVkOiBmYWxzZVxuICB9O1xuXG4gIHZhciBUcmlnZ2VyID0ge1xuICAgIEhPVkVSOiAnaG92ZXInLFxuICAgIEZPQ1VTOiAnZm9jdXMnLFxuICAgIENMSUNLOiAnY2xpY2snLFxuICAgIE1BTlVBTDogJ21hbnVhbCdcbiAgfTtcblxuICAvKipcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqIENsYXNzIERlZmluaXRpb25cbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqL1xuXG4gIHZhciBUb29sdGlwID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBUb29sdGlwKGVsZW1lbnQsIGNvbmZpZykge1xuICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFRvb2x0aXApO1xuXG4gICAgICAvLyBwcml2YXRlXG4gICAgICB0aGlzLl9pc0VuYWJsZWQgPSB0cnVlO1xuICAgICAgdGhpcy5fdGltZW91dCA9IDA7XG4gICAgICB0aGlzLl9ob3ZlclN0YXRlID0gJyc7XG4gICAgICB0aGlzLl9hY3RpdmVUcmlnZ2VyID0ge307XG4gICAgICB0aGlzLl90ZXRoZXIgPSBudWxsO1xuXG4gICAgICAvLyBwcm90ZWN0ZWRcbiAgICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgICB0aGlzLmNvbmZpZyA9IHRoaXMuX2dldENvbmZpZyhjb25maWcpO1xuICAgICAgdGhpcy50aXAgPSBudWxsO1xuXG4gICAgICB0aGlzLl9zZXRMaXN0ZW5lcnMoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgKiBqUXVlcnlcbiAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgKi9cblxuICAgIC8vIGdldHRlcnNcblxuICAgIF9jcmVhdGVDbGFzcyhUb29sdGlwLCBbe1xuICAgICAga2V5OiAnZW5hYmxlJyxcblxuICAgICAgLy8gcHVibGljXG5cbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBlbmFibGUoKSB7XG4gICAgICAgIHRoaXMuX2lzRW5hYmxlZCA9IHRydWU7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiAnZGlzYWJsZScsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZGlzYWJsZSgpIHtcbiAgICAgICAgdGhpcy5faXNFbmFibGVkID0gZmFsc2U7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiAndG9nZ2xlRW5hYmxlZCcsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gdG9nZ2xlRW5hYmxlZCgpIHtcbiAgICAgICAgdGhpcy5faXNFbmFibGVkID0gIXRoaXMuX2lzRW5hYmxlZDtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6ICd0b2dnbGUnLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHRvZ2dsZShldmVudCkge1xuICAgICAgICBpZiAoZXZlbnQpIHtcbiAgICAgICAgICB2YXIgZGF0YUtleSA9IHRoaXMuY29uc3RydWN0b3IuREFUQV9LRVk7XG4gICAgICAgICAgdmFyIGNvbnRleHQgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLmRhdGEoZGF0YUtleSk7XG5cbiAgICAgICAgICBpZiAoIWNvbnRleHQpIHtcbiAgICAgICAgICAgIGNvbnRleHQgPSBuZXcgdGhpcy5jb25zdHJ1Y3RvcihldmVudC5jdXJyZW50VGFyZ2V0LCB0aGlzLl9nZXREZWxlZ2F0ZUNvbmZpZygpKTtcbiAgICAgICAgICAgICQoZXZlbnQuY3VycmVudFRhcmdldCkuZGF0YShkYXRhS2V5LCBjb250ZXh0KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb250ZXh0Ll9hY3RpdmVUcmlnZ2VyLmNsaWNrID0gIWNvbnRleHQuX2FjdGl2ZVRyaWdnZXIuY2xpY2s7XG5cbiAgICAgICAgICBpZiAoY29udGV4dC5faXNXaXRoQWN0aXZlVHJpZ2dlcigpKSB7XG4gICAgICAgICAgICBjb250ZXh0Ll9lbnRlcihudWxsLCBjb250ZXh0KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29udGV4dC5fbGVhdmUobnVsbCwgY29udGV4dCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgaWYgKCQodGhpcy5nZXRUaXBFbGVtZW50KCkpLmhhc0NsYXNzKENsYXNzTmFtZS5JTikpIHtcbiAgICAgICAgICAgIHRoaXMuX2xlYXZlKG51bGwsIHRoaXMpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHRoaXMuX2VudGVyKG51bGwsIHRoaXMpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiAnZGlzcG9zZScsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZGlzcG9zZSgpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX3RpbWVvdXQpO1xuXG4gICAgICAgIHRoaXMuY2xlYW51cFRldGhlcigpO1xuXG4gICAgICAgICQucmVtb3ZlRGF0YSh0aGlzLmVsZW1lbnQsIHRoaXMuY29uc3RydWN0b3IuREFUQV9LRVkpO1xuXG4gICAgICAgICQodGhpcy5lbGVtZW50KS5vZmYodGhpcy5jb25zdHJ1Y3Rvci5FVkVOVF9LRVkpO1xuXG4gICAgICAgIGlmICh0aGlzLnRpcCkge1xuICAgICAgICAgICQodGhpcy50aXApLnJlbW92ZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5faXNFbmFibGVkID0gbnVsbDtcbiAgICAgICAgdGhpcy5fdGltZW91dCA9IG51bGw7XG4gICAgICAgIHRoaXMuX2hvdmVyU3RhdGUgPSBudWxsO1xuICAgICAgICB0aGlzLl9hY3RpdmVUcmlnZ2VyID0gbnVsbDtcbiAgICAgICAgdGhpcy5fdGV0aGVyID0gbnVsbDtcblxuICAgICAgICB0aGlzLmVsZW1lbnQgPSBudWxsO1xuICAgICAgICB0aGlzLmNvbmZpZyA9IG51bGw7XG4gICAgICAgIHRoaXMudGlwID0gbnVsbDtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6ICdzaG93JyxcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBzaG93KCkge1xuICAgICAgICB2YXIgX3RoaXMxNiA9IHRoaXM7XG5cbiAgICAgICAgdmFyIHNob3dFdmVudCA9ICQuRXZlbnQodGhpcy5jb25zdHJ1Y3Rvci5FdmVudC5TSE9XKTtcblxuICAgICAgICBpZiAodGhpcy5pc1dpdGhDb250ZW50KCkgJiYgdGhpcy5faXNFbmFibGVkKSB7XG4gICAgICAgICAgJCh0aGlzLmVsZW1lbnQpLnRyaWdnZXIoc2hvd0V2ZW50KTtcblxuICAgICAgICAgIHZhciBpc0luVGhlRG9tID0gJC5jb250YWlucyh0aGlzLmVsZW1lbnQub3duZXJEb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsIHRoaXMuZWxlbWVudCk7XG5cbiAgICAgICAgICBpZiAoc2hvd0V2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpIHx8ICFpc0luVGhlRG9tKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdmFyIHRpcCA9IHRoaXMuZ2V0VGlwRWxlbWVudCgpO1xuICAgICAgICAgIHZhciB0aXBJZCA9IFV0aWwuZ2V0VUlEKHRoaXMuY29uc3RydWN0b3IuTkFNRSk7XG5cbiAgICAgICAgICB0aXAuc2V0QXR0cmlidXRlKCdpZCcsIHRpcElkKTtcbiAgICAgICAgICB0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLWRlc2NyaWJlZGJ5JywgdGlwSWQpO1xuXG4gICAgICAgICAgdGhpcy5zZXRDb250ZW50KCk7XG5cbiAgICAgICAgICBpZiAodGhpcy5jb25maWcuYW5pbWF0aW9uKSB7XG4gICAgICAgICAgICAkKHRpcCkuYWRkQ2xhc3MoQ2xhc3NOYW1lLkZBREUpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHZhciBwbGFjZW1lbnQgPSB0eXBlb2YgdGhpcy5jb25maWcucGxhY2VtZW50ID09PSAnZnVuY3Rpb24nID8gdGhpcy5jb25maWcucGxhY2VtZW50LmNhbGwodGhpcywgdGlwLCB0aGlzLmVsZW1lbnQpIDogdGhpcy5jb25maWcucGxhY2VtZW50O1xuXG4gICAgICAgICAgdmFyIGF0dGFjaG1lbnQgPSB0aGlzLl9nZXRBdHRhY2htZW50KHBsYWNlbWVudCk7XG5cbiAgICAgICAgICAkKHRpcCkuZGF0YSh0aGlzLmNvbnN0cnVjdG9yLkRBVEFfS0VZLCB0aGlzKS5hcHBlbmRUbyhkb2N1bWVudC5ib2R5KTtcblxuICAgICAgICAgICQodGhpcy5lbGVtZW50KS50cmlnZ2VyKHRoaXMuY29uc3RydWN0b3IuRXZlbnQuSU5TRVJURUQpO1xuXG4gICAgICAgICAgdGhpcy5fdGV0aGVyID0gbmV3IFRldGhlcih7XG4gICAgICAgICAgICBhdHRhY2htZW50OiBhdHRhY2htZW50LFxuICAgICAgICAgICAgZWxlbWVudDogdGlwLFxuICAgICAgICAgICAgdGFyZ2V0OiB0aGlzLmVsZW1lbnQsXG4gICAgICAgICAgICBjbGFzc2VzOiBUZXRoZXJDbGFzcyxcbiAgICAgICAgICAgIGNsYXNzUHJlZml4OiBDTEFTU19QUkVGSVgsXG4gICAgICAgICAgICBvZmZzZXQ6IHRoaXMuY29uZmlnLm9mZnNldCxcbiAgICAgICAgICAgIGNvbnN0cmFpbnRzOiB0aGlzLmNvbmZpZy5jb25zdHJhaW50cyxcbiAgICAgICAgICAgIGFkZFRhcmdldENsYXNzZXM6IGZhbHNlXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBVdGlsLnJlZmxvdyh0aXApO1xuICAgICAgICAgIHRoaXMuX3RldGhlci5wb3NpdGlvbigpO1xuXG4gICAgICAgICAgJCh0aXApLmFkZENsYXNzKENsYXNzTmFtZS5JTik7XG5cbiAgICAgICAgICB2YXIgY29tcGxldGUgPSBmdW5jdGlvbiBjb21wbGV0ZSgpIHtcbiAgICAgICAgICAgIHZhciBwcmV2SG92ZXJTdGF0ZSA9IF90aGlzMTYuX2hvdmVyU3RhdGU7XG4gICAgICAgICAgICBfdGhpczE2Ll9ob3ZlclN0YXRlID0gbnVsbDtcblxuICAgICAgICAgICAgJChfdGhpczE2LmVsZW1lbnQpLnRyaWdnZXIoX3RoaXMxNi5jb25zdHJ1Y3Rvci5FdmVudC5TSE9XTik7XG5cbiAgICAgICAgICAgIGlmIChwcmV2SG92ZXJTdGF0ZSA9PT0gSG92ZXJTdGF0ZS5PVVQpIHtcbiAgICAgICAgICAgICAgX3RoaXMxNi5fbGVhdmUobnVsbCwgX3RoaXMxNik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIGlmIChVdGlsLnN1cHBvcnRzVHJhbnNpdGlvbkVuZCgpICYmICQodGhpcy50aXApLmhhc0NsYXNzKENsYXNzTmFtZS5GQURFKSkge1xuICAgICAgICAgICAgJCh0aGlzLnRpcCkub25lKFV0aWwuVFJBTlNJVElPTl9FTkQsIGNvbXBsZXRlKS5lbXVsYXRlVHJhbnNpdGlvbkVuZChUb29sdGlwLl9UUkFOU0lUSU9OX0RVUkFUSU9OKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb21wbGV0ZSgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiAnaGlkZScsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gaGlkZShjYWxsYmFjaykge1xuICAgICAgICB2YXIgX3RoaXMxNyA9IHRoaXM7XG5cbiAgICAgICAgdmFyIHRpcCA9IHRoaXMuZ2V0VGlwRWxlbWVudCgpO1xuICAgICAgICB2YXIgaGlkZUV2ZW50ID0gJC5FdmVudCh0aGlzLmNvbnN0cnVjdG9yLkV2ZW50LkhJREUpO1xuICAgICAgICB2YXIgY29tcGxldGUgPSBmdW5jdGlvbiBjb21wbGV0ZSgpIHtcbiAgICAgICAgICBpZiAoX3RoaXMxNy5faG92ZXJTdGF0ZSAhPT0gSG92ZXJTdGF0ZS5JTiAmJiB0aXAucGFyZW50Tm9kZSkge1xuICAgICAgICAgICAgdGlwLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGlwKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBfdGhpczE3LmVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdhcmlhLWRlc2NyaWJlZGJ5Jyk7XG4gICAgICAgICAgJChfdGhpczE3LmVsZW1lbnQpLnRyaWdnZXIoX3RoaXMxNy5jb25zdHJ1Y3Rvci5FdmVudC5ISURERU4pO1xuICAgICAgICAgIF90aGlzMTcuY2xlYW51cFRldGhlcigpO1xuXG4gICAgICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAkKHRoaXMuZWxlbWVudCkudHJpZ2dlcihoaWRlRXZlbnQpO1xuXG4gICAgICAgIGlmIChoaWRlRXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAkKHRpcCkucmVtb3ZlQ2xhc3MoQ2xhc3NOYW1lLklOKTtcblxuICAgICAgICBpZiAoVXRpbC5zdXBwb3J0c1RyYW5zaXRpb25FbmQoKSAmJiAkKHRoaXMudGlwKS5oYXNDbGFzcyhDbGFzc05hbWUuRkFERSkpIHtcblxuICAgICAgICAgICQodGlwKS5vbmUoVXRpbC5UUkFOU0lUSU9OX0VORCwgY29tcGxldGUpLmVtdWxhdGVUcmFuc2l0aW9uRW5kKFRSQU5TSVRJT05fRFVSQVRJT04pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbXBsZXRlKCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9ob3ZlclN0YXRlID0gJyc7XG4gICAgICB9XG5cbiAgICAgIC8vIHByb3RlY3RlZFxuXG4gICAgfSwge1xuICAgICAga2V5OiAnaXNXaXRoQ29udGVudCcsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gaXNXaXRoQ29udGVudCgpIHtcbiAgICAgICAgcmV0dXJuIEJvb2xlYW4odGhpcy5nZXRUaXRsZSgpKTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6ICdnZXRUaXBFbGVtZW50JyxcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRUaXBFbGVtZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy50aXAgPSB0aGlzLnRpcCB8fCAkKHRoaXMuY29uZmlnLnRlbXBsYXRlKVswXTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6ICdzZXRDb250ZW50JyxcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRDb250ZW50KCkge1xuICAgICAgICB2YXIgJHRpcCA9ICQodGhpcy5nZXRUaXBFbGVtZW50KCkpO1xuXG4gICAgICAgIHRoaXMuc2V0RWxlbWVudENvbnRlbnQoJHRpcC5maW5kKFNlbGVjdG9yLlRPT0xUSVBfSU5ORVIpLCB0aGlzLmdldFRpdGxlKCkpO1xuXG4gICAgICAgICR0aXAucmVtb3ZlQ2xhc3MoQ2xhc3NOYW1lLkZBREUpLnJlbW92ZUNsYXNzKENsYXNzTmFtZS5JTik7XG5cbiAgICAgICAgdGhpcy5jbGVhbnVwVGV0aGVyKCk7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiAnc2V0RWxlbWVudENvbnRlbnQnLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNldEVsZW1lbnRDb250ZW50KCRlbGVtZW50LCBjb250ZW50KSB7XG4gICAgICAgIHZhciBodG1sID0gdGhpcy5jb25maWcuaHRtbDtcbiAgICAgICAgaWYgKHR5cGVvZiBjb250ZW50ID09PSAnb2JqZWN0JyAmJiAoY29udGVudC5ub2RlVHlwZSB8fCBjb250ZW50LmpxdWVyeSkpIHtcbiAgICAgICAgICAvLyBjb250ZW50IGlzIGEgRE9NIG5vZGUgb3IgYSBqUXVlcnlcbiAgICAgICAgICBpZiAoaHRtbCkge1xuICAgICAgICAgICAgaWYgKCEkKGNvbnRlbnQpLnBhcmVudCgpLmlzKCRlbGVtZW50KSkge1xuICAgICAgICAgICAgICAkZWxlbWVudC5lbXB0eSgpLmFwcGVuZChjb250ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJGVsZW1lbnQudGV4dCgkKGNvbnRlbnQpLnRleHQoKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICRlbGVtZW50W2h0bWwgPyAnaHRtbCcgOiAndGV4dCddKGNvbnRlbnQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiAnZ2V0VGl0bGUnLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldFRpdGxlKCkge1xuICAgICAgICB2YXIgdGl0bGUgPSB0aGlzLmVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLW9yaWdpbmFsLXRpdGxlJyk7XG5cbiAgICAgICAgaWYgKCF0aXRsZSkge1xuICAgICAgICAgIHRpdGxlID0gdHlwZW9mIHRoaXMuY29uZmlnLnRpdGxlID09PSAnZnVuY3Rpb24nID8gdGhpcy5jb25maWcudGl0bGUuY2FsbCh0aGlzLmVsZW1lbnQpIDogdGhpcy5jb25maWcudGl0bGU7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGl0bGU7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiAnY2xlYW51cFRldGhlcicsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gY2xlYW51cFRldGhlcigpIHtcbiAgICAgICAgaWYgKHRoaXMuX3RldGhlcikge1xuICAgICAgICAgIHRoaXMuX3RldGhlci5kZXN0cm95KCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gcHJpdmF0ZVxuXG4gICAgfSwge1xuICAgICAga2V5OiAnX2dldEF0dGFjaG1lbnQnLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9nZXRBdHRhY2htZW50KHBsYWNlbWVudCkge1xuICAgICAgICByZXR1cm4gQXR0YWNobWVudE1hcFtwbGFjZW1lbnQudG9VcHBlckNhc2UoKV07XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiAnX3NldExpc3RlbmVycycsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX3NldExpc3RlbmVycygpIHtcbiAgICAgICAgdmFyIF90aGlzMTggPSB0aGlzO1xuXG4gICAgICAgIHZhciB0cmlnZ2VycyA9IHRoaXMuY29uZmlnLnRyaWdnZXIuc3BsaXQoJyAnKTtcblxuICAgICAgICB0cmlnZ2Vycy5mb3JFYWNoKGZ1bmN0aW9uICh0cmlnZ2VyKSB7XG4gICAgICAgICAgaWYgKHRyaWdnZXIgPT09ICdjbGljaycpIHtcbiAgICAgICAgICAgICQoX3RoaXMxOC5lbGVtZW50KS5vbihfdGhpczE4LmNvbnN0cnVjdG9yLkV2ZW50LkNMSUNLLCBfdGhpczE4LmNvbmZpZy5zZWxlY3RvciwgJC5wcm94eShfdGhpczE4LnRvZ2dsZSwgX3RoaXMxOCkpO1xuICAgICAgICAgIH0gZWxzZSBpZiAodHJpZ2dlciAhPT0gVHJpZ2dlci5NQU5VQUwpIHtcbiAgICAgICAgICAgIHZhciBldmVudEluID0gdHJpZ2dlciA9PT0gVHJpZ2dlci5IT1ZFUiA/IF90aGlzMTguY29uc3RydWN0b3IuRXZlbnQuTU9VU0VFTlRFUiA6IF90aGlzMTguY29uc3RydWN0b3IuRXZlbnQuRk9DVVNJTjtcbiAgICAgICAgICAgIHZhciBldmVudE91dCA9IHRyaWdnZXIgPT09IFRyaWdnZXIuSE9WRVIgPyBfdGhpczE4LmNvbnN0cnVjdG9yLkV2ZW50Lk1PVVNFTEVBVkUgOiBfdGhpczE4LmNvbnN0cnVjdG9yLkV2ZW50LkZPQ1VTT1VUO1xuXG4gICAgICAgICAgICAkKF90aGlzMTguZWxlbWVudCkub24oZXZlbnRJbiwgX3RoaXMxOC5jb25maWcuc2VsZWN0b3IsICQucHJveHkoX3RoaXMxOC5fZW50ZXIsIF90aGlzMTgpKS5vbihldmVudE91dCwgX3RoaXMxOC5jb25maWcuc2VsZWN0b3IsICQucHJveHkoX3RoaXMxOC5fbGVhdmUsIF90aGlzMTgpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICh0aGlzLmNvbmZpZy5zZWxlY3Rvcikge1xuICAgICAgICAgIHRoaXMuY29uZmlnID0gJC5leHRlbmQoe30sIHRoaXMuY29uZmlnLCB7XG4gICAgICAgICAgICB0cmlnZ2VyOiAnbWFudWFsJyxcbiAgICAgICAgICAgIHNlbGVjdG9yOiAnJ1xuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuX2ZpeFRpdGxlKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6ICdfZml4VGl0bGUnLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9maXhUaXRsZSgpIHtcbiAgICAgICAgdmFyIHRpdGxlVHlwZSA9IHR5cGVvZiB0aGlzLmVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLW9yaWdpbmFsLXRpdGxlJyk7XG4gICAgICAgIGlmICh0aGlzLmVsZW1lbnQuZ2V0QXR0cmlidXRlKCd0aXRsZScpIHx8IHRpdGxlVHlwZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICB0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKCdkYXRhLW9yaWdpbmFsLXRpdGxlJywgdGhpcy5lbGVtZW50LmdldEF0dHJpYnV0ZSgndGl0bGUnKSB8fCAnJyk7XG4gICAgICAgICAgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZSgndGl0bGUnLCAnJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6ICdfZW50ZXInLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9lbnRlcihldmVudCwgY29udGV4dCkge1xuICAgICAgICB2YXIgZGF0YUtleSA9IHRoaXMuY29uc3RydWN0b3IuREFUQV9LRVk7XG5cbiAgICAgICAgY29udGV4dCA9IGNvbnRleHQgfHwgJChldmVudC5jdXJyZW50VGFyZ2V0KS5kYXRhKGRhdGFLZXkpO1xuXG4gICAgICAgIGlmICghY29udGV4dCkge1xuICAgICAgICAgIGNvbnRleHQgPSBuZXcgdGhpcy5jb25zdHJ1Y3RvcihldmVudC5jdXJyZW50VGFyZ2V0LCB0aGlzLl9nZXREZWxlZ2F0ZUNvbmZpZygpKTtcbiAgICAgICAgICAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLmRhdGEoZGF0YUtleSwgY29udGV4dCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZXZlbnQpIHtcbiAgICAgICAgICBjb250ZXh0Ll9hY3RpdmVUcmlnZ2VyW2V2ZW50LnR5cGUgPT09ICdmb2N1c2luJyA/IFRyaWdnZXIuRk9DVVMgOiBUcmlnZ2VyLkhPVkVSXSA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoJChjb250ZXh0LmdldFRpcEVsZW1lbnQoKSkuaGFzQ2xhc3MoQ2xhc3NOYW1lLklOKSB8fCBjb250ZXh0Ll9ob3ZlclN0YXRlID09PSBIb3ZlclN0YXRlLklOKSB7XG4gICAgICAgICAgY29udGV4dC5faG92ZXJTdGF0ZSA9IEhvdmVyU3RhdGUuSU47XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY2xlYXJUaW1lb3V0KGNvbnRleHQuX3RpbWVvdXQpO1xuXG4gICAgICAgIGNvbnRleHQuX2hvdmVyU3RhdGUgPSBIb3ZlclN0YXRlLklOO1xuXG4gICAgICAgIGlmICghY29udGV4dC5jb25maWcuZGVsYXkgfHwgIWNvbnRleHQuY29uZmlnLmRlbGF5LnNob3cpIHtcbiAgICAgICAgICBjb250ZXh0LnNob3coKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb250ZXh0Ll90aW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgaWYgKGNvbnRleHQuX2hvdmVyU3RhdGUgPT09IEhvdmVyU3RhdGUuSU4pIHtcbiAgICAgICAgICAgIGNvbnRleHQuc2hvdygpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSwgY29udGV4dC5jb25maWcuZGVsYXkuc2hvdyk7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiAnX2xlYXZlJyxcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfbGVhdmUoZXZlbnQsIGNvbnRleHQpIHtcbiAgICAgICAgdmFyIGRhdGFLZXkgPSB0aGlzLmNvbnN0cnVjdG9yLkRBVEFfS0VZO1xuXG4gICAgICAgIGNvbnRleHQgPSBjb250ZXh0IHx8ICQoZXZlbnQuY3VycmVudFRhcmdldCkuZGF0YShkYXRhS2V5KTtcblxuICAgICAgICBpZiAoIWNvbnRleHQpIHtcbiAgICAgICAgICBjb250ZXh0ID0gbmV3IHRoaXMuY29uc3RydWN0b3IoZXZlbnQuY3VycmVudFRhcmdldCwgdGhpcy5fZ2V0RGVsZWdhdGVDb25maWcoKSk7XG4gICAgICAgICAgJChldmVudC5jdXJyZW50VGFyZ2V0KS5kYXRhKGRhdGFLZXksIGNvbnRleHQpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGV2ZW50KSB7XG4gICAgICAgICAgY29udGV4dC5fYWN0aXZlVHJpZ2dlcltldmVudC50eXBlID09PSAnZm9jdXNvdXQnID8gVHJpZ2dlci5GT0NVUyA6IFRyaWdnZXIuSE9WRVJdID0gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY29udGV4dC5faXNXaXRoQWN0aXZlVHJpZ2dlcigpKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY2xlYXJUaW1lb3V0KGNvbnRleHQuX3RpbWVvdXQpO1xuXG4gICAgICAgIGNvbnRleHQuX2hvdmVyU3RhdGUgPSBIb3ZlclN0YXRlLk9VVDtcblxuICAgICAgICBpZiAoIWNvbnRleHQuY29uZmlnLmRlbGF5IHx8ICFjb250ZXh0LmNvbmZpZy5kZWxheS5oaWRlKSB7XG4gICAgICAgICAgY29udGV4dC5oaWRlKCk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29udGV4dC5fdGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGlmIChjb250ZXh0Ll9ob3ZlclN0YXRlID09PSBIb3ZlclN0YXRlLk9VVCkge1xuICAgICAgICAgICAgY29udGV4dC5oaWRlKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9LCBjb250ZXh0LmNvbmZpZy5kZWxheS5oaWRlKTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6ICdfaXNXaXRoQWN0aXZlVHJpZ2dlcicsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2lzV2l0aEFjdGl2ZVRyaWdnZXIoKSB7XG4gICAgICAgIGZvciAodmFyIHRyaWdnZXIgaW4gdGhpcy5fYWN0aXZlVHJpZ2dlcikge1xuICAgICAgICAgIGlmICh0aGlzLl9hY3RpdmVUcmlnZ2VyW3RyaWdnZXJdKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiAnX2dldENvbmZpZycsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2dldENvbmZpZyhjb25maWcpIHtcbiAgICAgICAgY29uZmlnID0gJC5leHRlbmQoe30sIHRoaXMuY29uc3RydWN0b3IuRGVmYXVsdCwgJCh0aGlzLmVsZW1lbnQpLmRhdGEoKSwgY29uZmlnKTtcblxuICAgICAgICBpZiAoY29uZmlnLmRlbGF5ICYmIHR5cGVvZiBjb25maWcuZGVsYXkgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgY29uZmlnLmRlbGF5ID0ge1xuICAgICAgICAgICAgc2hvdzogY29uZmlnLmRlbGF5LFxuICAgICAgICAgICAgaGlkZTogY29uZmlnLmRlbGF5XG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIFV0aWwudHlwZUNoZWNrQ29uZmlnKE5BTUUsIGNvbmZpZywgdGhpcy5jb25zdHJ1Y3Rvci5EZWZhdWx0VHlwZSk7XG5cbiAgICAgICAgcmV0dXJuIGNvbmZpZztcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6ICdfZ2V0RGVsZWdhdGVDb25maWcnLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9nZXREZWxlZ2F0ZUNvbmZpZygpIHtcbiAgICAgICAgdmFyIGNvbmZpZyA9IHt9O1xuXG4gICAgICAgIGlmICh0aGlzLmNvbmZpZykge1xuICAgICAgICAgIGZvciAodmFyIGtleSBpbiB0aGlzLmNvbmZpZykge1xuICAgICAgICAgICAgaWYgKHRoaXMuY29uc3RydWN0b3IuRGVmYXVsdFtrZXldICE9PSB0aGlzLmNvbmZpZ1trZXldKSB7XG4gICAgICAgICAgICAgIGNvbmZpZ1trZXldID0gdGhpcy5jb25maWdba2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gY29uZmlnO1xuICAgICAgfVxuXG4gICAgICAvLyBzdGF0aWNcblxuICAgIH1dLCBbe1xuICAgICAga2V5OiAnX2pRdWVyeUludGVyZmFjZScsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2pRdWVyeUludGVyZmFjZShjb25maWcpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdmFyIGRhdGEgPSAkKHRoaXMpLmRhdGEoREFUQV9LRVkpO1xuICAgICAgICAgIHZhciBfY29uZmlnID0gdHlwZW9mIGNvbmZpZyA9PT0gJ29iamVjdCcgPyBjb25maWcgOiBudWxsO1xuXG4gICAgICAgICAgaWYgKCFkYXRhICYmIC9kZXN0cm95fGhpZGUvLnRlc3QoY29uZmlnKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICghZGF0YSkge1xuICAgICAgICAgICAgZGF0YSA9IG5ldyBUb29sdGlwKHRoaXMsIF9jb25maWcpO1xuICAgICAgICAgICAgJCh0aGlzKS5kYXRhKERBVEFfS0VZLCBkYXRhKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAodHlwZW9mIGNvbmZpZyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGlmIChkYXRhW2NvbmZpZ10gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIG1ldGhvZCBuYW1lZCBcIicgKyBjb25maWcgKyAnXCInKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRhdGFbY29uZmlnXSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiAnVkVSU0lPTicsXG4gICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIFZFUlNJT047XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiAnRGVmYXVsdCcsXG4gICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIERlZmF1bHQ7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiAnTkFNRScsXG4gICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIE5BTUU7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiAnREFUQV9LRVknLFxuICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgIHJldHVybiBEQVRBX0tFWTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6ICdFdmVudCcsXG4gICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIEV2ZW50O1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogJ0VWRU5UX0tFWScsXG4gICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIEVWRU5UX0tFWTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6ICdEZWZhdWx0VHlwZScsXG4gICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIERlZmF1bHRUeXBlO1xuICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBUb29sdGlwO1xuICB9KSgpO1xuXG4gICQuZm5bTkFNRV0gPSBUb29sdGlwLl9qUXVlcnlJbnRlcmZhY2U7XG4gICQuZm5bTkFNRV0uQ29uc3RydWN0b3IgPSBUb29sdGlwO1xuICAkLmZuW05BTUVdLm5vQ29uZmxpY3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgJC5mbltOQU1FXSA9IEpRVUVSWV9OT19DT05GTElDVDtcbiAgICByZXR1cm4gVG9vbHRpcC5falF1ZXJ5SW50ZXJmYWNlO1xuICB9O1xuXG4gIHJldHVybiBUb29sdGlwO1xufSkoalF1ZXJ5KTtcblxuLyoqXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogQm9vdHN0cmFwICh2NC4wLjAtYWxwaGEuNCk6IHBvcG92ZXIuanNcbiAqIExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2Jsb2IvbWFzdGVyL0xJQ0VOU0UpXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICovXG5cbnZhciBQb3BvdmVyID0gKGZ1bmN0aW9uICgkKSB7XG5cbiAgLyoqXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKiBDb25zdGFudHNcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqL1xuXG4gIHZhciBOQU1FID0gJ3BvcG92ZXInO1xuICB2YXIgVkVSU0lPTiA9ICc0LjAuMC1hbHBoYS40JztcbiAgdmFyIERBVEFfS0VZID0gJ2JzLnBvcG92ZXInO1xuICB2YXIgRVZFTlRfS0VZID0gJy4nICsgREFUQV9LRVk7XG4gIHZhciBKUVVFUllfTk9fQ09ORkxJQ1QgPSAkLmZuW05BTUVdO1xuXG4gIHZhciBEZWZhdWx0ID0gJC5leHRlbmQoe30sIFRvb2x0aXAuRGVmYXVsdCwge1xuICAgIHBsYWNlbWVudDogJ3JpZ2h0JyxcbiAgICB0cmlnZ2VyOiAnY2xpY2snLFxuICAgIGNvbnRlbnQ6ICcnLFxuICAgIHRlbXBsYXRlOiAnPGRpdiBjbGFzcz1cInBvcG92ZXJcIiByb2xlPVwidG9vbHRpcFwiPicgKyAnPGRpdiBjbGFzcz1cInBvcG92ZXItYXJyb3dcIj48L2Rpdj4nICsgJzxoMyBjbGFzcz1cInBvcG92ZXItdGl0bGVcIj48L2gzPicgKyAnPGRpdiBjbGFzcz1cInBvcG92ZXItY29udGVudFwiPjwvZGl2PjwvZGl2PidcbiAgfSk7XG5cbiAgdmFyIERlZmF1bHRUeXBlID0gJC5leHRlbmQoe30sIFRvb2x0aXAuRGVmYXVsdFR5cGUsIHtcbiAgICBjb250ZW50OiAnKHN0cmluZ3xlbGVtZW50fGZ1bmN0aW9uKSdcbiAgfSk7XG5cbiAgdmFyIENsYXNzTmFtZSA9IHtcbiAgICBGQURFOiAnZmFkZScsXG4gICAgSU46ICdpbidcbiAgfTtcblxuICB2YXIgU2VsZWN0b3IgPSB7XG4gICAgVElUTEU6ICcucG9wb3Zlci10aXRsZScsXG4gICAgQ09OVEVOVDogJy5wb3BvdmVyLWNvbnRlbnQnLFxuICAgIEFSUk9XOiAnLnBvcG92ZXItYXJyb3cnXG4gIH07XG5cbiAgdmFyIEV2ZW50ID0ge1xuICAgIEhJREU6ICdoaWRlJyArIEVWRU5UX0tFWSxcbiAgICBISURERU46ICdoaWRkZW4nICsgRVZFTlRfS0VZLFxuICAgIFNIT1c6ICdzaG93JyArIEVWRU5UX0tFWSxcbiAgICBTSE9XTjogJ3Nob3duJyArIEVWRU5UX0tFWSxcbiAgICBJTlNFUlRFRDogJ2luc2VydGVkJyArIEVWRU5UX0tFWSxcbiAgICBDTElDSzogJ2NsaWNrJyArIEVWRU5UX0tFWSxcbiAgICBGT0NVU0lOOiAnZm9jdXNpbicgKyBFVkVOVF9LRVksXG4gICAgRk9DVVNPVVQ6ICdmb2N1c291dCcgKyBFVkVOVF9LRVksXG4gICAgTU9VU0VFTlRFUjogJ21vdXNlZW50ZXInICsgRVZFTlRfS0VZLFxuICAgIE1PVVNFTEVBVkU6ICdtb3VzZWxlYXZlJyArIEVWRU5UX0tFWVxuICB9O1xuXG4gIC8qKlxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICogQ2xhc3MgRGVmaW5pdGlvblxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICovXG5cbiAgdmFyIFBvcG92ZXIgPSAoZnVuY3Rpb24gKF9Ub29sdGlwKSB7XG4gICAgX2luaGVyaXRzKFBvcG92ZXIsIF9Ub29sdGlwKTtcblxuICAgIGZ1bmN0aW9uIFBvcG92ZXIoKSB7XG4gICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUG9wb3Zlcik7XG5cbiAgICAgIF9nZXQoT2JqZWN0LmdldFByb3RvdHlwZU9mKFBvcG92ZXIucHJvdG90eXBlKSwgJ2NvbnN0cnVjdG9yJywgdGhpcykuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgKiBqUXVlcnlcbiAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgKi9cblxuICAgIF9jcmVhdGVDbGFzcyhQb3BvdmVyLCBbe1xuICAgICAga2V5OiAnaXNXaXRoQ29udGVudCcsXG5cbiAgICAgIC8vIG92ZXJyaWRlc1xuXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gaXNXaXRoQ29udGVudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VGl0bGUoKSB8fCB0aGlzLl9nZXRDb250ZW50KCk7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiAnZ2V0VGlwRWxlbWVudCcsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VGlwRWxlbWVudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGlwID0gdGhpcy50aXAgfHwgJCh0aGlzLmNvbmZpZy50ZW1wbGF0ZSlbMF07XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiAnc2V0Q29udGVudCcsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gc2V0Q29udGVudCgpIHtcbiAgICAgICAgdmFyICR0aXAgPSAkKHRoaXMuZ2V0VGlwRWxlbWVudCgpKTtcblxuICAgICAgICAvLyB3ZSB1c2UgYXBwZW5kIGZvciBodG1sIG9iamVjdHMgdG8gbWFpbnRhaW4ganMgZXZlbnRzXG4gICAgICAgIHRoaXMuc2V0RWxlbWVudENvbnRlbnQoJHRpcC5maW5kKFNlbGVjdG9yLlRJVExFKSwgdGhpcy5nZXRUaXRsZSgpKTtcbiAgICAgICAgdGhpcy5zZXRFbGVtZW50Q29udGVudCgkdGlwLmZpbmQoU2VsZWN0b3IuQ09OVEVOVCksIHRoaXMuX2dldENvbnRlbnQoKSk7XG5cbiAgICAgICAgJHRpcC5yZW1vdmVDbGFzcyhDbGFzc05hbWUuRkFERSkucmVtb3ZlQ2xhc3MoQ2xhc3NOYW1lLklOKTtcblxuICAgICAgICB0aGlzLmNsZWFudXBUZXRoZXIoKTtcbiAgICAgIH1cblxuICAgICAgLy8gcHJpdmF0ZVxuXG4gICAgfSwge1xuICAgICAga2V5OiAnX2dldENvbnRlbnQnLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9nZXRDb250ZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1jb250ZW50JykgfHwgKHR5cGVvZiB0aGlzLmNvbmZpZy5jb250ZW50ID09PSAnZnVuY3Rpb24nID8gdGhpcy5jb25maWcuY29udGVudC5jYWxsKHRoaXMuZWxlbWVudCkgOiB0aGlzLmNvbmZpZy5jb250ZW50KTtcbiAgICAgIH1cblxuICAgICAgLy8gc3RhdGljXG5cbiAgICB9XSwgW3tcbiAgICAgIGtleTogJ19qUXVlcnlJbnRlcmZhY2UnLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9qUXVlcnlJbnRlcmZhY2UoY29uZmlnKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHZhciBkYXRhID0gJCh0aGlzKS5kYXRhKERBVEFfS0VZKTtcbiAgICAgICAgICB2YXIgX2NvbmZpZyA9IHR5cGVvZiBjb25maWcgPT09ICdvYmplY3QnID8gY29uZmlnIDogbnVsbDtcblxuICAgICAgICAgIGlmICghZGF0YSAmJiAvZGVzdHJveXxoaWRlLy50ZXN0KGNvbmZpZykpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoIWRhdGEpIHtcbiAgICAgICAgICAgIGRhdGEgPSBuZXcgUG9wb3Zlcih0aGlzLCBfY29uZmlnKTtcbiAgICAgICAgICAgICQodGhpcykuZGF0YShEQVRBX0tFWSwgZGF0YSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHR5cGVvZiBjb25maWcgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBpZiAoZGF0YVtjb25maWddID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBtZXRob2QgbmFtZWQgXCInICsgY29uZmlnICsgJ1wiJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkYXRhW2NvbmZpZ10oKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogJ1ZFUlNJT04nLFxuXG4gICAgICAvLyBnZXR0ZXJzXG5cbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gVkVSU0lPTjtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6ICdEZWZhdWx0JyxcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gRGVmYXVsdDtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6ICdOQU1FJyxcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gTkFNRTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6ICdEQVRBX0tFWScsXG4gICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIERBVEFfS0VZO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogJ0V2ZW50JyxcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gRXZlbnQ7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiAnRVZFTlRfS0VZJyxcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gRVZFTlRfS0VZO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogJ0RlZmF1bHRUeXBlJyxcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gRGVmYXVsdFR5cGU7XG4gICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIFBvcG92ZXI7XG4gIH0pKFRvb2x0aXApO1xuXG4gICQuZm5bTkFNRV0gPSBQb3BvdmVyLl9qUXVlcnlJbnRlcmZhY2U7XG4gICQuZm5bTkFNRV0uQ29uc3RydWN0b3IgPSBQb3BvdmVyO1xuICAkLmZuW05BTUVdLm5vQ29uZmxpY3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgJC5mbltOQU1FXSA9IEpRVUVSWV9OT19DT05GTElDVDtcbiAgICByZXR1cm4gUG9wb3Zlci5falF1ZXJ5SW50ZXJmYWNlO1xuICB9O1xuXG4gIHJldHVybiBQb3BvdmVyO1xufSkoalF1ZXJ5KTtcblxufShqUXVlcnkpO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vYm9vdHN0cmFwL2Rpc3QvanMvYm9vdHN0cmFwLmpzXG4gKiogbW9kdWxlIGlkID0gNVxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIl0sInNvdXJjZVJvb3QiOiIifQ==