!function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n=window.webpackJsonp;window.webpackJsonp=function(r,s){for(var a,l,h=0,u=[];h<r.length;h++)l=r[h],o[l]&&u.push.apply(u,o[l]),o[l]=0;for(a in s)t[a]=s[a];for(n&&n(r,s);u.length;)u.shift().call(null,e);if(s[0])return i[0]=0,e(0)};var i={},o={1:0};e.e=function(t,n){if(0===o[t])return n.call(null,e);if(void 0!==o[t])o[t].push(n);else{o[t]=[n];var i=document.getElementsByTagName("head")[0],r=document.createElement("script");r.type="text/javascript",r.charset="utf-8",r.async=!0,r.src=e.p+""+t+".app.js",i.appendChild(r)}},e.m=t,e.c=i,e.p=""}([,,function(t,e,n){(function(e){t.exports=e.Tether=n(3)}).call(e,function(){return this}())},function(t,e,n){(function(e){t.exports=e.$=n(4)}).call(e,function(){return this}())},function(t,e,n){var i,o;/*! tether 1.3.7 */
!function(r,s){i=s,o="function"==typeof i?i.call(e,n,e,t):i,!(void 0!==o&&(t.exports=o))}(this,function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t){var e=t.getBoundingClientRect(),n={};for(var i in e)n[i]=e[i];if(t.ownerDocument!==document){var r=t.ownerDocument.defaultView.frameElement;if(r){var s=o(r);n.top+=s.top,n.bottom+=s.top,n.left+=s.left,n.right+=s.left}}return n}function r(t){var e=getComputedStyle(t)||{},n=e.position,i=[];if("fixed"===n)return[t];for(var o=t;(o=o.parentNode)&&o&&1===o.nodeType;){var r=void 0;try{r=getComputedStyle(o)}catch(s){}if("undefined"==typeof r||null===r)return i.push(o),i;var a=r,l=a.overflow,h=a.overflowX,u=a.overflowY;/(auto|scroll)/.test(l+u+h)&&("absolute"!==n||["relative","absolute","fixed"].indexOf(r.position)>=0)&&i.push(o)}return i.push(t.ownerDocument.body),t.ownerDocument!==document&&i.push(t.ownerDocument.defaultView),i}function s(){I&&document.body.removeChild(I),I=null}function a(t){var e=void 0;t===document?(e=document,t=document.documentElement):e=t.ownerDocument;var n=e.documentElement,i=o(t),r=O();return i.top-=r.top,i.left-=r.left,"undefined"==typeof i.width&&(i.width=document.body.scrollWidth-i.left-i.right),"undefined"==typeof i.height&&(i.height=document.body.scrollHeight-i.top-i.bottom),i.top=i.top-n.clientTop,i.left=i.left-n.clientLeft,i.right=e.body.clientWidth-i.width-i.left,i.bottom=e.body.clientHeight-i.height-i.top,i}function l(t){return t.offsetParent||document.documentElement}function h(){if(D)return D;var t=document.createElement("div");t.style.width="100%",t.style.height="200px";var e=document.createElement("div");u(e.style,{position:"absolute",top:0,left:0,pointerEvents:"none",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),e.appendChild(t),document.body.appendChild(e);var n=t.offsetWidth;e.style.overflow="scroll";var i=t.offsetWidth;n===i&&(i=e.clientWidth),document.body.removeChild(e);var o=n-i;return D={width:o,height:o}}function u(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],e=[];return Array.prototype.push.apply(e,arguments),e.slice(1).forEach(function(e){if(e)for(var n in e)({}).hasOwnProperty.call(e,n)&&(t[n]=e[n])}),t}function c(t,e){if("undefined"!=typeof t.classList)e.split(" ").forEach(function(e){e.trim()&&t.classList.remove(e)});else{var n=new RegExp("(^| )"+e.split(" ").join("|")+"( |$)","gi"),i=p(t).replace(n," ");g(t,i)}}function d(t,e){if("undefined"!=typeof t.classList)e.split(" ").forEach(function(e){e.trim()&&t.classList.add(e)});else{c(t,e);var n=p(t)+(" "+e);g(t,n)}}function f(t,e){if("undefined"!=typeof t.classList)return t.classList.contains(e);var n=p(t);return new RegExp("(^| )"+e+"( |$)","gi").test(n)}function p(t){return t.className instanceof t.ownerDocument.defaultView.SVGAnimatedString?t.className.baseVal:t.className}function g(t,e){t.setAttribute("class",e)}function m(t,e,n){n.forEach(function(n){e.indexOf(n)===-1&&f(t,n)&&c(t,n)}),e.forEach(function(e){f(t,e)||d(t,e)})}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function y(t,e){var n=arguments.length<=2||void 0===arguments[2]?1:arguments[2];return t+n>=e&&e>=t-n}function _(){return"undefined"!=typeof performance&&"undefined"!=typeof performance.now?performance.now():+new Date}function E(){for(var t={top:0,left:0},e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];return n.forEach(function(e){var n=e.top,i=e.left;"string"==typeof n&&(n=parseFloat(n,10)),"string"==typeof i&&(i=parseFloat(i,10)),t.top+=n,t.left+=i}),t}function T(t,e){return"string"==typeof t.left&&t.left.indexOf("%")!==-1&&(t.left=parseFloat(t.left,10)/100*e.width),"string"==typeof t.top&&t.top.indexOf("%")!==-1&&(t.top=parseFloat(t.top,10)/100*e.height),t}function C(t,e){return"scrollParent"===e?e=t.scrollParents[0]:"window"===e&&(e=[pageXOffset,pageYOffset,innerWidth+pageXOffset,innerHeight+pageYOffset]),e===document&&(e=e.documentElement),"undefined"!=typeof e.nodeType&&!function(){var t=e,n=a(e),i=n,o=getComputedStyle(e);if(e=[i.left,i.top,n.width+i.left,n.height+i.top],t.ownerDocument!==document){var r=t.ownerDocument.defaultView;e[0]+=r.pageXOffset,e[1]+=r.pageYOffset,e[2]+=r.pageXOffset,e[3]+=r.pageYOffset}z.forEach(function(t,n){t=t[0].toUpperCase()+t.substr(1),"Top"===t||"Left"===t?e[n]+=parseFloat(o["border"+t+"Width"]):e[n]-=parseFloat(o["border"+t+"Width"])})}(),e}var b=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),A=void 0;"undefined"==typeof A&&(A={modules:[]});var I=null,w=function(){var t=0;return function(){return++t}}(),S={},O=function(){var t=I;t||(t=document.createElement("div"),t.setAttribute("data-tether-id",w()),u(t.style,{top:0,left:0,position:"absolute"}),document.body.appendChild(t),I=t);var e=t.getAttribute("data-tether-id");return"undefined"==typeof S[e]&&(S[e]=o(t),L(function(){delete S[e]})),S[e]},D=null,N=[],L=function(t){N.push(t)},P=function(){for(var t=void 0;t=N.pop();)t()},R=function(){function t(){i(this,t)}return b(t,[{key:"on",value:function(t,e,n){var i=!(arguments.length<=3||void 0===arguments[3])&&arguments[3];"undefined"==typeof this.bindings&&(this.bindings={}),"undefined"==typeof this.bindings[t]&&(this.bindings[t]=[]),this.bindings[t].push({handler:e,ctx:n,once:i})}},{key:"once",value:function(t,e,n){this.on(t,e,n,!0)}},{key:"off",value:function(t,e){if("undefined"!=typeof this.bindings&&"undefined"!=typeof this.bindings[t])if("undefined"==typeof e)delete this.bindings[t];else for(var n=0;n<this.bindings[t].length;)this.bindings[t][n].handler===e?this.bindings[t].splice(n,1):++n}},{key:"trigger",value:function(t){if("undefined"!=typeof this.bindings&&this.bindings[t]){for(var e=0,n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];for(;e<this.bindings[t].length;){var r=this.bindings[t][e],s=r.handler,a=r.ctx,l=r.once,h=a;"undefined"==typeof h&&(h=this),s.apply(h,i),l?this.bindings[t].splice(e,1):++e}}}}]),t}();A.Utils={getActualBoundingClientRect:o,getScrollParents:r,getBounds:a,getOffsetParent:l,extend:u,addClass:d,removeClass:c,hasClass:f,updateClasses:m,defer:L,flush:P,uniqueId:w,Evented:R,getScrollBarSize:h,removeUtilElements:s};var k=function(){function t(t,e){var n=[],i=!0,o=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(l){o=!0,r=l}finally{try{!i&&a["return"]&&a["return"]()}finally{if(o)throw r}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),b=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),x=function(t,e,n){for(var i=!0;i;){var o=t,r=e,s=n;i=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,r);if(void 0!==a){if("value"in a)return a.value;var l=a.get;if(void 0===l)return;return l.call(s)}var h=Object.getPrototypeOf(o);if(null===h)return;t=h,e=r,n=s,i=!0,a=h=void 0}};if("undefined"==typeof A)throw new Error("You must include the utils.js file before tether.js");var H=A.Utils,r=H.getScrollParents,a=H.getBounds,l=H.getOffsetParent,u=H.extend,d=H.addClass,c=H.removeClass,m=H.updateClasses,L=H.defer,P=H.flush,h=H.getScrollBarSize,s=H.removeUtilElements,M=function(){if("undefined"==typeof document)return"";for(var t=document.createElement("div"),e=["transform","WebkitTransform","OTransform","MozTransform","msTransform"],n=0;n<e.length;++n){var i=e[n];if(void 0!==t.style[i])return i}}(),B=[],V=function(){B.forEach(function(t){t.position(!1)}),P()};!function(){var t=null,e=null,n=null,i=function o(){return"undefined"!=typeof e&&e>16?(e=Math.min(e-16,250),void(n=setTimeout(o,250))):void("undefined"!=typeof t&&_()-t<10||(null!=n&&(clearTimeout(n),n=null),t=_(),V(),e=_()-t))};"undefined"!=typeof window&&"undefined"!=typeof window.addEventListener&&["resize","scroll","touchmove"].forEach(function(t){window.addEventListener(t,i)})}();var W={center:"center",left:"right",right:"left"},F={middle:"middle",top:"bottom",bottom:"top"},U={top:0,left:0,middle:"50%",center:"50%",bottom:"100%",right:"100%"},q=function(t,e){var n=t.left,i=t.top;return"auto"===n&&(n=W[e.left]),"auto"===i&&(i=F[e.top]),{left:n,top:i}},j=function(t){var e=t.left,n=t.top;return"undefined"!=typeof U[t.left]&&(e=U[t.left]),"undefined"!=typeof U[t.top]&&(n=U[t.top]),{left:e,top:n}},K=function(t){var e=t.split(" "),n=k(e,2),i=n[0],o=n[1];return{top:i,left:o}},G=K,Q=function(t){function e(t){var n=this;i(this,e),x(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.position=this.position.bind(this),B.push(this),this.history=[],this.setOptions(t,!1),A.modules.forEach(function(t){"undefined"!=typeof t.initialize&&t.initialize.call(n)}),this.position()}return v(e,t),b(e,[{key:"getClass",value:function(){var t=arguments.length<=0||void 0===arguments[0]?"":arguments[0],e=this.options.classes;return"undefined"!=typeof e&&e[t]?this.options.classes[t]:this.options.classPrefix?this.options.classPrefix+"-"+t:t}},{key:"setOptions",value:function(t){var e=this,n=arguments.length<=1||void 0===arguments[1]||arguments[1],i={offset:"0 0",targetOffset:"0 0",targetAttachment:"auto auto",classPrefix:"tether"};this.options=u(i,t);var o=this.options,s=o.element,a=o.target,l=o.targetModifier;if(this.element=s,this.target=a,this.targetModifier=l,"viewport"===this.target?(this.target=document.body,this.targetModifier="visible"):"scroll-handle"===this.target&&(this.target=document.body,this.targetModifier="scroll-handle"),["element","target"].forEach(function(t){if("undefined"==typeof e[t])throw new Error("Tether Error: Both element and target must be defined");"undefined"!=typeof e[t].jquery?e[t]=e[t][0]:"string"==typeof e[t]&&(e[t]=document.querySelector(e[t]))}),d(this.element,this.getClass("element")),this.options.addTargetClasses!==!1&&d(this.target,this.getClass("target")),!this.options.attachment)throw new Error("Tether Error: You must provide an attachment");this.targetAttachment=G(this.options.targetAttachment),this.attachment=G(this.options.attachment),this.offset=K(this.options.offset),this.targetOffset=K(this.options.targetOffset),"undefined"!=typeof this.scrollParents&&this.disable(),"scroll-handle"===this.targetModifier?this.scrollParents=[this.target]:this.scrollParents=r(this.target),this.options.enabled!==!1&&this.enable(n)}},{key:"getTargetBounds",value:function(){if("undefined"==typeof this.targetModifier)return a(this.target);if("visible"===this.targetModifier){if(this.target===document.body)return{top:pageYOffset,left:pageXOffset,height:innerHeight,width:innerWidth};var t=a(this.target),e={height:t.height,width:t.width,top:t.top,left:t.left};return e.height=Math.min(e.height,t.height-(pageYOffset-t.top)),e.height=Math.min(e.height,t.height-(t.top+t.height-(pageYOffset+innerHeight))),e.height=Math.min(innerHeight,e.height),e.height-=2,e.width=Math.min(e.width,t.width-(pageXOffset-t.left)),e.width=Math.min(e.width,t.width-(t.left+t.width-(pageXOffset+innerWidth))),e.width=Math.min(innerWidth,e.width),e.width-=2,e.top<pageYOffset&&(e.top=pageYOffset),e.left<pageXOffset&&(e.left=pageXOffset),e}if("scroll-handle"===this.targetModifier){var t=void 0,n=this.target;n===document.body?(n=document.documentElement,t={left:pageXOffset,top:pageYOffset,height:innerHeight,width:innerWidth}):t=a(n);var i=getComputedStyle(n),o=n.scrollWidth>n.clientWidth||[i.overflow,i.overflowX].indexOf("scroll")>=0||this.target!==document.body,r=0;o&&(r=15);var s=t.height-parseFloat(i.borderTopWidth)-parseFloat(i.borderBottomWidth)-r,e={width:15,height:.975*s*(s/n.scrollHeight),left:t.left+t.width-parseFloat(i.borderLeftWidth)-15},l=0;s<408&&this.target===document.body&&(l=-11e-5*Math.pow(s,2)-.00727*s+22.58),this.target!==document.body&&(e.height=Math.max(e.height,24));var h=this.target.scrollTop/(n.scrollHeight-s);return e.top=h*(s-e.height-l)+t.top+parseFloat(i.borderTopWidth),this.target===document.body&&(e.height=Math.max(e.height,24)),e}}},{key:"clearCache",value:function(){this._cache={}}},{key:"cache",value:function(t,e){return"undefined"==typeof this._cache&&(this._cache={}),"undefined"==typeof this._cache[t]&&(this._cache[t]=e.call(this)),this._cache[t]}},{key:"enable",value:function(){var t=this,e=arguments.length<=0||void 0===arguments[0]||arguments[0];this.options.addTargetClasses!==!1&&d(this.target,this.getClass("enabled")),d(this.element,this.getClass("enabled")),this.enabled=!0,this.scrollParents.forEach(function(e){e!==t.target.ownerDocument&&e.addEventListener("scroll",t.position)}),e&&this.position()}},{key:"disable",value:function(){var t=this;c(this.target,this.getClass("enabled")),c(this.element,this.getClass("enabled")),this.enabled=!1,"undefined"!=typeof this.scrollParents&&this.scrollParents.forEach(function(e){e.removeEventListener("scroll",t.position)})}},{key:"destroy",value:function(){var t=this;this.disable(),B.forEach(function(e,n){e===t&&B.splice(n,1)}),0===B.length&&s()}},{key:"updateAttachClasses",value:function(t,e){var n=this;t=t||this.attachment,e=e||this.targetAttachment;var i=["left","top","bottom","right","middle","center"];"undefined"!=typeof this._addAttachClasses&&this._addAttachClasses.length&&this._addAttachClasses.splice(0,this._addAttachClasses.length),"undefined"==typeof this._addAttachClasses&&(this._addAttachClasses=[]);var o=this._addAttachClasses;t.top&&o.push(this.getClass("element-attached")+"-"+t.top),t.left&&o.push(this.getClass("element-attached")+"-"+t.left),e.top&&o.push(this.getClass("target-attached")+"-"+e.top),e.left&&o.push(this.getClass("target-attached")+"-"+e.left);var r=[];i.forEach(function(t){r.push(n.getClass("element-attached")+"-"+t),r.push(n.getClass("target-attached")+"-"+t)}),L(function(){"undefined"!=typeof n._addAttachClasses&&(m(n.element,n._addAttachClasses,r),n.options.addTargetClasses!==!1&&m(n.target,n._addAttachClasses,r),delete n._addAttachClasses)})}},{key:"position",value:function(){var t=this,e=arguments.length<=0||void 0===arguments[0]||arguments[0];if(this.enabled){this.clearCache();var n=q(this.targetAttachment,this.attachment);this.updateAttachClasses(this.attachment,n);var i=this.cache("element-bounds",function(){return a(t.element)}),o=i.width,r=i.height;if(0===o&&0===r&&"undefined"!=typeof this.lastSize){var s=this.lastSize;o=s.width,r=s.height}else this.lastSize={width:o,height:r};var u=this.cache("target-bounds",function(){return t.getTargetBounds()}),c=u,d=T(j(this.attachment),{width:o,height:r}),f=T(j(n),c),p=T(this.offset,{width:o,height:r}),g=T(this.targetOffset,c);d=E(d,p),f=E(f,g);for(var m=u.left+f.left-d.left,v=u.top+f.top-d.top,y=0;y<A.modules.length;++y){var _=A.modules[y],C=_.position.call(this,{left:m,top:v,targetAttachment:n,targetPos:u,elementPos:i,offset:d,targetOffset:f,manualOffset:p,manualTargetOffset:g,scrollbarSize:S,attachment:this.attachment});if(C===!1)return!1;"undefined"!=typeof C&&"object"==typeof C&&(v=C.top,m=C.left)}var b={page:{top:v,left:m},viewport:{top:v-pageYOffset,bottom:pageYOffset-v-r+innerHeight,left:m-pageXOffset,right:pageXOffset-m-o+innerWidth}},I=this.target.ownerDocument,w=I.defaultView,S=void 0;return w.innerHeight>I.documentElement.clientHeight&&(S=this.cache("scrollbar-size",h),b.viewport.bottom-=S.height),w.innerWidth>I.documentElement.clientWidth&&(S=this.cache("scrollbar-size",h),b.viewport.right-=S.width),["","static"].indexOf(I.body.style.position)!==-1&&["","static"].indexOf(I.body.parentElement.style.position)!==-1||(b.page.bottom=I.body.scrollHeight-v-r,b.page.right=I.body.scrollWidth-m-o),"undefined"!=typeof this.options.optimizations&&this.options.optimizations.moveElement!==!1&&"undefined"==typeof this.targetModifier&&!function(){var e=t.cache("target-offsetparent",function(){return l(t.target)}),n=t.cache("target-offsetparent-bounds",function(){return a(e)}),i=getComputedStyle(e),o=n,r={};if(["Top","Left","Bottom","Right"].forEach(function(t){r[t.toLowerCase()]=parseFloat(i["border"+t+"Width"])}),n.right=I.body.scrollWidth-n.left-o.width+r.right,n.bottom=I.body.scrollHeight-n.top-o.height+r.bottom,b.page.top>=n.top+r.top&&b.page.bottom>=n.bottom&&b.page.left>=n.left+r.left&&b.page.right>=n.right){var s=e.scrollTop,h=e.scrollLeft;b.offset={top:b.page.top-n.top+s-r.top,left:b.page.left-n.left+h-r.left}}}(),this.move(b),this.history.unshift(b),this.history.length>3&&this.history.pop(),e&&P(),!0}}},{key:"move",value:function(t){var e=this;if("undefined"!=typeof this.element.parentNode){var n={};for(var i in t){n[i]={};for(var o in t[i]){for(var r=!1,s=0;s<this.history.length;++s){var a=this.history[s];if("undefined"!=typeof a[i]&&!y(a[i][o],t[i][o])){r=!0;break}}r||(n[i][o]=!0)}}var h={top:"",left:"",right:"",bottom:""},c=function(t,n){var i="undefined"!=typeof e.options.optimizations,o=i?e.options.optimizations.gpu:null;if(o!==!1){var r=void 0,s=void 0;if(t.top?(h.top=0,r=n.top):(h.bottom=0,r=-n.bottom),t.left?(h.left=0,s=n.left):(h.right=0,s=-n.right),window.matchMedia){var a=window.matchMedia("only screen and (min-resolution: 1.3dppx)").matches||window.matchMedia("only screen and (-webkit-min-device-pixel-ratio: 1.3)").matches;a||(s=Math.round(s),r=Math.round(r))}h[M]="translateX("+s+"px) translateY("+r+"px)","msTransform"!==M&&(h[M]+=" translateZ(0)")}else t.top?h.top=n.top+"px":h.bottom=n.bottom+"px",t.left?h.left=n.left+"px":h.right=n.right+"px"},d=!1;if((n.page.top||n.page.bottom)&&(n.page.left||n.page.right)?(h.position="absolute",c(n.page,t.page)):(n.viewport.top||n.viewport.bottom)&&(n.viewport.left||n.viewport.right)?(h.position="fixed",c(n.viewport,t.viewport)):"undefined"!=typeof n.offset&&n.offset.top&&n.offset.left?!function(){h.position="absolute";var i=e.cache("target-offsetparent",function(){return l(e.target)});l(e.element)!==i&&L(function(){e.element.parentNode.removeChild(e.element),i.appendChild(e.element)}),c(n.offset,t.offset),d=!0}():(h.position="absolute",c({top:!0,left:!0},t.page)),!d){for(var f=!0,p=this.element.parentNode;p&&1===p.nodeType&&"BODY"!==p.tagName;){if("static"!==getComputedStyle(p).position){f=!1;break}p=p.parentNode}f||(this.element.parentNode.removeChild(this.element),this.element.ownerDocument.body.appendChild(this.element))}var g={},m=!1;for(var o in h){var v=h[o],_=this.element.style[o];_!==v&&(m=!0,g[o]=v)}m&&L(function(){u(e.element.style,g),e.trigger("repositioned")})}}}]),e}(R);Q.modules=[],A.position=V;var Y=u(Q,A),k=function(){function t(t,e){var n=[],i=!0,o=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(l){o=!0,r=l}finally{try{!i&&a["return"]&&a["return"]()}finally{if(o)throw r}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),H=A.Utils,a=H.getBounds,u=H.extend,m=H.updateClasses,L=H.defer,z=["left","top","right","bottom"];A.modules.push({position:function(t){var e=this,n=t.top,i=t.left,o=t.targetAttachment;if(!this.options.constraints)return!0;var r=this.cache("element-bounds",function(){return a(e.element)}),s=r.height,l=r.width;if(0===l&&0===s&&"undefined"!=typeof this.lastSize){var h=this.lastSize;l=h.width,s=h.height}var c=this.cache("target-bounds",function(){return e.getTargetBounds()}),d=c.height,f=c.width,p=[this.getClass("pinned"),this.getClass("out-of-bounds")];this.options.constraints.forEach(function(t){var e=t.outOfBoundsClass,n=t.pinnedClass;e&&p.push(e),n&&p.push(n)}),p.forEach(function(t){["left","top","right","bottom"].forEach(function(e){p.push(t+"-"+e)})});var g=[],v=u({},o),y=u({},this.attachment);return this.options.constraints.forEach(function(t){var r=t.to,a=t.attachment,h=t.pin;"undefined"==typeof a&&(a="");var u=void 0,c=void 0;if(a.indexOf(" ")>=0){var p=a.split(" "),m=k(p,2);c=m[0],u=m[1]}else u=c=a;var _=C(e,r);"target"!==c&&"both"!==c||(n<_[1]&&"top"===v.top&&(n+=d,v.top="bottom"),n+s>_[3]&&"bottom"===v.top&&(n-=d,v.top="top")),"together"===c&&("top"===v.top&&("bottom"===y.top&&n<_[1]?(n+=d,v.top="bottom",n+=s,y.top="top"):"top"===y.top&&n+s>_[3]&&n-(s-d)>=_[1]&&(n-=s-d,v.top="bottom",y.top="bottom")),"bottom"===v.top&&("top"===y.top&&n+s>_[3]?(n-=d,v.top="top",n-=s,y.top="bottom"):"bottom"===y.top&&n<_[1]&&n+(2*s-d)<=_[3]&&(n+=s-d,v.top="top",y.top="top")),"middle"===v.top&&(n+s>_[3]&&"top"===y.top?(n-=s,y.top="bottom"):n<_[1]&&"bottom"===y.top&&(n+=s,y.top="top"))),"target"!==u&&"both"!==u||(i<_[0]&&"left"===v.left&&(i+=f,v.left="right"),i+l>_[2]&&"right"===v.left&&(i-=f,v.left="left")),"together"===u&&(i<_[0]&&"left"===v.left?"right"===y.left?(i+=f,v.left="right",i+=l,y.left="left"):"left"===y.left&&(i+=f,v.left="right",i-=l,y.left="right"):i+l>_[2]&&"right"===v.left?"left"===y.left?(i-=f,v.left="left",i-=l,y.left="right"):"right"===y.left&&(i-=f,v.left="left",i+=l,y.left="left"):"center"===v.left&&(i+l>_[2]&&"left"===y.left?(i-=l,y.left="right"):i<_[0]&&"right"===y.left&&(i+=l,y.left="left"))),"element"!==c&&"both"!==c||(n<_[1]&&"bottom"===y.top&&(n+=s,y.top="top"),n+s>_[3]&&"top"===y.top&&(n-=s,y.top="bottom")),"element"!==u&&"both"!==u||(i<_[0]&&("right"===y.left?(i+=l,y.left="left"):"center"===y.left&&(i+=l/2,y.left="left")),i+l>_[2]&&("left"===y.left?(i-=l,y.left="right"):"center"===y.left&&(i-=l/2,y.left="right"))),"string"==typeof h?h=h.split(",").map(function(t){return t.trim()}):h===!0&&(h=["top","left","right","bottom"]),h=h||[];var E=[],T=[];n<_[1]&&(h.indexOf("top")>=0?(n=_[1],E.push("top")):T.push("top")),n+s>_[3]&&(h.indexOf("bottom")>=0?(n=_[3]-s,E.push("bottom")):T.push("bottom")),i<_[0]&&(h.indexOf("left")>=0?(i=_[0],E.push("left")):T.push("left")),i+l>_[2]&&(h.indexOf("right")>=0?(i=_[2]-l,E.push("right")):T.push("right")),E.length&&!function(){var t=void 0;t="undefined"!=typeof e.options.pinnedClass?e.options.pinnedClass:e.getClass("pinned"),g.push(t),E.forEach(function(e){g.push(t+"-"+e)})}(),T.length&&!function(){var t=void 0;t="undefined"!=typeof e.options.outOfBoundsClass?e.options.outOfBoundsClass:e.getClass("out-of-bounds"),g.push(t),T.forEach(function(e){g.push(t+"-"+e)})}(),(E.indexOf("left")>=0||E.indexOf("right")>=0)&&(y.left=v.left=!1),(E.indexOf("top")>=0||E.indexOf("bottom")>=0)&&(y.top=v.top=!1),v.top===o.top&&v.left===o.left&&y.top===e.attachment.top&&y.left===e.attachment.left||(e.updateAttachClasses(y,v),e.trigger("update",{attachment:y,targetAttachment:v}))}),L(function(){e.options.addTargetClasses!==!1&&m(e.target,g,p),m(e.element,g,p)}),{top:n,left:i}}});var H=A.Utils,a=H.getBounds,m=H.updateClasses,L=H.defer;A.modules.push({position:function(t){var e=this,n=t.top,i=t.left,o=this.cache("element-bounds",function(){return a(e.element)}),r=o.height,s=o.width,l=this.getTargetBounds(),h=n+r,u=i+s,c=[];n<=l.bottom&&h>=l.top&&["left","right"].forEach(function(t){var e=l[t];e!==i&&e!==u||c.push(t)}),i<=l.right&&u>=l.left&&["top","bottom"].forEach(function(t){var e=l[t];e!==n&&e!==h||c.push(t)});var d=[],f=[],p=["left","top","right","bottom"];return d.push(this.getClass("abutted")),p.forEach(function(t){d.push(e.getClass("abutted")+"-"+t)}),c.length&&f.push(this.getClass("abutted")),c.forEach(function(t){f.push(e.getClass("abutted")+"-"+t)}),L(function(){e.options.addTargetClasses!==!1&&m(e.target,f,d),m(e.element,f,d)}),!0}});var k=function(){function t(t,e){var n=[],i=!0,o=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(l){o=!0,r=l}finally{try{!i&&a["return"]&&a["return"]()}finally{if(o)throw r}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();return A.modules.push({position:function(t){var e=t.top,n=t.left;if(this.options.shift){var i=this.options.shift;"function"==typeof this.options.shift&&(i=this.options.shift.call(this,{top:e,left:n}));var o=void 0,r=void 0;if("string"==typeof i){i=i.split(" "),i[1]=i[1]||i[0];var s=i,a=k(s,2);o=a[0],r=a[1],o=parseFloat(o,10),r=parseFloat(r,10)}else o=i.top,r=i.left;return e+=o,n+=r,{top:e,left:n}}}}),Y})},function(t,e){/*!
	 * Bootstrap v4.0.0-alpha.5 (https://getbootstrap.com)
	 * Copyright 2011-2016 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
	 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
	 */
if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(t){var e=t.fn.jquery.split(" ")[0].split(".");if(e[0]<2&&e[1]<9||1==e[0]&&9==e[1]&&e[2]<1||e[0]>=4)throw new Error("Bootstrap's JavaScript requires at least jQuery v1.9.1 but less than v4.0.0")}(jQuery),+function(){function t(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function e(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(t){function e(t){return{}.toString.call(t).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function n(t){return(t[0]||t).nodeType}function i(){return{bindType:a.end,delegateType:a.end,handle:function(e){if(t(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}}}function o(){if(window.QUnit)return!1;var t=document.createElement("bootstrap");for(var e in h)if(void 0!==t.style[e])return{end:h[e]};return!1}function r(e){var n=this,i=!1;return t(this).one(u.TRANSITION_END,function(){i=!0}),setTimeout(function(){i||u.triggerTransitionEnd(n)},e),this}function s(){a=o(),t.fn.emulateTransitionEnd=r,u.supportsTransitionEnd()&&(t.event.special[u.TRANSITION_END]=i())}var a=!1,l=1e6,h={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},u={TRANSITION_END:"bsTransitionEnd",getUID:function(t){do t+=~~(Math.random()*l);while(document.getElementById(t));return t},getSelectorFromElement:function(t){var e=t.getAttribute("data-target");return e||(e=t.getAttribute("href")||"",e=/^#[a-z]/i.test(e)?e:null),e},reflow:function(t){new Function("bs","return bs")(t.offsetHeight)},triggerTransitionEnd:function(e){t(e).trigger(a.end)},supportsTransitionEnd:function(){return Boolean(a)},typeCheckConfig:function(t,i,o){for(var r in o)if(o.hasOwnProperty(r)){var s=o[r],a=i[r],l=void 0;if(l=a&&n(a)?"element":e(a),!new RegExp(s).test(l))throw new Error(t.toUpperCase()+": "+('Option "'+r+'" provided type "'+l+'" ')+('but expected type "'+s+'".'))}}};return s(),u}(jQuery),s=(function(t){var e="alert",i="4.0.0-alpha.5",s="bs.alert",a="."+s,l=".data-api",h=t.fn[e],u=150,c={DISMISS:'[data-dismiss="alert"]'},d={CLOSE:"close"+a,CLOSED:"closed"+a,CLICK_DATA_API:"click"+a+l},f={ALERT:"alert",FADE:"fade",IN:"in"},p=function(){function e(t){n(this,e),this._element=t}return e.prototype.close=function(t){t=t||this._element;var e=this._getRootElement(t),n=this._triggerCloseEvent(e);n.isDefaultPrevented()||this._removeElement(e)},e.prototype.dispose=function(){t.removeData(this._element,s),this._element=null},e.prototype._getRootElement=function(e){var n=r.getSelectorFromElement(e),i=!1;return n&&(i=t(n)[0]),i||(i=t(e).closest("."+f.ALERT)[0]),i},e.prototype._triggerCloseEvent=function(e){var n=t.Event(d.CLOSE);return t(e).trigger(n),n},e.prototype._removeElement=function(e){return t(e).removeClass(f.IN),r.supportsTransitionEnd()&&t(e).hasClass(f.FADE)?void t(e).one(r.TRANSITION_END,t.proxy(this._destroyElement,this,e)).emulateTransitionEnd(u):void this._destroyElement(e)},e.prototype._destroyElement=function(e){t(e).detach().trigger(d.CLOSED).remove()},e._jQueryInterface=function(n){return this.each(function(){var i=t(this),o=i.data(s);o||(o=new e(this),i.data(s,o)),"close"===n&&o[n](this)})},e._handleDismiss=function(t){return function(e){e&&e.preventDefault(),t.close(this)}},o(e,null,[{key:"VERSION",get:function(){return i}}]),e}();return t(document).on(d.CLICK_DATA_API,c.DISMISS,p._handleDismiss(new p)),t.fn[e]=p._jQueryInterface,t.fn[e].Constructor=p,t.fn[e].noConflict=function(){return t.fn[e]=h,p._jQueryInterface},p}(jQuery),function(t){var e="button",i="4.0.0-alpha.5",r="bs.button",s="."+r,a=".data-api",l=t.fn[e],h={ACTIVE:"active",BUTTON:"btn",FOCUS:"focus"},u={DATA_TOGGLE_CARROT:'[data-toggle^="button"]',DATA_TOGGLE:'[data-toggle="buttons"]',INPUT:"input",ACTIVE:".active",BUTTON:".btn"},c={CLICK_DATA_API:"click"+s+a,FOCUS_BLUR_DATA_API:"focus"+s+a+" "+("blur"+s+a)},d=function(){function e(t){n(this,e),this._element=t}return e.prototype.toggle=function(){var e=!0,n=t(this._element).closest(u.DATA_TOGGLE)[0];if(n){var i=t(this._element).find(u.INPUT)[0];if(i){if("radio"===i.type)if(i.checked&&t(this._element).hasClass(h.ACTIVE))e=!1;else{var o=t(n).find(u.ACTIVE)[0];o&&t(o).removeClass(h.ACTIVE)}e&&(i.checked=!t(this._element).hasClass(h.ACTIVE),t(this._element).trigger("change")),i.focus()}}else this._element.setAttribute("aria-pressed",!t(this._element).hasClass(h.ACTIVE));e&&t(this._element).toggleClass(h.ACTIVE)},e.prototype.dispose=function(){t.removeData(this._element,r),this._element=null},e._jQueryInterface=function(n){return this.each(function(){var i=t(this).data(r);i||(i=new e(this),t(this).data(r,i)),"toggle"===n&&i[n]()})},o(e,null,[{key:"VERSION",get:function(){return i}}]),e}();return t(document).on(c.CLICK_DATA_API,u.DATA_TOGGLE_CARROT,function(e){e.preventDefault();var n=e.target;t(n).hasClass(h.BUTTON)||(n=t(n).closest(u.BUTTON)),d._jQueryInterface.call(t(n),"toggle")}).on(c.FOCUS_BLUR_DATA_API,u.DATA_TOGGLE_CARROT,function(e){var n=t(e.target).closest(u.BUTTON)[0];t(n).toggleClass(h.FOCUS,/^focus(in)?$/.test(e.type))}),t.fn[e]=d._jQueryInterface,t.fn[e].Constructor=d,t.fn[e].noConflict=function(){return t.fn[e]=l,d._jQueryInterface},d}(jQuery),function(t){var e="carousel",s="4.0.0-alpha.5",a="bs.carousel",l="."+a,h=".data-api",u=t.fn[e],c=600,d=37,f=39,p={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0},g={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean"},m={NEXT:"next",PREVIOUS:"prev"},v={SLIDE:"slide"+l,SLID:"slid"+l,KEYDOWN:"keydown"+l,MOUSEENTER:"mouseenter"+l,MOUSELEAVE:"mouseleave"+l,LOAD_DATA_API:"load"+l+h,CLICK_DATA_API:"click"+l+h},y={CAROUSEL:"carousel",ACTIVE:"active",SLIDE:"slide",RIGHT:"right",LEFT:"left",ITEM:"carousel-item"},_={ACTIVE:".active",ACTIVE_ITEM:".active.carousel-item",ITEM:".carousel-item",NEXT_PREV:".next, .prev",INDICATORS:".carousel-indicators",DATA_SLIDE:"[data-slide], [data-slide-to]",DATA_RIDE:'[data-ride="carousel"]'},E=function(){function h(e,i){n(this,h),this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this._config=this._getConfig(i),this._element=t(e)[0],this._indicatorsElement=t(this._element).find(_.INDICATORS)[0],this._addEventListeners()}return h.prototype.next=function(){this._isSliding||this._slide(m.NEXT)},h.prototype.nextWhenVisible=function(){document.hidden||this.next()},h.prototype.prev=function(){this._isSliding||this._slide(m.PREVIOUS)},h.prototype.pause=function(e){e||(this._isPaused=!0),t(this._element).find(_.NEXT_PREV)[0]&&r.supportsTransitionEnd()&&(r.triggerTransitionEnd(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null},h.prototype.cycle=function(e){e||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config.interval&&!this._isPaused&&(this._interval=setInterval(t.proxy(document.visibilityState?this.nextWhenVisible:this.next,this),this._config.interval))},h.prototype.to=function(e){var n=this;this._activeElement=t(this._element).find(_.ACTIVE_ITEM)[0];var i=this._getItemIndex(this._activeElement);if(!(e>this._items.length-1||e<0)){if(this._isSliding)return void t(this._element).one(v.SLID,function(){return n.to(e)});if(i===e)return this.pause(),void this.cycle();var o=e>i?m.NEXT:m.PREVIOUS;this._slide(o,this._items[e])}},h.prototype.dispose=function(){t(this._element).off(l),t.removeData(this._element,a),this._items=null,this._config=null,this._element=null,this._interval=null,this._isPaused=null,this._isSliding=null,this._activeElement=null,this._indicatorsElement=null},h.prototype._getConfig=function(n){return n=t.extend({},p,n),r.typeCheckConfig(e,n,g),n},h.prototype._addEventListeners=function(){this._config.keyboard&&t(this._element).on(v.KEYDOWN,t.proxy(this._keydown,this)),"hover"!==this._config.pause||"ontouchstart"in document.documentElement||t(this._element).on(v.MOUSEENTER,t.proxy(this.pause,this)).on(v.MOUSELEAVE,t.proxy(this.cycle,this))},h.prototype._keydown=function(t){if(t.preventDefault(),!/input|textarea/i.test(t.target.tagName))switch(t.which){case d:this.prev();break;case f:this.next();break;default:return}},h.prototype._getItemIndex=function(e){return this._items=t.makeArray(t(e).parent().find(_.ITEM)),this._items.indexOf(e)},h.prototype._getItemByDirection=function(t,e){var n=t===m.NEXT,i=t===m.PREVIOUS,o=this._getItemIndex(e),r=this._items.length-1,s=i&&0===o||n&&o===r;if(s&&!this._config.wrap)return e;var a=t===m.PREVIOUS?-1:1,l=(o+a)%this._items.length;return l===-1?this._items[this._items.length-1]:this._items[l]},h.prototype._triggerSlideEvent=function(e,n){var i=t.Event(v.SLIDE,{relatedTarget:e,direction:n});return t(this._element).trigger(i),i},h.prototype._setActiveIndicatorElement=function(e){if(this._indicatorsElement){t(this._indicatorsElement).find(_.ACTIVE).removeClass(y.ACTIVE);var n=this._indicatorsElement.children[this._getItemIndex(e)];n&&t(n).addClass(y.ACTIVE)}},h.prototype._slide=function(e,n){var i=this,o=t(this._element).find(_.ACTIVE_ITEM)[0],s=n||o&&this._getItemByDirection(e,o),a=Boolean(this._interval),l=e===m.NEXT?y.LEFT:y.RIGHT;if(s&&t(s).hasClass(y.ACTIVE))return void(this._isSliding=!1);var h=this._triggerSlideEvent(s,l);if(!h.isDefaultPrevented()&&o&&s){this._isSliding=!0,a&&this.pause(),this._setActiveIndicatorElement(s);var u=t.Event(v.SLID,{relatedTarget:s,direction:l});r.supportsTransitionEnd()&&t(this._element).hasClass(y.SLIDE)?(t(s).addClass(e),r.reflow(s),t(o).addClass(l),t(s).addClass(l),t(o).one(r.TRANSITION_END,function(){t(s).removeClass(l).removeClass(e),t(s).addClass(y.ACTIVE),t(o).removeClass(y.ACTIVE).removeClass(e).removeClass(l),i._isSliding=!1,setTimeout(function(){return t(i._element).trigger(u)},0)}).emulateTransitionEnd(c)):(t(o).removeClass(y.ACTIVE),t(s).addClass(y.ACTIVE),this._isSliding=!1,t(this._element).trigger(u)),a&&this.cycle()}},h._jQueryInterface=function(e){return this.each(function(){var n=t(this).data(a),o=t.extend({},p,t(this).data());"object"===("undefined"==typeof e?"undefined":i(e))&&t.extend(o,e);var r="string"==typeof e?e:o.slide;if(n||(n=new h(this,o),t(this).data(a,n)),"number"==typeof e)n.to(e);else if("string"==typeof r){if(void 0===n[r])throw new Error('No method named "'+r+'"');n[r]()}else o.interval&&(n.pause(),n.cycle())})},h._dataApiClickHandler=function(e){var n=r.getSelectorFromElement(this);if(n){var i=t(n)[0];if(i&&t(i).hasClass(y.CAROUSEL)){var o=t.extend({},t(i).data(),t(this).data()),s=this.getAttribute("data-slide-to");s&&(o.interval=!1),h._jQueryInterface.call(t(i),o),s&&t(i).data(a).to(s),e.preventDefault()}}},o(h,null,[{key:"VERSION",get:function(){return s}},{key:"Default",get:function(){return p}}]),h}();return t(document).on(v.CLICK_DATA_API,_.DATA_SLIDE,E._dataApiClickHandler),t(window).on(v.LOAD_DATA_API,function(){t(_.DATA_RIDE).each(function(){var e=t(this);E._jQueryInterface.call(e,e.data())})}),t.fn[e]=E._jQueryInterface,t.fn[e].Constructor=E,t.fn[e].noConflict=function(){return t.fn[e]=u,E._jQueryInterface},E}(jQuery),function(t){var e="collapse",s="4.0.0-alpha.5",a="bs.collapse",l="."+a,h=".data-api",u=t.fn[e],c=600,d={toggle:!0,parent:""},f={toggle:"boolean",parent:"string"},p={SHOW:"show"+l,SHOWN:"shown"+l,HIDE:"hide"+l,HIDDEN:"hidden"+l,CLICK_DATA_API:"click"+l+h},g={IN:"in",COLLAPSE:"collapse",COLLAPSING:"collapsing",COLLAPSED:"collapsed"},m={WIDTH:"width",HEIGHT:"height"},v={ACTIVES:".card > .in, .card > .collapsing",DATA_TOGGLE:'[data-toggle="collapse"]'},y=function(){function l(e,i){n(this,l),this._isTransitioning=!1,this._element=e,this._config=this._getConfig(i),this._triggerArray=t.makeArray(t('[data-toggle="collapse"][href="#'+e.id+'"],'+('[data-toggle="collapse"][data-target="#'+e.id+'"]'))),this._parent=this._config.parent?this._getParent():null,this._config.parent||this._addAriaAndCollapsedClass(this._element,this._triggerArray),this._config.toggle&&this.toggle()}return l.prototype.toggle=function(){t(this._element).hasClass(g.IN)?this.hide():this.show()},l.prototype.show=function(){var e=this;if(!this._isTransitioning&&!t(this._element).hasClass(g.IN)){var n=void 0,i=void 0;if(this._parent&&(n=t.makeArray(t(v.ACTIVES)),n.length||(n=null)),!(n&&(i=t(n).data(a),i&&i._isTransitioning))){var o=t.Event(p.SHOW);if(t(this._element).trigger(o),!o.isDefaultPrevented()){n&&(l._jQueryInterface.call(t(n),"hide"),i||t(n).data(a,null));var s=this._getDimension();t(this._element).removeClass(g.COLLAPSE).addClass(g.COLLAPSING),this._element.style[s]=0,this._element.setAttribute("aria-expanded",!0),this._triggerArray.length&&t(this._triggerArray).removeClass(g.COLLAPSED).attr("aria-expanded",!0),this.setTransitioning(!0);var h=function(){t(e._element).removeClass(g.COLLAPSING).addClass(g.COLLAPSE).addClass(g.IN),e._element.style[s]="",e.setTransitioning(!1),t(e._element).trigger(p.SHOWN)};if(!r.supportsTransitionEnd())return void h();var u=s[0].toUpperCase()+s.slice(1),d="scroll"+u;t(this._element).one(r.TRANSITION_END,h).emulateTransitionEnd(c),this._element.style[s]=this._element[d]+"px"}}}},l.prototype.hide=function(){var e=this;if(!this._isTransitioning&&t(this._element).hasClass(g.IN)){var n=t.Event(p.HIDE);if(t(this._element).trigger(n),!n.isDefaultPrevented()){var i=this._getDimension(),o=i===m.WIDTH?"offsetWidth":"offsetHeight";this._element.style[i]=this._element[o]+"px",r.reflow(this._element),t(this._element).addClass(g.COLLAPSING).removeClass(g.COLLAPSE).removeClass(g.IN),this._element.setAttribute("aria-expanded",!1),this._triggerArray.length&&t(this._triggerArray).addClass(g.COLLAPSED).attr("aria-expanded",!1),this.setTransitioning(!0);var s=function(){e.setTransitioning(!1),t(e._element).removeClass(g.COLLAPSING).addClass(g.COLLAPSE).trigger(p.HIDDEN)};return this._element.style[i]="",r.supportsTransitionEnd()?void t(this._element).one(r.TRANSITION_END,s).emulateTransitionEnd(c):void s()}}},l.prototype.setTransitioning=function(t){this._isTransitioning=t},l.prototype.dispose=function(){t.removeData(this._element,a),this._config=null,this._parent=null,this._element=null,this._triggerArray=null,this._isTransitioning=null},l.prototype._getConfig=function(n){return n=t.extend({},d,n),n.toggle=Boolean(n.toggle),r.typeCheckConfig(e,n,f),n},l.prototype._getDimension=function(){var e=t(this._element).hasClass(m.WIDTH);return e?m.WIDTH:m.HEIGHT},l.prototype._getParent=function(){var e=this,n=t(this._config.parent)[0],i='[data-toggle="collapse"][data-parent="'+this._config.parent+'"]';return t(n).find(i).each(function(t,n){e._addAriaAndCollapsedClass(l._getTargetFromElement(n),[n])}),n},l.prototype._addAriaAndCollapsedClass=function(e,n){if(e){var i=t(e).hasClass(g.IN);e.setAttribute("aria-expanded",i),n.length&&t(n).toggleClass(g.COLLAPSED,!i).attr("aria-expanded",i)}},l._getTargetFromElement=function(e){var n=r.getSelectorFromElement(e);return n?t(n)[0]:null},l._jQueryInterface=function(e){return this.each(function(){var n=t(this),o=n.data(a),r=t.extend({},d,n.data(),"object"===("undefined"==typeof e?"undefined":i(e))&&e);if(!o&&r.toggle&&/show|hide/.test(e)&&(r.toggle=!1),o||(o=new l(this,r),n.data(a,o)),"string"==typeof e){if(void 0===o[e])throw new Error('No method named "'+e+'"');o[e]()}})},o(l,null,[{key:"VERSION",get:function(){return s}},{key:"Default",get:function(){return d}}]),l}();return t(document).on(p.CLICK_DATA_API,v.DATA_TOGGLE,function(e){e.preventDefault();var n=y._getTargetFromElement(this),i=t(n).data(a),o=i?"toggle":t(this).data();y._jQueryInterface.call(t(n),o)}),t.fn[e]=y._jQueryInterface,t.fn[e].Constructor=y,t.fn[e].noConflict=function(){return t.fn[e]=u,y._jQueryInterface},y}(jQuery),function(t){var e="dropdown",i="4.0.0-alpha.5",s="bs.dropdown",a="."+s,l=".data-api",h=t.fn[e],u=27,c=38,d=40,f=3,p={HIDE:"hide"+a,HIDDEN:"hidden"+a,SHOW:"show"+a,SHOWN:"shown"+a,CLICK:"click"+a,CLICK_DATA_API:"click"+a+l,KEYDOWN_DATA_API:"keydown"+a+l},g={BACKDROP:"dropdown-backdrop",DISABLED:"disabled",OPEN:"open"},m={BACKDROP:".dropdown-backdrop",DATA_TOGGLE:'[data-toggle="dropdown"]',FORM_CHILD:".dropdown form",ROLE_MENU:'[role="menu"]',ROLE_LISTBOX:'[role="listbox"]',NAVBAR_NAV:".navbar-nav",VISIBLE_ITEMS:'[role="menu"] li:not(.disabled) a, [role="listbox"] li:not(.disabled) a'},v=function(){function e(t){n(this,e),this._element=t,this._addEventListeners()}return e.prototype.toggle=function(){if(this.disabled||t(this).hasClass(g.DISABLED))return!1;var n=e._getParentFromElement(this),i=t(n).hasClass(g.OPEN);if(e._clearMenus(),i)return!1;if("ontouchstart"in document.documentElement&&!t(n).closest(m.NAVBAR_NAV).length){var o=document.createElement("div");o.className=g.BACKDROP,t(o).insertBefore(this),t(o).on("click",e._clearMenus)}var r={relatedTarget:this},s=t.Event(p.SHOW,r);return t(n).trigger(s),!s.isDefaultPrevented()&&(this.focus(),this.setAttribute("aria-expanded","true"),t(n).toggleClass(g.OPEN),t(n).trigger(t.Event(p.SHOWN,r)),!1)},e.prototype.dispose=function(){t.removeData(this._element,s),t(this._element).off(a),this._element=null},e.prototype._addEventListeners=function(){t(this._element).on(p.CLICK,this.toggle)},e._jQueryInterface=function(n){return this.each(function(){var i=t(this).data(s);if(i||t(this).data(s,i=new e(this)),"string"==typeof n){if(void 0===i[n])throw new Error('No method named "'+n+'"');i[n].call(this)}})},e._clearMenus=function(n){if(!n||n.which!==f){var i=t(m.BACKDROP)[0];i&&i.parentNode.removeChild(i);for(var o=t.makeArray(t(m.DATA_TOGGLE)),r=0;r<o.length;r++){var s=e._getParentFromElement(o[r]),a={relatedTarget:o[r]};if(t(s).hasClass(g.OPEN)&&!(n&&"click"===n.type&&/input|textarea/i.test(n.target.tagName)&&t.contains(s,n.target))){var l=t.Event(p.HIDE,a);t(s).trigger(l),l.isDefaultPrevented()||(o[r].setAttribute("aria-expanded","false"),t(s).removeClass(g.OPEN).trigger(t.Event(p.HIDDEN,a)))}}}},e._getParentFromElement=function(e){var n=void 0,i=r.getSelectorFromElement(e);return i&&(n=t(i)[0]),n||e.parentNode},e._dataApiKeydownHandler=function(n){if(/(38|40|27|32)/.test(n.which)&&!/input|textarea/i.test(n.target.tagName)&&(n.preventDefault(),n.stopPropagation(),!this.disabled&&!t(this).hasClass(g.DISABLED))){var i=e._getParentFromElement(this),o=t(i).hasClass(g.OPEN);if(!o&&n.which!==u||o&&n.which===u){if(n.which===u){var r=t(i).find(m.DATA_TOGGLE)[0];t(r).trigger("focus")}return void t(this).trigger("click")}var s=t.makeArray(t(m.VISIBLE_ITEMS));if(s=s.filter(function(t){return t.offsetWidth||t.offsetHeight}),s.length){var a=s.indexOf(n.target);n.which===c&&a>0&&a--,n.which===d&&a<s.length-1&&a++,a<0&&(a=0),s[a].focus()}}},o(e,null,[{key:"VERSION",get:function(){return i}}]),e}();return t(document).on(p.KEYDOWN_DATA_API,m.DATA_TOGGLE,v._dataApiKeydownHandler).on(p.KEYDOWN_DATA_API,m.ROLE_MENU,v._dataApiKeydownHandler).on(p.KEYDOWN_DATA_API,m.ROLE_LISTBOX,v._dataApiKeydownHandler).on(p.CLICK_DATA_API,v._clearMenus).on(p.CLICK_DATA_API,m.DATA_TOGGLE,v.prototype.toggle).on(p.CLICK_DATA_API,m.FORM_CHILD,function(t){t.stopPropagation()}),t.fn[e]=v._jQueryInterface,t.fn[e].Constructor=v,t.fn[e].noConflict=function(){return t.fn[e]=h,v._jQueryInterface},v}(jQuery),function(t){var e="modal",s="4.0.0-alpha.5",a="bs.modal",l="."+a,h=".data-api",u=t.fn[e],c=300,d=150,f=27,p={backdrop:!0,keyboard:!0,focus:!0,show:!0},g={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean",show:"boolean"},m={HIDE:"hide"+l,HIDDEN:"hidden"+l,SHOW:"show"+l,SHOWN:"shown"+l,FOCUSIN:"focusin"+l,RESIZE:"resize"+l,CLICK_DISMISS:"click.dismiss"+l,KEYDOWN_DISMISS:"keydown.dismiss"+l,MOUSEUP_DISMISS:"mouseup.dismiss"+l,MOUSEDOWN_DISMISS:"mousedown.dismiss"+l,CLICK_DATA_API:"click"+l+h},v={SCROLLBAR_MEASURER:"modal-scrollbar-measure",BACKDROP:"modal-backdrop",OPEN:"modal-open",FADE:"fade",IN:"in"},y={DIALOG:".modal-dialog",DATA_TOGGLE:'[data-toggle="modal"]',DATA_DISMISS:'[data-dismiss="modal"]',FIXED_CONTENT:".navbar-fixed-top, .navbar-fixed-bottom, .is-fixed"},_=function(){function h(e,i){n(this,h),this._config=this._getConfig(i),this._element=e,this._dialog=t(e).find(y.DIALOG)[0],this._backdrop=null,this._isShown=!1,this._isBodyOverflowing=!1,this._ignoreBackdropClick=!1,this._originalBodyPadding=0,this._scrollbarWidth=0}return h.prototype.toggle=function(t){return this._isShown?this.hide():this.show(t)},h.prototype.show=function(e){var n=this,i=t.Event(m.SHOW,{relatedTarget:e});t(this._element).trigger(i),this._isShown||i.isDefaultPrevented()||(this._isShown=!0,this._checkScrollbar(),this._setScrollbar(),t(document.body).addClass(v.OPEN),this._setEscapeEvent(),this._setResizeEvent(),t(this._element).on(m.CLICK_DISMISS,y.DATA_DISMISS,t.proxy(this.hide,this)),t(this._dialog).on(m.MOUSEDOWN_DISMISS,function(){t(n._element).one(m.MOUSEUP_DISMISS,function(e){t(e.target).is(n._element)&&(n._ignoreBackdropClick=!0)})}),this._showBackdrop(t.proxy(this._showElement,this,e)))},h.prototype.hide=function(e){e&&e.preventDefault();var n=t.Event(m.HIDE);t(this._element).trigger(n),this._isShown&&!n.isDefaultPrevented()&&(this._isShown=!1,this._setEscapeEvent(),this._setResizeEvent(),t(document).off(m.FOCUSIN),t(this._element).removeClass(v.IN),t(this._element).off(m.CLICK_DISMISS),t(this._dialog).off(m.MOUSEDOWN_DISMISS),r.supportsTransitionEnd()&&t(this._element).hasClass(v.FADE)?t(this._element).one(r.TRANSITION_END,t.proxy(this._hideModal,this)).emulateTransitionEnd(c):this._hideModal())},h.prototype.dispose=function(){t.removeData(this._element,a),t(window).off(l),t(document).off(l),t(this._element).off(l),t(this._backdrop).off(l),this._config=null,this._element=null,this._dialog=null,this._backdrop=null,this._isShown=null,this._isBodyOverflowing=null,this._ignoreBackdropClick=null,this._originalBodyPadding=null,this._scrollbarWidth=null},h.prototype._getConfig=function(n){return n=t.extend({},p,n),r.typeCheckConfig(e,n,g),n},h.prototype._showElement=function(e){var n=this,i=r.supportsTransitionEnd()&&t(this._element).hasClass(v.FADE);this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.appendChild(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.scrollTop=0,i&&r.reflow(this._element),t(this._element).addClass(v.IN),this._config.focus&&this._enforceFocus();var o=t.Event(m.SHOWN,{relatedTarget:e}),s=function(){n._config.focus&&n._element.focus(),t(n._element).trigger(o)};i?t(this._dialog).one(r.TRANSITION_END,s).emulateTransitionEnd(c):s()},h.prototype._enforceFocus=function(){var e=this;t(document).off(m.FOCUSIN).on(m.FOCUSIN,function(n){document===n.target||e._element===n.target||t(e._element).has(n.target).length||e._element.focus()})},h.prototype._setEscapeEvent=function(){var e=this;this._isShown&&this._config.keyboard?t(this._element).on(m.KEYDOWN_DISMISS,function(t){t.which===f&&e.hide()}):this._isShown||t(this._element).off(m.KEYDOWN_DISMISS)},h.prototype._setResizeEvent=function(){this._isShown?t(window).on(m.RESIZE,t.proxy(this._handleUpdate,this)):t(window).off(m.RESIZE)},h.prototype._hideModal=function(){var e=this;this._element.style.display="none",this._element.setAttribute("aria-hidden","true"),this._showBackdrop(function(){t(document.body).removeClass(v.OPEN),e._resetAdjustments(),e._resetScrollbar(),t(e._element).trigger(m.HIDDEN)})},h.prototype._removeBackdrop=function(){this._backdrop&&(t(this._backdrop).remove(),this._backdrop=null)},h.prototype._showBackdrop=function(e){var n=this,i=t(this._element).hasClass(v.FADE)?v.FADE:"";if(this._isShown&&this._config.backdrop){var o=r.supportsTransitionEnd()&&i;if(this._backdrop=document.createElement("div"),this._backdrop.className=v.BACKDROP,i&&t(this._backdrop).addClass(i),t(this._backdrop).appendTo(document.body),t(this._element).on(m.CLICK_DISMISS,function(t){return n._ignoreBackdropClick?void(n._ignoreBackdropClick=!1):void(t.target===t.currentTarget&&("static"===n._config.backdrop?n._element.focus():n.hide()))}),o&&r.reflow(this._backdrop),t(this._backdrop).addClass(v.IN),!e)return;if(!o)return void e();t(this._backdrop).one(r.TRANSITION_END,e).emulateTransitionEnd(d)}else if(!this._isShown&&this._backdrop){t(this._backdrop).removeClass(v.IN);var s=function(){n._removeBackdrop(),e&&e()};r.supportsTransitionEnd()&&t(this._element).hasClass(v.FADE)?t(this._backdrop).one(r.TRANSITION_END,s).emulateTransitionEnd(d):s()}else e&&e()},h.prototype._handleUpdate=function(){this._adjustDialog()},h.prototype._adjustDialog=function(){var t=this._element.scrollHeight>document.documentElement.clientHeight;!this._isBodyOverflowing&&t&&(this._element.style.paddingLeft=this._scrollbarWidth+"px"),this._isBodyOverflowing&&!t&&(this._element.style.paddingRight=this._scrollbarWidth+"px")},h.prototype._resetAdjustments=function(){this._element.style.paddingLeft="",this._element.style.paddingRight=""},h.prototype._checkScrollbar=function(){this._isBodyOverflowing=document.body.clientWidth<window.innerWidth,this._scrollbarWidth=this._getScrollbarWidth()},h.prototype._setScrollbar=function(){var e=parseInt(t(y.FIXED_CONTENT).css("padding-right")||0,10);this._originalBodyPadding=document.body.style.paddingRight||"",this._isBodyOverflowing&&(document.body.style.paddingRight=e+this._scrollbarWidth+"px")},h.prototype._resetScrollbar=function(){document.body.style.paddingRight=this._originalBodyPadding},h.prototype._getScrollbarWidth=function(){var t=document.createElement("div");t.className=v.SCROLLBAR_MEASURER,document.body.appendChild(t);var e=t.offsetWidth-t.clientWidth;return document.body.removeChild(t),e},h._jQueryInterface=function(e,n){return this.each(function(){var o=t(this).data(a),r=t.extend({},h.Default,t(this).data(),"object"===("undefined"==typeof e?"undefined":i(e))&&e);if(o||(o=new h(this,r),t(this).data(a,o)),"string"==typeof e){if(void 0===o[e])throw new Error('No method named "'+e+'"');o[e](n)}else r.show&&o.show(n)})},o(h,null,[{key:"VERSION",get:function(){return s}},{key:"Default",get:function(){return p}}]),h}();return t(document).on(m.CLICK_DATA_API,y.DATA_TOGGLE,function(e){var n=this,i=void 0,o=r.getSelectorFromElement(this);o&&(i=t(o)[0]);var s=t(i).data(a)?"toggle":t.extend({},t(i).data(),t(this).data());"A"===this.tagName&&e.preventDefault();var l=t(i).one(m.SHOW,function(e){e.isDefaultPrevented()||l.one(m.HIDDEN,function(){t(n).is(":visible")&&n.focus()})});_._jQueryInterface.call(t(i),s,this)}),t.fn[e]=_._jQueryInterface,t.fn[e].Constructor=_,t.fn[e].noConflict=function(){return t.fn[e]=u,_._jQueryInterface},_}(jQuery),function(t){var e="scrollspy",s="4.0.0-alpha.5",a="bs.scrollspy",l="."+a,h=".data-api",u=t.fn[e],c={offset:10,method:"auto",target:""},d={offset:"number",method:"string",target:"(string|element)"},f={ACTIVATE:"activate"+l,SCROLL:"scroll"+l,LOAD_DATA_API:"load"+l+h},p={DROPDOWN_ITEM:"dropdown-item",DROPDOWN_MENU:"dropdown-menu",NAV_LINK:"nav-link",NAV:"nav",ACTIVE:"active"},g={DATA_SPY:'[data-spy="scroll"]',ACTIVE:".active",LIST_ITEM:".list-item",LI:"li",LI_DROPDOWN:"li.dropdown",NAV_LINKS:".nav-link",DROPDOWN:".dropdown",DROPDOWN_ITEMS:".dropdown-item",DROPDOWN_TOGGLE:".dropdown-toggle"},m={OFFSET:"offset",POSITION:"position"},v=function(){function h(e,i){n(this,h),this._element=e,this._scrollElement="BODY"===e.tagName?window:e,this._config=this._getConfig(i),this._selector=this._config.target+" "+g.NAV_LINKS+","+(this._config.target+" "+g.DROPDOWN_ITEMS),this._offsets=[],this._targets=[],this._activeTarget=null,this._scrollHeight=0,t(this._scrollElement).on(f.SCROLL,t.proxy(this._process,this)),this.refresh(),this._process()}return h.prototype.refresh=function(){var e=this,n=this._scrollElement!==this._scrollElement.window?m.POSITION:m.OFFSET,i="auto"===this._config.method?n:this._config.method,o=i===m.POSITION?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight();var s=t.makeArray(t(this._selector));s.map(function(e){var n=void 0,s=r.getSelectorFromElement(e);return s&&(n=t(s)[0]),n&&(n.offsetWidth||n.offsetHeight)?[t(n)[i]().top+o,s]:null}).filter(function(t){return t}).sort(function(t,e){return t[0]-e[0]}).forEach(function(t){e._offsets.push(t[0]),e._targets.push(t[1])})},h.prototype.dispose=function(){t.removeData(this._element,a),t(this._scrollElement).off(l),this._element=null,this._scrollElement=null,this._config=null,this._selector=null,this._offsets=null,this._targets=null,this._activeTarget=null,this._scrollHeight=null},h.prototype._getConfig=function(n){if(n=t.extend({},c,n),"string"!=typeof n.target){var i=t(n.target).attr("id");i||(i=r.getUID(e),t(n.target).attr("id",i)),n.target="#"+i}return r.typeCheckConfig(e,n,d),n},h.prototype._getScrollTop=function(){return this._scrollElement===window?this._scrollElement.scrollY:this._scrollElement.scrollTop},h.prototype._getScrollHeight=function(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)},h.prototype._process=function(){var t=this._getScrollTop()+this._config.offset,e=this._getScrollHeight(),n=this._config.offset+e-this._scrollElement.offsetHeight;if(this._scrollHeight!==e&&this.refresh(),t>=n){var i=this._targets[this._targets.length-1];this._activeTarget!==i&&this._activate(i)}if(this._activeTarget&&t<this._offsets[0])return this._activeTarget=null,void this._clear();for(var o=this._offsets.length;o--;){var r=this._activeTarget!==this._targets[o]&&t>=this._offsets[o]&&(void 0===this._offsets[o+1]||t<this._offsets[o+1]);r&&this._activate(this._targets[o])}},h.prototype._activate=function(e){this._activeTarget=e,this._clear();var n=this._selector.split(",");n=n.map(function(t){return t+'[data-target="'+e+'"],'+(t+'[href="'+e+'"]')});var i=t(n.join(","));i.hasClass(p.DROPDOWN_ITEM)?(i.closest(g.DROPDOWN).find(g.DROPDOWN_TOGGLE).addClass(p.ACTIVE),i.addClass(p.ACTIVE)):i.parents(g.LI).find(g.NAV_LINKS).addClass(p.ACTIVE),t(this._scrollElement).trigger(f.ACTIVATE,{relatedTarget:e})},h.prototype._clear=function(){t(this._selector).filter(g.ACTIVE).removeClass(p.ACTIVE)},h._jQueryInterface=function(e){return this.each(function(){var n=t(this).data(a),o="object"===("undefined"==typeof e?"undefined":i(e))&&e||null;if(n||(n=new h(this,o),t(this).data(a,n)),"string"==typeof e){if(void 0===n[e])throw new Error('No method named "'+e+'"');n[e]()}})},o(h,null,[{key:"VERSION",get:function(){return s}},{key:"Default",get:function(){return c}}]),h}();return t(window).on(f.LOAD_DATA_API,function(){for(var e=t.makeArray(t(g.DATA_SPY)),n=e.length;n--;){var i=t(e[n]);v._jQueryInterface.call(i,i.data())}}),t.fn[e]=v._jQueryInterface,t.fn[e].Constructor=v,t.fn[e].noConflict=function(){return t.fn[e]=u,v._jQueryInterface},v}(jQuery),function(t){var e="tab",i="4.0.0-alpha.5",s="bs.tab",a="."+s,l=".data-api",h=t.fn[e],u=150,c={HIDE:"hide"+a,HIDDEN:"hidden"+a,SHOW:"show"+a,SHOWN:"shown"+a,CLICK_DATA_API:"click"+a+l},d={DROPDOWN_MENU:"dropdown-menu",ACTIVE:"active",FADE:"fade",IN:"in"},f={A:"a",LI:"li",DROPDOWN:".dropdown",UL:"ul:not(.dropdown-menu)",FADE_CHILD:"> .nav-item .fade, > .fade",ACTIVE:".active",ACTIVE_CHILD:"> .nav-item > .active, > .active",DATA_TOGGLE:'[data-toggle="tab"], [data-toggle="pill"]',
DROPDOWN_TOGGLE:".dropdown-toggle",DROPDOWN_ACTIVE_CHILD:"> .dropdown-menu .active"},p=function(){function e(t){n(this,e),this._element=t}return e.prototype.show=function(){var e=this;if(!this._element.parentNode||this._element.parentNode.nodeType!==Node.ELEMENT_NODE||!t(this._element).hasClass(d.ACTIVE)){var n=void 0,i=void 0,o=t(this._element).closest(f.UL)[0],s=r.getSelectorFromElement(this._element);o&&(i=t.makeArray(t(o).find(f.ACTIVE)),i=i[i.length-1]);var a=t.Event(c.HIDE,{relatedTarget:this._element}),l=t.Event(c.SHOW,{relatedTarget:i});if(i&&t(i).trigger(a),t(this._element).trigger(l),!l.isDefaultPrevented()&&!a.isDefaultPrevented()){s&&(n=t(s)[0]),this._activate(this._element,o);var h=function(){var n=t.Event(c.HIDDEN,{relatedTarget:e._element}),o=t.Event(c.SHOWN,{relatedTarget:i});t(i).trigger(n),t(e._element).trigger(o)};n?this._activate(n,n.parentNode,h):h()}}},e.prototype.dispose=function(){t.removeClass(this._element,s),this._element=null},e.prototype._activate=function(e,n,i){var o=t(n).find(f.ACTIVE_CHILD)[0],s=i&&r.supportsTransitionEnd()&&(o&&t(o).hasClass(d.FADE)||Boolean(t(n).find(f.FADE_CHILD)[0])),a=t.proxy(this._transitionComplete,this,e,o,s,i);o&&s?t(o).one(r.TRANSITION_END,a).emulateTransitionEnd(u):a(),o&&t(o).removeClass(d.IN)},e.prototype._transitionComplete=function(e,n,i,o){if(n){t(n).removeClass(d.ACTIVE);var s=t(n).find(f.DROPDOWN_ACTIVE_CHILD)[0];s&&t(s).removeClass(d.ACTIVE),n.setAttribute("aria-expanded",!1)}if(t(e).addClass(d.ACTIVE),e.setAttribute("aria-expanded",!0),i?(r.reflow(e),t(e).addClass(d.IN)):t(e).removeClass(d.FADE),e.parentNode&&t(e.parentNode).hasClass(d.DROPDOWN_MENU)){var a=t(e).closest(f.DROPDOWN)[0];a&&t(a).find(f.DROPDOWN_TOGGLE).addClass(d.ACTIVE),e.setAttribute("aria-expanded",!0)}o&&o()},e._jQueryInterface=function(n){return this.each(function(){var i=t(this),o=i.data(s);if(o||(o=o=new e(this),i.data(s,o)),"string"==typeof n){if(void 0===o[n])throw new Error('No method named "'+n+'"');o[n]()}})},o(e,null,[{key:"VERSION",get:function(){return i}}]),e}();return t(document).on(c.CLICK_DATA_API,f.DATA_TOGGLE,function(e){e.preventDefault(),p._jQueryInterface.call(t(this),"show")}),t.fn[e]=p._jQueryInterface,t.fn[e].Constructor=p,t.fn[e].noConflict=function(){return t.fn[e]=h,p._jQueryInterface},p}(jQuery),function(t){if(void 0===window.Tether)throw new Error("Bootstrap tooltips require Tether (http://tether.io/)");var e="tooltip",s="4.0.0-alpha.5",a="bs.tooltip",l="."+a,h=t.fn[e],u=150,c="bs-tether",d={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:"0 0",constraints:[]},f={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"string",constraints:"array"},p={TOP:"bottom center",RIGHT:"middle left",BOTTOM:"top center",LEFT:"middle right"},g={IN:"in",OUT:"out"},m={HIDE:"hide"+l,HIDDEN:"hidden"+l,SHOW:"show"+l,SHOWN:"shown"+l,INSERTED:"inserted"+l,CLICK:"click"+l,FOCUSIN:"focusin"+l,FOCUSOUT:"focusout"+l,MOUSEENTER:"mouseenter"+l,MOUSELEAVE:"mouseleave"+l},v={FADE:"fade",IN:"in"},y={TOOLTIP:".tooltip",TOOLTIP_INNER:".tooltip-inner"},_={element:!1,enabled:!1},E={HOVER:"hover",FOCUS:"focus",CLICK:"click",MANUAL:"manual"},T=function(){function h(t,e){n(this,h),this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._tether=null,this.element=t,this.config=this._getConfig(e),this.tip=null,this._setListeners()}return h.prototype.enable=function(){this._isEnabled=!0},h.prototype.disable=function(){this._isEnabled=!1},h.prototype.toggleEnabled=function(){this._isEnabled=!this._isEnabled},h.prototype.toggle=function(e){if(e){var n=this.constructor.DATA_KEY,i=t(e.currentTarget).data(n);i||(i=new this.constructor(e.currentTarget,this._getDelegateConfig()),t(e.currentTarget).data(n,i)),i._activeTrigger.click=!i._activeTrigger.click,i._isWithActiveTrigger()?i._enter(null,i):i._leave(null,i)}else{if(t(this.getTipElement()).hasClass(v.IN))return void this._leave(null,this);this._enter(null,this)}},h.prototype.dispose=function(){clearTimeout(this._timeout),this.cleanupTether(),t.removeData(this.element,this.constructor.DATA_KEY),t(this.element).off(this.constructor.EVENT_KEY),this.tip&&t(this.tip).remove(),this._isEnabled=null,this._timeout=null,this._hoverState=null,this._activeTrigger=null,this._tether=null,this.element=null,this.config=null,this.tip=null},h.prototype.show=function(){var e=this,n=t.Event(this.constructor.Event.SHOW);if(this.isWithContent()&&this._isEnabled){t(this.element).trigger(n);var i=t.contains(this.element.ownerDocument.documentElement,this.element);if(n.isDefaultPrevented()||!i)return;var o=this.getTipElement(),s=r.getUID(this.constructor.NAME);o.setAttribute("id",s),this.element.setAttribute("aria-describedby",s),this.setContent(),this.config.animation&&t(o).addClass(v.FADE);var a="function"==typeof this.config.placement?this.config.placement.call(this,o,this.element):this.config.placement,l=this._getAttachment(a);t(o).data(this.constructor.DATA_KEY,this).appendTo(document.body),t(this.element).trigger(this.constructor.Event.INSERTED),this._tether=new Tether({attachment:l,element:o,target:this.element,classes:_,classPrefix:c,offset:this.config.offset,constraints:this.config.constraints,addTargetClasses:!1}),r.reflow(o),this._tether.position(),t(o).addClass(v.IN);var u=function(){var n=e._hoverState;e._hoverState=null,t(e.element).trigger(e.constructor.Event.SHOWN),n===g.OUT&&e._leave(null,e)};if(r.supportsTransitionEnd()&&t(this.tip).hasClass(v.FADE))return void t(this.tip).one(r.TRANSITION_END,u).emulateTransitionEnd(h._TRANSITION_DURATION);u()}},h.prototype.hide=function(e){var n=this,i=this.getTipElement(),o=t.Event(this.constructor.Event.HIDE),s=function(){n._hoverState!==g.IN&&i.parentNode&&i.parentNode.removeChild(i),n.element.removeAttribute("aria-describedby"),t(n.element).trigger(n.constructor.Event.HIDDEN),n.cleanupTether(),e&&e()};t(this.element).trigger(o),o.isDefaultPrevented()||(t(i).removeClass(v.IN),r.supportsTransitionEnd()&&t(this.tip).hasClass(v.FADE)?t(i).one(r.TRANSITION_END,s).emulateTransitionEnd(u):s(),this._hoverState="")},h.prototype.isWithContent=function(){return Boolean(this.getTitle())},h.prototype.getTipElement=function(){return this.tip=this.tip||t(this.config.template)[0]},h.prototype.setContent=function(){var e=t(this.getTipElement());this.setElementContent(e.find(y.TOOLTIP_INNER),this.getTitle()),e.removeClass(v.FADE).removeClass(v.IN),this.cleanupTether()},h.prototype.setElementContent=function(e,n){var o=this.config.html;"object"===("undefined"==typeof n?"undefined":i(n))&&(n.nodeType||n.jquery)?o?t(n).parent().is(e)||e.empty().append(n):e.text(t(n).text()):e[o?"html":"text"](n)},h.prototype.getTitle=function(){var t=this.element.getAttribute("data-original-title");return t||(t="function"==typeof this.config.title?this.config.title.call(this.element):this.config.title),t},h.prototype.cleanupTether=function(){this._tether&&this._tether.destroy()},h.prototype._getAttachment=function(t){return p[t.toUpperCase()]},h.prototype._setListeners=function(){var e=this,n=this.config.trigger.split(" ");n.forEach(function(n){if("click"===n)t(e.element).on(e.constructor.Event.CLICK,e.config.selector,t.proxy(e.toggle,e));else if(n!==E.MANUAL){var i=n===E.HOVER?e.constructor.Event.MOUSEENTER:e.constructor.Event.FOCUSIN,o=n===E.HOVER?e.constructor.Event.MOUSELEAVE:e.constructor.Event.FOCUSOUT;t(e.element).on(i,e.config.selector,t.proxy(e._enter,e)).on(o,e.config.selector,t.proxy(e._leave,e))}}),this.config.selector?this.config=t.extend({},this.config,{trigger:"manual",selector:""}):this._fixTitle()},h.prototype._fixTitle=function(){var t=i(this.element.getAttribute("data-original-title"));(this.element.getAttribute("title")||"string"!==t)&&(this.element.setAttribute("data-original-title",this.element.getAttribute("title")||""),this.element.setAttribute("title",""))},h.prototype._enter=function(e,n){var i=this.constructor.DATA_KEY;return n=n||t(e.currentTarget).data(i),n||(n=new this.constructor(e.currentTarget,this._getDelegateConfig()),t(e.currentTarget).data(i,n)),e&&(n._activeTrigger["focusin"===e.type?E.FOCUS:E.HOVER]=!0),t(n.getTipElement()).hasClass(v.IN)||n._hoverState===g.IN?void(n._hoverState=g.IN):(clearTimeout(n._timeout),n._hoverState=g.IN,n.config.delay&&n.config.delay.show?void(n._timeout=setTimeout(function(){n._hoverState===g.IN&&n.show()},n.config.delay.show)):void n.show())},h.prototype._leave=function(e,n){var i=this.constructor.DATA_KEY;if(n=n||t(e.currentTarget).data(i),n||(n=new this.constructor(e.currentTarget,this._getDelegateConfig()),t(e.currentTarget).data(i,n)),e&&(n._activeTrigger["focusout"===e.type?E.FOCUS:E.HOVER]=!1),!n._isWithActiveTrigger())return clearTimeout(n._timeout),n._hoverState=g.OUT,n.config.delay&&n.config.delay.hide?void(n._timeout=setTimeout(function(){n._hoverState===g.OUT&&n.hide()},n.config.delay.hide)):void n.hide()},h.prototype._isWithActiveTrigger=function(){for(var t in this._activeTrigger)if(this._activeTrigger[t])return!0;return!1},h.prototype._getConfig=function(n){return n=t.extend({},this.constructor.Default,t(this.element).data(),n),n.delay&&"number"==typeof n.delay&&(n.delay={show:n.delay,hide:n.delay}),r.typeCheckConfig(e,n,this.constructor.DefaultType),n},h.prototype._getDelegateConfig=function(){var t={};if(this.config)for(var e in this.config)this.constructor.Default[e]!==this.config[e]&&(t[e]=this.config[e]);return t},h._jQueryInterface=function(e){return this.each(function(){var n=t(this).data(a),o="object"===("undefined"==typeof e?"undefined":i(e))?e:null;if((n||!/dispose|hide/.test(e))&&(n||(n=new h(this,o),t(this).data(a,n)),"string"==typeof e)){if(void 0===n[e])throw new Error('No method named "'+e+'"');n[e]()}})},o(h,null,[{key:"VERSION",get:function(){return s}},{key:"Default",get:function(){return d}},{key:"NAME",get:function(){return e}},{key:"DATA_KEY",get:function(){return a}},{key:"Event",get:function(){return m}},{key:"EVENT_KEY",get:function(){return l}},{key:"DefaultType",get:function(){return f}}]),h}();return t.fn[e]=T._jQueryInterface,t.fn[e].Constructor=T,t.fn[e].noConflict=function(){return t.fn[e]=h,T._jQueryInterface},T}(jQuery));(function(r){var a="popover",l="4.0.0-alpha.5",h="bs.popover",u="."+h,c=r.fn[a],d=r.extend({},s.Default,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),f=r.extend({},s.DefaultType,{content:"(string|element|function)"}),p={FADE:"fade",IN:"in"},g={TITLE:".popover-title",CONTENT:".popover-content"},m={HIDE:"hide"+u,HIDDEN:"hidden"+u,SHOW:"show"+u,SHOWN:"shown"+u,INSERTED:"inserted"+u,CLICK:"click"+u,FOCUSIN:"focusin"+u,FOCUSOUT:"focusout"+u,MOUSEENTER:"mouseenter"+u,MOUSELEAVE:"mouseleave"+u},v=function(s){function c(){return n(this,c),t(this,s.apply(this,arguments))}return e(c,s),c.prototype.isWithContent=function(){return this.getTitle()||this._getContent()},c.prototype.getTipElement=function(){return this.tip=this.tip||r(this.config.template)[0]},c.prototype.setContent=function(){var t=r(this.getTipElement());this.setElementContent(t.find(g.TITLE),this.getTitle()),this.setElementContent(t.find(g.CONTENT),this._getContent()),t.removeClass(p.FADE).removeClass(p.IN),this.cleanupTether()},c.prototype._getContent=function(){return this.element.getAttribute("data-content")||("function"==typeof this.config.content?this.config.content.call(this.element):this.config.content)},c._jQueryInterface=function(t){return this.each(function(){var e=r(this).data(h),n="object"===("undefined"==typeof t?"undefined":i(t))?t:null;if((e||!/destroy|hide/.test(t))&&(e||(e=new c(this,n),r(this).data(h,e)),"string"==typeof t)){if(void 0===e[t])throw new Error('No method named "'+t+'"');e[t]()}})},o(c,null,[{key:"VERSION",get:function(){return l}},{key:"Default",get:function(){return d}},{key:"NAME",get:function(){return a}},{key:"DATA_KEY",get:function(){return h}},{key:"Event",get:function(){return m}},{key:"EVENT_KEY",get:function(){return u}},{key:"DefaultType",get:function(){return f}}]),c}(s);return r.fn[a]=v._jQueryInterface,r.fn[a].Constructor=v,r.fn[a].noConflict=function(){return r.fn[a]=c,v._jQueryInterface},v})(jQuery)}()},function(t,e,n){(function(e){t.exports=e.turbolinks=n(7)}).call(e,function(){return this}())},function(t,e,n){(function(e){t.exports=e.$=n(8)}).call(e,function(){return this}())},function(t,e,n){var i,o;(function(){(function(){(function(){this.Turbolinks={supported:function(){return null!=window.history.pushState&&null!=window.requestAnimationFrame}(),visit:function(t,e){return r.controller.visit(t,e)},clearCache:function(){return r.controller.clearCache()}}}).call(this)}).call(this);var r=this.Turbolinks;(function(){(function(){var t,e;r.copyObject=function(t){var e,n,i;n={};for(e in t)i=t[e],n[e]=i;return n},r.closest=function(e,n){return t.call(e,n)},t=function(){var t,n;return t=document.documentElement,null!=(n=t.closest)?n:function(t){var n;for(n=this;n;){if(n.nodeType===Node.ELEMENT_NODE&&e.call(n,t))return n;n=n.parentNode}}}(),r.defer=function(t){return setTimeout(t,1)},r.dispatch=function(t,e){var n,i,o,r,s;return r=null!=e?e:{},s=r.target,n=r.cancelable,i=r.data,o=document.createEvent("Events"),o.initEvent(t,!0,n===!0),o.data=null!=i?i:{},(null!=s?s:document).dispatchEvent(o),o},r.match=function(t,n){return e.call(t,n)},e=function(){var t,e,n,i;return t=document.documentElement,null!=(e=null!=(n=null!=(i=t.matchesSelector)?i:t.webkitMatchesSelector)?n:t.msMatchesSelector)?e:t.mozMatchesSelector}(),r.uuid=function(){var t,e,n;for(n="",t=e=1;36>=e;t=++e)n+=9===t||14===t||19===t||24===t?"-":15===t?"4":20===t?(Math.floor(4*Math.random())+8).toString(16):Math.floor(15*Math.random()).toString(16);return n}}).call(this),function(){r.Location=function(){function t(t){var e,n;null==t&&(t=""),n=document.createElement("a"),n.href=t.toString(),this.absoluteURL=n.href,e=n.hash.length,2>e?this.requestURL=this.absoluteURL:(this.requestURL=this.absoluteURL.slice(0,-e),this.anchor=n.hash.slice(1))}var e,n,i,o;return t.wrap=function(t){return t instanceof this?t:new this(t)},t.prototype.getOrigin=function(){return this.absoluteURL.split("/",3).join("/")},t.prototype.getPath=function(){var t,e;return null!=(t=null!=(e=this.absoluteURL.match(/\/\/[^\/]*(\/[^?;]*)/))?e[1]:void 0)?t:"/"},t.prototype.getPathComponents=function(){return this.getPath().split("/").slice(1)},t.prototype.getLastPathComponent=function(){return this.getPathComponents().slice(-1)[0]},t.prototype.getExtension=function(){var t,e;return null!=(t=null!=(e=this.getLastPathComponent().match(/\.[^.]*$/))?e[0]:void 0)?t:""},t.prototype.isHTML=function(){return this.getExtension().match(/^(?:|\.(?:htm|html|xhtml))$/)},t.prototype.isPrefixedBy=function(t){var e;return e=n(t),this.isEqualTo(t)||o(this.absoluteURL,e)},t.prototype.isEqualTo=function(t){return this.absoluteURL===(null!=t?t.absoluteURL:void 0)},t.prototype.toCacheKey=function(){return this.requestURL},t.prototype.toJSON=function(){return this.absoluteURL},t.prototype.toString=function(){return this.absoluteURL},t.prototype.valueOf=function(){return this.absoluteURL},n=function(t){return e(t.getOrigin()+t.getPath())},e=function(t){return i(t,"/")?t:t+"/"},o=function(t,e){return t.slice(0,e.length)===e},i=function(t,e){return t.slice(-e.length)===e},t}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};r.HttpRequest=function(){function e(e,n,i){this.delegate=e,this.requestCanceled=t(this.requestCanceled,this),this.requestTimedOut=t(this.requestTimedOut,this),this.requestFailed=t(this.requestFailed,this),this.requestLoaded=t(this.requestLoaded,this),this.requestProgressed=t(this.requestProgressed,this),this.url=r.Location.wrap(n).requestURL,this.referrer=r.Location.wrap(i).absoluteURL,this.createXHR()}return e.NETWORK_FAILURE=0,e.TIMEOUT_FAILURE=-1,e.timeout=60,e.prototype.send=function(){var t;return this.xhr&&!this.sent?(this.notifyApplicationBeforeRequestStart(),this.setProgress(0),this.xhr.send(),this.sent=!0,"function"==typeof(t=this.delegate).requestStarted?t.requestStarted():void 0):void 0},e.prototype.cancel=function(){return this.xhr&&this.sent?this.xhr.abort():void 0},e.prototype.requestProgressed=function(t){return t.lengthComputable?this.setProgress(t.loaded/t.total):void 0},e.prototype.requestLoaded=function(){return this.endRequest(function(t){return function(){var e;return 200<=(e=t.xhr.status)&&300>e?t.delegate.requestCompletedWithResponse(t.xhr.responseText,t.xhr.getResponseHeader("Turbolinks-Location")):(t.failed=!0,t.delegate.requestFailedWithStatusCode(t.xhr.status,t.xhr.responseText))}}(this))},e.prototype.requestFailed=function(){return this.endRequest(function(t){return function(){return t.failed=!0,t.delegate.requestFailedWithStatusCode(t.constructor.NETWORK_FAILURE)}}(this))},e.prototype.requestTimedOut=function(){return this.endRequest(function(t){return function(){return t.failed=!0,t.delegate.requestFailedWithStatusCode(t.constructor.TIMEOUT_FAILURE)}}(this))},e.prototype.requestCanceled=function(){return this.endRequest()},e.prototype.notifyApplicationBeforeRequestStart=function(){return r.dispatch("turbolinks:request-start",{data:{url:this.url,xhr:this.xhr}})},e.prototype.notifyApplicationAfterRequestEnd=function(){return r.dispatch("turbolinks:request-end",{data:{url:this.url,xhr:this.xhr}})},e.prototype.createXHR=function(){return this.xhr=new XMLHttpRequest,this.xhr.open("GET",this.url,!0),this.xhr.timeout=1e3*this.constructor.timeout,this.xhr.setRequestHeader("Accept","text/html, application/xhtml+xml"),this.xhr.setRequestHeader("Turbolinks-Referrer",this.referrer),this.xhr.onprogress=this.requestProgressed,this.xhr.onload=this.requestLoaded,this.xhr.onerror=this.requestFailed,this.xhr.ontimeout=this.requestTimedOut,this.xhr.onabort=this.requestCanceled},e.prototype.endRequest=function(t){return this.xhr?(this.notifyApplicationAfterRequestEnd(),null!=t&&t.call(this),this.destroy()):void 0},e.prototype.setProgress=function(t){var e;return this.progress=t,"function"==typeof(e=this.delegate).requestProgressed?e.requestProgressed(this.progress):void 0},e.prototype.destroy=function(){var t;return this.setProgress(1),"function"==typeof(t=this.delegate).requestFinished&&t.requestFinished(),this.delegate=null,this.xhr=null},e}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};r.ProgressBar=function(){function e(){this.trickle=t(this.trickle,this),this.stylesheetElement=this.createStylesheetElement(),this.progressElement=this.createProgressElement()}var n;return n=300,e.defaultCSS=".turbolinks-progress-bar {\n  position: fixed;\n  display: block;\n  top: 0;\n  left: 0;\n  height: 3px;\n  background: #0076ff;\n  z-index: 9999;\n  transition: width "+n+"ms ease-out, opacity "+n/2+"ms "+n/2+"ms ease-in;\n  transform: translate3d(0, 0, 0);\n}",e.prototype.show=function(){return this.visible?void 0:(this.visible=!0,this.installStylesheetElement(),this.installProgressElement(),this.startTrickling())},e.prototype.hide=function(){return this.visible&&!this.hiding?(this.hiding=!0,this.fadeProgressElement(function(t){return function(){return t.uninstallProgressElement(),t.stopTrickling(),t.visible=!1,t.hiding=!1}}(this))):void 0},e.prototype.setValue=function(t){return this.value=t,this.refresh()},e.prototype.installStylesheetElement=function(){return document.head.insertBefore(this.stylesheetElement,document.head.firstChild)},e.prototype.installProgressElement=function(){return this.progressElement.style.width=0,this.progressElement.style.opacity=1,document.documentElement.insertBefore(this.progressElement,document.body),this.refresh()},e.prototype.fadeProgressElement=function(t){return this.progressElement.style.opacity=0,setTimeout(t,1.5*n)},e.prototype.uninstallProgressElement=function(){return this.progressElement.parentNode?document.documentElement.removeChild(this.progressElement):void 0},e.prototype.startTrickling=function(){return null!=this.trickleInterval?this.trickleInterval:this.trickleInterval=setInterval(this.trickle,n)},e.prototype.stopTrickling=function(){return clearInterval(this.trickleInterval),this.trickleInterval=null},e.prototype.trickle=function(){return this.setValue(this.value+Math.random()/100)},e.prototype.refresh=function(){return requestAnimationFrame(function(t){return function(){return t.progressElement.style.width=10+90*t.value+"%"}}(this))},e.prototype.createStylesheetElement=function(){var t;return t=document.createElement("style"),t.type="text/css",t.textContent=this.constructor.defaultCSS,t},e.prototype.createProgressElement=function(){var t;return t=document.createElement("div"),t.className="turbolinks-progress-bar",t},e}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};r.BrowserAdapter=function(){function e(e){this.controller=e,this.showProgressBar=t(this.showProgressBar,this),this.progressBar=new r.ProgressBar}var n,i,o,s;return s=r.HttpRequest,n=s.NETWORK_FAILURE,o=s.TIMEOUT_FAILURE,i=500,e.prototype.visitProposedToLocationWithAction=function(t,e){return this.controller.startVisitToLocationWithAction(t,e)},e.prototype.visitStarted=function(t){return t.issueRequest(),t.changeHistory(),t.loadCachedSnapshot()},e.prototype.visitRequestStarted=function(t){return this.progressBar.setValue(0),t.hasCachedSnapshot()||"restore"!==t.action?this.showProgressBarAfterDelay():this.showProgressBar()},e.prototype.visitRequestProgressed=function(t){return this.progressBar.setValue(t.progress)},e.prototype.visitRequestCompleted=function(t){return t.loadResponse()},e.prototype.visitRequestFailedWithStatusCode=function(t,e){switch(e){case n:case o:return this.reload();default:return t.loadResponse()}},e.prototype.visitRequestFinished=function(t){return this.hideProgressBar()},e.prototype.visitCompleted=function(t){return t.followRedirect()},e.prototype.pageInvalidated=function(){return this.reload()},e.prototype.showProgressBarAfterDelay=function(){return this.progressBarTimeout=setTimeout(this.showProgressBar,i)},e.prototype.showProgressBar=function(){return this.progressBar.show()},e.prototype.hideProgressBar=function(){return this.progressBar.hide(),clearTimeout(this.progressBarTimeout)},e.prototype.reload=function(){return window.location.reload()},e}()}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};t=!1,addEventListener("load",function(){return r.defer(function(){return t=!0})},!1),r.History=function(){function n(t){this.delegate=t,this.onPopState=e(this.onPopState,this)}return n.prototype.start=function(){return this.started?void 0:(addEventListener("popstate",this.onPopState,!1),this.started=!0)},n.prototype.stop=function(){return this.started?(removeEventListener("popstate",this.onPopState,!1),this.started=!1):void 0},n.prototype.push=function(t,e){return t=r.Location.wrap(t),this.update("push",t,e)},n.prototype.replace=function(t,e){return t=r.Location.wrap(t),this.update("replace",t,e)},n.prototype.onPopState=function(t){var e,n,i,o;return this.shouldHandlePopState()&&(o=null!=(n=t.state)?n.turbolinks:void 0)?(e=r.Location.wrap(window.location),i=o.restorationIdentifier,this.delegate.historyPoppedToLocationWithRestorationIdentifier(e,i)):void 0},n.prototype.shouldHandlePopState=function(){return t===!0},n.prototype.update=function(t,e,n){var i;return i={turbolinks:{restorationIdentifier:n}},history[t+"State"](i,null,e)},n}()}.call(this),function(){r.Snapshot=function(){function t(t){var e,n;n=t.head,e=t.body,this.head=null!=n?n:document.createElement("head"),this.body=null!=e?e:document.createElement("body")}return t.wrap=function(t){return t instanceof this?t:this.fromHTML(t)},t.fromHTML=function(t){var e;return e=document.createElement("html"),e.innerHTML=t,this.fromElement(e)},t.fromElement=function(t){return new this({head:t.querySelector("head"),body:t.querySelector("body")})},t.prototype.clone=function(){return new t({head:this.head.cloneNode(!0),body:this.body.cloneNode(!0)})},t.prototype.getRootLocation=function(){var t,e;return e=null!=(t=this.getSetting("root"))?t:"/",new r.Location(e)},t.prototype.getCacheControlValue=function(){return this.getSetting("cache-control")},t.prototype.hasAnchor=function(t){try{return null!=this.body.querySelector("[id='"+t+"']")}catch(e){}},t.prototype.isPreviewable=function(){return"no-preview"!==this.getCacheControlValue()},t.prototype.isCacheable=function(){return"no-cache"!==this.getCacheControlValue()},t.prototype.getSetting=function(t){var e,n;return n=this.head.querySelectorAll("meta[name='turbolinks-"+t+"']"),e=n[n.length-1],null!=e?e.getAttribute("content"):void 0},t}()}.call(this),function(){var t=[].slice;r.Renderer=function(){function e(){}var n;return e.render=function(){var e,n,i,o;return i=arguments[0],n=arguments[1],e=3<=arguments.length?t.call(arguments,2):[],o=function(t,e,n){n.prototype=t.prototype;var i=new n,o=t.apply(i,e);return Object(o)===o?o:i}(this,e,function(){}),o.delegate=i,o.render(n),o},e.prototype.renderView=function(t){return this.delegate.viewWillRender(this.newBody),t(),this.delegate.viewRendered(this.newBody)},e.prototype.invalidateView=function(){return this.delegate.viewInvalidated()},e.prototype.createScriptElement=function(t){var e;return"false"===t.getAttribute("data-turbolinks-eval")?t:(e=document.createElement("script"),e.textContent=t.textContent,n(e,t),e)},n=function(t,e){var n,i,o,r,s,a,l;for(r=e.attributes,a=[],n=0,i=r.length;i>n;n++)s=r[n],o=s.name,l=s.value,a.push(t.setAttribute(o,l));return a},e}()}.call(this),function(){r.HeadDetails=function(){function t(t){var e,n,r,s,a,l,h;for(this.element=t,this.elements={},h=this.element.childNodes,s=0,l=h.length;l>s;s++)r=h[s],r.nodeType===Node.ELEMENT_NODE&&(a=r.outerHTML,n=null!=(e=this.elements)[a]?e[a]:e[a]={type:o(r),tracked:i(r),elements:[]},n.elements.push(r))}var e,n,i,o;return t.prototype.hasElementWithKey=function(t){return t in this.elements},t.prototype.getTrackedElementSignature=function(){var t,e;return function(){var n,i;n=this.elements,i=[];for(t in n)e=n[t].tracked,e&&i.push(t);return i}.call(this).join("")},t.prototype.getScriptElementsNotInDetails=function(t){return this.getElementsMatchingTypeNotInDetails("script",t)},t.prototype.getStylesheetElementsNotInDetails=function(t){return this.getElementsMatchingTypeNotInDetails("stylesheet",t)},t.prototype.getElementsMatchingTypeNotInDetails=function(t,e){var n,i,o,r,s,a;o=this.elements,s=[];for(i in o)r=o[i],a=r.type,n=r.elements,a!==t||e.hasElementWithKey(i)||s.push(n[0]);return s},t.prototype.getProvisionalElements=function(){var t,e,n,i,o,r,s;n=[],i=this.elements;for(e in i)o=i[e],s=o.type,r=o.tracked,t=o.elements,null!=s||r?t.length>1&&n.push.apply(n,t.slice(1)):n.push.apply(n,t);return n},o=function(t){return e(t)?"script":n(t)?"stylesheet":void 0},i=function(t){return"reload"===t.getAttribute("data-turbolinks-track")},e=function(t){var e;return e=t.tagName.toLowerCase(),"script"===e},n=function(t){var e;return e=t.tagName.toLowerCase(),"style"===e||"link"===e&&"stylesheet"===t.getAttribute("rel")},t}()}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var o in n)e.call(n,o)&&(t[o]=n[o]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;r.SnapshotRenderer=function(e){function n(t,e){this.currentSnapshot=t,this.newSnapshot=e,this.currentHeadDetails=new r.HeadDetails(this.currentSnapshot.head),this.newHeadDetails=new r.HeadDetails(this.newSnapshot.head),this.newBody=this.newSnapshot.body}return t(n,e),n.prototype.render=function(t){return this.trackedElementsAreIdentical()?(this.mergeHead(),this.renderView(function(e){return function(){return e.replaceBody(),e.focusFirstAutofocusableElement(),t()}}(this))):this.invalidateView()},n.prototype.mergeHead=function(){return this.copyNewHeadStylesheetElements(),this.copyNewHeadScriptElements(),this.removeCurrentHeadProvisionalElements(),this.copyNewHeadProvisionalElements()},n.prototype.replaceBody=function(){return this.activateBodyScriptElements(),this.importBodyPermanentElements(),this.assignNewBody()},n.prototype.trackedElementsAreIdentical=function(){return this.currentHeadDetails.getTrackedElementSignature()===this.newHeadDetails.getTrackedElementSignature()},n.prototype.copyNewHeadStylesheetElements=function(){var t,e,n,i,o;for(i=this.getNewHeadStylesheetElements(),o=[],e=0,n=i.length;n>e;e++)t=i[e],o.push(document.head.appendChild(t));return o},n.prototype.copyNewHeadScriptElements=function(){var t,e,n,i,o;for(i=this.getNewHeadScriptElements(),o=[],e=0,n=i.length;n>e;e++)t=i[e],o.push(document.head.appendChild(this.createScriptElement(t)));return o},n.prototype.removeCurrentHeadProvisionalElements=function(){var t,e,n,i,o;for(i=this.getCurrentHeadProvisionalElements(),o=[],e=0,n=i.length;n>e;e++)t=i[e],o.push(document.head.removeChild(t));return o},n.prototype.copyNewHeadProvisionalElements=function(){var t,e,n,i,o;for(i=this.getNewHeadProvisionalElements(),o=[],e=0,n=i.length;n>e;e++)t=i[e],o.push(document.head.appendChild(t));return o},n.prototype.importBodyPermanentElements=function(){var t,e,n,i,o,r;for(i=this.getNewBodyPermanentElements(),r=[],e=0,n=i.length;n>e;e++)o=i[e],(t=this.findCurrentBodyPermanentElement(o))?r.push(o.parentNode.replaceChild(t,o)):r.push(void 0);return r},n.prototype.activateBodyScriptElements=function(){var t,e,n,i,o,r;for(i=this.getNewBodyScriptElements(),r=[],e=0,n=i.length;n>e;e++)o=i[e],t=this.createScriptElement(o),r.push(o.parentNode.replaceChild(t,o));return r},n.prototype.assignNewBody=function(){return document.body=this.newBody},n.prototype.focusFirstAutofocusableElement=function(){var t;return null!=(t=this.findFirstAutofocusableElement())?t.focus():void 0},n.prototype.getNewHeadStylesheetElements=function(){return this.newHeadDetails.getStylesheetElementsNotInDetails(this.currentHeadDetails)},n.prototype.getNewHeadScriptElements=function(){return this.newHeadDetails.getScriptElementsNotInDetails(this.currentHeadDetails)},n.prototype.getCurrentHeadProvisionalElements=function(){return this.currentHeadDetails.getProvisionalElements()},n.prototype.getNewHeadProvisionalElements=function(){return this.newHeadDetails.getProvisionalElements()},n.prototype.getNewBodyPermanentElements=function(){return this.newBody.querySelectorAll("[id][data-turbolinks-permanent]")},n.prototype.findCurrentBodyPermanentElement=function(t){return document.body.querySelector("#"+t.id+"[data-turbolinks-permanent]")},n.prototype.getNewBodyScriptElements=function(){return this.newBody.querySelectorAll("script")},n.prototype.findFirstAutofocusableElement=function(){return document.body.querySelector("[autofocus]")},n}(r.Renderer)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var o in n)e.call(n,o)&&(t[o]=n[o]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;r.ErrorRenderer=function(e){function n(t){this.html=t}return t(n,e),n.prototype.render=function(t){return this.renderView(function(e){return function(){return e.replaceDocumentHTML(),e.activateBodyScriptElements(),t()}}(this))},n.prototype.replaceDocumentHTML=function(){return document.documentElement.innerHTML=this.html},n.prototype.activateBodyScriptElements=function(){var t,e,n,i,o,r;for(i=this.getScriptElements(),r=[],e=0,n=i.length;n>e;e++)o=i[e],t=this.createScriptElement(o),r.push(o.parentNode.replaceChild(t,o));return r},n.prototype.getScriptElements=function(){return document.documentElement.querySelectorAll("script")},n}(r.Renderer)}.call(this),function(){r.View=function(){function t(t){this.delegate=t,this.element=document.documentElement}return t.prototype.getRootLocation=function(){
return this.getSnapshot().getRootLocation()},t.prototype.getSnapshot=function(){return r.Snapshot.fromElement(this.element)},t.prototype.render=function(t,e){var n,i,o;return o=t.snapshot,n=t.error,i=t.isPreview,this.markAsPreview(i),null!=o?this.renderSnapshot(o,e):this.renderError(n,e)},t.prototype.markAsPreview=function(t){return t?this.element.setAttribute("data-turbolinks-preview",""):this.element.removeAttribute("data-turbolinks-preview")},t.prototype.renderSnapshot=function(t,e){return r.SnapshotRenderer.render(this.delegate,e,this.getSnapshot(),r.Snapshot.wrap(t))},t.prototype.renderError=function(t,e){return r.ErrorRenderer.render(this.delegate,e,t)},t}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};r.ScrollManager=function(){function e(e){this.delegate=e,this.onScroll=t(this.onScroll,this)}return e.prototype.start=function(){return this.started?void 0:(addEventListener("scroll",this.onScroll,!1),this.onScroll(),this.started=!0)},e.prototype.stop=function(){return this.started?(removeEventListener("scroll",this.onScroll,!1),this.started=!1):void 0},e.prototype.scrollToElement=function(t){return t.scrollIntoView()},e.prototype.scrollToPosition=function(t){var e,n;return e=t.x,n=t.y,window.scrollTo(e,n)},e.prototype.onScroll=function(t){return this.updatePosition({x:window.pageXOffset,y:window.pageYOffset})},e.prototype.updatePosition=function(t){var e;return this.position=t,null!=(e=this.delegate)?e.scrollPositionChanged(this.position):void 0},e}()}.call(this),function(){r.SnapshotCache=function(){function t(t){this.size=t,this.keys=[],this.snapshots={}}var e;return t.prototype.has=function(t){var n;return n=e(t),n in this.snapshots},t.prototype.get=function(t){var e;if(this.has(t))return e=this.read(t),this.touch(t),e},t.prototype.put=function(t,e){return this.write(t,e),this.touch(t),e},t.prototype.read=function(t){var n;return n=e(t),this.snapshots[n]},t.prototype.write=function(t,n){var i;return i=e(t),this.snapshots[i]=n},t.prototype.touch=function(t){var n,i;return i=e(t),n=this.keys.indexOf(i),n>-1&&this.keys.splice(n,1),this.keys.unshift(i),this.trim()},t.prototype.trim=function(){var t,e,n,i,o;for(i=this.keys.splice(this.size),o=[],t=0,n=i.length;n>t;t++)e=i[t],o.push(delete this.snapshots[e]);return o},e=function(t){return r.Location.wrap(t).toCacheKey()},t}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};r.Visit=function(){function e(e,n,i){this.controller=e,this.action=i,this.performScroll=t(this.performScroll,this),this.identifier=r.uuid(),this.location=r.Location.wrap(n),this.adapter=this.controller.adapter,this.state="initialized",this.timingMetrics={}}var n;return e.prototype.start=function(){return"initialized"===this.state?(this.recordTimingMetric("visitStart"),this.state="started",this.adapter.visitStarted(this)):void 0},e.prototype.cancel=function(){var t;return"started"===this.state?(null!=(t=this.request)&&t.cancel(),this.cancelRender(),this.state="canceled"):void 0},e.prototype.complete=function(){var t;return"started"===this.state?(this.recordTimingMetric("visitEnd"),this.state="completed","function"==typeof(t=this.adapter).visitCompleted&&t.visitCompleted(this),this.controller.visitCompleted(this)):void 0},e.prototype.fail=function(){var t;return"started"===this.state?(this.state="failed","function"==typeof(t=this.adapter).visitFailed?t.visitFailed(this):void 0):void 0},e.prototype.changeHistory=function(){var t,e;return this.historyChanged?void 0:(t=this.location.isEqualTo(this.referrer)?"replace":this.action,e=n(t),this.controller[e](this.location,this.restorationIdentifier),this.historyChanged=!0)},e.prototype.issueRequest=function(){return this.shouldIssueRequest()&&null==this.request?(this.progress=0,this.request=new r.HttpRequest(this,this.location,this.referrer),this.request.send()):void 0},e.prototype.getCachedSnapshot=function(){var t;return!(t=this.controller.getCachedSnapshotForLocation(this.location))||null!=this.location.anchor&&!t.hasAnchor(this.location.anchor)||"restore"!==this.action&&!t.isPreviewable()?void 0:t},e.prototype.hasCachedSnapshot=function(){return null!=this.getCachedSnapshot()},e.prototype.loadCachedSnapshot=function(){var t,e;return(e=this.getCachedSnapshot())?(t=this.shouldIssueRequest(),this.render(function(){var n;return this.cacheSnapshot(),this.controller.render({snapshot:e,isPreview:t},this.performScroll),"function"==typeof(n=this.adapter).visitRendered&&n.visitRendered(this),t?void 0:this.complete()})):void 0},e.prototype.loadResponse=function(){return null!=this.response?this.render(function(){var t,e;return this.cacheSnapshot(),this.request.failed?(this.controller.render({error:this.response},this.performScroll),"function"==typeof(t=this.adapter).visitRendered&&t.visitRendered(this),this.fail()):(this.controller.render({snapshot:this.response},this.performScroll),"function"==typeof(e=this.adapter).visitRendered&&e.visitRendered(this),this.complete())}):void 0},e.prototype.followRedirect=function(){return this.redirectedToLocation&&!this.followedRedirect?(this.location=this.redirectedToLocation,this.controller.replaceHistoryWithLocationAndRestorationIdentifier(this.redirectedToLocation,this.restorationIdentifier),this.followedRedirect=!0):void 0},e.prototype.requestStarted=function(){var t;return this.recordTimingMetric("requestStart"),"function"==typeof(t=this.adapter).visitRequestStarted?t.visitRequestStarted(this):void 0},e.prototype.requestProgressed=function(t){var e;return this.progress=t,"function"==typeof(e=this.adapter).visitRequestProgressed?e.visitRequestProgressed(this):void 0},e.prototype.requestCompletedWithResponse=function(t,e){return this.response=t,null!=e&&(this.redirectedToLocation=r.Location.wrap(e)),this.adapter.visitRequestCompleted(this)},e.prototype.requestFailedWithStatusCode=function(t,e){return this.response=e,this.adapter.visitRequestFailedWithStatusCode(this,t)},e.prototype.requestFinished=function(){var t;return this.recordTimingMetric("requestEnd"),"function"==typeof(t=this.adapter).visitRequestFinished?t.visitRequestFinished(this):void 0},e.prototype.performScroll=function(){return this.scrolled?void 0:("restore"===this.action?this.scrollToRestoredPosition()||this.scrollToTop():this.scrollToAnchor()||this.scrollToTop(),this.scrolled=!0)},e.prototype.scrollToRestoredPosition=function(){var t,e;return t=null!=(e=this.restorationData)?e.scrollPosition:void 0,null!=t?(this.controller.scrollToPosition(t),!0):void 0},e.prototype.scrollToAnchor=function(){return null!=this.location.anchor?(this.controller.scrollToAnchor(this.location.anchor),!0):void 0},e.prototype.scrollToTop=function(){return this.controller.scrollToPosition({x:0,y:0})},e.prototype.recordTimingMetric=function(t){var e;return null!=(e=this.timingMetrics)[t]?e[t]:e[t]=(new Date).getTime()},e.prototype.getTimingMetrics=function(){return r.copyObject(this.timingMetrics)},n=function(t){switch(t){case"replace":return"replaceHistoryWithLocationAndRestorationIdentifier";case"advance":case"restore":return"pushHistoryWithLocationAndRestorationIdentifier"}},e.prototype.shouldIssueRequest=function(){return"restore"!==this.action||!this.hasCachedSnapshot()},e.prototype.cacheSnapshot=function(){return this.snapshotCached?void 0:(this.controller.cacheSnapshot(),this.snapshotCached=!0)},e.prototype.render=function(t){return this.cancelRender(),this.frame=requestAnimationFrame(function(e){return function(){return e.frame=null,t.call(e)}}(this))},e.prototype.cancelRender=function(){return this.frame?cancelAnimationFrame(this.frame):void 0},e}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};r.Controller=function(){function e(){this.clickBubbled=t(this.clickBubbled,this),this.clickCaptured=t(this.clickCaptured,this),this.pageLoaded=t(this.pageLoaded,this),this.history=new r.History(this),this.view=new r.View(this),this.scrollManager=new r.ScrollManager(this),this.restorationData={},this.clearCache()}return e.prototype.start=function(){return r.supported&&!this.started?(addEventListener("click",this.clickCaptured,!0),addEventListener("DOMContentLoaded",this.pageLoaded,!1),this.scrollManager.start(),this.startHistory(),this.started=!0,this.enabled=!0):void 0},e.prototype.disable=function(){return this.enabled=!1},e.prototype.stop=function(){return this.started?(removeEventListener("click",this.clickCaptured,!0),removeEventListener("DOMContentLoaded",this.pageLoaded,!1),this.scrollManager.stop(),this.stopHistory(),this.started=!1):void 0},e.prototype.clearCache=function(){return this.cache=new r.SnapshotCache(10)},e.prototype.visit=function(t,e){var n,i;return null==e&&(e={}),t=r.Location.wrap(t),this.applicationAllowsVisitingLocation(t)?this.locationIsVisitable(t)?(n=null!=(i=e.action)?i:"advance",this.adapter.visitProposedToLocationWithAction(t,n)):window.location=t:void 0},e.prototype.startVisitToLocationWithAction=function(t,e,n){var i;return r.supported?(i=this.getRestorationDataForIdentifier(n),this.startVisit(t,e,{restorationData:i})):window.location=t},e.prototype.startHistory=function(){return this.location=r.Location.wrap(window.location),this.restorationIdentifier=r.uuid(),this.history.start(),this.history.replace(this.location,this.restorationIdentifier)},e.prototype.stopHistory=function(){return this.history.stop()},e.prototype.pushHistoryWithLocationAndRestorationIdentifier=function(t,e){return this.restorationIdentifier=e,this.location=r.Location.wrap(t),this.history.push(this.location,this.restorationIdentifier)},e.prototype.replaceHistoryWithLocationAndRestorationIdentifier=function(t,e){return this.restorationIdentifier=e,this.location=r.Location.wrap(t),this.history.replace(this.location,this.restorationIdentifier)},e.prototype.historyPoppedToLocationWithRestorationIdentifier=function(t,e){var n;return this.restorationIdentifier=e,this.enabled?(n=this.getRestorationDataForIdentifier(this.restorationIdentifier),this.startVisit(t,"restore",{restorationIdentifier:this.restorationIdentifier,restorationData:n,historyChanged:!0}),this.location=r.Location.wrap(t)):this.adapter.pageInvalidated()},e.prototype.getCachedSnapshotForLocation=function(t){var e;return e=this.cache.get(t),e?e.clone():void 0},e.prototype.shouldCacheSnapshot=function(){return this.view.getSnapshot().isCacheable()},e.prototype.cacheSnapshot=function(){var t;return this.shouldCacheSnapshot()?(this.notifyApplicationBeforeCachingSnapshot(),t=this.view.getSnapshot(),this.cache.put(this.lastRenderedLocation,t.clone())):void 0},e.prototype.scrollToAnchor=function(t){var e;return(e=document.getElementById(t))?this.scrollToElement(e):this.scrollToPosition({x:0,y:0})},e.prototype.scrollToElement=function(t){return this.scrollManager.scrollToElement(t)},e.prototype.scrollToPosition=function(t){return this.scrollManager.scrollToPosition(t)},e.prototype.scrollPositionChanged=function(t){var e;return e=this.getCurrentRestorationData(),e.scrollPosition=t},e.prototype.render=function(t,e){return this.view.render(t,e)},e.prototype.viewInvalidated=function(){return this.adapter.pageInvalidated()},e.prototype.viewWillRender=function(t){return this.notifyApplicationBeforeRender(t)},e.prototype.viewRendered=function(){return this.lastRenderedLocation=this.currentVisit.location,this.notifyApplicationAfterRender()},e.prototype.pageLoaded=function(){return this.lastRenderedLocation=this.location,this.notifyApplicationAfterPageLoad()},e.prototype.clickCaptured=function(){return removeEventListener("click",this.clickBubbled,!1),addEventListener("click",this.clickBubbled,!1)},e.prototype.clickBubbled=function(t){var e,n,i;return this.enabled&&this.clickEventIsSignificant(t)&&(n=this.getVisitableLinkForNode(t.target))&&(i=this.getVisitableLocationForLink(n))&&this.applicationAllowsFollowingLinkToLocation(n,i)?(t.preventDefault(),e=this.getActionForLink(n),this.visit(i,{action:e})):void 0},e.prototype.applicationAllowsFollowingLinkToLocation=function(t,e){var n;return n=this.notifyApplicationAfterClickingLinkToLocation(t,e),!n.defaultPrevented},e.prototype.applicationAllowsVisitingLocation=function(t){var e;return e=this.notifyApplicationBeforeVisitingLocation(t),!e.defaultPrevented},e.prototype.notifyApplicationAfterClickingLinkToLocation=function(t,e){return r.dispatch("turbolinks:click",{target:t,data:{url:e.absoluteURL},cancelable:!0})},e.prototype.notifyApplicationBeforeVisitingLocation=function(t){return r.dispatch("turbolinks:before-visit",{data:{url:t.absoluteURL},cancelable:!0})},e.prototype.notifyApplicationAfterVisitingLocation=function(t){return r.dispatch("turbolinks:visit",{data:{url:t.absoluteURL}})},e.prototype.notifyApplicationBeforeCachingSnapshot=function(){return r.dispatch("turbolinks:before-cache")},e.prototype.notifyApplicationBeforeRender=function(t){return r.dispatch("turbolinks:before-render",{data:{newBody:t}})},e.prototype.notifyApplicationAfterRender=function(){return r.dispatch("turbolinks:render")},e.prototype.notifyApplicationAfterPageLoad=function(t){return null==t&&(t={}),r.dispatch("turbolinks:load",{data:{url:this.location.absoluteURL,timing:t}})},e.prototype.startVisit=function(t,e,n){var i;return null!=(i=this.currentVisit)&&i.cancel(),this.currentVisit=this.createVisit(t,e,n),this.currentVisit.start(),this.notifyApplicationAfterVisitingLocation(t)},e.prototype.createVisit=function(t,e,n){var i,o,s,a,l;return o=null!=n?n:{},a=o.restorationIdentifier,s=o.restorationData,i=o.historyChanged,l=new r.Visit(this,t,e),l.restorationIdentifier=null!=a?a:r.uuid(),l.restorationData=r.copyObject(s),l.historyChanged=i,l.referrer=this.location,l},e.prototype.visitCompleted=function(t){return this.notifyApplicationAfterPageLoad(t.getTimingMetrics())},e.prototype.clickEventIsSignificant=function(t){return!(t.defaultPrevented||t.target.isContentEditable||t.which>1||t.altKey||t.ctrlKey||t.metaKey||t.shiftKey)},e.prototype.getVisitableLinkForNode=function(t){return this.nodeIsVisitable(t)?r.closest(t,"a[href]:not([target])"):void 0},e.prototype.getVisitableLocationForLink=function(t){var e;return e=new r.Location(t.getAttribute("href")),this.locationIsVisitable(e)?e:void 0},e.prototype.getActionForLink=function(t){var e;return null!=(e=t.getAttribute("data-turbolinks-action"))?e:"advance"},e.prototype.nodeIsVisitable=function(t){var e;return!(e=r.closest(t,"[data-turbolinks]"))||"false"!==e.getAttribute("data-turbolinks")},e.prototype.locationIsVisitable=function(t){return t.isPrefixedBy(this.view.getRootLocation())&&t.isHTML()},e.prototype.getCurrentRestorationData=function(){return this.getRestorationDataForIdentifier(this.restorationIdentifier)},e.prototype.getRestorationDataForIdentifier=function(t){var e;return null!=(e=this.restorationData)[t]?e[t]:e[t]={}},e}()}.call(this),function(){var t,e,n;r.start=function(){return e()?(null==r.controller&&(r.controller=t()),r.controller.start()):void 0},e=function(){return null==window.Turbolinks&&(window.Turbolinks=r),n()},t=function(){var t;return t=new r.Controller,t.adapter=new r.BrowserAdapter(t),t},n=function(){return window.Turbolinks===r},n()&&r.start()}.call(this)}).call(this),"object"==typeof t&&t.exports?t.exports=r:n(9)&&(i=r,o="function"==typeof i?i.call(e,n,e,t):i,!(void 0!==o&&(t.exports=o)))}).call(this)},function(t,e){(function(e){t.exports=e}).call(e,{})}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vdmVuZG9yLmpzIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCBhNDhmNDU1MzZhODY5MWM5NjVkYiIsIndlYnBhY2s6Ly8vLi9+L3RldGhlci9kaXN0L2pzL3RldGhlci5qcz81ZDlmIiwid2VicGFjazovLy8uL34vdGV0aGVyL2Rpc3QvanMvdGV0aGVyLmpzP2JjY2IiLCJ3ZWJwYWNrOi8vLy4vfi90ZXRoZXIvZGlzdC9qcy90ZXRoZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9ib290c3RyYXAvZGlzdC9qcy9ib290c3RyYXAuanMiLCJ3ZWJwYWNrOi8vLy4vfi90dXJib2xpbmtzL2Rpc3QvdHVyYm9saW5rcy5qcz9mNDAyIiwid2VicGFjazovLy8uL34vdHVyYm9saW5rcy9kaXN0L3R1cmJvbGlua3MuanM/ZGVkMiIsIndlYnBhY2s6Ly8vLi9+L3R1cmJvbGlua3MvZGlzdC90dXJib2xpbmtzLmpzIiwid2VicGFjazovLy8od2VicGFjaykvYnVpbGRpbi9hbWQtb3B0aW9ucy5qcyJdLCJuYW1lcyI6WyJtb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiaW5zdGFsbGVkTW9kdWxlcyIsImV4cG9ydHMiLCJtb2R1bGUiLCJpZCIsImxvYWRlZCIsImNhbGwiLCJwYXJlbnRKc29ucEZ1bmN0aW9uIiwid2luZG93IiwiY2h1bmtJZHMiLCJtb3JlTW9kdWxlcyIsImNodW5rSWQiLCJpIiwiY2FsbGJhY2tzIiwibGVuZ3RoIiwiaW5zdGFsbGVkQ2h1bmtzIiwicHVzaCIsImFwcGx5Iiwic2hpZnQiLCIxIiwiZSIsImNhbGxiYWNrIiwidW5kZWZpbmVkIiwiaGVhZCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJzY3JpcHQiLCJjcmVhdGVFbGVtZW50IiwidHlwZSIsImNoYXJzZXQiLCJhc3luYyIsInNyYyIsInAiLCJhcHBlbmRDaGlsZCIsIm0iLCJjIiwiZ2xvYmFsIiwidGhpcyIsIl9fV0VCUEFDS19BTURfREVGSU5FX0ZBQ1RPUllfXyIsIl9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fIiwicm9vdCIsImZhY3RvcnkiLCJyZXF1aXJlIiwiX2NsYXNzQ2FsbENoZWNrIiwiaW5zdGFuY2UiLCJDb25zdHJ1Y3RvciIsIlR5cGVFcnJvciIsImdldEFjdHVhbEJvdW5kaW5nQ2xpZW50UmVjdCIsIm5vZGUiLCJib3VuZGluZ1JlY3QiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJyZWN0IiwiayIsIm93bmVyRG9jdW1lbnQiLCJfZnJhbWVFbGVtZW50IiwiZGVmYXVsdFZpZXciLCJmcmFtZUVsZW1lbnQiLCJmcmFtZVJlY3QiLCJ0b3AiLCJib3R0b20iLCJsZWZ0IiwicmlnaHQiLCJnZXRTY3JvbGxQYXJlbnRzIiwiZWwiLCJjb21wdXRlZFN0eWxlIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsInBvc2l0aW9uIiwicGFyZW50cyIsInBhcmVudCIsInBhcmVudE5vZGUiLCJub2RlVHlwZSIsInN0eWxlIiwiZXJyIiwiX3N0eWxlIiwib3ZlcmZsb3ciLCJvdmVyZmxvd1giLCJvdmVyZmxvd1kiLCJ0ZXN0IiwiaW5kZXhPZiIsImJvZHkiLCJyZW1vdmVVdGlsRWxlbWVudHMiLCJ6ZXJvRWxlbWVudCIsInJlbW92ZUNoaWxkIiwiZ2V0Qm91bmRzIiwiZG9jIiwiZG9jdW1lbnRFbGVtZW50IiwiZG9jRWwiLCJib3giLCJvcmlnaW4iLCJnZXRPcmlnaW4iLCJ3aWR0aCIsInNjcm9sbFdpZHRoIiwiaGVpZ2h0Iiwic2Nyb2xsSGVpZ2h0IiwiY2xpZW50VG9wIiwiY2xpZW50TGVmdCIsImNsaWVudFdpZHRoIiwiY2xpZW50SGVpZ2h0IiwiZ2V0T2Zmc2V0UGFyZW50Iiwib2Zmc2V0UGFyZW50IiwiZ2V0U2Nyb2xsQmFyU2l6ZSIsIl9zY3JvbGxCYXJTaXplIiwiaW5uZXIiLCJvdXRlciIsImV4dGVuZCIsInBvaW50ZXJFdmVudHMiLCJ2aXNpYmlsaXR5Iiwid2lkdGhDb250YWluZWQiLCJvZmZzZXRXaWR0aCIsIndpZHRoU2Nyb2xsIiwib3V0IiwiYXJndW1lbnRzIiwiYXJncyIsIkFycmF5IiwicHJvdG90eXBlIiwic2xpY2UiLCJmb3JFYWNoIiwib2JqIiwia2V5IiwiaGFzT3duUHJvcGVydHkiLCJyZW1vdmVDbGFzcyIsIm5hbWUiLCJjbGFzc0xpc3QiLCJzcGxpdCIsImNscyIsInRyaW0iLCJyZW1vdmUiLCJyZWdleCIsIlJlZ0V4cCIsImpvaW4iLCJjbGFzc05hbWUiLCJnZXRDbGFzc05hbWUiLCJyZXBsYWNlIiwic2V0Q2xhc3NOYW1lIiwiYWRkQ2xhc3MiLCJhZGQiLCJoYXNDbGFzcyIsImNvbnRhaW5zIiwiU1ZHQW5pbWF0ZWRTdHJpbmciLCJiYXNlVmFsIiwic2V0QXR0cmlidXRlIiwidXBkYXRlQ2xhc3NlcyIsImFsbCIsIl9pbmhlcml0cyIsInN1YkNsYXNzIiwic3VwZXJDbGFzcyIsIk9iamVjdCIsImNyZWF0ZSIsImNvbnN0cnVjdG9yIiwidmFsdWUiLCJlbnVtZXJhYmxlIiwid3JpdGFibGUiLCJjb25maWd1cmFibGUiLCJzZXRQcm90b3R5cGVPZiIsIl9fcHJvdG9fXyIsIndpdGhpbiIsImEiLCJiIiwiZGlmZiIsIm5vdyIsInBlcmZvcm1hbmNlIiwiRGF0ZSIsImFkZE9mZnNldCIsIl9sZW4iLCJvZmZzZXRzIiwiX2tleSIsIl9yZWYiLCJwYXJzZUZsb2F0Iiwib2Zmc2V0VG9QeCIsIm9mZnNldCIsInNpemUiLCJnZXRCb3VuZGluZ1JlY3QiLCJ0ZXRoZXIiLCJ0byIsInNjcm9sbFBhcmVudHMiLCJwYWdlWE9mZnNldCIsInBhZ2VZT2Zmc2V0IiwiaW5uZXJXaWR0aCIsImlubmVySGVpZ2h0IiwicG9zIiwid2luIiwiQk9VTkRTX0ZPUk1BVCIsInNpZGUiLCJ0b1VwcGVyQ2FzZSIsInN1YnN0ciIsIl9jcmVhdGVDbGFzcyIsImRlZmluZVByb3BlcnRpZXMiLCJ0YXJnZXQiLCJwcm9wcyIsImRlc2NyaXB0b3IiLCJkZWZpbmVQcm9wZXJ0eSIsInByb3RvUHJvcHMiLCJzdGF0aWNQcm9wcyIsIlRldGhlckJhc2UiLCJ1bmlxdWVJZCIsInplcm9Qb3NDYWNoZSIsImdldEF0dHJpYnV0ZSIsImRlZmVyIiwiZGVmZXJyZWQiLCJmbiIsImZsdXNoIiwicG9wIiwiRXZlbnRlZCIsImV2ZW50IiwiaGFuZGxlciIsImN0eCIsIm9uY2UiLCJiaW5kaW5ncyIsIm9uIiwic3BsaWNlIiwiX2JpbmRpbmdzJGV2ZW50JGkiLCJjb250ZXh0IiwiVXRpbHMiLCJfc2xpY2VkVG9BcnJheSIsInNsaWNlSXRlcmF0b3IiLCJhcnIiLCJfYXJyIiwiX24iLCJfZCIsIl9lIiwiX3MiLCJfaSIsIlN5bWJvbCIsIml0ZXJhdG9yIiwibmV4dCIsImRvbmUiLCJpc0FycmF5IiwiX2dldCIsIl94NiIsIl94NyIsIl94OCIsIl9hZ2FpbiIsIm9iamVjdCIsInByb3BlcnR5IiwicmVjZWl2ZXIiLCJGdW5jdGlvbiIsImRlc2MiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJnZXR0ZXIiLCJnZXQiLCJnZXRQcm90b3R5cGVPZiIsIkVycm9yIiwiX1RldGhlckJhc2UkVXRpbHMiLCJ0cmFuc2Zvcm1LZXkiLCJ0cmFuc2Zvcm1zIiwidGV0aGVycyIsImxhc3RDYWxsIiwibGFzdER1cmF0aW9uIiwicGVuZGluZ1RpbWVvdXQiLCJ0aWNrIiwiTWF0aCIsIm1pbiIsInNldFRpbWVvdXQiLCJjbGVhclRpbWVvdXQiLCJhZGRFdmVudExpc3RlbmVyIiwiTUlSUk9SX0xSIiwiY2VudGVyIiwiTUlSUk9SX1RCIiwibWlkZGxlIiwiT0ZGU0VUX01BUCIsImF1dG9Ub0ZpeGVkQXR0YWNobWVudCIsImF0dGFjaG1lbnQiLCJyZWxhdGl2ZVRvQXR0YWNobWVudCIsImF0dGFjaG1lbnRUb09mZnNldCIsInBhcnNlT2Zmc2V0IiwiX3ZhbHVlJHNwbGl0IiwiX3ZhbHVlJHNwbGl0MiIsInBhcnNlQXR0YWNobWVudCIsIlRldGhlckNsYXNzIiwiX0V2ZW50ZWQiLCJvcHRpb25zIiwiX3RoaXMiLCJiaW5kIiwiaGlzdG9yeSIsInNldE9wdGlvbnMiLCJpbml0aWFsaXplIiwiY2xhc3NlcyIsImNsYXNzUHJlZml4IiwiX3RoaXMyIiwiZGVmYXVsdHMiLCJ0YXJnZXRPZmZzZXQiLCJ0YXJnZXRBdHRhY2htZW50IiwiX29wdGlvbnMiLCJlbGVtZW50IiwidGFyZ2V0TW9kaWZpZXIiLCJqcXVlcnkiLCJxdWVyeVNlbGVjdG9yIiwiZ2V0Q2xhc3MiLCJhZGRUYXJnZXRDbGFzc2VzIiwiZGlzYWJsZSIsImVuYWJsZWQiLCJlbmFibGUiLCJib3VuZHMiLCJoYXNCb3R0b21TY3JvbGwiLCJzY3JvbGxCb3R0b20iLCJib3JkZXJUb3BXaWR0aCIsImJvcmRlckJvdHRvbVdpZHRoIiwiYm9yZGVyTGVmdFdpZHRoIiwiZml0QWRqIiwicG93IiwibWF4Iiwic2Nyb2xsUGVyY2VudGFnZSIsInNjcm9sbFRvcCIsIl9jYWNoZSIsIl90aGlzMyIsIl90aGlzNCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJfdGhpczUiLCJlbGVtZW50QXR0YWNoIiwidGFyZ2V0QXR0YWNoIiwiX3RoaXM2Iiwic2lkZXMiLCJfYWRkQXR0YWNoQ2xhc3NlcyIsIl90aGlzNyIsImZsdXNoQ2hhbmdlcyIsImNsZWFyQ2FjaGUiLCJ1cGRhdGVBdHRhY2hDbGFzc2VzIiwiZWxlbWVudFBvcyIsImNhY2hlIiwibGFzdFNpemUiLCJfbGFzdFNpemUiLCJ0YXJnZXRQb3MiLCJnZXRUYXJnZXRCb3VuZHMiLCJ0YXJnZXRTaXplIiwibWFudWFsT2Zmc2V0IiwibWFudWFsVGFyZ2V0T2Zmc2V0IiwiX21vZHVsZTIiLCJyZXQiLCJzY3JvbGxiYXJTaXplIiwicGFnZSIsInZpZXdwb3J0IiwicGFyZW50RWxlbWVudCIsIm9wdGltaXphdGlvbnMiLCJtb3ZlRWxlbWVudCIsIm9mZnNldFBvc2l0aW9uIiwib2Zmc2V0UGFyZW50U3R5bGUiLCJvZmZzZXRQYXJlbnRTaXplIiwib2Zmc2V0Qm9yZGVyIiwidG9Mb3dlckNhc2UiLCJzY3JvbGxMZWZ0IiwibW92ZSIsInVuc2hpZnQiLCJfdGhpczgiLCJzYW1lIiwiZm91bmQiLCJwb2ludCIsImNzcyIsInRyYW5zY3JpYmUiLCJfc2FtZSIsIl9wb3MiLCJoYXNPcHRpbWl6YXRpb25zIiwiZ3B1IiwieVBvcyIsInhQb3MiLCJtYXRjaE1lZGlhIiwicmV0aW5hIiwibWF0Y2hlcyIsInJvdW5kIiwibW92ZWQiLCJvZmZzZXRQYXJlbnRJc0JvZHkiLCJjdXJyZW50Tm9kZSIsInRhZ05hbWUiLCJ3cml0ZUNTUyIsIndyaXRlIiwidmFsIiwiZWxWYWwiLCJ0cmlnZ2VyIiwiVGV0aGVyIiwiY29uc3RyYWludHMiLCJ0YXJnZXRIZWlnaHQiLCJ0YXJnZXRXaWR0aCIsImFsbENsYXNzZXMiLCJjb25zdHJhaW50Iiwib3V0T2ZCb3VuZHNDbGFzcyIsInBpbm5lZENsYXNzIiwiYWRkQ2xhc3NlcyIsInRBdHRhY2htZW50IiwiZUF0dGFjaG1lbnQiLCJwaW4iLCJjaGFuZ2VBdHRhY2hYIiwiY2hhbmdlQXR0YWNoWSIsIl9hdHRhY2htZW50JHNwbGl0IiwiX2F0dGFjaG1lbnQkc3BsaXQyIiwibWFwIiwicGlubmVkIiwib29iIiwib29iQ2xhc3MiLCJhYnV0dGVkIiwidGFyZ2V0UG9zU2lkZSIsInNoaWZ0VG9wIiwic2hpZnRMZWZ0IiwiX3NoaWZ0IiwiX3NoaWZ0MiIsImpRdWVyeSIsIiQiLCJ2ZXJzaW9uIiwiX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4iLCJzZWxmIiwiUmVmZXJlbmNlRXJyb3IiLCJfdHlwZW9mIiwiVXRpbCIsInRvVHlwZSIsInRvU3RyaW5nIiwibWF0Y2giLCJpc0VsZW1lbnQiLCJnZXRTcGVjaWFsVHJhbnNpdGlvbkVuZEV2ZW50IiwiYmluZFR5cGUiLCJ0cmFuc2l0aW9uIiwiZW5kIiwiZGVsZWdhdGVUeXBlIiwiaGFuZGxlIiwiaXMiLCJoYW5kbGVPYmoiLCJ0cmFuc2l0aW9uRW5kVGVzdCIsIlFVbml0IiwiVHJhbnNpdGlvbkVuZEV2ZW50IiwidHJhbnNpdGlvbkVuZEVtdWxhdG9yIiwiZHVyYXRpb24iLCJjYWxsZWQiLCJvbmUiLCJUUkFOU0lUSU9OX0VORCIsInRyaWdnZXJUcmFuc2l0aW9uRW5kIiwic2V0VHJhbnNpdGlvbkVuZFN1cHBvcnQiLCJlbXVsYXRlVHJhbnNpdGlvbkVuZCIsInN1cHBvcnRzVHJhbnNpdGlvbkVuZCIsInNwZWNpYWwiLCJNQVhfVUlEIiwiV2Via2l0VHJhbnNpdGlvbiIsIk1velRyYW5zaXRpb24iLCJPVHJhbnNpdGlvbiIsImdldFVJRCIsInByZWZpeCIsInJhbmRvbSIsImdldEVsZW1lbnRCeUlkIiwiZ2V0U2VsZWN0b3JGcm9tRWxlbWVudCIsInNlbGVjdG9yIiwicmVmbG93Iiwib2Zmc2V0SGVpZ2h0IiwiQm9vbGVhbiIsInR5cGVDaGVja0NvbmZpZyIsImNvbXBvbmVudE5hbWUiLCJjb25maWciLCJjb25maWdUeXBlcyIsImV4cGVjdGVkVHlwZXMiLCJ2YWx1ZVR5cGUiLCJUb29sdGlwIiwiTkFNRSIsIlZFUlNJT04iLCJEQVRBX0tFWSIsIkVWRU5UX0tFWSIsIkRBVEFfQVBJX0tFWSIsIkpRVUVSWV9OT19DT05GTElDVCIsIlRSQU5TSVRJT05fRFVSQVRJT04iLCJTZWxlY3RvciIsIkRJU01JU1MiLCJFdmVudCIsIkNMT1NFIiwiQ0xPU0VEIiwiQ0xJQ0tfREFUQV9BUEkiLCJDbGFzc05hbWUiLCJBTEVSVCIsIkZBREUiLCJJTiIsIkFsZXJ0IiwiX2VsZW1lbnQiLCJjbG9zZSIsInJvb3RFbGVtZW50IiwiX2dldFJvb3RFbGVtZW50IiwiY3VzdG9tRXZlbnQiLCJfdHJpZ2dlckNsb3NlRXZlbnQiLCJpc0RlZmF1bHRQcmV2ZW50ZWQiLCJfcmVtb3ZlRWxlbWVudCIsImRpc3Bvc2UiLCJyZW1vdmVEYXRhIiwiY2xvc2VzdCIsImNsb3NlRXZlbnQiLCJwcm94eSIsIl9kZXN0cm95RWxlbWVudCIsImRldGFjaCIsIl9qUXVlcnlJbnRlcmZhY2UiLCJlYWNoIiwiJGVsZW1lbnQiLCJkYXRhIiwiX2hhbmRsZURpc21pc3MiLCJhbGVydEluc3RhbmNlIiwicHJldmVudERlZmF1bHQiLCJub0NvbmZsaWN0IiwiQUNUSVZFIiwiQlVUVE9OIiwiRk9DVVMiLCJEQVRBX1RPR0dMRV9DQVJST1QiLCJEQVRBX1RPR0dMRSIsIklOUFVUIiwiRk9DVVNfQkxVUl9EQVRBX0FQSSIsIkJ1dHRvbiIsInRvZ2dsZSIsInRyaWdnZXJDaGFuZ2VFdmVudCIsImlucHV0IiwiZmluZCIsImNoZWNrZWQiLCJhY3RpdmVFbGVtZW50IiwiZm9jdXMiLCJ0b2dnbGVDbGFzcyIsImJ1dHRvbiIsIkFSUk9XX0xFRlRfS0VZQ09ERSIsIkFSUk9XX1JJR0hUX0tFWUNPREUiLCJEZWZhdWx0IiwiaW50ZXJ2YWwiLCJrZXlib2FyZCIsInNsaWRlIiwicGF1c2UiLCJ3cmFwIiwiRGVmYXVsdFR5cGUiLCJEaXJlY3Rpb24iLCJORVhUIiwiUFJFVklPVVMiLCJTTElERSIsIlNMSUQiLCJLRVlET1dOIiwiTU9VU0VFTlRFUiIsIk1PVVNFTEVBVkUiLCJMT0FEX0RBVEFfQVBJIiwiQ0FST1VTRUwiLCJSSUdIVCIsIkxFRlQiLCJJVEVNIiwiQUNUSVZFX0lURU0iLCJORVhUX1BSRVYiLCJJTkRJQ0FUT1JTIiwiREFUQV9TTElERSIsIkRBVEFfUklERSIsIkNhcm91c2VsIiwiX2l0ZW1zIiwiX2ludGVydmFsIiwiX2FjdGl2ZUVsZW1lbnQiLCJfaXNQYXVzZWQiLCJfaXNTbGlkaW5nIiwiX2NvbmZpZyIsIl9nZXRDb25maWciLCJfaW5kaWNhdG9yc0VsZW1lbnQiLCJfYWRkRXZlbnRMaXN0ZW5lcnMiLCJfc2xpZGUiLCJuZXh0V2hlblZpc2libGUiLCJoaWRkZW4iLCJwcmV2IiwiY3ljbGUiLCJjbGVhckludGVydmFsIiwic2V0SW50ZXJ2YWwiLCJ2aXNpYmlsaXR5U3RhdGUiLCJpbmRleCIsImFjdGl2ZUluZGV4IiwiX2dldEl0ZW1JbmRleCIsImRpcmVjdGlvbiIsIm9mZiIsIl9rZXlkb3duIiwid2hpY2giLCJtYWtlQXJyYXkiLCJfZ2V0SXRlbUJ5RGlyZWN0aW9uIiwiaXNOZXh0RGlyZWN0aW9uIiwiaXNQcmV2RGlyZWN0aW9uIiwibGFzdEl0ZW1JbmRleCIsImlzR29pbmdUb1dyYXAiLCJkZWx0YSIsIml0ZW1JbmRleCIsIl90cmlnZ2VyU2xpZGVFdmVudCIsInJlbGF0ZWRUYXJnZXQiLCJkaXJlY3Rpb25hbENsYXNzbmFtZSIsInNsaWRlRXZlbnQiLCJfc2V0QWN0aXZlSW5kaWNhdG9yRWxlbWVudCIsIm5leHRJbmRpY2F0b3IiLCJjaGlsZHJlbiIsIm5leHRFbGVtZW50IiwiaXNDeWNsaW5nIiwiZGlyZWN0aW9uYWxDbGFzc05hbWUiLCJzbGlkRXZlbnQiLCJhY3Rpb24iLCJfZGF0YUFwaUNsaWNrSGFuZGxlciIsInNsaWRlSW5kZXgiLCIkY2Fyb3VzZWwiLCJTSE9XIiwiU0hPV04iLCJISURFIiwiSElEREVOIiwiQ09MTEFQU0UiLCJDT0xMQVBTSU5HIiwiQ09MTEFQU0VEIiwiRGltZW5zaW9uIiwiV0lEVEgiLCJIRUlHSFQiLCJBQ1RJVkVTIiwiQ29sbGFwc2UiLCJfaXNUcmFuc2l0aW9uaW5nIiwiX3RyaWdnZXJBcnJheSIsIl9wYXJlbnQiLCJfZ2V0UGFyZW50IiwiX2FkZEFyaWFBbmRDb2xsYXBzZWRDbGFzcyIsImhpZGUiLCJzaG93IiwiYWN0aXZlcyIsImFjdGl2ZXNEYXRhIiwic3RhcnRFdmVudCIsImRpbWVuc2lvbiIsIl9nZXREaW1lbnNpb24iLCJhdHRyIiwic2V0VHJhbnNpdGlvbmluZyIsImNvbXBsZXRlIiwiY2FwaXRhbGl6ZWREaW1lbnNpb24iLCJzY3JvbGxTaXplIiwib2Zmc2V0RGltZW5zaW9uIiwiaXNUcmFuc2l0aW9uaW5nIiwiaGFzV2lkdGgiLCJfZ2V0VGFyZ2V0RnJvbUVsZW1lbnQiLCJ0cmlnZ2VyQXJyYXkiLCJpc09wZW4iLCIkdGhpcyIsIkVTQ0FQRV9LRVlDT0RFIiwiQVJST1dfVVBfS0VZQ09ERSIsIkFSUk9XX0RPV05fS0VZQ09ERSIsIlJJR0hUX01PVVNFX0JVVFRPTl9XSElDSCIsIkNMSUNLIiwiS0VZRE9XTl9EQVRBX0FQSSIsIkJBQ0tEUk9QIiwiRElTQUJMRUQiLCJPUEVOIiwiRk9STV9DSElMRCIsIlJPTEVfTUVOVSIsIlJPTEVfTElTVEJPWCIsIk5BVkJBUl9OQVYiLCJWSVNJQkxFX0lURU1TIiwiRHJvcGRvd24iLCJkaXNhYmxlZCIsIl9nZXRQYXJlbnRGcm9tRWxlbWVudCIsImlzQWN0aXZlIiwiX2NsZWFyTWVudXMiLCJkcm9wZG93biIsImluc2VydEJlZm9yZSIsInNob3dFdmVudCIsImJhY2tkcm9wIiwidG9nZ2xlcyIsImhpZGVFdmVudCIsIl9kYXRhQXBpS2V5ZG93bkhhbmRsZXIiLCJzdG9wUHJvcGFnYXRpb24iLCJpdGVtcyIsImZpbHRlciIsIml0ZW0iLCJCQUNLRFJPUF9UUkFOU0lUSU9OX0RVUkFUSU9OIiwiRk9DVVNJTiIsIlJFU0laRSIsIkNMSUNLX0RJU01JU1MiLCJLRVlET1dOX0RJU01JU1MiLCJNT1VTRVVQX0RJU01JU1MiLCJNT1VTRURPV05fRElTTUlTUyIsIlNDUk9MTEJBUl9NRUFTVVJFUiIsIkRJQUxPRyIsIkRBVEFfRElTTUlTUyIsIkZJWEVEX0NPTlRFTlQiLCJNb2RhbCIsIl9kaWFsb2ciLCJfYmFja2Ryb3AiLCJfaXNTaG93biIsIl9pc0JvZHlPdmVyZmxvd2luZyIsIl9pZ25vcmVCYWNrZHJvcENsaWNrIiwiX29yaWdpbmFsQm9keVBhZGRpbmciLCJfc2Nyb2xsYmFyV2lkdGgiLCJfY2hlY2tTY3JvbGxiYXIiLCJfc2V0U2Nyb2xsYmFyIiwiX3NldEVzY2FwZUV2ZW50IiwiX3NldFJlc2l6ZUV2ZW50IiwiX3Nob3dCYWNrZHJvcCIsIl9zaG93RWxlbWVudCIsIl9oaWRlTW9kYWwiLCJOb2RlIiwiRUxFTUVOVF9OT0RFIiwiZGlzcGxheSIsInJlbW92ZUF0dHJpYnV0ZSIsIl9lbmZvcmNlRm9jdXMiLCJzaG93bkV2ZW50IiwidHJhbnNpdGlvbkNvbXBsZXRlIiwiX3RoaXM5IiwiaGFzIiwiX3RoaXMxMCIsIl9oYW5kbGVVcGRhdGUiLCJfdGhpczExIiwiX3Jlc2V0QWRqdXN0bWVudHMiLCJfcmVzZXRTY3JvbGxiYXIiLCJfcmVtb3ZlQmFja2Ryb3AiLCJfdGhpczEyIiwiYW5pbWF0ZSIsImRvQW5pbWF0ZSIsImFwcGVuZFRvIiwiY3VycmVudFRhcmdldCIsImNhbGxiYWNrUmVtb3ZlIiwiX2FkanVzdERpYWxvZyIsImlzTW9kYWxPdmVyZmxvd2luZyIsInBhZGRpbmdMZWZ0IiwicGFkZGluZ1JpZ2h0IiwiX2dldFNjcm9sbGJhcldpZHRoIiwiYm9keVBhZGRpbmciLCJwYXJzZUludCIsInNjcm9sbERpdiIsInNjcm9sbGJhcldpZHRoIiwiX3RoaXMxMyIsIiR0YXJnZXQiLCJtZXRob2QiLCJBQ1RJVkFURSIsIlNDUk9MTCIsIkRST1BET1dOX0lURU0iLCJEUk9QRE9XTl9NRU5VIiwiTkFWX0xJTksiLCJOQVYiLCJEQVRBX1NQWSIsIkxJU1RfSVRFTSIsIkxJIiwiTElfRFJPUERPV04iLCJOQVZfTElOS1MiLCJEUk9QRE9XTiIsIkRST1BET1dOX0lURU1TIiwiRFJPUERPV05fVE9HR0xFIiwiT2Zmc2V0TWV0aG9kIiwiT0ZGU0VUIiwiUE9TSVRJT04iLCJTY3JvbGxTcHkiLCJfc2Nyb2xsRWxlbWVudCIsIl9zZWxlY3RvciIsIl9vZmZzZXRzIiwiX3RhcmdldHMiLCJfYWN0aXZlVGFyZ2V0IiwiX3Njcm9sbEhlaWdodCIsIl9wcm9jZXNzIiwicmVmcmVzaCIsIl90aGlzMTQiLCJhdXRvTWV0aG9kIiwib2Zmc2V0TWV0aG9kIiwib2Zmc2V0QmFzZSIsIl9nZXRTY3JvbGxUb3AiLCJfZ2V0U2Nyb2xsSGVpZ2h0IiwidGFyZ2V0cyIsInRhcmdldFNlbGVjdG9yIiwic29ydCIsInNjcm9sbFkiLCJtYXhTY3JvbGwiLCJfYWN0aXZhdGUiLCJfY2xlYXIiLCJpc0FjdGl2ZVRhcmdldCIsInF1ZXJpZXMiLCIkbGluayIsInNjcm9sbFNweXMiLCIkc3B5IiwiQSIsIlVMIiwiRkFERV9DSElMRCIsIkFDVElWRV9DSElMRCIsIkRST1BET1dOX0FDVElWRV9DSElMRCIsIlRhYiIsIl90aGlzMTUiLCJwcmV2aW91cyIsInVsRWxlbWVudCIsImhpZGRlbkV2ZW50IiwiY29udGFpbmVyIiwiYWN0aXZlIiwiX3RyYW5zaXRpb25Db21wbGV0ZSIsImRyb3Bkb3duQ2hpbGQiLCJkcm9wZG93bkVsZW1lbnQiLCJDTEFTU19QUkVGSVgiLCJhbmltYXRpb24iLCJ0ZW1wbGF0ZSIsInRpdGxlIiwiZGVsYXkiLCJodG1sIiwicGxhY2VtZW50IiwiQXR0YWNobWVudE1hcCIsIlRPUCIsIkJPVFRPTSIsIkhvdmVyU3RhdGUiLCJPVVQiLCJJTlNFUlRFRCIsIkZPQ1VTT1VUIiwiVE9PTFRJUCIsIlRPT0xUSVBfSU5ORVIiLCJUcmlnZ2VyIiwiSE9WRVIiLCJNQU5VQUwiLCJfaXNFbmFibGVkIiwiX3RpbWVvdXQiLCJfaG92ZXJTdGF0ZSIsIl9hY3RpdmVUcmlnZ2VyIiwiX3RldGhlciIsInRpcCIsIl9zZXRMaXN0ZW5lcnMiLCJ0b2dnbGVFbmFibGVkIiwiZGF0YUtleSIsIl9nZXREZWxlZ2F0ZUNvbmZpZyIsImNsaWNrIiwiX2lzV2l0aEFjdGl2ZVRyaWdnZXIiLCJfZW50ZXIiLCJfbGVhdmUiLCJnZXRUaXBFbGVtZW50IiwiY2xlYW51cFRldGhlciIsIl90aGlzMTYiLCJpc1dpdGhDb250ZW50IiwiaXNJblRoZURvbSIsInRpcElkIiwic2V0Q29udGVudCIsIl9nZXRBdHRhY2htZW50IiwicHJldkhvdmVyU3RhdGUiLCJfVFJBTlNJVElPTl9EVVJBVElPTiIsIl90aGlzMTciLCJnZXRUaXRsZSIsIiR0aXAiLCJzZXRFbGVtZW50Q29udGVudCIsImNvbnRlbnQiLCJlbXB0eSIsImFwcGVuZCIsInRleHQiLCJkZXN0cm95IiwiX3RoaXMxOCIsInRyaWdnZXJzIiwiZXZlbnRJbiIsImV2ZW50T3V0IiwiX2ZpeFRpdGxlIiwidGl0bGVUeXBlIiwiVElUTEUiLCJDT05URU5UIiwiUG9wb3ZlciIsIl9Ub29sdGlwIiwiX2dldENvbnRlbnQiLCJUdXJib2xpbmtzIiwic3VwcG9ydGVkIiwicHVzaFN0YXRlIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwidmlzaXQiLCJyIiwidCIsImNvbnRyb2xsZXIiLCJjb3B5T2JqZWN0IiwibiIsImRpc3BhdGNoIiwibyIsInMiLCJjYW5jZWxhYmxlIiwiY3JlYXRlRXZlbnQiLCJpbml0RXZlbnQiLCJkaXNwYXRjaEV2ZW50IiwibWF0Y2hlc1NlbGVjdG9yIiwid2Via2l0TWF0Y2hlc1NlbGVjdG9yIiwibXNNYXRjaGVzU2VsZWN0b3IiLCJtb3pNYXRjaGVzU2VsZWN0b3IiLCJ1dWlkIiwiZmxvb3IiLCJMb2NhdGlvbiIsImhyZWYiLCJhYnNvbHV0ZVVSTCIsImhhc2giLCJyZXF1ZXN0VVJMIiwiYW5jaG9yIiwiZ2V0UGF0aCIsImdldFBhdGhDb21wb25lbnRzIiwiZ2V0TGFzdFBhdGhDb21wb25lbnQiLCJnZXRFeHRlbnNpb24iLCJpc0hUTUwiLCJpc1ByZWZpeGVkQnkiLCJpc0VxdWFsVG8iLCJ0b0NhY2hlS2V5IiwidG9KU09OIiwidmFsdWVPZiIsIkh0dHBSZXF1ZXN0IiwiZGVsZWdhdGUiLCJyZXF1ZXN0Q2FuY2VsZWQiLCJyZXF1ZXN0VGltZWRPdXQiLCJyZXF1ZXN0RmFpbGVkIiwicmVxdWVzdExvYWRlZCIsInJlcXVlc3RQcm9ncmVzc2VkIiwidXJsIiwicmVmZXJyZXIiLCJjcmVhdGVYSFIiLCJORVRXT1JLX0ZBSUxVUkUiLCJUSU1FT1VUX0ZBSUxVUkUiLCJ0aW1lb3V0Iiwic2VuZCIsInhociIsInNlbnQiLCJub3RpZnlBcHBsaWNhdGlvbkJlZm9yZVJlcXVlc3RTdGFydCIsInNldFByb2dyZXNzIiwicmVxdWVzdFN0YXJ0ZWQiLCJjYW5jZWwiLCJhYm9ydCIsImxlbmd0aENvbXB1dGFibGUiLCJ0b3RhbCIsImVuZFJlcXVlc3QiLCJzdGF0dXMiLCJyZXF1ZXN0Q29tcGxldGVkV2l0aFJlc3BvbnNlIiwicmVzcG9uc2VUZXh0IiwiZ2V0UmVzcG9uc2VIZWFkZXIiLCJmYWlsZWQiLCJyZXF1ZXN0RmFpbGVkV2l0aFN0YXR1c0NvZGUiLCJub3RpZnlBcHBsaWNhdGlvbkFmdGVyUmVxdWVzdEVuZCIsIlhNTEh0dHBSZXF1ZXN0Iiwib3BlbiIsInNldFJlcXVlc3RIZWFkZXIiLCJvbnByb2dyZXNzIiwib25sb2FkIiwib25lcnJvciIsIm9udGltZW91dCIsIm9uYWJvcnQiLCJwcm9ncmVzcyIsInJlcXVlc3RGaW5pc2hlZCIsIlByb2dyZXNzQmFyIiwidHJpY2tsZSIsInN0eWxlc2hlZXRFbGVtZW50IiwiY3JlYXRlU3R5bGVzaGVldEVsZW1lbnQiLCJwcm9ncmVzc0VsZW1lbnQiLCJjcmVhdGVQcm9ncmVzc0VsZW1lbnQiLCJkZWZhdWx0Q1NTIiwidmlzaWJsZSIsImluc3RhbGxTdHlsZXNoZWV0RWxlbWVudCIsImluc3RhbGxQcm9ncmVzc0VsZW1lbnQiLCJzdGFydFRyaWNrbGluZyIsImhpZGluZyIsImZhZGVQcm9ncmVzc0VsZW1lbnQiLCJ1bmluc3RhbGxQcm9ncmVzc0VsZW1lbnQiLCJzdG9wVHJpY2tsaW5nIiwic2V0VmFsdWUiLCJmaXJzdENoaWxkIiwib3BhY2l0eSIsInRyaWNrbGVJbnRlcnZhbCIsInRleHRDb250ZW50IiwiQnJvd3NlckFkYXB0ZXIiLCJzaG93UHJvZ3Jlc3NCYXIiLCJwcm9ncmVzc0JhciIsInZpc2l0UHJvcG9zZWRUb0xvY2F0aW9uV2l0aEFjdGlvbiIsInN0YXJ0VmlzaXRUb0xvY2F0aW9uV2l0aEFjdGlvbiIsInZpc2l0U3RhcnRlZCIsImlzc3VlUmVxdWVzdCIsImNoYW5nZUhpc3RvcnkiLCJsb2FkQ2FjaGVkU25hcHNob3QiLCJ2aXNpdFJlcXVlc3RTdGFydGVkIiwiaGFzQ2FjaGVkU25hcHNob3QiLCJzaG93UHJvZ3Jlc3NCYXJBZnRlckRlbGF5IiwidmlzaXRSZXF1ZXN0UHJvZ3Jlc3NlZCIsInZpc2l0UmVxdWVzdENvbXBsZXRlZCIsImxvYWRSZXNwb25zZSIsInZpc2l0UmVxdWVzdEZhaWxlZFdpdGhTdGF0dXNDb2RlIiwicmVsb2FkIiwidmlzaXRSZXF1ZXN0RmluaXNoZWQiLCJoaWRlUHJvZ3Jlc3NCYXIiLCJ2aXNpdENvbXBsZXRlZCIsImZvbGxvd1JlZGlyZWN0IiwicGFnZUludmFsaWRhdGVkIiwicHJvZ3Jlc3NCYXJUaW1lb3V0IiwibG9jYXRpb24iLCJIaXN0b3J5Iiwib25Qb3BTdGF0ZSIsInN0YXJ0Iiwic3RhcnRlZCIsInN0b3AiLCJ1cGRhdGUiLCJzaG91bGRIYW5kbGVQb3BTdGF0ZSIsInN0YXRlIiwidHVyYm9saW5rcyIsInJlc3RvcmF0aW9uSWRlbnRpZmllciIsImhpc3RvcnlQb3BwZWRUb0xvY2F0aW9uV2l0aFJlc3RvcmF0aW9uSWRlbnRpZmllciIsIlNuYXBzaG90IiwiZnJvbUhUTUwiLCJpbm5lckhUTUwiLCJmcm9tRWxlbWVudCIsImNsb25lIiwiY2xvbmVOb2RlIiwiZ2V0Um9vdExvY2F0aW9uIiwiZ2V0U2V0dGluZyIsImdldENhY2hlQ29udHJvbFZhbHVlIiwiaGFzQW5jaG9yIiwiaXNQcmV2aWV3YWJsZSIsImlzQ2FjaGVhYmxlIiwicXVlcnlTZWxlY3RvckFsbCIsIlJlbmRlcmVyIiwicmVuZGVyIiwicmVuZGVyVmlldyIsInZpZXdXaWxsUmVuZGVyIiwibmV3Qm9keSIsInZpZXdSZW5kZXJlZCIsImludmFsaWRhdGVWaWV3Iiwidmlld0ludmFsaWRhdGVkIiwiY3JlYXRlU2NyaXB0RWxlbWVudCIsInUiLCJhdHRyaWJ1dGVzIiwiSGVhZERldGFpbHMiLCJlbGVtZW50cyIsImNoaWxkTm9kZXMiLCJvdXRlckhUTUwiLCJ0cmFja2VkIiwiaGFzRWxlbWVudFdpdGhLZXkiLCJnZXRUcmFja2VkRWxlbWVudFNpZ25hdHVyZSIsImdldFNjcmlwdEVsZW1lbnRzTm90SW5EZXRhaWxzIiwiZ2V0RWxlbWVudHNNYXRjaGluZ1R5cGVOb3RJbkRldGFpbHMiLCJnZXRTdHlsZXNoZWV0RWxlbWVudHNOb3RJbkRldGFpbHMiLCJnZXRQcm92aXNpb25hbEVsZW1lbnRzIiwiX19zdXBlcl9fIiwiU25hcHNob3RSZW5kZXJlciIsImN1cnJlbnRTbmFwc2hvdCIsIm5ld1NuYXBzaG90IiwiY3VycmVudEhlYWREZXRhaWxzIiwibmV3SGVhZERldGFpbHMiLCJ0cmFja2VkRWxlbWVudHNBcmVJZGVudGljYWwiLCJtZXJnZUhlYWQiLCJyZXBsYWNlQm9keSIsImZvY3VzRmlyc3RBdXRvZm9jdXNhYmxlRWxlbWVudCIsImNvcHlOZXdIZWFkU3R5bGVzaGVldEVsZW1lbnRzIiwiY29weU5ld0hlYWRTY3JpcHRFbGVtZW50cyIsInJlbW92ZUN1cnJlbnRIZWFkUHJvdmlzaW9uYWxFbGVtZW50cyIsImNvcHlOZXdIZWFkUHJvdmlzaW9uYWxFbGVtZW50cyIsImFjdGl2YXRlQm9keVNjcmlwdEVsZW1lbnRzIiwiaW1wb3J0Qm9keVBlcm1hbmVudEVsZW1lbnRzIiwiYXNzaWduTmV3Qm9keSIsImdldE5ld0hlYWRTdHlsZXNoZWV0RWxlbWVudHMiLCJnZXROZXdIZWFkU2NyaXB0RWxlbWVudHMiLCJnZXRDdXJyZW50SGVhZFByb3Zpc2lvbmFsRWxlbWVudHMiLCJnZXROZXdIZWFkUHJvdmlzaW9uYWxFbGVtZW50cyIsImdldE5ld0JvZHlQZXJtYW5lbnRFbGVtZW50cyIsImZpbmRDdXJyZW50Qm9keVBlcm1hbmVudEVsZW1lbnQiLCJyZXBsYWNlQ2hpbGQiLCJnZXROZXdCb2R5U2NyaXB0RWxlbWVudHMiLCJmaW5kRmlyc3RBdXRvZm9jdXNhYmxlRWxlbWVudCIsIkVycm9yUmVuZGVyZXIiLCJyZXBsYWNlRG9jdW1lbnRIVE1MIiwiZ2V0U2NyaXB0RWxlbWVudHMiLCJWaWV3IiwiZ2V0U25hcHNob3QiLCJzbmFwc2hvdCIsImVycm9yIiwiaXNQcmV2aWV3IiwibWFya0FzUHJldmlldyIsInJlbmRlclNuYXBzaG90IiwicmVuZGVyRXJyb3IiLCJTY3JvbGxNYW5hZ2VyIiwib25TY3JvbGwiLCJzY3JvbGxUb0VsZW1lbnQiLCJzY3JvbGxJbnRvVmlldyIsInNjcm9sbFRvUG9zaXRpb24iLCJ4IiwieSIsInNjcm9sbFRvIiwidXBkYXRlUG9zaXRpb24iLCJzY3JvbGxQb3NpdGlvbkNoYW5nZWQiLCJTbmFwc2hvdENhY2hlIiwia2V5cyIsInNuYXBzaG90cyIsInJlYWQiLCJ0b3VjaCIsInB1dCIsIlZpc2l0IiwicGVyZm9ybVNjcm9sbCIsImlkZW50aWZpZXIiLCJhZGFwdGVyIiwidGltaW5nTWV0cmljcyIsInJlY29yZFRpbWluZ01ldHJpYyIsInJlcXVlc3QiLCJjYW5jZWxSZW5kZXIiLCJmYWlsIiwidmlzaXRGYWlsZWQiLCJoaXN0b3J5Q2hhbmdlZCIsInNob3VsZElzc3VlUmVxdWVzdCIsImdldENhY2hlZFNuYXBzaG90IiwiZ2V0Q2FjaGVkU25hcHNob3RGb3JMb2NhdGlvbiIsImNhY2hlU25hcHNob3QiLCJ2aXNpdFJlbmRlcmVkIiwicmVzcG9uc2UiLCJyZWRpcmVjdGVkVG9Mb2NhdGlvbiIsImZvbGxvd2VkUmVkaXJlY3QiLCJyZXBsYWNlSGlzdG9yeVdpdGhMb2NhdGlvbkFuZFJlc3RvcmF0aW9uSWRlbnRpZmllciIsInNjcm9sbGVkIiwic2Nyb2xsVG9SZXN0b3JlZFBvc2l0aW9uIiwic2Nyb2xsVG9Ub3AiLCJzY3JvbGxUb0FuY2hvciIsInJlc3RvcmF0aW9uRGF0YSIsInNjcm9sbFBvc2l0aW9uIiwiZ2V0VGltZSIsImdldFRpbWluZ01ldHJpY3MiLCJzbmFwc2hvdENhY2hlZCIsImZyYW1lIiwiY2FuY2VsQW5pbWF0aW9uRnJhbWUiLCJDb250cm9sbGVyIiwiY2xpY2tCdWJibGVkIiwiY2xpY2tDYXB0dXJlZCIsInBhZ2VMb2FkZWQiLCJ2aWV3Iiwic2Nyb2xsTWFuYWdlciIsInN0YXJ0SGlzdG9yeSIsInN0b3BIaXN0b3J5IiwiYXBwbGljYXRpb25BbGxvd3NWaXNpdGluZ0xvY2F0aW9uIiwibG9jYXRpb25Jc1Zpc2l0YWJsZSIsImdldFJlc3RvcmF0aW9uRGF0YUZvcklkZW50aWZpZXIiLCJzdGFydFZpc2l0IiwicHVzaEhpc3RvcnlXaXRoTG9jYXRpb25BbmRSZXN0b3JhdGlvbklkZW50aWZpZXIiLCJzaG91bGRDYWNoZVNuYXBzaG90Iiwibm90aWZ5QXBwbGljYXRpb25CZWZvcmVDYWNoaW5nU25hcHNob3QiLCJsYXN0UmVuZGVyZWRMb2NhdGlvbiIsImdldEN1cnJlbnRSZXN0b3JhdGlvbkRhdGEiLCJub3RpZnlBcHBsaWNhdGlvbkJlZm9yZVJlbmRlciIsImN1cnJlbnRWaXNpdCIsIm5vdGlmeUFwcGxpY2F0aW9uQWZ0ZXJSZW5kZXIiLCJub3RpZnlBcHBsaWNhdGlvbkFmdGVyUGFnZUxvYWQiLCJjbGlja0V2ZW50SXNTaWduaWZpY2FudCIsImdldFZpc2l0YWJsZUxpbmtGb3JOb2RlIiwiZ2V0VmlzaXRhYmxlTG9jYXRpb25Gb3JMaW5rIiwiYXBwbGljYXRpb25BbGxvd3NGb2xsb3dpbmdMaW5rVG9Mb2NhdGlvbiIsImdldEFjdGlvbkZvckxpbmsiLCJub3RpZnlBcHBsaWNhdGlvbkFmdGVyQ2xpY2tpbmdMaW5rVG9Mb2NhdGlvbiIsImRlZmF1bHRQcmV2ZW50ZWQiLCJub3RpZnlBcHBsaWNhdGlvbkJlZm9yZVZpc2l0aW5nTG9jYXRpb24iLCJub3RpZnlBcHBsaWNhdGlvbkFmdGVyVmlzaXRpbmdMb2NhdGlvbiIsInRpbWluZyIsImNyZWF0ZVZpc2l0IiwiaXNDb250ZW50RWRpdGFibGUiLCJhbHRLZXkiLCJjdHJsS2V5IiwibWV0YUtleSIsInNoaWZ0S2V5Iiwibm9kZUlzVmlzaXRhYmxlIiwiX193ZWJwYWNrX2FtZF9vcHRpb25zX18iXSwibWFwcGluZ3MiOiJDQUFTLFNBQVVBLEdDbUNuQixRQUFBQyxHQUFBQyxHQUdBLEdBQUFDLEVBQUFELEdBQ0EsTUFBQUMsR0FBQUQsR0FBQUUsT0FHQSxJQUFBQyxHQUFBRixFQUFBRCxJQUNBRSxXQUNBRSxHQUFBSixFQUNBSyxRQUFBLEVBVUEsT0FOQVAsR0FBQUUsR0FBQU0sS0FBQUgsRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUgsR0FHQUksRUFBQUUsUUFBQSxFQUdBRixFQUFBRCxRQXREQSxHQUFBSyxHQUFBQyxPQUFBLFlBQ0FBLFFBQUEsc0JBQUFDLEVBQUFDLEdBSUEsSUFEQSxHQUFBVixHQUFBVyxFQUFBQyxFQUFBLEVBQUFDLEtBQ1FELEVBQUFILEVBQUFLLE9BQW9CRixJQUM1QkQsRUFBQUYsRUFBQUcsR0FDQUcsRUFBQUosSUFDQUUsRUFB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LElBQUFoQixTQUFBaUIsSUFBQXBDLEVBQUFELFFBQUFxQyxPQUF1SGpDLEtBQUErQixPUm93S24wRCxTQUFTbEMsRUFBUUQsSVN6d0t2QixTQUFBNGxDLEdBQUEzbEMsRUFBQUQsUUFBQTRsQyxJVDZ3SzhCeGxDLEtBQUtKIiwiZmlsZSI6InZlbmRvci5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXBcbi8qKioqKiovIFx0Ly8gaW5zdGFsbCBhIEpTT05QIGNhbGxiYWNrIGZvciBjaHVuayBsb2FkaW5nXG4vKioqKioqLyBcdHZhciBwYXJlbnRKc29ucEZ1bmN0aW9uID0gd2luZG93W1wid2VicGFja0pzb25wXCJdO1xuLyoqKioqKi8gXHR3aW5kb3dbXCJ3ZWJwYWNrSnNvbnBcIl0gPSBmdW5jdGlvbiB3ZWJwYWNrSnNvbnBDYWxsYmFjayhjaHVua0lkcywgbW9yZU1vZHVsZXMpIHtcbi8qKioqKiovIFx0XHQvLyBhZGQgXCJtb3JlTW9kdWxlc1wiIHRvIHRoZSBtb2R1bGVzIG9iamVjdCxcbi8qKioqKiovIFx0XHQvLyB0aGVuIGZsYWcgYWxsIFwiY2h1bmtJZHNcIiBhcyBsb2FkZWQgYW5kIGZpcmUgY2FsbGJhY2tcbi8qKioqKiovIFx0XHR2YXIgbW9kdWxlSWQsIGNodW5rSWQsIGkgPSAwLCBjYWxsYmFja3MgPSBbXTtcbi8qKioqKiovIFx0XHRmb3IoO2kgPCBjaHVua0lkcy5sZW5ndGg7IGkrKykge1xuLyoqKioqKi8gXHRcdFx0Y2h1bmtJZCA9IGNodW5rSWRzW2ldO1xuLyoqKioqKi8gXHRcdFx0aWYoaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdKVxuLyoqKioqKi8gXHRcdFx0XHRjYWxsYmFja3MucHVzaC5hcHBseShjYWxsYmFja3MsIGluc3RhbGxlZENodW5rc1tjaHVua0lkXSk7XG4vKioqKioqLyBcdFx0XHRpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPSAwO1xuLyoqKioqKi8gXHRcdH1cbi8qKioqKiovIFx0XHRmb3IobW9kdWxlSWQgaW4gbW9yZU1vZHVsZXMpIHtcbi8qKioqKiovIFx0XHRcdG1vZHVsZXNbbW9kdWxlSWRdID0gbW9yZU1vZHVsZXNbbW9kdWxlSWRdO1xuLyoqKioqKi8gXHRcdH1cbi8qKioqKiovIFx0XHRpZihwYXJlbnRKc29ucEZ1bmN0aW9uKSBwYXJlbnRKc29ucEZ1bmN0aW9uKGNodW5rSWRzLCBtb3JlTW9kdWxlcyk7XG4vKioqKioqLyBcdFx0d2hpbGUoY2FsbGJhY2tzLmxlbmd0aClcbi8qKioqKiovIFx0XHRcdGNhbGxiYWNrcy5zaGlmdCgpLmNhbGwobnVsbCwgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG4vKioqKioqLyBcdFx0aWYobW9yZU1vZHVsZXNbMF0pIHtcbi8qKioqKiovIFx0XHRcdGluc3RhbGxlZE1vZHVsZXNbMF0gPSAwO1xuLyoqKioqKi8gXHRcdFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XG4vKioqKioqLyBcdFx0fVxuLyoqKioqKi8gXHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gb2JqZWN0IHRvIHN0b3JlIGxvYWRlZCBhbmQgbG9hZGluZyBjaHVua3Ncbi8qKioqKiovIFx0Ly8gXCIwXCIgbWVhbnMgXCJhbHJlYWR5IGxvYWRlZFwiXG4vKioqKioqLyBcdC8vIEFycmF5IG1lYW5zIFwibG9hZGluZ1wiLCBhcnJheSBjb250YWlucyBjYWxsYmFja3Ncbi8qKioqKiovIFx0dmFyIGluc3RhbGxlZENodW5rcyA9IHtcbi8qKioqKiovIFx0XHQxOjBcbi8qKioqKiovIFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4vKioqKioqLyBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4vKioqKioqLyBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pXG4vKioqKioqLyBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbi8qKioqKiovIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4vKioqKioqLyBcdFx0XHRleHBvcnRzOiB7fSxcbi8qKioqKiovIFx0XHRcdGlkOiBtb2R1bGVJZCxcbi8qKioqKiovIFx0XHRcdGxvYWRlZDogZmFsc2Vcbi8qKioqKiovIFx0XHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbi8qKioqKiovIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuLyoqKioqKi8gXHRcdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuLyoqKioqKi8gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbi8qKioqKiovIFx0fVxuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gVGhpcyBmaWxlIGNvbnRhaW5zIG9ubHkgdGhlIGVudHJ5IGNodW5rLlxuLyoqKioqKi8gXHQvLyBUaGUgY2h1bmsgbG9hZGluZyBmdW5jdGlvbiBmb3IgYWRkaXRpb25hbCBjaHVua3Ncbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5lID0gZnVuY3Rpb24gcmVxdWlyZUVuc3VyZShjaHVua0lkLCBjYWxsYmFjaykge1xuLyoqKioqKi8gXHRcdC8vIFwiMFwiIGlzIHRoZSBzaWduYWwgZm9yIFwiYWxyZWFkeSBsb2FkZWRcIlxuLyoqKioqKi8gXHRcdGlmKGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9PT0gMClcbi8qKioqKiovIFx0XHRcdHJldHVybiBjYWxsYmFjay5jYWxsKG51bGwsIF9fd2VicGFja19yZXF1aXJlX18pO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBhbiBhcnJheSBtZWFucyBcImN1cnJlbnRseSBsb2FkaW5nXCIuXG4vKioqKioqLyBcdFx0aWYoaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdICE9PSB1bmRlZmluZWQpIHtcbi8qKioqKiovIFx0XHRcdGluc3RhbGxlZENodW5rc1tjaHVua0lkXS5wdXNoKGNhbGxiYWNrKTtcbi8qKioqKiovIFx0XHR9IGVsc2Uge1xuLyoqKioqKi8gXHRcdFx0Ly8gc3RhcnQgY2h1bmsgbG9hZGluZ1xuLyoqKioqKi8gXHRcdFx0aW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdID0gW2NhbGxiYWNrXTtcbi8qKioqKiovIFx0XHRcdHZhciBoZWFkID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXTtcbi8qKioqKiovIFx0XHRcdHZhciBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcbi8qKioqKiovIFx0XHRcdHNjcmlwdC50eXBlID0gJ3RleHQvamF2YXNjcmlwdCc7XG4vKioqKioqLyBcdFx0XHRzY3JpcHQuY2hhcnNldCA9ICd1dGYtOCc7XG4vKioqKioqLyBcdFx0XHRzY3JpcHQuYXN5bmMgPSB0cnVlO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHRcdHNjcmlwdC5zcmMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLnAgKyBcIlwiICsgY2h1bmtJZCArIFwiLmFwcC5qc1wiO1xuLyoqKioqKi8gXHRcdFx0aGVhZC5hcHBlbmRDaGlsZChzY3JpcHQpO1xuLyoqKioqKi8gXHRcdH1cbi8qKioqKiovIFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcbi8qKioqKiovIH0pXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKioqKi8gKFtcbi8qIDAgKi8sXG4vKiAxICovLFxuLyogMiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKGdsb2JhbCkge21vZHVsZS5leHBvcnRzID0gZ2xvYmFsW1wiVGV0aGVyXCJdID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIChmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0oKSkpKVxuXG4vKioqLyB9LFxuLyogMyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKGdsb2JhbCkge21vZHVsZS5leHBvcnRzID0gZ2xvYmFsW1wiJFwiXSA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCAoZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KCkpKSlcblxuLyoqKi8gfSxcbi8qIDQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBfX1dFQlBBQ0tfQU1EX0RFRklORV9GQUNUT1JZX18sIF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fOy8qISB0ZXRoZXIgMS4zLjcgKi9cblx0XG5cdChmdW5jdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdCAgaWYgKHRydWUpIHtcblx0ICAgICEoX19XRUJQQUNLX0FNRF9ERUZJTkVfRkFDVE9SWV9fID0gKGZhY3RvcnkpLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyA9ICh0eXBlb2YgX19XRUJQQUNLX0FNRF9ERUZJTkVfRkFDVE9SWV9fID09PSAnZnVuY3Rpb24nID8gKF9fV0VCUEFDS19BTURfREVGSU5FX0ZBQ1RPUllfXy5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18sIGV4cG9ydHMsIG1vZHVsZSkpIDogX19XRUJQQUNLX0FNRF9ERUZJTkVfRkFDVE9SWV9fKSwgX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18gIT09IHVuZGVmaW5lZCAmJiAobW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXykpO1xuXHQgIH0gZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKSB7XG5cdCAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkocmVxdWlyZSwgZXhwb3J0cywgbW9kdWxlKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgcm9vdC5UZXRoZXIgPSBmYWN0b3J5KCk7XG5cdCAgfVxuXHR9KHRoaXMsIGZ1bmN0aW9uKHJlcXVpcmUsIGV4cG9ydHMsIG1vZHVsZSkge1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IChmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoJ3ZhbHVlJyBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSkoKTtcblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uJyk7IH0gfVxuXHRcblx0dmFyIFRldGhlckJhc2UgPSB1bmRlZmluZWQ7XG5cdGlmICh0eXBlb2YgVGV0aGVyQmFzZSA9PT0gJ3VuZGVmaW5lZCcpIHtcblx0ICBUZXRoZXJCYXNlID0geyBtb2R1bGVzOiBbXSB9O1xuXHR9XG5cdFxuXHR2YXIgemVyb0VsZW1lbnQgPSBudWxsO1xuXHRcblx0Ly8gU2FtZSBhcyBuYXRpdmUgZ2V0Qm91bmRpbmdDbGllbnRSZWN0LCBleGNlcHQgaXQgdGFrZXMgaW50byBhY2NvdW50IHBhcmVudCA8ZnJhbWU+IG9mZnNldHNcblx0Ly8gaWYgdGhlIGVsZW1lbnQgbGllcyB3aXRoaW4gYSBuZXN0ZWQgZG9jdW1lbnQgKDxmcmFtZT4gb3IgPGlmcmFtZT4tbGlrZSkuXG5cdGZ1bmN0aW9uIGdldEFjdHVhbEJvdW5kaW5nQ2xpZW50UmVjdChub2RlKSB7XG5cdCAgdmFyIGJvdW5kaW5nUmVjdCA9IG5vZGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cdFxuXHQgIC8vIFRoZSBvcmlnaW5hbCBvYmplY3QgcmV0dXJuZWQgYnkgZ2V0Qm91bmRpbmdDbGllbnRSZWN0IGlzIGltbXV0YWJsZSwgc28gd2UgY2xvbmUgaXRcblx0ICAvLyBXZSBjYW4ndCB1c2UgZXh0ZW5kIGJlY2F1c2UgdGhlIHByb3BlcnRpZXMgYXJlIG5vdCBjb25zaWRlcmVkIHBhcnQgb2YgdGhlIG9iamVjdCBieSBoYXNPd25Qcm9wZXJ0eSBpbiBJRTlcblx0ICB2YXIgcmVjdCA9IHt9O1xuXHQgIGZvciAodmFyIGsgaW4gYm91bmRpbmdSZWN0KSB7XG5cdCAgICByZWN0W2tdID0gYm91bmRpbmdSZWN0W2tdO1xuXHQgIH1cblx0XG5cdCAgaWYgKG5vZGUub3duZXJEb2N1bWVudCAhPT0gZG9jdW1lbnQpIHtcblx0ICAgIHZhciBfZnJhbWVFbGVtZW50ID0gbm9kZS5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3LmZyYW1lRWxlbWVudDtcblx0ICAgIGlmIChfZnJhbWVFbGVtZW50KSB7XG5cdCAgICAgIHZhciBmcmFtZVJlY3QgPSBnZXRBY3R1YWxCb3VuZGluZ0NsaWVudFJlY3QoX2ZyYW1lRWxlbWVudCk7XG5cdCAgICAgIHJlY3QudG9wICs9IGZyYW1lUmVjdC50b3A7XG5cdCAgICAgIHJlY3QuYm90dG9tICs9IGZyYW1lUmVjdC50b3A7XG5cdCAgICAgIHJlY3QubGVmdCArPSBmcmFtZVJlY3QubGVmdDtcblx0ICAgICAgcmVjdC5yaWdodCArPSBmcmFtZVJlY3QubGVmdDtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHJldHVybiByZWN0O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBnZXRTY3JvbGxQYXJlbnRzKGVsKSB7XG5cdCAgLy8gSW4gZmlyZWZveCBpZiB0aGUgZWwgaXMgaW5zaWRlIGFuIGlmcmFtZSB3aXRoIGRpc3BsYXk6IG5vbmU7IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKCkgd2lsbCByZXR1cm4gbnVsbDtcblx0ICAvLyBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD01NDgzOTdcblx0ICB2YXIgY29tcHV0ZWRTdHlsZSA9IGdldENvbXB1dGVkU3R5bGUoZWwpIHx8IHt9O1xuXHQgIHZhciBwb3NpdGlvbiA9IGNvbXB1dGVkU3R5bGUucG9zaXRpb247XG5cdCAgdmFyIHBhcmVudHMgPSBbXTtcblx0XG5cdCAgaWYgKHBvc2l0aW9uID09PSAnZml4ZWQnKSB7XG5cdCAgICByZXR1cm4gW2VsXTtcblx0ICB9XG5cdFxuXHQgIHZhciBwYXJlbnQgPSBlbDtcblx0ICB3aGlsZSAoKHBhcmVudCA9IHBhcmVudC5wYXJlbnROb2RlKSAmJiBwYXJlbnQgJiYgcGFyZW50Lm5vZGVUeXBlID09PSAxKSB7XG5cdCAgICB2YXIgc3R5bGUgPSB1bmRlZmluZWQ7XG5cdCAgICB0cnkge1xuXHQgICAgICBzdHlsZSA9IGdldENvbXB1dGVkU3R5bGUocGFyZW50KTtcblx0ICAgIH0gY2F0Y2ggKGVycikge31cblx0XG5cdCAgICBpZiAodHlwZW9mIHN0eWxlID09PSAndW5kZWZpbmVkJyB8fCBzdHlsZSA9PT0gbnVsbCkge1xuXHQgICAgICBwYXJlbnRzLnB1c2gocGFyZW50KTtcblx0ICAgICAgcmV0dXJuIHBhcmVudHM7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIF9zdHlsZSA9IHN0eWxlO1xuXHQgICAgdmFyIG92ZXJmbG93ID0gX3N0eWxlLm92ZXJmbG93O1xuXHQgICAgdmFyIG92ZXJmbG93WCA9IF9zdHlsZS5vdmVyZmxvd1g7XG5cdCAgICB2YXIgb3ZlcmZsb3dZID0gX3N0eWxlLm92ZXJmbG93WTtcblx0XG5cdCAgICBpZiAoLyhhdXRvfHNjcm9sbCkvLnRlc3Qob3ZlcmZsb3cgKyBvdmVyZmxvd1kgKyBvdmVyZmxvd1gpKSB7XG5cdCAgICAgIGlmIChwb3NpdGlvbiAhPT0gJ2Fic29sdXRlJyB8fCBbJ3JlbGF0aXZlJywgJ2Fic29sdXRlJywgJ2ZpeGVkJ10uaW5kZXhPZihzdHlsZS5wb3NpdGlvbikgPj0gMCkge1xuXHQgICAgICAgIHBhcmVudHMucHVzaChwYXJlbnQpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBwYXJlbnRzLnB1c2goZWwub3duZXJEb2N1bWVudC5ib2R5KTtcblx0XG5cdCAgLy8gSWYgdGhlIG5vZGUgaXMgd2l0aGluIGEgZnJhbWUsIGFjY291bnQgZm9yIHRoZSBwYXJlbnQgd2luZG93IHNjcm9sbFxuXHQgIGlmIChlbC5vd25lckRvY3VtZW50ICE9PSBkb2N1bWVudCkge1xuXHQgICAgcGFyZW50cy5wdXNoKGVsLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcpO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIHBhcmVudHM7XG5cdH1cblx0XG5cdHZhciB1bmlxdWVJZCA9IChmdW5jdGlvbiAoKSB7XG5cdCAgdmFyIGlkID0gMDtcblx0ICByZXR1cm4gZnVuY3Rpb24gKCkge1xuXHQgICAgcmV0dXJuICsraWQ7XG5cdCAgfTtcblx0fSkoKTtcblx0XG5cdHZhciB6ZXJvUG9zQ2FjaGUgPSB7fTtcblx0dmFyIGdldE9yaWdpbiA9IGZ1bmN0aW9uIGdldE9yaWdpbigpIHtcblx0ICAvLyBnZXRCb3VuZGluZ0NsaWVudFJlY3QgaXMgdW5mb3J0dW5hdGVseSB0b28gYWNjdXJhdGUuICBJdCBpbnRyb2R1Y2VzIGEgcGl4ZWwgb3IgdHdvIG9mXG5cdCAgLy8gaml0dGVyIGFzIHRoZSB1c2VyIHNjcm9sbHMgdGhhdCBtZXNzZXMgd2l0aCBvdXIgYWJpbGl0eSB0byBkZXRlY3QgaWYgdHdvIHBvc2l0aW9uc1xuXHQgIC8vIGFyZSBlcXVpdmlsYW50IG9yIG5vdC4gIFdlIHBsYWNlIGFuIGVsZW1lbnQgYXQgdGhlIHRvcCBsZWZ0IG9mIHRoZSBwYWdlIHRoYXQgd2lsbFxuXHQgIC8vIGdldCB0aGUgc2FtZSBqaXR0ZXIsIHNvIHdlIGNhbiBjYW5jZWwgdGhlIHR3byBvdXQuXG5cdCAgdmFyIG5vZGUgPSB6ZXJvRWxlbWVudDtcblx0ICBpZiAoIW5vZGUpIHtcblx0ICAgIG5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0ICAgIG5vZGUuc2V0QXR0cmlidXRlKCdkYXRhLXRldGhlci1pZCcsIHVuaXF1ZUlkKCkpO1xuXHQgICAgZXh0ZW5kKG5vZGUuc3R5bGUsIHtcblx0ICAgICAgdG9wOiAwLFxuXHQgICAgICBsZWZ0OiAwLFxuXHQgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJ1xuXHQgICAgfSk7XG5cdFxuXHQgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChub2RlKTtcblx0XG5cdCAgICB6ZXJvRWxlbWVudCA9IG5vZGU7XG5cdCAgfVxuXHRcblx0ICB2YXIgaWQgPSBub2RlLmdldEF0dHJpYnV0ZSgnZGF0YS10ZXRoZXItaWQnKTtcblx0ICBpZiAodHlwZW9mIHplcm9Qb3NDYWNoZVtpZF0gPT09ICd1bmRlZmluZWQnKSB7XG5cdCAgICB6ZXJvUG9zQ2FjaGVbaWRdID0gZ2V0QWN0dWFsQm91bmRpbmdDbGllbnRSZWN0KG5vZGUpO1xuXHRcblx0ICAgIC8vIENsZWFyIHRoZSBjYWNoZSB3aGVuIHRoaXMgcG9zaXRpb24gY2FsbCBpcyBkb25lXG5cdCAgICBkZWZlcihmdW5jdGlvbiAoKSB7XG5cdCAgICAgIGRlbGV0ZSB6ZXJvUG9zQ2FjaGVbaWRdO1xuXHQgICAgfSk7XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gemVyb1Bvc0NhY2hlW2lkXTtcblx0fTtcblx0XG5cdGZ1bmN0aW9uIHJlbW92ZVV0aWxFbGVtZW50cygpIHtcblx0ICBpZiAoemVyb0VsZW1lbnQpIHtcblx0ICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoemVyb0VsZW1lbnQpO1xuXHQgIH1cblx0ICB6ZXJvRWxlbWVudCA9IG51bGw7XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBnZXRCb3VuZHMoZWwpIHtcblx0ICB2YXIgZG9jID0gdW5kZWZpbmVkO1xuXHQgIGlmIChlbCA9PT0gZG9jdW1lbnQpIHtcblx0ICAgIGRvYyA9IGRvY3VtZW50O1xuXHQgICAgZWwgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG5cdCAgfSBlbHNlIHtcblx0ICAgIGRvYyA9IGVsLm93bmVyRG9jdW1lbnQ7XG5cdCAgfVxuXHRcblx0ICB2YXIgZG9jRWwgPSBkb2MuZG9jdW1lbnRFbGVtZW50O1xuXHRcblx0ICB2YXIgYm94ID0gZ2V0QWN0dWFsQm91bmRpbmdDbGllbnRSZWN0KGVsKTtcblx0XG5cdCAgdmFyIG9yaWdpbiA9IGdldE9yaWdpbigpO1xuXHRcblx0ICBib3gudG9wIC09IG9yaWdpbi50b3A7XG5cdCAgYm94LmxlZnQgLT0gb3JpZ2luLmxlZnQ7XG5cdFxuXHQgIGlmICh0eXBlb2YgYm94LndpZHRoID09PSAndW5kZWZpbmVkJykge1xuXHQgICAgYm94LndpZHRoID0gZG9jdW1lbnQuYm9keS5zY3JvbGxXaWR0aCAtIGJveC5sZWZ0IC0gYm94LnJpZ2h0O1xuXHQgIH1cblx0ICBpZiAodHlwZW9mIGJveC5oZWlnaHQgPT09ICd1bmRlZmluZWQnKSB7XG5cdCAgICBib3guaGVpZ2h0ID0gZG9jdW1lbnQuYm9keS5zY3JvbGxIZWlnaHQgLSBib3gudG9wIC0gYm94LmJvdHRvbTtcblx0ICB9XG5cdFxuXHQgIGJveC50b3AgPSBib3gudG9wIC0gZG9jRWwuY2xpZW50VG9wO1xuXHQgIGJveC5sZWZ0ID0gYm94LmxlZnQgLSBkb2NFbC5jbGllbnRMZWZ0O1xuXHQgIGJveC5yaWdodCA9IGRvYy5ib2R5LmNsaWVudFdpZHRoIC0gYm94LndpZHRoIC0gYm94LmxlZnQ7XG5cdCAgYm94LmJvdHRvbSA9IGRvYy5ib2R5LmNsaWVudEhlaWdodCAtIGJveC5oZWlnaHQgLSBib3gudG9wO1xuXHRcblx0ICByZXR1cm4gYm94O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBnZXRPZmZzZXRQYXJlbnQoZWwpIHtcblx0ICByZXR1cm4gZWwub2Zmc2V0UGFyZW50IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcblx0fVxuXHRcblx0dmFyIF9zY3JvbGxCYXJTaXplID0gbnVsbDtcblx0ZnVuY3Rpb24gZ2V0U2Nyb2xsQmFyU2l6ZSgpIHtcblx0ICBpZiAoX3Njcm9sbEJhclNpemUpIHtcblx0ICAgIHJldHVybiBfc2Nyb2xsQmFyU2l6ZTtcblx0ICB9XG5cdCAgdmFyIGlubmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdCAgaW5uZXIuc3R5bGUud2lkdGggPSAnMTAwJSc7XG5cdCAgaW5uZXIuc3R5bGUuaGVpZ2h0ID0gJzIwMHB4Jztcblx0XG5cdCAgdmFyIG91dGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdCAgZXh0ZW5kKG91dGVyLnN0eWxlLCB7XG5cdCAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcblx0ICAgIHRvcDogMCxcblx0ICAgIGxlZnQ6IDAsXG5cdCAgICBwb2ludGVyRXZlbnRzOiAnbm9uZScsXG5cdCAgICB2aXNpYmlsaXR5OiAnaGlkZGVuJyxcblx0ICAgIHdpZHRoOiAnMjAwcHgnLFxuXHQgICAgaGVpZ2h0OiAnMTUwcHgnLFxuXHQgICAgb3ZlcmZsb3c6ICdoaWRkZW4nXG5cdCAgfSk7XG5cdFxuXHQgIG91dGVyLmFwcGVuZENoaWxkKGlubmVyKTtcblx0XG5cdCAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChvdXRlcik7XG5cdFxuXHQgIHZhciB3aWR0aENvbnRhaW5lZCA9IGlubmVyLm9mZnNldFdpZHRoO1xuXHQgIG91dGVyLnN0eWxlLm92ZXJmbG93ID0gJ3Njcm9sbCc7XG5cdCAgdmFyIHdpZHRoU2Nyb2xsID0gaW5uZXIub2Zmc2V0V2lkdGg7XG5cdFxuXHQgIGlmICh3aWR0aENvbnRhaW5lZCA9PT0gd2lkdGhTY3JvbGwpIHtcblx0ICAgIHdpZHRoU2Nyb2xsID0gb3V0ZXIuY2xpZW50V2lkdGg7XG5cdCAgfVxuXHRcblx0ICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKG91dGVyKTtcblx0XG5cdCAgdmFyIHdpZHRoID0gd2lkdGhDb250YWluZWQgLSB3aWR0aFNjcm9sbDtcblx0XG5cdCAgX3Njcm9sbEJhclNpemUgPSB7IHdpZHRoOiB3aWR0aCwgaGVpZ2h0OiB3aWR0aCB9O1xuXHQgIHJldHVybiBfc2Nyb2xsQmFyU2l6ZTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZXh0ZW5kKCkge1xuXHQgIHZhciBvdXQgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDAgfHwgYXJndW1lbnRzWzBdID09PSB1bmRlZmluZWQgPyB7fSA6IGFyZ3VtZW50c1swXTtcblx0XG5cdCAgdmFyIGFyZ3MgPSBbXTtcblx0XG5cdCAgQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkoYXJncywgYXJndW1lbnRzKTtcblx0XG5cdCAgYXJncy5zbGljZSgxKS5mb3JFYWNoKGZ1bmN0aW9uIChvYmopIHtcblx0ICAgIGlmIChvYmopIHtcblx0ICAgICAgZm9yICh2YXIga2V5IGluIG9iaikge1xuXHQgICAgICAgIGlmICgoe30pLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7XG5cdCAgICAgICAgICBvdXRba2V5XSA9IG9ialtrZXldO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0pO1xuXHRcblx0ICByZXR1cm4gb3V0O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiByZW1vdmVDbGFzcyhlbCwgbmFtZSkge1xuXHQgIGlmICh0eXBlb2YgZWwuY2xhc3NMaXN0ICE9PSAndW5kZWZpbmVkJykge1xuXHQgICAgbmFtZS5zcGxpdCgnICcpLmZvckVhY2goZnVuY3Rpb24gKGNscykge1xuXHQgICAgICBpZiAoY2xzLnRyaW0oKSkge1xuXHQgICAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoY2xzKTtcblx0ICAgICAgfVxuXHQgICAgfSk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhciByZWdleCA9IG5ldyBSZWdFeHAoJyhefCApJyArIG5hbWUuc3BsaXQoJyAnKS5qb2luKCd8JykgKyAnKCB8JCknLCAnZ2knKTtcblx0ICAgIHZhciBjbGFzc05hbWUgPSBnZXRDbGFzc05hbWUoZWwpLnJlcGxhY2UocmVnZXgsICcgJyk7XG5cdCAgICBzZXRDbGFzc05hbWUoZWwsIGNsYXNzTmFtZSk7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBhZGRDbGFzcyhlbCwgbmFtZSkge1xuXHQgIGlmICh0eXBlb2YgZWwuY2xhc3NMaXN0ICE9PSAndW5kZWZpbmVkJykge1xuXHQgICAgbmFtZS5zcGxpdCgnICcpLmZvckVhY2goZnVuY3Rpb24gKGNscykge1xuXHQgICAgICBpZiAoY2xzLnRyaW0oKSkge1xuXHQgICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoY2xzKTtcblx0ICAgICAgfVxuXHQgICAgfSk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHJlbW92ZUNsYXNzKGVsLCBuYW1lKTtcblx0ICAgIHZhciBjbHMgPSBnZXRDbGFzc05hbWUoZWwpICsgKCcgJyArIG5hbWUpO1xuXHQgICAgc2V0Q2xhc3NOYW1lKGVsLCBjbHMpO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gaGFzQ2xhc3MoZWwsIG5hbWUpIHtcblx0ICBpZiAodHlwZW9mIGVsLmNsYXNzTGlzdCAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0ICAgIHJldHVybiBlbC5jbGFzc0xpc3QuY29udGFpbnMobmFtZSk7XG5cdCAgfVxuXHQgIHZhciBjbGFzc05hbWUgPSBnZXRDbGFzc05hbWUoZWwpO1xuXHQgIHJldHVybiBuZXcgUmVnRXhwKCcoXnwgKScgKyBuYW1lICsgJyggfCQpJywgJ2dpJykudGVzdChjbGFzc05hbWUpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBnZXRDbGFzc05hbWUoZWwpIHtcblx0ICAvLyBDYW4ndCB1c2UganVzdCBTVkdBbmltYXRlZFN0cmluZyBoZXJlIHNpbmNlIG5vZGVzIHdpdGhpbiBhIEZyYW1lIGluIElFIGhhdmVcblx0ICAvLyBjb21wbGV0ZWx5IHNlcGFyYXRlbHkgU1ZHQW5pbWF0ZWRTdHJpbmcgYmFzZSBjbGFzc2VzXG5cdCAgaWYgKGVsLmNsYXNzTmFtZSBpbnN0YW5jZW9mIGVsLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcuU1ZHQW5pbWF0ZWRTdHJpbmcpIHtcblx0ICAgIHJldHVybiBlbC5jbGFzc05hbWUuYmFzZVZhbDtcblx0ICB9XG5cdCAgcmV0dXJuIGVsLmNsYXNzTmFtZTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gc2V0Q2xhc3NOYW1lKGVsLCBjbGFzc05hbWUpIHtcblx0ICBlbC5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgY2xhc3NOYW1lKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gdXBkYXRlQ2xhc3NlcyhlbCwgYWRkLCBhbGwpIHtcblx0ICAvLyBPZiB0aGUgc2V0IG9mICdhbGwnIGNsYXNzZXMsIHdlIG5lZWQgdGhlICdhZGQnIGNsYXNzZXMsIGFuZCBvbmx5IHRoZVxuXHQgIC8vICdhZGQnIGNsYXNzZXMgdG8gYmUgc2V0LlxuXHQgIGFsbC5mb3JFYWNoKGZ1bmN0aW9uIChjbHMpIHtcblx0ICAgIGlmIChhZGQuaW5kZXhPZihjbHMpID09PSAtMSAmJiBoYXNDbGFzcyhlbCwgY2xzKSkge1xuXHQgICAgICByZW1vdmVDbGFzcyhlbCwgY2xzKTtcblx0ICAgIH1cblx0ICB9KTtcblx0XG5cdCAgYWRkLmZvckVhY2goZnVuY3Rpb24gKGNscykge1xuXHQgICAgaWYgKCFoYXNDbGFzcyhlbCwgY2xzKSkge1xuXHQgICAgICBhZGRDbGFzcyhlbCwgY2xzKTtcblx0ICAgIH1cblx0ICB9KTtcblx0fVxuXHRcblx0dmFyIGRlZmVycmVkID0gW107XG5cdFxuXHR2YXIgZGVmZXIgPSBmdW5jdGlvbiBkZWZlcihmbikge1xuXHQgIGRlZmVycmVkLnB1c2goZm4pO1xuXHR9O1xuXHRcblx0dmFyIGZsdXNoID0gZnVuY3Rpb24gZmx1c2goKSB7XG5cdCAgdmFyIGZuID0gdW5kZWZpbmVkO1xuXHQgIHdoaWxlIChmbiA9IGRlZmVycmVkLnBvcCgpKSB7XG5cdCAgICBmbigpO1xuXHQgIH1cblx0fTtcblx0XG5cdHZhciBFdmVudGVkID0gKGZ1bmN0aW9uICgpIHtcblx0ICBmdW5jdGlvbiBFdmVudGVkKCkge1xuXHQgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEV2ZW50ZWQpO1xuXHQgIH1cblx0XG5cdCAgX2NyZWF0ZUNsYXNzKEV2ZW50ZWQsIFt7XG5cdCAgICBrZXk6ICdvbicsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gb24oZXZlbnQsIGhhbmRsZXIsIGN0eCkge1xuXHQgICAgICB2YXIgb25jZSA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMyB8fCBhcmd1bWVudHNbM10gPT09IHVuZGVmaW5lZCA/IGZhbHNlIDogYXJndW1lbnRzWzNdO1xuXHRcblx0ICAgICAgaWYgKHR5cGVvZiB0aGlzLmJpbmRpbmdzID09PSAndW5kZWZpbmVkJykge1xuXHQgICAgICAgIHRoaXMuYmluZGluZ3MgPSB7fTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAodHlwZW9mIHRoaXMuYmluZGluZ3NbZXZlbnRdID09PSAndW5kZWZpbmVkJykge1xuXHQgICAgICAgIHRoaXMuYmluZGluZ3NbZXZlbnRdID0gW107XG5cdCAgICAgIH1cblx0ICAgICAgdGhpcy5iaW5kaW5nc1tldmVudF0ucHVzaCh7IGhhbmRsZXI6IGhhbmRsZXIsIGN0eDogY3R4LCBvbmNlOiBvbmNlIH0pO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ29uY2UnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIG9uY2UoZXZlbnQsIGhhbmRsZXIsIGN0eCkge1xuXHQgICAgICB0aGlzLm9uKGV2ZW50LCBoYW5kbGVyLCBjdHgsIHRydWUpO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ29mZicsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gb2ZmKGV2ZW50LCBoYW5kbGVyKSB7XG5cdCAgICAgIGlmICh0eXBlb2YgdGhpcy5iaW5kaW5ncyA9PT0gJ3VuZGVmaW5lZCcgfHwgdHlwZW9mIHRoaXMuYmluZGluZ3NbZXZlbnRdID09PSAndW5kZWZpbmVkJykge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKHR5cGVvZiBoYW5kbGVyID09PSAndW5kZWZpbmVkJykge1xuXHQgICAgICAgIGRlbGV0ZSB0aGlzLmJpbmRpbmdzW2V2ZW50XTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB2YXIgaSA9IDA7XG5cdCAgICAgICAgd2hpbGUgKGkgPCB0aGlzLmJpbmRpbmdzW2V2ZW50XS5sZW5ndGgpIHtcblx0ICAgICAgICAgIGlmICh0aGlzLmJpbmRpbmdzW2V2ZW50XVtpXS5oYW5kbGVyID09PSBoYW5kbGVyKSB7XG5cdCAgICAgICAgICAgIHRoaXMuYmluZGluZ3NbZXZlbnRdLnNwbGljZShpLCAxKTtcblx0ICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICsraTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICd0cmlnZ2VyJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiB0cmlnZ2VyKGV2ZW50KSB7XG5cdCAgICAgIGlmICh0eXBlb2YgdGhpcy5iaW5kaW5ncyAhPT0gJ3VuZGVmaW5lZCcgJiYgdGhpcy5iaW5kaW5nc1tldmVudF0pIHtcblx0ICAgICAgICB2YXIgaSA9IDA7XG5cdFxuXHQgICAgICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbiA+IDEgPyBfbGVuIC0gMSA6IDApLCBfa2V5ID0gMTsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuXHQgICAgICAgICAgYXJnc1tfa2V5IC0gMV0gPSBhcmd1bWVudHNbX2tleV07XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICB3aGlsZSAoaSA8IHRoaXMuYmluZGluZ3NbZXZlbnRdLmxlbmd0aCkge1xuXHQgICAgICAgICAgdmFyIF9iaW5kaW5ncyRldmVudCRpID0gdGhpcy5iaW5kaW5nc1tldmVudF1baV07XG5cdCAgICAgICAgICB2YXIgaGFuZGxlciA9IF9iaW5kaW5ncyRldmVudCRpLmhhbmRsZXI7XG5cdCAgICAgICAgICB2YXIgY3R4ID0gX2JpbmRpbmdzJGV2ZW50JGkuY3R4O1xuXHQgICAgICAgICAgdmFyIG9uY2UgPSBfYmluZGluZ3MkZXZlbnQkaS5vbmNlO1xuXHRcblx0ICAgICAgICAgIHZhciBjb250ZXh0ID0gY3R4O1xuXHQgICAgICAgICAgaWYgKHR5cGVvZiBjb250ZXh0ID09PSAndW5kZWZpbmVkJykge1xuXHQgICAgICAgICAgICBjb250ZXh0ID0gdGhpcztcblx0ICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICBoYW5kbGVyLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuXHRcblx0ICAgICAgICAgIGlmIChvbmNlKSB7XG5cdCAgICAgICAgICAgIHRoaXMuYmluZGluZ3NbZXZlbnRdLnNwbGljZShpLCAxKTtcblx0ICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICsraTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XSk7XG5cdFxuXHQgIHJldHVybiBFdmVudGVkO1xuXHR9KSgpO1xuXHRcblx0VGV0aGVyQmFzZS5VdGlscyA9IHtcblx0ICBnZXRBY3R1YWxCb3VuZGluZ0NsaWVudFJlY3Q6IGdldEFjdHVhbEJvdW5kaW5nQ2xpZW50UmVjdCxcblx0ICBnZXRTY3JvbGxQYXJlbnRzOiBnZXRTY3JvbGxQYXJlbnRzLFxuXHQgIGdldEJvdW5kczogZ2V0Qm91bmRzLFxuXHQgIGdldE9mZnNldFBhcmVudDogZ2V0T2Zmc2V0UGFyZW50LFxuXHQgIGV4dGVuZDogZXh0ZW5kLFxuXHQgIGFkZENsYXNzOiBhZGRDbGFzcyxcblx0ICByZW1vdmVDbGFzczogcmVtb3ZlQ2xhc3MsXG5cdCAgaGFzQ2xhc3M6IGhhc0NsYXNzLFxuXHQgIHVwZGF0ZUNsYXNzZXM6IHVwZGF0ZUNsYXNzZXMsXG5cdCAgZGVmZXI6IGRlZmVyLFxuXHQgIGZsdXNoOiBmbHVzaCxcblx0ICB1bmlxdWVJZDogdW5pcXVlSWQsXG5cdCAgRXZlbnRlZDogRXZlbnRlZCxcblx0ICBnZXRTY3JvbGxCYXJTaXplOiBnZXRTY3JvbGxCYXJTaXplLFxuXHQgIHJlbW92ZVV0aWxFbGVtZW50czogcmVtb3ZlVXRpbEVsZW1lbnRzXG5cdH07XG5cdC8qIGdsb2JhbHMgVGV0aGVyQmFzZSwgcGVyZm9ybWFuY2UgKi9cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBfc2xpY2VkVG9BcnJheSA9IChmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIHNsaWNlSXRlcmF0b3IoYXJyLCBpKSB7IHZhciBfYXJyID0gW107IHZhciBfbiA9IHRydWU7IHZhciBfZCA9IGZhbHNlOyB2YXIgX2UgPSB1bmRlZmluZWQ7IHRyeSB7IGZvciAodmFyIF9pID0gYXJyW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3M7ICEoX24gPSAoX3MgPSBfaS5uZXh0KCkpLmRvbmUpOyBfbiA9IHRydWUpIHsgX2Fyci5wdXNoKF9zLnZhbHVlKTsgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrOyB9IH0gY2F0Y2ggKGVycikgeyBfZCA9IHRydWU7IF9lID0gZXJyOyB9IGZpbmFsbHkgeyB0cnkgeyBpZiAoIV9uICYmIF9pWydyZXR1cm4nXSkgX2lbJ3JldHVybiddKCk7IH0gZmluYWxseSB7IGlmIChfZCkgdGhyb3cgX2U7IH0gfSByZXR1cm4gX2FycjsgfSByZXR1cm4gZnVuY3Rpb24gKGFyciwgaSkgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7IHJldHVybiBhcnI7IH0gZWxzZSBpZiAoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChhcnIpKSB7IHJldHVybiBzbGljZUl0ZXJhdG9yKGFyciwgaSk7IH0gZWxzZSB7IHRocm93IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UnKTsgfSB9OyB9KSgpO1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IChmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoJ3ZhbHVlJyBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSkoKTtcblx0XG5cdHZhciBfZ2V0ID0gZnVuY3Rpb24gZ2V0KF94NiwgX3g3LCBfeDgpIHsgdmFyIF9hZ2FpbiA9IHRydWU7IF9mdW5jdGlvbjogd2hpbGUgKF9hZ2FpbikgeyB2YXIgb2JqZWN0ID0gX3g2LCBwcm9wZXJ0eSA9IF94NywgcmVjZWl2ZXIgPSBfeDg7IF9hZ2FpbiA9IGZhbHNlOyBpZiAob2JqZWN0ID09PSBudWxsKSBvYmplY3QgPSBGdW5jdGlvbi5wcm90b3R5cGU7IHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHByb3BlcnR5KTsgaWYgKGRlc2MgPT09IHVuZGVmaW5lZCkgeyB2YXIgcGFyZW50ID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKG9iamVjdCk7IGlmIChwYXJlbnQgPT09IG51bGwpIHsgcmV0dXJuIHVuZGVmaW5lZDsgfSBlbHNlIHsgX3g2ID0gcGFyZW50OyBfeDcgPSBwcm9wZXJ0eTsgX3g4ID0gcmVjZWl2ZXI7IF9hZ2FpbiA9IHRydWU7IGRlc2MgPSBwYXJlbnQgPSB1bmRlZmluZWQ7IGNvbnRpbnVlIF9mdW5jdGlvbjsgfSB9IGVsc2UgaWYgKCd2YWx1ZScgaW4gZGVzYykgeyByZXR1cm4gZGVzYy52YWx1ZTsgfSBlbHNlIHsgdmFyIGdldHRlciA9IGRlc2MuZ2V0OyBpZiAoZ2V0dGVyID09PSB1bmRlZmluZWQpIHsgcmV0dXJuIHVuZGVmaW5lZDsgfSByZXR1cm4gZ2V0dGVyLmNhbGwocmVjZWl2ZXIpOyB9IH0gfTtcblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uJyk7IH0gfVxuXHRcblx0ZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gJ2Z1bmN0aW9uJyAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoJ1N1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgJyArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblx0XG5cdGlmICh0eXBlb2YgVGV0aGVyQmFzZSA9PT0gJ3VuZGVmaW5lZCcpIHtcblx0ICB0aHJvdyBuZXcgRXJyb3IoJ1lvdSBtdXN0IGluY2x1ZGUgdGhlIHV0aWxzLmpzIGZpbGUgYmVmb3JlIHRldGhlci5qcycpO1xuXHR9XG5cdFxuXHR2YXIgX1RldGhlckJhc2UkVXRpbHMgPSBUZXRoZXJCYXNlLlV0aWxzO1xuXHR2YXIgZ2V0U2Nyb2xsUGFyZW50cyA9IF9UZXRoZXJCYXNlJFV0aWxzLmdldFNjcm9sbFBhcmVudHM7XG5cdHZhciBnZXRCb3VuZHMgPSBfVGV0aGVyQmFzZSRVdGlscy5nZXRCb3VuZHM7XG5cdHZhciBnZXRPZmZzZXRQYXJlbnQgPSBfVGV0aGVyQmFzZSRVdGlscy5nZXRPZmZzZXRQYXJlbnQ7XG5cdHZhciBleHRlbmQgPSBfVGV0aGVyQmFzZSRVdGlscy5leHRlbmQ7XG5cdHZhciBhZGRDbGFzcyA9IF9UZXRoZXJCYXNlJFV0aWxzLmFkZENsYXNzO1xuXHR2YXIgcmVtb3ZlQ2xhc3MgPSBfVGV0aGVyQmFzZSRVdGlscy5yZW1vdmVDbGFzcztcblx0dmFyIHVwZGF0ZUNsYXNzZXMgPSBfVGV0aGVyQmFzZSRVdGlscy51cGRhdGVDbGFzc2VzO1xuXHR2YXIgZGVmZXIgPSBfVGV0aGVyQmFzZSRVdGlscy5kZWZlcjtcblx0dmFyIGZsdXNoID0gX1RldGhlckJhc2UkVXRpbHMuZmx1c2g7XG5cdHZhciBnZXRTY3JvbGxCYXJTaXplID0gX1RldGhlckJhc2UkVXRpbHMuZ2V0U2Nyb2xsQmFyU2l6ZTtcblx0dmFyIHJlbW92ZVV0aWxFbGVtZW50cyA9IF9UZXRoZXJCYXNlJFV0aWxzLnJlbW92ZVV0aWxFbGVtZW50cztcblx0XG5cdGZ1bmN0aW9uIHdpdGhpbihhLCBiKSB7XG5cdCAgdmFyIGRpZmYgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDIgfHwgYXJndW1lbnRzWzJdID09PSB1bmRlZmluZWQgPyAxIDogYXJndW1lbnRzWzJdO1xuXHRcblx0ICByZXR1cm4gYSArIGRpZmYgPj0gYiAmJiBiID49IGEgLSBkaWZmO1xuXHR9XG5cdFxuXHR2YXIgdHJhbnNmb3JtS2V5ID0gKGZ1bmN0aW9uICgpIHtcblx0ICBpZiAodHlwZW9mIGRvY3VtZW50ID09PSAndW5kZWZpbmVkJykge1xuXHQgICAgcmV0dXJuICcnO1xuXHQgIH1cblx0ICB2YXIgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0XG5cdCAgdmFyIHRyYW5zZm9ybXMgPSBbJ3RyYW5zZm9ybScsICdXZWJraXRUcmFuc2Zvcm0nLCAnT1RyYW5zZm9ybScsICdNb3pUcmFuc2Zvcm0nLCAnbXNUcmFuc2Zvcm0nXTtcblx0ICBmb3IgKHZhciBpID0gMDsgaSA8IHRyYW5zZm9ybXMubGVuZ3RoOyArK2kpIHtcblx0ICAgIHZhciBrZXkgPSB0cmFuc2Zvcm1zW2ldO1xuXHQgICAgaWYgKGVsLnN0eWxlW2tleV0gIT09IHVuZGVmaW5lZCkge1xuXHQgICAgICByZXR1cm4ga2V5O1xuXHQgICAgfVxuXHQgIH1cblx0fSkoKTtcblx0XG5cdHZhciB0ZXRoZXJzID0gW107XG5cdFxuXHR2YXIgcG9zaXRpb24gPSBmdW5jdGlvbiBwb3NpdGlvbigpIHtcblx0ICB0ZXRoZXJzLmZvckVhY2goZnVuY3Rpb24gKHRldGhlcikge1xuXHQgICAgdGV0aGVyLnBvc2l0aW9uKGZhbHNlKTtcblx0ICB9KTtcblx0ICBmbHVzaCgpO1xuXHR9O1xuXHRcblx0ZnVuY3Rpb24gbm93KCkge1xuXHQgIGlmICh0eXBlb2YgcGVyZm9ybWFuY2UgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBwZXJmb3JtYW5jZS5ub3cgIT09ICd1bmRlZmluZWQnKSB7XG5cdCAgICByZXR1cm4gcGVyZm9ybWFuY2Uubm93KCk7XG5cdCAgfVxuXHQgIHJldHVybiArbmV3IERhdGUoKTtcblx0fVxuXHRcblx0KGZ1bmN0aW9uICgpIHtcblx0ICB2YXIgbGFzdENhbGwgPSBudWxsO1xuXHQgIHZhciBsYXN0RHVyYXRpb24gPSBudWxsO1xuXHQgIHZhciBwZW5kaW5nVGltZW91dCA9IG51bGw7XG5cdFxuXHQgIHZhciB0aWNrID0gZnVuY3Rpb24gdGljaygpIHtcblx0ICAgIGlmICh0eXBlb2YgbGFzdER1cmF0aW9uICE9PSAndW5kZWZpbmVkJyAmJiBsYXN0RHVyYXRpb24gPiAxNikge1xuXHQgICAgICAvLyBXZSB2b2x1bnRhcmlseSB0aHJvdHRsZSBvdXJzZWx2ZXMgaWYgd2UgY2FuJ3QgbWFuYWdlIDYwZnBzXG5cdCAgICAgIGxhc3REdXJhdGlvbiA9IE1hdGgubWluKGxhc3REdXJhdGlvbiAtIDE2LCAyNTApO1xuXHRcblx0ICAgICAgLy8gSnVzdCBpbiBjYXNlIHRoaXMgaXMgdGhlIGxhc3QgZXZlbnQsIHJlbWVtYmVyIHRvIHBvc2l0aW9uIGp1c3Qgb25jZSBtb3JlXG5cdCAgICAgIHBlbmRpbmdUaW1lb3V0ID0gc2V0VGltZW91dCh0aWNrLCAyNTApO1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKHR5cGVvZiBsYXN0Q2FsbCAhPT0gJ3VuZGVmaW5lZCcgJiYgbm93KCkgLSBsYXN0Q2FsbCA8IDEwKSB7XG5cdCAgICAgIC8vIFNvbWUgYnJvd3NlcnMgY2FsbCBldmVudHMgYSBsaXR0bGUgdG9vIGZyZXF1ZW50bHksIHJlZnVzZSB0byBydW4gbW9yZSB0aGFuIGlzIHJlYXNvbmFibGVcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHRcblx0ICAgIGlmIChwZW5kaW5nVGltZW91dCAhPSBudWxsKSB7XG5cdCAgICAgIGNsZWFyVGltZW91dChwZW5kaW5nVGltZW91dCk7XG5cdCAgICAgIHBlbmRpbmdUaW1lb3V0ID0gbnVsbDtcblx0ICAgIH1cblx0XG5cdCAgICBsYXN0Q2FsbCA9IG5vdygpO1xuXHQgICAgcG9zaXRpb24oKTtcblx0ICAgIGxhc3REdXJhdGlvbiA9IG5vdygpIC0gbGFzdENhbGw7XG5cdCAgfTtcblx0XG5cdCAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0ICAgIFsncmVzaXplJywgJ3Njcm9sbCcsICd0b3VjaG1vdmUnXS5mb3JFYWNoKGZ1bmN0aW9uIChldmVudCkge1xuXHQgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgdGljayk7XG5cdCAgICB9KTtcblx0ICB9XG5cdH0pKCk7XG5cdFxuXHR2YXIgTUlSUk9SX0xSID0ge1xuXHQgIGNlbnRlcjogJ2NlbnRlcicsXG5cdCAgbGVmdDogJ3JpZ2h0Jyxcblx0ICByaWdodDogJ2xlZnQnXG5cdH07XG5cdFxuXHR2YXIgTUlSUk9SX1RCID0ge1xuXHQgIG1pZGRsZTogJ21pZGRsZScsXG5cdCAgdG9wOiAnYm90dG9tJyxcblx0ICBib3R0b206ICd0b3AnXG5cdH07XG5cdFxuXHR2YXIgT0ZGU0VUX01BUCA9IHtcblx0ICB0b3A6IDAsXG5cdCAgbGVmdDogMCxcblx0ICBtaWRkbGU6ICc1MCUnLFxuXHQgIGNlbnRlcjogJzUwJScsXG5cdCAgYm90dG9tOiAnMTAwJScsXG5cdCAgcmlnaHQ6ICcxMDAlJ1xuXHR9O1xuXHRcblx0dmFyIGF1dG9Ub0ZpeGVkQXR0YWNobWVudCA9IGZ1bmN0aW9uIGF1dG9Ub0ZpeGVkQXR0YWNobWVudChhdHRhY2htZW50LCByZWxhdGl2ZVRvQXR0YWNobWVudCkge1xuXHQgIHZhciBsZWZ0ID0gYXR0YWNobWVudC5sZWZ0O1xuXHQgIHZhciB0b3AgPSBhdHRhY2htZW50LnRvcDtcblx0XG5cdCAgaWYgKGxlZnQgPT09ICdhdXRvJykge1xuXHQgICAgbGVmdCA9IE1JUlJPUl9MUltyZWxhdGl2ZVRvQXR0YWNobWVudC5sZWZ0XTtcblx0ICB9XG5cdFxuXHQgIGlmICh0b3AgPT09ICdhdXRvJykge1xuXHQgICAgdG9wID0gTUlSUk9SX1RCW3JlbGF0aXZlVG9BdHRhY2htZW50LnRvcF07XG5cdCAgfVxuXHRcblx0ICByZXR1cm4geyBsZWZ0OiBsZWZ0LCB0b3A6IHRvcCB9O1xuXHR9O1xuXHRcblx0dmFyIGF0dGFjaG1lbnRUb09mZnNldCA9IGZ1bmN0aW9uIGF0dGFjaG1lbnRUb09mZnNldChhdHRhY2htZW50KSB7XG5cdCAgdmFyIGxlZnQgPSBhdHRhY2htZW50LmxlZnQ7XG5cdCAgdmFyIHRvcCA9IGF0dGFjaG1lbnQudG9wO1xuXHRcblx0ICBpZiAodHlwZW9mIE9GRlNFVF9NQVBbYXR0YWNobWVudC5sZWZ0XSAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0ICAgIGxlZnQgPSBPRkZTRVRfTUFQW2F0dGFjaG1lbnQubGVmdF07XG5cdCAgfVxuXHRcblx0ICBpZiAodHlwZW9mIE9GRlNFVF9NQVBbYXR0YWNobWVudC50b3BdICE9PSAndW5kZWZpbmVkJykge1xuXHQgICAgdG9wID0gT0ZGU0VUX01BUFthdHRhY2htZW50LnRvcF07XG5cdCAgfVxuXHRcblx0ICByZXR1cm4geyBsZWZ0OiBsZWZ0LCB0b3A6IHRvcCB9O1xuXHR9O1xuXHRcblx0ZnVuY3Rpb24gYWRkT2Zmc2V0KCkge1xuXHQgIHZhciBvdXQgPSB7IHRvcDogMCwgbGVmdDogMCB9O1xuXHRcblx0ICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgb2Zmc2V0cyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuXHQgICAgb2Zmc2V0c1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcblx0ICB9XG5cdFxuXHQgIG9mZnNldHMuZm9yRWFjaChmdW5jdGlvbiAoX3JlZikge1xuXHQgICAgdmFyIHRvcCA9IF9yZWYudG9wO1xuXHQgICAgdmFyIGxlZnQgPSBfcmVmLmxlZnQ7XG5cdFxuXHQgICAgaWYgKHR5cGVvZiB0b3AgPT09ICdzdHJpbmcnKSB7XG5cdCAgICAgIHRvcCA9IHBhcnNlRmxvYXQodG9wLCAxMCk7XG5cdCAgICB9XG5cdCAgICBpZiAodHlwZW9mIGxlZnQgPT09ICdzdHJpbmcnKSB7XG5cdCAgICAgIGxlZnQgPSBwYXJzZUZsb2F0KGxlZnQsIDEwKTtcblx0ICAgIH1cblx0XG5cdCAgICBvdXQudG9wICs9IHRvcDtcblx0ICAgIG91dC5sZWZ0ICs9IGxlZnQ7XG5cdCAgfSk7XG5cdFxuXHQgIHJldHVybiBvdXQ7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG9mZnNldFRvUHgob2Zmc2V0LCBzaXplKSB7XG5cdCAgaWYgKHR5cGVvZiBvZmZzZXQubGVmdCA9PT0gJ3N0cmluZycgJiYgb2Zmc2V0LmxlZnQuaW5kZXhPZignJScpICE9PSAtMSkge1xuXHQgICAgb2Zmc2V0LmxlZnQgPSBwYXJzZUZsb2F0KG9mZnNldC5sZWZ0LCAxMCkgLyAxMDAgKiBzaXplLndpZHRoO1xuXHQgIH1cblx0ICBpZiAodHlwZW9mIG9mZnNldC50b3AgPT09ICdzdHJpbmcnICYmIG9mZnNldC50b3AuaW5kZXhPZignJScpICE9PSAtMSkge1xuXHQgICAgb2Zmc2V0LnRvcCA9IHBhcnNlRmxvYXQob2Zmc2V0LnRvcCwgMTApIC8gMTAwICogc2l6ZS5oZWlnaHQ7XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gb2Zmc2V0O1xuXHR9XG5cdFxuXHR2YXIgcGFyc2VPZmZzZXQgPSBmdW5jdGlvbiBwYXJzZU9mZnNldCh2YWx1ZSkge1xuXHQgIHZhciBfdmFsdWUkc3BsaXQgPSB2YWx1ZS5zcGxpdCgnICcpO1xuXHRcblx0ICB2YXIgX3ZhbHVlJHNwbGl0MiA9IF9zbGljZWRUb0FycmF5KF92YWx1ZSRzcGxpdCwgMik7XG5cdFxuXHQgIHZhciB0b3AgPSBfdmFsdWUkc3BsaXQyWzBdO1xuXHQgIHZhciBsZWZ0ID0gX3ZhbHVlJHNwbGl0MlsxXTtcblx0XG5cdCAgcmV0dXJuIHsgdG9wOiB0b3AsIGxlZnQ6IGxlZnQgfTtcblx0fTtcblx0dmFyIHBhcnNlQXR0YWNobWVudCA9IHBhcnNlT2Zmc2V0O1xuXHRcblx0dmFyIFRldGhlckNsYXNzID0gKGZ1bmN0aW9uIChfRXZlbnRlZCkge1xuXHQgIF9pbmhlcml0cyhUZXRoZXJDbGFzcywgX0V2ZW50ZWQpO1xuXHRcblx0ICBmdW5jdGlvbiBUZXRoZXJDbGFzcyhvcHRpb25zKSB7XG5cdCAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXHRcblx0ICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBUZXRoZXJDbGFzcyk7XG5cdFxuXHQgICAgX2dldChPYmplY3QuZ2V0UHJvdG90eXBlT2YoVGV0aGVyQ2xhc3MucHJvdG90eXBlKSwgJ2NvbnN0cnVjdG9yJywgdGhpcykuY2FsbCh0aGlzKTtcblx0ICAgIHRoaXMucG9zaXRpb24gPSB0aGlzLnBvc2l0aW9uLmJpbmQodGhpcyk7XG5cdFxuXHQgICAgdGV0aGVycy5wdXNoKHRoaXMpO1xuXHRcblx0ICAgIHRoaXMuaGlzdG9yeSA9IFtdO1xuXHRcblx0ICAgIHRoaXMuc2V0T3B0aW9ucyhvcHRpb25zLCBmYWxzZSk7XG5cdFxuXHQgICAgVGV0aGVyQmFzZS5tb2R1bGVzLmZvckVhY2goZnVuY3Rpb24gKG1vZHVsZSkge1xuXHQgICAgICBpZiAodHlwZW9mIG1vZHVsZS5pbml0aWFsaXplICE9PSAndW5kZWZpbmVkJykge1xuXHQgICAgICAgIG1vZHVsZS5pbml0aWFsaXplLmNhbGwoX3RoaXMpO1xuXHQgICAgICB9XG5cdCAgICB9KTtcblx0XG5cdCAgICB0aGlzLnBvc2l0aW9uKCk7XG5cdCAgfVxuXHRcblx0ICBfY3JlYXRlQ2xhc3MoVGV0aGVyQ2xhc3MsIFt7XG5cdCAgICBrZXk6ICdnZXRDbGFzcycsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Q2xhc3MoKSB7XG5cdCAgICAgIHZhciBrZXkgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDAgfHwgYXJndW1lbnRzWzBdID09PSB1bmRlZmluZWQgPyAnJyA6IGFyZ3VtZW50c1swXTtcblx0ICAgICAgdmFyIGNsYXNzZXMgPSB0aGlzLm9wdGlvbnMuY2xhc3Nlcztcblx0XG5cdCAgICAgIGlmICh0eXBlb2YgY2xhc3NlcyAhPT0gJ3VuZGVmaW5lZCcgJiYgY2xhc3Nlc1trZXldKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5jbGFzc2VzW2tleV07XG5cdCAgICAgIH0gZWxzZSBpZiAodGhpcy5vcHRpb25zLmNsYXNzUHJlZml4KSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5jbGFzc1ByZWZpeCArICctJyArIGtleTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICByZXR1cm4ga2V5O1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnc2V0T3B0aW9ucycsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gc2V0T3B0aW9ucyhvcHRpb25zKSB7XG5cdCAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXHRcblx0ICAgICAgdmFyIHBvcyA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMSB8fCBhcmd1bWVudHNbMV0gPT09IHVuZGVmaW5lZCA/IHRydWUgOiBhcmd1bWVudHNbMV07XG5cdFxuXHQgICAgICB2YXIgZGVmYXVsdHMgPSB7XG5cdCAgICAgICAgb2Zmc2V0OiAnMCAwJyxcblx0ICAgICAgICB0YXJnZXRPZmZzZXQ6ICcwIDAnLFxuXHQgICAgICAgIHRhcmdldEF0dGFjaG1lbnQ6ICdhdXRvIGF1dG8nLFxuXHQgICAgICAgIGNsYXNzUHJlZml4OiAndGV0aGVyJ1xuXHQgICAgICB9O1xuXHRcblx0ICAgICAgdGhpcy5vcHRpb25zID0gZXh0ZW5kKGRlZmF1bHRzLCBvcHRpb25zKTtcblx0XG5cdCAgICAgIHZhciBfb3B0aW9ucyA9IHRoaXMub3B0aW9ucztcblx0ICAgICAgdmFyIGVsZW1lbnQgPSBfb3B0aW9ucy5lbGVtZW50O1xuXHQgICAgICB2YXIgdGFyZ2V0ID0gX29wdGlvbnMudGFyZ2V0O1xuXHQgICAgICB2YXIgdGFyZ2V0TW9kaWZpZXIgPSBfb3B0aW9ucy50YXJnZXRNb2RpZmllcjtcblx0XG5cdCAgICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG5cdCAgICAgIHRoaXMudGFyZ2V0ID0gdGFyZ2V0O1xuXHQgICAgICB0aGlzLnRhcmdldE1vZGlmaWVyID0gdGFyZ2V0TW9kaWZpZXI7XG5cdFxuXHQgICAgICBpZiAodGhpcy50YXJnZXQgPT09ICd2aWV3cG9ydCcpIHtcblx0ICAgICAgICB0aGlzLnRhcmdldCA9IGRvY3VtZW50LmJvZHk7XG5cdCAgICAgICAgdGhpcy50YXJnZXRNb2RpZmllciA9ICd2aXNpYmxlJztcblx0ICAgICAgfSBlbHNlIGlmICh0aGlzLnRhcmdldCA9PT0gJ3Njcm9sbC1oYW5kbGUnKSB7XG5cdCAgICAgICAgdGhpcy50YXJnZXQgPSBkb2N1bWVudC5ib2R5O1xuXHQgICAgICAgIHRoaXMudGFyZ2V0TW9kaWZpZXIgPSAnc2Nyb2xsLWhhbmRsZSc7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIFsnZWxlbWVudCcsICd0YXJnZXQnXS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgICAgICBpZiAodHlwZW9mIF90aGlzMltrZXldID09PSAndW5kZWZpbmVkJykge1xuXHQgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUZXRoZXIgRXJyb3I6IEJvdGggZWxlbWVudCBhbmQgdGFyZ2V0IG11c3QgYmUgZGVmaW5lZCcpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgaWYgKHR5cGVvZiBfdGhpczJba2V5XS5qcXVlcnkgIT09ICd1bmRlZmluZWQnKSB7XG5cdCAgICAgICAgICBfdGhpczJba2V5XSA9IF90aGlzMltrZXldWzBdO1xuXHQgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIF90aGlzMltrZXldID09PSAnc3RyaW5nJykge1xuXHQgICAgICAgICAgX3RoaXMyW2tleV0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKF90aGlzMltrZXldKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHRcblx0ICAgICAgYWRkQ2xhc3ModGhpcy5lbGVtZW50LCB0aGlzLmdldENsYXNzKCdlbGVtZW50JykpO1xuXHQgICAgICBpZiAoISh0aGlzLm9wdGlvbnMuYWRkVGFyZ2V0Q2xhc3NlcyA9PT0gZmFsc2UpKSB7XG5cdCAgICAgICAgYWRkQ2xhc3ModGhpcy50YXJnZXQsIHRoaXMuZ2V0Q2xhc3MoJ3RhcmdldCcpKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKCF0aGlzLm9wdGlvbnMuYXR0YWNobWVudCkge1xuXHQgICAgICAgIHRocm93IG5ldyBFcnJvcignVGV0aGVyIEVycm9yOiBZb3UgbXVzdCBwcm92aWRlIGFuIGF0dGFjaG1lbnQnKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdGhpcy50YXJnZXRBdHRhY2htZW50ID0gcGFyc2VBdHRhY2htZW50KHRoaXMub3B0aW9ucy50YXJnZXRBdHRhY2htZW50KTtcblx0ICAgICAgdGhpcy5hdHRhY2htZW50ID0gcGFyc2VBdHRhY2htZW50KHRoaXMub3B0aW9ucy5hdHRhY2htZW50KTtcblx0ICAgICAgdGhpcy5vZmZzZXQgPSBwYXJzZU9mZnNldCh0aGlzLm9wdGlvbnMub2Zmc2V0KTtcblx0ICAgICAgdGhpcy50YXJnZXRPZmZzZXQgPSBwYXJzZU9mZnNldCh0aGlzLm9wdGlvbnMudGFyZ2V0T2Zmc2V0KTtcblx0XG5cdCAgICAgIGlmICh0eXBlb2YgdGhpcy5zY3JvbGxQYXJlbnRzICE9PSAndW5kZWZpbmVkJykge1xuXHQgICAgICAgIHRoaXMuZGlzYWJsZSgpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAodGhpcy50YXJnZXRNb2RpZmllciA9PT0gJ3Njcm9sbC1oYW5kbGUnKSB7XG5cdCAgICAgICAgdGhpcy5zY3JvbGxQYXJlbnRzID0gW3RoaXMudGFyZ2V0XTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB0aGlzLnNjcm9sbFBhcmVudHMgPSBnZXRTY3JvbGxQYXJlbnRzKHRoaXMudGFyZ2V0KTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKCEodGhpcy5vcHRpb25zLmVuYWJsZWQgPT09IGZhbHNlKSkge1xuXHQgICAgICAgIHRoaXMuZW5hYmxlKHBvcyk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdnZXRUYXJnZXRCb3VuZHMnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGdldFRhcmdldEJvdW5kcygpIHtcblx0ICAgICAgaWYgKHR5cGVvZiB0aGlzLnRhcmdldE1vZGlmaWVyICE9PSAndW5kZWZpbmVkJykge1xuXHQgICAgICAgIGlmICh0aGlzLnRhcmdldE1vZGlmaWVyID09PSAndmlzaWJsZScpIHtcblx0ICAgICAgICAgIGlmICh0aGlzLnRhcmdldCA9PT0gZG9jdW1lbnQuYm9keSkge1xuXHQgICAgICAgICAgICByZXR1cm4geyB0b3A6IHBhZ2VZT2Zmc2V0LCBsZWZ0OiBwYWdlWE9mZnNldCwgaGVpZ2h0OiBpbm5lckhlaWdodCwgd2lkdGg6IGlubmVyV2lkdGggfTtcblx0ICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIHZhciBib3VuZHMgPSBnZXRCb3VuZHModGhpcy50YXJnZXQpO1xuXHRcblx0ICAgICAgICAgICAgdmFyIG91dCA9IHtcblx0ICAgICAgICAgICAgICBoZWlnaHQ6IGJvdW5kcy5oZWlnaHQsXG5cdCAgICAgICAgICAgICAgd2lkdGg6IGJvdW5kcy53aWR0aCxcblx0ICAgICAgICAgICAgICB0b3A6IGJvdW5kcy50b3AsXG5cdCAgICAgICAgICAgICAgbGVmdDogYm91bmRzLmxlZnRcblx0ICAgICAgICAgICAgfTtcblx0XG5cdCAgICAgICAgICAgIG91dC5oZWlnaHQgPSBNYXRoLm1pbihvdXQuaGVpZ2h0LCBib3VuZHMuaGVpZ2h0IC0gKHBhZ2VZT2Zmc2V0IC0gYm91bmRzLnRvcCkpO1xuXHQgICAgICAgICAgICBvdXQuaGVpZ2h0ID0gTWF0aC5taW4ob3V0LmhlaWdodCwgYm91bmRzLmhlaWdodCAtIChib3VuZHMudG9wICsgYm91bmRzLmhlaWdodCAtIChwYWdlWU9mZnNldCArIGlubmVySGVpZ2h0KSkpO1xuXHQgICAgICAgICAgICBvdXQuaGVpZ2h0ID0gTWF0aC5taW4oaW5uZXJIZWlnaHQsIG91dC5oZWlnaHQpO1xuXHQgICAgICAgICAgICBvdXQuaGVpZ2h0IC09IDI7XG5cdFxuXHQgICAgICAgICAgICBvdXQud2lkdGggPSBNYXRoLm1pbihvdXQud2lkdGgsIGJvdW5kcy53aWR0aCAtIChwYWdlWE9mZnNldCAtIGJvdW5kcy5sZWZ0KSk7XG5cdCAgICAgICAgICAgIG91dC53aWR0aCA9IE1hdGgubWluKG91dC53aWR0aCwgYm91bmRzLndpZHRoIC0gKGJvdW5kcy5sZWZ0ICsgYm91bmRzLndpZHRoIC0gKHBhZ2VYT2Zmc2V0ICsgaW5uZXJXaWR0aCkpKTtcblx0ICAgICAgICAgICAgb3V0LndpZHRoID0gTWF0aC5taW4oaW5uZXJXaWR0aCwgb3V0LndpZHRoKTtcblx0ICAgICAgICAgICAgb3V0LndpZHRoIC09IDI7XG5cdFxuXHQgICAgICAgICAgICBpZiAob3V0LnRvcCA8IHBhZ2VZT2Zmc2V0KSB7XG5cdCAgICAgICAgICAgICAgb3V0LnRvcCA9IHBhZ2VZT2Zmc2V0O1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGlmIChvdXQubGVmdCA8IHBhZ2VYT2Zmc2V0KSB7XG5cdCAgICAgICAgICAgICAgb3V0LmxlZnQgPSBwYWdlWE9mZnNldDtcblx0ICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgcmV0dXJuIG91dDtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9IGVsc2UgaWYgKHRoaXMudGFyZ2V0TW9kaWZpZXIgPT09ICdzY3JvbGwtaGFuZGxlJykge1xuXHQgICAgICAgICAgdmFyIGJvdW5kcyA9IHVuZGVmaW5lZDtcblx0ICAgICAgICAgIHZhciB0YXJnZXQgPSB0aGlzLnRhcmdldDtcblx0ICAgICAgICAgIGlmICh0YXJnZXQgPT09IGRvY3VtZW50LmJvZHkpIHtcblx0ICAgICAgICAgICAgdGFyZ2V0ID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xuXHRcblx0ICAgICAgICAgICAgYm91bmRzID0ge1xuXHQgICAgICAgICAgICAgIGxlZnQ6IHBhZ2VYT2Zmc2V0LFxuXHQgICAgICAgICAgICAgIHRvcDogcGFnZVlPZmZzZXQsXG5cdCAgICAgICAgICAgICAgaGVpZ2h0OiBpbm5lckhlaWdodCxcblx0ICAgICAgICAgICAgICB3aWR0aDogaW5uZXJXaWR0aFxuXHQgICAgICAgICAgICB9O1xuXHQgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgYm91bmRzID0gZ2V0Qm91bmRzKHRhcmdldCk7XG5cdCAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgdmFyIHN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZSh0YXJnZXQpO1xuXHRcblx0ICAgICAgICAgIHZhciBoYXNCb3R0b21TY3JvbGwgPSB0YXJnZXQuc2Nyb2xsV2lkdGggPiB0YXJnZXQuY2xpZW50V2lkdGggfHwgW3N0eWxlLm92ZXJmbG93LCBzdHlsZS5vdmVyZmxvd1hdLmluZGV4T2YoJ3Njcm9sbCcpID49IDAgfHwgdGhpcy50YXJnZXQgIT09IGRvY3VtZW50LmJvZHk7XG5cdFxuXHQgICAgICAgICAgdmFyIHNjcm9sbEJvdHRvbSA9IDA7XG5cdCAgICAgICAgICBpZiAoaGFzQm90dG9tU2Nyb2xsKSB7XG5cdCAgICAgICAgICAgIHNjcm9sbEJvdHRvbSA9IDE1O1xuXHQgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgIHZhciBoZWlnaHQgPSBib3VuZHMuaGVpZ2h0IC0gcGFyc2VGbG9hdChzdHlsZS5ib3JkZXJUb3BXaWR0aCkgLSBwYXJzZUZsb2F0KHN0eWxlLmJvcmRlckJvdHRvbVdpZHRoKSAtIHNjcm9sbEJvdHRvbTtcblx0XG5cdCAgICAgICAgICB2YXIgb3V0ID0ge1xuXHQgICAgICAgICAgICB3aWR0aDogMTUsXG5cdCAgICAgICAgICAgIGhlaWdodDogaGVpZ2h0ICogMC45NzUgKiAoaGVpZ2h0IC8gdGFyZ2V0LnNjcm9sbEhlaWdodCksXG5cdCAgICAgICAgICAgIGxlZnQ6IGJvdW5kcy5sZWZ0ICsgYm91bmRzLndpZHRoIC0gcGFyc2VGbG9hdChzdHlsZS5ib3JkZXJMZWZ0V2lkdGgpIC0gMTVcblx0ICAgICAgICAgIH07XG5cdFxuXHQgICAgICAgICAgdmFyIGZpdEFkaiA9IDA7XG5cdCAgICAgICAgICBpZiAoaGVpZ2h0IDwgNDA4ICYmIHRoaXMudGFyZ2V0ID09PSBkb2N1bWVudC5ib2R5KSB7XG5cdCAgICAgICAgICAgIGZpdEFkaiA9IC0wLjAwMDExICogTWF0aC5wb3coaGVpZ2h0LCAyKSAtIDAuMDA3MjcgKiBoZWlnaHQgKyAyMi41ODtcblx0ICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICBpZiAodGhpcy50YXJnZXQgIT09IGRvY3VtZW50LmJvZHkpIHtcblx0ICAgICAgICAgICAgb3V0LmhlaWdodCA9IE1hdGgubWF4KG91dC5oZWlnaHQsIDI0KTtcblx0ICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICB2YXIgc2Nyb2xsUGVyY2VudGFnZSA9IHRoaXMudGFyZ2V0LnNjcm9sbFRvcCAvICh0YXJnZXQuc2Nyb2xsSGVpZ2h0IC0gaGVpZ2h0KTtcblx0ICAgICAgICAgIG91dC50b3AgPSBzY3JvbGxQZXJjZW50YWdlICogKGhlaWdodCAtIG91dC5oZWlnaHQgLSBmaXRBZGopICsgYm91bmRzLnRvcCArIHBhcnNlRmxvYXQoc3R5bGUuYm9yZGVyVG9wV2lkdGgpO1xuXHRcblx0ICAgICAgICAgIGlmICh0aGlzLnRhcmdldCA9PT0gZG9jdW1lbnQuYm9keSkge1xuXHQgICAgICAgICAgICBvdXQuaGVpZ2h0ID0gTWF0aC5tYXgob3V0LmhlaWdodCwgMjQpO1xuXHQgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgIHJldHVybiBvdXQ7XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHJldHVybiBnZXRCb3VuZHModGhpcy50YXJnZXQpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnY2xlYXJDYWNoZScsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gY2xlYXJDYWNoZSgpIHtcblx0ICAgICAgdGhpcy5fY2FjaGUgPSB7fTtcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdjYWNoZScsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gY2FjaGUoaywgZ2V0dGVyKSB7XG5cdCAgICAgIC8vIE1vcmUgdGhhbiBvbmUgbW9kdWxlIHdpbGwgb2Z0ZW4gbmVlZCB0aGUgc2FtZSBET00gaW5mbywgc29cblx0ICAgICAgLy8gd2Uga2VlcCBhIGNhY2hlIHdoaWNoIGlzIGNsZWFyZWQgb24gZWFjaCBwb3NpdGlvbiBjYWxsXG5cdCAgICAgIGlmICh0eXBlb2YgdGhpcy5fY2FjaGUgPT09ICd1bmRlZmluZWQnKSB7XG5cdCAgICAgICAgdGhpcy5fY2FjaGUgPSB7fTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKHR5cGVvZiB0aGlzLl9jYWNoZVtrXSA9PT0gJ3VuZGVmaW5lZCcpIHtcblx0ICAgICAgICB0aGlzLl9jYWNoZVtrXSA9IGdldHRlci5jYWxsKHRoaXMpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICByZXR1cm4gdGhpcy5fY2FjaGVba107XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnZW5hYmxlJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBlbmFibGUoKSB7XG5cdCAgICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXHRcblx0ICAgICAgdmFyIHBvcyA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMCB8fCBhcmd1bWVudHNbMF0gPT09IHVuZGVmaW5lZCA/IHRydWUgOiBhcmd1bWVudHNbMF07XG5cdFxuXHQgICAgICBpZiAoISh0aGlzLm9wdGlvbnMuYWRkVGFyZ2V0Q2xhc3NlcyA9PT0gZmFsc2UpKSB7XG5cdCAgICAgICAgYWRkQ2xhc3ModGhpcy50YXJnZXQsIHRoaXMuZ2V0Q2xhc3MoJ2VuYWJsZWQnKSk7XG5cdCAgICAgIH1cblx0ICAgICAgYWRkQ2xhc3ModGhpcy5lbGVtZW50LCB0aGlzLmdldENsYXNzKCdlbmFibGVkJykpO1xuXHQgICAgICB0aGlzLmVuYWJsZWQgPSB0cnVlO1xuXHRcblx0ICAgICAgdGhpcy5zY3JvbGxQYXJlbnRzLmZvckVhY2goZnVuY3Rpb24gKHBhcmVudCkge1xuXHQgICAgICAgIGlmIChwYXJlbnQgIT09IF90aGlzMy50YXJnZXQub3duZXJEb2N1bWVudCkge1xuXHQgICAgICAgICAgcGFyZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIF90aGlzMy5wb3NpdGlvbik7XG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0XG5cdCAgICAgIGlmIChwb3MpIHtcblx0ICAgICAgICB0aGlzLnBvc2l0aW9uKCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdkaXNhYmxlJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBkaXNhYmxlKCkge1xuXHQgICAgICB2YXIgX3RoaXM0ID0gdGhpcztcblx0XG5cdCAgICAgIHJlbW92ZUNsYXNzKHRoaXMudGFyZ2V0LCB0aGlzLmdldENsYXNzKCdlbmFibGVkJykpO1xuXHQgICAgICByZW1vdmVDbGFzcyh0aGlzLmVsZW1lbnQsIHRoaXMuZ2V0Q2xhc3MoJ2VuYWJsZWQnKSk7XG5cdCAgICAgIHRoaXMuZW5hYmxlZCA9IGZhbHNlO1xuXHRcblx0ICAgICAgaWYgKHR5cGVvZiB0aGlzLnNjcm9sbFBhcmVudHMgIT09ICd1bmRlZmluZWQnKSB7XG5cdCAgICAgICAgdGhpcy5zY3JvbGxQYXJlbnRzLmZvckVhY2goZnVuY3Rpb24gKHBhcmVudCkge1xuXHQgICAgICAgICAgcGFyZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIF90aGlzNC5wb3NpdGlvbik7XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdkZXN0cm95Jyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBkZXN0cm95KCkge1xuXHQgICAgICB2YXIgX3RoaXM1ID0gdGhpcztcblx0XG5cdCAgICAgIHRoaXMuZGlzYWJsZSgpO1xuXHRcblx0ICAgICAgdGV0aGVycy5mb3JFYWNoKGZ1bmN0aW9uICh0ZXRoZXIsIGkpIHtcblx0ICAgICAgICBpZiAodGV0aGVyID09PSBfdGhpczUpIHtcblx0ICAgICAgICAgIHRldGhlcnMuc3BsaWNlKGksIDEpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdFxuXHQgICAgICAvLyBSZW1vdmUgYW55IGVsZW1lbnRzIHdlIHdlcmUgdXNpbmcgZm9yIGNvbnZlbmllbmNlIGZyb20gdGhlIERPTVxuXHQgICAgICBpZiAodGV0aGVycy5sZW5ndGggPT09IDApIHtcblx0ICAgICAgICByZW1vdmVVdGlsRWxlbWVudHMoKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ3VwZGF0ZUF0dGFjaENsYXNzZXMnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZUF0dGFjaENsYXNzZXMoZWxlbWVudEF0dGFjaCwgdGFyZ2V0QXR0YWNoKSB7XG5cdCAgICAgIHZhciBfdGhpczYgPSB0aGlzO1xuXHRcblx0ICAgICAgZWxlbWVudEF0dGFjaCA9IGVsZW1lbnRBdHRhY2ggfHwgdGhpcy5hdHRhY2htZW50O1xuXHQgICAgICB0YXJnZXRBdHRhY2ggPSB0YXJnZXRBdHRhY2ggfHwgdGhpcy50YXJnZXRBdHRhY2htZW50O1xuXHQgICAgICB2YXIgc2lkZXMgPSBbJ2xlZnQnLCAndG9wJywgJ2JvdHRvbScsICdyaWdodCcsICdtaWRkbGUnLCAnY2VudGVyJ107XG5cdFxuXHQgICAgICBpZiAodHlwZW9mIHRoaXMuX2FkZEF0dGFjaENsYXNzZXMgIT09ICd1bmRlZmluZWQnICYmIHRoaXMuX2FkZEF0dGFjaENsYXNzZXMubGVuZ3RoKSB7XG5cdCAgICAgICAgLy8gdXBkYXRlQXR0YWNoQ2xhc3NlcyBjYW4gYmUgY2FsbGVkIG1vcmUgdGhhbiBvbmNlIGluIGEgcG9zaXRpb24gY2FsbCwgc29cblx0ICAgICAgICAvLyB3ZSBuZWVkIHRvIGNsZWFuIHVwIGFmdGVyIG91cnNlbHZlcyBzdWNoIHRoYXQgd2hlbiB0aGUgbGFzdCBkZWZlciBnZXRzXG5cdCAgICAgICAgLy8gcmFuIGl0IGRvZXNuJ3QgYWRkIGFueSBleHRyYSBjbGFzc2VzIGZyb20gcHJldmlvdXMgY2FsbHMuXG5cdCAgICAgICAgdGhpcy5fYWRkQXR0YWNoQ2xhc3Nlcy5zcGxpY2UoMCwgdGhpcy5fYWRkQXR0YWNoQ2xhc3Nlcy5sZW5ndGgpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAodHlwZW9mIHRoaXMuX2FkZEF0dGFjaENsYXNzZXMgPT09ICd1bmRlZmluZWQnKSB7XG5cdCAgICAgICAgdGhpcy5fYWRkQXR0YWNoQ2xhc3NlcyA9IFtdO1xuXHQgICAgICB9XG5cdCAgICAgIHZhciBhZGQgPSB0aGlzLl9hZGRBdHRhY2hDbGFzc2VzO1xuXHRcblx0ICAgICAgaWYgKGVsZW1lbnRBdHRhY2gudG9wKSB7XG5cdCAgICAgICAgYWRkLnB1c2godGhpcy5nZXRDbGFzcygnZWxlbWVudC1hdHRhY2hlZCcpICsgJy0nICsgZWxlbWVudEF0dGFjaC50b3ApO1xuXHQgICAgICB9XG5cdCAgICAgIGlmIChlbGVtZW50QXR0YWNoLmxlZnQpIHtcblx0ICAgICAgICBhZGQucHVzaCh0aGlzLmdldENsYXNzKCdlbGVtZW50LWF0dGFjaGVkJykgKyAnLScgKyBlbGVtZW50QXR0YWNoLmxlZnQpO1xuXHQgICAgICB9XG5cdCAgICAgIGlmICh0YXJnZXRBdHRhY2gudG9wKSB7XG5cdCAgICAgICAgYWRkLnB1c2godGhpcy5nZXRDbGFzcygndGFyZ2V0LWF0dGFjaGVkJykgKyAnLScgKyB0YXJnZXRBdHRhY2gudG9wKTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAodGFyZ2V0QXR0YWNoLmxlZnQpIHtcblx0ICAgICAgICBhZGQucHVzaCh0aGlzLmdldENsYXNzKCd0YXJnZXQtYXR0YWNoZWQnKSArICctJyArIHRhcmdldEF0dGFjaC5sZWZ0KTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdmFyIGFsbCA9IFtdO1xuXHQgICAgICBzaWRlcy5mb3JFYWNoKGZ1bmN0aW9uIChzaWRlKSB7XG5cdCAgICAgICAgYWxsLnB1c2goX3RoaXM2LmdldENsYXNzKCdlbGVtZW50LWF0dGFjaGVkJykgKyAnLScgKyBzaWRlKTtcblx0ICAgICAgICBhbGwucHVzaChfdGhpczYuZ2V0Q2xhc3MoJ3RhcmdldC1hdHRhY2hlZCcpICsgJy0nICsgc2lkZSk7XG5cdCAgICAgIH0pO1xuXHRcblx0ICAgICAgZGVmZXIoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGlmICghKHR5cGVvZiBfdGhpczYuX2FkZEF0dGFjaENsYXNzZXMgIT09ICd1bmRlZmluZWQnKSkge1xuXHQgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgdXBkYXRlQ2xhc3NlcyhfdGhpczYuZWxlbWVudCwgX3RoaXM2Ll9hZGRBdHRhY2hDbGFzc2VzLCBhbGwpO1xuXHQgICAgICAgIGlmICghKF90aGlzNi5vcHRpb25zLmFkZFRhcmdldENsYXNzZXMgPT09IGZhbHNlKSkge1xuXHQgICAgICAgICAgdXBkYXRlQ2xhc3NlcyhfdGhpczYudGFyZ2V0LCBfdGhpczYuX2FkZEF0dGFjaENsYXNzZXMsIGFsbCk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBkZWxldGUgX3RoaXM2Ll9hZGRBdHRhY2hDbGFzc2VzO1xuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdwb3NpdGlvbicsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gcG9zaXRpb24oKSB7XG5cdCAgICAgIHZhciBfdGhpczcgPSB0aGlzO1xuXHRcblx0ICAgICAgdmFyIGZsdXNoQ2hhbmdlcyA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMCB8fCBhcmd1bWVudHNbMF0gPT09IHVuZGVmaW5lZCA/IHRydWUgOiBhcmd1bWVudHNbMF07XG5cdFxuXHQgICAgICAvLyBmbHVzaENoYW5nZXMgY29tbWl0cyB0aGUgY2hhbmdlcyBpbW1lZGlhdGVseSwgbGVhdmUgdHJ1ZSB1bmxlc3MgeW91IGFyZSBwb3NpdGlvbmluZyBtdWx0aXBsZVxuXHQgICAgICAvLyB0ZXRoZXJzIChpbiB3aGljaCBjYXNlIGNhbGwgVGV0aGVyLlV0aWxzLmZsdXNoIHlvdXJzZWxmIHdoZW4geW91J3JlIGRvbmUpXG5cdFxuXHQgICAgICBpZiAoIXRoaXMuZW5hYmxlZCkge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdGhpcy5jbGVhckNhY2hlKCk7XG5cdFxuXHQgICAgICAvLyBUdXJuICdhdXRvJyBhdHRhY2htZW50cyBpbnRvIHRoZSBhcHByb3ByaWF0ZSBjb3JuZXIgb3IgZWRnZVxuXHQgICAgICB2YXIgdGFyZ2V0QXR0YWNobWVudCA9IGF1dG9Ub0ZpeGVkQXR0YWNobWVudCh0aGlzLnRhcmdldEF0dGFjaG1lbnQsIHRoaXMuYXR0YWNobWVudCk7XG5cdFxuXHQgICAgICB0aGlzLnVwZGF0ZUF0dGFjaENsYXNzZXModGhpcy5hdHRhY2htZW50LCB0YXJnZXRBdHRhY2htZW50KTtcblx0XG5cdCAgICAgIHZhciBlbGVtZW50UG9zID0gdGhpcy5jYWNoZSgnZWxlbWVudC1ib3VuZHMnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgcmV0dXJuIGdldEJvdW5kcyhfdGhpczcuZWxlbWVudCk7XG5cdCAgICAgIH0pO1xuXHRcblx0ICAgICAgdmFyIHdpZHRoID0gZWxlbWVudFBvcy53aWR0aDtcblx0ICAgICAgdmFyIGhlaWdodCA9IGVsZW1lbnRQb3MuaGVpZ2h0O1xuXHRcblx0ICAgICAgaWYgKHdpZHRoID09PSAwICYmIGhlaWdodCA9PT0gMCAmJiB0eXBlb2YgdGhpcy5sYXN0U2l6ZSAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0ICAgICAgICB2YXIgX2xhc3RTaXplID0gdGhpcy5sYXN0U2l6ZTtcblx0XG5cdCAgICAgICAgLy8gV2UgY2FjaGUgdGhlIGhlaWdodCBhbmQgd2lkdGggdG8gbWFrZSBpdCBwb3NzaWJsZSB0byBwb3NpdGlvbiBlbGVtZW50cyB0aGF0IGFyZVxuXHQgICAgICAgIC8vIGdldHRpbmcgaGlkZGVuLlxuXHQgICAgICAgIHdpZHRoID0gX2xhc3RTaXplLndpZHRoO1xuXHQgICAgICAgIGhlaWdodCA9IF9sYXN0U2l6ZS5oZWlnaHQ7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgdGhpcy5sYXN0U2l6ZSA9IHsgd2lkdGg6IHdpZHRoLCBoZWlnaHQ6IGhlaWdodCB9O1xuXHQgICAgICB9XG5cdFxuXHQgICAgICB2YXIgdGFyZ2V0UG9zID0gdGhpcy5jYWNoZSgndGFyZ2V0LWJvdW5kcycsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICByZXR1cm4gX3RoaXM3LmdldFRhcmdldEJvdW5kcygpO1xuXHQgICAgICB9KTtcblx0ICAgICAgdmFyIHRhcmdldFNpemUgPSB0YXJnZXRQb3M7XG5cdFxuXHQgICAgICAvLyBHZXQgYW4gYWN0dWFsIHB4IG9mZnNldCBmcm9tIHRoZSBhdHRhY2htZW50XG5cdCAgICAgIHZhciBvZmZzZXQgPSBvZmZzZXRUb1B4KGF0dGFjaG1lbnRUb09mZnNldCh0aGlzLmF0dGFjaG1lbnQpLCB7IHdpZHRoOiB3aWR0aCwgaGVpZ2h0OiBoZWlnaHQgfSk7XG5cdCAgICAgIHZhciB0YXJnZXRPZmZzZXQgPSBvZmZzZXRUb1B4KGF0dGFjaG1lbnRUb09mZnNldCh0YXJnZXRBdHRhY2htZW50KSwgdGFyZ2V0U2l6ZSk7XG5cdFxuXHQgICAgICB2YXIgbWFudWFsT2Zmc2V0ID0gb2Zmc2V0VG9QeCh0aGlzLm9mZnNldCwgeyB3aWR0aDogd2lkdGgsIGhlaWdodDogaGVpZ2h0IH0pO1xuXHQgICAgICB2YXIgbWFudWFsVGFyZ2V0T2Zmc2V0ID0gb2Zmc2V0VG9QeCh0aGlzLnRhcmdldE9mZnNldCwgdGFyZ2V0U2l6ZSk7XG5cdFxuXHQgICAgICAvLyBBZGQgdGhlIG1hbnVhbGx5IHByb3ZpZGVkIG9mZnNldFxuXHQgICAgICBvZmZzZXQgPSBhZGRPZmZzZXQob2Zmc2V0LCBtYW51YWxPZmZzZXQpO1xuXHQgICAgICB0YXJnZXRPZmZzZXQgPSBhZGRPZmZzZXQodGFyZ2V0T2Zmc2V0LCBtYW51YWxUYXJnZXRPZmZzZXQpO1xuXHRcblx0ICAgICAgLy8gSXQncyBub3cgb3VyIGdvYWwgdG8gbWFrZSAoZWxlbWVudCBwb3NpdGlvbiArIG9mZnNldCkgPT0gKHRhcmdldCBwb3NpdGlvbiArIHRhcmdldCBvZmZzZXQpXG5cdCAgICAgIHZhciBsZWZ0ID0gdGFyZ2V0UG9zLmxlZnQgKyB0YXJnZXRPZmZzZXQubGVmdCAtIG9mZnNldC5sZWZ0O1xuXHQgICAgICB2YXIgdG9wID0gdGFyZ2V0UG9zLnRvcCArIHRhcmdldE9mZnNldC50b3AgLSBvZmZzZXQudG9wO1xuXHRcblx0ICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBUZXRoZXJCYXNlLm1vZHVsZXMubGVuZ3RoOyArK2kpIHtcblx0ICAgICAgICB2YXIgX21vZHVsZTIgPSBUZXRoZXJCYXNlLm1vZHVsZXNbaV07XG5cdCAgICAgICAgdmFyIHJldCA9IF9tb2R1bGUyLnBvc2l0aW9uLmNhbGwodGhpcywge1xuXHQgICAgICAgICAgbGVmdDogbGVmdCxcblx0ICAgICAgICAgIHRvcDogdG9wLFxuXHQgICAgICAgICAgdGFyZ2V0QXR0YWNobWVudDogdGFyZ2V0QXR0YWNobWVudCxcblx0ICAgICAgICAgIHRhcmdldFBvczogdGFyZ2V0UG9zLFxuXHQgICAgICAgICAgZWxlbWVudFBvczogZWxlbWVudFBvcyxcblx0ICAgICAgICAgIG9mZnNldDogb2Zmc2V0LFxuXHQgICAgICAgICAgdGFyZ2V0T2Zmc2V0OiB0YXJnZXRPZmZzZXQsXG5cdCAgICAgICAgICBtYW51YWxPZmZzZXQ6IG1hbnVhbE9mZnNldCxcblx0ICAgICAgICAgIG1hbnVhbFRhcmdldE9mZnNldDogbWFudWFsVGFyZ2V0T2Zmc2V0LFxuXHQgICAgICAgICAgc2Nyb2xsYmFyU2l6ZTogc2Nyb2xsYmFyU2l6ZSxcblx0ICAgICAgICAgIGF0dGFjaG1lbnQ6IHRoaXMuYXR0YWNobWVudFxuXHQgICAgICAgIH0pO1xuXHRcblx0ICAgICAgICBpZiAocmV0ID09PSBmYWxzZSkge1xuXHQgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHJldCA9PT0gJ3VuZGVmaW5lZCcgfHwgdHlwZW9mIHJldCAhPT0gJ29iamVjdCcpIHtcblx0ICAgICAgICAgIGNvbnRpbnVlO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICB0b3AgPSByZXQudG9wO1xuXHQgICAgICAgICAgbGVmdCA9IHJldC5sZWZ0O1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHRcblx0ICAgICAgLy8gV2UgZGVzY3JpYmUgdGhlIHBvc2l0aW9uIHRocmVlIGRpZmZlcmVudCB3YXlzIHRvIGdpdmUgdGhlIG9wdGltaXplclxuXHQgICAgICAvLyBhIGNoYW5jZSB0byBkZWNpZGUgdGhlIGJlc3QgcG9zc2libGUgd2F5IHRvIHBvc2l0aW9uIHRoZSBlbGVtZW50XG5cdCAgICAgIC8vIHdpdGggdGhlIGZld2VzdCByZXBhaW50cy5cblx0ICAgICAgdmFyIG5leHQgPSB7XG5cdCAgICAgICAgLy8gSXQncyBwb3NpdGlvbiByZWxhdGl2ZSB0byB0aGUgcGFnZSAoYWJzb2x1dGUgcG9zaXRpb25pbmcgd2hlblxuXHQgICAgICAgIC8vIHRoZSBlbGVtZW50IGlzIGEgY2hpbGQgb2YgdGhlIGJvZHkpXG5cdCAgICAgICAgcGFnZToge1xuXHQgICAgICAgICAgdG9wOiB0b3AsXG5cdCAgICAgICAgICBsZWZ0OiBsZWZ0XG5cdCAgICAgICAgfSxcblx0XG5cdCAgICAgICAgLy8gSXQncyBwb3NpdGlvbiByZWxhdGl2ZSB0byB0aGUgdmlld3BvcnQgKGZpeGVkIHBvc2l0aW9uaW5nKVxuXHQgICAgICAgIHZpZXdwb3J0OiB7XG5cdCAgICAgICAgICB0b3A6IHRvcCAtIHBhZ2VZT2Zmc2V0LFxuXHQgICAgICAgICAgYm90dG9tOiBwYWdlWU9mZnNldCAtIHRvcCAtIGhlaWdodCArIGlubmVySGVpZ2h0LFxuXHQgICAgICAgICAgbGVmdDogbGVmdCAtIHBhZ2VYT2Zmc2V0LFxuXHQgICAgICAgICAgcmlnaHQ6IHBhZ2VYT2Zmc2V0IC0gbGVmdCAtIHdpZHRoICsgaW5uZXJXaWR0aFxuXHQgICAgICAgIH1cblx0ICAgICAgfTtcblx0XG5cdCAgICAgIHZhciBkb2MgPSB0aGlzLnRhcmdldC5vd25lckRvY3VtZW50O1xuXHQgICAgICB2YXIgd2luID0gZG9jLmRlZmF1bHRWaWV3O1xuXHRcblx0ICAgICAgdmFyIHNjcm9sbGJhclNpemUgPSB1bmRlZmluZWQ7XG5cdCAgICAgIGlmICh3aW4uaW5uZXJIZWlnaHQgPiBkb2MuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCkge1xuXHQgICAgICAgIHNjcm9sbGJhclNpemUgPSB0aGlzLmNhY2hlKCdzY3JvbGxiYXItc2l6ZScsIGdldFNjcm9sbEJhclNpemUpO1xuXHQgICAgICAgIG5leHQudmlld3BvcnQuYm90dG9tIC09IHNjcm9sbGJhclNpemUuaGVpZ2h0O1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAod2luLmlubmVyV2lkdGggPiBkb2MuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoKSB7XG5cdCAgICAgICAgc2Nyb2xsYmFyU2l6ZSA9IHRoaXMuY2FjaGUoJ3Njcm9sbGJhci1zaXplJywgZ2V0U2Nyb2xsQmFyU2l6ZSk7XG5cdCAgICAgICAgbmV4dC52aWV3cG9ydC5yaWdodCAtPSBzY3JvbGxiYXJTaXplLndpZHRoO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAoWycnLCAnc3RhdGljJ10uaW5kZXhPZihkb2MuYm9keS5zdHlsZS5wb3NpdGlvbikgPT09IC0xIHx8IFsnJywgJ3N0YXRpYyddLmluZGV4T2YoZG9jLmJvZHkucGFyZW50RWxlbWVudC5zdHlsZS5wb3NpdGlvbikgPT09IC0xKSB7XG5cdCAgICAgICAgLy8gQWJzb2x1dGUgcG9zaXRpb25pbmcgaW4gdGhlIGJvZHkgd2lsbCBiZSByZWxhdGl2ZSB0byB0aGUgcGFnZSwgbm90IHRoZSAnaW5pdGlhbCBjb250YWluaW5nIGJsb2NrJ1xuXHQgICAgICAgIG5leHQucGFnZS5ib3R0b20gPSBkb2MuYm9keS5zY3JvbGxIZWlnaHQgLSB0b3AgLSBoZWlnaHQ7XG5cdCAgICAgICAgbmV4dC5wYWdlLnJpZ2h0ID0gZG9jLmJvZHkuc2Nyb2xsV2lkdGggLSBsZWZ0IC0gd2lkdGg7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmICh0eXBlb2YgdGhpcy5vcHRpb25zLm9wdGltaXphdGlvbnMgIT09ICd1bmRlZmluZWQnICYmIHRoaXMub3B0aW9ucy5vcHRpbWl6YXRpb25zLm1vdmVFbGVtZW50ICE9PSBmYWxzZSAmJiAhKHR5cGVvZiB0aGlzLnRhcmdldE1vZGlmaWVyICE9PSAndW5kZWZpbmVkJykpIHtcblx0ICAgICAgICAoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgdmFyIG9mZnNldFBhcmVudCA9IF90aGlzNy5jYWNoZSgndGFyZ2V0LW9mZnNldHBhcmVudCcsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIGdldE9mZnNldFBhcmVudChfdGhpczcudGFyZ2V0KTtcblx0ICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgdmFyIG9mZnNldFBvc2l0aW9uID0gX3RoaXM3LmNhY2hlKCd0YXJnZXQtb2Zmc2V0cGFyZW50LWJvdW5kcycsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIGdldEJvdW5kcyhvZmZzZXRQYXJlbnQpO1xuXHQgICAgICAgICAgfSk7XG5cdCAgICAgICAgICB2YXIgb2Zmc2V0UGFyZW50U3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKG9mZnNldFBhcmVudCk7XG5cdCAgICAgICAgICB2YXIgb2Zmc2V0UGFyZW50U2l6ZSA9IG9mZnNldFBvc2l0aW9uO1xuXHRcblx0ICAgICAgICAgIHZhciBvZmZzZXRCb3JkZXIgPSB7fTtcblx0ICAgICAgICAgIFsnVG9wJywgJ0xlZnQnLCAnQm90dG9tJywgJ1JpZ2h0J10uZm9yRWFjaChmdW5jdGlvbiAoc2lkZSkge1xuXHQgICAgICAgICAgICBvZmZzZXRCb3JkZXJbc2lkZS50b0xvd2VyQ2FzZSgpXSA9IHBhcnNlRmxvYXQob2Zmc2V0UGFyZW50U3R5bGVbJ2JvcmRlcicgKyBzaWRlICsgJ1dpZHRoJ10pO1xuXHQgICAgICAgICAgfSk7XG5cdFxuXHQgICAgICAgICAgb2Zmc2V0UG9zaXRpb24ucmlnaHQgPSBkb2MuYm9keS5zY3JvbGxXaWR0aCAtIG9mZnNldFBvc2l0aW9uLmxlZnQgLSBvZmZzZXRQYXJlbnRTaXplLndpZHRoICsgb2Zmc2V0Qm9yZGVyLnJpZ2h0O1xuXHQgICAgICAgICAgb2Zmc2V0UG9zaXRpb24uYm90dG9tID0gZG9jLmJvZHkuc2Nyb2xsSGVpZ2h0IC0gb2Zmc2V0UG9zaXRpb24udG9wIC0gb2Zmc2V0UGFyZW50U2l6ZS5oZWlnaHQgKyBvZmZzZXRCb3JkZXIuYm90dG9tO1xuXHRcblx0ICAgICAgICAgIGlmIChuZXh0LnBhZ2UudG9wID49IG9mZnNldFBvc2l0aW9uLnRvcCArIG9mZnNldEJvcmRlci50b3AgJiYgbmV4dC5wYWdlLmJvdHRvbSA+PSBvZmZzZXRQb3NpdGlvbi5ib3R0b20pIHtcblx0ICAgICAgICAgICAgaWYgKG5leHQucGFnZS5sZWZ0ID49IG9mZnNldFBvc2l0aW9uLmxlZnQgKyBvZmZzZXRCb3JkZXIubGVmdCAmJiBuZXh0LnBhZ2UucmlnaHQgPj0gb2Zmc2V0UG9zaXRpb24ucmlnaHQpIHtcblx0ICAgICAgICAgICAgICAvLyBXZSdyZSB3aXRoaW4gdGhlIHZpc2libGUgcGFydCBvZiB0aGUgdGFyZ2V0J3Mgc2Nyb2xsIHBhcmVudFxuXHQgICAgICAgICAgICAgIHZhciBzY3JvbGxUb3AgPSBvZmZzZXRQYXJlbnQuc2Nyb2xsVG9wO1xuXHQgICAgICAgICAgICAgIHZhciBzY3JvbGxMZWZ0ID0gb2Zmc2V0UGFyZW50LnNjcm9sbExlZnQ7XG5cdFxuXHQgICAgICAgICAgICAgIC8vIEl0J3MgcG9zaXRpb24gcmVsYXRpdmUgdG8gdGhlIHRhcmdldCdzIG9mZnNldCBwYXJlbnQgKGFic29sdXRlIHBvc2l0aW9uaW5nIHdoZW5cblx0ICAgICAgICAgICAgICAvLyB0aGUgZWxlbWVudCBpcyBtb3ZlZCB0byBiZSBhIGNoaWxkIG9mIHRoZSB0YXJnZXQncyBvZmZzZXQgcGFyZW50KS5cblx0ICAgICAgICAgICAgICBuZXh0Lm9mZnNldCA9IHtcblx0ICAgICAgICAgICAgICAgIHRvcDogbmV4dC5wYWdlLnRvcCAtIG9mZnNldFBvc2l0aW9uLnRvcCArIHNjcm9sbFRvcCAtIG9mZnNldEJvcmRlci50b3AsXG5cdCAgICAgICAgICAgICAgICBsZWZ0OiBuZXh0LnBhZ2UubGVmdCAtIG9mZnNldFBvc2l0aW9uLmxlZnQgKyBzY3JvbGxMZWZ0IC0gb2Zmc2V0Qm9yZGVyLmxlZnRcblx0ICAgICAgICAgICAgICB9O1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSkoKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgLy8gV2UgY291bGQgYWxzbyB0cmF2ZWwgdXAgdGhlIERPTSBhbmQgdHJ5IGVhY2ggY29udGFpbmluZyBjb250ZXh0LCByYXRoZXIgdGhhbiBvbmx5XG5cdCAgICAgIC8vIGxvb2tpbmcgYXQgdGhlIGJvZHksIGJ1dCB3ZSdyZSBnb25uYSBnZXQgZGltaW5pc2hpbmcgcmV0dXJucy5cblx0XG5cdCAgICAgIHRoaXMubW92ZShuZXh0KTtcblx0XG5cdCAgICAgIHRoaXMuaGlzdG9yeS51bnNoaWZ0KG5leHQpO1xuXHRcblx0ICAgICAgaWYgKHRoaXMuaGlzdG9yeS5sZW5ndGggPiAzKSB7XG5cdCAgICAgICAgdGhpcy5oaXN0b3J5LnBvcCgpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAoZmx1c2hDaGFuZ2VzKSB7XG5cdCAgICAgICAgZmx1c2goKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgcmV0dXJuIHRydWU7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gVEhFIElTU1VFXG5cdCAgfSwge1xuXHQgICAga2V5OiAnbW92ZScsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gbW92ZShwb3MpIHtcblx0ICAgICAgdmFyIF90aGlzOCA9IHRoaXM7XG5cdFxuXHQgICAgICBpZiAoISh0eXBlb2YgdGhpcy5lbGVtZW50LnBhcmVudE5vZGUgIT09ICd1bmRlZmluZWQnKSkge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdmFyIHNhbWUgPSB7fTtcblx0XG5cdCAgICAgIGZvciAodmFyIHR5cGUgaW4gcG9zKSB7XG5cdCAgICAgICAgc2FtZVt0eXBlXSA9IHt9O1xuXHRcblx0ICAgICAgICBmb3IgKHZhciBrZXkgaW4gcG9zW3R5cGVdKSB7XG5cdCAgICAgICAgICB2YXIgZm91bmQgPSBmYWxzZTtcblx0XG5cdCAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuaGlzdG9yeS5sZW5ndGg7ICsraSkge1xuXHQgICAgICAgICAgICB2YXIgcG9pbnQgPSB0aGlzLmhpc3RvcnlbaV07XG5cdCAgICAgICAgICAgIGlmICh0eXBlb2YgcG9pbnRbdHlwZV0gIT09ICd1bmRlZmluZWQnICYmICF3aXRoaW4ocG9pbnRbdHlwZV1ba2V5XSwgcG9zW3R5cGVdW2tleV0pKSB7XG5cdCAgICAgICAgICAgICAgZm91bmQgPSB0cnVlO1xuXHQgICAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgaWYgKCFmb3VuZCkge1xuXHQgICAgICAgICAgICBzYW1lW3R5cGVdW2tleV0gPSB0cnVlO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHRcblx0ICAgICAgdmFyIGNzcyA9IHsgdG9wOiAnJywgbGVmdDogJycsIHJpZ2h0OiAnJywgYm90dG9tOiAnJyB9O1xuXHRcblx0ICAgICAgdmFyIHRyYW5zY3JpYmUgPSBmdW5jdGlvbiB0cmFuc2NyaWJlKF9zYW1lLCBfcG9zKSB7XG5cdCAgICAgICAgdmFyIGhhc09wdGltaXphdGlvbnMgPSB0eXBlb2YgX3RoaXM4Lm9wdGlvbnMub3B0aW1pemF0aW9ucyAhPT0gJ3VuZGVmaW5lZCc7XG5cdCAgICAgICAgdmFyIGdwdSA9IGhhc09wdGltaXphdGlvbnMgPyBfdGhpczgub3B0aW9ucy5vcHRpbWl6YXRpb25zLmdwdSA6IG51bGw7XG5cdCAgICAgICAgaWYgKGdwdSAhPT0gZmFsc2UpIHtcblx0ICAgICAgICAgIHZhciB5UG9zID0gdW5kZWZpbmVkLFxuXHQgICAgICAgICAgICAgIHhQb3MgPSB1bmRlZmluZWQ7XG5cdCAgICAgICAgICBpZiAoX3NhbWUudG9wKSB7XG5cdCAgICAgICAgICAgIGNzcy50b3AgPSAwO1xuXHQgICAgICAgICAgICB5UG9zID0gX3Bvcy50b3A7XG5cdCAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBjc3MuYm90dG9tID0gMDtcblx0ICAgICAgICAgICAgeVBvcyA9IC1fcG9zLmJvdHRvbTtcblx0ICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICBpZiAoX3NhbWUubGVmdCkge1xuXHQgICAgICAgICAgICBjc3MubGVmdCA9IDA7XG5cdCAgICAgICAgICAgIHhQb3MgPSBfcG9zLmxlZnQ7XG5cdCAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBjc3MucmlnaHQgPSAwO1xuXHQgICAgICAgICAgICB4UG9zID0gLV9wb3MucmlnaHQ7XG5cdCAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgaWYgKHdpbmRvdy5tYXRjaE1lZGlhKSB7XG5cdCAgICAgICAgICAgIC8vIEh1YlNwb3QvdGV0aGVyIzIwN1xuXHQgICAgICAgICAgICB2YXIgcmV0aW5hID0gd2luZG93Lm1hdGNoTWVkaWEoJ29ubHkgc2NyZWVuIGFuZCAobWluLXJlc29sdXRpb246IDEuM2RwcHgpJykubWF0Y2hlcyB8fCB3aW5kb3cubWF0Y2hNZWRpYSgnb25seSBzY3JlZW4gYW5kICgtd2Via2l0LW1pbi1kZXZpY2UtcGl4ZWwtcmF0aW86IDEuMyknKS5tYXRjaGVzO1xuXHQgICAgICAgICAgICBpZiAoIXJldGluYSkge1xuXHQgICAgICAgICAgICAgIHhQb3MgPSBNYXRoLnJvdW5kKHhQb3MpO1xuXHQgICAgICAgICAgICAgIHlQb3MgPSBNYXRoLnJvdW5kKHlQb3MpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgY3NzW3RyYW5zZm9ybUtleV0gPSAndHJhbnNsYXRlWCgnICsgeFBvcyArICdweCkgdHJhbnNsYXRlWSgnICsgeVBvcyArICdweCknO1xuXHRcblx0ICAgICAgICAgIGlmICh0cmFuc2Zvcm1LZXkgIT09ICdtc1RyYW5zZm9ybScpIHtcblx0ICAgICAgICAgICAgLy8gVGhlIFogdHJhbnNmb3JtIHdpbGwga2VlcCB0aGlzIGluIHRoZSBHUFUgKGZhc3RlciwgYW5kIHByZXZlbnRzIGFydGlmYWN0cyksXG5cdCAgICAgICAgICAgIC8vIGJ1dCBJRTkgZG9lc24ndCBzdXBwb3J0IDNkIHRyYW5zZm9ybXMgYW5kIHdpbGwgY2hva2UuXG5cdCAgICAgICAgICAgIGNzc1t0cmFuc2Zvcm1LZXldICs9IFwiIHRyYW5zbGF0ZVooMClcIjtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgaWYgKF9zYW1lLnRvcCkge1xuXHQgICAgICAgICAgICBjc3MudG9wID0gX3Bvcy50b3AgKyAncHgnO1xuXHQgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgY3NzLmJvdHRvbSA9IF9wb3MuYm90dG9tICsgJ3B4Jztcblx0ICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICBpZiAoX3NhbWUubGVmdCkge1xuXHQgICAgICAgICAgICBjc3MubGVmdCA9IF9wb3MubGVmdCArICdweCc7XG5cdCAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBjc3MucmlnaHQgPSBfcG9zLnJpZ2h0ICsgJ3B4Jztcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH07XG5cdFxuXHQgICAgICB2YXIgbW92ZWQgPSBmYWxzZTtcblx0ICAgICAgaWYgKChzYW1lLnBhZ2UudG9wIHx8IHNhbWUucGFnZS5ib3R0b20pICYmIChzYW1lLnBhZ2UubGVmdCB8fCBzYW1lLnBhZ2UucmlnaHQpKSB7XG5cdCAgICAgICAgY3NzLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcblx0ICAgICAgICB0cmFuc2NyaWJlKHNhbWUucGFnZSwgcG9zLnBhZ2UpO1xuXHQgICAgICB9IGVsc2UgaWYgKChzYW1lLnZpZXdwb3J0LnRvcCB8fCBzYW1lLnZpZXdwb3J0LmJvdHRvbSkgJiYgKHNhbWUudmlld3BvcnQubGVmdCB8fCBzYW1lLnZpZXdwb3J0LnJpZ2h0KSkge1xuXHQgICAgICAgIGNzcy5wb3NpdGlvbiA9ICdmaXhlZCc7XG5cdCAgICAgICAgdHJhbnNjcmliZShzYW1lLnZpZXdwb3J0LCBwb3Mudmlld3BvcnQpO1xuXHQgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBzYW1lLm9mZnNldCAhPT0gJ3VuZGVmaW5lZCcgJiYgc2FtZS5vZmZzZXQudG9wICYmIHNhbWUub2Zmc2V0LmxlZnQpIHtcblx0ICAgICAgICAoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgY3NzLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcblx0ICAgICAgICAgIHZhciBvZmZzZXRQYXJlbnQgPSBfdGhpczguY2FjaGUoJ3RhcmdldC1vZmZzZXRwYXJlbnQnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBnZXRPZmZzZXRQYXJlbnQoX3RoaXM4LnRhcmdldCk7XG5cdCAgICAgICAgICB9KTtcblx0XG5cdCAgICAgICAgICBpZiAoZ2V0T2Zmc2V0UGFyZW50KF90aGlzOC5lbGVtZW50KSAhPT0gb2Zmc2V0UGFyZW50KSB7XG5cdCAgICAgICAgICAgIGRlZmVyKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgICBfdGhpczguZWxlbWVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKF90aGlzOC5lbGVtZW50KTtcblx0ICAgICAgICAgICAgICBvZmZzZXRQYXJlbnQuYXBwZW5kQ2hpbGQoX3RoaXM4LmVsZW1lbnQpO1xuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICB0cmFuc2NyaWJlKHNhbWUub2Zmc2V0LCBwb3Mub2Zmc2V0KTtcblx0ICAgICAgICAgIG1vdmVkID0gdHJ1ZTtcblx0ICAgICAgICB9KSgpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIGNzcy5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG5cdCAgICAgICAgdHJhbnNjcmliZSh7IHRvcDogdHJ1ZSwgbGVmdDogdHJ1ZSB9LCBwb3MucGFnZSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmICghbW92ZWQpIHtcblx0ICAgICAgICB2YXIgb2Zmc2V0UGFyZW50SXNCb2R5ID0gdHJ1ZTtcblx0ICAgICAgICB2YXIgY3VycmVudE5vZGUgPSB0aGlzLmVsZW1lbnQucGFyZW50Tm9kZTtcblx0ICAgICAgICB3aGlsZSAoY3VycmVudE5vZGUgJiYgY3VycmVudE5vZGUubm9kZVR5cGUgPT09IDEgJiYgY3VycmVudE5vZGUudGFnTmFtZSAhPT0gJ0JPRFknKSB7XG5cdCAgICAgICAgICBpZiAoZ2V0Q29tcHV0ZWRTdHlsZShjdXJyZW50Tm9kZSkucG9zaXRpb24gIT09ICdzdGF0aWMnKSB7XG5cdCAgICAgICAgICAgIG9mZnNldFBhcmVudElzQm9keSA9IGZhbHNlO1xuXHQgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICBjdXJyZW50Tm9kZSA9IGN1cnJlbnROb2RlLnBhcmVudE5vZGU7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBpZiAoIW9mZnNldFBhcmVudElzQm9keSkge1xuXHQgICAgICAgICAgdGhpcy5lbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5lbGVtZW50KTtcblx0ICAgICAgICAgIHRoaXMuZWxlbWVudC5vd25lckRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5lbGVtZW50KTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8vIEFueSBjc3MgY2hhbmdlIHdpbGwgdHJpZ2dlciBhIHJlcGFpbnQsIHNvIGxldCdzIGF2b2lkIG9uZSBpZiBub3RoaW5nIGNoYW5nZWRcblx0ICAgICAgdmFyIHdyaXRlQ1NTID0ge307XG5cdCAgICAgIHZhciB3cml0ZSA9IGZhbHNlO1xuXHQgICAgICBmb3IgKHZhciBrZXkgaW4gY3NzKSB7XG5cdCAgICAgICAgdmFyIHZhbCA9IGNzc1trZXldO1xuXHQgICAgICAgIHZhciBlbFZhbCA9IHRoaXMuZWxlbWVudC5zdHlsZVtrZXldO1xuXHRcblx0ICAgICAgICBpZiAoZWxWYWwgIT09IHZhbCkge1xuXHQgICAgICAgICAgd3JpdGUgPSB0cnVlO1xuXHQgICAgICAgICAgd3JpdGVDU1Nba2V5XSA9IHZhbDtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmICh3cml0ZSkge1xuXHQgICAgICAgIGRlZmVyKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgIGV4dGVuZChfdGhpczguZWxlbWVudC5zdHlsZSwgd3JpdGVDU1MpO1xuXHQgICAgICAgICAgX3RoaXM4LnRyaWdnZXIoJ3JlcG9zaXRpb25lZCcpO1xuXHQgICAgICAgIH0pO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfV0pO1xuXHRcblx0ICByZXR1cm4gVGV0aGVyQ2xhc3M7XG5cdH0pKEV2ZW50ZWQpO1xuXHRcblx0VGV0aGVyQ2xhc3MubW9kdWxlcyA9IFtdO1xuXHRcblx0VGV0aGVyQmFzZS5wb3NpdGlvbiA9IHBvc2l0aW9uO1xuXHRcblx0dmFyIFRldGhlciA9IGV4dGVuZChUZXRoZXJDbGFzcywgVGV0aGVyQmFzZSk7XG5cdC8qIGdsb2JhbHMgVGV0aGVyQmFzZSAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIF9zbGljZWRUb0FycmF5ID0gKGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gc2xpY2VJdGVyYXRvcihhcnIsIGkpIHsgdmFyIF9hcnIgPSBbXTsgdmFyIF9uID0gdHJ1ZTsgdmFyIF9kID0gZmFsc2U7IHZhciBfZSA9IHVuZGVmaW5lZDsgdHJ5IHsgZm9yICh2YXIgX2kgPSBhcnJbU3ltYm9sLml0ZXJhdG9yXSgpLCBfczsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkgeyBfYXJyLnB1c2goX3MudmFsdWUpOyBpZiAoaSAmJiBfYXJyLmxlbmd0aCA9PT0gaSkgYnJlYWs7IH0gfSBjYXRjaCAoZXJyKSB7IF9kID0gdHJ1ZTsgX2UgPSBlcnI7IH0gZmluYWxseSB7IHRyeSB7IGlmICghX24gJiYgX2lbJ3JldHVybiddKSBfaVsncmV0dXJuJ10oKTsgfSBmaW5hbGx5IHsgaWYgKF9kKSB0aHJvdyBfZTsgfSB9IHJldHVybiBfYXJyOyB9IHJldHVybiBmdW5jdGlvbiAoYXJyLCBpKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHsgcmV0dXJuIGFycjsgfSBlbHNlIGlmIChTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGFycikpIHsgcmV0dXJuIHNsaWNlSXRlcmF0b3IoYXJyLCBpKTsgfSBlbHNlIHsgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZScpOyB9IH07IH0pKCk7XG5cdFxuXHR2YXIgX1RldGhlckJhc2UkVXRpbHMgPSBUZXRoZXJCYXNlLlV0aWxzO1xuXHR2YXIgZ2V0Qm91bmRzID0gX1RldGhlckJhc2UkVXRpbHMuZ2V0Qm91bmRzO1xuXHR2YXIgZXh0ZW5kID0gX1RldGhlckJhc2UkVXRpbHMuZXh0ZW5kO1xuXHR2YXIgdXBkYXRlQ2xhc3NlcyA9IF9UZXRoZXJCYXNlJFV0aWxzLnVwZGF0ZUNsYXNzZXM7XG5cdHZhciBkZWZlciA9IF9UZXRoZXJCYXNlJFV0aWxzLmRlZmVyO1xuXHRcblx0dmFyIEJPVU5EU19GT1JNQVQgPSBbJ2xlZnQnLCAndG9wJywgJ3JpZ2h0JywgJ2JvdHRvbSddO1xuXHRcblx0ZnVuY3Rpb24gZ2V0Qm91bmRpbmdSZWN0KHRldGhlciwgdG8pIHtcblx0ICBpZiAodG8gPT09ICdzY3JvbGxQYXJlbnQnKSB7XG5cdCAgICB0byA9IHRldGhlci5zY3JvbGxQYXJlbnRzWzBdO1xuXHQgIH0gZWxzZSBpZiAodG8gPT09ICd3aW5kb3cnKSB7XG5cdCAgICB0byA9IFtwYWdlWE9mZnNldCwgcGFnZVlPZmZzZXQsIGlubmVyV2lkdGggKyBwYWdlWE9mZnNldCwgaW5uZXJIZWlnaHQgKyBwYWdlWU9mZnNldF07XG5cdCAgfVxuXHRcblx0ICBpZiAodG8gPT09IGRvY3VtZW50KSB7XG5cdCAgICB0byA9IHRvLmRvY3VtZW50RWxlbWVudDtcblx0ICB9XG5cdFxuXHQgIGlmICh0eXBlb2YgdG8ubm9kZVR5cGUgIT09ICd1bmRlZmluZWQnKSB7XG5cdCAgICAoZnVuY3Rpb24gKCkge1xuXHQgICAgICB2YXIgbm9kZSA9IHRvO1xuXHQgICAgICB2YXIgc2l6ZSA9IGdldEJvdW5kcyh0byk7XG5cdCAgICAgIHZhciBwb3MgPSBzaXplO1xuXHQgICAgICB2YXIgc3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKHRvKTtcblx0XG5cdCAgICAgIHRvID0gW3Bvcy5sZWZ0LCBwb3MudG9wLCBzaXplLndpZHRoICsgcG9zLmxlZnQsIHNpemUuaGVpZ2h0ICsgcG9zLnRvcF07XG5cdFxuXHQgICAgICAvLyBBY2NvdW50IGFueSBwYXJlbnQgRnJhbWVzIHNjcm9sbCBvZmZzZXRcblx0ICAgICAgaWYgKG5vZGUub3duZXJEb2N1bWVudCAhPT0gZG9jdW1lbnQpIHtcblx0ICAgICAgICB2YXIgd2luID0gbm9kZS5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3O1xuXHQgICAgICAgIHRvWzBdICs9IHdpbi5wYWdlWE9mZnNldDtcblx0ICAgICAgICB0b1sxXSArPSB3aW4ucGFnZVlPZmZzZXQ7XG5cdCAgICAgICAgdG9bMl0gKz0gd2luLnBhZ2VYT2Zmc2V0O1xuXHQgICAgICAgIHRvWzNdICs9IHdpbi5wYWdlWU9mZnNldDtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgQk9VTkRTX0ZPUk1BVC5mb3JFYWNoKGZ1bmN0aW9uIChzaWRlLCBpKSB7XG5cdCAgICAgICAgc2lkZSA9IHNpZGVbMF0udG9VcHBlckNhc2UoKSArIHNpZGUuc3Vic3RyKDEpO1xuXHQgICAgICAgIGlmIChzaWRlID09PSAnVG9wJyB8fCBzaWRlID09PSAnTGVmdCcpIHtcblx0ICAgICAgICAgIHRvW2ldICs9IHBhcnNlRmxvYXQoc3R5bGVbJ2JvcmRlcicgKyBzaWRlICsgJ1dpZHRoJ10pO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICB0b1tpXSAtPSBwYXJzZUZsb2F0KHN0eWxlWydib3JkZXInICsgc2lkZSArICdXaWR0aCddKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgfSkoKTtcblx0ICB9XG5cdFxuXHQgIHJldHVybiB0bztcblx0fVxuXHRcblx0VGV0aGVyQmFzZS5tb2R1bGVzLnB1c2goe1xuXHQgIHBvc2l0aW9uOiBmdW5jdGlvbiBwb3NpdGlvbihfcmVmKSB7XG5cdCAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXHRcblx0ICAgIHZhciB0b3AgPSBfcmVmLnRvcDtcblx0ICAgIHZhciBsZWZ0ID0gX3JlZi5sZWZ0O1xuXHQgICAgdmFyIHRhcmdldEF0dGFjaG1lbnQgPSBfcmVmLnRhcmdldEF0dGFjaG1lbnQ7XG5cdFxuXHQgICAgaWYgKCF0aGlzLm9wdGlvbnMuY29uc3RyYWludHMpIHtcblx0ICAgICAgcmV0dXJuIHRydWU7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIF9jYWNoZSA9IHRoaXMuY2FjaGUoJ2VsZW1lbnQtYm91bmRzJywgZnVuY3Rpb24gKCkge1xuXHQgICAgICByZXR1cm4gZ2V0Qm91bmRzKF90aGlzLmVsZW1lbnQpO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgdmFyIGhlaWdodCA9IF9jYWNoZS5oZWlnaHQ7XG5cdCAgICB2YXIgd2lkdGggPSBfY2FjaGUud2lkdGg7XG5cdFxuXHQgICAgaWYgKHdpZHRoID09PSAwICYmIGhlaWdodCA9PT0gMCAmJiB0eXBlb2YgdGhpcy5sYXN0U2l6ZSAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0ICAgICAgdmFyIF9sYXN0U2l6ZSA9IHRoaXMubGFzdFNpemU7XG5cdFxuXHQgICAgICAvLyBIYW5kbGUgdGhlIGl0ZW0gZ2V0dGluZyBoaWRkZW4gYXMgYSByZXN1bHQgb2Ygb3VyIHBvc2l0aW9uaW5nIHdpdGhvdXQgZ2xpdGNoaW5nXG5cdCAgICAgIC8vIHRoZSBjbGFzc2VzIGluIGFuZCBvdXRcblx0ICAgICAgd2lkdGggPSBfbGFzdFNpemUud2lkdGg7XG5cdCAgICAgIGhlaWdodCA9IF9sYXN0U2l6ZS5oZWlnaHQ7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIHRhcmdldFNpemUgPSB0aGlzLmNhY2hlKCd0YXJnZXQtYm91bmRzJywgZnVuY3Rpb24gKCkge1xuXHQgICAgICByZXR1cm4gX3RoaXMuZ2V0VGFyZ2V0Qm91bmRzKCk7XG5cdCAgICB9KTtcblx0XG5cdCAgICB2YXIgdGFyZ2V0SGVpZ2h0ID0gdGFyZ2V0U2l6ZS5oZWlnaHQ7XG5cdCAgICB2YXIgdGFyZ2V0V2lkdGggPSB0YXJnZXRTaXplLndpZHRoO1xuXHRcblx0ICAgIHZhciBhbGxDbGFzc2VzID0gW3RoaXMuZ2V0Q2xhc3MoJ3Bpbm5lZCcpLCB0aGlzLmdldENsYXNzKCdvdXQtb2YtYm91bmRzJyldO1xuXHRcblx0ICAgIHRoaXMub3B0aW9ucy5jb25zdHJhaW50cy5mb3JFYWNoKGZ1bmN0aW9uIChjb25zdHJhaW50KSB7XG5cdCAgICAgIHZhciBvdXRPZkJvdW5kc0NsYXNzID0gY29uc3RyYWludC5vdXRPZkJvdW5kc0NsYXNzO1xuXHQgICAgICB2YXIgcGlubmVkQ2xhc3MgPSBjb25zdHJhaW50LnBpbm5lZENsYXNzO1xuXHRcblx0ICAgICAgaWYgKG91dE9mQm91bmRzQ2xhc3MpIHtcblx0ICAgICAgICBhbGxDbGFzc2VzLnB1c2gob3V0T2ZCb3VuZHNDbGFzcyk7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKHBpbm5lZENsYXNzKSB7XG5cdCAgICAgICAgYWxsQ2xhc3Nlcy5wdXNoKHBpbm5lZENsYXNzKTtcblx0ICAgICAgfVxuXHQgICAgfSk7XG5cdFxuXHQgICAgYWxsQ2xhc3Nlcy5mb3JFYWNoKGZ1bmN0aW9uIChjbHMpIHtcblx0ICAgICAgWydsZWZ0JywgJ3RvcCcsICdyaWdodCcsICdib3R0b20nXS5mb3JFYWNoKGZ1bmN0aW9uIChzaWRlKSB7XG5cdCAgICAgICAgYWxsQ2xhc3Nlcy5wdXNoKGNscyArICctJyArIHNpZGUpO1xuXHQgICAgICB9KTtcblx0ICAgIH0pO1xuXHRcblx0ICAgIHZhciBhZGRDbGFzc2VzID0gW107XG5cdFxuXHQgICAgdmFyIHRBdHRhY2htZW50ID0gZXh0ZW5kKHt9LCB0YXJnZXRBdHRhY2htZW50KTtcblx0ICAgIHZhciBlQXR0YWNobWVudCA9IGV4dGVuZCh7fSwgdGhpcy5hdHRhY2htZW50KTtcblx0XG5cdCAgICB0aGlzLm9wdGlvbnMuY29uc3RyYWludHMuZm9yRWFjaChmdW5jdGlvbiAoY29uc3RyYWludCkge1xuXHQgICAgICB2YXIgdG8gPSBjb25zdHJhaW50LnRvO1xuXHQgICAgICB2YXIgYXR0YWNobWVudCA9IGNvbnN0cmFpbnQuYXR0YWNobWVudDtcblx0ICAgICAgdmFyIHBpbiA9IGNvbnN0cmFpbnQucGluO1xuXHRcblx0ICAgICAgaWYgKHR5cGVvZiBhdHRhY2htZW50ID09PSAndW5kZWZpbmVkJykge1xuXHQgICAgICAgIGF0dGFjaG1lbnQgPSAnJztcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdmFyIGNoYW5nZUF0dGFjaFggPSB1bmRlZmluZWQsXG5cdCAgICAgICAgICBjaGFuZ2VBdHRhY2hZID0gdW5kZWZpbmVkO1xuXHQgICAgICBpZiAoYXR0YWNobWVudC5pbmRleE9mKCcgJykgPj0gMCkge1xuXHQgICAgICAgIHZhciBfYXR0YWNobWVudCRzcGxpdCA9IGF0dGFjaG1lbnQuc3BsaXQoJyAnKTtcblx0XG5cdCAgICAgICAgdmFyIF9hdHRhY2htZW50JHNwbGl0MiA9IF9zbGljZWRUb0FycmF5KF9hdHRhY2htZW50JHNwbGl0LCAyKTtcblx0XG5cdCAgICAgICAgY2hhbmdlQXR0YWNoWSA9IF9hdHRhY2htZW50JHNwbGl0MlswXTtcblx0ICAgICAgICBjaGFuZ2VBdHRhY2hYID0gX2F0dGFjaG1lbnQkc3BsaXQyWzFdO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIGNoYW5nZUF0dGFjaFggPSBjaGFuZ2VBdHRhY2hZID0gYXR0YWNobWVudDtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdmFyIGJvdW5kcyA9IGdldEJvdW5kaW5nUmVjdChfdGhpcywgdG8pO1xuXHRcblx0ICAgICAgaWYgKGNoYW5nZUF0dGFjaFkgPT09ICd0YXJnZXQnIHx8IGNoYW5nZUF0dGFjaFkgPT09ICdib3RoJykge1xuXHQgICAgICAgIGlmICh0b3AgPCBib3VuZHNbMV0gJiYgdEF0dGFjaG1lbnQudG9wID09PSAndG9wJykge1xuXHQgICAgICAgICAgdG9wICs9IHRhcmdldEhlaWdodDtcblx0ICAgICAgICAgIHRBdHRhY2htZW50LnRvcCA9ICdib3R0b20nO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgaWYgKHRvcCArIGhlaWdodCA+IGJvdW5kc1szXSAmJiB0QXR0YWNobWVudC50b3AgPT09ICdib3R0b20nKSB7XG5cdCAgICAgICAgICB0b3AgLT0gdGFyZ2V0SGVpZ2h0O1xuXHQgICAgICAgICAgdEF0dGFjaG1lbnQudG9wID0gJ3RvcCc7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAoY2hhbmdlQXR0YWNoWSA9PT0gJ3RvZ2V0aGVyJykge1xuXHQgICAgICAgIGlmICh0QXR0YWNobWVudC50b3AgPT09ICd0b3AnKSB7XG5cdCAgICAgICAgICBpZiAoZUF0dGFjaG1lbnQudG9wID09PSAnYm90dG9tJyAmJiB0b3AgPCBib3VuZHNbMV0pIHtcblx0ICAgICAgICAgICAgdG9wICs9IHRhcmdldEhlaWdodDtcblx0ICAgICAgICAgICAgdEF0dGFjaG1lbnQudG9wID0gJ2JvdHRvbSc7XG5cdFxuXHQgICAgICAgICAgICB0b3AgKz0gaGVpZ2h0O1xuXHQgICAgICAgICAgICBlQXR0YWNobWVudC50b3AgPSAndG9wJztcblx0ICAgICAgICAgIH0gZWxzZSBpZiAoZUF0dGFjaG1lbnQudG9wID09PSAndG9wJyAmJiB0b3AgKyBoZWlnaHQgPiBib3VuZHNbM10gJiYgdG9wIC0gKGhlaWdodCAtIHRhcmdldEhlaWdodCkgPj0gYm91bmRzWzFdKSB7XG5cdCAgICAgICAgICAgIHRvcCAtPSBoZWlnaHQgLSB0YXJnZXRIZWlnaHQ7XG5cdCAgICAgICAgICAgIHRBdHRhY2htZW50LnRvcCA9ICdib3R0b20nO1xuXHRcblx0ICAgICAgICAgICAgZUF0dGFjaG1lbnQudG9wID0gJ2JvdHRvbSc7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBpZiAodEF0dGFjaG1lbnQudG9wID09PSAnYm90dG9tJykge1xuXHQgICAgICAgICAgaWYgKGVBdHRhY2htZW50LnRvcCA9PT0gJ3RvcCcgJiYgdG9wICsgaGVpZ2h0ID4gYm91bmRzWzNdKSB7XG5cdCAgICAgICAgICAgIHRvcCAtPSB0YXJnZXRIZWlnaHQ7XG5cdCAgICAgICAgICAgIHRBdHRhY2htZW50LnRvcCA9ICd0b3AnO1xuXHRcblx0ICAgICAgICAgICAgdG9wIC09IGhlaWdodDtcblx0ICAgICAgICAgICAgZUF0dGFjaG1lbnQudG9wID0gJ2JvdHRvbSc7XG5cdCAgICAgICAgICB9IGVsc2UgaWYgKGVBdHRhY2htZW50LnRvcCA9PT0gJ2JvdHRvbScgJiYgdG9wIDwgYm91bmRzWzFdICYmIHRvcCArIChoZWlnaHQgKiAyIC0gdGFyZ2V0SGVpZ2h0KSA8PSBib3VuZHNbM10pIHtcblx0ICAgICAgICAgICAgdG9wICs9IGhlaWdodCAtIHRhcmdldEhlaWdodDtcblx0ICAgICAgICAgICAgdEF0dGFjaG1lbnQudG9wID0gJ3RvcCc7XG5cdFxuXHQgICAgICAgICAgICBlQXR0YWNobWVudC50b3AgPSAndG9wJztcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGlmICh0QXR0YWNobWVudC50b3AgPT09ICdtaWRkbGUnKSB7XG5cdCAgICAgICAgICBpZiAodG9wICsgaGVpZ2h0ID4gYm91bmRzWzNdICYmIGVBdHRhY2htZW50LnRvcCA9PT0gJ3RvcCcpIHtcblx0ICAgICAgICAgICAgdG9wIC09IGhlaWdodDtcblx0ICAgICAgICAgICAgZUF0dGFjaG1lbnQudG9wID0gJ2JvdHRvbSc7XG5cdCAgICAgICAgICB9IGVsc2UgaWYgKHRvcCA8IGJvdW5kc1sxXSAmJiBlQXR0YWNobWVudC50b3AgPT09ICdib3R0b20nKSB7XG5cdCAgICAgICAgICAgIHRvcCArPSBoZWlnaHQ7XG5cdCAgICAgICAgICAgIGVBdHRhY2htZW50LnRvcCA9ICd0b3AnO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKGNoYW5nZUF0dGFjaFggPT09ICd0YXJnZXQnIHx8IGNoYW5nZUF0dGFjaFggPT09ICdib3RoJykge1xuXHQgICAgICAgIGlmIChsZWZ0IDwgYm91bmRzWzBdICYmIHRBdHRhY2htZW50LmxlZnQgPT09ICdsZWZ0Jykge1xuXHQgICAgICAgICAgbGVmdCArPSB0YXJnZXRXaWR0aDtcblx0ICAgICAgICAgIHRBdHRhY2htZW50LmxlZnQgPSAncmlnaHQnO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgaWYgKGxlZnQgKyB3aWR0aCA+IGJvdW5kc1syXSAmJiB0QXR0YWNobWVudC5sZWZ0ID09PSAncmlnaHQnKSB7XG5cdCAgICAgICAgICBsZWZ0IC09IHRhcmdldFdpZHRoO1xuXHQgICAgICAgICAgdEF0dGFjaG1lbnQubGVmdCA9ICdsZWZ0Jztcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmIChjaGFuZ2VBdHRhY2hYID09PSAndG9nZXRoZXInKSB7XG5cdCAgICAgICAgaWYgKGxlZnQgPCBib3VuZHNbMF0gJiYgdEF0dGFjaG1lbnQubGVmdCA9PT0gJ2xlZnQnKSB7XG5cdCAgICAgICAgICBpZiAoZUF0dGFjaG1lbnQubGVmdCA9PT0gJ3JpZ2h0Jykge1xuXHQgICAgICAgICAgICBsZWZ0ICs9IHRhcmdldFdpZHRoO1xuXHQgICAgICAgICAgICB0QXR0YWNobWVudC5sZWZ0ID0gJ3JpZ2h0Jztcblx0XG5cdCAgICAgICAgICAgIGxlZnQgKz0gd2lkdGg7XG5cdCAgICAgICAgICAgIGVBdHRhY2htZW50LmxlZnQgPSAnbGVmdCc7XG5cdCAgICAgICAgICB9IGVsc2UgaWYgKGVBdHRhY2htZW50LmxlZnQgPT09ICdsZWZ0Jykge1xuXHQgICAgICAgICAgICBsZWZ0ICs9IHRhcmdldFdpZHRoO1xuXHQgICAgICAgICAgICB0QXR0YWNobWVudC5sZWZ0ID0gJ3JpZ2h0Jztcblx0XG5cdCAgICAgICAgICAgIGxlZnQgLT0gd2lkdGg7XG5cdCAgICAgICAgICAgIGVBdHRhY2htZW50LmxlZnQgPSAncmlnaHQnO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0gZWxzZSBpZiAobGVmdCArIHdpZHRoID4gYm91bmRzWzJdICYmIHRBdHRhY2htZW50LmxlZnQgPT09ICdyaWdodCcpIHtcblx0ICAgICAgICAgIGlmIChlQXR0YWNobWVudC5sZWZ0ID09PSAnbGVmdCcpIHtcblx0ICAgICAgICAgICAgbGVmdCAtPSB0YXJnZXRXaWR0aDtcblx0ICAgICAgICAgICAgdEF0dGFjaG1lbnQubGVmdCA9ICdsZWZ0Jztcblx0XG5cdCAgICAgICAgICAgIGxlZnQgLT0gd2lkdGg7XG5cdCAgICAgICAgICAgIGVBdHRhY2htZW50LmxlZnQgPSAncmlnaHQnO1xuXHQgICAgICAgICAgfSBlbHNlIGlmIChlQXR0YWNobWVudC5sZWZ0ID09PSAncmlnaHQnKSB7XG5cdCAgICAgICAgICAgIGxlZnQgLT0gdGFyZ2V0V2lkdGg7XG5cdCAgICAgICAgICAgIHRBdHRhY2htZW50LmxlZnQgPSAnbGVmdCc7XG5cdFxuXHQgICAgICAgICAgICBsZWZ0ICs9IHdpZHRoO1xuXHQgICAgICAgICAgICBlQXR0YWNobWVudC5sZWZ0ID0gJ2xlZnQnO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0gZWxzZSBpZiAodEF0dGFjaG1lbnQubGVmdCA9PT0gJ2NlbnRlcicpIHtcblx0ICAgICAgICAgIGlmIChsZWZ0ICsgd2lkdGggPiBib3VuZHNbMl0gJiYgZUF0dGFjaG1lbnQubGVmdCA9PT0gJ2xlZnQnKSB7XG5cdCAgICAgICAgICAgIGxlZnQgLT0gd2lkdGg7XG5cdCAgICAgICAgICAgIGVBdHRhY2htZW50LmxlZnQgPSAncmlnaHQnO1xuXHQgICAgICAgICAgfSBlbHNlIGlmIChsZWZ0IDwgYm91bmRzWzBdICYmIGVBdHRhY2htZW50LmxlZnQgPT09ICdyaWdodCcpIHtcblx0ICAgICAgICAgICAgbGVmdCArPSB3aWR0aDtcblx0ICAgICAgICAgICAgZUF0dGFjaG1lbnQubGVmdCA9ICdsZWZ0Jztcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmIChjaGFuZ2VBdHRhY2hZID09PSAnZWxlbWVudCcgfHwgY2hhbmdlQXR0YWNoWSA9PT0gJ2JvdGgnKSB7XG5cdCAgICAgICAgaWYgKHRvcCA8IGJvdW5kc1sxXSAmJiBlQXR0YWNobWVudC50b3AgPT09ICdib3R0b20nKSB7XG5cdCAgICAgICAgICB0b3AgKz0gaGVpZ2h0O1xuXHQgICAgICAgICAgZUF0dGFjaG1lbnQudG9wID0gJ3RvcCc7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBpZiAodG9wICsgaGVpZ2h0ID4gYm91bmRzWzNdICYmIGVBdHRhY2htZW50LnRvcCA9PT0gJ3RvcCcpIHtcblx0ICAgICAgICAgIHRvcCAtPSBoZWlnaHQ7XG5cdCAgICAgICAgICBlQXR0YWNobWVudC50b3AgPSAnYm90dG9tJztcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmIChjaGFuZ2VBdHRhY2hYID09PSAnZWxlbWVudCcgfHwgY2hhbmdlQXR0YWNoWCA9PT0gJ2JvdGgnKSB7XG5cdCAgICAgICAgaWYgKGxlZnQgPCBib3VuZHNbMF0pIHtcblx0ICAgICAgICAgIGlmIChlQXR0YWNobWVudC5sZWZ0ID09PSAncmlnaHQnKSB7XG5cdCAgICAgICAgICAgIGxlZnQgKz0gd2lkdGg7XG5cdCAgICAgICAgICAgIGVBdHRhY2htZW50LmxlZnQgPSAnbGVmdCc7XG5cdCAgICAgICAgICB9IGVsc2UgaWYgKGVBdHRhY2htZW50LmxlZnQgPT09ICdjZW50ZXInKSB7XG5cdCAgICAgICAgICAgIGxlZnQgKz0gd2lkdGggLyAyO1xuXHQgICAgICAgICAgICBlQXR0YWNobWVudC5sZWZ0ID0gJ2xlZnQnO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgaWYgKGxlZnQgKyB3aWR0aCA+IGJvdW5kc1syXSkge1xuXHQgICAgICAgICAgaWYgKGVBdHRhY2htZW50LmxlZnQgPT09ICdsZWZ0Jykge1xuXHQgICAgICAgICAgICBsZWZ0IC09IHdpZHRoO1xuXHQgICAgICAgICAgICBlQXR0YWNobWVudC5sZWZ0ID0gJ3JpZ2h0Jztcblx0ICAgICAgICAgIH0gZWxzZSBpZiAoZUF0dGFjaG1lbnQubGVmdCA9PT0gJ2NlbnRlcicpIHtcblx0ICAgICAgICAgICAgbGVmdCAtPSB3aWR0aCAvIDI7XG5cdCAgICAgICAgICAgIGVBdHRhY2htZW50LmxlZnQgPSAncmlnaHQnO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKHR5cGVvZiBwaW4gPT09ICdzdHJpbmcnKSB7XG5cdCAgICAgICAgcGluID0gcGluLnNwbGl0KCcsJykubWFwKGZ1bmN0aW9uIChwKSB7XG5cdCAgICAgICAgICByZXR1cm4gcC50cmltKCk7XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH0gZWxzZSBpZiAocGluID09PSB0cnVlKSB7XG5cdCAgICAgICAgcGluID0gWyd0b3AnLCAnbGVmdCcsICdyaWdodCcsICdib3R0b20nXTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgcGluID0gcGluIHx8IFtdO1xuXHRcblx0ICAgICAgdmFyIHBpbm5lZCA9IFtdO1xuXHQgICAgICB2YXIgb29iID0gW107XG5cdFxuXHQgICAgICBpZiAodG9wIDwgYm91bmRzWzFdKSB7XG5cdCAgICAgICAgaWYgKHBpbi5pbmRleE9mKCd0b3AnKSA+PSAwKSB7XG5cdCAgICAgICAgICB0b3AgPSBib3VuZHNbMV07XG5cdCAgICAgICAgICBwaW5uZWQucHVzaCgndG9wJyk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIG9vYi5wdXNoKCd0b3AnKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmICh0b3AgKyBoZWlnaHQgPiBib3VuZHNbM10pIHtcblx0ICAgICAgICBpZiAocGluLmluZGV4T2YoJ2JvdHRvbScpID49IDApIHtcblx0ICAgICAgICAgIHRvcCA9IGJvdW5kc1szXSAtIGhlaWdodDtcblx0ICAgICAgICAgIHBpbm5lZC5wdXNoKCdib3R0b20nKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgb29iLnB1c2goJ2JvdHRvbScpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKGxlZnQgPCBib3VuZHNbMF0pIHtcblx0ICAgICAgICBpZiAocGluLmluZGV4T2YoJ2xlZnQnKSA+PSAwKSB7XG5cdCAgICAgICAgICBsZWZ0ID0gYm91bmRzWzBdO1xuXHQgICAgICAgICAgcGlubmVkLnB1c2goJ2xlZnQnKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgb29iLnB1c2goJ2xlZnQnKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmIChsZWZ0ICsgd2lkdGggPiBib3VuZHNbMl0pIHtcblx0ICAgICAgICBpZiAocGluLmluZGV4T2YoJ3JpZ2h0JykgPj0gMCkge1xuXHQgICAgICAgICAgbGVmdCA9IGJvdW5kc1syXSAtIHdpZHRoO1xuXHQgICAgICAgICAgcGlubmVkLnB1c2goJ3JpZ2h0Jyk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIG9vYi5wdXNoKCdyaWdodCcpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKHBpbm5lZC5sZW5ndGgpIHtcblx0ICAgICAgICAoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgdmFyIHBpbm5lZENsYXNzID0gdW5kZWZpbmVkO1xuXHQgICAgICAgICAgaWYgKHR5cGVvZiBfdGhpcy5vcHRpb25zLnBpbm5lZENsYXNzICE9PSAndW5kZWZpbmVkJykge1xuXHQgICAgICAgICAgICBwaW5uZWRDbGFzcyA9IF90aGlzLm9wdGlvbnMucGlubmVkQ2xhc3M7XG5cdCAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBwaW5uZWRDbGFzcyA9IF90aGlzLmdldENsYXNzKCdwaW5uZWQnKTtcblx0ICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICBhZGRDbGFzc2VzLnB1c2gocGlubmVkQ2xhc3MpO1xuXHQgICAgICAgICAgcGlubmVkLmZvckVhY2goZnVuY3Rpb24gKHNpZGUpIHtcblx0ICAgICAgICAgICAgYWRkQ2xhc3Nlcy5wdXNoKHBpbm5lZENsYXNzICsgJy0nICsgc2lkZSk7XG5cdCAgICAgICAgICB9KTtcblx0ICAgICAgICB9KSgpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAob29iLmxlbmd0aCkge1xuXHQgICAgICAgIChmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICB2YXIgb29iQ2xhc3MgPSB1bmRlZmluZWQ7XG5cdCAgICAgICAgICBpZiAodHlwZW9mIF90aGlzLm9wdGlvbnMub3V0T2ZCb3VuZHNDbGFzcyAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0ICAgICAgICAgICAgb29iQ2xhc3MgPSBfdGhpcy5vcHRpb25zLm91dE9mQm91bmRzQ2xhc3M7XG5cdCAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBvb2JDbGFzcyA9IF90aGlzLmdldENsYXNzKCdvdXQtb2YtYm91bmRzJyk7XG5cdCAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgYWRkQ2xhc3Nlcy5wdXNoKG9vYkNsYXNzKTtcblx0ICAgICAgICAgIG9vYi5mb3JFYWNoKGZ1bmN0aW9uIChzaWRlKSB7XG5cdCAgICAgICAgICAgIGFkZENsYXNzZXMucHVzaChvb2JDbGFzcyArICctJyArIHNpZGUpO1xuXHQgICAgICAgICAgfSk7XG5cdCAgICAgICAgfSkoKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKHBpbm5lZC5pbmRleE9mKCdsZWZ0JykgPj0gMCB8fCBwaW5uZWQuaW5kZXhPZigncmlnaHQnKSA+PSAwKSB7XG5cdCAgICAgICAgZUF0dGFjaG1lbnQubGVmdCA9IHRBdHRhY2htZW50LmxlZnQgPSBmYWxzZTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAocGlubmVkLmluZGV4T2YoJ3RvcCcpID49IDAgfHwgcGlubmVkLmluZGV4T2YoJ2JvdHRvbScpID49IDApIHtcblx0ICAgICAgICBlQXR0YWNobWVudC50b3AgPSB0QXR0YWNobWVudC50b3AgPSBmYWxzZTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKHRBdHRhY2htZW50LnRvcCAhPT0gdGFyZ2V0QXR0YWNobWVudC50b3AgfHwgdEF0dGFjaG1lbnQubGVmdCAhPT0gdGFyZ2V0QXR0YWNobWVudC5sZWZ0IHx8IGVBdHRhY2htZW50LnRvcCAhPT0gX3RoaXMuYXR0YWNobWVudC50b3AgfHwgZUF0dGFjaG1lbnQubGVmdCAhPT0gX3RoaXMuYXR0YWNobWVudC5sZWZ0KSB7XG5cdCAgICAgICAgX3RoaXMudXBkYXRlQXR0YWNoQ2xhc3NlcyhlQXR0YWNobWVudCwgdEF0dGFjaG1lbnQpO1xuXHQgICAgICAgIF90aGlzLnRyaWdnZXIoJ3VwZGF0ZScsIHtcblx0ICAgICAgICAgIGF0dGFjaG1lbnQ6IGVBdHRhY2htZW50LFxuXHQgICAgICAgICAgdGFyZ2V0QXR0YWNobWVudDogdEF0dGFjaG1lbnRcblx0ICAgICAgICB9KTtcblx0ICAgICAgfVxuXHQgICAgfSk7XG5cdFxuXHQgICAgZGVmZXIoZnVuY3Rpb24gKCkge1xuXHQgICAgICBpZiAoIShfdGhpcy5vcHRpb25zLmFkZFRhcmdldENsYXNzZXMgPT09IGZhbHNlKSkge1xuXHQgICAgICAgIHVwZGF0ZUNsYXNzZXMoX3RoaXMudGFyZ2V0LCBhZGRDbGFzc2VzLCBhbGxDbGFzc2VzKTtcblx0ICAgICAgfVxuXHQgICAgICB1cGRhdGVDbGFzc2VzKF90aGlzLmVsZW1lbnQsIGFkZENsYXNzZXMsIGFsbENsYXNzZXMpO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgcmV0dXJuIHsgdG9wOiB0b3AsIGxlZnQ6IGxlZnQgfTtcblx0ICB9XG5cdH0pO1xuXHQvKiBnbG9iYWxzIFRldGhlckJhc2UgKi9cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBfVGV0aGVyQmFzZSRVdGlscyA9IFRldGhlckJhc2UuVXRpbHM7XG5cdHZhciBnZXRCb3VuZHMgPSBfVGV0aGVyQmFzZSRVdGlscy5nZXRCb3VuZHM7XG5cdHZhciB1cGRhdGVDbGFzc2VzID0gX1RldGhlckJhc2UkVXRpbHMudXBkYXRlQ2xhc3Nlcztcblx0dmFyIGRlZmVyID0gX1RldGhlckJhc2UkVXRpbHMuZGVmZXI7XG5cdFxuXHRUZXRoZXJCYXNlLm1vZHVsZXMucHVzaCh7XG5cdCAgcG9zaXRpb246IGZ1bmN0aW9uIHBvc2l0aW9uKF9yZWYpIHtcblx0ICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cdFxuXHQgICAgdmFyIHRvcCA9IF9yZWYudG9wO1xuXHQgICAgdmFyIGxlZnQgPSBfcmVmLmxlZnQ7XG5cdFxuXHQgICAgdmFyIF9jYWNoZSA9IHRoaXMuY2FjaGUoJ2VsZW1lbnQtYm91bmRzJywgZnVuY3Rpb24gKCkge1xuXHQgICAgICByZXR1cm4gZ2V0Qm91bmRzKF90aGlzLmVsZW1lbnQpO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgdmFyIGhlaWdodCA9IF9jYWNoZS5oZWlnaHQ7XG5cdCAgICB2YXIgd2lkdGggPSBfY2FjaGUud2lkdGg7XG5cdFxuXHQgICAgdmFyIHRhcmdldFBvcyA9IHRoaXMuZ2V0VGFyZ2V0Qm91bmRzKCk7XG5cdFxuXHQgICAgdmFyIGJvdHRvbSA9IHRvcCArIGhlaWdodDtcblx0ICAgIHZhciByaWdodCA9IGxlZnQgKyB3aWR0aDtcblx0XG5cdCAgICB2YXIgYWJ1dHRlZCA9IFtdO1xuXHQgICAgaWYgKHRvcCA8PSB0YXJnZXRQb3MuYm90dG9tICYmIGJvdHRvbSA+PSB0YXJnZXRQb3MudG9wKSB7XG5cdCAgICAgIFsnbGVmdCcsICdyaWdodCddLmZvckVhY2goZnVuY3Rpb24gKHNpZGUpIHtcblx0ICAgICAgICB2YXIgdGFyZ2V0UG9zU2lkZSA9IHRhcmdldFBvc1tzaWRlXTtcblx0ICAgICAgICBpZiAodGFyZ2V0UG9zU2lkZSA9PT0gbGVmdCB8fCB0YXJnZXRQb3NTaWRlID09PSByaWdodCkge1xuXHQgICAgICAgICAgYWJ1dHRlZC5wdXNoKHNpZGUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKGxlZnQgPD0gdGFyZ2V0UG9zLnJpZ2h0ICYmIHJpZ2h0ID49IHRhcmdldFBvcy5sZWZ0KSB7XG5cdCAgICAgIFsndG9wJywgJ2JvdHRvbSddLmZvckVhY2goZnVuY3Rpb24gKHNpZGUpIHtcblx0ICAgICAgICB2YXIgdGFyZ2V0UG9zU2lkZSA9IHRhcmdldFBvc1tzaWRlXTtcblx0ICAgICAgICBpZiAodGFyZ2V0UG9zU2lkZSA9PT0gdG9wIHx8IHRhcmdldFBvc1NpZGUgPT09IGJvdHRvbSkge1xuXHQgICAgICAgICAgYWJ1dHRlZC5wdXNoKHNpZGUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIGFsbENsYXNzZXMgPSBbXTtcblx0ICAgIHZhciBhZGRDbGFzc2VzID0gW107XG5cdFxuXHQgICAgdmFyIHNpZGVzID0gWydsZWZ0JywgJ3RvcCcsICdyaWdodCcsICdib3R0b20nXTtcblx0ICAgIGFsbENsYXNzZXMucHVzaCh0aGlzLmdldENsYXNzKCdhYnV0dGVkJykpO1xuXHQgICAgc2lkZXMuZm9yRWFjaChmdW5jdGlvbiAoc2lkZSkge1xuXHQgICAgICBhbGxDbGFzc2VzLnB1c2goX3RoaXMuZ2V0Q2xhc3MoJ2FidXR0ZWQnKSArICctJyArIHNpZGUpO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgaWYgKGFidXR0ZWQubGVuZ3RoKSB7XG5cdCAgICAgIGFkZENsYXNzZXMucHVzaCh0aGlzLmdldENsYXNzKCdhYnV0dGVkJykpO1xuXHQgICAgfVxuXHRcblx0ICAgIGFidXR0ZWQuZm9yRWFjaChmdW5jdGlvbiAoc2lkZSkge1xuXHQgICAgICBhZGRDbGFzc2VzLnB1c2goX3RoaXMuZ2V0Q2xhc3MoJ2FidXR0ZWQnKSArICctJyArIHNpZGUpO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgZGVmZXIoZnVuY3Rpb24gKCkge1xuXHQgICAgICBpZiAoIShfdGhpcy5vcHRpb25zLmFkZFRhcmdldENsYXNzZXMgPT09IGZhbHNlKSkge1xuXHQgICAgICAgIHVwZGF0ZUNsYXNzZXMoX3RoaXMudGFyZ2V0LCBhZGRDbGFzc2VzLCBhbGxDbGFzc2VzKTtcblx0ICAgICAgfVxuXHQgICAgICB1cGRhdGVDbGFzc2VzKF90aGlzLmVsZW1lbnQsIGFkZENsYXNzZXMsIGFsbENsYXNzZXMpO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgcmV0dXJuIHRydWU7XG5cdCAgfVxuXHR9KTtcblx0LyogZ2xvYmFscyBUZXRoZXJCYXNlICovXG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgX3NsaWNlZFRvQXJyYXkgPSAoZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBzbGljZUl0ZXJhdG9yKGFyciwgaSkgeyB2YXIgX2FyciA9IFtdOyB2YXIgX24gPSB0cnVlOyB2YXIgX2QgPSBmYWxzZTsgdmFyIF9lID0gdW5kZWZpbmVkOyB0cnkgeyBmb3IgKHZhciBfaSA9IGFycltTeW1ib2wuaXRlcmF0b3JdKCksIF9zOyAhKF9uID0gKF9zID0gX2kubmV4dCgpKS5kb25lKTsgX24gPSB0cnVlKSB7IF9hcnIucHVzaChfcy52YWx1ZSk7IGlmIChpICYmIF9hcnIubGVuZ3RoID09PSBpKSBicmVhazsgfSB9IGNhdGNoIChlcnIpIHsgX2QgPSB0cnVlOyBfZSA9IGVycjsgfSBmaW5hbGx5IHsgdHJ5IHsgaWYgKCFfbiAmJiBfaVsncmV0dXJuJ10pIF9pWydyZXR1cm4nXSgpOyB9IGZpbmFsbHkgeyBpZiAoX2QpIHRocm93IF9lOyB9IH0gcmV0dXJuIF9hcnI7IH0gcmV0dXJuIGZ1bmN0aW9uIChhcnIsIGkpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgeyByZXR1cm4gYXJyOyB9IGVsc2UgaWYgKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoYXJyKSkgeyByZXR1cm4gc2xpY2VJdGVyYXRvcihhcnIsIGkpOyB9IGVsc2UgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCdJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlJyk7IH0gfTsgfSkoKTtcblx0XG5cdFRldGhlckJhc2UubW9kdWxlcy5wdXNoKHtcblx0ICBwb3NpdGlvbjogZnVuY3Rpb24gcG9zaXRpb24oX3JlZikge1xuXHQgICAgdmFyIHRvcCA9IF9yZWYudG9wO1xuXHQgICAgdmFyIGxlZnQgPSBfcmVmLmxlZnQ7XG5cdFxuXHQgICAgaWYgKCF0aGlzLm9wdGlvbnMuc2hpZnQpIHtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBzaGlmdCA9IHRoaXMub3B0aW9ucy5zaGlmdDtcblx0ICAgIGlmICh0eXBlb2YgdGhpcy5vcHRpb25zLnNoaWZ0ID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgIHNoaWZ0ID0gdGhpcy5vcHRpb25zLnNoaWZ0LmNhbGwodGhpcywgeyB0b3A6IHRvcCwgbGVmdDogbGVmdCB9KTtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgc2hpZnRUb3AgPSB1bmRlZmluZWQsXG5cdCAgICAgICAgc2hpZnRMZWZ0ID0gdW5kZWZpbmVkO1xuXHQgICAgaWYgKHR5cGVvZiBzaGlmdCA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgc2hpZnQgPSBzaGlmdC5zcGxpdCgnICcpO1xuXHQgICAgICBzaGlmdFsxXSA9IHNoaWZ0WzFdIHx8IHNoaWZ0WzBdO1xuXHRcblx0ICAgICAgdmFyIF9zaGlmdCA9IHNoaWZ0O1xuXHRcblx0ICAgICAgdmFyIF9zaGlmdDIgPSBfc2xpY2VkVG9BcnJheShfc2hpZnQsIDIpO1xuXHRcblx0ICAgICAgc2hpZnRUb3AgPSBfc2hpZnQyWzBdO1xuXHQgICAgICBzaGlmdExlZnQgPSBfc2hpZnQyWzFdO1xuXHRcblx0ICAgICAgc2hpZnRUb3AgPSBwYXJzZUZsb2F0KHNoaWZ0VG9wLCAxMCk7XG5cdCAgICAgIHNoaWZ0TGVmdCA9IHBhcnNlRmxvYXQoc2hpZnRMZWZ0LCAxMCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBzaGlmdFRvcCA9IHNoaWZ0LnRvcDtcblx0ICAgICAgc2hpZnRMZWZ0ID0gc2hpZnQubGVmdDtcblx0ICAgIH1cblx0XG5cdCAgICB0b3AgKz0gc2hpZnRUb3A7XG5cdCAgICBsZWZ0ICs9IHNoaWZ0TGVmdDtcblx0XG5cdCAgICByZXR1cm4geyB0b3A6IHRvcCwgbGVmdDogbGVmdCB9O1xuXHQgIH1cblx0fSk7XG5cdHJldHVybiBUZXRoZXI7XG5cdFxuXHR9KSk7XG5cblxuLyoqKi8gfSxcbi8qIDUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qIVxuXHQgKiBCb290c3RyYXAgdjQuMC4wLWFscGhhLjUgKGh0dHBzOi8vZ2V0Ym9vdHN0cmFwLmNvbSlcblx0ICogQ29weXJpZ2h0IDIwMTEtMjAxNiBUaGUgQm9vdHN0cmFwIEF1dGhvcnMgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ncmFwaHMvY29udHJpYnV0b3JzKVxuXHQgKiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ibG9iL21hc3Rlci9MSUNFTlNFKVxuXHQgKi9cblx0XG5cdGlmICh0eXBlb2YgalF1ZXJ5ID09PSAndW5kZWZpbmVkJykge1xuXHQgIHRocm93IG5ldyBFcnJvcignQm9vdHN0cmFwXFwncyBKYXZhU2NyaXB0IHJlcXVpcmVzIGpRdWVyeScpXG5cdH1cblx0XG5cdCtmdW5jdGlvbiAoJCkge1xuXHQgIHZhciB2ZXJzaW9uID0gJC5mbi5qcXVlcnkuc3BsaXQoJyAnKVswXS5zcGxpdCgnLicpXG5cdCAgaWYgKCh2ZXJzaW9uWzBdIDwgMiAmJiB2ZXJzaW9uWzFdIDwgOSkgfHwgKHZlcnNpb25bMF0gPT0gMSAmJiB2ZXJzaW9uWzFdID09IDkgJiYgdmVyc2lvblsyXSA8IDEpIHx8ICh2ZXJzaW9uWzBdID49IDQpKSB7XG5cdCAgICB0aHJvdyBuZXcgRXJyb3IoJ0Jvb3RzdHJhcFxcJ3MgSmF2YVNjcmlwdCByZXF1aXJlcyBhdCBsZWFzdCBqUXVlcnkgdjEuOS4xIGJ1dCBsZXNzIHRoYW4gdjQuMC4wJylcblx0ICB9XG5cdH0oalF1ZXJ5KTtcblx0XG5cdFxuXHQrZnVuY3Rpb24gKCkge1xuXHRcblx0dmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblx0XG5cdGZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXHRcblx0ZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXHRcblx0LyoqXG5cdCAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCAqIEJvb3RzdHJhcCAodjQuMC4wLWFscGhhLjUpOiB1dGlsLmpzXG5cdCAqIExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2Jsb2IvbWFzdGVyL0xJQ0VOU0UpXG5cdCAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCAqL1xuXHRcblx0dmFyIFV0aWwgPSBmdW5jdGlvbiAoJCkge1xuXHRcblx0ICAvKipcblx0ICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0ICAgKiBQcml2YXRlIFRyYW5zaXRpb25FbmQgSGVscGVyc1xuXHQgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQgICAqL1xuXHRcblx0ICB2YXIgdHJhbnNpdGlvbiA9IGZhbHNlO1xuXHRcblx0ICB2YXIgTUFYX1VJRCA9IDEwMDAwMDA7XG5cdFxuXHQgIHZhciBUcmFuc2l0aW9uRW5kRXZlbnQgPSB7XG5cdCAgICBXZWJraXRUcmFuc2l0aW9uOiAnd2Via2l0VHJhbnNpdGlvbkVuZCcsXG5cdCAgICBNb3pUcmFuc2l0aW9uOiAndHJhbnNpdGlvbmVuZCcsXG5cdCAgICBPVHJhbnNpdGlvbjogJ29UcmFuc2l0aW9uRW5kIG90cmFuc2l0aW9uZW5kJyxcblx0ICAgIHRyYW5zaXRpb246ICd0cmFuc2l0aW9uZW5kJ1xuXHQgIH07XG5cdFxuXHQgIC8vIHNob3V0b3V0IEFuZ3VzQ3JvbGwgKGh0dHBzOi8vZ29vLmdsL3B4d1FHcClcblx0ICBmdW5jdGlvbiB0b1R5cGUob2JqKSB7XG5cdCAgICByZXR1cm4ge30udG9TdHJpbmcuY2FsbChvYmopLm1hdGNoKC9cXHMoW2EtekEtWl0rKS8pWzFdLnRvTG93ZXJDYXNlKCk7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBpc0VsZW1lbnQob2JqKSB7XG5cdCAgICByZXR1cm4gKG9ialswXSB8fCBvYmopLm5vZGVUeXBlO1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gZ2V0U3BlY2lhbFRyYW5zaXRpb25FbmRFdmVudCgpIHtcblx0ICAgIHJldHVybiB7XG5cdCAgICAgIGJpbmRUeXBlOiB0cmFuc2l0aW9uLmVuZCxcblx0ICAgICAgZGVsZWdhdGVUeXBlOiB0cmFuc2l0aW9uLmVuZCxcblx0ICAgICAgaGFuZGxlOiBmdW5jdGlvbiBoYW5kbGUoZXZlbnQpIHtcblx0ICAgICAgICBpZiAoJChldmVudC50YXJnZXQpLmlzKHRoaXMpKSB7XG5cdCAgICAgICAgICByZXR1cm4gZXZlbnQuaGFuZGxlT2JqLmhhbmRsZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBwcmVmZXItcmVzdC1wYXJhbXNcblx0ICAgICAgICB9XG5cdCAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIHRyYW5zaXRpb25FbmRUZXN0KCkge1xuXHQgICAgaWYgKHdpbmRvdy5RVW5pdCkge1xuXHQgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYm9vdHN0cmFwJyk7XG5cdFxuXHQgICAgZm9yICh2YXIgbmFtZSBpbiBUcmFuc2l0aW9uRW5kRXZlbnQpIHtcblx0ICAgICAgaWYgKGVsLnN0eWxlW25hbWVdICE9PSB1bmRlZmluZWQpIHtcblx0ICAgICAgICByZXR1cm4geyBlbmQ6IFRyYW5zaXRpb25FbmRFdmVudFtuYW1lXSB9O1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIGZhbHNlO1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gdHJhbnNpdGlvbkVuZEVtdWxhdG9yKGR1cmF0aW9uKSB7XG5cdCAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXHRcblx0ICAgIHZhciBjYWxsZWQgPSBmYWxzZTtcblx0XG5cdCAgICAkKHRoaXMpLm9uZShVdGlsLlRSQU5TSVRJT05fRU5ELCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIGNhbGxlZCA9IHRydWU7XG5cdCAgICB9KTtcblx0XG5cdCAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0ICAgICAgaWYgKCFjYWxsZWQpIHtcblx0ICAgICAgICBVdGlsLnRyaWdnZXJUcmFuc2l0aW9uRW5kKF90aGlzKTtcblx0ICAgICAgfVxuXHQgICAgfSwgZHVyYXRpb24pO1xuXHRcblx0ICAgIHJldHVybiB0aGlzO1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gc2V0VHJhbnNpdGlvbkVuZFN1cHBvcnQoKSB7XG5cdCAgICB0cmFuc2l0aW9uID0gdHJhbnNpdGlvbkVuZFRlc3QoKTtcblx0XG5cdCAgICAkLmZuLmVtdWxhdGVUcmFuc2l0aW9uRW5kID0gdHJhbnNpdGlvbkVuZEVtdWxhdG9yO1xuXHRcblx0ICAgIGlmIChVdGlsLnN1cHBvcnRzVHJhbnNpdGlvbkVuZCgpKSB7XG5cdCAgICAgICQuZXZlbnQuc3BlY2lhbFtVdGlsLlRSQU5TSVRJT05fRU5EXSA9IGdldFNwZWNpYWxUcmFuc2l0aW9uRW5kRXZlbnQoKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCAgICogUHVibGljIFV0aWwgQXBpXG5cdCAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0ICAgKi9cblx0XG5cdCAgdmFyIFV0aWwgPSB7XG5cdFxuXHQgICAgVFJBTlNJVElPTl9FTkQ6ICdic1RyYW5zaXRpb25FbmQnLFxuXHRcblx0ICAgIGdldFVJRDogZnVuY3Rpb24gZ2V0VUlEKHByZWZpeCkge1xuXHQgICAgICBkbyB7XG5cdCAgICAgICAgLyogZXNsaW50LWRpc2FibGUgbm8tYml0d2lzZSAqL1xuXHQgICAgICAgIHByZWZpeCArPSB+fihNYXRoLnJhbmRvbSgpICogTUFYX1VJRCk7IC8vIFwifn5cIiBhY3RzIGxpa2UgYSBmYXN0ZXIgTWF0aC5mbG9vcigpIGhlcmVcblx0ICAgICAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLWJpdHdpc2UgKi9cblx0ICAgICAgfSB3aGlsZSAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocHJlZml4KSk7XG5cdCAgICAgIHJldHVybiBwcmVmaXg7XG5cdCAgICB9LFxuXHQgICAgZ2V0U2VsZWN0b3JGcm9tRWxlbWVudDogZnVuY3Rpb24gZ2V0U2VsZWN0b3JGcm9tRWxlbWVudChlbGVtZW50KSB7XG5cdCAgICAgIHZhciBzZWxlY3RvciA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLXRhcmdldCcpO1xuXHRcblx0ICAgICAgaWYgKCFzZWxlY3Rvcikge1xuXHQgICAgICAgIHNlbGVjdG9yID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2hyZWYnKSB8fCAnJztcblx0ICAgICAgICBzZWxlY3RvciA9IC9eI1thLXpdL2kudGVzdChzZWxlY3RvcikgPyBzZWxlY3RvciA6IG51bGw7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHJldHVybiBzZWxlY3Rvcjtcblx0ICAgIH0sXG5cdCAgICByZWZsb3c6IGZ1bmN0aW9uIHJlZmxvdyhlbGVtZW50KSB7XG5cdCAgICAgIG5ldyBGdW5jdGlvbignYnMnLCAncmV0dXJuIGJzJykoZWxlbWVudC5vZmZzZXRIZWlnaHQpO1xuXHQgICAgfSxcblx0ICAgIHRyaWdnZXJUcmFuc2l0aW9uRW5kOiBmdW5jdGlvbiB0cmlnZ2VyVHJhbnNpdGlvbkVuZChlbGVtZW50KSB7XG5cdCAgICAgICQoZWxlbWVudCkudHJpZ2dlcih0cmFuc2l0aW9uLmVuZCk7XG5cdCAgICB9LFxuXHQgICAgc3VwcG9ydHNUcmFuc2l0aW9uRW5kOiBmdW5jdGlvbiBzdXBwb3J0c1RyYW5zaXRpb25FbmQoKSB7XG5cdCAgICAgIHJldHVybiBCb29sZWFuKHRyYW5zaXRpb24pO1xuXHQgICAgfSxcblx0ICAgIHR5cGVDaGVja0NvbmZpZzogZnVuY3Rpb24gdHlwZUNoZWNrQ29uZmlnKGNvbXBvbmVudE5hbWUsIGNvbmZpZywgY29uZmlnVHlwZXMpIHtcblx0ICAgICAgZm9yICh2YXIgcHJvcGVydHkgaW4gY29uZmlnVHlwZXMpIHtcblx0ICAgICAgICBpZiAoY29uZmlnVHlwZXMuaGFzT3duUHJvcGVydHkocHJvcGVydHkpKSB7XG5cdCAgICAgICAgICB2YXIgZXhwZWN0ZWRUeXBlcyA9IGNvbmZpZ1R5cGVzW3Byb3BlcnR5XTtcblx0ICAgICAgICAgIHZhciB2YWx1ZSA9IGNvbmZpZ1twcm9wZXJ0eV07XG5cdCAgICAgICAgICB2YXIgdmFsdWVUeXBlID0gdm9pZCAwO1xuXHRcblx0ICAgICAgICAgIGlmICh2YWx1ZSAmJiBpc0VsZW1lbnQodmFsdWUpKSB7XG5cdCAgICAgICAgICAgIHZhbHVlVHlwZSA9ICdlbGVtZW50Jztcblx0ICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIHZhbHVlVHlwZSA9IHRvVHlwZSh2YWx1ZSk7XG5cdCAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgaWYgKCFuZXcgUmVnRXhwKGV4cGVjdGVkVHlwZXMpLnRlc3QodmFsdWVUeXBlKSkge1xuXHQgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoY29tcG9uZW50TmFtZS50b1VwcGVyQ2FzZSgpICsgJzogJyArICgnT3B0aW9uIFwiJyArIHByb3BlcnR5ICsgJ1wiIHByb3ZpZGVkIHR5cGUgXCInICsgdmFsdWVUeXBlICsgJ1wiICcpICsgKCdidXQgZXhwZWN0ZWQgdHlwZSBcIicgKyBleHBlY3RlZFR5cGVzICsgJ1wiLicpKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICBzZXRUcmFuc2l0aW9uRW5kU3VwcG9ydCgpO1xuXHRcblx0ICByZXR1cm4gVXRpbDtcblx0fShqUXVlcnkpO1xuXHRcblx0LyoqXG5cdCAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCAqIEJvb3RzdHJhcCAodjQuMC4wLWFscGhhLjUpOiBhbGVydC5qc1xuXHQgKiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ibG9iL21hc3Rlci9MSUNFTlNFKVxuXHQgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQgKi9cblx0XG5cdHZhciBBbGVydCA9IGZ1bmN0aW9uICgkKSB7XG5cdFxuXHQgIC8qKlxuXHQgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQgICAqIENvbnN0YW50c1xuXHQgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQgICAqL1xuXHRcblx0ICB2YXIgTkFNRSA9ICdhbGVydCc7XG5cdCAgdmFyIFZFUlNJT04gPSAnNC4wLjAtYWxwaGEuNSc7XG5cdCAgdmFyIERBVEFfS0VZID0gJ2JzLmFsZXJ0Jztcblx0ICB2YXIgRVZFTlRfS0VZID0gJy4nICsgREFUQV9LRVk7XG5cdCAgdmFyIERBVEFfQVBJX0tFWSA9ICcuZGF0YS1hcGknO1xuXHQgIHZhciBKUVVFUllfTk9fQ09ORkxJQ1QgPSAkLmZuW05BTUVdO1xuXHQgIHZhciBUUkFOU0lUSU9OX0RVUkFUSU9OID0gMTUwO1xuXHRcblx0ICB2YXIgU2VsZWN0b3IgPSB7XG5cdCAgICBESVNNSVNTOiAnW2RhdGEtZGlzbWlzcz1cImFsZXJ0XCJdJ1xuXHQgIH07XG5cdFxuXHQgIHZhciBFdmVudCA9IHtcblx0ICAgIENMT1NFOiAnY2xvc2UnICsgRVZFTlRfS0VZLFxuXHQgICAgQ0xPU0VEOiAnY2xvc2VkJyArIEVWRU5UX0tFWSxcblx0ICAgIENMSUNLX0RBVEFfQVBJOiAnY2xpY2snICsgRVZFTlRfS0VZICsgREFUQV9BUElfS0VZXG5cdCAgfTtcblx0XG5cdCAgdmFyIENsYXNzTmFtZSA9IHtcblx0ICAgIEFMRVJUOiAnYWxlcnQnLFxuXHQgICAgRkFERTogJ2ZhZGUnLFxuXHQgICAgSU46ICdpbidcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0ICAgKiBDbGFzcyBEZWZpbml0aW9uXG5cdCAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCAgICovXG5cdFxuXHQgIHZhciBBbGVydCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIEFsZXJ0KGVsZW1lbnQpIHtcblx0ICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEFsZXJ0KTtcblx0XG5cdCAgICAgIHRoaXMuX2VsZW1lbnQgPSBlbGVtZW50O1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIGdldHRlcnNcblx0XG5cdCAgICAvLyBwdWJsaWNcblx0XG5cdCAgICBBbGVydC5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbiBjbG9zZShlbGVtZW50KSB7XG5cdCAgICAgIGVsZW1lbnQgPSBlbGVtZW50IHx8IHRoaXMuX2VsZW1lbnQ7XG5cdFxuXHQgICAgICB2YXIgcm9vdEVsZW1lbnQgPSB0aGlzLl9nZXRSb290RWxlbWVudChlbGVtZW50KTtcblx0ICAgICAgdmFyIGN1c3RvbUV2ZW50ID0gdGhpcy5fdHJpZ2dlckNsb3NlRXZlbnQocm9vdEVsZW1lbnQpO1xuXHRcblx0ICAgICAgaWYgKGN1c3RvbUV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpKSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICB0aGlzLl9yZW1vdmVFbGVtZW50KHJvb3RFbGVtZW50KTtcblx0ICAgIH07XG5cdFxuXHQgICAgQWxlcnQucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiBkaXNwb3NlKCkge1xuXHQgICAgICAkLnJlbW92ZURhdGEodGhpcy5fZWxlbWVudCwgREFUQV9LRVkpO1xuXHQgICAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcblx0ICAgIH07XG5cdFxuXHQgICAgLy8gcHJpdmF0ZVxuXHRcblx0ICAgIEFsZXJ0LnByb3RvdHlwZS5fZ2V0Um9vdEVsZW1lbnQgPSBmdW5jdGlvbiBfZ2V0Um9vdEVsZW1lbnQoZWxlbWVudCkge1xuXHQgICAgICB2YXIgc2VsZWN0b3IgPSBVdGlsLmdldFNlbGVjdG9yRnJvbUVsZW1lbnQoZWxlbWVudCk7XG5cdCAgICAgIHZhciBwYXJlbnQgPSBmYWxzZTtcblx0XG5cdCAgICAgIGlmIChzZWxlY3Rvcikge1xuXHQgICAgICAgIHBhcmVudCA9ICQoc2VsZWN0b3IpWzBdO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAoIXBhcmVudCkge1xuXHQgICAgICAgIHBhcmVudCA9ICQoZWxlbWVudCkuY2xvc2VzdCgnLicgKyBDbGFzc05hbWUuQUxFUlQpWzBdO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICByZXR1cm4gcGFyZW50O1xuXHQgICAgfTtcblx0XG5cdCAgICBBbGVydC5wcm90b3R5cGUuX3RyaWdnZXJDbG9zZUV2ZW50ID0gZnVuY3Rpb24gX3RyaWdnZXJDbG9zZUV2ZW50KGVsZW1lbnQpIHtcblx0ICAgICAgdmFyIGNsb3NlRXZlbnQgPSAkLkV2ZW50KEV2ZW50LkNMT1NFKTtcblx0XG5cdCAgICAgICQoZWxlbWVudCkudHJpZ2dlcihjbG9zZUV2ZW50KTtcblx0ICAgICAgcmV0dXJuIGNsb3NlRXZlbnQ7XG5cdCAgICB9O1xuXHRcblx0ICAgIEFsZXJ0LnByb3RvdHlwZS5fcmVtb3ZlRWxlbWVudCA9IGZ1bmN0aW9uIF9yZW1vdmVFbGVtZW50KGVsZW1lbnQpIHtcblx0ICAgICAgJChlbGVtZW50KS5yZW1vdmVDbGFzcyhDbGFzc05hbWUuSU4pO1xuXHRcblx0ICAgICAgaWYgKCFVdGlsLnN1cHBvcnRzVHJhbnNpdGlvbkVuZCgpIHx8ICEkKGVsZW1lbnQpLmhhc0NsYXNzKENsYXNzTmFtZS5GQURFKSkge1xuXHQgICAgICAgIHRoaXMuX2Rlc3Ryb3lFbGVtZW50KGVsZW1lbnQpO1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgJChlbGVtZW50KS5vbmUoVXRpbC5UUkFOU0lUSU9OX0VORCwgJC5wcm94eSh0aGlzLl9kZXN0cm95RWxlbWVudCwgdGhpcywgZWxlbWVudCkpLmVtdWxhdGVUcmFuc2l0aW9uRW5kKFRSQU5TSVRJT05fRFVSQVRJT04pO1xuXHQgICAgfTtcblx0XG5cdCAgICBBbGVydC5wcm90b3R5cGUuX2Rlc3Ryb3lFbGVtZW50ID0gZnVuY3Rpb24gX2Rlc3Ryb3lFbGVtZW50KGVsZW1lbnQpIHtcblx0ICAgICAgJChlbGVtZW50KS5kZXRhY2goKS50cmlnZ2VyKEV2ZW50LkNMT1NFRCkucmVtb3ZlKCk7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8vIHN0YXRpY1xuXHRcblx0ICAgIEFsZXJ0Ll9qUXVlcnlJbnRlcmZhY2UgPSBmdW5jdGlvbiBfalF1ZXJ5SW50ZXJmYWNlKGNvbmZpZykge1xuXHQgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgJGVsZW1lbnQgPSAkKHRoaXMpO1xuXHQgICAgICAgIHZhciBkYXRhID0gJGVsZW1lbnQuZGF0YShEQVRBX0tFWSk7XG5cdFxuXHQgICAgICAgIGlmICghZGF0YSkge1xuXHQgICAgICAgICAgZGF0YSA9IG5ldyBBbGVydCh0aGlzKTtcblx0ICAgICAgICAgICRlbGVtZW50LmRhdGEoREFUQV9LRVksIGRhdGEpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgaWYgKGNvbmZpZyA9PT0gJ2Nsb3NlJykge1xuXHQgICAgICAgICAgZGF0YVtjb25maWddKHRoaXMpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIEFsZXJ0Ll9oYW5kbGVEaXNtaXNzID0gZnVuY3Rpb24gX2hhbmRsZURpc21pc3MoYWxlcnRJbnN0YW5jZSkge1xuXHQgICAgICByZXR1cm4gZnVuY3Rpb24gKGV2ZW50KSB7XG5cdCAgICAgICAgaWYgKGV2ZW50KSB7XG5cdCAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgYWxlcnRJbnN0YW5jZS5jbG9zZSh0aGlzKTtcblx0ICAgICAgfTtcblx0ICAgIH07XG5cdFxuXHQgICAgX2NyZWF0ZUNsYXNzKEFsZXJ0LCBudWxsLCBbe1xuXHQgICAgICBrZXk6ICdWRVJTSU9OJyxcblx0ICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG5cdCAgICAgICAgcmV0dXJuIFZFUlNJT047XG5cdCAgICAgIH1cblx0ICAgIH1dKTtcblx0XG5cdCAgICByZXR1cm4gQWxlcnQ7XG5cdCAgfSgpO1xuXHRcblx0ICAvKipcblx0ICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0ICAgKiBEYXRhIEFwaSBpbXBsZW1lbnRhdGlvblxuXHQgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQgICAqL1xuXHRcblx0ICAkKGRvY3VtZW50KS5vbihFdmVudC5DTElDS19EQVRBX0FQSSwgU2VsZWN0b3IuRElTTUlTUywgQWxlcnQuX2hhbmRsZURpc21pc3MobmV3IEFsZXJ0KCkpKTtcblx0XG5cdCAgLyoqXG5cdCAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCAgICogalF1ZXJ5XG5cdCAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCAgICovXG5cdFxuXHQgICQuZm5bTkFNRV0gPSBBbGVydC5falF1ZXJ5SW50ZXJmYWNlO1xuXHQgICQuZm5bTkFNRV0uQ29uc3RydWN0b3IgPSBBbGVydDtcblx0ICAkLmZuW05BTUVdLm5vQ29uZmxpY3QgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAkLmZuW05BTUVdID0gSlFVRVJZX05PX0NPTkZMSUNUO1xuXHQgICAgcmV0dXJuIEFsZXJ0Ll9qUXVlcnlJbnRlcmZhY2U7XG5cdCAgfTtcblx0XG5cdCAgcmV0dXJuIEFsZXJ0O1xuXHR9KGpRdWVyeSk7XG5cdFxuXHQvKipcblx0ICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0ICogQm9vdHN0cmFwICh2NC4wLjAtYWxwaGEuNSk6IGJ1dHRvbi5qc1xuXHQgKiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ibG9iL21hc3Rlci9MSUNFTlNFKVxuXHQgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQgKi9cblx0XG5cdHZhciBCdXR0b24gPSBmdW5jdGlvbiAoJCkge1xuXHRcblx0ICAvKipcblx0ICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0ICAgKiBDb25zdGFudHNcblx0ICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0ICAgKi9cblx0XG5cdCAgdmFyIE5BTUUgPSAnYnV0dG9uJztcblx0ICB2YXIgVkVSU0lPTiA9ICc0LjAuMC1hbHBoYS41Jztcblx0ICB2YXIgREFUQV9LRVkgPSAnYnMuYnV0dG9uJztcblx0ICB2YXIgRVZFTlRfS0VZID0gJy4nICsgREFUQV9LRVk7XG5cdCAgdmFyIERBVEFfQVBJX0tFWSA9ICcuZGF0YS1hcGknO1xuXHQgIHZhciBKUVVFUllfTk9fQ09ORkxJQ1QgPSAkLmZuW05BTUVdO1xuXHRcblx0ICB2YXIgQ2xhc3NOYW1lID0ge1xuXHQgICAgQUNUSVZFOiAnYWN0aXZlJyxcblx0ICAgIEJVVFRPTjogJ2J0bicsXG5cdCAgICBGT0NVUzogJ2ZvY3VzJ1xuXHQgIH07XG5cdFxuXHQgIHZhciBTZWxlY3RvciA9IHtcblx0ICAgIERBVEFfVE9HR0xFX0NBUlJPVDogJ1tkYXRhLXRvZ2dsZV49XCJidXR0b25cIl0nLFxuXHQgICAgREFUQV9UT0dHTEU6ICdbZGF0YS10b2dnbGU9XCJidXR0b25zXCJdJyxcblx0ICAgIElOUFVUOiAnaW5wdXQnLFxuXHQgICAgQUNUSVZFOiAnLmFjdGl2ZScsXG5cdCAgICBCVVRUT046ICcuYnRuJ1xuXHQgIH07XG5cdFxuXHQgIHZhciBFdmVudCA9IHtcblx0ICAgIENMSUNLX0RBVEFfQVBJOiAnY2xpY2snICsgRVZFTlRfS0VZICsgREFUQV9BUElfS0VZLFxuXHQgICAgRk9DVVNfQkxVUl9EQVRBX0FQSTogJ2ZvY3VzJyArIEVWRU5UX0tFWSArIERBVEFfQVBJX0tFWSArICcgJyArICgnYmx1cicgKyBFVkVOVF9LRVkgKyBEQVRBX0FQSV9LRVkpXG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCAgICogQ2xhc3MgRGVmaW5pdGlvblxuXHQgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQgICAqL1xuXHRcblx0ICB2YXIgQnV0dG9uID0gZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gQnV0dG9uKGVsZW1lbnQpIHtcblx0ICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEJ1dHRvbik7XG5cdFxuXHQgICAgICB0aGlzLl9lbGVtZW50ID0gZWxlbWVudDtcblx0ICAgIH1cblx0XG5cdCAgICAvLyBnZXR0ZXJzXG5cdFxuXHQgICAgLy8gcHVibGljXG5cdFxuXHQgICAgQnV0dG9uLnByb3RvdHlwZS50b2dnbGUgPSBmdW5jdGlvbiB0b2dnbGUoKSB7XG5cdCAgICAgIHZhciB0cmlnZ2VyQ2hhbmdlRXZlbnQgPSB0cnVlO1xuXHQgICAgICB2YXIgcm9vdEVsZW1lbnQgPSAkKHRoaXMuX2VsZW1lbnQpLmNsb3Nlc3QoU2VsZWN0b3IuREFUQV9UT0dHTEUpWzBdO1xuXHRcblx0ICAgICAgaWYgKHJvb3RFbGVtZW50KSB7XG5cdCAgICAgICAgdmFyIGlucHV0ID0gJCh0aGlzLl9lbGVtZW50KS5maW5kKFNlbGVjdG9yLklOUFVUKVswXTtcblx0XG5cdCAgICAgICAgaWYgKGlucHV0KSB7XG5cdCAgICAgICAgICBpZiAoaW5wdXQudHlwZSA9PT0gJ3JhZGlvJykge1xuXHQgICAgICAgICAgICBpZiAoaW5wdXQuY2hlY2tlZCAmJiAkKHRoaXMuX2VsZW1lbnQpLmhhc0NsYXNzKENsYXNzTmFtZS5BQ1RJVkUpKSB7XG5cdCAgICAgICAgICAgICAgdHJpZ2dlckNoYW5nZUV2ZW50ID0gZmFsc2U7XG5cdCAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgdmFyIGFjdGl2ZUVsZW1lbnQgPSAkKHJvb3RFbGVtZW50KS5maW5kKFNlbGVjdG9yLkFDVElWRSlbMF07XG5cdFxuXHQgICAgICAgICAgICAgIGlmIChhY3RpdmVFbGVtZW50KSB7XG5cdCAgICAgICAgICAgICAgICAkKGFjdGl2ZUVsZW1lbnQpLnJlbW92ZUNsYXNzKENsYXNzTmFtZS5BQ1RJVkUpO1xuXHQgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgIGlmICh0cmlnZ2VyQ2hhbmdlRXZlbnQpIHtcblx0ICAgICAgICAgICAgaW5wdXQuY2hlY2tlZCA9ICEkKHRoaXMuX2VsZW1lbnQpLmhhc0NsYXNzKENsYXNzTmFtZS5BQ1RJVkUpO1xuXHQgICAgICAgICAgICAkKHRoaXMuX2VsZW1lbnQpLnRyaWdnZXIoJ2NoYW5nZScpO1xuXHQgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgIGlucHV0LmZvY3VzKCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHRoaXMuX2VsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLXByZXNzZWQnLCAhJCh0aGlzLl9lbGVtZW50KS5oYXNDbGFzcyhDbGFzc05hbWUuQUNUSVZFKSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmICh0cmlnZ2VyQ2hhbmdlRXZlbnQpIHtcblx0ICAgICAgICAkKHRoaXMuX2VsZW1lbnQpLnRvZ2dsZUNsYXNzKENsYXNzTmFtZS5BQ1RJVkUpO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIEJ1dHRvbi5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uIGRpc3Bvc2UoKSB7XG5cdCAgICAgICQucmVtb3ZlRGF0YSh0aGlzLl9lbGVtZW50LCBEQVRBX0tFWSk7XG5cdCAgICAgIHRoaXMuX2VsZW1lbnQgPSBudWxsO1xuXHQgICAgfTtcblx0XG5cdCAgICAvLyBzdGF0aWNcblx0XG5cdCAgICBCdXR0b24uX2pRdWVyeUludGVyZmFjZSA9IGZ1bmN0aW9uIF9qUXVlcnlJbnRlcmZhY2UoY29uZmlnKSB7XG5cdCAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBkYXRhID0gJCh0aGlzKS5kYXRhKERBVEFfS0VZKTtcblx0XG5cdCAgICAgICAgaWYgKCFkYXRhKSB7XG5cdCAgICAgICAgICBkYXRhID0gbmV3IEJ1dHRvbih0aGlzKTtcblx0ICAgICAgICAgICQodGhpcykuZGF0YShEQVRBX0tFWSwgZGF0YSk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBpZiAoY29uZmlnID09PSAndG9nZ2xlJykge1xuXHQgICAgICAgICAgZGF0YVtjb25maWddKCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0ICAgIH07XG5cdFxuXHQgICAgX2NyZWF0ZUNsYXNzKEJ1dHRvbiwgbnVsbCwgW3tcblx0ICAgICAga2V5OiAnVkVSU0lPTicsXG5cdCAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgICAgIHJldHVybiBWRVJTSU9OO1xuXHQgICAgICB9XG5cdCAgICB9XSk7XG5cdFxuXHQgICAgcmV0dXJuIEJ1dHRvbjtcblx0ICB9KCk7XG5cdFxuXHQgIC8qKlxuXHQgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQgICAqIERhdGEgQXBpIGltcGxlbWVudGF0aW9uXG5cdCAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCAgICovXG5cdFxuXHQgICQoZG9jdW1lbnQpLm9uKEV2ZW50LkNMSUNLX0RBVEFfQVBJLCBTZWxlY3Rvci5EQVRBX1RPR0dMRV9DQVJST1QsIGZ1bmN0aW9uIChldmVudCkge1xuXHQgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XG5cdCAgICB2YXIgYnV0dG9uID0gZXZlbnQudGFyZ2V0O1xuXHRcblx0ICAgIGlmICghJChidXR0b24pLmhhc0NsYXNzKENsYXNzTmFtZS5CVVRUT04pKSB7XG5cdCAgICAgIGJ1dHRvbiA9ICQoYnV0dG9uKS5jbG9zZXN0KFNlbGVjdG9yLkJVVFRPTik7XG5cdCAgICB9XG5cdFxuXHQgICAgQnV0dG9uLl9qUXVlcnlJbnRlcmZhY2UuY2FsbCgkKGJ1dHRvbiksICd0b2dnbGUnKTtcblx0ICB9KS5vbihFdmVudC5GT0NVU19CTFVSX0RBVEFfQVBJLCBTZWxlY3Rvci5EQVRBX1RPR0dMRV9DQVJST1QsIGZ1bmN0aW9uIChldmVudCkge1xuXHQgICAgdmFyIGJ1dHRvbiA9ICQoZXZlbnQudGFyZ2V0KS5jbG9zZXN0KFNlbGVjdG9yLkJVVFRPTilbMF07XG5cdCAgICAkKGJ1dHRvbikudG9nZ2xlQ2xhc3MoQ2xhc3NOYW1lLkZPQ1VTLCAvXmZvY3VzKGluKT8kLy50ZXN0KGV2ZW50LnR5cGUpKTtcblx0ICB9KTtcblx0XG5cdCAgLyoqXG5cdCAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCAgICogalF1ZXJ5XG5cdCAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCAgICovXG5cdFxuXHQgICQuZm5bTkFNRV0gPSBCdXR0b24uX2pRdWVyeUludGVyZmFjZTtcblx0ICAkLmZuW05BTUVdLkNvbnN0cnVjdG9yID0gQnV0dG9uO1xuXHQgICQuZm5bTkFNRV0ubm9Db25mbGljdCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICQuZm5bTkFNRV0gPSBKUVVFUllfTk9fQ09ORkxJQ1Q7XG5cdCAgICByZXR1cm4gQnV0dG9uLl9qUXVlcnlJbnRlcmZhY2U7XG5cdCAgfTtcblx0XG5cdCAgcmV0dXJuIEJ1dHRvbjtcblx0fShqUXVlcnkpO1xuXHRcblx0LyoqXG5cdCAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCAqIEJvb3RzdHJhcCAodjQuMC4wLWFscGhhLjUpOiBjYXJvdXNlbC5qc1xuXHQgKiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ibG9iL21hc3Rlci9MSUNFTlNFKVxuXHQgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQgKi9cblx0XG5cdHZhciBDYXJvdXNlbCA9IGZ1bmN0aW9uICgkKSB7XG5cdFxuXHQgIC8qKlxuXHQgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQgICAqIENvbnN0YW50c1xuXHQgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQgICAqL1xuXHRcblx0ICB2YXIgTkFNRSA9ICdjYXJvdXNlbCc7XG5cdCAgdmFyIFZFUlNJT04gPSAnNC4wLjAtYWxwaGEuNSc7XG5cdCAgdmFyIERBVEFfS0VZID0gJ2JzLmNhcm91c2VsJztcblx0ICB2YXIgRVZFTlRfS0VZID0gJy4nICsgREFUQV9LRVk7XG5cdCAgdmFyIERBVEFfQVBJX0tFWSA9ICcuZGF0YS1hcGknO1xuXHQgIHZhciBKUVVFUllfTk9fQ09ORkxJQ1QgPSAkLmZuW05BTUVdO1xuXHQgIHZhciBUUkFOU0lUSU9OX0RVUkFUSU9OID0gNjAwO1xuXHQgIHZhciBBUlJPV19MRUZUX0tFWUNPREUgPSAzNzsgLy8gS2V5Ym9hcmRFdmVudC53aGljaCB2YWx1ZSBmb3IgbGVmdCBhcnJvdyBrZXlcblx0ICB2YXIgQVJST1dfUklHSFRfS0VZQ09ERSA9IDM5OyAvLyBLZXlib2FyZEV2ZW50LndoaWNoIHZhbHVlIGZvciByaWdodCBhcnJvdyBrZXlcblx0XG5cdCAgdmFyIERlZmF1bHQgPSB7XG5cdCAgICBpbnRlcnZhbDogNTAwMCxcblx0ICAgIGtleWJvYXJkOiB0cnVlLFxuXHQgICAgc2xpZGU6IGZhbHNlLFxuXHQgICAgcGF1c2U6ICdob3ZlcicsXG5cdCAgICB3cmFwOiB0cnVlXG5cdCAgfTtcblx0XG5cdCAgdmFyIERlZmF1bHRUeXBlID0ge1xuXHQgICAgaW50ZXJ2YWw6ICcobnVtYmVyfGJvb2xlYW4pJyxcblx0ICAgIGtleWJvYXJkOiAnYm9vbGVhbicsXG5cdCAgICBzbGlkZTogJyhib29sZWFufHN0cmluZyknLFxuXHQgICAgcGF1c2U6ICcoc3RyaW5nfGJvb2xlYW4pJyxcblx0ICAgIHdyYXA6ICdib29sZWFuJ1xuXHQgIH07XG5cdFxuXHQgIHZhciBEaXJlY3Rpb24gPSB7XG5cdCAgICBORVhUOiAnbmV4dCcsXG5cdCAgICBQUkVWSU9VUzogJ3ByZXYnXG5cdCAgfTtcblx0XG5cdCAgdmFyIEV2ZW50ID0ge1xuXHQgICAgU0xJREU6ICdzbGlkZScgKyBFVkVOVF9LRVksXG5cdCAgICBTTElEOiAnc2xpZCcgKyBFVkVOVF9LRVksXG5cdCAgICBLRVlET1dOOiAna2V5ZG93bicgKyBFVkVOVF9LRVksXG5cdCAgICBNT1VTRUVOVEVSOiAnbW91c2VlbnRlcicgKyBFVkVOVF9LRVksXG5cdCAgICBNT1VTRUxFQVZFOiAnbW91c2VsZWF2ZScgKyBFVkVOVF9LRVksXG5cdCAgICBMT0FEX0RBVEFfQVBJOiAnbG9hZCcgKyBFVkVOVF9LRVkgKyBEQVRBX0FQSV9LRVksXG5cdCAgICBDTElDS19EQVRBX0FQSTogJ2NsaWNrJyArIEVWRU5UX0tFWSArIERBVEFfQVBJX0tFWVxuXHQgIH07XG5cdFxuXHQgIHZhciBDbGFzc05hbWUgPSB7XG5cdCAgICBDQVJPVVNFTDogJ2Nhcm91c2VsJyxcblx0ICAgIEFDVElWRTogJ2FjdGl2ZScsXG5cdCAgICBTTElERTogJ3NsaWRlJyxcblx0ICAgIFJJR0hUOiAncmlnaHQnLFxuXHQgICAgTEVGVDogJ2xlZnQnLFxuXHQgICAgSVRFTTogJ2Nhcm91c2VsLWl0ZW0nXG5cdCAgfTtcblx0XG5cdCAgdmFyIFNlbGVjdG9yID0ge1xuXHQgICAgQUNUSVZFOiAnLmFjdGl2ZScsXG5cdCAgICBBQ1RJVkVfSVRFTTogJy5hY3RpdmUuY2Fyb3VzZWwtaXRlbScsXG5cdCAgICBJVEVNOiAnLmNhcm91c2VsLWl0ZW0nLFxuXHQgICAgTkVYVF9QUkVWOiAnLm5leHQsIC5wcmV2Jyxcblx0ICAgIElORElDQVRPUlM6ICcuY2Fyb3VzZWwtaW5kaWNhdG9ycycsXG5cdCAgICBEQVRBX1NMSURFOiAnW2RhdGEtc2xpZGVdLCBbZGF0YS1zbGlkZS10b10nLFxuXHQgICAgREFUQV9SSURFOiAnW2RhdGEtcmlkZT1cImNhcm91c2VsXCJdJ1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQgICAqIENsYXNzIERlZmluaXRpb25cblx0ICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0ICAgKi9cblx0XG5cdCAgdmFyIENhcm91c2VsID0gZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gQ2Fyb3VzZWwoZWxlbWVudCwgY29uZmlnKSB7XG5cdCAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDYXJvdXNlbCk7XG5cdFxuXHQgICAgICB0aGlzLl9pdGVtcyA9IG51bGw7XG5cdCAgICAgIHRoaXMuX2ludGVydmFsID0gbnVsbDtcblx0ICAgICAgdGhpcy5fYWN0aXZlRWxlbWVudCA9IG51bGw7XG5cdFxuXHQgICAgICB0aGlzLl9pc1BhdXNlZCA9IGZhbHNlO1xuXHQgICAgICB0aGlzLl9pc1NsaWRpbmcgPSBmYWxzZTtcblx0XG5cdCAgICAgIHRoaXMuX2NvbmZpZyA9IHRoaXMuX2dldENvbmZpZyhjb25maWcpO1xuXHQgICAgICB0aGlzLl9lbGVtZW50ID0gJChlbGVtZW50KVswXTtcblx0ICAgICAgdGhpcy5faW5kaWNhdG9yc0VsZW1lbnQgPSAkKHRoaXMuX2VsZW1lbnQpLmZpbmQoU2VsZWN0b3IuSU5ESUNBVE9SUylbMF07XG5cdFxuXHQgICAgICB0aGlzLl9hZGRFdmVudExpc3RlbmVycygpO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIGdldHRlcnNcblx0XG5cdCAgICAvLyBwdWJsaWNcblx0XG5cdCAgICBDYXJvdXNlbC5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uIG5leHQoKSB7XG5cdCAgICAgIGlmICghdGhpcy5faXNTbGlkaW5nKSB7XG5cdCAgICAgICAgdGhpcy5fc2xpZGUoRGlyZWN0aW9uLk5FWFQpO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIENhcm91c2VsLnByb3RvdHlwZS5uZXh0V2hlblZpc2libGUgPSBmdW5jdGlvbiBuZXh0V2hlblZpc2libGUoKSB7XG5cdCAgICAgIC8vIERvbid0IGNhbGwgbmV4dCB3aGVuIHRoZSBwYWdlIGlzbid0IHZpc2libGVcblx0ICAgICAgaWYgKCFkb2N1bWVudC5oaWRkZW4pIHtcblx0ICAgICAgICB0aGlzLm5leHQoKTtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0XG5cdCAgICBDYXJvdXNlbC5wcm90b3R5cGUucHJldiA9IGZ1bmN0aW9uIHByZXYoKSB7XG5cdCAgICAgIGlmICghdGhpcy5faXNTbGlkaW5nKSB7XG5cdCAgICAgICAgdGhpcy5fc2xpZGUoRGlyZWN0aW9uLlBSRVZJT1VTKTtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0XG5cdCAgICBDYXJvdXNlbC5wcm90b3R5cGUucGF1c2UgPSBmdW5jdGlvbiBwYXVzZShldmVudCkge1xuXHQgICAgICBpZiAoIWV2ZW50KSB7XG5cdCAgICAgICAgdGhpcy5faXNQYXVzZWQgPSB0cnVlO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAoJCh0aGlzLl9lbGVtZW50KS5maW5kKFNlbGVjdG9yLk5FWFRfUFJFVilbMF0gJiYgVXRpbC5zdXBwb3J0c1RyYW5zaXRpb25FbmQoKSkge1xuXHQgICAgICAgIFV0aWwudHJpZ2dlclRyYW5zaXRpb25FbmQodGhpcy5fZWxlbWVudCk7XG5cdCAgICAgICAgdGhpcy5jeWNsZSh0cnVlKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLl9pbnRlcnZhbCk7XG5cdCAgICAgIHRoaXMuX2ludGVydmFsID0gbnVsbDtcblx0ICAgIH07XG5cdFxuXHQgICAgQ2Fyb3VzZWwucHJvdG90eXBlLmN5Y2xlID0gZnVuY3Rpb24gY3ljbGUoZXZlbnQpIHtcblx0ICAgICAgaWYgKCFldmVudCkge1xuXHQgICAgICAgIHRoaXMuX2lzUGF1c2VkID0gZmFsc2U7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmICh0aGlzLl9pbnRlcnZhbCkge1xuXHQgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5faW50ZXJ2YWwpO1xuXHQgICAgICAgIHRoaXMuX2ludGVydmFsID0gbnVsbDtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKHRoaXMuX2NvbmZpZy5pbnRlcnZhbCAmJiAhdGhpcy5faXNQYXVzZWQpIHtcblx0ICAgICAgICB0aGlzLl9pbnRlcnZhbCA9IHNldEludGVydmFsKCQucHJveHkoZG9jdW1lbnQudmlzaWJpbGl0eVN0YXRlID8gdGhpcy5uZXh0V2hlblZpc2libGUgOiB0aGlzLm5leHQsIHRoaXMpLCB0aGlzLl9jb25maWcuaW50ZXJ2YWwpO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIENhcm91c2VsLnByb3RvdHlwZS50byA9IGZ1bmN0aW9uIHRvKGluZGV4KSB7XG5cdCAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXHRcblx0ICAgICAgdGhpcy5fYWN0aXZlRWxlbWVudCA9ICQodGhpcy5fZWxlbWVudCkuZmluZChTZWxlY3Rvci5BQ1RJVkVfSVRFTSlbMF07XG5cdFxuXHQgICAgICB2YXIgYWN0aXZlSW5kZXggPSB0aGlzLl9nZXRJdGVtSW5kZXgodGhpcy5fYWN0aXZlRWxlbWVudCk7XG5cdFxuXHQgICAgICBpZiAoaW5kZXggPiB0aGlzLl9pdGVtcy5sZW5ndGggLSAxIHx8IGluZGV4IDwgMCkge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKHRoaXMuX2lzU2xpZGluZykge1xuXHQgICAgICAgICQodGhpcy5fZWxlbWVudCkub25lKEV2ZW50LlNMSUQsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgIHJldHVybiBfdGhpczIudG8oaW5kZXgpO1xuXHQgICAgICAgIH0pO1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKGFjdGl2ZUluZGV4ID09PSBpbmRleCkge1xuXHQgICAgICAgIHRoaXMucGF1c2UoKTtcblx0ICAgICAgICB0aGlzLmN5Y2xlKCk7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICB2YXIgZGlyZWN0aW9uID0gaW5kZXggPiBhY3RpdmVJbmRleCA/IERpcmVjdGlvbi5ORVhUIDogRGlyZWN0aW9uLlBSRVZJT1VTO1xuXHRcblx0ICAgICAgdGhpcy5fc2xpZGUoZGlyZWN0aW9uLCB0aGlzLl9pdGVtc1tpbmRleF0pO1xuXHQgICAgfTtcblx0XG5cdCAgICBDYXJvdXNlbC5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uIGRpc3Bvc2UoKSB7XG5cdCAgICAgICQodGhpcy5fZWxlbWVudCkub2ZmKEVWRU5UX0tFWSk7XG5cdCAgICAgICQucmVtb3ZlRGF0YSh0aGlzLl9lbGVtZW50LCBEQVRBX0tFWSk7XG5cdFxuXHQgICAgICB0aGlzLl9pdGVtcyA9IG51bGw7XG5cdCAgICAgIHRoaXMuX2NvbmZpZyA9IG51bGw7XG5cdCAgICAgIHRoaXMuX2VsZW1lbnQgPSBudWxsO1xuXHQgICAgICB0aGlzLl9pbnRlcnZhbCA9IG51bGw7XG5cdCAgICAgIHRoaXMuX2lzUGF1c2VkID0gbnVsbDtcblx0ICAgICAgdGhpcy5faXNTbGlkaW5nID0gbnVsbDtcblx0ICAgICAgdGhpcy5fYWN0aXZlRWxlbWVudCA9IG51bGw7XG5cdCAgICAgIHRoaXMuX2luZGljYXRvcnNFbGVtZW50ID0gbnVsbDtcblx0ICAgIH07XG5cdFxuXHQgICAgLy8gcHJpdmF0ZVxuXHRcblx0ICAgIENhcm91c2VsLnByb3RvdHlwZS5fZ2V0Q29uZmlnID0gZnVuY3Rpb24gX2dldENvbmZpZyhjb25maWcpIHtcblx0ICAgICAgY29uZmlnID0gJC5leHRlbmQoe30sIERlZmF1bHQsIGNvbmZpZyk7XG5cdCAgICAgIFV0aWwudHlwZUNoZWNrQ29uZmlnKE5BTUUsIGNvbmZpZywgRGVmYXVsdFR5cGUpO1xuXHQgICAgICByZXR1cm4gY29uZmlnO1xuXHQgICAgfTtcblx0XG5cdCAgICBDYXJvdXNlbC5wcm90b3R5cGUuX2FkZEV2ZW50TGlzdGVuZXJzID0gZnVuY3Rpb24gX2FkZEV2ZW50TGlzdGVuZXJzKCkge1xuXHQgICAgICBpZiAodGhpcy5fY29uZmlnLmtleWJvYXJkKSB7XG5cdCAgICAgICAgJCh0aGlzLl9lbGVtZW50KS5vbihFdmVudC5LRVlET1dOLCAkLnByb3h5KHRoaXMuX2tleWRvd24sIHRoaXMpKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKHRoaXMuX2NvbmZpZy5wYXVzZSA9PT0gJ2hvdmVyJyAmJiAhKCdvbnRvdWNoc3RhcnQnIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkpIHtcblx0ICAgICAgICAkKHRoaXMuX2VsZW1lbnQpLm9uKEV2ZW50Lk1PVVNFRU5URVIsICQucHJveHkodGhpcy5wYXVzZSwgdGhpcykpLm9uKEV2ZW50Lk1PVVNFTEVBVkUsICQucHJveHkodGhpcy5jeWNsZSwgdGhpcykpO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIENhcm91c2VsLnByb3RvdHlwZS5fa2V5ZG93biA9IGZ1bmN0aW9uIF9rZXlkb3duKGV2ZW50KSB7XG5cdCAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFxuXHQgICAgICBpZiAoL2lucHV0fHRleHRhcmVhL2kudGVzdChldmVudC50YXJnZXQudGFnTmFtZSkpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHN3aXRjaCAoZXZlbnQud2hpY2gpIHtcblx0ICAgICAgICBjYXNlIEFSUk9XX0xFRlRfS0VZQ09ERTpcblx0ICAgICAgICAgIHRoaXMucHJldigpO1xuXHQgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgY2FzZSBBUlJPV19SSUdIVF9LRVlDT0RFOlxuXHQgICAgICAgICAgdGhpcy5uZXh0KCk7XG5cdCAgICAgICAgICBicmVhaztcblx0ICAgICAgICBkZWZhdWx0OlxuXHQgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIENhcm91c2VsLnByb3RvdHlwZS5fZ2V0SXRlbUluZGV4ID0gZnVuY3Rpb24gX2dldEl0ZW1JbmRleChlbGVtZW50KSB7XG5cdCAgICAgIHRoaXMuX2l0ZW1zID0gJC5tYWtlQXJyYXkoJChlbGVtZW50KS5wYXJlbnQoKS5maW5kKFNlbGVjdG9yLklURU0pKTtcblx0ICAgICAgcmV0dXJuIHRoaXMuX2l0ZW1zLmluZGV4T2YoZWxlbWVudCk7XG5cdCAgICB9O1xuXHRcblx0ICAgIENhcm91c2VsLnByb3RvdHlwZS5fZ2V0SXRlbUJ5RGlyZWN0aW9uID0gZnVuY3Rpb24gX2dldEl0ZW1CeURpcmVjdGlvbihkaXJlY3Rpb24sIGFjdGl2ZUVsZW1lbnQpIHtcblx0ICAgICAgdmFyIGlzTmV4dERpcmVjdGlvbiA9IGRpcmVjdGlvbiA9PT0gRGlyZWN0aW9uLk5FWFQ7XG5cdCAgICAgIHZhciBpc1ByZXZEaXJlY3Rpb24gPSBkaXJlY3Rpb24gPT09IERpcmVjdGlvbi5QUkVWSU9VUztcblx0ICAgICAgdmFyIGFjdGl2ZUluZGV4ID0gdGhpcy5fZ2V0SXRlbUluZGV4KGFjdGl2ZUVsZW1lbnQpO1xuXHQgICAgICB2YXIgbGFzdEl0ZW1JbmRleCA9IHRoaXMuX2l0ZW1zLmxlbmd0aCAtIDE7XG5cdCAgICAgIHZhciBpc0dvaW5nVG9XcmFwID0gaXNQcmV2RGlyZWN0aW9uICYmIGFjdGl2ZUluZGV4ID09PSAwIHx8IGlzTmV4dERpcmVjdGlvbiAmJiBhY3RpdmVJbmRleCA9PT0gbGFzdEl0ZW1JbmRleDtcblx0XG5cdCAgICAgIGlmIChpc0dvaW5nVG9XcmFwICYmICF0aGlzLl9jb25maWcud3JhcCkge1xuXHQgICAgICAgIHJldHVybiBhY3RpdmVFbGVtZW50O1xuXHQgICAgICB9XG5cdFxuXHQgICAgICB2YXIgZGVsdGEgPSBkaXJlY3Rpb24gPT09IERpcmVjdGlvbi5QUkVWSU9VUyA/IC0xIDogMTtcblx0ICAgICAgdmFyIGl0ZW1JbmRleCA9IChhY3RpdmVJbmRleCArIGRlbHRhKSAlIHRoaXMuX2l0ZW1zLmxlbmd0aDtcblx0XG5cdCAgICAgIHJldHVybiBpdGVtSW5kZXggPT09IC0xID8gdGhpcy5faXRlbXNbdGhpcy5faXRlbXMubGVuZ3RoIC0gMV0gOiB0aGlzLl9pdGVtc1tpdGVtSW5kZXhdO1xuXHQgICAgfTtcblx0XG5cdCAgICBDYXJvdXNlbC5wcm90b3R5cGUuX3RyaWdnZXJTbGlkZUV2ZW50ID0gZnVuY3Rpb24gX3RyaWdnZXJTbGlkZUV2ZW50KHJlbGF0ZWRUYXJnZXQsIGRpcmVjdGlvbmFsQ2xhc3NuYW1lKSB7XG5cdCAgICAgIHZhciBzbGlkZUV2ZW50ID0gJC5FdmVudChFdmVudC5TTElERSwge1xuXHQgICAgICAgIHJlbGF0ZWRUYXJnZXQ6IHJlbGF0ZWRUYXJnZXQsXG5cdCAgICAgICAgZGlyZWN0aW9uOiBkaXJlY3Rpb25hbENsYXNzbmFtZVxuXHQgICAgICB9KTtcblx0XG5cdCAgICAgICQodGhpcy5fZWxlbWVudCkudHJpZ2dlcihzbGlkZUV2ZW50KTtcblx0XG5cdCAgICAgIHJldHVybiBzbGlkZUV2ZW50O1xuXHQgICAgfTtcblx0XG5cdCAgICBDYXJvdXNlbC5wcm90b3R5cGUuX3NldEFjdGl2ZUluZGljYXRvckVsZW1lbnQgPSBmdW5jdGlvbiBfc2V0QWN0aXZlSW5kaWNhdG9yRWxlbWVudChlbGVtZW50KSB7XG5cdCAgICAgIGlmICh0aGlzLl9pbmRpY2F0b3JzRWxlbWVudCkge1xuXHQgICAgICAgICQodGhpcy5faW5kaWNhdG9yc0VsZW1lbnQpLmZpbmQoU2VsZWN0b3IuQUNUSVZFKS5yZW1vdmVDbGFzcyhDbGFzc05hbWUuQUNUSVZFKTtcblx0XG5cdCAgICAgICAgdmFyIG5leHRJbmRpY2F0b3IgPSB0aGlzLl9pbmRpY2F0b3JzRWxlbWVudC5jaGlsZHJlblt0aGlzLl9nZXRJdGVtSW5kZXgoZWxlbWVudCldO1xuXHRcblx0ICAgICAgICBpZiAobmV4dEluZGljYXRvcikge1xuXHQgICAgICAgICAgJChuZXh0SW5kaWNhdG9yKS5hZGRDbGFzcyhDbGFzc05hbWUuQUNUSVZFKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgQ2Fyb3VzZWwucHJvdG90eXBlLl9zbGlkZSA9IGZ1bmN0aW9uIF9zbGlkZShkaXJlY3Rpb24sIGVsZW1lbnQpIHtcblx0ICAgICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cdFxuXHQgICAgICB2YXIgYWN0aXZlRWxlbWVudCA9ICQodGhpcy5fZWxlbWVudCkuZmluZChTZWxlY3Rvci5BQ1RJVkVfSVRFTSlbMF07XG5cdCAgICAgIHZhciBuZXh0RWxlbWVudCA9IGVsZW1lbnQgfHwgYWN0aXZlRWxlbWVudCAmJiB0aGlzLl9nZXRJdGVtQnlEaXJlY3Rpb24oZGlyZWN0aW9uLCBhY3RpdmVFbGVtZW50KTtcblx0XG5cdCAgICAgIHZhciBpc0N5Y2xpbmcgPSBCb29sZWFuKHRoaXMuX2ludGVydmFsKTtcblx0XG5cdCAgICAgIHZhciBkaXJlY3Rpb25hbENsYXNzTmFtZSA9IGRpcmVjdGlvbiA9PT0gRGlyZWN0aW9uLk5FWFQgPyBDbGFzc05hbWUuTEVGVCA6IENsYXNzTmFtZS5SSUdIVDtcblx0XG5cdCAgICAgIGlmIChuZXh0RWxlbWVudCAmJiAkKG5leHRFbGVtZW50KS5oYXNDbGFzcyhDbGFzc05hbWUuQUNUSVZFKSkge1xuXHQgICAgICAgIHRoaXMuX2lzU2xpZGluZyA9IGZhbHNlO1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdmFyIHNsaWRlRXZlbnQgPSB0aGlzLl90cmlnZ2VyU2xpZGVFdmVudChuZXh0RWxlbWVudCwgZGlyZWN0aW9uYWxDbGFzc05hbWUpO1xuXHQgICAgICBpZiAoc2xpZGVFdmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSkge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKCFhY3RpdmVFbGVtZW50IHx8ICFuZXh0RWxlbWVudCkge1xuXHQgICAgICAgIC8vIHNvbWUgd2VpcmRuZXNzIGlzIGhhcHBlbmluZywgc28gd2UgYmFpbFxuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdGhpcy5faXNTbGlkaW5nID0gdHJ1ZTtcblx0XG5cdCAgICAgIGlmIChpc0N5Y2xpbmcpIHtcblx0ICAgICAgICB0aGlzLnBhdXNlKCk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHRoaXMuX3NldEFjdGl2ZUluZGljYXRvckVsZW1lbnQobmV4dEVsZW1lbnQpO1xuXHRcblx0ICAgICAgdmFyIHNsaWRFdmVudCA9ICQuRXZlbnQoRXZlbnQuU0xJRCwge1xuXHQgICAgICAgIHJlbGF0ZWRUYXJnZXQ6IG5leHRFbGVtZW50LFxuXHQgICAgICAgIGRpcmVjdGlvbjogZGlyZWN0aW9uYWxDbGFzc05hbWVcblx0ICAgICAgfSk7XG5cdFxuXHQgICAgICBpZiAoVXRpbC5zdXBwb3J0c1RyYW5zaXRpb25FbmQoKSAmJiAkKHRoaXMuX2VsZW1lbnQpLmhhc0NsYXNzKENsYXNzTmFtZS5TTElERSkpIHtcblx0XG5cdCAgICAgICAgJChuZXh0RWxlbWVudCkuYWRkQ2xhc3MoZGlyZWN0aW9uKTtcblx0XG5cdCAgICAgICAgVXRpbC5yZWZsb3cobmV4dEVsZW1lbnQpO1xuXHRcblx0ICAgICAgICAkKGFjdGl2ZUVsZW1lbnQpLmFkZENsYXNzKGRpcmVjdGlvbmFsQ2xhc3NOYW1lKTtcblx0ICAgICAgICAkKG5leHRFbGVtZW50KS5hZGRDbGFzcyhkaXJlY3Rpb25hbENsYXNzTmFtZSk7XG5cdFxuXHQgICAgICAgICQoYWN0aXZlRWxlbWVudCkub25lKFV0aWwuVFJBTlNJVElPTl9FTkQsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICQobmV4dEVsZW1lbnQpLnJlbW92ZUNsYXNzKGRpcmVjdGlvbmFsQ2xhc3NOYW1lKS5yZW1vdmVDbGFzcyhkaXJlY3Rpb24pO1xuXHRcblx0ICAgICAgICAgICQobmV4dEVsZW1lbnQpLmFkZENsYXNzKENsYXNzTmFtZS5BQ1RJVkUpO1xuXHRcblx0ICAgICAgICAgICQoYWN0aXZlRWxlbWVudCkucmVtb3ZlQ2xhc3MoQ2xhc3NOYW1lLkFDVElWRSkucmVtb3ZlQ2xhc3MoZGlyZWN0aW9uKS5yZW1vdmVDbGFzcyhkaXJlY3Rpb25hbENsYXNzTmFtZSk7XG5cdFxuXHQgICAgICAgICAgX3RoaXMzLl9pc1NsaWRpbmcgPSBmYWxzZTtcblx0XG5cdCAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgcmV0dXJuICQoX3RoaXMzLl9lbGVtZW50KS50cmlnZ2VyKHNsaWRFdmVudCk7XG5cdCAgICAgICAgICB9LCAwKTtcblx0ICAgICAgICB9KS5lbXVsYXRlVHJhbnNpdGlvbkVuZChUUkFOU0lUSU9OX0RVUkFUSU9OKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAkKGFjdGl2ZUVsZW1lbnQpLnJlbW92ZUNsYXNzKENsYXNzTmFtZS5BQ1RJVkUpO1xuXHQgICAgICAgICQobmV4dEVsZW1lbnQpLmFkZENsYXNzKENsYXNzTmFtZS5BQ1RJVkUpO1xuXHRcblx0ICAgICAgICB0aGlzLl9pc1NsaWRpbmcgPSBmYWxzZTtcblx0ICAgICAgICAkKHRoaXMuX2VsZW1lbnQpLnRyaWdnZXIoc2xpZEV2ZW50KTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKGlzQ3ljbGluZykge1xuXHQgICAgICAgIHRoaXMuY3ljbGUoKTtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0XG5cdCAgICAvLyBzdGF0aWNcblx0XG5cdCAgICBDYXJvdXNlbC5falF1ZXJ5SW50ZXJmYWNlID0gZnVuY3Rpb24gX2pRdWVyeUludGVyZmFjZShjb25maWcpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIGRhdGEgPSAkKHRoaXMpLmRhdGEoREFUQV9LRVkpO1xuXHQgICAgICAgIHZhciBfY29uZmlnID0gJC5leHRlbmQoe30sIERlZmF1bHQsICQodGhpcykuZGF0YSgpKTtcblx0XG5cdCAgICAgICAgaWYgKCh0eXBlb2YgY29uZmlnID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihjb25maWcpKSA9PT0gJ29iamVjdCcpIHtcblx0ICAgICAgICAgICQuZXh0ZW5kKF9jb25maWcsIGNvbmZpZyk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICB2YXIgYWN0aW9uID0gdHlwZW9mIGNvbmZpZyA9PT0gJ3N0cmluZycgPyBjb25maWcgOiBfY29uZmlnLnNsaWRlO1xuXHRcblx0ICAgICAgICBpZiAoIWRhdGEpIHtcblx0ICAgICAgICAgIGRhdGEgPSBuZXcgQ2Fyb3VzZWwodGhpcywgX2NvbmZpZyk7XG5cdCAgICAgICAgICAkKHRoaXMpLmRhdGEoREFUQV9LRVksIGRhdGEpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgaWYgKHR5cGVvZiBjb25maWcgPT09ICdudW1iZXInKSB7XG5cdCAgICAgICAgICBkYXRhLnRvKGNvbmZpZyk7XG5cdCAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgYWN0aW9uID09PSAnc3RyaW5nJykge1xuXHQgICAgICAgICAgaWYgKGRhdGFbYWN0aW9uXSA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gbWV0aG9kIG5hbWVkIFwiJyArIGFjdGlvbiArICdcIicpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgZGF0YVthY3Rpb25dKCk7XG5cdCAgICAgICAgfSBlbHNlIGlmIChfY29uZmlnLmludGVydmFsKSB7XG5cdCAgICAgICAgICBkYXRhLnBhdXNlKCk7XG5cdCAgICAgICAgICBkYXRhLmN5Y2xlKCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0ICAgIH07XG5cdFxuXHQgICAgQ2Fyb3VzZWwuX2RhdGFBcGlDbGlja0hhbmRsZXIgPSBmdW5jdGlvbiBfZGF0YUFwaUNsaWNrSGFuZGxlcihldmVudCkge1xuXHQgICAgICB2YXIgc2VsZWN0b3IgPSBVdGlsLmdldFNlbGVjdG9yRnJvbUVsZW1lbnQodGhpcyk7XG5cdFxuXHQgICAgICBpZiAoIXNlbGVjdG9yKSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICB2YXIgdGFyZ2V0ID0gJChzZWxlY3RvcilbMF07XG5cdFxuXHQgICAgICBpZiAoIXRhcmdldCB8fCAhJCh0YXJnZXQpLmhhc0NsYXNzKENsYXNzTmFtZS5DQVJPVVNFTCkpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHZhciBjb25maWcgPSAkLmV4dGVuZCh7fSwgJCh0YXJnZXQpLmRhdGEoKSwgJCh0aGlzKS5kYXRhKCkpO1xuXHQgICAgICB2YXIgc2xpZGVJbmRleCA9IHRoaXMuZ2V0QXR0cmlidXRlKCdkYXRhLXNsaWRlLXRvJyk7XG5cdFxuXHQgICAgICBpZiAoc2xpZGVJbmRleCkge1xuXHQgICAgICAgIGNvbmZpZy5pbnRlcnZhbCA9IGZhbHNlO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBDYXJvdXNlbC5falF1ZXJ5SW50ZXJmYWNlLmNhbGwoJCh0YXJnZXQpLCBjb25maWcpO1xuXHRcblx0ICAgICAgaWYgKHNsaWRlSW5kZXgpIHtcblx0ICAgICAgICAkKHRhcmdldCkuZGF0YShEQVRBX0tFWSkudG8oc2xpZGVJbmRleCk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdCAgICB9O1xuXHRcblx0ICAgIF9jcmVhdGVDbGFzcyhDYXJvdXNlbCwgbnVsbCwgW3tcblx0ICAgICAga2V5OiAnVkVSU0lPTicsXG5cdCAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgICAgIHJldHVybiBWRVJTSU9OO1xuXHQgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgIGtleTogJ0RlZmF1bHQnLFxuXHQgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0ICAgICAgICByZXR1cm4gRGVmYXVsdDtcblx0ICAgICAgfVxuXHQgICAgfV0pO1xuXHRcblx0ICAgIHJldHVybiBDYXJvdXNlbDtcblx0ICB9KCk7XG5cdFxuXHQgIC8qKlxuXHQgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQgICAqIERhdGEgQXBpIGltcGxlbWVudGF0aW9uXG5cdCAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCAgICovXG5cdFxuXHQgICQoZG9jdW1lbnQpLm9uKEV2ZW50LkNMSUNLX0RBVEFfQVBJLCBTZWxlY3Rvci5EQVRBX1NMSURFLCBDYXJvdXNlbC5fZGF0YUFwaUNsaWNrSGFuZGxlcik7XG5cdFxuXHQgICQod2luZG93KS5vbihFdmVudC5MT0FEX0RBVEFfQVBJLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAkKFNlbGVjdG9yLkRBVEFfUklERSkuZWFjaChmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHZhciAkY2Fyb3VzZWwgPSAkKHRoaXMpO1xuXHQgICAgICBDYXJvdXNlbC5falF1ZXJ5SW50ZXJmYWNlLmNhbGwoJGNhcm91c2VsLCAkY2Fyb3VzZWwuZGF0YSgpKTtcblx0ICAgIH0pO1xuXHQgIH0pO1xuXHRcblx0ICAvKipcblx0ICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0ICAgKiBqUXVlcnlcblx0ICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0ICAgKi9cblx0XG5cdCAgJC5mbltOQU1FXSA9IENhcm91c2VsLl9qUXVlcnlJbnRlcmZhY2U7XG5cdCAgJC5mbltOQU1FXS5Db25zdHJ1Y3RvciA9IENhcm91c2VsO1xuXHQgICQuZm5bTkFNRV0ubm9Db25mbGljdCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICQuZm5bTkFNRV0gPSBKUVVFUllfTk9fQ09ORkxJQ1Q7XG5cdCAgICByZXR1cm4gQ2Fyb3VzZWwuX2pRdWVyeUludGVyZmFjZTtcblx0ICB9O1xuXHRcblx0ICByZXR1cm4gQ2Fyb3VzZWw7XG5cdH0oalF1ZXJ5KTtcblx0XG5cdC8qKlxuXHQgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQgKiBCb290c3RyYXAgKHY0LjAuMC1hbHBoYS41KTogY29sbGFwc2UuanNcblx0ICogTGljZW5zZWQgdW5kZXIgTUlUIChodHRwczovL2dpdGh1Yi5jb20vdHdicy9ib290c3RyYXAvYmxvYi9tYXN0ZXIvTElDRU5TRSlcblx0ICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0ICovXG5cdFxuXHR2YXIgQ29sbGFwc2UgPSBmdW5jdGlvbiAoJCkge1xuXHRcblx0ICAvKipcblx0ICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0ICAgKiBDb25zdGFudHNcblx0ICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0ICAgKi9cblx0XG5cdCAgdmFyIE5BTUUgPSAnY29sbGFwc2UnO1xuXHQgIHZhciBWRVJTSU9OID0gJzQuMC4wLWFscGhhLjUnO1xuXHQgIHZhciBEQVRBX0tFWSA9ICdicy5jb2xsYXBzZSc7XG5cdCAgdmFyIEVWRU5UX0tFWSA9ICcuJyArIERBVEFfS0VZO1xuXHQgIHZhciBEQVRBX0FQSV9LRVkgPSAnLmRhdGEtYXBpJztcblx0ICB2YXIgSlFVRVJZX05PX0NPTkZMSUNUID0gJC5mbltOQU1FXTtcblx0ICB2YXIgVFJBTlNJVElPTl9EVVJBVElPTiA9IDYwMDtcblx0XG5cdCAgdmFyIERlZmF1bHQgPSB7XG5cdCAgICB0b2dnbGU6IHRydWUsXG5cdCAgICBwYXJlbnQ6ICcnXG5cdCAgfTtcblx0XG5cdCAgdmFyIERlZmF1bHRUeXBlID0ge1xuXHQgICAgdG9nZ2xlOiAnYm9vbGVhbicsXG5cdCAgICBwYXJlbnQ6ICdzdHJpbmcnXG5cdCAgfTtcblx0XG5cdCAgdmFyIEV2ZW50ID0ge1xuXHQgICAgU0hPVzogJ3Nob3cnICsgRVZFTlRfS0VZLFxuXHQgICAgU0hPV046ICdzaG93bicgKyBFVkVOVF9LRVksXG5cdCAgICBISURFOiAnaGlkZScgKyBFVkVOVF9LRVksXG5cdCAgICBISURERU46ICdoaWRkZW4nICsgRVZFTlRfS0VZLFxuXHQgICAgQ0xJQ0tfREFUQV9BUEk6ICdjbGljaycgKyBFVkVOVF9LRVkgKyBEQVRBX0FQSV9LRVlcblx0ICB9O1xuXHRcblx0ICB2YXIgQ2xhc3NOYW1lID0ge1xuXHQgICAgSU46ICdpbicsXG5cdCAgICBDT0xMQVBTRTogJ2NvbGxhcHNlJyxcblx0ICAgIENPTExBUFNJTkc6ICdjb2xsYXBzaW5nJyxcblx0ICAgIENPTExBUFNFRDogJ2NvbGxhcHNlZCdcblx0ICB9O1xuXHRcblx0ICB2YXIgRGltZW5zaW9uID0ge1xuXHQgICAgV0lEVEg6ICd3aWR0aCcsXG5cdCAgICBIRUlHSFQ6ICdoZWlnaHQnXG5cdCAgfTtcblx0XG5cdCAgdmFyIFNlbGVjdG9yID0ge1xuXHQgICAgQUNUSVZFUzogJy5jYXJkID4gLmluLCAuY2FyZCA+IC5jb2xsYXBzaW5nJyxcblx0ICAgIERBVEFfVE9HR0xFOiAnW2RhdGEtdG9nZ2xlPVwiY29sbGFwc2VcIl0nXG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCAgICogQ2xhc3MgRGVmaW5pdGlvblxuXHQgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQgICAqL1xuXHRcblx0ICB2YXIgQ29sbGFwc2UgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBDb2xsYXBzZShlbGVtZW50LCBjb25maWcpIHtcblx0ICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENvbGxhcHNlKTtcblx0XG5cdCAgICAgIHRoaXMuX2lzVHJhbnNpdGlvbmluZyA9IGZhbHNlO1xuXHQgICAgICB0aGlzLl9lbGVtZW50ID0gZWxlbWVudDtcblx0ICAgICAgdGhpcy5fY29uZmlnID0gdGhpcy5fZ2V0Q29uZmlnKGNvbmZpZyk7XG5cdCAgICAgIHRoaXMuX3RyaWdnZXJBcnJheSA9ICQubWFrZUFycmF5KCQoJ1tkYXRhLXRvZ2dsZT1cImNvbGxhcHNlXCJdW2hyZWY9XCIjJyArIGVsZW1lbnQuaWQgKyAnXCJdLCcgKyAoJ1tkYXRhLXRvZ2dsZT1cImNvbGxhcHNlXCJdW2RhdGEtdGFyZ2V0PVwiIycgKyBlbGVtZW50LmlkICsgJ1wiXScpKSk7XG5cdFxuXHQgICAgICB0aGlzLl9wYXJlbnQgPSB0aGlzLl9jb25maWcucGFyZW50ID8gdGhpcy5fZ2V0UGFyZW50KCkgOiBudWxsO1xuXHRcblx0ICAgICAgaWYgKCF0aGlzLl9jb25maWcucGFyZW50KSB7XG5cdCAgICAgICAgdGhpcy5fYWRkQXJpYUFuZENvbGxhcHNlZENsYXNzKHRoaXMuX2VsZW1lbnQsIHRoaXMuX3RyaWdnZXJBcnJheSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmICh0aGlzLl9jb25maWcudG9nZ2xlKSB7XG5cdCAgICAgICAgdGhpcy50b2dnbGUoKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIC8vIGdldHRlcnNcblx0XG5cdCAgICAvLyBwdWJsaWNcblx0XG5cdCAgICBDb2xsYXBzZS5wcm90b3R5cGUudG9nZ2xlID0gZnVuY3Rpb24gdG9nZ2xlKCkge1xuXHQgICAgICBpZiAoJCh0aGlzLl9lbGVtZW50KS5oYXNDbGFzcyhDbGFzc05hbWUuSU4pKSB7XG5cdCAgICAgICAgdGhpcy5oaWRlKCk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgdGhpcy5zaG93KCk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgQ29sbGFwc2UucHJvdG90eXBlLnNob3cgPSBmdW5jdGlvbiBzaG93KCkge1xuXHQgICAgICB2YXIgX3RoaXM0ID0gdGhpcztcblx0XG5cdCAgICAgIGlmICh0aGlzLl9pc1RyYW5zaXRpb25pbmcgfHwgJCh0aGlzLl9lbGVtZW50KS5oYXNDbGFzcyhDbGFzc05hbWUuSU4pKSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICB2YXIgYWN0aXZlcyA9IHZvaWQgMDtcblx0ICAgICAgdmFyIGFjdGl2ZXNEYXRhID0gdm9pZCAwO1xuXHRcblx0ICAgICAgaWYgKHRoaXMuX3BhcmVudCkge1xuXHQgICAgICAgIGFjdGl2ZXMgPSAkLm1ha2VBcnJheSgkKFNlbGVjdG9yLkFDVElWRVMpKTtcblx0ICAgICAgICBpZiAoIWFjdGl2ZXMubGVuZ3RoKSB7XG5cdCAgICAgICAgICBhY3RpdmVzID0gbnVsbDtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmIChhY3RpdmVzKSB7XG5cdCAgICAgICAgYWN0aXZlc0RhdGEgPSAkKGFjdGl2ZXMpLmRhdGEoREFUQV9LRVkpO1xuXHQgICAgICAgIGlmIChhY3RpdmVzRGF0YSAmJiBhY3RpdmVzRGF0YS5faXNUcmFuc2l0aW9uaW5nKSB7XG5cdCAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdFxuXHQgICAgICB2YXIgc3RhcnRFdmVudCA9ICQuRXZlbnQoRXZlbnQuU0hPVyk7XG5cdCAgICAgICQodGhpcy5fZWxlbWVudCkudHJpZ2dlcihzdGFydEV2ZW50KTtcblx0ICAgICAgaWYgKHN0YXJ0RXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmIChhY3RpdmVzKSB7XG5cdCAgICAgICAgQ29sbGFwc2UuX2pRdWVyeUludGVyZmFjZS5jYWxsKCQoYWN0aXZlcyksICdoaWRlJyk7XG5cdCAgICAgICAgaWYgKCFhY3RpdmVzRGF0YSkge1xuXHQgICAgICAgICAgJChhY3RpdmVzKS5kYXRhKERBVEFfS0VZLCBudWxsKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHZhciBkaW1lbnNpb24gPSB0aGlzLl9nZXREaW1lbnNpb24oKTtcblx0XG5cdCAgICAgICQodGhpcy5fZWxlbWVudCkucmVtb3ZlQ2xhc3MoQ2xhc3NOYW1lLkNPTExBUFNFKS5hZGRDbGFzcyhDbGFzc05hbWUuQ09MTEFQU0lORyk7XG5cdFxuXHQgICAgICB0aGlzLl9lbGVtZW50LnN0eWxlW2RpbWVuc2lvbl0gPSAwO1xuXHQgICAgICB0aGlzLl9lbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsIHRydWUpO1xuXHRcblx0ICAgICAgaWYgKHRoaXMuX3RyaWdnZXJBcnJheS5sZW5ndGgpIHtcblx0ICAgICAgICAkKHRoaXMuX3RyaWdnZXJBcnJheSkucmVtb3ZlQ2xhc3MoQ2xhc3NOYW1lLkNPTExBUFNFRCkuYXR0cignYXJpYS1leHBhbmRlZCcsIHRydWUpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICB0aGlzLnNldFRyYW5zaXRpb25pbmcodHJ1ZSk7XG5cdFxuXHQgICAgICB2YXIgY29tcGxldGUgPSBmdW5jdGlvbiBjb21wbGV0ZSgpIHtcblx0ICAgICAgICAkKF90aGlzNC5fZWxlbWVudCkucmVtb3ZlQ2xhc3MoQ2xhc3NOYW1lLkNPTExBUFNJTkcpLmFkZENsYXNzKENsYXNzTmFtZS5DT0xMQVBTRSkuYWRkQ2xhc3MoQ2xhc3NOYW1lLklOKTtcblx0XG5cdCAgICAgICAgX3RoaXM0Ll9lbGVtZW50LnN0eWxlW2RpbWVuc2lvbl0gPSAnJztcblx0XG5cdCAgICAgICAgX3RoaXM0LnNldFRyYW5zaXRpb25pbmcoZmFsc2UpO1xuXHRcblx0ICAgICAgICAkKF90aGlzNC5fZWxlbWVudCkudHJpZ2dlcihFdmVudC5TSE9XTik7XG5cdCAgICAgIH07XG5cdFxuXHQgICAgICBpZiAoIVV0aWwuc3VwcG9ydHNUcmFuc2l0aW9uRW5kKCkpIHtcblx0ICAgICAgICBjb21wbGV0ZSgpO1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdmFyIGNhcGl0YWxpemVkRGltZW5zaW9uID0gZGltZW5zaW9uWzBdLnRvVXBwZXJDYXNlKCkgKyBkaW1lbnNpb24uc2xpY2UoMSk7XG5cdCAgICAgIHZhciBzY3JvbGxTaXplID0gJ3Njcm9sbCcgKyBjYXBpdGFsaXplZERpbWVuc2lvbjtcblx0XG5cdCAgICAgICQodGhpcy5fZWxlbWVudCkub25lKFV0aWwuVFJBTlNJVElPTl9FTkQsIGNvbXBsZXRlKS5lbXVsYXRlVHJhbnNpdGlvbkVuZChUUkFOU0lUSU9OX0RVUkFUSU9OKTtcblx0XG5cdCAgICAgIHRoaXMuX2VsZW1lbnQuc3R5bGVbZGltZW5zaW9uXSA9IHRoaXMuX2VsZW1lbnRbc2Nyb2xsU2l6ZV0gKyAncHgnO1xuXHQgICAgfTtcblx0XG5cdCAgICBDb2xsYXBzZS5wcm90b3R5cGUuaGlkZSA9IGZ1bmN0aW9uIGhpZGUoKSB7XG5cdCAgICAgIHZhciBfdGhpczUgPSB0aGlzO1xuXHRcblx0ICAgICAgaWYgKHRoaXMuX2lzVHJhbnNpdGlvbmluZyB8fCAhJCh0aGlzLl9lbGVtZW50KS5oYXNDbGFzcyhDbGFzc05hbWUuSU4pKSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICB2YXIgc3RhcnRFdmVudCA9ICQuRXZlbnQoRXZlbnQuSElERSk7XG5cdCAgICAgICQodGhpcy5fZWxlbWVudCkudHJpZ2dlcihzdGFydEV2ZW50KTtcblx0ICAgICAgaWYgKHN0YXJ0RXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHZhciBkaW1lbnNpb24gPSB0aGlzLl9nZXREaW1lbnNpb24oKTtcblx0ICAgICAgdmFyIG9mZnNldERpbWVuc2lvbiA9IGRpbWVuc2lvbiA9PT0gRGltZW5zaW9uLldJRFRIID8gJ29mZnNldFdpZHRoJyA6ICdvZmZzZXRIZWlnaHQnO1xuXHRcblx0ICAgICAgdGhpcy5fZWxlbWVudC5zdHlsZVtkaW1lbnNpb25dID0gdGhpcy5fZWxlbWVudFtvZmZzZXREaW1lbnNpb25dICsgJ3B4Jztcblx0XG5cdCAgICAgIFV0aWwucmVmbG93KHRoaXMuX2VsZW1lbnQpO1xuXHRcblx0ICAgICAgJCh0aGlzLl9lbGVtZW50KS5hZGRDbGFzcyhDbGFzc05hbWUuQ09MTEFQU0lORykucmVtb3ZlQ2xhc3MoQ2xhc3NOYW1lLkNPTExBUFNFKS5yZW1vdmVDbGFzcyhDbGFzc05hbWUuSU4pO1xuXHRcblx0ICAgICAgdGhpcy5fZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLCBmYWxzZSk7XG5cdFxuXHQgICAgICBpZiAodGhpcy5fdHJpZ2dlckFycmF5Lmxlbmd0aCkge1xuXHQgICAgICAgICQodGhpcy5fdHJpZ2dlckFycmF5KS5hZGRDbGFzcyhDbGFzc05hbWUuQ09MTEFQU0VEKS5hdHRyKCdhcmlhLWV4cGFuZGVkJywgZmFsc2UpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICB0aGlzLnNldFRyYW5zaXRpb25pbmcodHJ1ZSk7XG5cdFxuXHQgICAgICB2YXIgY29tcGxldGUgPSBmdW5jdGlvbiBjb21wbGV0ZSgpIHtcblx0ICAgICAgICBfdGhpczUuc2V0VHJhbnNpdGlvbmluZyhmYWxzZSk7XG5cdCAgICAgICAgJChfdGhpczUuX2VsZW1lbnQpLnJlbW92ZUNsYXNzKENsYXNzTmFtZS5DT0xMQVBTSU5HKS5hZGRDbGFzcyhDbGFzc05hbWUuQ09MTEFQU0UpLnRyaWdnZXIoRXZlbnQuSElEREVOKTtcblx0ICAgICAgfTtcblx0XG5cdCAgICAgIHRoaXMuX2VsZW1lbnQuc3R5bGVbZGltZW5zaW9uXSA9ICcnO1xuXHRcblx0ICAgICAgaWYgKCFVdGlsLnN1cHBvcnRzVHJhbnNpdGlvbkVuZCgpKSB7XG5cdCAgICAgICAgY29tcGxldGUoKTtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICAgIH1cblx0XG5cdCAgICAgICQodGhpcy5fZWxlbWVudCkub25lKFV0aWwuVFJBTlNJVElPTl9FTkQsIGNvbXBsZXRlKS5lbXVsYXRlVHJhbnNpdGlvbkVuZChUUkFOU0lUSU9OX0RVUkFUSU9OKTtcblx0ICAgIH07XG5cdFxuXHQgICAgQ29sbGFwc2UucHJvdG90eXBlLnNldFRyYW5zaXRpb25pbmcgPSBmdW5jdGlvbiBzZXRUcmFuc2l0aW9uaW5nKGlzVHJhbnNpdGlvbmluZykge1xuXHQgICAgICB0aGlzLl9pc1RyYW5zaXRpb25pbmcgPSBpc1RyYW5zaXRpb25pbmc7XG5cdCAgICB9O1xuXHRcblx0ICAgIENvbGxhcHNlLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gZGlzcG9zZSgpIHtcblx0ICAgICAgJC5yZW1vdmVEYXRhKHRoaXMuX2VsZW1lbnQsIERBVEFfS0VZKTtcblx0XG5cdCAgICAgIHRoaXMuX2NvbmZpZyA9IG51bGw7XG5cdCAgICAgIHRoaXMuX3BhcmVudCA9IG51bGw7XG5cdCAgICAgIHRoaXMuX2VsZW1lbnQgPSBudWxsO1xuXHQgICAgICB0aGlzLl90cmlnZ2VyQXJyYXkgPSBudWxsO1xuXHQgICAgICB0aGlzLl9pc1RyYW5zaXRpb25pbmcgPSBudWxsO1xuXHQgICAgfTtcblx0XG5cdCAgICAvLyBwcml2YXRlXG5cdFxuXHQgICAgQ29sbGFwc2UucHJvdG90eXBlLl9nZXRDb25maWcgPSBmdW5jdGlvbiBfZ2V0Q29uZmlnKGNvbmZpZykge1xuXHQgICAgICBjb25maWcgPSAkLmV4dGVuZCh7fSwgRGVmYXVsdCwgY29uZmlnKTtcblx0ICAgICAgY29uZmlnLnRvZ2dsZSA9IEJvb2xlYW4oY29uZmlnLnRvZ2dsZSk7IC8vIGNvZXJjZSBzdHJpbmcgdmFsdWVzXG5cdCAgICAgIFV0aWwudHlwZUNoZWNrQ29uZmlnKE5BTUUsIGNvbmZpZywgRGVmYXVsdFR5cGUpO1xuXHQgICAgICByZXR1cm4gY29uZmlnO1xuXHQgICAgfTtcblx0XG5cdCAgICBDb2xsYXBzZS5wcm90b3R5cGUuX2dldERpbWVuc2lvbiA9IGZ1bmN0aW9uIF9nZXREaW1lbnNpb24oKSB7XG5cdCAgICAgIHZhciBoYXNXaWR0aCA9ICQodGhpcy5fZWxlbWVudCkuaGFzQ2xhc3MoRGltZW5zaW9uLldJRFRIKTtcblx0ICAgICAgcmV0dXJuIGhhc1dpZHRoID8gRGltZW5zaW9uLldJRFRIIDogRGltZW5zaW9uLkhFSUdIVDtcblx0ICAgIH07XG5cdFxuXHQgICAgQ29sbGFwc2UucHJvdG90eXBlLl9nZXRQYXJlbnQgPSBmdW5jdGlvbiBfZ2V0UGFyZW50KCkge1xuXHQgICAgICB2YXIgX3RoaXM2ID0gdGhpcztcblx0XG5cdCAgICAgIHZhciBwYXJlbnQgPSAkKHRoaXMuX2NvbmZpZy5wYXJlbnQpWzBdO1xuXHQgICAgICB2YXIgc2VsZWN0b3IgPSAnW2RhdGEtdG9nZ2xlPVwiY29sbGFwc2VcIl1bZGF0YS1wYXJlbnQ9XCInICsgdGhpcy5fY29uZmlnLnBhcmVudCArICdcIl0nO1xuXHRcblx0ICAgICAgJChwYXJlbnQpLmZpbmQoc2VsZWN0b3IpLmVhY2goZnVuY3Rpb24gKGksIGVsZW1lbnQpIHtcblx0ICAgICAgICBfdGhpczYuX2FkZEFyaWFBbmRDb2xsYXBzZWRDbGFzcyhDb2xsYXBzZS5fZ2V0VGFyZ2V0RnJvbUVsZW1lbnQoZWxlbWVudCksIFtlbGVtZW50XSk7XG5cdCAgICAgIH0pO1xuXHRcblx0ICAgICAgcmV0dXJuIHBhcmVudDtcblx0ICAgIH07XG5cdFxuXHQgICAgQ29sbGFwc2UucHJvdG90eXBlLl9hZGRBcmlhQW5kQ29sbGFwc2VkQ2xhc3MgPSBmdW5jdGlvbiBfYWRkQXJpYUFuZENvbGxhcHNlZENsYXNzKGVsZW1lbnQsIHRyaWdnZXJBcnJheSkge1xuXHQgICAgICBpZiAoZWxlbWVudCkge1xuXHQgICAgICAgIHZhciBpc09wZW4gPSAkKGVsZW1lbnQpLmhhc0NsYXNzKENsYXNzTmFtZS5JTik7XG5cdCAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLCBpc09wZW4pO1xuXHRcblx0ICAgICAgICBpZiAodHJpZ2dlckFycmF5Lmxlbmd0aCkge1xuXHQgICAgICAgICAgJCh0cmlnZ2VyQXJyYXkpLnRvZ2dsZUNsYXNzKENsYXNzTmFtZS5DT0xMQVBTRUQsICFpc09wZW4pLmF0dHIoJ2FyaWEtZXhwYW5kZWQnLCBpc09wZW4pO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfTtcblx0XG5cdCAgICAvLyBzdGF0aWNcblx0XG5cdCAgICBDb2xsYXBzZS5fZ2V0VGFyZ2V0RnJvbUVsZW1lbnQgPSBmdW5jdGlvbiBfZ2V0VGFyZ2V0RnJvbUVsZW1lbnQoZWxlbWVudCkge1xuXHQgICAgICB2YXIgc2VsZWN0b3IgPSBVdGlsLmdldFNlbGVjdG9yRnJvbUVsZW1lbnQoZWxlbWVudCk7XG5cdCAgICAgIHJldHVybiBzZWxlY3RvciA/ICQoc2VsZWN0b3IpWzBdIDogbnVsbDtcblx0ICAgIH07XG5cdFxuXHQgICAgQ29sbGFwc2UuX2pRdWVyeUludGVyZmFjZSA9IGZ1bmN0aW9uIF9qUXVlcnlJbnRlcmZhY2UoY29uZmlnKSB7XG5cdCAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7XG5cdCAgICAgICAgdmFyIGRhdGEgPSAkdGhpcy5kYXRhKERBVEFfS0VZKTtcblx0ICAgICAgICB2YXIgX2NvbmZpZyA9ICQuZXh0ZW5kKHt9LCBEZWZhdWx0LCAkdGhpcy5kYXRhKCksICh0eXBlb2YgY29uZmlnID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihjb25maWcpKSA9PT0gJ29iamVjdCcgJiYgY29uZmlnKTtcblx0XG5cdCAgICAgICAgaWYgKCFkYXRhICYmIF9jb25maWcudG9nZ2xlICYmIC9zaG93fGhpZGUvLnRlc3QoY29uZmlnKSkge1xuXHQgICAgICAgICAgX2NvbmZpZy50b2dnbGUgPSBmYWxzZTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGlmICghZGF0YSkge1xuXHQgICAgICAgICAgZGF0YSA9IG5ldyBDb2xsYXBzZSh0aGlzLCBfY29uZmlnKTtcblx0ICAgICAgICAgICR0aGlzLmRhdGEoREFUQV9LRVksIGRhdGEpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgaWYgKHR5cGVvZiBjb25maWcgPT09ICdzdHJpbmcnKSB7XG5cdCAgICAgICAgICBpZiAoZGF0YVtjb25maWddID09PSB1bmRlZmluZWQpIHtcblx0ICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBtZXRob2QgbmFtZWQgXCInICsgY29uZmlnICsgJ1wiJyk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICBkYXRhW2NvbmZpZ10oKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgfTtcblx0XG5cdCAgICBfY3JlYXRlQ2xhc3MoQ29sbGFwc2UsIG51bGwsIFt7XG5cdCAgICAgIGtleTogJ1ZFUlNJT04nLFxuXHQgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0ICAgICAgICByZXR1cm4gVkVSU0lPTjtcblx0ICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICBrZXk6ICdEZWZhdWx0Jyxcblx0ICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG5cdCAgICAgICAgcmV0dXJuIERlZmF1bHQ7XG5cdCAgICAgIH1cblx0ICAgIH1dKTtcblx0XG5cdCAgICByZXR1cm4gQ29sbGFwc2U7XG5cdCAgfSgpO1xuXHRcblx0ICAvKipcblx0ICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0ICAgKiBEYXRhIEFwaSBpbXBsZW1lbnRhdGlvblxuXHQgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQgICAqL1xuXHRcblx0ICAkKGRvY3VtZW50KS5vbihFdmVudC5DTElDS19EQVRBX0FQSSwgU2VsZWN0b3IuREFUQV9UT0dHTEUsIGZ1bmN0aW9uIChldmVudCkge1xuXHQgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XG5cdCAgICB2YXIgdGFyZ2V0ID0gQ29sbGFwc2UuX2dldFRhcmdldEZyb21FbGVtZW50KHRoaXMpO1xuXHQgICAgdmFyIGRhdGEgPSAkKHRhcmdldCkuZGF0YShEQVRBX0tFWSk7XG5cdCAgICB2YXIgY29uZmlnID0gZGF0YSA/ICd0b2dnbGUnIDogJCh0aGlzKS5kYXRhKCk7XG5cdFxuXHQgICAgQ29sbGFwc2UuX2pRdWVyeUludGVyZmFjZS5jYWxsKCQodGFyZ2V0KSwgY29uZmlnKTtcblx0ICB9KTtcblx0XG5cdCAgLyoqXG5cdCAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCAgICogalF1ZXJ5XG5cdCAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCAgICovXG5cdFxuXHQgICQuZm5bTkFNRV0gPSBDb2xsYXBzZS5falF1ZXJ5SW50ZXJmYWNlO1xuXHQgICQuZm5bTkFNRV0uQ29uc3RydWN0b3IgPSBDb2xsYXBzZTtcblx0ICAkLmZuW05BTUVdLm5vQ29uZmxpY3QgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAkLmZuW05BTUVdID0gSlFVRVJZX05PX0NPTkZMSUNUO1xuXHQgICAgcmV0dXJuIENvbGxhcHNlLl9qUXVlcnlJbnRlcmZhY2U7XG5cdCAgfTtcblx0XG5cdCAgcmV0dXJuIENvbGxhcHNlO1xuXHR9KGpRdWVyeSk7XG5cdFxuXHQvKipcblx0ICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0ICogQm9vdHN0cmFwICh2NC4wLjAtYWxwaGEuNSk6IGRyb3Bkb3duLmpzXG5cdCAqIExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2Jsb2IvbWFzdGVyL0xJQ0VOU0UpXG5cdCAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCAqL1xuXHRcblx0dmFyIERyb3Bkb3duID0gZnVuY3Rpb24gKCQpIHtcblx0XG5cdCAgLyoqXG5cdCAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCAgICogQ29uc3RhbnRzXG5cdCAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCAgICovXG5cdFxuXHQgIHZhciBOQU1FID0gJ2Ryb3Bkb3duJztcblx0ICB2YXIgVkVSU0lPTiA9ICc0LjAuMC1hbHBoYS41Jztcblx0ICB2YXIgREFUQV9LRVkgPSAnYnMuZHJvcGRvd24nO1xuXHQgIHZhciBFVkVOVF9LRVkgPSAnLicgKyBEQVRBX0tFWTtcblx0ICB2YXIgREFUQV9BUElfS0VZID0gJy5kYXRhLWFwaSc7XG5cdCAgdmFyIEpRVUVSWV9OT19DT05GTElDVCA9ICQuZm5bTkFNRV07XG5cdCAgdmFyIEVTQ0FQRV9LRVlDT0RFID0gMjc7IC8vIEtleWJvYXJkRXZlbnQud2hpY2ggdmFsdWUgZm9yIEVzY2FwZSAoRXNjKSBrZXlcblx0ICB2YXIgQVJST1dfVVBfS0VZQ09ERSA9IDM4OyAvLyBLZXlib2FyZEV2ZW50LndoaWNoIHZhbHVlIGZvciB1cCBhcnJvdyBrZXlcblx0ICB2YXIgQVJST1dfRE9XTl9LRVlDT0RFID0gNDA7IC8vIEtleWJvYXJkRXZlbnQud2hpY2ggdmFsdWUgZm9yIGRvd24gYXJyb3cga2V5XG5cdCAgdmFyIFJJR0hUX01PVVNFX0JVVFRPTl9XSElDSCA9IDM7IC8vIE1vdXNlRXZlbnQud2hpY2ggdmFsdWUgZm9yIHRoZSByaWdodCBidXR0b24gKGFzc3VtaW5nIGEgcmlnaHQtaGFuZGVkIG1vdXNlKVxuXHRcblx0ICB2YXIgRXZlbnQgPSB7XG5cdCAgICBISURFOiAnaGlkZScgKyBFVkVOVF9LRVksXG5cdCAgICBISURERU46ICdoaWRkZW4nICsgRVZFTlRfS0VZLFxuXHQgICAgU0hPVzogJ3Nob3cnICsgRVZFTlRfS0VZLFxuXHQgICAgU0hPV046ICdzaG93bicgKyBFVkVOVF9LRVksXG5cdCAgICBDTElDSzogJ2NsaWNrJyArIEVWRU5UX0tFWSxcblx0ICAgIENMSUNLX0RBVEFfQVBJOiAnY2xpY2snICsgRVZFTlRfS0VZICsgREFUQV9BUElfS0VZLFxuXHQgICAgS0VZRE9XTl9EQVRBX0FQSTogJ2tleWRvd24nICsgRVZFTlRfS0VZICsgREFUQV9BUElfS0VZXG5cdCAgfTtcblx0XG5cdCAgdmFyIENsYXNzTmFtZSA9IHtcblx0ICAgIEJBQ0tEUk9QOiAnZHJvcGRvd24tYmFja2Ryb3AnLFxuXHQgICAgRElTQUJMRUQ6ICdkaXNhYmxlZCcsXG5cdCAgICBPUEVOOiAnb3Blbidcblx0ICB9O1xuXHRcblx0ICB2YXIgU2VsZWN0b3IgPSB7XG5cdCAgICBCQUNLRFJPUDogJy5kcm9wZG93bi1iYWNrZHJvcCcsXG5cdCAgICBEQVRBX1RPR0dMRTogJ1tkYXRhLXRvZ2dsZT1cImRyb3Bkb3duXCJdJyxcblx0ICAgIEZPUk1fQ0hJTEQ6ICcuZHJvcGRvd24gZm9ybScsXG5cdCAgICBST0xFX01FTlU6ICdbcm9sZT1cIm1lbnVcIl0nLFxuXHQgICAgUk9MRV9MSVNUQk9YOiAnW3JvbGU9XCJsaXN0Ym94XCJdJyxcblx0ICAgIE5BVkJBUl9OQVY6ICcubmF2YmFyLW5hdicsXG5cdCAgICBWSVNJQkxFX0lURU1TOiAnW3JvbGU9XCJtZW51XCJdIGxpOm5vdCguZGlzYWJsZWQpIGEsICcgKyAnW3JvbGU9XCJsaXN0Ym94XCJdIGxpOm5vdCguZGlzYWJsZWQpIGEnXG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCAgICogQ2xhc3MgRGVmaW5pdGlvblxuXHQgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQgICAqL1xuXHRcblx0ICB2YXIgRHJvcGRvd24gPSBmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBEcm9wZG93bihlbGVtZW50KSB7XG5cdCAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBEcm9wZG93bik7XG5cdFxuXHQgICAgICB0aGlzLl9lbGVtZW50ID0gZWxlbWVudDtcblx0XG5cdCAgICAgIHRoaXMuX2FkZEV2ZW50TGlzdGVuZXJzKCk7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gZ2V0dGVyc1xuXHRcblx0ICAgIC8vIHB1YmxpY1xuXHRcblx0ICAgIERyb3Bkb3duLnByb3RvdHlwZS50b2dnbGUgPSBmdW5jdGlvbiB0b2dnbGUoKSB7XG5cdCAgICAgIGlmICh0aGlzLmRpc2FibGVkIHx8ICQodGhpcykuaGFzQ2xhc3MoQ2xhc3NOYW1lLkRJU0FCTEVEKSkge1xuXHQgICAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdmFyIHBhcmVudCA9IERyb3Bkb3duLl9nZXRQYXJlbnRGcm9tRWxlbWVudCh0aGlzKTtcblx0ICAgICAgdmFyIGlzQWN0aXZlID0gJChwYXJlbnQpLmhhc0NsYXNzKENsYXNzTmFtZS5PUEVOKTtcblx0XG5cdCAgICAgIERyb3Bkb3duLl9jbGVhck1lbnVzKCk7XG5cdFxuXHQgICAgICBpZiAoaXNBY3RpdmUpIHtcblx0ICAgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmICgnb250b3VjaHN0YXJ0JyBpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgJiYgISQocGFyZW50KS5jbG9zZXN0KFNlbGVjdG9yLk5BVkJBUl9OQVYpLmxlbmd0aCkge1xuXHRcblx0ICAgICAgICAvLyBpZiBtb2JpbGUgd2UgdXNlIGEgYmFja2Ryb3AgYmVjYXVzZSBjbGljayBldmVudHMgZG9uJ3QgZGVsZWdhdGVcblx0ICAgICAgICB2YXIgZHJvcGRvd24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0ICAgICAgICBkcm9wZG93bi5jbGFzc05hbWUgPSBDbGFzc05hbWUuQkFDS0RST1A7XG5cdCAgICAgICAgJChkcm9wZG93bikuaW5zZXJ0QmVmb3JlKHRoaXMpO1xuXHQgICAgICAgICQoZHJvcGRvd24pLm9uKCdjbGljaycsIERyb3Bkb3duLl9jbGVhck1lbnVzKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdmFyIHJlbGF0ZWRUYXJnZXQgPSB7IHJlbGF0ZWRUYXJnZXQ6IHRoaXMgfTtcblx0ICAgICAgdmFyIHNob3dFdmVudCA9ICQuRXZlbnQoRXZlbnQuU0hPVywgcmVsYXRlZFRhcmdldCk7XG5cdFxuXHQgICAgICAkKHBhcmVudCkudHJpZ2dlcihzaG93RXZlbnQpO1xuXHRcblx0ICAgICAgaWYgKHNob3dFdmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSkge1xuXHQgICAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdGhpcy5mb2N1cygpO1xuXHQgICAgICB0aGlzLnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsICd0cnVlJyk7XG5cdFxuXHQgICAgICAkKHBhcmVudCkudG9nZ2xlQ2xhc3MoQ2xhc3NOYW1lLk9QRU4pO1xuXHQgICAgICAkKHBhcmVudCkudHJpZ2dlcigkLkV2ZW50KEV2ZW50LlNIT1dOLCByZWxhdGVkVGFyZ2V0KSk7XG5cdFxuXHQgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICB9O1xuXHRcblx0ICAgIERyb3Bkb3duLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gZGlzcG9zZSgpIHtcblx0ICAgICAgJC5yZW1vdmVEYXRhKHRoaXMuX2VsZW1lbnQsIERBVEFfS0VZKTtcblx0ICAgICAgJCh0aGlzLl9lbGVtZW50KS5vZmYoRVZFTlRfS0VZKTtcblx0ICAgICAgdGhpcy5fZWxlbWVudCA9IG51bGw7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8vIHByaXZhdGVcblx0XG5cdCAgICBEcm9wZG93bi5wcm90b3R5cGUuX2FkZEV2ZW50TGlzdGVuZXJzID0gZnVuY3Rpb24gX2FkZEV2ZW50TGlzdGVuZXJzKCkge1xuXHQgICAgICAkKHRoaXMuX2VsZW1lbnQpLm9uKEV2ZW50LkNMSUNLLCB0aGlzLnRvZ2dsZSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8vIHN0YXRpY1xuXHRcblx0ICAgIERyb3Bkb3duLl9qUXVlcnlJbnRlcmZhY2UgPSBmdW5jdGlvbiBfalF1ZXJ5SW50ZXJmYWNlKGNvbmZpZykge1xuXHQgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgZGF0YSA9ICQodGhpcykuZGF0YShEQVRBX0tFWSk7XG5cdFxuXHQgICAgICAgIGlmICghZGF0YSkge1xuXHQgICAgICAgICAgJCh0aGlzKS5kYXRhKERBVEFfS0VZLCBkYXRhID0gbmV3IERyb3Bkb3duKHRoaXMpKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGlmICh0eXBlb2YgY29uZmlnID09PSAnc3RyaW5nJykge1xuXHQgICAgICAgICAgaWYgKGRhdGFbY29uZmlnXSA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gbWV0aG9kIG5hbWVkIFwiJyArIGNvbmZpZyArICdcIicpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgZGF0YVtjb25maWddLmNhbGwodGhpcyk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0ICAgIH07XG5cdFxuXHQgICAgRHJvcGRvd24uX2NsZWFyTWVudXMgPSBmdW5jdGlvbiBfY2xlYXJNZW51cyhldmVudCkge1xuXHQgICAgICBpZiAoZXZlbnQgJiYgZXZlbnQud2hpY2ggPT09IFJJR0hUX01PVVNFX0JVVFRPTl9XSElDSCkge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdmFyIGJhY2tkcm9wID0gJChTZWxlY3Rvci5CQUNLRFJPUClbMF07XG5cdCAgICAgIGlmIChiYWNrZHJvcCkge1xuXHQgICAgICAgIGJhY2tkcm9wLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYmFja2Ryb3ApO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICB2YXIgdG9nZ2xlcyA9ICQubWFrZUFycmF5KCQoU2VsZWN0b3IuREFUQV9UT0dHTEUpKTtcblx0XG5cdCAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdG9nZ2xlcy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgIHZhciBwYXJlbnQgPSBEcm9wZG93bi5fZ2V0UGFyZW50RnJvbUVsZW1lbnQodG9nZ2xlc1tpXSk7XG5cdCAgICAgICAgdmFyIHJlbGF0ZWRUYXJnZXQgPSB7IHJlbGF0ZWRUYXJnZXQ6IHRvZ2dsZXNbaV0gfTtcblx0XG5cdCAgICAgICAgaWYgKCEkKHBhcmVudCkuaGFzQ2xhc3MoQ2xhc3NOYW1lLk9QRU4pKSB7XG5cdCAgICAgICAgICBjb250aW51ZTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGlmIChldmVudCAmJiBldmVudC50eXBlID09PSAnY2xpY2snICYmIC9pbnB1dHx0ZXh0YXJlYS9pLnRlc3QoZXZlbnQudGFyZ2V0LnRhZ05hbWUpICYmICQuY29udGFpbnMocGFyZW50LCBldmVudC50YXJnZXQpKSB7XG5cdCAgICAgICAgICBjb250aW51ZTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHZhciBoaWRlRXZlbnQgPSAkLkV2ZW50KEV2ZW50LkhJREUsIHJlbGF0ZWRUYXJnZXQpO1xuXHQgICAgICAgICQocGFyZW50KS50cmlnZ2VyKGhpZGVFdmVudCk7XG5cdCAgICAgICAgaWYgKGhpZGVFdmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSkge1xuXHQgICAgICAgICAgY29udGludWU7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICB0b2dnbGVzW2ldLnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsICdmYWxzZScpO1xuXHRcblx0ICAgICAgICAkKHBhcmVudCkucmVtb3ZlQ2xhc3MoQ2xhc3NOYW1lLk9QRU4pLnRyaWdnZXIoJC5FdmVudChFdmVudC5ISURERU4sIHJlbGF0ZWRUYXJnZXQpKTtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0XG5cdCAgICBEcm9wZG93bi5fZ2V0UGFyZW50RnJvbUVsZW1lbnQgPSBmdW5jdGlvbiBfZ2V0UGFyZW50RnJvbUVsZW1lbnQoZWxlbWVudCkge1xuXHQgICAgICB2YXIgcGFyZW50ID0gdm9pZCAwO1xuXHQgICAgICB2YXIgc2VsZWN0b3IgPSBVdGlsLmdldFNlbGVjdG9yRnJvbUVsZW1lbnQoZWxlbWVudCk7XG5cdFxuXHQgICAgICBpZiAoc2VsZWN0b3IpIHtcblx0ICAgICAgICBwYXJlbnQgPSAkKHNlbGVjdG9yKVswXTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgcmV0dXJuIHBhcmVudCB8fCBlbGVtZW50LnBhcmVudE5vZGU7XG5cdCAgICB9O1xuXHRcblx0ICAgIERyb3Bkb3duLl9kYXRhQXBpS2V5ZG93bkhhbmRsZXIgPSBmdW5jdGlvbiBfZGF0YUFwaUtleWRvd25IYW5kbGVyKGV2ZW50KSB7XG5cdCAgICAgIGlmICghLygzOHw0MHwyN3wzMikvLnRlc3QoZXZlbnQud2hpY2gpIHx8IC9pbnB1dHx0ZXh0YXJlYS9pLnRlc3QoZXZlbnQudGFyZ2V0LnRhZ05hbWUpKSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHQgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblx0XG5cdCAgICAgIGlmICh0aGlzLmRpc2FibGVkIHx8ICQodGhpcykuaGFzQ2xhc3MoQ2xhc3NOYW1lLkRJU0FCTEVEKSkge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdmFyIHBhcmVudCA9IERyb3Bkb3duLl9nZXRQYXJlbnRGcm9tRWxlbWVudCh0aGlzKTtcblx0ICAgICAgdmFyIGlzQWN0aXZlID0gJChwYXJlbnQpLmhhc0NsYXNzKENsYXNzTmFtZS5PUEVOKTtcblx0XG5cdCAgICAgIGlmICghaXNBY3RpdmUgJiYgZXZlbnQud2hpY2ggIT09IEVTQ0FQRV9LRVlDT0RFIHx8IGlzQWN0aXZlICYmIGV2ZW50LndoaWNoID09PSBFU0NBUEVfS0VZQ09ERSkge1xuXHRcblx0ICAgICAgICBpZiAoZXZlbnQud2hpY2ggPT09IEVTQ0FQRV9LRVlDT0RFKSB7XG5cdCAgICAgICAgICB2YXIgdG9nZ2xlID0gJChwYXJlbnQpLmZpbmQoU2VsZWN0b3IuREFUQV9UT0dHTEUpWzBdO1xuXHQgICAgICAgICAgJCh0b2dnbGUpLnRyaWdnZXIoJ2ZvY3VzJyk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICAkKHRoaXMpLnRyaWdnZXIoJ2NsaWNrJyk7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICB2YXIgaXRlbXMgPSAkLm1ha2VBcnJheSgkKFNlbGVjdG9yLlZJU0lCTEVfSVRFTVMpKTtcblx0XG5cdCAgICAgIGl0ZW1zID0gaXRlbXMuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgICAgICAgcmV0dXJuIGl0ZW0ub2Zmc2V0V2lkdGggfHwgaXRlbS5vZmZzZXRIZWlnaHQ7XG5cdCAgICAgIH0pO1xuXHRcblx0ICAgICAgaWYgKCFpdGVtcy5sZW5ndGgpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHZhciBpbmRleCA9IGl0ZW1zLmluZGV4T2YoZXZlbnQudGFyZ2V0KTtcblx0XG5cdCAgICAgIGlmIChldmVudC53aGljaCA9PT0gQVJST1dfVVBfS0VZQ09ERSAmJiBpbmRleCA+IDApIHtcblx0ICAgICAgICAvLyB1cFxuXHQgICAgICAgIGluZGV4LS07XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmIChldmVudC53aGljaCA9PT0gQVJST1dfRE9XTl9LRVlDT0RFICYmIGluZGV4IDwgaXRlbXMubGVuZ3RoIC0gMSkge1xuXHQgICAgICAgIC8vIGRvd25cblx0ICAgICAgICBpbmRleCsrO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAoaW5kZXggPCAwKSB7XG5cdCAgICAgICAgaW5kZXggPSAwO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpdGVtc1tpbmRleF0uZm9jdXMoKTtcblx0ICAgIH07XG5cdFxuXHQgICAgX2NyZWF0ZUNsYXNzKERyb3Bkb3duLCBudWxsLCBbe1xuXHQgICAgICBrZXk6ICdWRVJTSU9OJyxcblx0ICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG5cdCAgICAgICAgcmV0dXJuIFZFUlNJT047XG5cdCAgICAgIH1cblx0ICAgIH1dKTtcblx0XG5cdCAgICByZXR1cm4gRHJvcGRvd247XG5cdCAgfSgpO1xuXHRcblx0ICAvKipcblx0ICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0ICAgKiBEYXRhIEFwaSBpbXBsZW1lbnRhdGlvblxuXHQgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQgICAqL1xuXHRcblx0ICAkKGRvY3VtZW50KS5vbihFdmVudC5LRVlET1dOX0RBVEFfQVBJLCBTZWxlY3Rvci5EQVRBX1RPR0dMRSwgRHJvcGRvd24uX2RhdGFBcGlLZXlkb3duSGFuZGxlcikub24oRXZlbnQuS0VZRE9XTl9EQVRBX0FQSSwgU2VsZWN0b3IuUk9MRV9NRU5VLCBEcm9wZG93bi5fZGF0YUFwaUtleWRvd25IYW5kbGVyKS5vbihFdmVudC5LRVlET1dOX0RBVEFfQVBJLCBTZWxlY3Rvci5ST0xFX0xJU1RCT1gsIERyb3Bkb3duLl9kYXRhQXBpS2V5ZG93bkhhbmRsZXIpLm9uKEV2ZW50LkNMSUNLX0RBVEFfQVBJLCBEcm9wZG93bi5fY2xlYXJNZW51cykub24oRXZlbnQuQ0xJQ0tfREFUQV9BUEksIFNlbGVjdG9yLkRBVEFfVE9HR0xFLCBEcm9wZG93bi5wcm90b3R5cGUudG9nZ2xlKS5vbihFdmVudC5DTElDS19EQVRBX0FQSSwgU2VsZWN0b3IuRk9STV9DSElMRCwgZnVuY3Rpb24gKGUpIHtcblx0ICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdCAgfSk7XG5cdFxuXHQgIC8qKlxuXHQgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQgICAqIGpRdWVyeVxuXHQgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQgICAqL1xuXHRcblx0ICAkLmZuW05BTUVdID0gRHJvcGRvd24uX2pRdWVyeUludGVyZmFjZTtcblx0ICAkLmZuW05BTUVdLkNvbnN0cnVjdG9yID0gRHJvcGRvd247XG5cdCAgJC5mbltOQU1FXS5ub0NvbmZsaWN0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgJC5mbltOQU1FXSA9IEpRVUVSWV9OT19DT05GTElDVDtcblx0ICAgIHJldHVybiBEcm9wZG93bi5falF1ZXJ5SW50ZXJmYWNlO1xuXHQgIH07XG5cdFxuXHQgIHJldHVybiBEcm9wZG93bjtcblx0fShqUXVlcnkpO1xuXHRcblx0LyoqXG5cdCAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCAqIEJvb3RzdHJhcCAodjQuMC4wLWFscGhhLjUpOiBtb2RhbC5qc1xuXHQgKiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ibG9iL21hc3Rlci9MSUNFTlNFKVxuXHQgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQgKi9cblx0XG5cdHZhciBNb2RhbCA9IGZ1bmN0aW9uICgkKSB7XG5cdFxuXHQgIC8qKlxuXHQgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQgICAqIENvbnN0YW50c1xuXHQgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQgICAqL1xuXHRcblx0ICB2YXIgTkFNRSA9ICdtb2RhbCc7XG5cdCAgdmFyIFZFUlNJT04gPSAnNC4wLjAtYWxwaGEuNSc7XG5cdCAgdmFyIERBVEFfS0VZID0gJ2JzLm1vZGFsJztcblx0ICB2YXIgRVZFTlRfS0VZID0gJy4nICsgREFUQV9LRVk7XG5cdCAgdmFyIERBVEFfQVBJX0tFWSA9ICcuZGF0YS1hcGknO1xuXHQgIHZhciBKUVVFUllfTk9fQ09ORkxJQ1QgPSAkLmZuW05BTUVdO1xuXHQgIHZhciBUUkFOU0lUSU9OX0RVUkFUSU9OID0gMzAwO1xuXHQgIHZhciBCQUNLRFJPUF9UUkFOU0lUSU9OX0RVUkFUSU9OID0gMTUwO1xuXHQgIHZhciBFU0NBUEVfS0VZQ09ERSA9IDI3OyAvLyBLZXlib2FyZEV2ZW50LndoaWNoIHZhbHVlIGZvciBFc2NhcGUgKEVzYykga2V5XG5cdFxuXHQgIHZhciBEZWZhdWx0ID0ge1xuXHQgICAgYmFja2Ryb3A6IHRydWUsXG5cdCAgICBrZXlib2FyZDogdHJ1ZSxcblx0ICAgIGZvY3VzOiB0cnVlLFxuXHQgICAgc2hvdzogdHJ1ZVxuXHQgIH07XG5cdFxuXHQgIHZhciBEZWZhdWx0VHlwZSA9IHtcblx0ICAgIGJhY2tkcm9wOiAnKGJvb2xlYW58c3RyaW5nKScsXG5cdCAgICBrZXlib2FyZDogJ2Jvb2xlYW4nLFxuXHQgICAgZm9jdXM6ICdib29sZWFuJyxcblx0ICAgIHNob3c6ICdib29sZWFuJ1xuXHQgIH07XG5cdFxuXHQgIHZhciBFdmVudCA9IHtcblx0ICAgIEhJREU6ICdoaWRlJyArIEVWRU5UX0tFWSxcblx0ICAgIEhJRERFTjogJ2hpZGRlbicgKyBFVkVOVF9LRVksXG5cdCAgICBTSE9XOiAnc2hvdycgKyBFVkVOVF9LRVksXG5cdCAgICBTSE9XTjogJ3Nob3duJyArIEVWRU5UX0tFWSxcblx0ICAgIEZPQ1VTSU46ICdmb2N1c2luJyArIEVWRU5UX0tFWSxcblx0ICAgIFJFU0laRTogJ3Jlc2l6ZScgKyBFVkVOVF9LRVksXG5cdCAgICBDTElDS19ESVNNSVNTOiAnY2xpY2suZGlzbWlzcycgKyBFVkVOVF9LRVksXG5cdCAgICBLRVlET1dOX0RJU01JU1M6ICdrZXlkb3duLmRpc21pc3MnICsgRVZFTlRfS0VZLFxuXHQgICAgTU9VU0VVUF9ESVNNSVNTOiAnbW91c2V1cC5kaXNtaXNzJyArIEVWRU5UX0tFWSxcblx0ICAgIE1PVVNFRE9XTl9ESVNNSVNTOiAnbW91c2Vkb3duLmRpc21pc3MnICsgRVZFTlRfS0VZLFxuXHQgICAgQ0xJQ0tfREFUQV9BUEk6ICdjbGljaycgKyBFVkVOVF9LRVkgKyBEQVRBX0FQSV9LRVlcblx0ICB9O1xuXHRcblx0ICB2YXIgQ2xhc3NOYW1lID0ge1xuXHQgICAgU0NST0xMQkFSX01FQVNVUkVSOiAnbW9kYWwtc2Nyb2xsYmFyLW1lYXN1cmUnLFxuXHQgICAgQkFDS0RST1A6ICdtb2RhbC1iYWNrZHJvcCcsXG5cdCAgICBPUEVOOiAnbW9kYWwtb3BlbicsXG5cdCAgICBGQURFOiAnZmFkZScsXG5cdCAgICBJTjogJ2luJ1xuXHQgIH07XG5cdFxuXHQgIHZhciBTZWxlY3RvciA9IHtcblx0ICAgIERJQUxPRzogJy5tb2RhbC1kaWFsb2cnLFxuXHQgICAgREFUQV9UT0dHTEU6ICdbZGF0YS10b2dnbGU9XCJtb2RhbFwiXScsXG5cdCAgICBEQVRBX0RJU01JU1M6ICdbZGF0YS1kaXNtaXNzPVwibW9kYWxcIl0nLFxuXHQgICAgRklYRURfQ09OVEVOVDogJy5uYXZiYXItZml4ZWQtdG9wLCAubmF2YmFyLWZpeGVkLWJvdHRvbSwgLmlzLWZpeGVkJ1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQgICAqIENsYXNzIERlZmluaXRpb25cblx0ICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0ICAgKi9cblx0XG5cdCAgdmFyIE1vZGFsID0gZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gTW9kYWwoZWxlbWVudCwgY29uZmlnKSB7XG5cdCAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBNb2RhbCk7XG5cdFxuXHQgICAgICB0aGlzLl9jb25maWcgPSB0aGlzLl9nZXRDb25maWcoY29uZmlnKTtcblx0ICAgICAgdGhpcy5fZWxlbWVudCA9IGVsZW1lbnQ7XG5cdCAgICAgIHRoaXMuX2RpYWxvZyA9ICQoZWxlbWVudCkuZmluZChTZWxlY3Rvci5ESUFMT0cpWzBdO1xuXHQgICAgICB0aGlzLl9iYWNrZHJvcCA9IG51bGw7XG5cdCAgICAgIHRoaXMuX2lzU2hvd24gPSBmYWxzZTtcblx0ICAgICAgdGhpcy5faXNCb2R5T3ZlcmZsb3dpbmcgPSBmYWxzZTtcblx0ICAgICAgdGhpcy5faWdub3JlQmFja2Ryb3BDbGljayA9IGZhbHNlO1xuXHQgICAgICB0aGlzLl9vcmlnaW5hbEJvZHlQYWRkaW5nID0gMDtcblx0ICAgICAgdGhpcy5fc2Nyb2xsYmFyV2lkdGggPSAwO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIGdldHRlcnNcblx0XG5cdCAgICAvLyBwdWJsaWNcblx0XG5cdCAgICBNb2RhbC5wcm90b3R5cGUudG9nZ2xlID0gZnVuY3Rpb24gdG9nZ2xlKHJlbGF0ZWRUYXJnZXQpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMuX2lzU2hvd24gPyB0aGlzLmhpZGUoKSA6IHRoaXMuc2hvdyhyZWxhdGVkVGFyZ2V0KTtcblx0ICAgIH07XG5cdFxuXHQgICAgTW9kYWwucHJvdG90eXBlLnNob3cgPSBmdW5jdGlvbiBzaG93KHJlbGF0ZWRUYXJnZXQpIHtcblx0ICAgICAgdmFyIF90aGlzNyA9IHRoaXM7XG5cdFxuXHQgICAgICB2YXIgc2hvd0V2ZW50ID0gJC5FdmVudChFdmVudC5TSE9XLCB7XG5cdCAgICAgICAgcmVsYXRlZFRhcmdldDogcmVsYXRlZFRhcmdldFxuXHQgICAgICB9KTtcblx0XG5cdCAgICAgICQodGhpcy5fZWxlbWVudCkudHJpZ2dlcihzaG93RXZlbnQpO1xuXHRcblx0ICAgICAgaWYgKHRoaXMuX2lzU2hvd24gfHwgc2hvd0V2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpKSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICB0aGlzLl9pc1Nob3duID0gdHJ1ZTtcblx0XG5cdCAgICAgIHRoaXMuX2NoZWNrU2Nyb2xsYmFyKCk7XG5cdCAgICAgIHRoaXMuX3NldFNjcm9sbGJhcigpO1xuXHRcblx0ICAgICAgJChkb2N1bWVudC5ib2R5KS5hZGRDbGFzcyhDbGFzc05hbWUuT1BFTik7XG5cdFxuXHQgICAgICB0aGlzLl9zZXRFc2NhcGVFdmVudCgpO1xuXHQgICAgICB0aGlzLl9zZXRSZXNpemVFdmVudCgpO1xuXHRcblx0ICAgICAgJCh0aGlzLl9lbGVtZW50KS5vbihFdmVudC5DTElDS19ESVNNSVNTLCBTZWxlY3Rvci5EQVRBX0RJU01JU1MsICQucHJveHkodGhpcy5oaWRlLCB0aGlzKSk7XG5cdFxuXHQgICAgICAkKHRoaXMuX2RpYWxvZykub24oRXZlbnQuTU9VU0VET1dOX0RJU01JU1MsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAkKF90aGlzNy5fZWxlbWVudCkub25lKEV2ZW50Lk1PVVNFVVBfRElTTUlTUywgZnVuY3Rpb24gKGV2ZW50KSB7XG5cdCAgICAgICAgICBpZiAoJChldmVudC50YXJnZXQpLmlzKF90aGlzNy5fZWxlbWVudCkpIHtcblx0ICAgICAgICAgICAgX3RoaXM3Ll9pZ25vcmVCYWNrZHJvcENsaWNrID0gdHJ1ZTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9KTtcblx0ICAgICAgfSk7XG5cdFxuXHQgICAgICB0aGlzLl9zaG93QmFja2Ryb3AoJC5wcm94eSh0aGlzLl9zaG93RWxlbWVudCwgdGhpcywgcmVsYXRlZFRhcmdldCkpO1xuXHQgICAgfTtcblx0XG5cdCAgICBNb2RhbC5wcm90b3R5cGUuaGlkZSA9IGZ1bmN0aW9uIGhpZGUoZXZlbnQpIHtcblx0ICAgICAgaWYgKGV2ZW50KSB7XG5cdCAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdmFyIGhpZGVFdmVudCA9ICQuRXZlbnQoRXZlbnQuSElERSk7XG5cdFxuXHQgICAgICAkKHRoaXMuX2VsZW1lbnQpLnRyaWdnZXIoaGlkZUV2ZW50KTtcblx0XG5cdCAgICAgIGlmICghdGhpcy5faXNTaG93biB8fCBoaWRlRXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHRoaXMuX2lzU2hvd24gPSBmYWxzZTtcblx0XG5cdCAgICAgIHRoaXMuX3NldEVzY2FwZUV2ZW50KCk7XG5cdCAgICAgIHRoaXMuX3NldFJlc2l6ZUV2ZW50KCk7XG5cdFxuXHQgICAgICAkKGRvY3VtZW50KS5vZmYoRXZlbnQuRk9DVVNJTik7XG5cdFxuXHQgICAgICAkKHRoaXMuX2VsZW1lbnQpLnJlbW92ZUNsYXNzKENsYXNzTmFtZS5JTik7XG5cdFxuXHQgICAgICAkKHRoaXMuX2VsZW1lbnQpLm9mZihFdmVudC5DTElDS19ESVNNSVNTKTtcblx0ICAgICAgJCh0aGlzLl9kaWFsb2cpLm9mZihFdmVudC5NT1VTRURPV05fRElTTUlTUyk7XG5cdFxuXHQgICAgICBpZiAoVXRpbC5zdXBwb3J0c1RyYW5zaXRpb25FbmQoKSAmJiAkKHRoaXMuX2VsZW1lbnQpLmhhc0NsYXNzKENsYXNzTmFtZS5GQURFKSkge1xuXHRcblx0ICAgICAgICAkKHRoaXMuX2VsZW1lbnQpLm9uZShVdGlsLlRSQU5TSVRJT05fRU5ELCAkLnByb3h5KHRoaXMuX2hpZGVNb2RhbCwgdGhpcykpLmVtdWxhdGVUcmFuc2l0aW9uRW5kKFRSQU5TSVRJT05fRFVSQVRJT04pO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHRoaXMuX2hpZGVNb2RhbCgpO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIE1vZGFsLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gZGlzcG9zZSgpIHtcblx0ICAgICAgJC5yZW1vdmVEYXRhKHRoaXMuX2VsZW1lbnQsIERBVEFfS0VZKTtcblx0XG5cdCAgICAgICQod2luZG93KS5vZmYoRVZFTlRfS0VZKTtcblx0ICAgICAgJChkb2N1bWVudCkub2ZmKEVWRU5UX0tFWSk7XG5cdCAgICAgICQodGhpcy5fZWxlbWVudCkub2ZmKEVWRU5UX0tFWSk7XG5cdCAgICAgICQodGhpcy5fYmFja2Ryb3ApLm9mZihFVkVOVF9LRVkpO1xuXHRcblx0ICAgICAgdGhpcy5fY29uZmlnID0gbnVsbDtcblx0ICAgICAgdGhpcy5fZWxlbWVudCA9IG51bGw7XG5cdCAgICAgIHRoaXMuX2RpYWxvZyA9IG51bGw7XG5cdCAgICAgIHRoaXMuX2JhY2tkcm9wID0gbnVsbDtcblx0ICAgICAgdGhpcy5faXNTaG93biA9IG51bGw7XG5cdCAgICAgIHRoaXMuX2lzQm9keU92ZXJmbG93aW5nID0gbnVsbDtcblx0ICAgICAgdGhpcy5faWdub3JlQmFja2Ryb3BDbGljayA9IG51bGw7XG5cdCAgICAgIHRoaXMuX29yaWdpbmFsQm9keVBhZGRpbmcgPSBudWxsO1xuXHQgICAgICB0aGlzLl9zY3JvbGxiYXJXaWR0aCA9IG51bGw7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8vIHByaXZhdGVcblx0XG5cdCAgICBNb2RhbC5wcm90b3R5cGUuX2dldENvbmZpZyA9IGZ1bmN0aW9uIF9nZXRDb25maWcoY29uZmlnKSB7XG5cdCAgICAgIGNvbmZpZyA9ICQuZXh0ZW5kKHt9LCBEZWZhdWx0LCBjb25maWcpO1xuXHQgICAgICBVdGlsLnR5cGVDaGVja0NvbmZpZyhOQU1FLCBjb25maWcsIERlZmF1bHRUeXBlKTtcblx0ICAgICAgcmV0dXJuIGNvbmZpZztcblx0ICAgIH07XG5cdFxuXHQgICAgTW9kYWwucHJvdG90eXBlLl9zaG93RWxlbWVudCA9IGZ1bmN0aW9uIF9zaG93RWxlbWVudChyZWxhdGVkVGFyZ2V0KSB7XG5cdCAgICAgIHZhciBfdGhpczggPSB0aGlzO1xuXHRcblx0ICAgICAgdmFyIHRyYW5zaXRpb24gPSBVdGlsLnN1cHBvcnRzVHJhbnNpdGlvbkVuZCgpICYmICQodGhpcy5fZWxlbWVudCkuaGFzQ2xhc3MoQ2xhc3NOYW1lLkZBREUpO1xuXHRcblx0ICAgICAgaWYgKCF0aGlzLl9lbGVtZW50LnBhcmVudE5vZGUgfHwgdGhpcy5fZWxlbWVudC5wYXJlbnROb2RlLm5vZGVUeXBlICE9PSBOb2RlLkVMRU1FTlRfTk9ERSkge1xuXHQgICAgICAgIC8vIGRvbid0IG1vdmUgbW9kYWxzIGRvbSBwb3NpdGlvblxuXHQgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5fZWxlbWVudCk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHRoaXMuX2VsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG5cdCAgICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdhcmlhLWhpZGRlbicpO1xuXHQgICAgICB0aGlzLl9lbGVtZW50LnNjcm9sbFRvcCA9IDA7XG5cdFxuXHQgICAgICBpZiAodHJhbnNpdGlvbikge1xuXHQgICAgICAgIFV0aWwucmVmbG93KHRoaXMuX2VsZW1lbnQpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICAkKHRoaXMuX2VsZW1lbnQpLmFkZENsYXNzKENsYXNzTmFtZS5JTik7XG5cdFxuXHQgICAgICBpZiAodGhpcy5fY29uZmlnLmZvY3VzKSB7XG5cdCAgICAgICAgdGhpcy5fZW5mb3JjZUZvY3VzKCk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHZhciBzaG93bkV2ZW50ID0gJC5FdmVudChFdmVudC5TSE9XTiwge1xuXHQgICAgICAgIHJlbGF0ZWRUYXJnZXQ6IHJlbGF0ZWRUYXJnZXRcblx0ICAgICAgfSk7XG5cdFxuXHQgICAgICB2YXIgdHJhbnNpdGlvbkNvbXBsZXRlID0gZnVuY3Rpb24gdHJhbnNpdGlvbkNvbXBsZXRlKCkge1xuXHQgICAgICAgIGlmIChfdGhpczguX2NvbmZpZy5mb2N1cykge1xuXHQgICAgICAgICAgX3RoaXM4Ll9lbGVtZW50LmZvY3VzKCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgICQoX3RoaXM4Ll9lbGVtZW50KS50cmlnZ2VyKHNob3duRXZlbnQpO1xuXHQgICAgICB9O1xuXHRcblx0ICAgICAgaWYgKHRyYW5zaXRpb24pIHtcblx0ICAgICAgICAkKHRoaXMuX2RpYWxvZykub25lKFV0aWwuVFJBTlNJVElPTl9FTkQsIHRyYW5zaXRpb25Db21wbGV0ZSkuZW11bGF0ZVRyYW5zaXRpb25FbmQoVFJBTlNJVElPTl9EVVJBVElPTik7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgdHJhbnNpdGlvbkNvbXBsZXRlKCk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgTW9kYWwucHJvdG90eXBlLl9lbmZvcmNlRm9jdXMgPSBmdW5jdGlvbiBfZW5mb3JjZUZvY3VzKCkge1xuXHQgICAgICB2YXIgX3RoaXM5ID0gdGhpcztcblx0XG5cdCAgICAgICQoZG9jdW1lbnQpLm9mZihFdmVudC5GT0NVU0lOKSAvLyBndWFyZCBhZ2FpbnN0IGluZmluaXRlIGZvY3VzIGxvb3Bcblx0ICAgICAgLm9uKEV2ZW50LkZPQ1VTSU4sIGZ1bmN0aW9uIChldmVudCkge1xuXHQgICAgICAgIGlmIChkb2N1bWVudCAhPT0gZXZlbnQudGFyZ2V0ICYmIF90aGlzOS5fZWxlbWVudCAhPT0gZXZlbnQudGFyZ2V0ICYmICEkKF90aGlzOS5fZWxlbWVudCkuaGFzKGV2ZW50LnRhcmdldCkubGVuZ3RoKSB7XG5cdCAgICAgICAgICBfdGhpczkuX2VsZW1lbnQuZm9jdXMoKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgfTtcblx0XG5cdCAgICBNb2RhbC5wcm90b3R5cGUuX3NldEVzY2FwZUV2ZW50ID0gZnVuY3Rpb24gX3NldEVzY2FwZUV2ZW50KCkge1xuXHQgICAgICB2YXIgX3RoaXMxMCA9IHRoaXM7XG5cdFxuXHQgICAgICBpZiAodGhpcy5faXNTaG93biAmJiB0aGlzLl9jb25maWcua2V5Ym9hcmQpIHtcblx0ICAgICAgICAkKHRoaXMuX2VsZW1lbnQpLm9uKEV2ZW50LktFWURPV05fRElTTUlTUywgZnVuY3Rpb24gKGV2ZW50KSB7XG5cdCAgICAgICAgICBpZiAoZXZlbnQud2hpY2ggPT09IEVTQ0FQRV9LRVlDT0RFKSB7XG5cdCAgICAgICAgICAgIF90aGlzMTAuaGlkZSgpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0pO1xuXHQgICAgICB9IGVsc2UgaWYgKCF0aGlzLl9pc1Nob3duKSB7XG5cdCAgICAgICAgJCh0aGlzLl9lbGVtZW50KS5vZmYoRXZlbnQuS0VZRE9XTl9ESVNNSVNTKTtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0XG5cdCAgICBNb2RhbC5wcm90b3R5cGUuX3NldFJlc2l6ZUV2ZW50ID0gZnVuY3Rpb24gX3NldFJlc2l6ZUV2ZW50KCkge1xuXHQgICAgICBpZiAodGhpcy5faXNTaG93bikge1xuXHQgICAgICAgICQod2luZG93KS5vbihFdmVudC5SRVNJWkUsICQucHJveHkodGhpcy5faGFuZGxlVXBkYXRlLCB0aGlzKSk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgJCh3aW5kb3cpLm9mZihFdmVudC5SRVNJWkUpO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIE1vZGFsLnByb3RvdHlwZS5faGlkZU1vZGFsID0gZnVuY3Rpb24gX2hpZGVNb2RhbCgpIHtcblx0ICAgICAgdmFyIF90aGlzMTEgPSB0aGlzO1xuXHRcblx0ICAgICAgdGhpcy5fZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXHQgICAgICB0aGlzLl9lbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCAndHJ1ZScpO1xuXHQgICAgICB0aGlzLl9zaG93QmFja2Ryb3AoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICQoZG9jdW1lbnQuYm9keSkucmVtb3ZlQ2xhc3MoQ2xhc3NOYW1lLk9QRU4pO1xuXHQgICAgICAgIF90aGlzMTEuX3Jlc2V0QWRqdXN0bWVudHMoKTtcblx0ICAgICAgICBfdGhpczExLl9yZXNldFNjcm9sbGJhcigpO1xuXHQgICAgICAgICQoX3RoaXMxMS5fZWxlbWVudCkudHJpZ2dlcihFdmVudC5ISURERU4pO1xuXHQgICAgICB9KTtcblx0ICAgIH07XG5cdFxuXHQgICAgTW9kYWwucHJvdG90eXBlLl9yZW1vdmVCYWNrZHJvcCA9IGZ1bmN0aW9uIF9yZW1vdmVCYWNrZHJvcCgpIHtcblx0ICAgICAgaWYgKHRoaXMuX2JhY2tkcm9wKSB7XG5cdCAgICAgICAgJCh0aGlzLl9iYWNrZHJvcCkucmVtb3ZlKCk7XG5cdCAgICAgICAgdGhpcy5fYmFja2Ryb3AgPSBudWxsO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIE1vZGFsLnByb3RvdHlwZS5fc2hvd0JhY2tkcm9wID0gZnVuY3Rpb24gX3Nob3dCYWNrZHJvcChjYWxsYmFjaykge1xuXHQgICAgICB2YXIgX3RoaXMxMiA9IHRoaXM7XG5cdFxuXHQgICAgICB2YXIgYW5pbWF0ZSA9ICQodGhpcy5fZWxlbWVudCkuaGFzQ2xhc3MoQ2xhc3NOYW1lLkZBREUpID8gQ2xhc3NOYW1lLkZBREUgOiAnJztcblx0XG5cdCAgICAgIGlmICh0aGlzLl9pc1Nob3duICYmIHRoaXMuX2NvbmZpZy5iYWNrZHJvcCkge1xuXHQgICAgICAgIHZhciBkb0FuaW1hdGUgPSBVdGlsLnN1cHBvcnRzVHJhbnNpdGlvbkVuZCgpICYmIGFuaW1hdGU7XG5cdFxuXHQgICAgICAgIHRoaXMuX2JhY2tkcm9wID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdCAgICAgICAgdGhpcy5fYmFja2Ryb3AuY2xhc3NOYW1lID0gQ2xhc3NOYW1lLkJBQ0tEUk9QO1xuXHRcblx0ICAgICAgICBpZiAoYW5pbWF0ZSkge1xuXHQgICAgICAgICAgJCh0aGlzLl9iYWNrZHJvcCkuYWRkQ2xhc3MoYW5pbWF0ZSk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICAkKHRoaXMuX2JhY2tkcm9wKS5hcHBlbmRUbyhkb2N1bWVudC5ib2R5KTtcblx0XG5cdCAgICAgICAgJCh0aGlzLl9lbGVtZW50KS5vbihFdmVudC5DTElDS19ESVNNSVNTLCBmdW5jdGlvbiAoZXZlbnQpIHtcblx0ICAgICAgICAgIGlmIChfdGhpczEyLl9pZ25vcmVCYWNrZHJvcENsaWNrKSB7XG5cdCAgICAgICAgICAgIF90aGlzMTIuX2lnbm9yZUJhY2tkcm9wQ2xpY2sgPSBmYWxzZTtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgaWYgKGV2ZW50LnRhcmdldCAhPT0gZXZlbnQuY3VycmVudFRhcmdldCkge1xuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICBpZiAoX3RoaXMxMi5fY29uZmlnLmJhY2tkcm9wID09PSAnc3RhdGljJykge1xuXHQgICAgICAgICAgICBfdGhpczEyLl9lbGVtZW50LmZvY3VzKCk7XG5cdCAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBfdGhpczEyLmhpZGUoKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9KTtcblx0XG5cdCAgICAgICAgaWYgKGRvQW5pbWF0ZSkge1xuXHQgICAgICAgICAgVXRpbC5yZWZsb3codGhpcy5fYmFja2Ryb3ApO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgJCh0aGlzLl9iYWNrZHJvcCkuYWRkQ2xhc3MoQ2xhc3NOYW1lLklOKTtcblx0XG5cdCAgICAgICAgaWYgKCFjYWxsYmFjaykge1xuXHQgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgaWYgKCFkb0FuaW1hdGUpIHtcblx0ICAgICAgICAgIGNhbGxiYWNrKCk7XG5cdCAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICAkKHRoaXMuX2JhY2tkcm9wKS5vbmUoVXRpbC5UUkFOU0lUSU9OX0VORCwgY2FsbGJhY2spLmVtdWxhdGVUcmFuc2l0aW9uRW5kKEJBQ0tEUk9QX1RSQU5TSVRJT05fRFVSQVRJT04pO1xuXHQgICAgICB9IGVsc2UgaWYgKCF0aGlzLl9pc1Nob3duICYmIHRoaXMuX2JhY2tkcm9wKSB7XG5cdCAgICAgICAgJCh0aGlzLl9iYWNrZHJvcCkucmVtb3ZlQ2xhc3MoQ2xhc3NOYW1lLklOKTtcblx0XG5cdCAgICAgICAgdmFyIGNhbGxiYWNrUmVtb3ZlID0gZnVuY3Rpb24gY2FsbGJhY2tSZW1vdmUoKSB7XG5cdCAgICAgICAgICBfdGhpczEyLl9yZW1vdmVCYWNrZHJvcCgpO1xuXHQgICAgICAgICAgaWYgKGNhbGxiYWNrKSB7XG5cdCAgICAgICAgICAgIGNhbGxiYWNrKCk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfTtcblx0XG5cdCAgICAgICAgaWYgKFV0aWwuc3VwcG9ydHNUcmFuc2l0aW9uRW5kKCkgJiYgJCh0aGlzLl9lbGVtZW50KS5oYXNDbGFzcyhDbGFzc05hbWUuRkFERSkpIHtcblx0ICAgICAgICAgICQodGhpcy5fYmFja2Ryb3ApLm9uZShVdGlsLlRSQU5TSVRJT05fRU5ELCBjYWxsYmFja1JlbW92ZSkuZW11bGF0ZVRyYW5zaXRpb25FbmQoQkFDS0RST1BfVFJBTlNJVElPTl9EVVJBVElPTik7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIGNhbGxiYWNrUmVtb3ZlKCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGVsc2UgaWYgKGNhbGxiYWNrKSB7XG5cdCAgICAgICAgY2FsbGJhY2soKTtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0XG5cdCAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCAgICAvLyB0aGUgZm9sbG93aW5nIG1ldGhvZHMgYXJlIHVzZWQgdG8gaGFuZGxlIG92ZXJmbG93aW5nIG1vZGFsc1xuXHQgICAgLy8gdG9kbyAoZmF0KTogdGhlc2Ugc2hvdWxkIHByb2JhYmx5IGJlIHJlZmFjdG9yZWQgb3V0IG9mIG1vZGFsLmpzXG5cdCAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdFxuXHQgICAgTW9kYWwucHJvdG90eXBlLl9oYW5kbGVVcGRhdGUgPSBmdW5jdGlvbiBfaGFuZGxlVXBkYXRlKCkge1xuXHQgICAgICB0aGlzLl9hZGp1c3REaWFsb2coKTtcblx0ICAgIH07XG5cdFxuXHQgICAgTW9kYWwucHJvdG90eXBlLl9hZGp1c3REaWFsb2cgPSBmdW5jdGlvbiBfYWRqdXN0RGlhbG9nKCkge1xuXHQgICAgICB2YXIgaXNNb2RhbE92ZXJmbG93aW5nID0gdGhpcy5fZWxlbWVudC5zY3JvbGxIZWlnaHQgPiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0O1xuXHRcblx0ICAgICAgaWYgKCF0aGlzLl9pc0JvZHlPdmVyZmxvd2luZyAmJiBpc01vZGFsT3ZlcmZsb3dpbmcpIHtcblx0ICAgICAgICB0aGlzLl9lbGVtZW50LnN0eWxlLnBhZGRpbmdMZWZ0ID0gdGhpcy5fc2Nyb2xsYmFyV2lkdGggKyAncHgnO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAodGhpcy5faXNCb2R5T3ZlcmZsb3dpbmcgJiYgIWlzTW9kYWxPdmVyZmxvd2luZykge1xuXHQgICAgICAgIHRoaXMuX2VsZW1lbnQuc3R5bGUucGFkZGluZ1JpZ2h0ID0gdGhpcy5fc2Nyb2xsYmFyV2lkdGggKyAncHgnO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIE1vZGFsLnByb3RvdHlwZS5fcmVzZXRBZGp1c3RtZW50cyA9IGZ1bmN0aW9uIF9yZXNldEFkanVzdG1lbnRzKCkge1xuXHQgICAgICB0aGlzLl9lbGVtZW50LnN0eWxlLnBhZGRpbmdMZWZ0ID0gJyc7XG5cdCAgICAgIHRoaXMuX2VsZW1lbnQuc3R5bGUucGFkZGluZ1JpZ2h0ID0gJyc7XG5cdCAgICB9O1xuXHRcblx0ICAgIE1vZGFsLnByb3RvdHlwZS5fY2hlY2tTY3JvbGxiYXIgPSBmdW5jdGlvbiBfY2hlY2tTY3JvbGxiYXIoKSB7XG5cdCAgICAgIHRoaXMuX2lzQm9keU92ZXJmbG93aW5nID0gZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aCA8IHdpbmRvdy5pbm5lcldpZHRoO1xuXHQgICAgICB0aGlzLl9zY3JvbGxiYXJXaWR0aCA9IHRoaXMuX2dldFNjcm9sbGJhcldpZHRoKCk7XG5cdCAgICB9O1xuXHRcblx0ICAgIE1vZGFsLnByb3RvdHlwZS5fc2V0U2Nyb2xsYmFyID0gZnVuY3Rpb24gX3NldFNjcm9sbGJhcigpIHtcblx0ICAgICAgdmFyIGJvZHlQYWRkaW5nID0gcGFyc2VJbnQoJChTZWxlY3Rvci5GSVhFRF9DT05URU5UKS5jc3MoJ3BhZGRpbmctcmlnaHQnKSB8fCAwLCAxMCk7XG5cdFxuXHQgICAgICB0aGlzLl9vcmlnaW5hbEJvZHlQYWRkaW5nID0gZG9jdW1lbnQuYm9keS5zdHlsZS5wYWRkaW5nUmlnaHQgfHwgJyc7XG5cdFxuXHQgICAgICBpZiAodGhpcy5faXNCb2R5T3ZlcmZsb3dpbmcpIHtcblx0ICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLnBhZGRpbmdSaWdodCA9IGJvZHlQYWRkaW5nICsgdGhpcy5fc2Nyb2xsYmFyV2lkdGggKyAncHgnO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIE1vZGFsLnByb3RvdHlwZS5fcmVzZXRTY3JvbGxiYXIgPSBmdW5jdGlvbiBfcmVzZXRTY3JvbGxiYXIoKSB7XG5cdCAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUucGFkZGluZ1JpZ2h0ID0gdGhpcy5fb3JpZ2luYWxCb2R5UGFkZGluZztcblx0ICAgIH07XG5cdFxuXHQgICAgTW9kYWwucHJvdG90eXBlLl9nZXRTY3JvbGxiYXJXaWR0aCA9IGZ1bmN0aW9uIF9nZXRTY3JvbGxiYXJXaWR0aCgpIHtcblx0ICAgICAgLy8gdGh4IGQud2Fsc2hcblx0ICAgICAgdmFyIHNjcm9sbERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHQgICAgICBzY3JvbGxEaXYuY2xhc3NOYW1lID0gQ2xhc3NOYW1lLlNDUk9MTEJBUl9NRUFTVVJFUjtcblx0ICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzY3JvbGxEaXYpO1xuXHQgICAgICB2YXIgc2Nyb2xsYmFyV2lkdGggPSBzY3JvbGxEaXYub2Zmc2V0V2lkdGggLSBzY3JvbGxEaXYuY2xpZW50V2lkdGg7XG5cdCAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoc2Nyb2xsRGl2KTtcblx0ICAgICAgcmV0dXJuIHNjcm9sbGJhcldpZHRoO1xuXHQgICAgfTtcblx0XG5cdCAgICAvLyBzdGF0aWNcblx0XG5cdCAgICBNb2RhbC5falF1ZXJ5SW50ZXJmYWNlID0gZnVuY3Rpb24gX2pRdWVyeUludGVyZmFjZShjb25maWcsIHJlbGF0ZWRUYXJnZXQpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIGRhdGEgPSAkKHRoaXMpLmRhdGEoREFUQV9LRVkpO1xuXHQgICAgICAgIHZhciBfY29uZmlnID0gJC5leHRlbmQoe30sIE1vZGFsLkRlZmF1bHQsICQodGhpcykuZGF0YSgpLCAodHlwZW9mIGNvbmZpZyA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoY29uZmlnKSkgPT09ICdvYmplY3QnICYmIGNvbmZpZyk7XG5cdFxuXHQgICAgICAgIGlmICghZGF0YSkge1xuXHQgICAgICAgICAgZGF0YSA9IG5ldyBNb2RhbCh0aGlzLCBfY29uZmlnKTtcblx0ICAgICAgICAgICQodGhpcykuZGF0YShEQVRBX0tFWSwgZGF0YSk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBpZiAodHlwZW9mIGNvbmZpZyA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgICAgIGlmIChkYXRhW2NvbmZpZ10gPT09IHVuZGVmaW5lZCkge1xuXHQgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIG1ldGhvZCBuYW1lZCBcIicgKyBjb25maWcgKyAnXCInKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIGRhdGFbY29uZmlnXShyZWxhdGVkVGFyZ2V0KTtcblx0ICAgICAgICB9IGVsc2UgaWYgKF9jb25maWcuc2hvdykge1xuXHQgICAgICAgICAgZGF0YS5zaG93KHJlbGF0ZWRUYXJnZXQpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIF9jcmVhdGVDbGFzcyhNb2RhbCwgbnVsbCwgW3tcblx0ICAgICAga2V5OiAnVkVSU0lPTicsXG5cdCAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgICAgIHJldHVybiBWRVJTSU9OO1xuXHQgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgIGtleTogJ0RlZmF1bHQnLFxuXHQgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0ICAgICAgICByZXR1cm4gRGVmYXVsdDtcblx0ICAgICAgfVxuXHQgICAgfV0pO1xuXHRcblx0ICAgIHJldHVybiBNb2RhbDtcblx0ICB9KCk7XG5cdFxuXHQgIC8qKlxuXHQgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQgICAqIERhdGEgQXBpIGltcGxlbWVudGF0aW9uXG5cdCAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCAgICovXG5cdFxuXHQgICQoZG9jdW1lbnQpLm9uKEV2ZW50LkNMSUNLX0RBVEFfQVBJLCBTZWxlY3Rvci5EQVRBX1RPR0dMRSwgZnVuY3Rpb24gKGV2ZW50KSB7XG5cdCAgICB2YXIgX3RoaXMxMyA9IHRoaXM7XG5cdFxuXHQgICAgdmFyIHRhcmdldCA9IHZvaWQgMDtcblx0ICAgIHZhciBzZWxlY3RvciA9IFV0aWwuZ2V0U2VsZWN0b3JGcm9tRWxlbWVudCh0aGlzKTtcblx0XG5cdCAgICBpZiAoc2VsZWN0b3IpIHtcblx0ICAgICAgdGFyZ2V0ID0gJChzZWxlY3RvcilbMF07XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIGNvbmZpZyA9ICQodGFyZ2V0KS5kYXRhKERBVEFfS0VZKSA/ICd0b2dnbGUnIDogJC5leHRlbmQoe30sICQodGFyZ2V0KS5kYXRhKCksICQodGhpcykuZGF0YSgpKTtcblx0XG5cdCAgICBpZiAodGhpcy50YWdOYW1lID09PSAnQScpIHtcblx0ICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgJHRhcmdldCA9ICQodGFyZ2V0KS5vbmUoRXZlbnQuU0hPVywgZnVuY3Rpb24gKHNob3dFdmVudCkge1xuXHQgICAgICBpZiAoc2hvd0V2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpKSB7XG5cdCAgICAgICAgLy8gb25seSByZWdpc3RlciBmb2N1cyByZXN0b3JlciBpZiBtb2RhbCB3aWxsIGFjdHVhbGx5IGdldCBzaG93blxuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgJHRhcmdldC5vbmUoRXZlbnQuSElEREVOLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgaWYgKCQoX3RoaXMxMykuaXMoJzp2aXNpYmxlJykpIHtcblx0ICAgICAgICAgIF90aGlzMTMuZm9jdXMoKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgTW9kYWwuX2pRdWVyeUludGVyZmFjZS5jYWxsKCQodGFyZ2V0KSwgY29uZmlnLCB0aGlzKTtcblx0ICB9KTtcblx0XG5cdCAgLyoqXG5cdCAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCAgICogalF1ZXJ5XG5cdCAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCAgICovXG5cdFxuXHQgICQuZm5bTkFNRV0gPSBNb2RhbC5falF1ZXJ5SW50ZXJmYWNlO1xuXHQgICQuZm5bTkFNRV0uQ29uc3RydWN0b3IgPSBNb2RhbDtcblx0ICAkLmZuW05BTUVdLm5vQ29uZmxpY3QgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAkLmZuW05BTUVdID0gSlFVRVJZX05PX0NPTkZMSUNUO1xuXHQgICAgcmV0dXJuIE1vZGFsLl9qUXVlcnlJbnRlcmZhY2U7XG5cdCAgfTtcblx0XG5cdCAgcmV0dXJuIE1vZGFsO1xuXHR9KGpRdWVyeSk7XG5cdFxuXHQvKipcblx0ICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0ICogQm9vdHN0cmFwICh2NC4wLjAtYWxwaGEuNSk6IHNjcm9sbHNweS5qc1xuXHQgKiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ibG9iL21hc3Rlci9MSUNFTlNFKVxuXHQgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQgKi9cblx0XG5cdHZhciBTY3JvbGxTcHkgPSBmdW5jdGlvbiAoJCkge1xuXHRcblx0ICAvKipcblx0ICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0ICAgKiBDb25zdGFudHNcblx0ICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0ICAgKi9cblx0XG5cdCAgdmFyIE5BTUUgPSAnc2Nyb2xsc3B5Jztcblx0ICB2YXIgVkVSU0lPTiA9ICc0LjAuMC1hbHBoYS41Jztcblx0ICB2YXIgREFUQV9LRVkgPSAnYnMuc2Nyb2xsc3B5Jztcblx0ICB2YXIgRVZFTlRfS0VZID0gJy4nICsgREFUQV9LRVk7XG5cdCAgdmFyIERBVEFfQVBJX0tFWSA9ICcuZGF0YS1hcGknO1xuXHQgIHZhciBKUVVFUllfTk9fQ09ORkxJQ1QgPSAkLmZuW05BTUVdO1xuXHRcblx0ICB2YXIgRGVmYXVsdCA9IHtcblx0ICAgIG9mZnNldDogMTAsXG5cdCAgICBtZXRob2Q6ICdhdXRvJyxcblx0ICAgIHRhcmdldDogJydcblx0ICB9O1xuXHRcblx0ICB2YXIgRGVmYXVsdFR5cGUgPSB7XG5cdCAgICBvZmZzZXQ6ICdudW1iZXInLFxuXHQgICAgbWV0aG9kOiAnc3RyaW5nJyxcblx0ICAgIHRhcmdldDogJyhzdHJpbmd8ZWxlbWVudCknXG5cdCAgfTtcblx0XG5cdCAgdmFyIEV2ZW50ID0ge1xuXHQgICAgQUNUSVZBVEU6ICdhY3RpdmF0ZScgKyBFVkVOVF9LRVksXG5cdCAgICBTQ1JPTEw6ICdzY3JvbGwnICsgRVZFTlRfS0VZLFxuXHQgICAgTE9BRF9EQVRBX0FQSTogJ2xvYWQnICsgRVZFTlRfS0VZICsgREFUQV9BUElfS0VZXG5cdCAgfTtcblx0XG5cdCAgdmFyIENsYXNzTmFtZSA9IHtcblx0ICAgIERST1BET1dOX0lURU06ICdkcm9wZG93bi1pdGVtJyxcblx0ICAgIERST1BET1dOX01FTlU6ICdkcm9wZG93bi1tZW51Jyxcblx0ICAgIE5BVl9MSU5LOiAnbmF2LWxpbmsnLFxuXHQgICAgTkFWOiAnbmF2Jyxcblx0ICAgIEFDVElWRTogJ2FjdGl2ZSdcblx0ICB9O1xuXHRcblx0ICB2YXIgU2VsZWN0b3IgPSB7XG5cdCAgICBEQVRBX1NQWTogJ1tkYXRhLXNweT1cInNjcm9sbFwiXScsXG5cdCAgICBBQ1RJVkU6ICcuYWN0aXZlJyxcblx0ICAgIExJU1RfSVRFTTogJy5saXN0LWl0ZW0nLFxuXHQgICAgTEk6ICdsaScsXG5cdCAgICBMSV9EUk9QRE9XTjogJ2xpLmRyb3Bkb3duJyxcblx0ICAgIE5BVl9MSU5LUzogJy5uYXYtbGluaycsXG5cdCAgICBEUk9QRE9XTjogJy5kcm9wZG93bicsXG5cdCAgICBEUk9QRE9XTl9JVEVNUzogJy5kcm9wZG93bi1pdGVtJyxcblx0ICAgIERST1BET1dOX1RPR0dMRTogJy5kcm9wZG93bi10b2dnbGUnXG5cdCAgfTtcblx0XG5cdCAgdmFyIE9mZnNldE1ldGhvZCA9IHtcblx0ICAgIE9GRlNFVDogJ29mZnNldCcsXG5cdCAgICBQT1NJVElPTjogJ3Bvc2l0aW9uJ1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQgICAqIENsYXNzIERlZmluaXRpb25cblx0ICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0ICAgKi9cblx0XG5cdCAgdmFyIFNjcm9sbFNweSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIFNjcm9sbFNweShlbGVtZW50LCBjb25maWcpIHtcblx0ICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFNjcm9sbFNweSk7XG5cdFxuXHQgICAgICB0aGlzLl9lbGVtZW50ID0gZWxlbWVudDtcblx0ICAgICAgdGhpcy5fc2Nyb2xsRWxlbWVudCA9IGVsZW1lbnQudGFnTmFtZSA9PT0gJ0JPRFknID8gd2luZG93IDogZWxlbWVudDtcblx0ICAgICAgdGhpcy5fY29uZmlnID0gdGhpcy5fZ2V0Q29uZmlnKGNvbmZpZyk7XG5cdCAgICAgIHRoaXMuX3NlbGVjdG9yID0gdGhpcy5fY29uZmlnLnRhcmdldCArICcgJyArIFNlbGVjdG9yLk5BVl9MSU5LUyArICcsJyArICh0aGlzLl9jb25maWcudGFyZ2V0ICsgJyAnICsgU2VsZWN0b3IuRFJPUERPV05fSVRFTVMpO1xuXHQgICAgICB0aGlzLl9vZmZzZXRzID0gW107XG5cdCAgICAgIHRoaXMuX3RhcmdldHMgPSBbXTtcblx0ICAgICAgdGhpcy5fYWN0aXZlVGFyZ2V0ID0gbnVsbDtcblx0ICAgICAgdGhpcy5fc2Nyb2xsSGVpZ2h0ID0gMDtcblx0XG5cdCAgICAgICQodGhpcy5fc2Nyb2xsRWxlbWVudCkub24oRXZlbnQuU0NST0xMLCAkLnByb3h5KHRoaXMuX3Byb2Nlc3MsIHRoaXMpKTtcblx0XG5cdCAgICAgIHRoaXMucmVmcmVzaCgpO1xuXHQgICAgICB0aGlzLl9wcm9jZXNzKCk7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gZ2V0dGVyc1xuXHRcblx0ICAgIC8vIHB1YmxpY1xuXHRcblx0ICAgIFNjcm9sbFNweS5wcm90b3R5cGUucmVmcmVzaCA9IGZ1bmN0aW9uIHJlZnJlc2goKSB7XG5cdCAgICAgIHZhciBfdGhpczE0ID0gdGhpcztcblx0XG5cdCAgICAgIHZhciBhdXRvTWV0aG9kID0gdGhpcy5fc2Nyb2xsRWxlbWVudCAhPT0gdGhpcy5fc2Nyb2xsRWxlbWVudC53aW5kb3cgPyBPZmZzZXRNZXRob2QuUE9TSVRJT04gOiBPZmZzZXRNZXRob2QuT0ZGU0VUO1xuXHRcblx0ICAgICAgdmFyIG9mZnNldE1ldGhvZCA9IHRoaXMuX2NvbmZpZy5tZXRob2QgPT09ICdhdXRvJyA/IGF1dG9NZXRob2QgOiB0aGlzLl9jb25maWcubWV0aG9kO1xuXHRcblx0ICAgICAgdmFyIG9mZnNldEJhc2UgPSBvZmZzZXRNZXRob2QgPT09IE9mZnNldE1ldGhvZC5QT1NJVElPTiA/IHRoaXMuX2dldFNjcm9sbFRvcCgpIDogMDtcblx0XG5cdCAgICAgIHRoaXMuX29mZnNldHMgPSBbXTtcblx0ICAgICAgdGhpcy5fdGFyZ2V0cyA9IFtdO1xuXHRcblx0ICAgICAgdGhpcy5fc2Nyb2xsSGVpZ2h0ID0gdGhpcy5fZ2V0U2Nyb2xsSGVpZ2h0KCk7XG5cdFxuXHQgICAgICB2YXIgdGFyZ2V0cyA9ICQubWFrZUFycmF5KCQodGhpcy5fc2VsZWN0b3IpKTtcblx0XG5cdCAgICAgIHRhcmdldHMubWFwKGZ1bmN0aW9uIChlbGVtZW50KSB7XG5cdCAgICAgICAgdmFyIHRhcmdldCA9IHZvaWQgMDtcblx0ICAgICAgICB2YXIgdGFyZ2V0U2VsZWN0b3IgPSBVdGlsLmdldFNlbGVjdG9yRnJvbUVsZW1lbnQoZWxlbWVudCk7XG5cdFxuXHQgICAgICAgIGlmICh0YXJnZXRTZWxlY3Rvcikge1xuXHQgICAgICAgICAgdGFyZ2V0ID0gJCh0YXJnZXRTZWxlY3RvcilbMF07XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBpZiAodGFyZ2V0ICYmICh0YXJnZXQub2Zmc2V0V2lkdGggfHwgdGFyZ2V0Lm9mZnNldEhlaWdodCkpIHtcblx0ICAgICAgICAgIC8vIHRvZG8gKGZhdCk6IHJlbW92ZSBza2V0Y2ggcmVsaWFuY2Ugb24galF1ZXJ5IHBvc2l0aW9uL29mZnNldFxuXHQgICAgICAgICAgcmV0dXJuIFskKHRhcmdldClbb2Zmc2V0TWV0aG9kXSgpLnRvcCArIG9mZnNldEJhc2UsIHRhcmdldFNlbGVjdG9yXTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgcmV0dXJuIG51bGw7XG5cdCAgICAgIH0pLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgICAgIHJldHVybiBpdGVtO1xuXHQgICAgICB9KS5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG5cdCAgICAgICAgcmV0dXJuIGFbMF0gLSBiWzBdO1xuXHQgICAgICB9KS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgICAgICAgX3RoaXMxNC5fb2Zmc2V0cy5wdXNoKGl0ZW1bMF0pO1xuXHQgICAgICAgIF90aGlzMTQuX3RhcmdldHMucHVzaChpdGVtWzFdKTtcblx0ICAgICAgfSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIFNjcm9sbFNweS5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uIGRpc3Bvc2UoKSB7XG5cdCAgICAgICQucmVtb3ZlRGF0YSh0aGlzLl9lbGVtZW50LCBEQVRBX0tFWSk7XG5cdCAgICAgICQodGhpcy5fc2Nyb2xsRWxlbWVudCkub2ZmKEVWRU5UX0tFWSk7XG5cdFxuXHQgICAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcblx0ICAgICAgdGhpcy5fc2Nyb2xsRWxlbWVudCA9IG51bGw7XG5cdCAgICAgIHRoaXMuX2NvbmZpZyA9IG51bGw7XG5cdCAgICAgIHRoaXMuX3NlbGVjdG9yID0gbnVsbDtcblx0ICAgICAgdGhpcy5fb2Zmc2V0cyA9IG51bGw7XG5cdCAgICAgIHRoaXMuX3RhcmdldHMgPSBudWxsO1xuXHQgICAgICB0aGlzLl9hY3RpdmVUYXJnZXQgPSBudWxsO1xuXHQgICAgICB0aGlzLl9zY3JvbGxIZWlnaHQgPSBudWxsO1xuXHQgICAgfTtcblx0XG5cdCAgICAvLyBwcml2YXRlXG5cdFxuXHQgICAgU2Nyb2xsU3B5LnByb3RvdHlwZS5fZ2V0Q29uZmlnID0gZnVuY3Rpb24gX2dldENvbmZpZyhjb25maWcpIHtcblx0ICAgICAgY29uZmlnID0gJC5leHRlbmQoe30sIERlZmF1bHQsIGNvbmZpZyk7XG5cdFxuXHQgICAgICBpZiAodHlwZW9mIGNvbmZpZy50YXJnZXQgIT09ICdzdHJpbmcnKSB7XG5cdCAgICAgICAgdmFyIGlkID0gJChjb25maWcudGFyZ2V0KS5hdHRyKCdpZCcpO1xuXHQgICAgICAgIGlmICghaWQpIHtcblx0ICAgICAgICAgIGlkID0gVXRpbC5nZXRVSUQoTkFNRSk7XG5cdCAgICAgICAgICAkKGNvbmZpZy50YXJnZXQpLmF0dHIoJ2lkJywgaWQpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBjb25maWcudGFyZ2V0ID0gJyMnICsgaWQ7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIFV0aWwudHlwZUNoZWNrQ29uZmlnKE5BTUUsIGNvbmZpZywgRGVmYXVsdFR5cGUpO1xuXHRcblx0ICAgICAgcmV0dXJuIGNvbmZpZztcblx0ICAgIH07XG5cdFxuXHQgICAgU2Nyb2xsU3B5LnByb3RvdHlwZS5fZ2V0U2Nyb2xsVG9wID0gZnVuY3Rpb24gX2dldFNjcm9sbFRvcCgpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMuX3Njcm9sbEVsZW1lbnQgPT09IHdpbmRvdyA/IHRoaXMuX3Njcm9sbEVsZW1lbnQuc2Nyb2xsWSA6IHRoaXMuX3Njcm9sbEVsZW1lbnQuc2Nyb2xsVG9wO1xuXHQgICAgfTtcblx0XG5cdCAgICBTY3JvbGxTcHkucHJvdG90eXBlLl9nZXRTY3JvbGxIZWlnaHQgPSBmdW5jdGlvbiBfZ2V0U2Nyb2xsSGVpZ2h0KCkge1xuXHQgICAgICByZXR1cm4gdGhpcy5fc2Nyb2xsRWxlbWVudC5zY3JvbGxIZWlnaHQgfHwgTWF0aC5tYXgoZG9jdW1lbnQuYm9keS5zY3JvbGxIZWlnaHQsIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxIZWlnaHQpO1xuXHQgICAgfTtcblx0XG5cdCAgICBTY3JvbGxTcHkucHJvdG90eXBlLl9wcm9jZXNzID0gZnVuY3Rpb24gX3Byb2Nlc3MoKSB7XG5cdCAgICAgIHZhciBzY3JvbGxUb3AgPSB0aGlzLl9nZXRTY3JvbGxUb3AoKSArIHRoaXMuX2NvbmZpZy5vZmZzZXQ7XG5cdCAgICAgIHZhciBzY3JvbGxIZWlnaHQgPSB0aGlzLl9nZXRTY3JvbGxIZWlnaHQoKTtcblx0ICAgICAgdmFyIG1heFNjcm9sbCA9IHRoaXMuX2NvbmZpZy5vZmZzZXQgKyBzY3JvbGxIZWlnaHQgLSB0aGlzLl9zY3JvbGxFbGVtZW50Lm9mZnNldEhlaWdodDtcblx0XG5cdCAgICAgIGlmICh0aGlzLl9zY3JvbGxIZWlnaHQgIT09IHNjcm9sbEhlaWdodCkge1xuXHQgICAgICAgIHRoaXMucmVmcmVzaCgpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAoc2Nyb2xsVG9wID49IG1heFNjcm9sbCkge1xuXHQgICAgICAgIHZhciB0YXJnZXQgPSB0aGlzLl90YXJnZXRzW3RoaXMuX3RhcmdldHMubGVuZ3RoIC0gMV07XG5cdFxuXHQgICAgICAgIGlmICh0aGlzLl9hY3RpdmVUYXJnZXQgIT09IHRhcmdldCkge1xuXHQgICAgICAgICAgdGhpcy5fYWN0aXZhdGUodGFyZ2V0KTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmICh0aGlzLl9hY3RpdmVUYXJnZXQgJiYgc2Nyb2xsVG9wIDwgdGhpcy5fb2Zmc2V0c1swXSkge1xuXHQgICAgICAgIHRoaXMuX2FjdGl2ZVRhcmdldCA9IG51bGw7XG5cdCAgICAgICAgdGhpcy5fY2xlYXIoKTtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGZvciAodmFyIGkgPSB0aGlzLl9vZmZzZXRzLmxlbmd0aDsgaS0tOykge1xuXHQgICAgICAgIHZhciBpc0FjdGl2ZVRhcmdldCA9IHRoaXMuX2FjdGl2ZVRhcmdldCAhPT0gdGhpcy5fdGFyZ2V0c1tpXSAmJiBzY3JvbGxUb3AgPj0gdGhpcy5fb2Zmc2V0c1tpXSAmJiAodGhpcy5fb2Zmc2V0c1tpICsgMV0gPT09IHVuZGVmaW5lZCB8fCBzY3JvbGxUb3AgPCB0aGlzLl9vZmZzZXRzW2kgKyAxXSk7XG5cdFxuXHQgICAgICAgIGlmIChpc0FjdGl2ZVRhcmdldCkge1xuXHQgICAgICAgICAgdGhpcy5fYWN0aXZhdGUodGhpcy5fdGFyZ2V0c1tpXSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIFNjcm9sbFNweS5wcm90b3R5cGUuX2FjdGl2YXRlID0gZnVuY3Rpb24gX2FjdGl2YXRlKHRhcmdldCkge1xuXHQgICAgICB0aGlzLl9hY3RpdmVUYXJnZXQgPSB0YXJnZXQ7XG5cdFxuXHQgICAgICB0aGlzLl9jbGVhcigpO1xuXHRcblx0ICAgICAgdmFyIHF1ZXJpZXMgPSB0aGlzLl9zZWxlY3Rvci5zcGxpdCgnLCcpO1xuXHQgICAgICBxdWVyaWVzID0gcXVlcmllcy5tYXAoZnVuY3Rpb24gKHNlbGVjdG9yKSB7XG5cdCAgICAgICAgcmV0dXJuIHNlbGVjdG9yICsgJ1tkYXRhLXRhcmdldD1cIicgKyB0YXJnZXQgKyAnXCJdLCcgKyAoc2VsZWN0b3IgKyAnW2hyZWY9XCInICsgdGFyZ2V0ICsgJ1wiXScpO1xuXHQgICAgICB9KTtcblx0XG5cdCAgICAgIHZhciAkbGluayA9ICQocXVlcmllcy5qb2luKCcsJykpO1xuXHRcblx0ICAgICAgaWYgKCRsaW5rLmhhc0NsYXNzKENsYXNzTmFtZS5EUk9QRE9XTl9JVEVNKSkge1xuXHQgICAgICAgICRsaW5rLmNsb3Nlc3QoU2VsZWN0b3IuRFJPUERPV04pLmZpbmQoU2VsZWN0b3IuRFJPUERPV05fVE9HR0xFKS5hZGRDbGFzcyhDbGFzc05hbWUuQUNUSVZFKTtcblx0ICAgICAgICAkbGluay5hZGRDbGFzcyhDbGFzc05hbWUuQUNUSVZFKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAvLyB0b2RvIChmYXQpIHRoaXMgaXMga2luZGEgc3VzLi4uXG5cdCAgICAgICAgLy8gcmVjdXJzaXZlbHkgYWRkIGFjdGl2ZXMgdG8gdGVzdGVkIG5hdi1saW5rc1xuXHQgICAgICAgICRsaW5rLnBhcmVudHMoU2VsZWN0b3IuTEkpLmZpbmQoU2VsZWN0b3IuTkFWX0xJTktTKS5hZGRDbGFzcyhDbGFzc05hbWUuQUNUSVZFKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgJCh0aGlzLl9zY3JvbGxFbGVtZW50KS50cmlnZ2VyKEV2ZW50LkFDVElWQVRFLCB7XG5cdCAgICAgICAgcmVsYXRlZFRhcmdldDogdGFyZ2V0XG5cdCAgICAgIH0pO1xuXHQgICAgfTtcblx0XG5cdCAgICBTY3JvbGxTcHkucHJvdG90eXBlLl9jbGVhciA9IGZ1bmN0aW9uIF9jbGVhcigpIHtcblx0ICAgICAgJCh0aGlzLl9zZWxlY3RvcikuZmlsdGVyKFNlbGVjdG9yLkFDVElWRSkucmVtb3ZlQ2xhc3MoQ2xhc3NOYW1lLkFDVElWRSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8vIHN0YXRpY1xuXHRcblx0ICAgIFNjcm9sbFNweS5falF1ZXJ5SW50ZXJmYWNlID0gZnVuY3Rpb24gX2pRdWVyeUludGVyZmFjZShjb25maWcpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIGRhdGEgPSAkKHRoaXMpLmRhdGEoREFUQV9LRVkpO1xuXHQgICAgICAgIHZhciBfY29uZmlnID0gKHR5cGVvZiBjb25maWcgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKGNvbmZpZykpID09PSAnb2JqZWN0JyAmJiBjb25maWcgfHwgbnVsbDtcblx0XG5cdCAgICAgICAgaWYgKCFkYXRhKSB7XG5cdCAgICAgICAgICBkYXRhID0gbmV3IFNjcm9sbFNweSh0aGlzLCBfY29uZmlnKTtcblx0ICAgICAgICAgICQodGhpcykuZGF0YShEQVRBX0tFWSwgZGF0YSk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBpZiAodHlwZW9mIGNvbmZpZyA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgICAgIGlmIChkYXRhW2NvbmZpZ10gPT09IHVuZGVmaW5lZCkge1xuXHQgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIG1ldGhvZCBuYW1lZCBcIicgKyBjb25maWcgKyAnXCInKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIGRhdGFbY29uZmlnXSgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIF9jcmVhdGVDbGFzcyhTY3JvbGxTcHksIG51bGwsIFt7XG5cdCAgICAgIGtleTogJ1ZFUlNJT04nLFxuXHQgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0ICAgICAgICByZXR1cm4gVkVSU0lPTjtcblx0ICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICBrZXk6ICdEZWZhdWx0Jyxcblx0ICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG5cdCAgICAgICAgcmV0dXJuIERlZmF1bHQ7XG5cdCAgICAgIH1cblx0ICAgIH1dKTtcblx0XG5cdCAgICByZXR1cm4gU2Nyb2xsU3B5O1xuXHQgIH0oKTtcblx0XG5cdCAgLyoqXG5cdCAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCAgICogRGF0YSBBcGkgaW1wbGVtZW50YXRpb25cblx0ICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0ICAgKi9cblx0XG5cdCAgJCh3aW5kb3cpLm9uKEV2ZW50LkxPQURfREFUQV9BUEksIGZ1bmN0aW9uICgpIHtcblx0ICAgIHZhciBzY3JvbGxTcHlzID0gJC5tYWtlQXJyYXkoJChTZWxlY3Rvci5EQVRBX1NQWSkpO1xuXHRcblx0ICAgIGZvciAodmFyIGkgPSBzY3JvbGxTcHlzLmxlbmd0aDsgaS0tOykge1xuXHQgICAgICB2YXIgJHNweSA9ICQoc2Nyb2xsU3B5c1tpXSk7XG5cdCAgICAgIFNjcm9sbFNweS5falF1ZXJ5SW50ZXJmYWNlLmNhbGwoJHNweSwgJHNweS5kYXRhKCkpO1xuXHQgICAgfVxuXHQgIH0pO1xuXHRcblx0ICAvKipcblx0ICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0ICAgKiBqUXVlcnlcblx0ICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0ICAgKi9cblx0XG5cdCAgJC5mbltOQU1FXSA9IFNjcm9sbFNweS5falF1ZXJ5SW50ZXJmYWNlO1xuXHQgICQuZm5bTkFNRV0uQ29uc3RydWN0b3IgPSBTY3JvbGxTcHk7XG5cdCAgJC5mbltOQU1FXS5ub0NvbmZsaWN0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgJC5mbltOQU1FXSA9IEpRVUVSWV9OT19DT05GTElDVDtcblx0ICAgIHJldHVybiBTY3JvbGxTcHkuX2pRdWVyeUludGVyZmFjZTtcblx0ICB9O1xuXHRcblx0ICByZXR1cm4gU2Nyb2xsU3B5O1xuXHR9KGpRdWVyeSk7XG5cdFxuXHQvKipcblx0ICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0ICogQm9vdHN0cmFwICh2NC4wLjAtYWxwaGEuNSk6IHRhYi5qc1xuXHQgKiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ibG9iL21hc3Rlci9MSUNFTlNFKVxuXHQgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQgKi9cblx0XG5cdHZhciBUYWIgPSBmdW5jdGlvbiAoJCkge1xuXHRcblx0ICAvKipcblx0ICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0ICAgKiBDb25zdGFudHNcblx0ICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0ICAgKi9cblx0XG5cdCAgdmFyIE5BTUUgPSAndGFiJztcblx0ICB2YXIgVkVSU0lPTiA9ICc0LjAuMC1hbHBoYS41Jztcblx0ICB2YXIgREFUQV9LRVkgPSAnYnMudGFiJztcblx0ICB2YXIgRVZFTlRfS0VZID0gJy4nICsgREFUQV9LRVk7XG5cdCAgdmFyIERBVEFfQVBJX0tFWSA9ICcuZGF0YS1hcGknO1xuXHQgIHZhciBKUVVFUllfTk9fQ09ORkxJQ1QgPSAkLmZuW05BTUVdO1xuXHQgIHZhciBUUkFOU0lUSU9OX0RVUkFUSU9OID0gMTUwO1xuXHRcblx0ICB2YXIgRXZlbnQgPSB7XG5cdCAgICBISURFOiAnaGlkZScgKyBFVkVOVF9LRVksXG5cdCAgICBISURERU46ICdoaWRkZW4nICsgRVZFTlRfS0VZLFxuXHQgICAgU0hPVzogJ3Nob3cnICsgRVZFTlRfS0VZLFxuXHQgICAgU0hPV046ICdzaG93bicgKyBFVkVOVF9LRVksXG5cdCAgICBDTElDS19EQVRBX0FQSTogJ2NsaWNrJyArIEVWRU5UX0tFWSArIERBVEFfQVBJX0tFWVxuXHQgIH07XG5cdFxuXHQgIHZhciBDbGFzc05hbWUgPSB7XG5cdCAgICBEUk9QRE9XTl9NRU5VOiAnZHJvcGRvd24tbWVudScsXG5cdCAgICBBQ1RJVkU6ICdhY3RpdmUnLFxuXHQgICAgRkFERTogJ2ZhZGUnLFxuXHQgICAgSU46ICdpbidcblx0ICB9O1xuXHRcblx0ICB2YXIgU2VsZWN0b3IgPSB7XG5cdCAgICBBOiAnYScsXG5cdCAgICBMSTogJ2xpJyxcblx0ICAgIERST1BET1dOOiAnLmRyb3Bkb3duJyxcblx0ICAgIFVMOiAndWw6bm90KC5kcm9wZG93bi1tZW51KScsXG5cdCAgICBGQURFX0NISUxEOiAnPiAubmF2LWl0ZW0gLmZhZGUsID4gLmZhZGUnLFxuXHQgICAgQUNUSVZFOiAnLmFjdGl2ZScsXG5cdCAgICBBQ1RJVkVfQ0hJTEQ6ICc+IC5uYXYtaXRlbSA+IC5hY3RpdmUsID4gLmFjdGl2ZScsXG5cdCAgICBEQVRBX1RPR0dMRTogJ1tkYXRhLXRvZ2dsZT1cInRhYlwiXSwgW2RhdGEtdG9nZ2xlPVwicGlsbFwiXScsXG5cdCAgICBEUk9QRE9XTl9UT0dHTEU6ICcuZHJvcGRvd24tdG9nZ2xlJyxcblx0ICAgIERST1BET1dOX0FDVElWRV9DSElMRDogJz4gLmRyb3Bkb3duLW1lbnUgLmFjdGl2ZSdcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0ICAgKiBDbGFzcyBEZWZpbml0aW9uXG5cdCAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCAgICovXG5cdFxuXHQgIHZhciBUYWIgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBUYWIoZWxlbWVudCkge1xuXHQgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVGFiKTtcblx0XG5cdCAgICAgIHRoaXMuX2VsZW1lbnQgPSBlbGVtZW50O1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIGdldHRlcnNcblx0XG5cdCAgICAvLyBwdWJsaWNcblx0XG5cdCAgICBUYWIucHJvdG90eXBlLnNob3cgPSBmdW5jdGlvbiBzaG93KCkge1xuXHQgICAgICB2YXIgX3RoaXMxNSA9IHRoaXM7XG5cdFxuXHQgICAgICBpZiAodGhpcy5fZWxlbWVudC5wYXJlbnROb2RlICYmIHRoaXMuX2VsZW1lbnQucGFyZW50Tm9kZS5ub2RlVHlwZSA9PT0gTm9kZS5FTEVNRU5UX05PREUgJiYgJCh0aGlzLl9lbGVtZW50KS5oYXNDbGFzcyhDbGFzc05hbWUuQUNUSVZFKSkge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdmFyIHRhcmdldCA9IHZvaWQgMDtcblx0ICAgICAgdmFyIHByZXZpb3VzID0gdm9pZCAwO1xuXHQgICAgICB2YXIgdWxFbGVtZW50ID0gJCh0aGlzLl9lbGVtZW50KS5jbG9zZXN0KFNlbGVjdG9yLlVMKVswXTtcblx0ICAgICAgdmFyIHNlbGVjdG9yID0gVXRpbC5nZXRTZWxlY3RvckZyb21FbGVtZW50KHRoaXMuX2VsZW1lbnQpO1xuXHRcblx0ICAgICAgaWYgKHVsRWxlbWVudCkge1xuXHQgICAgICAgIHByZXZpb3VzID0gJC5tYWtlQXJyYXkoJCh1bEVsZW1lbnQpLmZpbmQoU2VsZWN0b3IuQUNUSVZFKSk7XG5cdCAgICAgICAgcHJldmlvdXMgPSBwcmV2aW91c1twcmV2aW91cy5sZW5ndGggLSAxXTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdmFyIGhpZGVFdmVudCA9ICQuRXZlbnQoRXZlbnQuSElERSwge1xuXHQgICAgICAgIHJlbGF0ZWRUYXJnZXQ6IHRoaXMuX2VsZW1lbnRcblx0ICAgICAgfSk7XG5cdFxuXHQgICAgICB2YXIgc2hvd0V2ZW50ID0gJC5FdmVudChFdmVudC5TSE9XLCB7XG5cdCAgICAgICAgcmVsYXRlZFRhcmdldDogcHJldmlvdXNcblx0ICAgICAgfSk7XG5cdFxuXHQgICAgICBpZiAocHJldmlvdXMpIHtcblx0ICAgICAgICAkKHByZXZpb3VzKS50cmlnZ2VyKGhpZGVFdmVudCk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgICQodGhpcy5fZWxlbWVudCkudHJpZ2dlcihzaG93RXZlbnQpO1xuXHRcblx0ICAgICAgaWYgKHNob3dFdmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSB8fCBoaWRlRXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmIChzZWxlY3Rvcikge1xuXHQgICAgICAgIHRhcmdldCA9ICQoc2VsZWN0b3IpWzBdO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICB0aGlzLl9hY3RpdmF0ZSh0aGlzLl9lbGVtZW50LCB1bEVsZW1lbnQpO1xuXHRcblx0ICAgICAgdmFyIGNvbXBsZXRlID0gZnVuY3Rpb24gY29tcGxldGUoKSB7XG5cdCAgICAgICAgdmFyIGhpZGRlbkV2ZW50ID0gJC5FdmVudChFdmVudC5ISURERU4sIHtcblx0ICAgICAgICAgIHJlbGF0ZWRUYXJnZXQ6IF90aGlzMTUuX2VsZW1lbnRcblx0ICAgICAgICB9KTtcblx0XG5cdCAgICAgICAgdmFyIHNob3duRXZlbnQgPSAkLkV2ZW50KEV2ZW50LlNIT1dOLCB7XG5cdCAgICAgICAgICByZWxhdGVkVGFyZ2V0OiBwcmV2aW91c1xuXHQgICAgICAgIH0pO1xuXHRcblx0ICAgICAgICAkKHByZXZpb3VzKS50cmlnZ2VyKGhpZGRlbkV2ZW50KTtcblx0ICAgICAgICAkKF90aGlzMTUuX2VsZW1lbnQpLnRyaWdnZXIoc2hvd25FdmVudCk7XG5cdCAgICAgIH07XG5cdFxuXHQgICAgICBpZiAodGFyZ2V0KSB7XG5cdCAgICAgICAgdGhpcy5fYWN0aXZhdGUodGFyZ2V0LCB0YXJnZXQucGFyZW50Tm9kZSwgY29tcGxldGUpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIGNvbXBsZXRlKCk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgVGFiLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gZGlzcG9zZSgpIHtcblx0ICAgICAgJC5yZW1vdmVDbGFzcyh0aGlzLl9lbGVtZW50LCBEQVRBX0tFWSk7XG5cdCAgICAgIHRoaXMuX2VsZW1lbnQgPSBudWxsO1xuXHQgICAgfTtcblx0XG5cdCAgICAvLyBwcml2YXRlXG5cdFxuXHQgICAgVGFiLnByb3RvdHlwZS5fYWN0aXZhdGUgPSBmdW5jdGlvbiBfYWN0aXZhdGUoZWxlbWVudCwgY29udGFpbmVyLCBjYWxsYmFjaykge1xuXHQgICAgICB2YXIgYWN0aXZlID0gJChjb250YWluZXIpLmZpbmQoU2VsZWN0b3IuQUNUSVZFX0NISUxEKVswXTtcblx0ICAgICAgdmFyIGlzVHJhbnNpdGlvbmluZyA9IGNhbGxiYWNrICYmIFV0aWwuc3VwcG9ydHNUcmFuc2l0aW9uRW5kKCkgJiYgKGFjdGl2ZSAmJiAkKGFjdGl2ZSkuaGFzQ2xhc3MoQ2xhc3NOYW1lLkZBREUpIHx8IEJvb2xlYW4oJChjb250YWluZXIpLmZpbmQoU2VsZWN0b3IuRkFERV9DSElMRClbMF0pKTtcblx0XG5cdCAgICAgIHZhciBjb21wbGV0ZSA9ICQucHJveHkodGhpcy5fdHJhbnNpdGlvbkNvbXBsZXRlLCB0aGlzLCBlbGVtZW50LCBhY3RpdmUsIGlzVHJhbnNpdGlvbmluZywgY2FsbGJhY2spO1xuXHRcblx0ICAgICAgaWYgKGFjdGl2ZSAmJiBpc1RyYW5zaXRpb25pbmcpIHtcblx0ICAgICAgICAkKGFjdGl2ZSkub25lKFV0aWwuVFJBTlNJVElPTl9FTkQsIGNvbXBsZXRlKS5lbXVsYXRlVHJhbnNpdGlvbkVuZChUUkFOU0lUSU9OX0RVUkFUSU9OKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBjb21wbGV0ZSgpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAoYWN0aXZlKSB7XG5cdCAgICAgICAgJChhY3RpdmUpLnJlbW92ZUNsYXNzKENsYXNzTmFtZS5JTik7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgVGFiLnByb3RvdHlwZS5fdHJhbnNpdGlvbkNvbXBsZXRlID0gZnVuY3Rpb24gX3RyYW5zaXRpb25Db21wbGV0ZShlbGVtZW50LCBhY3RpdmUsIGlzVHJhbnNpdGlvbmluZywgY2FsbGJhY2spIHtcblx0ICAgICAgaWYgKGFjdGl2ZSkge1xuXHQgICAgICAgICQoYWN0aXZlKS5yZW1vdmVDbGFzcyhDbGFzc05hbWUuQUNUSVZFKTtcblx0XG5cdCAgICAgICAgdmFyIGRyb3Bkb3duQ2hpbGQgPSAkKGFjdGl2ZSkuZmluZChTZWxlY3Rvci5EUk9QRE9XTl9BQ1RJVkVfQ0hJTEQpWzBdO1xuXHRcblx0ICAgICAgICBpZiAoZHJvcGRvd25DaGlsZCkge1xuXHQgICAgICAgICAgJChkcm9wZG93bkNoaWxkKS5yZW1vdmVDbGFzcyhDbGFzc05hbWUuQUNUSVZFKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGFjdGl2ZS5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLCBmYWxzZSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgICQoZWxlbWVudCkuYWRkQ2xhc3MoQ2xhc3NOYW1lLkFDVElWRSk7XG5cdCAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgdHJ1ZSk7XG5cdFxuXHQgICAgICBpZiAoaXNUcmFuc2l0aW9uaW5nKSB7XG5cdCAgICAgICAgVXRpbC5yZWZsb3coZWxlbWVudCk7XG5cdCAgICAgICAgJChlbGVtZW50KS5hZGRDbGFzcyhDbGFzc05hbWUuSU4pO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICQoZWxlbWVudCkucmVtb3ZlQ2xhc3MoQ2xhc3NOYW1lLkZBREUpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAoZWxlbWVudC5wYXJlbnROb2RlICYmICQoZWxlbWVudC5wYXJlbnROb2RlKS5oYXNDbGFzcyhDbGFzc05hbWUuRFJPUERPV05fTUVOVSkpIHtcblx0XG5cdCAgICAgICAgdmFyIGRyb3Bkb3duRWxlbWVudCA9ICQoZWxlbWVudCkuY2xvc2VzdChTZWxlY3Rvci5EUk9QRE9XTilbMF07XG5cdCAgICAgICAgaWYgKGRyb3Bkb3duRWxlbWVudCkge1xuXHQgICAgICAgICAgJChkcm9wZG93bkVsZW1lbnQpLmZpbmQoU2VsZWN0b3IuRFJPUERPV05fVE9HR0xFKS5hZGRDbGFzcyhDbGFzc05hbWUuQUNUSVZFKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgdHJ1ZSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmIChjYWxsYmFjaykge1xuXHQgICAgICAgIGNhbGxiYWNrKCk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgLy8gc3RhdGljXG5cdFxuXHQgICAgVGFiLl9qUXVlcnlJbnRlcmZhY2UgPSBmdW5jdGlvbiBfalF1ZXJ5SW50ZXJmYWNlKGNvbmZpZykge1xuXHQgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpO1xuXHQgICAgICAgIHZhciBkYXRhID0gJHRoaXMuZGF0YShEQVRBX0tFWSk7XG5cdFxuXHQgICAgICAgIGlmICghZGF0YSkge1xuXHQgICAgICAgICAgZGF0YSA9IGRhdGEgPSBuZXcgVGFiKHRoaXMpO1xuXHQgICAgICAgICAgJHRoaXMuZGF0YShEQVRBX0tFWSwgZGF0YSk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBpZiAodHlwZW9mIGNvbmZpZyA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgICAgIGlmIChkYXRhW2NvbmZpZ10gPT09IHVuZGVmaW5lZCkge1xuXHQgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIG1ldGhvZCBuYW1lZCBcIicgKyBjb25maWcgKyAnXCInKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIGRhdGFbY29uZmlnXSgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIF9jcmVhdGVDbGFzcyhUYWIsIG51bGwsIFt7XG5cdCAgICAgIGtleTogJ1ZFUlNJT04nLFxuXHQgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0ICAgICAgICByZXR1cm4gVkVSU0lPTjtcblx0ICAgICAgfVxuXHQgICAgfV0pO1xuXHRcblx0ICAgIHJldHVybiBUYWI7XG5cdCAgfSgpO1xuXHRcblx0ICAvKipcblx0ICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0ICAgKiBEYXRhIEFwaSBpbXBsZW1lbnRhdGlvblxuXHQgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQgICAqL1xuXHRcblx0ICAkKGRvY3VtZW50KS5vbihFdmVudC5DTElDS19EQVRBX0FQSSwgU2VsZWN0b3IuREFUQV9UT0dHTEUsIGZ1bmN0aW9uIChldmVudCkge1xuXHQgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0ICAgIFRhYi5falF1ZXJ5SW50ZXJmYWNlLmNhbGwoJCh0aGlzKSwgJ3Nob3cnKTtcblx0ICB9KTtcblx0XG5cdCAgLyoqXG5cdCAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCAgICogalF1ZXJ5XG5cdCAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCAgICovXG5cdFxuXHQgICQuZm5bTkFNRV0gPSBUYWIuX2pRdWVyeUludGVyZmFjZTtcblx0ICAkLmZuW05BTUVdLkNvbnN0cnVjdG9yID0gVGFiO1xuXHQgICQuZm5bTkFNRV0ubm9Db25mbGljdCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICQuZm5bTkFNRV0gPSBKUVVFUllfTk9fQ09ORkxJQ1Q7XG5cdCAgICByZXR1cm4gVGFiLl9qUXVlcnlJbnRlcmZhY2U7XG5cdCAgfTtcblx0XG5cdCAgcmV0dXJuIFRhYjtcblx0fShqUXVlcnkpO1xuXHRcblx0LyogZ2xvYmFsIFRldGhlciAqL1xuXHRcblx0LyoqXG5cdCAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCAqIEJvb3RzdHJhcCAodjQuMC4wLWFscGhhLjUpOiB0b29sdGlwLmpzXG5cdCAqIExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2Jsb2IvbWFzdGVyL0xJQ0VOU0UpXG5cdCAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCAqL1xuXHRcblx0dmFyIFRvb2x0aXAgPSBmdW5jdGlvbiAoJCkge1xuXHRcblx0ICAvKipcblx0ICAgKiBDaGVjayBmb3IgVGV0aGVyIGRlcGVuZGVuY3lcblx0ICAgKiBUZXRoZXIgLSBodHRwOi8vdGV0aGVyLmlvL1xuXHQgICAqL1xuXHQgIGlmICh3aW5kb3cuVGV0aGVyID09PSB1bmRlZmluZWQpIHtcblx0ICAgIHRocm93IG5ldyBFcnJvcignQm9vdHN0cmFwIHRvb2x0aXBzIHJlcXVpcmUgVGV0aGVyIChodHRwOi8vdGV0aGVyLmlvLyknKTtcblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQgICAqIENvbnN0YW50c1xuXHQgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQgICAqL1xuXHRcblx0ICB2YXIgTkFNRSA9ICd0b29sdGlwJztcblx0ICB2YXIgVkVSU0lPTiA9ICc0LjAuMC1hbHBoYS41Jztcblx0ICB2YXIgREFUQV9LRVkgPSAnYnMudG9vbHRpcCc7XG5cdCAgdmFyIEVWRU5UX0tFWSA9ICcuJyArIERBVEFfS0VZO1xuXHQgIHZhciBKUVVFUllfTk9fQ09ORkxJQ1QgPSAkLmZuW05BTUVdO1xuXHQgIHZhciBUUkFOU0lUSU9OX0RVUkFUSU9OID0gMTUwO1xuXHQgIHZhciBDTEFTU19QUkVGSVggPSAnYnMtdGV0aGVyJztcblx0XG5cdCAgdmFyIERlZmF1bHQgPSB7XG5cdCAgICBhbmltYXRpb246IHRydWUsXG5cdCAgICB0ZW1wbGF0ZTogJzxkaXYgY2xhc3M9XCJ0b29sdGlwXCIgcm9sZT1cInRvb2x0aXBcIj4nICsgJzxkaXYgY2xhc3M9XCJ0b29sdGlwLWlubmVyXCI+PC9kaXY+PC9kaXY+Jyxcblx0ICAgIHRyaWdnZXI6ICdob3ZlciBmb2N1cycsXG5cdCAgICB0aXRsZTogJycsXG5cdCAgICBkZWxheTogMCxcblx0ICAgIGh0bWw6IGZhbHNlLFxuXHQgICAgc2VsZWN0b3I6IGZhbHNlLFxuXHQgICAgcGxhY2VtZW50OiAndG9wJyxcblx0ICAgIG9mZnNldDogJzAgMCcsXG5cdCAgICBjb25zdHJhaW50czogW11cblx0ICB9O1xuXHRcblx0ICB2YXIgRGVmYXVsdFR5cGUgPSB7XG5cdCAgICBhbmltYXRpb246ICdib29sZWFuJyxcblx0ICAgIHRlbXBsYXRlOiAnc3RyaW5nJyxcblx0ICAgIHRpdGxlOiAnKHN0cmluZ3xlbGVtZW50fGZ1bmN0aW9uKScsXG5cdCAgICB0cmlnZ2VyOiAnc3RyaW5nJyxcblx0ICAgIGRlbGF5OiAnKG51bWJlcnxvYmplY3QpJyxcblx0ICAgIGh0bWw6ICdib29sZWFuJyxcblx0ICAgIHNlbGVjdG9yOiAnKHN0cmluZ3xib29sZWFuKScsXG5cdCAgICBwbGFjZW1lbnQ6ICcoc3RyaW5nfGZ1bmN0aW9uKScsXG5cdCAgICBvZmZzZXQ6ICdzdHJpbmcnLFxuXHQgICAgY29uc3RyYWludHM6ICdhcnJheSdcblx0ICB9O1xuXHRcblx0ICB2YXIgQXR0YWNobWVudE1hcCA9IHtcblx0ICAgIFRPUDogJ2JvdHRvbSBjZW50ZXInLFxuXHQgICAgUklHSFQ6ICdtaWRkbGUgbGVmdCcsXG5cdCAgICBCT1RUT006ICd0b3AgY2VudGVyJyxcblx0ICAgIExFRlQ6ICdtaWRkbGUgcmlnaHQnXG5cdCAgfTtcblx0XG5cdCAgdmFyIEhvdmVyU3RhdGUgPSB7XG5cdCAgICBJTjogJ2luJyxcblx0ICAgIE9VVDogJ291dCdcblx0ICB9O1xuXHRcblx0ICB2YXIgRXZlbnQgPSB7XG5cdCAgICBISURFOiAnaGlkZScgKyBFVkVOVF9LRVksXG5cdCAgICBISURERU46ICdoaWRkZW4nICsgRVZFTlRfS0VZLFxuXHQgICAgU0hPVzogJ3Nob3cnICsgRVZFTlRfS0VZLFxuXHQgICAgU0hPV046ICdzaG93bicgKyBFVkVOVF9LRVksXG5cdCAgICBJTlNFUlRFRDogJ2luc2VydGVkJyArIEVWRU5UX0tFWSxcblx0ICAgIENMSUNLOiAnY2xpY2snICsgRVZFTlRfS0VZLFxuXHQgICAgRk9DVVNJTjogJ2ZvY3VzaW4nICsgRVZFTlRfS0VZLFxuXHQgICAgRk9DVVNPVVQ6ICdmb2N1c291dCcgKyBFVkVOVF9LRVksXG5cdCAgICBNT1VTRUVOVEVSOiAnbW91c2VlbnRlcicgKyBFVkVOVF9LRVksXG5cdCAgICBNT1VTRUxFQVZFOiAnbW91c2VsZWF2ZScgKyBFVkVOVF9LRVlcblx0ICB9O1xuXHRcblx0ICB2YXIgQ2xhc3NOYW1lID0ge1xuXHQgICAgRkFERTogJ2ZhZGUnLFxuXHQgICAgSU46ICdpbidcblx0ICB9O1xuXHRcblx0ICB2YXIgU2VsZWN0b3IgPSB7XG5cdCAgICBUT09MVElQOiAnLnRvb2x0aXAnLFxuXHQgICAgVE9PTFRJUF9JTk5FUjogJy50b29sdGlwLWlubmVyJ1xuXHQgIH07XG5cdFxuXHQgIHZhciBUZXRoZXJDbGFzcyA9IHtcblx0ICAgIGVsZW1lbnQ6IGZhbHNlLFxuXHQgICAgZW5hYmxlZDogZmFsc2Vcblx0ICB9O1xuXHRcblx0ICB2YXIgVHJpZ2dlciA9IHtcblx0ICAgIEhPVkVSOiAnaG92ZXInLFxuXHQgICAgRk9DVVM6ICdmb2N1cycsXG5cdCAgICBDTElDSzogJ2NsaWNrJyxcblx0ICAgIE1BTlVBTDogJ21hbnVhbCdcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0ICAgKiBDbGFzcyBEZWZpbml0aW9uXG5cdCAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCAgICovXG5cdFxuXHQgIHZhciBUb29sdGlwID0gZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gVG9vbHRpcChlbGVtZW50LCBjb25maWcpIHtcblx0ICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFRvb2x0aXApO1xuXHRcblx0ICAgICAgLy8gcHJpdmF0ZVxuXHQgICAgICB0aGlzLl9pc0VuYWJsZWQgPSB0cnVlO1xuXHQgICAgICB0aGlzLl90aW1lb3V0ID0gMDtcblx0ICAgICAgdGhpcy5faG92ZXJTdGF0ZSA9ICcnO1xuXHQgICAgICB0aGlzLl9hY3RpdmVUcmlnZ2VyID0ge307XG5cdCAgICAgIHRoaXMuX3RldGhlciA9IG51bGw7XG5cdFxuXHQgICAgICAvLyBwcm90ZWN0ZWRcblx0ICAgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcblx0ICAgICAgdGhpcy5jb25maWcgPSB0aGlzLl9nZXRDb25maWcoY29uZmlnKTtcblx0ICAgICAgdGhpcy50aXAgPSBudWxsO1xuXHRcblx0ICAgICAgdGhpcy5fc2V0TGlzdGVuZXJzKCk7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gZ2V0dGVyc1xuXHRcblx0ICAgIC8vIHB1YmxpY1xuXHRcblx0ICAgIFRvb2x0aXAucHJvdG90eXBlLmVuYWJsZSA9IGZ1bmN0aW9uIGVuYWJsZSgpIHtcblx0ICAgICAgdGhpcy5faXNFbmFibGVkID0gdHJ1ZTtcblx0ICAgIH07XG5cdFxuXHQgICAgVG9vbHRpcC5wcm90b3R5cGUuZGlzYWJsZSA9IGZ1bmN0aW9uIGRpc2FibGUoKSB7XG5cdCAgICAgIHRoaXMuX2lzRW5hYmxlZCA9IGZhbHNlO1xuXHQgICAgfTtcblx0XG5cdCAgICBUb29sdGlwLnByb3RvdHlwZS50b2dnbGVFbmFibGVkID0gZnVuY3Rpb24gdG9nZ2xlRW5hYmxlZCgpIHtcblx0ICAgICAgdGhpcy5faXNFbmFibGVkID0gIXRoaXMuX2lzRW5hYmxlZDtcblx0ICAgIH07XG5cdFxuXHQgICAgVG9vbHRpcC5wcm90b3R5cGUudG9nZ2xlID0gZnVuY3Rpb24gdG9nZ2xlKGV2ZW50KSB7XG5cdCAgICAgIGlmIChldmVudCkge1xuXHQgICAgICAgIHZhciBkYXRhS2V5ID0gdGhpcy5jb25zdHJ1Y3Rvci5EQVRBX0tFWTtcblx0ICAgICAgICB2YXIgY29udGV4dCA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkuZGF0YShkYXRhS2V5KTtcblx0XG5cdCAgICAgICAgaWYgKCFjb250ZXh0KSB7XG5cdCAgICAgICAgICBjb250ZXh0ID0gbmV3IHRoaXMuY29uc3RydWN0b3IoZXZlbnQuY3VycmVudFRhcmdldCwgdGhpcy5fZ2V0RGVsZWdhdGVDb25maWcoKSk7XG5cdCAgICAgICAgICAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLmRhdGEoZGF0YUtleSwgY29udGV4dCk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBjb250ZXh0Ll9hY3RpdmVUcmlnZ2VyLmNsaWNrID0gIWNvbnRleHQuX2FjdGl2ZVRyaWdnZXIuY2xpY2s7XG5cdFxuXHQgICAgICAgIGlmIChjb250ZXh0Ll9pc1dpdGhBY3RpdmVUcmlnZ2VyKCkpIHtcblx0ICAgICAgICAgIGNvbnRleHQuX2VudGVyKG51bGwsIGNvbnRleHQpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBjb250ZXh0Ll9sZWF2ZShudWxsLCBjb250ZXh0KTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0gZWxzZSB7XG5cdFxuXHQgICAgICAgIGlmICgkKHRoaXMuZ2V0VGlwRWxlbWVudCgpKS5oYXNDbGFzcyhDbGFzc05hbWUuSU4pKSB7XG5cdCAgICAgICAgICB0aGlzLl9sZWF2ZShudWxsLCB0aGlzKTtcblx0ICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHRoaXMuX2VudGVyKG51bGwsIHRoaXMpO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIFRvb2x0aXAucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiBkaXNwb3NlKCkge1xuXHQgICAgICBjbGVhclRpbWVvdXQodGhpcy5fdGltZW91dCk7XG5cdFxuXHQgICAgICB0aGlzLmNsZWFudXBUZXRoZXIoKTtcblx0XG5cdCAgICAgICQucmVtb3ZlRGF0YSh0aGlzLmVsZW1lbnQsIHRoaXMuY29uc3RydWN0b3IuREFUQV9LRVkpO1xuXHRcblx0ICAgICAgJCh0aGlzLmVsZW1lbnQpLm9mZih0aGlzLmNvbnN0cnVjdG9yLkVWRU5UX0tFWSk7XG5cdFxuXHQgICAgICBpZiAodGhpcy50aXApIHtcblx0ICAgICAgICAkKHRoaXMudGlwKS5yZW1vdmUoKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdGhpcy5faXNFbmFibGVkID0gbnVsbDtcblx0ICAgICAgdGhpcy5fdGltZW91dCA9IG51bGw7XG5cdCAgICAgIHRoaXMuX2hvdmVyU3RhdGUgPSBudWxsO1xuXHQgICAgICB0aGlzLl9hY3RpdmVUcmlnZ2VyID0gbnVsbDtcblx0ICAgICAgdGhpcy5fdGV0aGVyID0gbnVsbDtcblx0XG5cdCAgICAgIHRoaXMuZWxlbWVudCA9IG51bGw7XG5cdCAgICAgIHRoaXMuY29uZmlnID0gbnVsbDtcblx0ICAgICAgdGhpcy50aXAgPSBudWxsO1xuXHQgICAgfTtcblx0XG5cdCAgICBUb29sdGlwLnByb3RvdHlwZS5zaG93ID0gZnVuY3Rpb24gc2hvdygpIHtcblx0ICAgICAgdmFyIF90aGlzMTYgPSB0aGlzO1xuXHRcblx0ICAgICAgdmFyIHNob3dFdmVudCA9ICQuRXZlbnQodGhpcy5jb25zdHJ1Y3Rvci5FdmVudC5TSE9XKTtcblx0XG5cdCAgICAgIGlmICh0aGlzLmlzV2l0aENvbnRlbnQoKSAmJiB0aGlzLl9pc0VuYWJsZWQpIHtcblx0ICAgICAgICAkKHRoaXMuZWxlbWVudCkudHJpZ2dlcihzaG93RXZlbnQpO1xuXHRcblx0ICAgICAgICB2YXIgaXNJblRoZURvbSA9ICQuY29udGFpbnModGhpcy5lbGVtZW50Lm93bmVyRG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LCB0aGlzLmVsZW1lbnQpO1xuXHRcblx0ICAgICAgICBpZiAoc2hvd0V2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpIHx8ICFpc0luVGhlRG9tKSB7XG5cdCAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICB2YXIgdGlwID0gdGhpcy5nZXRUaXBFbGVtZW50KCk7XG5cdCAgICAgICAgdmFyIHRpcElkID0gVXRpbC5nZXRVSUQodGhpcy5jb25zdHJ1Y3Rvci5OQU1FKTtcblx0XG5cdCAgICAgICAgdGlwLnNldEF0dHJpYnV0ZSgnaWQnLCB0aXBJZCk7XG5cdCAgICAgICAgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1kZXNjcmliZWRieScsIHRpcElkKTtcblx0XG5cdCAgICAgICAgdGhpcy5zZXRDb250ZW50KCk7XG5cdFxuXHQgICAgICAgIGlmICh0aGlzLmNvbmZpZy5hbmltYXRpb24pIHtcblx0ICAgICAgICAgICQodGlwKS5hZGRDbGFzcyhDbGFzc05hbWUuRkFERSk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICB2YXIgcGxhY2VtZW50ID0gdHlwZW9mIHRoaXMuY29uZmlnLnBsYWNlbWVudCA9PT0gJ2Z1bmN0aW9uJyA/IHRoaXMuY29uZmlnLnBsYWNlbWVudC5jYWxsKHRoaXMsIHRpcCwgdGhpcy5lbGVtZW50KSA6IHRoaXMuY29uZmlnLnBsYWNlbWVudDtcblx0XG5cdCAgICAgICAgdmFyIGF0dGFjaG1lbnQgPSB0aGlzLl9nZXRBdHRhY2htZW50KHBsYWNlbWVudCk7XG5cdFxuXHQgICAgICAgICQodGlwKS5kYXRhKHRoaXMuY29uc3RydWN0b3IuREFUQV9LRVksIHRoaXMpLmFwcGVuZFRvKGRvY3VtZW50LmJvZHkpO1xuXHRcblx0ICAgICAgICAkKHRoaXMuZWxlbWVudCkudHJpZ2dlcih0aGlzLmNvbnN0cnVjdG9yLkV2ZW50LklOU0VSVEVEKTtcblx0XG5cdCAgICAgICAgdGhpcy5fdGV0aGVyID0gbmV3IFRldGhlcih7XG5cdCAgICAgICAgICBhdHRhY2htZW50OiBhdHRhY2htZW50LFxuXHQgICAgICAgICAgZWxlbWVudDogdGlwLFxuXHQgICAgICAgICAgdGFyZ2V0OiB0aGlzLmVsZW1lbnQsXG5cdCAgICAgICAgICBjbGFzc2VzOiBUZXRoZXJDbGFzcyxcblx0ICAgICAgICAgIGNsYXNzUHJlZml4OiBDTEFTU19QUkVGSVgsXG5cdCAgICAgICAgICBvZmZzZXQ6IHRoaXMuY29uZmlnLm9mZnNldCxcblx0ICAgICAgICAgIGNvbnN0cmFpbnRzOiB0aGlzLmNvbmZpZy5jb25zdHJhaW50cyxcblx0ICAgICAgICAgIGFkZFRhcmdldENsYXNzZXM6IGZhbHNlXG5cdCAgICAgICAgfSk7XG5cdFxuXHQgICAgICAgIFV0aWwucmVmbG93KHRpcCk7XG5cdCAgICAgICAgdGhpcy5fdGV0aGVyLnBvc2l0aW9uKCk7XG5cdFxuXHQgICAgICAgICQodGlwKS5hZGRDbGFzcyhDbGFzc05hbWUuSU4pO1xuXHRcblx0ICAgICAgICB2YXIgY29tcGxldGUgPSBmdW5jdGlvbiBjb21wbGV0ZSgpIHtcblx0ICAgICAgICAgIHZhciBwcmV2SG92ZXJTdGF0ZSA9IF90aGlzMTYuX2hvdmVyU3RhdGU7XG5cdCAgICAgICAgICBfdGhpczE2Ll9ob3ZlclN0YXRlID0gbnVsbDtcblx0XG5cdCAgICAgICAgICAkKF90aGlzMTYuZWxlbWVudCkudHJpZ2dlcihfdGhpczE2LmNvbnN0cnVjdG9yLkV2ZW50LlNIT1dOKTtcblx0XG5cdCAgICAgICAgICBpZiAocHJldkhvdmVyU3RhdGUgPT09IEhvdmVyU3RhdGUuT1VUKSB7XG5cdCAgICAgICAgICAgIF90aGlzMTYuX2xlYXZlKG51bGwsIF90aGlzMTYpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH07XG5cdFxuXHQgICAgICAgIGlmIChVdGlsLnN1cHBvcnRzVHJhbnNpdGlvbkVuZCgpICYmICQodGhpcy50aXApLmhhc0NsYXNzKENsYXNzTmFtZS5GQURFKSkge1xuXHQgICAgICAgICAgJCh0aGlzLnRpcCkub25lKFV0aWwuVFJBTlNJVElPTl9FTkQsIGNvbXBsZXRlKS5lbXVsYXRlVHJhbnNpdGlvbkVuZChUb29sdGlwLl9UUkFOU0lUSU9OX0RVUkFUSU9OKTtcblx0ICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGNvbXBsZXRlKCk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgVG9vbHRpcC5wcm90b3R5cGUuaGlkZSA9IGZ1bmN0aW9uIGhpZGUoY2FsbGJhY2spIHtcblx0ICAgICAgdmFyIF90aGlzMTcgPSB0aGlzO1xuXHRcblx0ICAgICAgdmFyIHRpcCA9IHRoaXMuZ2V0VGlwRWxlbWVudCgpO1xuXHQgICAgICB2YXIgaGlkZUV2ZW50ID0gJC5FdmVudCh0aGlzLmNvbnN0cnVjdG9yLkV2ZW50LkhJREUpO1xuXHQgICAgICB2YXIgY29tcGxldGUgPSBmdW5jdGlvbiBjb21wbGV0ZSgpIHtcblx0ICAgICAgICBpZiAoX3RoaXMxNy5faG92ZXJTdGF0ZSAhPT0gSG92ZXJTdGF0ZS5JTiAmJiB0aXAucGFyZW50Tm9kZSkge1xuXHQgICAgICAgICAgdGlwLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGlwKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIF90aGlzMTcuZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtZGVzY3JpYmVkYnknKTtcblx0ICAgICAgICAkKF90aGlzMTcuZWxlbWVudCkudHJpZ2dlcihfdGhpczE3LmNvbnN0cnVjdG9yLkV2ZW50LkhJRERFTik7XG5cdCAgICAgICAgX3RoaXMxNy5jbGVhbnVwVGV0aGVyKCk7XG5cdFxuXHQgICAgICAgIGlmIChjYWxsYmFjaykge1xuXHQgICAgICAgICAgY2FsbGJhY2soKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH07XG5cdFxuXHQgICAgICAkKHRoaXMuZWxlbWVudCkudHJpZ2dlcihoaWRlRXZlbnQpO1xuXHRcblx0ICAgICAgaWYgKGhpZGVFdmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSkge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgJCh0aXApLnJlbW92ZUNsYXNzKENsYXNzTmFtZS5JTik7XG5cdFxuXHQgICAgICBpZiAoVXRpbC5zdXBwb3J0c1RyYW5zaXRpb25FbmQoKSAmJiAkKHRoaXMudGlwKS5oYXNDbGFzcyhDbGFzc05hbWUuRkFERSkpIHtcblx0XG5cdCAgICAgICAgJCh0aXApLm9uZShVdGlsLlRSQU5TSVRJT05fRU5ELCBjb21wbGV0ZSkuZW11bGF0ZVRyYW5zaXRpb25FbmQoVFJBTlNJVElPTl9EVVJBVElPTik7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgY29tcGxldGUoKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdGhpcy5faG92ZXJTdGF0ZSA9ICcnO1xuXHQgICAgfTtcblx0XG5cdCAgICAvLyBwcm90ZWN0ZWRcblx0XG5cdCAgICBUb29sdGlwLnByb3RvdHlwZS5pc1dpdGhDb250ZW50ID0gZnVuY3Rpb24gaXNXaXRoQ29udGVudCgpIHtcblx0ICAgICAgcmV0dXJuIEJvb2xlYW4odGhpcy5nZXRUaXRsZSgpKTtcblx0ICAgIH07XG5cdFxuXHQgICAgVG9vbHRpcC5wcm90b3R5cGUuZ2V0VGlwRWxlbWVudCA9IGZ1bmN0aW9uIGdldFRpcEVsZW1lbnQoKSB7XG5cdCAgICAgIHJldHVybiB0aGlzLnRpcCA9IHRoaXMudGlwIHx8ICQodGhpcy5jb25maWcudGVtcGxhdGUpWzBdO1xuXHQgICAgfTtcblx0XG5cdCAgICBUb29sdGlwLnByb3RvdHlwZS5zZXRDb250ZW50ID0gZnVuY3Rpb24gc2V0Q29udGVudCgpIHtcblx0ICAgICAgdmFyICR0aXAgPSAkKHRoaXMuZ2V0VGlwRWxlbWVudCgpKTtcblx0XG5cdCAgICAgIHRoaXMuc2V0RWxlbWVudENvbnRlbnQoJHRpcC5maW5kKFNlbGVjdG9yLlRPT0xUSVBfSU5ORVIpLCB0aGlzLmdldFRpdGxlKCkpO1xuXHRcblx0ICAgICAgJHRpcC5yZW1vdmVDbGFzcyhDbGFzc05hbWUuRkFERSkucmVtb3ZlQ2xhc3MoQ2xhc3NOYW1lLklOKTtcblx0XG5cdCAgICAgIHRoaXMuY2xlYW51cFRldGhlcigpO1xuXHQgICAgfTtcblx0XG5cdCAgICBUb29sdGlwLnByb3RvdHlwZS5zZXRFbGVtZW50Q29udGVudCA9IGZ1bmN0aW9uIHNldEVsZW1lbnRDb250ZW50KCRlbGVtZW50LCBjb250ZW50KSB7XG5cdCAgICAgIHZhciBodG1sID0gdGhpcy5jb25maWcuaHRtbDtcblx0ICAgICAgaWYgKCh0eXBlb2YgY29udGVudCA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoY29udGVudCkpID09PSAnb2JqZWN0JyAmJiAoY29udGVudC5ub2RlVHlwZSB8fCBjb250ZW50LmpxdWVyeSkpIHtcblx0ICAgICAgICAvLyBjb250ZW50IGlzIGEgRE9NIG5vZGUgb3IgYSBqUXVlcnlcblx0ICAgICAgICBpZiAoaHRtbCkge1xuXHQgICAgICAgICAgaWYgKCEkKGNvbnRlbnQpLnBhcmVudCgpLmlzKCRlbGVtZW50KSkge1xuXHQgICAgICAgICAgICAkZWxlbWVudC5lbXB0eSgpLmFwcGVuZChjb250ZW50KTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgJGVsZW1lbnQudGV4dCgkKGNvbnRlbnQpLnRleHQoKSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICRlbGVtZW50W2h0bWwgPyAnaHRtbCcgOiAndGV4dCddKGNvbnRlbnQpO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIFRvb2x0aXAucHJvdG90eXBlLmdldFRpdGxlID0gZnVuY3Rpb24gZ2V0VGl0bGUoKSB7XG5cdCAgICAgIHZhciB0aXRsZSA9IHRoaXMuZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtb3JpZ2luYWwtdGl0bGUnKTtcblx0XG5cdCAgICAgIGlmICghdGl0bGUpIHtcblx0ICAgICAgICB0aXRsZSA9IHR5cGVvZiB0aGlzLmNvbmZpZy50aXRsZSA9PT0gJ2Z1bmN0aW9uJyA/IHRoaXMuY29uZmlnLnRpdGxlLmNhbGwodGhpcy5lbGVtZW50KSA6IHRoaXMuY29uZmlnLnRpdGxlO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICByZXR1cm4gdGl0bGU7XG5cdCAgICB9O1xuXHRcblx0ICAgIFRvb2x0aXAucHJvdG90eXBlLmNsZWFudXBUZXRoZXIgPSBmdW5jdGlvbiBjbGVhbnVwVGV0aGVyKCkge1xuXHQgICAgICBpZiAodGhpcy5fdGV0aGVyKSB7XG5cdCAgICAgICAgdGhpcy5fdGV0aGVyLmRlc3Ryb3koKTtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0XG5cdCAgICAvLyBwcml2YXRlXG5cdFxuXHQgICAgVG9vbHRpcC5wcm90b3R5cGUuX2dldEF0dGFjaG1lbnQgPSBmdW5jdGlvbiBfZ2V0QXR0YWNobWVudChwbGFjZW1lbnQpIHtcblx0ICAgICAgcmV0dXJuIEF0dGFjaG1lbnRNYXBbcGxhY2VtZW50LnRvVXBwZXJDYXNlKCldO1xuXHQgICAgfTtcblx0XG5cdCAgICBUb29sdGlwLnByb3RvdHlwZS5fc2V0TGlzdGVuZXJzID0gZnVuY3Rpb24gX3NldExpc3RlbmVycygpIHtcblx0ICAgICAgdmFyIF90aGlzMTggPSB0aGlzO1xuXHRcblx0ICAgICAgdmFyIHRyaWdnZXJzID0gdGhpcy5jb25maWcudHJpZ2dlci5zcGxpdCgnICcpO1xuXHRcblx0ICAgICAgdHJpZ2dlcnMuZm9yRWFjaChmdW5jdGlvbiAodHJpZ2dlcikge1xuXHQgICAgICAgIGlmICh0cmlnZ2VyID09PSAnY2xpY2snKSB7XG5cdCAgICAgICAgICAkKF90aGlzMTguZWxlbWVudCkub24oX3RoaXMxOC5jb25zdHJ1Y3Rvci5FdmVudC5DTElDSywgX3RoaXMxOC5jb25maWcuc2VsZWN0b3IsICQucHJveHkoX3RoaXMxOC50b2dnbGUsIF90aGlzMTgpKTtcblx0ICAgICAgICB9IGVsc2UgaWYgKHRyaWdnZXIgIT09IFRyaWdnZXIuTUFOVUFMKSB7XG5cdCAgICAgICAgICB2YXIgZXZlbnRJbiA9IHRyaWdnZXIgPT09IFRyaWdnZXIuSE9WRVIgPyBfdGhpczE4LmNvbnN0cnVjdG9yLkV2ZW50Lk1PVVNFRU5URVIgOiBfdGhpczE4LmNvbnN0cnVjdG9yLkV2ZW50LkZPQ1VTSU47XG5cdCAgICAgICAgICB2YXIgZXZlbnRPdXQgPSB0cmlnZ2VyID09PSBUcmlnZ2VyLkhPVkVSID8gX3RoaXMxOC5jb25zdHJ1Y3Rvci5FdmVudC5NT1VTRUxFQVZFIDogX3RoaXMxOC5jb25zdHJ1Y3Rvci5FdmVudC5GT0NVU09VVDtcblx0XG5cdCAgICAgICAgICAkKF90aGlzMTguZWxlbWVudCkub24oZXZlbnRJbiwgX3RoaXMxOC5jb25maWcuc2VsZWN0b3IsICQucHJveHkoX3RoaXMxOC5fZW50ZXIsIF90aGlzMTgpKS5vbihldmVudE91dCwgX3RoaXMxOC5jb25maWcuc2VsZWN0b3IsICQucHJveHkoX3RoaXMxOC5fbGVhdmUsIF90aGlzMTgpKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHRcblx0ICAgICAgaWYgKHRoaXMuY29uZmlnLnNlbGVjdG9yKSB7XG5cdCAgICAgICAgdGhpcy5jb25maWcgPSAkLmV4dGVuZCh7fSwgdGhpcy5jb25maWcsIHtcblx0ICAgICAgICAgIHRyaWdnZXI6ICdtYW51YWwnLFxuXHQgICAgICAgICAgc2VsZWN0b3I6ICcnXG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgdGhpcy5fZml4VGl0bGUoKTtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0XG5cdCAgICBUb29sdGlwLnByb3RvdHlwZS5fZml4VGl0bGUgPSBmdW5jdGlvbiBfZml4VGl0bGUoKSB7XG5cdCAgICAgIHZhciB0aXRsZVR5cGUgPSBfdHlwZW9mKHRoaXMuZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtb3JpZ2luYWwtdGl0bGUnKSk7XG5cdCAgICAgIGlmICh0aGlzLmVsZW1lbnQuZ2V0QXR0cmlidXRlKCd0aXRsZScpIHx8IHRpdGxlVHlwZSAhPT0gJ3N0cmluZycpIHtcblx0ICAgICAgICB0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKCdkYXRhLW9yaWdpbmFsLXRpdGxlJywgdGhpcy5lbGVtZW50LmdldEF0dHJpYnV0ZSgndGl0bGUnKSB8fCAnJyk7XG5cdCAgICAgICAgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZSgndGl0bGUnLCAnJyk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgVG9vbHRpcC5wcm90b3R5cGUuX2VudGVyID0gZnVuY3Rpb24gX2VudGVyKGV2ZW50LCBjb250ZXh0KSB7XG5cdCAgICAgIHZhciBkYXRhS2V5ID0gdGhpcy5jb25zdHJ1Y3Rvci5EQVRBX0tFWTtcblx0XG5cdCAgICAgIGNvbnRleHQgPSBjb250ZXh0IHx8ICQoZXZlbnQuY3VycmVudFRhcmdldCkuZGF0YShkYXRhS2V5KTtcblx0XG5cdCAgICAgIGlmICghY29udGV4dCkge1xuXHQgICAgICAgIGNvbnRleHQgPSBuZXcgdGhpcy5jb25zdHJ1Y3RvcihldmVudC5jdXJyZW50VGFyZ2V0LCB0aGlzLl9nZXREZWxlZ2F0ZUNvbmZpZygpKTtcblx0ICAgICAgICAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLmRhdGEoZGF0YUtleSwgY29udGV4dCk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmIChldmVudCkge1xuXHQgICAgICAgIGNvbnRleHQuX2FjdGl2ZVRyaWdnZXJbZXZlbnQudHlwZSA9PT0gJ2ZvY3VzaW4nID8gVHJpZ2dlci5GT0NVUyA6IFRyaWdnZXIuSE9WRVJdID0gdHJ1ZTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKCQoY29udGV4dC5nZXRUaXBFbGVtZW50KCkpLmhhc0NsYXNzKENsYXNzTmFtZS5JTikgfHwgY29udGV4dC5faG92ZXJTdGF0ZSA9PT0gSG92ZXJTdGF0ZS5JTikge1xuXHQgICAgICAgIGNvbnRleHQuX2hvdmVyU3RhdGUgPSBIb3ZlclN0YXRlLklOO1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgY2xlYXJUaW1lb3V0KGNvbnRleHQuX3RpbWVvdXQpO1xuXHRcblx0ICAgICAgY29udGV4dC5faG92ZXJTdGF0ZSA9IEhvdmVyU3RhdGUuSU47XG5cdFxuXHQgICAgICBpZiAoIWNvbnRleHQuY29uZmlnLmRlbGF5IHx8ICFjb250ZXh0LmNvbmZpZy5kZWxheS5zaG93KSB7XG5cdCAgICAgICAgY29udGV4dC5zaG93KCk7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBjb250ZXh0Ll90aW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgaWYgKGNvbnRleHQuX2hvdmVyU3RhdGUgPT09IEhvdmVyU3RhdGUuSU4pIHtcblx0ICAgICAgICAgIGNvbnRleHQuc2hvdygpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSwgY29udGV4dC5jb25maWcuZGVsYXkuc2hvdyk7XG5cdCAgICB9O1xuXHRcblx0ICAgIFRvb2x0aXAucHJvdG90eXBlLl9sZWF2ZSA9IGZ1bmN0aW9uIF9sZWF2ZShldmVudCwgY29udGV4dCkge1xuXHQgICAgICB2YXIgZGF0YUtleSA9IHRoaXMuY29uc3RydWN0b3IuREFUQV9LRVk7XG5cdFxuXHQgICAgICBjb250ZXh0ID0gY29udGV4dCB8fCAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLmRhdGEoZGF0YUtleSk7XG5cdFxuXHQgICAgICBpZiAoIWNvbnRleHQpIHtcblx0ICAgICAgICBjb250ZXh0ID0gbmV3IHRoaXMuY29uc3RydWN0b3IoZXZlbnQuY3VycmVudFRhcmdldCwgdGhpcy5fZ2V0RGVsZWdhdGVDb25maWcoKSk7XG5cdCAgICAgICAgJChldmVudC5jdXJyZW50VGFyZ2V0KS5kYXRhKGRhdGFLZXksIGNvbnRleHQpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAoZXZlbnQpIHtcblx0ICAgICAgICBjb250ZXh0Ll9hY3RpdmVUcmlnZ2VyW2V2ZW50LnR5cGUgPT09ICdmb2N1c291dCcgPyBUcmlnZ2VyLkZPQ1VTIDogVHJpZ2dlci5IT1ZFUl0gPSBmYWxzZTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKGNvbnRleHQuX2lzV2l0aEFjdGl2ZVRyaWdnZXIoKSkge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgY2xlYXJUaW1lb3V0KGNvbnRleHQuX3RpbWVvdXQpO1xuXHRcblx0ICAgICAgY29udGV4dC5faG92ZXJTdGF0ZSA9IEhvdmVyU3RhdGUuT1VUO1xuXHRcblx0ICAgICAgaWYgKCFjb250ZXh0LmNvbmZpZy5kZWxheSB8fCAhY29udGV4dC5jb25maWcuZGVsYXkuaGlkZSkge1xuXHQgICAgICAgIGNvbnRleHQuaGlkZSgpO1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgY29udGV4dC5fdGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGlmIChjb250ZXh0Ll9ob3ZlclN0YXRlID09PSBIb3ZlclN0YXRlLk9VVCkge1xuXHQgICAgICAgICAgY29udGV4dC5oaWRlKCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9LCBjb250ZXh0LmNvbmZpZy5kZWxheS5oaWRlKTtcblx0ICAgIH07XG5cdFxuXHQgICAgVG9vbHRpcC5wcm90b3R5cGUuX2lzV2l0aEFjdGl2ZVRyaWdnZXIgPSBmdW5jdGlvbiBfaXNXaXRoQWN0aXZlVHJpZ2dlcigpIHtcblx0ICAgICAgZm9yICh2YXIgdHJpZ2dlciBpbiB0aGlzLl9hY3RpdmVUcmlnZ2VyKSB7XG5cdCAgICAgICAgaWYgKHRoaXMuX2FjdGl2ZVRyaWdnZXJbdHJpZ2dlcl0pIHtcblx0ICAgICAgICAgIHJldHVybiB0cnVlO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHRcblx0ICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgfTtcblx0XG5cdCAgICBUb29sdGlwLnByb3RvdHlwZS5fZ2V0Q29uZmlnID0gZnVuY3Rpb24gX2dldENvbmZpZyhjb25maWcpIHtcblx0ICAgICAgY29uZmlnID0gJC5leHRlbmQoe30sIHRoaXMuY29uc3RydWN0b3IuRGVmYXVsdCwgJCh0aGlzLmVsZW1lbnQpLmRhdGEoKSwgY29uZmlnKTtcblx0XG5cdCAgICAgIGlmIChjb25maWcuZGVsYXkgJiYgdHlwZW9mIGNvbmZpZy5kZWxheSA9PT0gJ251bWJlcicpIHtcblx0ICAgICAgICBjb25maWcuZGVsYXkgPSB7XG5cdCAgICAgICAgICBzaG93OiBjb25maWcuZGVsYXksXG5cdCAgICAgICAgICBoaWRlOiBjb25maWcuZGVsYXlcblx0ICAgICAgICB9O1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBVdGlsLnR5cGVDaGVja0NvbmZpZyhOQU1FLCBjb25maWcsIHRoaXMuY29uc3RydWN0b3IuRGVmYXVsdFR5cGUpO1xuXHRcblx0ICAgICAgcmV0dXJuIGNvbmZpZztcblx0ICAgIH07XG5cdFxuXHQgICAgVG9vbHRpcC5wcm90b3R5cGUuX2dldERlbGVnYXRlQ29uZmlnID0gZnVuY3Rpb24gX2dldERlbGVnYXRlQ29uZmlnKCkge1xuXHQgICAgICB2YXIgY29uZmlnID0ge307XG5cdFxuXHQgICAgICBpZiAodGhpcy5jb25maWcpIHtcblx0ICAgICAgICBmb3IgKHZhciBrZXkgaW4gdGhpcy5jb25maWcpIHtcblx0ICAgICAgICAgIGlmICh0aGlzLmNvbnN0cnVjdG9yLkRlZmF1bHRba2V5XSAhPT0gdGhpcy5jb25maWdba2V5XSkge1xuXHQgICAgICAgICAgICBjb25maWdba2V5XSA9IHRoaXMuY29uZmlnW2tleV07XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdFxuXHQgICAgICByZXR1cm4gY29uZmlnO1xuXHQgICAgfTtcblx0XG5cdCAgICAvLyBzdGF0aWNcblx0XG5cdCAgICBUb29sdGlwLl9qUXVlcnlJbnRlcmZhY2UgPSBmdW5jdGlvbiBfalF1ZXJ5SW50ZXJmYWNlKGNvbmZpZykge1xuXHQgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgZGF0YSA9ICQodGhpcykuZGF0YShEQVRBX0tFWSk7XG5cdCAgICAgICAgdmFyIF9jb25maWcgPSAodHlwZW9mIGNvbmZpZyA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoY29uZmlnKSkgPT09ICdvYmplY3QnID8gY29uZmlnIDogbnVsbDtcblx0XG5cdCAgICAgICAgaWYgKCFkYXRhICYmIC9kaXNwb3NlfGhpZGUvLnRlc3QoY29uZmlnKSkge1xuXHQgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgaWYgKCFkYXRhKSB7XG5cdCAgICAgICAgICBkYXRhID0gbmV3IFRvb2x0aXAodGhpcywgX2NvbmZpZyk7XG5cdCAgICAgICAgICAkKHRoaXMpLmRhdGEoREFUQV9LRVksIGRhdGEpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgaWYgKHR5cGVvZiBjb25maWcgPT09ICdzdHJpbmcnKSB7XG5cdCAgICAgICAgICBpZiAoZGF0YVtjb25maWddID09PSB1bmRlZmluZWQpIHtcblx0ICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBtZXRob2QgbmFtZWQgXCInICsgY29uZmlnICsgJ1wiJyk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICBkYXRhW2NvbmZpZ10oKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgfTtcblx0XG5cdCAgICBfY3JlYXRlQ2xhc3MoVG9vbHRpcCwgbnVsbCwgW3tcblx0ICAgICAga2V5OiAnVkVSU0lPTicsXG5cdCAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgICAgIHJldHVybiBWRVJTSU9OO1xuXHQgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgIGtleTogJ0RlZmF1bHQnLFxuXHQgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0ICAgICAgICByZXR1cm4gRGVmYXVsdDtcblx0ICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICBrZXk6ICdOQU1FJyxcblx0ICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG5cdCAgICAgICAgcmV0dXJuIE5BTUU7XG5cdCAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAga2V5OiAnREFUQV9LRVknLFxuXHQgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0ICAgICAgICByZXR1cm4gREFUQV9LRVk7XG5cdCAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAga2V5OiAnRXZlbnQnLFxuXHQgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0ICAgICAgICByZXR1cm4gRXZlbnQ7XG5cdCAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAga2V5OiAnRVZFTlRfS0VZJyxcblx0ICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG5cdCAgICAgICAgcmV0dXJuIEVWRU5UX0tFWTtcblx0ICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICBrZXk6ICdEZWZhdWx0VHlwZScsXG5cdCAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgICAgIHJldHVybiBEZWZhdWx0VHlwZTtcblx0ICAgICAgfVxuXHQgICAgfV0pO1xuXHRcblx0ICAgIHJldHVybiBUb29sdGlwO1xuXHQgIH0oKTtcblx0XG5cdCAgLyoqXG5cdCAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCAgICogalF1ZXJ5XG5cdCAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCAgICovXG5cdFxuXHQgICQuZm5bTkFNRV0gPSBUb29sdGlwLl9qUXVlcnlJbnRlcmZhY2U7XG5cdCAgJC5mbltOQU1FXS5Db25zdHJ1Y3RvciA9IFRvb2x0aXA7XG5cdCAgJC5mbltOQU1FXS5ub0NvbmZsaWN0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgJC5mbltOQU1FXSA9IEpRVUVSWV9OT19DT05GTElDVDtcblx0ICAgIHJldHVybiBUb29sdGlwLl9qUXVlcnlJbnRlcmZhY2U7XG5cdCAgfTtcblx0XG5cdCAgcmV0dXJuIFRvb2x0aXA7XG5cdH0oalF1ZXJ5KTtcblx0XG5cdC8qKlxuXHQgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQgKiBCb290c3RyYXAgKHY0LjAuMC1hbHBoYS41KTogcG9wb3Zlci5qc1xuXHQgKiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ibG9iL21hc3Rlci9MSUNFTlNFKVxuXHQgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQgKi9cblx0XG5cdHZhciBQb3BvdmVyID0gZnVuY3Rpb24gKCQpIHtcblx0XG5cdCAgLyoqXG5cdCAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCAgICogQ29uc3RhbnRzXG5cdCAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCAgICovXG5cdFxuXHQgIHZhciBOQU1FID0gJ3BvcG92ZXInO1xuXHQgIHZhciBWRVJTSU9OID0gJzQuMC4wLWFscGhhLjUnO1xuXHQgIHZhciBEQVRBX0tFWSA9ICdicy5wb3BvdmVyJztcblx0ICB2YXIgRVZFTlRfS0VZID0gJy4nICsgREFUQV9LRVk7XG5cdCAgdmFyIEpRVUVSWV9OT19DT05GTElDVCA9ICQuZm5bTkFNRV07XG5cdFxuXHQgIHZhciBEZWZhdWx0ID0gJC5leHRlbmQoe30sIFRvb2x0aXAuRGVmYXVsdCwge1xuXHQgICAgcGxhY2VtZW50OiAncmlnaHQnLFxuXHQgICAgdHJpZ2dlcjogJ2NsaWNrJyxcblx0ICAgIGNvbnRlbnQ6ICcnLFxuXHQgICAgdGVtcGxhdGU6ICc8ZGl2IGNsYXNzPVwicG9wb3ZlclwiIHJvbGU9XCJ0b29sdGlwXCI+JyArICc8aDMgY2xhc3M9XCJwb3BvdmVyLXRpdGxlXCI+PC9oMz4nICsgJzxkaXYgY2xhc3M9XCJwb3BvdmVyLWNvbnRlbnRcIj48L2Rpdj48L2Rpdj4nXG5cdCAgfSk7XG5cdFxuXHQgIHZhciBEZWZhdWx0VHlwZSA9ICQuZXh0ZW5kKHt9LCBUb29sdGlwLkRlZmF1bHRUeXBlLCB7XG5cdCAgICBjb250ZW50OiAnKHN0cmluZ3xlbGVtZW50fGZ1bmN0aW9uKSdcblx0ICB9KTtcblx0XG5cdCAgdmFyIENsYXNzTmFtZSA9IHtcblx0ICAgIEZBREU6ICdmYWRlJyxcblx0ICAgIElOOiAnaW4nXG5cdCAgfTtcblx0XG5cdCAgdmFyIFNlbGVjdG9yID0ge1xuXHQgICAgVElUTEU6ICcucG9wb3Zlci10aXRsZScsXG5cdCAgICBDT05URU5UOiAnLnBvcG92ZXItY29udGVudCdcblx0ICB9O1xuXHRcblx0ICB2YXIgRXZlbnQgPSB7XG5cdCAgICBISURFOiAnaGlkZScgKyBFVkVOVF9LRVksXG5cdCAgICBISURERU46ICdoaWRkZW4nICsgRVZFTlRfS0VZLFxuXHQgICAgU0hPVzogJ3Nob3cnICsgRVZFTlRfS0VZLFxuXHQgICAgU0hPV046ICdzaG93bicgKyBFVkVOVF9LRVksXG5cdCAgICBJTlNFUlRFRDogJ2luc2VydGVkJyArIEVWRU5UX0tFWSxcblx0ICAgIENMSUNLOiAnY2xpY2snICsgRVZFTlRfS0VZLFxuXHQgICAgRk9DVVNJTjogJ2ZvY3VzaW4nICsgRVZFTlRfS0VZLFxuXHQgICAgRk9DVVNPVVQ6ICdmb2N1c291dCcgKyBFVkVOVF9LRVksXG5cdCAgICBNT1VTRUVOVEVSOiAnbW91c2VlbnRlcicgKyBFVkVOVF9LRVksXG5cdCAgICBNT1VTRUxFQVZFOiAnbW91c2VsZWF2ZScgKyBFVkVOVF9LRVlcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0ICAgKiBDbGFzcyBEZWZpbml0aW9uXG5cdCAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCAgICovXG5cdFxuXHQgIHZhciBQb3BvdmVyID0gZnVuY3Rpb24gKF9Ub29sdGlwKSB7XG5cdCAgICBfaW5oZXJpdHMoUG9wb3ZlciwgX1Rvb2x0aXApO1xuXHRcblx0ICAgIGZ1bmN0aW9uIFBvcG92ZXIoKSB7XG5cdCAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBQb3BvdmVyKTtcblx0XG5cdCAgICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfVG9vbHRpcC5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcblx0ICAgIH1cblx0XG5cdCAgICAvLyBvdmVycmlkZXNcblx0XG5cdCAgICBQb3BvdmVyLnByb3RvdHlwZS5pc1dpdGhDb250ZW50ID0gZnVuY3Rpb24gaXNXaXRoQ29udGVudCgpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMuZ2V0VGl0bGUoKSB8fCB0aGlzLl9nZXRDb250ZW50KCk7XG5cdCAgICB9O1xuXHRcblx0ICAgIFBvcG92ZXIucHJvdG90eXBlLmdldFRpcEVsZW1lbnQgPSBmdW5jdGlvbiBnZXRUaXBFbGVtZW50KCkge1xuXHQgICAgICByZXR1cm4gdGhpcy50aXAgPSB0aGlzLnRpcCB8fCAkKHRoaXMuY29uZmlnLnRlbXBsYXRlKVswXTtcblx0ICAgIH07XG5cdFxuXHQgICAgUG9wb3Zlci5wcm90b3R5cGUuc2V0Q29udGVudCA9IGZ1bmN0aW9uIHNldENvbnRlbnQoKSB7XG5cdCAgICAgIHZhciAkdGlwID0gJCh0aGlzLmdldFRpcEVsZW1lbnQoKSk7XG5cdFxuXHQgICAgICAvLyB3ZSB1c2UgYXBwZW5kIGZvciBodG1sIG9iamVjdHMgdG8gbWFpbnRhaW4ganMgZXZlbnRzXG5cdCAgICAgIHRoaXMuc2V0RWxlbWVudENvbnRlbnQoJHRpcC5maW5kKFNlbGVjdG9yLlRJVExFKSwgdGhpcy5nZXRUaXRsZSgpKTtcblx0ICAgICAgdGhpcy5zZXRFbGVtZW50Q29udGVudCgkdGlwLmZpbmQoU2VsZWN0b3IuQ09OVEVOVCksIHRoaXMuX2dldENvbnRlbnQoKSk7XG5cdFxuXHQgICAgICAkdGlwLnJlbW92ZUNsYXNzKENsYXNzTmFtZS5GQURFKS5yZW1vdmVDbGFzcyhDbGFzc05hbWUuSU4pO1xuXHRcblx0ICAgICAgdGhpcy5jbGVhbnVwVGV0aGVyKCk7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8vIHByaXZhdGVcblx0XG5cdCAgICBQb3BvdmVyLnByb3RvdHlwZS5fZ2V0Q29udGVudCA9IGZ1bmN0aW9uIF9nZXRDb250ZW50KCkge1xuXHQgICAgICByZXR1cm4gdGhpcy5lbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1jb250ZW50JykgfHwgKHR5cGVvZiB0aGlzLmNvbmZpZy5jb250ZW50ID09PSAnZnVuY3Rpb24nID8gdGhpcy5jb25maWcuY29udGVudC5jYWxsKHRoaXMuZWxlbWVudCkgOiB0aGlzLmNvbmZpZy5jb250ZW50KTtcblx0ICAgIH07XG5cdFxuXHQgICAgLy8gc3RhdGljXG5cdFxuXHQgICAgUG9wb3Zlci5falF1ZXJ5SW50ZXJmYWNlID0gZnVuY3Rpb24gX2pRdWVyeUludGVyZmFjZShjb25maWcpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIGRhdGEgPSAkKHRoaXMpLmRhdGEoREFUQV9LRVkpO1xuXHQgICAgICAgIHZhciBfY29uZmlnID0gKHR5cGVvZiBjb25maWcgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKGNvbmZpZykpID09PSAnb2JqZWN0JyA/IGNvbmZpZyA6IG51bGw7XG5cdFxuXHQgICAgICAgIGlmICghZGF0YSAmJiAvZGVzdHJveXxoaWRlLy50ZXN0KGNvbmZpZykpIHtcblx0ICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGlmICghZGF0YSkge1xuXHQgICAgICAgICAgZGF0YSA9IG5ldyBQb3BvdmVyKHRoaXMsIF9jb25maWcpO1xuXHQgICAgICAgICAgJCh0aGlzKS5kYXRhKERBVEFfS0VZLCBkYXRhKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGlmICh0eXBlb2YgY29uZmlnID09PSAnc3RyaW5nJykge1xuXHQgICAgICAgICAgaWYgKGRhdGFbY29uZmlnXSA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gbWV0aG9kIG5hbWVkIFwiJyArIGNvbmZpZyArICdcIicpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgZGF0YVtjb25maWddKCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0ICAgIH07XG5cdFxuXHQgICAgX2NyZWF0ZUNsYXNzKFBvcG92ZXIsIG51bGwsIFt7XG5cdCAgICAgIGtleTogJ1ZFUlNJT04nLFxuXHRcblx0XG5cdCAgICAgIC8vIGdldHRlcnNcblx0XG5cdCAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgICAgIHJldHVybiBWRVJTSU9OO1xuXHQgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgIGtleTogJ0RlZmF1bHQnLFxuXHQgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0ICAgICAgICByZXR1cm4gRGVmYXVsdDtcblx0ICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICBrZXk6ICdOQU1FJyxcblx0ICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG5cdCAgICAgICAgcmV0dXJuIE5BTUU7XG5cdCAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAga2V5OiAnREFUQV9LRVknLFxuXHQgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0ICAgICAgICByZXR1cm4gREFUQV9LRVk7XG5cdCAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAga2V5OiAnRXZlbnQnLFxuXHQgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0ICAgICAgICByZXR1cm4gRXZlbnQ7XG5cdCAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAga2V5OiAnRVZFTlRfS0VZJyxcblx0ICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG5cdCAgICAgICAgcmV0dXJuIEVWRU5UX0tFWTtcblx0ICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICBrZXk6ICdEZWZhdWx0VHlwZScsXG5cdCAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgICAgIHJldHVybiBEZWZhdWx0VHlwZTtcblx0ICAgICAgfVxuXHQgICAgfV0pO1xuXHRcblx0ICAgIHJldHVybiBQb3BvdmVyO1xuXHQgIH0oVG9vbHRpcCk7XG5cdFxuXHQgIC8qKlxuXHQgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQgICAqIGpRdWVyeVxuXHQgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQgICAqL1xuXHRcblx0ICAkLmZuW05BTUVdID0gUG9wb3Zlci5falF1ZXJ5SW50ZXJmYWNlO1xuXHQgICQuZm5bTkFNRV0uQ29uc3RydWN0b3IgPSBQb3BvdmVyO1xuXHQgICQuZm5bTkFNRV0ubm9Db25mbGljdCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICQuZm5bTkFNRV0gPSBKUVVFUllfTk9fQ09ORkxJQ1Q7XG5cdCAgICByZXR1cm4gUG9wb3Zlci5falF1ZXJ5SW50ZXJmYWNlO1xuXHQgIH07XG5cdFxuXHQgIHJldHVybiBQb3BvdmVyO1xuXHR9KGpRdWVyeSk7XG5cdFxuXHR9KCk7XG5cblxuLyoqKi8gfSxcbi8qIDYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihnbG9iYWwpIHttb2R1bGUuZXhwb3J0cyA9IGdsb2JhbFtcInR1cmJvbGlua3NcIl0gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgKGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSgpKSkpXG5cbi8qKiovIH0sXG4vKiA3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24oZ2xvYmFsKSB7bW9kdWxlLmV4cG9ydHMgPSBnbG9iYWxbXCIkXCJdID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTtcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIChmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0oKSkpKVxuXG4vKioqLyB9LFxuLyogOCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIF9fV0VCUEFDS19BTURfREVGSU5FX0ZBQ1RPUllfXywgX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX187Lypcblx0VHVyYm9saW5rcyA1LjAuMFxuXHRDb3B5cmlnaHQgwqkgMjAxNiBCYXNlY2FtcCwgTExDXG5cdCAqL1xuXHQoZnVuY3Rpb24oKXsoZnVuY3Rpb24oKXsoZnVuY3Rpb24oKXt0aGlzLlR1cmJvbGlua3M9e3N1cHBvcnRlZDpmdW5jdGlvbigpe3JldHVybiBudWxsIT13aW5kb3cuaGlzdG9yeS5wdXNoU3RhdGUmJm51bGwhPXdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWV9KCksdmlzaXQ6ZnVuY3Rpb24oZSxyKXtyZXR1cm4gdC5jb250cm9sbGVyLnZpc2l0KGUscil9LGNsZWFyQ2FjaGU6ZnVuY3Rpb24oKXtyZXR1cm4gdC5jb250cm9sbGVyLmNsZWFyQ2FjaGUoKX19fSkuY2FsbCh0aGlzKX0pLmNhbGwodGhpcyk7dmFyIHQ9dGhpcy5UdXJib2xpbmtzOyhmdW5jdGlvbigpeyhmdW5jdGlvbigpe3ZhciBlLHI7dC5jb3B5T2JqZWN0PWZ1bmN0aW9uKHQpe3ZhciBlLHIsbjtyPXt9O2ZvcihlIGluIHQpbj10W2VdLHJbZV09bjtyZXR1cm4gcn0sdC5jbG9zZXN0PWZ1bmN0aW9uKHQscil7cmV0dXJuIGUuY2FsbCh0LHIpfSxlPWZ1bmN0aW9uKCl7dmFyIHQsZTtyZXR1cm4gdD1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsbnVsbCE9KGU9dC5jbG9zZXN0KT9lOmZ1bmN0aW9uKHQpe3ZhciBlO2ZvcihlPXRoaXM7ZTspe2lmKGUubm9kZVR5cGU9PT1Ob2RlLkVMRU1FTlRfTk9ERSYmci5jYWxsKGUsdCkpcmV0dXJuIGU7ZT1lLnBhcmVudE5vZGV9fX0oKSx0LmRlZmVyPWZ1bmN0aW9uKHQpe3JldHVybiBzZXRUaW1lb3V0KHQsMSl9LHQuZGlzcGF0Y2g9ZnVuY3Rpb24odCxlKXt2YXIgcixuLG8saSxzO3JldHVybiBpPW51bGwhPWU/ZTp7fSxzPWkudGFyZ2V0LHI9aS5jYW5jZWxhYmxlLG49aS5kYXRhLG89ZG9jdW1lbnQuY3JlYXRlRXZlbnQoXCJFdmVudHNcIiksby5pbml0RXZlbnQodCwhMCxyPT09ITApLG8uZGF0YT1udWxsIT1uP246e30sKG51bGwhPXM/czpkb2N1bWVudCkuZGlzcGF0Y2hFdmVudChvKSxvfSx0Lm1hdGNoPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHIuY2FsbCh0LGUpfSxyPWZ1bmN0aW9uKCl7dmFyIHQsZSxyLG47cmV0dXJuIHQ9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LG51bGwhPShlPW51bGwhPShyPW51bGwhPShuPXQubWF0Y2hlc1NlbGVjdG9yKT9uOnQud2Via2l0TWF0Y2hlc1NlbGVjdG9yKT9yOnQubXNNYXRjaGVzU2VsZWN0b3IpP2U6dC5tb3pNYXRjaGVzU2VsZWN0b3J9KCksdC51dWlkPWZ1bmN0aW9uKCl7dmFyIHQsZSxyO2ZvcihyPVwiXCIsdD1lPTE7MzY+PWU7dD0rK2Upcis9OT09PXR8fDE0PT09dHx8MTk9PT10fHwyND09PXQ/XCItXCI6MTU9PT10P1wiNFwiOjIwPT09dD8oTWF0aC5mbG9vcig0Kk1hdGgucmFuZG9tKCkpKzgpLnRvU3RyaW5nKDE2KTpNYXRoLmZsb29yKDE1Kk1hdGgucmFuZG9tKCkpLnRvU3RyaW5nKDE2KTtyZXR1cm4gcn19KS5jYWxsKHRoaXMpLGZ1bmN0aW9uKCl7dC5Mb2NhdGlvbj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCl7dmFyIGUscjtudWxsPT10JiYodD1cIlwiKSxyPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpLHIuaHJlZj10LnRvU3RyaW5nKCksdGhpcy5hYnNvbHV0ZVVSTD1yLmhyZWYsZT1yLmhhc2gubGVuZ3RoLDI+ZT90aGlzLnJlcXVlc3RVUkw9dGhpcy5hYnNvbHV0ZVVSTDoodGhpcy5yZXF1ZXN0VVJMPXRoaXMuYWJzb2x1dGVVUkwuc2xpY2UoMCwtZSksdGhpcy5hbmNob3I9ci5oYXNoLnNsaWNlKDEpKX12YXIgZSxyLG4sbztyZXR1cm4gdC53cmFwPWZ1bmN0aW9uKHQpe3JldHVybiB0IGluc3RhbmNlb2YgdGhpcz90Om5ldyB0aGlzKHQpfSx0LnByb3RvdHlwZS5nZXRPcmlnaW49ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hYnNvbHV0ZVVSTC5zcGxpdChcIi9cIiwzKS5qb2luKFwiL1wiKX0sdC5wcm90b3R5cGUuZ2V0UGF0aD1mdW5jdGlvbigpe3ZhciB0LGU7cmV0dXJuIG51bGwhPSh0PW51bGwhPShlPXRoaXMuYWJzb2x1dGVVUkwubWF0Y2goL1xcL1xcL1teXFwvXSooXFwvW14/O10qKS8pKT9lWzFdOnZvaWQgMCk/dDpcIi9cIn0sdC5wcm90b3R5cGUuZ2V0UGF0aENvbXBvbmVudHM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRQYXRoKCkuc3BsaXQoXCIvXCIpLnNsaWNlKDEpfSx0LnByb3RvdHlwZS5nZXRMYXN0UGF0aENvbXBvbmVudD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFBhdGhDb21wb25lbnRzKCkuc2xpY2UoLTEpWzBdfSx0LnByb3RvdHlwZS5nZXRFeHRlbnNpb249ZnVuY3Rpb24oKXt2YXIgdCxlO3JldHVybiBudWxsIT0odD1udWxsIT0oZT10aGlzLmdldExhc3RQYXRoQ29tcG9uZW50KCkubWF0Y2goL1xcLlteLl0qJC8pKT9lWzBdOnZvaWQgMCk/dDpcIlwifSx0LnByb3RvdHlwZS5pc0hUTUw9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRFeHRlbnNpb24oKS5tYXRjaCgvXig/OnxcXC4oPzpodG18aHRtbHx4aHRtbCkpJC8pfSx0LnByb3RvdHlwZS5pc1ByZWZpeGVkQnk9ZnVuY3Rpb24odCl7dmFyIGU7cmV0dXJuIGU9cih0KSx0aGlzLmlzRXF1YWxUbyh0KXx8byh0aGlzLmFic29sdXRlVVJMLGUpfSx0LnByb3RvdHlwZS5pc0VxdWFsVG89ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuYWJzb2x1dGVVUkw9PT0obnVsbCE9dD90LmFic29sdXRlVVJMOnZvaWQgMCl9LHQucHJvdG90eXBlLnRvQ2FjaGVLZXk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZXF1ZXN0VVJMfSx0LnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hYnNvbHV0ZVVSTH0sdC5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hYnNvbHV0ZVVSTH0sdC5wcm90b3R5cGUudmFsdWVPZj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmFic29sdXRlVVJMfSxyPWZ1bmN0aW9uKHQpe3JldHVybiBlKHQuZ2V0T3JpZ2luKCkrdC5nZXRQYXRoKCkpfSxlPWZ1bmN0aW9uKHQpe3JldHVybiBuKHQsXCIvXCIpP3Q6dCtcIi9cIn0sbz1mdW5jdGlvbih0LGUpe3JldHVybiB0LnNsaWNlKDAsZS5sZW5ndGgpPT09ZX0sbj1mdW5jdGlvbih0LGUpe3JldHVybiB0LnNsaWNlKC1lLmxlbmd0aCk9PT1lfSx0fSgpfS5jYWxsKHRoaXMpLGZ1bmN0aW9uKCl7dmFyIGU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdC5hcHBseShlLGFyZ3VtZW50cyl9fTt0Lkh0dHBSZXF1ZXN0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihyLG4sbyl7dGhpcy5kZWxlZ2F0ZT1yLHRoaXMucmVxdWVzdENhbmNlbGVkPWUodGhpcy5yZXF1ZXN0Q2FuY2VsZWQsdGhpcyksdGhpcy5yZXF1ZXN0VGltZWRPdXQ9ZSh0aGlzLnJlcXVlc3RUaW1lZE91dCx0aGlzKSx0aGlzLnJlcXVlc3RGYWlsZWQ9ZSh0aGlzLnJlcXVlc3RGYWlsZWQsdGhpcyksdGhpcy5yZXF1ZXN0TG9hZGVkPWUodGhpcy5yZXF1ZXN0TG9hZGVkLHRoaXMpLHRoaXMucmVxdWVzdFByb2dyZXNzZWQ9ZSh0aGlzLnJlcXVlc3RQcm9ncmVzc2VkLHRoaXMpLHRoaXMudXJsPXQuTG9jYXRpb24ud3JhcChuKS5yZXF1ZXN0VVJMLHRoaXMucmVmZXJyZXI9dC5Mb2NhdGlvbi53cmFwKG8pLmFic29sdXRlVVJMLHRoaXMuY3JlYXRlWEhSKCl9cmV0dXJuIHIuTkVUV09SS19GQUlMVVJFPTAsci5USU1FT1VUX0ZBSUxVUkU9LTEsci50aW1lb3V0PTYwLHIucHJvdG90eXBlLnNlbmQ9ZnVuY3Rpb24oKXt2YXIgdDtyZXR1cm4gdGhpcy54aHImJiF0aGlzLnNlbnQ/KHRoaXMubm90aWZ5QXBwbGljYXRpb25CZWZvcmVSZXF1ZXN0U3RhcnQoKSx0aGlzLnNldFByb2dyZXNzKDApLHRoaXMueGhyLnNlbmQoKSx0aGlzLnNlbnQ9ITAsXCJmdW5jdGlvblwiPT10eXBlb2YodD10aGlzLmRlbGVnYXRlKS5yZXF1ZXN0U3RhcnRlZD90LnJlcXVlc3RTdGFydGVkKCk6dm9pZCAwKTp2b2lkIDB9LHIucHJvdG90eXBlLmNhbmNlbD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnhociYmdGhpcy5zZW50P3RoaXMueGhyLmFib3J0KCk6dm9pZCAwfSxyLnByb3RvdHlwZS5yZXF1ZXN0UHJvZ3Jlc3NlZD1mdW5jdGlvbih0KXtyZXR1cm4gdC5sZW5ndGhDb21wdXRhYmxlP3RoaXMuc2V0UHJvZ3Jlc3ModC5sb2FkZWQvdC50b3RhbCk6dm9pZCAwfSxyLnByb3RvdHlwZS5yZXF1ZXN0TG9hZGVkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZW5kUmVxdWVzdChmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgZTtyZXR1cm4gMjAwPD0oZT10Lnhoci5zdGF0dXMpJiYzMDA+ZT90LmRlbGVnYXRlLnJlcXVlc3RDb21wbGV0ZWRXaXRoUmVzcG9uc2UodC54aHIucmVzcG9uc2VUZXh0LHQueGhyLmdldFJlc3BvbnNlSGVhZGVyKFwiVHVyYm9saW5rcy1Mb2NhdGlvblwiKSk6KHQuZmFpbGVkPSEwLHQuZGVsZWdhdGUucmVxdWVzdEZhaWxlZFdpdGhTdGF0dXNDb2RlKHQueGhyLnN0YXR1cyx0Lnhoci5yZXNwb25zZVRleHQpKX19KHRoaXMpKX0sci5wcm90b3R5cGUucmVxdWVzdEZhaWxlZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmVuZFJlcXVlc3QoZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHQuZmFpbGVkPSEwLHQuZGVsZWdhdGUucmVxdWVzdEZhaWxlZFdpdGhTdGF0dXNDb2RlKHQuY29uc3RydWN0b3IuTkVUV09SS19GQUlMVVJFKX19KHRoaXMpKX0sci5wcm90b3R5cGUucmVxdWVzdFRpbWVkT3V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZW5kUmVxdWVzdChmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdC5mYWlsZWQ9ITAsdC5kZWxlZ2F0ZS5yZXF1ZXN0RmFpbGVkV2l0aFN0YXR1c0NvZGUodC5jb25zdHJ1Y3Rvci5USU1FT1VUX0ZBSUxVUkUpfX0odGhpcykpfSxyLnByb3RvdHlwZS5yZXF1ZXN0Q2FuY2VsZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbmRSZXF1ZXN0KCl9LHIucHJvdG90eXBlLm5vdGlmeUFwcGxpY2F0aW9uQmVmb3JlUmVxdWVzdFN0YXJ0PWZ1bmN0aW9uKCl7cmV0dXJuIHQuZGlzcGF0Y2goXCJ0dXJib2xpbmtzOnJlcXVlc3Qtc3RhcnRcIix7ZGF0YTp7dXJsOnRoaXMudXJsLHhocjp0aGlzLnhocn19KX0sci5wcm90b3R5cGUubm90aWZ5QXBwbGljYXRpb25BZnRlclJlcXVlc3RFbmQ9ZnVuY3Rpb24oKXtyZXR1cm4gdC5kaXNwYXRjaChcInR1cmJvbGlua3M6cmVxdWVzdC1lbmRcIix7ZGF0YTp7dXJsOnRoaXMudXJsLHhocjp0aGlzLnhocn19KX0sci5wcm90b3R5cGUuY3JlYXRlWEhSPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMueGhyPW5ldyBYTUxIdHRwUmVxdWVzdCx0aGlzLnhoci5vcGVuKFwiR0VUXCIsdGhpcy51cmwsITApLHRoaXMueGhyLnRpbWVvdXQ9MWUzKnRoaXMuY29uc3RydWN0b3IudGltZW91dCx0aGlzLnhoci5zZXRSZXF1ZXN0SGVhZGVyKFwiQWNjZXB0XCIsXCJ0ZXh0L2h0bWwsIGFwcGxpY2F0aW9uL3hodG1sK3htbFwiKSx0aGlzLnhoci5zZXRSZXF1ZXN0SGVhZGVyKFwiVHVyYm9saW5rcy1SZWZlcnJlclwiLHRoaXMucmVmZXJyZXIpLHRoaXMueGhyLm9ucHJvZ3Jlc3M9dGhpcy5yZXF1ZXN0UHJvZ3Jlc3NlZCx0aGlzLnhoci5vbmxvYWQ9dGhpcy5yZXF1ZXN0TG9hZGVkLHRoaXMueGhyLm9uZXJyb3I9dGhpcy5yZXF1ZXN0RmFpbGVkLHRoaXMueGhyLm9udGltZW91dD10aGlzLnJlcXVlc3RUaW1lZE91dCx0aGlzLnhoci5vbmFib3J0PXRoaXMucmVxdWVzdENhbmNlbGVkfSxyLnByb3RvdHlwZS5lbmRSZXF1ZXN0PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnhocj8odGhpcy5ub3RpZnlBcHBsaWNhdGlvbkFmdGVyUmVxdWVzdEVuZCgpLG51bGwhPXQmJnQuY2FsbCh0aGlzKSx0aGlzLmRlc3Ryb3koKSk6dm9pZCAwfSxyLnByb3RvdHlwZS5zZXRQcm9ncmVzcz1mdW5jdGlvbih0KXt2YXIgZTtyZXR1cm4gdGhpcy5wcm9ncmVzcz10LFwiZnVuY3Rpb25cIj09dHlwZW9mKGU9dGhpcy5kZWxlZ2F0ZSkucmVxdWVzdFByb2dyZXNzZWQ/ZS5yZXF1ZXN0UHJvZ3Jlc3NlZCh0aGlzLnByb2dyZXNzKTp2b2lkIDB9LHIucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt2YXIgdDtyZXR1cm4gdGhpcy5zZXRQcm9ncmVzcygxKSxcImZ1bmN0aW9uXCI9PXR5cGVvZih0PXRoaXMuZGVsZWdhdGUpLnJlcXVlc3RGaW5pc2hlZCYmdC5yZXF1ZXN0RmluaXNoZWQoKSx0aGlzLmRlbGVnYXRlPW51bGwsdGhpcy54aHI9bnVsbH0scn0oKX0uY2FsbCh0aGlzKSxmdW5jdGlvbigpe3ZhciBlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHQuYXBwbHkoZSxhcmd1bWVudHMpfX07dC5Qcm9ncmVzc0Jhcj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt0aGlzLnRyaWNrbGU9ZSh0aGlzLnRyaWNrbGUsdGhpcyksdGhpcy5zdHlsZXNoZWV0RWxlbWVudD10aGlzLmNyZWF0ZVN0eWxlc2hlZXRFbGVtZW50KCksdGhpcy5wcm9ncmVzc0VsZW1lbnQ9dGhpcy5jcmVhdGVQcm9ncmVzc0VsZW1lbnQoKX12YXIgcjtyZXR1cm4gcj0zMDAsdC5kZWZhdWx0Q1NTPVwiLnR1cmJvbGlua3MtcHJvZ3Jlc3MtYmFyIHtcXG4gIHBvc2l0aW9uOiBmaXhlZDtcXG4gIGRpc3BsYXk6IGJsb2NrO1xcbiAgdG9wOiAwO1xcbiAgbGVmdDogMDtcXG4gIGhlaWdodDogM3B4O1xcbiAgYmFja2dyb3VuZDogIzAwNzZmZjtcXG4gIHotaW5kZXg6IDk5OTk7XFxuICB0cmFuc2l0aW9uOiB3aWR0aCBcIityK1wibXMgZWFzZS1vdXQsIG9wYWNpdHkgXCIrci8yK1wibXMgXCIrci8yK1wibXMgZWFzZS1pbjtcXG4gIHRyYW5zZm9ybTogdHJhbnNsYXRlM2QoMCwgMCwgMCk7XFxufVwiLHQucHJvdG90eXBlLnNob3c9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52aXNpYmxlP3ZvaWQgMDoodGhpcy52aXNpYmxlPSEwLHRoaXMuaW5zdGFsbFN0eWxlc2hlZXRFbGVtZW50KCksdGhpcy5pbnN0YWxsUHJvZ3Jlc3NFbGVtZW50KCksdGhpcy5zdGFydFRyaWNrbGluZygpKX0sdC5wcm90b3R5cGUuaGlkZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnZpc2libGUmJiF0aGlzLmhpZGluZz8odGhpcy5oaWRpbmc9ITAsdGhpcy5mYWRlUHJvZ3Jlc3NFbGVtZW50KGZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0LnVuaW5zdGFsbFByb2dyZXNzRWxlbWVudCgpLHQuc3RvcFRyaWNrbGluZygpLHQudmlzaWJsZT0hMSx0LmhpZGluZz0hMX19KHRoaXMpKSk6dm9pZCAwfSx0LnByb3RvdHlwZS5zZXRWYWx1ZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy52YWx1ZT10LHRoaXMucmVmcmVzaCgpfSx0LnByb3RvdHlwZS5pbnN0YWxsU3R5bGVzaGVldEVsZW1lbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gZG9jdW1lbnQuaGVhZC5pbnNlcnRCZWZvcmUodGhpcy5zdHlsZXNoZWV0RWxlbWVudCxkb2N1bWVudC5oZWFkLmZpcnN0Q2hpbGQpfSx0LnByb3RvdHlwZS5pbnN0YWxsUHJvZ3Jlc3NFbGVtZW50PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHJvZ3Jlc3NFbGVtZW50LnN0eWxlLndpZHRoPTAsdGhpcy5wcm9ncmVzc0VsZW1lbnQuc3R5bGUub3BhY2l0eT0xLGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5pbnNlcnRCZWZvcmUodGhpcy5wcm9ncmVzc0VsZW1lbnQsZG9jdW1lbnQuYm9keSksdGhpcy5yZWZyZXNoKCl9LHQucHJvdG90eXBlLmZhZGVQcm9ncmVzc0VsZW1lbnQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucHJvZ3Jlc3NFbGVtZW50LnN0eWxlLm9wYWNpdHk9MCxzZXRUaW1lb3V0KHQsMS41KnIpfSx0LnByb3RvdHlwZS51bmluc3RhbGxQcm9ncmVzc0VsZW1lbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcm9ncmVzc0VsZW1lbnQucGFyZW50Tm9kZT9kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQucmVtb3ZlQ2hpbGQodGhpcy5wcm9ncmVzc0VsZW1lbnQpOnZvaWQgMH0sdC5wcm90b3R5cGUuc3RhcnRUcmlja2xpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbCE9dGhpcy50cmlja2xlSW50ZXJ2YWw/dGhpcy50cmlja2xlSW50ZXJ2YWw6dGhpcy50cmlja2xlSW50ZXJ2YWw9c2V0SW50ZXJ2YWwodGhpcy50cmlja2xlLHIpfSx0LnByb3RvdHlwZS5zdG9wVHJpY2tsaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIGNsZWFySW50ZXJ2YWwodGhpcy50cmlja2xlSW50ZXJ2YWwpLHRoaXMudHJpY2tsZUludGVydmFsPW51bGx9LHQucHJvdG90eXBlLnRyaWNrbGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZXRWYWx1ZSh0aGlzLnZhbHVlK01hdGgucmFuZG9tKCkvMTAwKX0sdC5wcm90b3R5cGUucmVmcmVzaD1mdW5jdGlvbigpe3JldHVybiByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHQucHJvZ3Jlc3NFbGVtZW50LnN0eWxlLndpZHRoPTEwKzkwKnQudmFsdWUrXCIlXCJ9fSh0aGlzKSl9LHQucHJvdG90eXBlLmNyZWF0ZVN0eWxlc2hlZXRFbGVtZW50PWZ1bmN0aW9uKCl7dmFyIHQ7cmV0dXJuIHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpLHQudHlwZT1cInRleHQvY3NzXCIsdC50ZXh0Q29udGVudD10aGlzLmNvbnN0cnVjdG9yLmRlZmF1bHRDU1MsdH0sdC5wcm90b3R5cGUuY3JlYXRlUHJvZ3Jlc3NFbGVtZW50PWZ1bmN0aW9uKCl7dmFyIHQ7cmV0dXJuIHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSx0LmNsYXNzTmFtZT1cInR1cmJvbGlua3MtcHJvZ3Jlc3MtYmFyXCIsdH0sdH0oKX0uY2FsbCh0aGlzKSxmdW5jdGlvbigpe3ZhciBlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHQuYXBwbHkoZSxhcmd1bWVudHMpfX07dC5Ccm93c2VyQWRhcHRlcj1mdW5jdGlvbigpe2Z1bmN0aW9uIHIocil7dGhpcy5jb250cm9sbGVyPXIsdGhpcy5zaG93UHJvZ3Jlc3NCYXI9ZSh0aGlzLnNob3dQcm9ncmVzc0Jhcix0aGlzKSx0aGlzLnByb2dyZXNzQmFyPW5ldyB0LlByb2dyZXNzQmFyfXZhciBuLG8saSxzO3JldHVybiBzPXQuSHR0cFJlcXVlc3Qsbj1zLk5FVFdPUktfRkFJTFVSRSxpPXMuVElNRU9VVF9GQUlMVVJFLG89NTAwLHIucHJvdG90eXBlLnZpc2l0UHJvcG9zZWRUb0xvY2F0aW9uV2l0aEFjdGlvbj1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmNvbnRyb2xsZXIuc3RhcnRWaXNpdFRvTG9jYXRpb25XaXRoQWN0aW9uKHQsZSl9LHIucHJvdG90eXBlLnZpc2l0U3RhcnRlZD1mdW5jdGlvbih0KXtyZXR1cm4gdC5pc3N1ZVJlcXVlc3QoKSx0LmNoYW5nZUhpc3RvcnkoKSx0LmxvYWRDYWNoZWRTbmFwc2hvdCgpfSxyLnByb3RvdHlwZS52aXNpdFJlcXVlc3RTdGFydGVkPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnByb2dyZXNzQmFyLnNldFZhbHVlKDApLHQuaGFzQ2FjaGVkU25hcHNob3QoKXx8XCJyZXN0b3JlXCIhPT10LmFjdGlvbj90aGlzLnNob3dQcm9ncmVzc0JhckFmdGVyRGVsYXkoKTp0aGlzLnNob3dQcm9ncmVzc0JhcigpfSxyLnByb3RvdHlwZS52aXNpdFJlcXVlc3RQcm9ncmVzc2VkPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnByb2dyZXNzQmFyLnNldFZhbHVlKHQucHJvZ3Jlc3MpfSxyLnByb3RvdHlwZS52aXNpdFJlcXVlc3RDb21wbGV0ZWQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQubG9hZFJlc3BvbnNlKCl9LHIucHJvdG90eXBlLnZpc2l0UmVxdWVzdEZhaWxlZFdpdGhTdGF0dXNDb2RlPWZ1bmN0aW9uKHQsZSl7c3dpdGNoKGUpe2Nhc2UgbjpjYXNlIGk6cmV0dXJuIHRoaXMucmVsb2FkKCk7ZGVmYXVsdDpyZXR1cm4gdC5sb2FkUmVzcG9uc2UoKX19LHIucHJvdG90eXBlLnZpc2l0UmVxdWVzdEZpbmlzaGVkPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmhpZGVQcm9ncmVzc0JhcigpfSxyLnByb3RvdHlwZS52aXNpdENvbXBsZXRlZD1mdW5jdGlvbih0KXtyZXR1cm4gdC5mb2xsb3dSZWRpcmVjdCgpfSxyLnByb3RvdHlwZS5wYWdlSW52YWxpZGF0ZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZWxvYWQoKX0sci5wcm90b3R5cGUuc2hvd1Byb2dyZXNzQmFyQWZ0ZXJEZWxheT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnByb2dyZXNzQmFyVGltZW91dD1zZXRUaW1lb3V0KHRoaXMuc2hvd1Byb2dyZXNzQmFyLG8pfSxyLnByb3RvdHlwZS5zaG93UHJvZ3Jlc3NCYXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcm9ncmVzc0Jhci5zaG93KCl9LHIucHJvdG90eXBlLmhpZGVQcm9ncmVzc0Jhcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLnByb2dyZXNzQmFyLmhpZGUoKSxjbGVhclRpbWVvdXQodGhpcy5wcm9ncmVzc0JhclRpbWVvdXQpfSxyLnByb3RvdHlwZS5yZWxvYWQ9ZnVuY3Rpb24oKXtyZXR1cm4gd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpfSxyfSgpfS5jYWxsKHRoaXMpLGZ1bmN0aW9uKCl7dmFyIGUscj1mdW5jdGlvbih0LGUpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0LmFwcGx5KGUsYXJndW1lbnRzKX19O2U9ITEsYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIixmdW5jdGlvbigpe3JldHVybiB0LmRlZmVyKGZ1bmN0aW9uKCl7cmV0dXJuIGU9ITB9KX0sITEpLHQuSGlzdG9yeT1mdW5jdGlvbigpe2Z1bmN0aW9uIG4odCl7dGhpcy5kZWxlZ2F0ZT10LHRoaXMub25Qb3BTdGF0ZT1yKHRoaXMub25Qb3BTdGF0ZSx0aGlzKX1yZXR1cm4gbi5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdGFydGVkP3ZvaWQgMDooYWRkRXZlbnRMaXN0ZW5lcihcInBvcHN0YXRlXCIsdGhpcy5vblBvcFN0YXRlLCExKSx0aGlzLnN0YXJ0ZWQ9ITApfSxuLnByb3RvdHlwZS5zdG9wPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RhcnRlZD8ocmVtb3ZlRXZlbnRMaXN0ZW5lcihcInBvcHN0YXRlXCIsdGhpcy5vblBvcFN0YXRlLCExKSx0aGlzLnN0YXJ0ZWQ9ITEpOnZvaWQgMH0sbi5wcm90b3R5cGUucHVzaD1mdW5jdGlvbihlLHIpe3JldHVybiBlPXQuTG9jYXRpb24ud3JhcChlKSx0aGlzLnVwZGF0ZShcInB1c2hcIixlLHIpfSxuLnByb3RvdHlwZS5yZXBsYWNlPWZ1bmN0aW9uKGUscil7cmV0dXJuIGU9dC5Mb2NhdGlvbi53cmFwKGUpLHRoaXMudXBkYXRlKFwicmVwbGFjZVwiLGUscil9LG4ucHJvdG90eXBlLm9uUG9wU3RhdGU9ZnVuY3Rpb24oZSl7dmFyIHIsbixvLGk7cmV0dXJuIHRoaXMuc2hvdWxkSGFuZGxlUG9wU3RhdGUoKSYmKGk9bnVsbCE9KG49ZS5zdGF0ZSk/bi50dXJib2xpbmtzOnZvaWQgMCk/KHI9dC5Mb2NhdGlvbi53cmFwKHdpbmRvdy5sb2NhdGlvbiksbz1pLnJlc3RvcmF0aW9uSWRlbnRpZmllcix0aGlzLmRlbGVnYXRlLmhpc3RvcnlQb3BwZWRUb0xvY2F0aW9uV2l0aFJlc3RvcmF0aW9uSWRlbnRpZmllcihyLG8pKTp2b2lkIDB9LG4ucHJvdG90eXBlLnNob3VsZEhhbmRsZVBvcFN0YXRlPWZ1bmN0aW9uKCl7cmV0dXJuIGU9PT0hMH0sbi5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKHQsZSxyKXt2YXIgbjtyZXR1cm4gbj17dHVyYm9saW5rczp7cmVzdG9yYXRpb25JZGVudGlmaWVyOnJ9fSxoaXN0b3J5W3QrXCJTdGF0ZVwiXShuLG51bGwsZSl9LG59KCl9LmNhbGwodGhpcyksZnVuY3Rpb24oKXt0LlNuYXBzaG90PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXt2YXIgZSxyO3I9dC5oZWFkLGU9dC5ib2R5LHRoaXMuaGVhZD1udWxsIT1yP3I6ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImhlYWRcIiksdGhpcy5ib2R5PW51bGwhPWU/ZTpkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYm9keVwiKX1yZXR1cm4gZS53cmFwPWZ1bmN0aW9uKHQpe3JldHVybiB0IGluc3RhbmNlb2YgdGhpcz90OnRoaXMuZnJvbUhUTUwodCl9LGUuZnJvbUhUTUw9ZnVuY3Rpb24odCl7dmFyIGU7cmV0dXJuIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImh0bWxcIiksZS5pbm5lckhUTUw9dCx0aGlzLmZyb21FbGVtZW50KGUpfSxlLmZyb21FbGVtZW50PWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgdGhpcyh7aGVhZDp0LnF1ZXJ5U2VsZWN0b3IoXCJoZWFkXCIpLGJvZHk6dC5xdWVyeVNlbGVjdG9yKFwiYm9keVwiKX0pfSxlLnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3JldHVybiBuZXcgZSh7aGVhZDp0aGlzLmhlYWQuY2xvbmVOb2RlKCEwKSxib2R5OnRoaXMuYm9keS5jbG9uZU5vZGUoITApfSl9LGUucHJvdG90eXBlLmdldFJvb3RMb2NhdGlvbj1mdW5jdGlvbigpe3ZhciBlLHI7cmV0dXJuIHI9bnVsbCE9KGU9dGhpcy5nZXRTZXR0aW5nKFwicm9vdFwiKSk/ZTpcIi9cIixuZXcgdC5Mb2NhdGlvbihyKX0sZS5wcm90b3R5cGUuZ2V0Q2FjaGVDb250cm9sVmFsdWU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRTZXR0aW5nKFwiY2FjaGUtY29udHJvbFwiKX0sZS5wcm90b3R5cGUuaGFzQW5jaG9yPWZ1bmN0aW9uKHQpe3RyeXtyZXR1cm4gbnVsbCE9dGhpcy5ib2R5LnF1ZXJ5U2VsZWN0b3IoXCJbaWQ9J1wiK3QrXCInXVwiKX1jYXRjaChlKXt9fSxlLnByb3RvdHlwZS5pc1ByZXZpZXdhYmxlPWZ1bmN0aW9uKCl7cmV0dXJuXCJuby1wcmV2aWV3XCIhPT10aGlzLmdldENhY2hlQ29udHJvbFZhbHVlKCl9LGUucHJvdG90eXBlLmlzQ2FjaGVhYmxlPWZ1bmN0aW9uKCl7cmV0dXJuXCJuby1jYWNoZVwiIT09dGhpcy5nZXRDYWNoZUNvbnRyb2xWYWx1ZSgpfSxlLnByb3RvdHlwZS5nZXRTZXR0aW5nPWZ1bmN0aW9uKHQpe3ZhciBlLHI7cmV0dXJuIHI9dGhpcy5oZWFkLnF1ZXJ5U2VsZWN0b3JBbGwoXCJtZXRhW25hbWU9J3R1cmJvbGlua3MtXCIrdCtcIiddXCIpLGU9cltyLmxlbmd0aC0xXSxudWxsIT1lP2UuZ2V0QXR0cmlidXRlKFwiY29udGVudFwiKTp2b2lkIDB9LGV9KCl9LmNhbGwodGhpcyksZnVuY3Rpb24oKXt2YXIgZT1bXS5zbGljZTt0LlJlbmRlcmVyPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe312YXIgcjtyZXR1cm4gdC5yZW5kZXI9ZnVuY3Rpb24oKXt2YXIgdCxyLG4sbztyZXR1cm4gbj1hcmd1bWVudHNbMF0scj1hcmd1bWVudHNbMV0sdD0zPD1hcmd1bWVudHMubGVuZ3RoP2UuY2FsbChhcmd1bWVudHMsMik6W10sbz1mdW5jdGlvbih0LGUscil7ci5wcm90b3R5cGU9dC5wcm90b3R5cGU7dmFyIG49bmV3IHIsbz10LmFwcGx5KG4sZSk7cmV0dXJuIE9iamVjdChvKT09PW8/bzpufSh0aGlzLHQsZnVuY3Rpb24oKXt9KSxvLmRlbGVnYXRlPW4sby5yZW5kZXIociksb30sdC5wcm90b3R5cGUucmVuZGVyVmlldz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5kZWxlZ2F0ZS52aWV3V2lsbFJlbmRlcih0aGlzLm5ld0JvZHkpLHQoKSx0aGlzLmRlbGVnYXRlLnZpZXdSZW5kZXJlZCh0aGlzLm5ld0JvZHkpfSx0LnByb3RvdHlwZS5pbnZhbGlkYXRlVmlldz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmRlbGVnYXRlLnZpZXdJbnZhbGlkYXRlZCgpfSx0LnByb3RvdHlwZS5jcmVhdGVTY3JpcHRFbGVtZW50PWZ1bmN0aW9uKHQpe3ZhciBlO3JldHVyblwiZmFsc2VcIj09PXQuZ2V0QXR0cmlidXRlKFwiZGF0YS10dXJib2xpbmtzLWV2YWxcIik/dDooZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpLGUudGV4dENvbnRlbnQ9dC50ZXh0Q29udGVudCxyKGUsdCksZSl9LHI9ZnVuY3Rpb24odCxlKXt2YXIgcixuLG8saSxzLGEsdTtmb3IoaT1lLmF0dHJpYnV0ZXMsYT1bXSxyPTAsbj1pLmxlbmd0aDtuPnI7cisrKXM9aVtyXSxvPXMubmFtZSx1PXMudmFsdWUsYS5wdXNoKHQuc2V0QXR0cmlidXRlKG8sdSkpO3JldHVybiBhfSx0fSgpfS5jYWxsKHRoaXMpLGZ1bmN0aW9uKCl7dC5IZWFkRGV0YWlscz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCl7dmFyIGUscixpLHMsYSx1LGM7Zm9yKHRoaXMuZWxlbWVudD10LHRoaXMuZWxlbWVudHM9e30sYz10aGlzLmVsZW1lbnQuY2hpbGROb2RlcyxzPTAsdT1jLmxlbmd0aDt1PnM7cysrKWk9Y1tzXSxpLm5vZGVUeXBlPT09Tm9kZS5FTEVNRU5UX05PREUmJihhPWkub3V0ZXJIVE1MLHI9bnVsbCE9KGU9dGhpcy5lbGVtZW50cylbYV0/ZVthXTplW2FdPXt0eXBlOm8oaSksdHJhY2tlZDpuKGkpLGVsZW1lbnRzOltdfSxyLmVsZW1lbnRzLnB1c2goaSkpfXZhciBlLHIsbixvO3JldHVybiB0LnByb3RvdHlwZS5oYXNFbGVtZW50V2l0aEtleT1mdW5jdGlvbih0KXtyZXR1cm4gdCBpbiB0aGlzLmVsZW1lbnRzfSx0LnByb3RvdHlwZS5nZXRUcmFja2VkRWxlbWVudFNpZ25hdHVyZT1mdW5jdGlvbigpe3ZhciB0LGU7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIHIsbjtyPXRoaXMuZWxlbWVudHMsbj1bXTtmb3IodCBpbiByKWU9clt0XS50cmFja2VkLGUmJm4ucHVzaCh0KTtyZXR1cm4gbn0uY2FsbCh0aGlzKS5qb2luKFwiXCIpfSx0LnByb3RvdHlwZS5nZXRTY3JpcHRFbGVtZW50c05vdEluRGV0YWlscz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5nZXRFbGVtZW50c01hdGNoaW5nVHlwZU5vdEluRGV0YWlscyhcInNjcmlwdFwiLHQpfSx0LnByb3RvdHlwZS5nZXRTdHlsZXNoZWV0RWxlbWVudHNOb3RJbkRldGFpbHM9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZ2V0RWxlbWVudHNNYXRjaGluZ1R5cGVOb3RJbkRldGFpbHMoXCJzdHlsZXNoZWV0XCIsdCl9LHQucHJvdG90eXBlLmdldEVsZW1lbnRzTWF0Y2hpbmdUeXBlTm90SW5EZXRhaWxzPWZ1bmN0aW9uKHQsZSl7dmFyIHIsbixvLGkscyxhO289dGhpcy5lbGVtZW50cyxzPVtdO2ZvcihuIGluIG8paT1vW25dLGE9aS50eXBlLHI9aS5lbGVtZW50cyxhIT09dHx8ZS5oYXNFbGVtZW50V2l0aEtleShuKXx8cy5wdXNoKHJbMF0pO3JldHVybiBzfSx0LnByb3RvdHlwZS5nZXRQcm92aXNpb25hbEVsZW1lbnRzPWZ1bmN0aW9uKCl7dmFyIHQsZSxyLG4sbyxpLHM7cj1bXSxuPXRoaXMuZWxlbWVudHM7Zm9yKGUgaW4gbilvPW5bZV0scz1vLnR5cGUsaT1vLnRyYWNrZWQsdD1vLmVsZW1lbnRzLG51bGwhPXN8fGk/dC5sZW5ndGg+MSYmci5wdXNoLmFwcGx5KHIsdC5zbGljZSgxKSk6ci5wdXNoLmFwcGx5KHIsdCk7cmV0dXJuIHJ9LG89ZnVuY3Rpb24odCl7cmV0dXJuIGUodCk/XCJzY3JpcHRcIjpyKHQpP1wic3R5bGVzaGVldFwiOnZvaWQgMH0sbj1mdW5jdGlvbih0KXtyZXR1cm5cInJlbG9hZFwiPT09dC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXR1cmJvbGlua3MtdHJhY2tcIil9LGU9ZnVuY3Rpb24odCl7dmFyIGU7cmV0dXJuIGU9dC50YWdOYW1lLnRvTG93ZXJDYXNlKCksXCJzY3JpcHRcIj09PWV9LHI9ZnVuY3Rpb24odCl7dmFyIGU7cmV0dXJuIGU9dC50YWdOYW1lLnRvTG93ZXJDYXNlKCksXCJzdHlsZVwiPT09ZXx8XCJsaW5rXCI9PT1lJiZcInN0eWxlc2hlZXRcIj09PXQuZ2V0QXR0cmlidXRlKFwicmVsXCIpfSx0fSgpfS5jYWxsKHRoaXMpLGZ1bmN0aW9uKCl7dmFyIGU9ZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBuKCl7dGhpcy5jb25zdHJ1Y3Rvcj10fWZvcih2YXIgbyBpbiBlKXIuY2FsbChlLG8pJiYodFtvXT1lW29dKTtyZXR1cm4gbi5wcm90b3R5cGU9ZS5wcm90b3R5cGUsdC5wcm90b3R5cGU9bmV3IG4sdC5fX3N1cGVyX189ZS5wcm90b3R5cGUsdH0scj17fS5oYXNPd25Qcm9wZXJ0eTt0LlNuYXBzaG90UmVuZGVyZXI9ZnVuY3Rpb24ocil7ZnVuY3Rpb24gbihlLHIpe3RoaXMuY3VycmVudFNuYXBzaG90PWUsdGhpcy5uZXdTbmFwc2hvdD1yLHRoaXMuY3VycmVudEhlYWREZXRhaWxzPW5ldyB0LkhlYWREZXRhaWxzKHRoaXMuY3VycmVudFNuYXBzaG90LmhlYWQpLHRoaXMubmV3SGVhZERldGFpbHM9bmV3IHQuSGVhZERldGFpbHModGhpcy5uZXdTbmFwc2hvdC5oZWFkKSx0aGlzLm5ld0JvZHk9dGhpcy5uZXdTbmFwc2hvdC5ib2R5fXJldHVybiBlKG4sciksbi5wcm90b3R5cGUucmVuZGVyPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnRyYWNrZWRFbGVtZW50c0FyZUlkZW50aWNhbCgpPyh0aGlzLm1lcmdlSGVhZCgpLHRoaXMucmVuZGVyVmlldyhmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZS5yZXBsYWNlQm9keSgpLGUuZm9jdXNGaXJzdEF1dG9mb2N1c2FibGVFbGVtZW50KCksdCgpfX0odGhpcykpKTp0aGlzLmludmFsaWRhdGVWaWV3KCl9LG4ucHJvdG90eXBlLm1lcmdlSGVhZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvcHlOZXdIZWFkU3R5bGVzaGVldEVsZW1lbnRzKCksdGhpcy5jb3B5TmV3SGVhZFNjcmlwdEVsZW1lbnRzKCksdGhpcy5yZW1vdmVDdXJyZW50SGVhZFByb3Zpc2lvbmFsRWxlbWVudHMoKSx0aGlzLmNvcHlOZXdIZWFkUHJvdmlzaW9uYWxFbGVtZW50cygpfSxuLnByb3RvdHlwZS5yZXBsYWNlQm9keT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmFjdGl2YXRlQm9keVNjcmlwdEVsZW1lbnRzKCksdGhpcy5pbXBvcnRCb2R5UGVybWFuZW50RWxlbWVudHMoKSx0aGlzLmFzc2lnbk5ld0JvZHkoKX0sbi5wcm90b3R5cGUudHJhY2tlZEVsZW1lbnRzQXJlSWRlbnRpY2FsPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY3VycmVudEhlYWREZXRhaWxzLmdldFRyYWNrZWRFbGVtZW50U2lnbmF0dXJlKCk9PT10aGlzLm5ld0hlYWREZXRhaWxzLmdldFRyYWNrZWRFbGVtZW50U2lnbmF0dXJlKCl9LG4ucHJvdG90eXBlLmNvcHlOZXdIZWFkU3R5bGVzaGVldEVsZW1lbnRzPWZ1bmN0aW9uKCl7dmFyIHQsZSxyLG4sbztmb3Iobj10aGlzLmdldE5ld0hlYWRTdHlsZXNoZWV0RWxlbWVudHMoKSxvPVtdLGU9MCxyPW4ubGVuZ3RoO3I+ZTtlKyspdD1uW2VdLG8ucHVzaChkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHQpKTtyZXR1cm4gb30sbi5wcm90b3R5cGUuY29weU5ld0hlYWRTY3JpcHRFbGVtZW50cz1mdW5jdGlvbigpe3ZhciB0LGUscixuLG87Zm9yKG49dGhpcy5nZXROZXdIZWFkU2NyaXB0RWxlbWVudHMoKSxvPVtdLGU9MCxyPW4ubGVuZ3RoO3I+ZTtlKyspdD1uW2VdLG8ucHVzaChkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlU2NyaXB0RWxlbWVudCh0KSkpO3JldHVybiBvfSxuLnByb3RvdHlwZS5yZW1vdmVDdXJyZW50SGVhZFByb3Zpc2lvbmFsRWxlbWVudHM9ZnVuY3Rpb24oKXt2YXIgdCxlLHIsbixvO2ZvcihuPXRoaXMuZ2V0Q3VycmVudEhlYWRQcm92aXNpb25hbEVsZW1lbnRzKCksbz1bXSxlPTAscj1uLmxlbmd0aDtyPmU7ZSsrKXQ9bltlXSxvLnB1c2goZG9jdW1lbnQuaGVhZC5yZW1vdmVDaGlsZCh0KSk7cmV0dXJuIG99LG4ucHJvdG90eXBlLmNvcHlOZXdIZWFkUHJvdmlzaW9uYWxFbGVtZW50cz1mdW5jdGlvbigpe3ZhciB0LGUscixuLG87Zm9yKG49dGhpcy5nZXROZXdIZWFkUHJvdmlzaW9uYWxFbGVtZW50cygpLG89W10sZT0wLHI9bi5sZW5ndGg7cj5lO2UrKyl0PW5bZV0sby5wdXNoKGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQodCkpO3JldHVybiBvfSxuLnByb3RvdHlwZS5pbXBvcnRCb2R5UGVybWFuZW50RWxlbWVudHM9ZnVuY3Rpb24oKXt2YXIgdCxlLHIsbixvLGk7Zm9yKG49dGhpcy5nZXROZXdCb2R5UGVybWFuZW50RWxlbWVudHMoKSxpPVtdLGU9MCxyPW4ubGVuZ3RoO3I+ZTtlKyspbz1uW2VdLCh0PXRoaXMuZmluZEN1cnJlbnRCb2R5UGVybWFuZW50RWxlbWVudChvKSk/aS5wdXNoKG8ucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQodCxvKSk6aS5wdXNoKHZvaWQgMCk7cmV0dXJuIGl9LG4ucHJvdG90eXBlLmFjdGl2YXRlQm9keVNjcmlwdEVsZW1lbnRzPWZ1bmN0aW9uKCl7dmFyIHQsZSxyLG4sbyxpO2ZvcihuPXRoaXMuZ2V0TmV3Qm9keVNjcmlwdEVsZW1lbnRzKCksaT1bXSxlPTAscj1uLmxlbmd0aDtyPmU7ZSsrKW89bltlXSx0PXRoaXMuY3JlYXRlU2NyaXB0RWxlbWVudChvKSxpLnB1c2goby5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZCh0LG8pKTtyZXR1cm4gaX0sbi5wcm90b3R5cGUuYXNzaWduTmV3Qm9keT1mdW5jdGlvbigpe3JldHVybiBkb2N1bWVudC5ib2R5PXRoaXMubmV3Qm9keX0sbi5wcm90b3R5cGUuZm9jdXNGaXJzdEF1dG9mb2N1c2FibGVFbGVtZW50PWZ1bmN0aW9uKCl7dmFyIHQ7cmV0dXJuIG51bGwhPSh0PXRoaXMuZmluZEZpcnN0QXV0b2ZvY3VzYWJsZUVsZW1lbnQoKSk/dC5mb2N1cygpOnZvaWQgMH0sbi5wcm90b3R5cGUuZ2V0TmV3SGVhZFN0eWxlc2hlZXRFbGVtZW50cz1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5ld0hlYWREZXRhaWxzLmdldFN0eWxlc2hlZXRFbGVtZW50c05vdEluRGV0YWlscyh0aGlzLmN1cnJlbnRIZWFkRGV0YWlscyl9LG4ucHJvdG90eXBlLmdldE5ld0hlYWRTY3JpcHRFbGVtZW50cz1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5ld0hlYWREZXRhaWxzLmdldFNjcmlwdEVsZW1lbnRzTm90SW5EZXRhaWxzKHRoaXMuY3VycmVudEhlYWREZXRhaWxzKX0sbi5wcm90b3R5cGUuZ2V0Q3VycmVudEhlYWRQcm92aXNpb25hbEVsZW1lbnRzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY3VycmVudEhlYWREZXRhaWxzLmdldFByb3Zpc2lvbmFsRWxlbWVudHMoKX0sbi5wcm90b3R5cGUuZ2V0TmV3SGVhZFByb3Zpc2lvbmFsRWxlbWVudHM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5uZXdIZWFkRGV0YWlscy5nZXRQcm92aXNpb25hbEVsZW1lbnRzKCl9LG4ucHJvdG90eXBlLmdldE5ld0JvZHlQZXJtYW5lbnRFbGVtZW50cz1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5ld0JvZHkucXVlcnlTZWxlY3RvckFsbChcIltpZF1bZGF0YS10dXJib2xpbmtzLXBlcm1hbmVudF1cIil9LG4ucHJvdG90eXBlLmZpbmRDdXJyZW50Qm9keVBlcm1hbmVudEVsZW1lbnQ9ZnVuY3Rpb24odCl7cmV0dXJuIGRvY3VtZW50LmJvZHkucXVlcnlTZWxlY3RvcihcIiNcIit0LmlkK1wiW2RhdGEtdHVyYm9saW5rcy1wZXJtYW5lbnRdXCIpfSxuLnByb3RvdHlwZS5nZXROZXdCb2R5U2NyaXB0RWxlbWVudHM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5uZXdCb2R5LnF1ZXJ5U2VsZWN0b3JBbGwoXCJzY3JpcHRcIil9LG4ucHJvdG90eXBlLmZpbmRGaXJzdEF1dG9mb2N1c2FibGVFbGVtZW50PWZ1bmN0aW9uKCl7cmV0dXJuIGRvY3VtZW50LmJvZHkucXVlcnlTZWxlY3RvcihcIlthdXRvZm9jdXNdXCIpfSxufSh0LlJlbmRlcmVyKX0uY2FsbCh0aGlzKSxmdW5jdGlvbigpe3ZhciBlPWZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gbigpe3RoaXMuY29uc3RydWN0b3I9dH1mb3IodmFyIG8gaW4gZSlyLmNhbGwoZSxvKSYmKHRbb109ZVtvXSk7cmV0dXJuIG4ucHJvdG90eXBlPWUucHJvdG90eXBlLHQucHJvdG90eXBlPW5ldyBuLHQuX19zdXBlcl9fPWUucHJvdG90eXBlLHR9LHI9e30uaGFzT3duUHJvcGVydHk7dC5FcnJvclJlbmRlcmVyPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIHIodCl7dGhpcy5odG1sPXR9cmV0dXJuIGUocix0KSxyLnByb3RvdHlwZS5yZW5kZXI9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucmVuZGVyVmlldyhmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZS5yZXBsYWNlRG9jdW1lbnRIVE1MKCksZS5hY3RpdmF0ZUJvZHlTY3JpcHRFbGVtZW50cygpLHQoKX19KHRoaXMpKX0sci5wcm90b3R5cGUucmVwbGFjZURvY3VtZW50SFRNTD1mdW5jdGlvbigpe3JldHVybiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuaW5uZXJIVE1MPXRoaXMuaHRtbH0sci5wcm90b3R5cGUuYWN0aXZhdGVCb2R5U2NyaXB0RWxlbWVudHM9ZnVuY3Rpb24oKXt2YXIgdCxlLHIsbixvLGk7Zm9yKG49dGhpcy5nZXRTY3JpcHRFbGVtZW50cygpLGk9W10sZT0wLHI9bi5sZW5ndGg7cj5lO2UrKylvPW5bZV0sdD10aGlzLmNyZWF0ZVNjcmlwdEVsZW1lbnQobyksaS5wdXNoKG8ucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQodCxvKSk7cmV0dXJuIGl9LHIucHJvdG90eXBlLmdldFNjcmlwdEVsZW1lbnRzPWZ1bmN0aW9uKCl7cmV0dXJuIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwic2NyaXB0XCIpfSxyfSh0LlJlbmRlcmVyKX0uY2FsbCh0aGlzKSxmdW5jdGlvbigpe3QuVmlldz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7dGhpcy5kZWxlZ2F0ZT10LHRoaXMuZWxlbWVudD1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnR9cmV0dXJuIGUucHJvdG90eXBlLmdldFJvb3RMb2NhdGlvbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFNuYXBzaG90KCkuZ2V0Um9vdExvY2F0aW9uKCl9LGUucHJvdG90eXBlLmdldFNuYXBzaG90PWZ1bmN0aW9uKCl7cmV0dXJuIHQuU25hcHNob3QuZnJvbUVsZW1lbnQodGhpcy5lbGVtZW50KX0sZS5wcm90b3R5cGUucmVuZGVyPWZ1bmN0aW9uKHQsZSl7dmFyIHIsbixvO3JldHVybiBvPXQuc25hcHNob3Qscj10LmVycm9yLG49dC5pc1ByZXZpZXcsdGhpcy5tYXJrQXNQcmV2aWV3KG4pLG51bGwhPW8/dGhpcy5yZW5kZXJTbmFwc2hvdChvLGUpOnRoaXMucmVuZGVyRXJyb3IocixlKX0sZS5wcm90b3R5cGUubWFya0FzUHJldmlldz1mdW5jdGlvbih0KXtyZXR1cm4gdD90aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGF0YS10dXJib2xpbmtzLXByZXZpZXdcIixcIlwiKTp0aGlzLmVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKFwiZGF0YS10dXJib2xpbmtzLXByZXZpZXdcIil9LGUucHJvdG90eXBlLnJlbmRlclNuYXBzaG90PWZ1bmN0aW9uKGUscil7cmV0dXJuIHQuU25hcHNob3RSZW5kZXJlci5yZW5kZXIodGhpcy5kZWxlZ2F0ZSxyLHRoaXMuZ2V0U25hcHNob3QoKSx0LlNuYXBzaG90LndyYXAoZSkpfSxlLnByb3RvdHlwZS5yZW5kZXJFcnJvcj1mdW5jdGlvbihlLHIpe3JldHVybiB0LkVycm9yUmVuZGVyZXIucmVuZGVyKHRoaXMuZGVsZWdhdGUscixlKX0sZX0oKX0uY2FsbCh0aGlzKSxmdW5jdGlvbigpe3ZhciBlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHQuYXBwbHkoZSxhcmd1bWVudHMpfX07dC5TY3JvbGxNYW5hZ2VyPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXt0aGlzLmRlbGVnYXRlPXQsdGhpcy5vblNjcm9sbD1lKHRoaXMub25TY3JvbGwsdGhpcyl9cmV0dXJuIHQucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RhcnRlZD92b2lkIDA6KGFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIix0aGlzLm9uU2Nyb2xsLCExKSx0aGlzLm9uU2Nyb2xsKCksdGhpcy5zdGFydGVkPSEwKX0sdC5wcm90b3R5cGUuc3RvcD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnN0YXJ0ZWQ/KHJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIix0aGlzLm9uU2Nyb2xsLCExKSx0aGlzLnN0YXJ0ZWQ9ITEpOnZvaWQgMH0sdC5wcm90b3R5cGUuc2Nyb2xsVG9FbGVtZW50PWZ1bmN0aW9uKHQpe3JldHVybiB0LnNjcm9sbEludG9WaWV3KCl9LHQucHJvdG90eXBlLnNjcm9sbFRvUG9zaXRpb249ZnVuY3Rpb24odCl7dmFyIGUscjtyZXR1cm4gZT10Lngscj10Lnksd2luZG93LnNjcm9sbFRvKGUscil9LHQucHJvdG90eXBlLm9uU2Nyb2xsPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnVwZGF0ZVBvc2l0aW9uKHt4OndpbmRvdy5wYWdlWE9mZnNldCx5OndpbmRvdy5wYWdlWU9mZnNldH0pfSx0LnByb3RvdHlwZS51cGRhdGVQb3NpdGlvbj1mdW5jdGlvbih0KXt2YXIgZTtyZXR1cm4gdGhpcy5wb3NpdGlvbj10LG51bGwhPShlPXRoaXMuZGVsZWdhdGUpP2Uuc2Nyb2xsUG9zaXRpb25DaGFuZ2VkKHRoaXMucG9zaXRpb24pOnZvaWQgMH0sdH0oKX0uY2FsbCh0aGlzKSxmdW5jdGlvbigpe3QuU25hcHNob3RDYWNoZT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7dGhpcy5zaXplPXQsdGhpcy5rZXlzPVtdLHRoaXMuc25hcHNob3RzPXt9fXZhciByO3JldHVybiBlLnByb3RvdHlwZS5oYXM9ZnVuY3Rpb24odCl7dmFyIGU7cmV0dXJuIGU9cih0KSxlIGluIHRoaXMuc25hcHNob3RzfSxlLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24odCl7dmFyIGU7aWYodGhpcy5oYXModCkpcmV0dXJuIGU9dGhpcy5yZWFkKHQpLHRoaXMudG91Y2godCksZX0sZS5wcm90b3R5cGUucHV0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMud3JpdGUodCxlKSx0aGlzLnRvdWNoKHQpLGV9LGUucHJvdG90eXBlLnJlYWQ9ZnVuY3Rpb24odCl7dmFyIGU7cmV0dXJuIGU9cih0KSx0aGlzLnNuYXBzaG90c1tlXX0sZS5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24odCxlKXt2YXIgbjtyZXR1cm4gbj1yKHQpLHRoaXMuc25hcHNob3RzW25dPWV9LGUucHJvdG90eXBlLnRvdWNoPWZ1bmN0aW9uKHQpe3ZhciBlLG47cmV0dXJuIG49cih0KSxlPXRoaXMua2V5cy5pbmRleE9mKG4pLGU+LTEmJnRoaXMua2V5cy5zcGxpY2UoZSwxKSx0aGlzLmtleXMudW5zaGlmdChuKSx0aGlzLnRyaW0oKX0sZS5wcm90b3R5cGUudHJpbT1mdW5jdGlvbigpe3ZhciB0LGUscixuLG87Zm9yKG49dGhpcy5rZXlzLnNwbGljZSh0aGlzLnNpemUpLG89W10sdD0wLHI9bi5sZW5ndGg7cj50O3QrKyllPW5bdF0sby5wdXNoKGRlbGV0ZSB0aGlzLnNuYXBzaG90c1tlXSk7cmV0dXJuIG99LHI9ZnVuY3Rpb24oZSl7cmV0dXJuIHQuTG9jYXRpb24ud3JhcChlKS50b0NhY2hlS2V5KCl9LGV9KCl9LmNhbGwodGhpcyksZnVuY3Rpb24oKXt2YXIgZT1mdW5jdGlvbih0LGUpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0LmFwcGx5KGUsYXJndW1lbnRzKX19O3QuVmlzaXQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiByKHIsbixvKXt0aGlzLmNvbnRyb2xsZXI9cix0aGlzLmFjdGlvbj1vLHRoaXMucGVyZm9ybVNjcm9sbD1lKHRoaXMucGVyZm9ybVNjcm9sbCx0aGlzKSx0aGlzLmlkZW50aWZpZXI9dC51dWlkKCksdGhpcy5sb2NhdGlvbj10LkxvY2F0aW9uLndyYXAobiksdGhpcy5hZGFwdGVyPXRoaXMuY29udHJvbGxlci5hZGFwdGVyLHRoaXMuc3RhdGU9XCJpbml0aWFsaXplZFwiLHRoaXMudGltaW5nTWV0cmljcz17fX12YXIgbjtyZXR1cm4gci5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24oKXtyZXR1cm5cImluaXRpYWxpemVkXCI9PT10aGlzLnN0YXRlPyh0aGlzLnJlY29yZFRpbWluZ01ldHJpYyhcInZpc2l0U3RhcnRcIiksdGhpcy5zdGF0ZT1cInN0YXJ0ZWRcIix0aGlzLmFkYXB0ZXIudmlzaXRTdGFydGVkKHRoaXMpKTp2b2lkIDB9LHIucHJvdG90eXBlLmNhbmNlbD1mdW5jdGlvbigpe3ZhciB0O3JldHVyblwic3RhcnRlZFwiPT09dGhpcy5zdGF0ZT8obnVsbCE9KHQ9dGhpcy5yZXF1ZXN0KSYmdC5jYW5jZWwoKSx0aGlzLmNhbmNlbFJlbmRlcigpLHRoaXMuc3RhdGU9XCJjYW5jZWxlZFwiKTp2b2lkIDB9LHIucHJvdG90eXBlLmNvbXBsZXRlPWZ1bmN0aW9uKCl7dmFyIHQ7cmV0dXJuXCJzdGFydGVkXCI9PT10aGlzLnN0YXRlPyh0aGlzLnJlY29yZFRpbWluZ01ldHJpYyhcInZpc2l0RW5kXCIpLHRoaXMuc3RhdGU9XCJjb21wbGV0ZWRcIixcImZ1bmN0aW9uXCI9PXR5cGVvZih0PXRoaXMuYWRhcHRlcikudmlzaXRDb21wbGV0ZWQmJnQudmlzaXRDb21wbGV0ZWQodGhpcyksdGhpcy5jb250cm9sbGVyLnZpc2l0Q29tcGxldGVkKHRoaXMpKTp2b2lkIDB9LHIucHJvdG90eXBlLmZhaWw9ZnVuY3Rpb24oKXt2YXIgdDtyZXR1cm5cInN0YXJ0ZWRcIj09PXRoaXMuc3RhdGU/KHRoaXMuc3RhdGU9XCJmYWlsZWRcIixcImZ1bmN0aW9uXCI9PXR5cGVvZih0PXRoaXMuYWRhcHRlcikudmlzaXRGYWlsZWQ/dC52aXNpdEZhaWxlZCh0aGlzKTp2b2lkIDApOnZvaWQgMH0sci5wcm90b3R5cGUuY2hhbmdlSGlzdG9yeT1mdW5jdGlvbigpe3ZhciB0LGU7cmV0dXJuIHRoaXMuaGlzdG9yeUNoYW5nZWQ/dm9pZCAwOih0PXRoaXMubG9jYXRpb24uaXNFcXVhbFRvKHRoaXMucmVmZXJyZXIpP1wicmVwbGFjZVwiOnRoaXMuYWN0aW9uLGU9bih0KSx0aGlzLmNvbnRyb2xsZXJbZV0odGhpcy5sb2NhdGlvbix0aGlzLnJlc3RvcmF0aW9uSWRlbnRpZmllciksdGhpcy5oaXN0b3J5Q2hhbmdlZD0hMCl9LHIucHJvdG90eXBlLmlzc3VlUmVxdWVzdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNob3VsZElzc3VlUmVxdWVzdCgpJiZudWxsPT10aGlzLnJlcXVlc3Q/KHRoaXMucHJvZ3Jlc3M9MCx0aGlzLnJlcXVlc3Q9bmV3IHQuSHR0cFJlcXVlc3QodGhpcyx0aGlzLmxvY2F0aW9uLHRoaXMucmVmZXJyZXIpLHRoaXMucmVxdWVzdC5zZW5kKCkpOnZvaWQgMH0sci5wcm90b3R5cGUuZ2V0Q2FjaGVkU25hcHNob3Q9ZnVuY3Rpb24oKXt2YXIgdDtyZXR1cm4hKHQ9dGhpcy5jb250cm9sbGVyLmdldENhY2hlZFNuYXBzaG90Rm9yTG9jYXRpb24odGhpcy5sb2NhdGlvbikpfHxudWxsIT10aGlzLmxvY2F0aW9uLmFuY2hvciYmIXQuaGFzQW5jaG9yKHRoaXMubG9jYXRpb24uYW5jaG9yKXx8XCJyZXN0b3JlXCIhPT10aGlzLmFjdGlvbiYmIXQuaXNQcmV2aWV3YWJsZSgpP3ZvaWQgMDp0fSxyLnByb3RvdHlwZS5oYXNDYWNoZWRTbmFwc2hvdD1mdW5jdGlvbigpe3JldHVybiBudWxsIT10aGlzLmdldENhY2hlZFNuYXBzaG90KCl9LHIucHJvdG90eXBlLmxvYWRDYWNoZWRTbmFwc2hvdD1mdW5jdGlvbigpe3ZhciB0LGU7cmV0dXJuKGU9dGhpcy5nZXRDYWNoZWRTbmFwc2hvdCgpKT8odD10aGlzLnNob3VsZElzc3VlUmVxdWVzdCgpLHRoaXMucmVuZGVyKGZ1bmN0aW9uKCl7dmFyIHI7cmV0dXJuIHRoaXMuY2FjaGVTbmFwc2hvdCgpLHRoaXMuY29udHJvbGxlci5yZW5kZXIoe3NuYXBzaG90OmUsaXNQcmV2aWV3OnR9LHRoaXMucGVyZm9ybVNjcm9sbCksXCJmdW5jdGlvblwiPT10eXBlb2Yocj10aGlzLmFkYXB0ZXIpLnZpc2l0UmVuZGVyZWQmJnIudmlzaXRSZW5kZXJlZCh0aGlzKSx0P3ZvaWQgMDp0aGlzLmNvbXBsZXRlKCl9KSk6dm9pZCAwfSxyLnByb3RvdHlwZS5sb2FkUmVzcG9uc2U9ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbCE9dGhpcy5yZXNwb25zZT90aGlzLnJlbmRlcihmdW5jdGlvbigpe3ZhciB0LGU7cmV0dXJuIHRoaXMuY2FjaGVTbmFwc2hvdCgpLHRoaXMucmVxdWVzdC5mYWlsZWQ/KHRoaXMuY29udHJvbGxlci5yZW5kZXIoe2Vycm9yOnRoaXMucmVzcG9uc2V9LHRoaXMucGVyZm9ybVNjcm9sbCksXCJmdW5jdGlvblwiPT10eXBlb2YodD10aGlzLmFkYXB0ZXIpLnZpc2l0UmVuZGVyZWQmJnQudmlzaXRSZW5kZXJlZCh0aGlzKSx0aGlzLmZhaWwoKSk6KHRoaXMuY29udHJvbGxlci5yZW5kZXIoe3NuYXBzaG90OnRoaXMucmVzcG9uc2V9LHRoaXMucGVyZm9ybVNjcm9sbCksXCJmdW5jdGlvblwiPT10eXBlb2YoZT10aGlzLmFkYXB0ZXIpLnZpc2l0UmVuZGVyZWQmJmUudmlzaXRSZW5kZXJlZCh0aGlzKSx0aGlzLmNvbXBsZXRlKCkpfSk6dm9pZCAwfSxyLnByb3RvdHlwZS5mb2xsb3dSZWRpcmVjdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnJlZGlyZWN0ZWRUb0xvY2F0aW9uJiYhdGhpcy5mb2xsb3dlZFJlZGlyZWN0Pyh0aGlzLmxvY2F0aW9uPXRoaXMucmVkaXJlY3RlZFRvTG9jYXRpb24sdGhpcy5jb250cm9sbGVyLnJlcGxhY2VIaXN0b3J5V2l0aExvY2F0aW9uQW5kUmVzdG9yYXRpb25JZGVudGlmaWVyKHRoaXMucmVkaXJlY3RlZFRvTG9jYXRpb24sdGhpcy5yZXN0b3JhdGlvbklkZW50aWZpZXIpLHRoaXMuZm9sbG93ZWRSZWRpcmVjdD0hMCk6dm9pZCAwfSxyLnByb3RvdHlwZS5yZXF1ZXN0U3RhcnRlZD1mdW5jdGlvbigpe3ZhciB0O3JldHVybiB0aGlzLnJlY29yZFRpbWluZ01ldHJpYyhcInJlcXVlc3RTdGFydFwiKSxcImZ1bmN0aW9uXCI9PXR5cGVvZih0PXRoaXMuYWRhcHRlcikudmlzaXRSZXF1ZXN0U3RhcnRlZD90LnZpc2l0UmVxdWVzdFN0YXJ0ZWQodGhpcyk6dm9pZCAwfSxyLnByb3RvdHlwZS5yZXF1ZXN0UHJvZ3Jlc3NlZD1mdW5jdGlvbih0KXt2YXIgZTtyZXR1cm4gdGhpcy5wcm9ncmVzcz10LFwiZnVuY3Rpb25cIj09dHlwZW9mKGU9dGhpcy5hZGFwdGVyKS52aXNpdFJlcXVlc3RQcm9ncmVzc2VkP2UudmlzaXRSZXF1ZXN0UHJvZ3Jlc3NlZCh0aGlzKTp2b2lkIDB9LHIucHJvdG90eXBlLnJlcXVlc3RDb21wbGV0ZWRXaXRoUmVzcG9uc2U9ZnVuY3Rpb24oZSxyKXtyZXR1cm4gdGhpcy5yZXNwb25zZT1lLG51bGwhPXImJih0aGlzLnJlZGlyZWN0ZWRUb0xvY2F0aW9uPXQuTG9jYXRpb24ud3JhcChyKSksdGhpcy5hZGFwdGVyLnZpc2l0UmVxdWVzdENvbXBsZXRlZCh0aGlzKX0sci5wcm90b3R5cGUucmVxdWVzdEZhaWxlZFdpdGhTdGF0dXNDb2RlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMucmVzcG9uc2U9ZSx0aGlzLmFkYXB0ZXIudmlzaXRSZXF1ZXN0RmFpbGVkV2l0aFN0YXR1c0NvZGUodGhpcyx0KX0sci5wcm90b3R5cGUucmVxdWVzdEZpbmlzaGVkPWZ1bmN0aW9uKCl7dmFyIHQ7cmV0dXJuIHRoaXMucmVjb3JkVGltaW5nTWV0cmljKFwicmVxdWVzdEVuZFwiKSxcImZ1bmN0aW9uXCI9PXR5cGVvZih0PXRoaXMuYWRhcHRlcikudmlzaXRSZXF1ZXN0RmluaXNoZWQ/dC52aXNpdFJlcXVlc3RGaW5pc2hlZCh0aGlzKTp2b2lkIDB9LHIucHJvdG90eXBlLnBlcmZvcm1TY3JvbGw9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zY3JvbGxlZD92b2lkIDA6KFwicmVzdG9yZVwiPT09dGhpcy5hY3Rpb24/dGhpcy5zY3JvbGxUb1Jlc3RvcmVkUG9zaXRpb24oKXx8dGhpcy5zY3JvbGxUb1RvcCgpOnRoaXMuc2Nyb2xsVG9BbmNob3IoKXx8dGhpcy5zY3JvbGxUb1RvcCgpLHRoaXMuc2Nyb2xsZWQ9ITApfSxyLnByb3RvdHlwZS5zY3JvbGxUb1Jlc3RvcmVkUG9zaXRpb249ZnVuY3Rpb24oKXt2YXIgdCxlO3JldHVybiB0PW51bGwhPShlPXRoaXMucmVzdG9yYXRpb25EYXRhKT9lLnNjcm9sbFBvc2l0aW9uOnZvaWQgMCxudWxsIT10Pyh0aGlzLmNvbnRyb2xsZXIuc2Nyb2xsVG9Qb3NpdGlvbih0KSwhMCk6dm9pZCAwfSxyLnByb3RvdHlwZS5zY3JvbGxUb0FuY2hvcj1mdW5jdGlvbigpe3JldHVybiBudWxsIT10aGlzLmxvY2F0aW9uLmFuY2hvcj8odGhpcy5jb250cm9sbGVyLnNjcm9sbFRvQW5jaG9yKHRoaXMubG9jYXRpb24uYW5jaG9yKSwhMCk6dm9pZCAwfSxyLnByb3RvdHlwZS5zY3JvbGxUb1RvcD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRyb2xsZXIuc2Nyb2xsVG9Qb3NpdGlvbih7eDowLHk6MH0pfSxyLnByb3RvdHlwZS5yZWNvcmRUaW1pbmdNZXRyaWM9ZnVuY3Rpb24odCl7dmFyIGU7cmV0dXJuIG51bGwhPShlPXRoaXMudGltaW5nTWV0cmljcylbdF0/ZVt0XTplW3RdPShuZXcgRGF0ZSkuZ2V0VGltZSgpfSxyLnByb3RvdHlwZS5nZXRUaW1pbmdNZXRyaWNzPWZ1bmN0aW9uKCl7cmV0dXJuIHQuY29weU9iamVjdCh0aGlzLnRpbWluZ01ldHJpY3MpfSxuPWZ1bmN0aW9uKHQpe3N3aXRjaCh0KXtjYXNlXCJyZXBsYWNlXCI6cmV0dXJuXCJyZXBsYWNlSGlzdG9yeVdpdGhMb2NhdGlvbkFuZFJlc3RvcmF0aW9uSWRlbnRpZmllclwiO2Nhc2VcImFkdmFuY2VcIjpjYXNlXCJyZXN0b3JlXCI6cmV0dXJuXCJwdXNoSGlzdG9yeVdpdGhMb2NhdGlvbkFuZFJlc3RvcmF0aW9uSWRlbnRpZmllclwifX0sci5wcm90b3R5cGUuc2hvdWxkSXNzdWVSZXF1ZXN0PWZ1bmN0aW9uKCl7cmV0dXJuXCJyZXN0b3JlXCI9PT10aGlzLmFjdGlvbj8hdGhpcy5oYXNDYWNoZWRTbmFwc2hvdCgpOiEwfSxyLnByb3RvdHlwZS5jYWNoZVNuYXBzaG90PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc25hcHNob3RDYWNoZWQ/dm9pZCAwOih0aGlzLmNvbnRyb2xsZXIuY2FjaGVTbmFwc2hvdCgpLHRoaXMuc25hcHNob3RDYWNoZWQ9ITApfSxyLnByb3RvdHlwZS5yZW5kZXI9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY2FuY2VsUmVuZGVyKCksdGhpcy5mcmFtZT1yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGUuZnJhbWU9bnVsbCx0LmNhbGwoZSl9fSh0aGlzKSl9LHIucHJvdG90eXBlLmNhbmNlbFJlbmRlcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmZyYW1lP2NhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuZnJhbWUpOnZvaWQgMH0scn0oKX0uY2FsbCh0aGlzKSxmdW5jdGlvbigpe3ZhciBlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHQuYXBwbHkoZSxhcmd1bWVudHMpfX07dC5Db250cm9sbGVyPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gcigpe3RoaXMuY2xpY2tCdWJibGVkPWUodGhpcy5jbGlja0J1YmJsZWQsdGhpcyksdGhpcy5jbGlja0NhcHR1cmVkPWUodGhpcy5jbGlja0NhcHR1cmVkLHRoaXMpLHRoaXMucGFnZUxvYWRlZD1lKHRoaXMucGFnZUxvYWRlZCx0aGlzKSx0aGlzLmhpc3Rvcnk9bmV3IHQuSGlzdG9yeSh0aGlzKSx0aGlzLnZpZXc9bmV3IHQuVmlldyh0aGlzKSx0aGlzLnNjcm9sbE1hbmFnZXI9bmV3IHQuU2Nyb2xsTWFuYWdlcih0aGlzKSx0aGlzLnJlc3RvcmF0aW9uRGF0YT17fSx0aGlzLmNsZWFyQ2FjaGUoKX1yZXR1cm4gci5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdC5zdXBwb3J0ZWQmJiF0aGlzLnN0YXJ0ZWQ/KGFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLHRoaXMuY2xpY2tDYXB0dXJlZCwhMCksYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIix0aGlzLnBhZ2VMb2FkZWQsITEpLHRoaXMuc2Nyb2xsTWFuYWdlci5zdGFydCgpLHRoaXMuc3RhcnRIaXN0b3J5KCksdGhpcy5zdGFydGVkPSEwLHRoaXMuZW5hYmxlZD0hMCk6dm9pZCAwfSxyLnByb3RvdHlwZS5kaXNhYmxlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZW5hYmxlZD0hMX0sci5wcm90b3R5cGUuc3RvcD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnN0YXJ0ZWQ/KHJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLHRoaXMuY2xpY2tDYXB0dXJlZCwhMCkscmVtb3ZlRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIix0aGlzLnBhZ2VMb2FkZWQsITEpLHRoaXMuc2Nyb2xsTWFuYWdlci5zdG9wKCksdGhpcy5zdG9wSGlzdG9yeSgpLHRoaXMuc3RhcnRlZD0hMSk6dm9pZCAwfSxyLnByb3RvdHlwZS5jbGVhckNhY2hlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY2FjaGU9bmV3IHQuU25hcHNob3RDYWNoZSgxMCl9LHIucHJvdG90eXBlLnZpc2l0PWZ1bmN0aW9uKGUscil7dmFyIG4sbztyZXR1cm4gbnVsbD09ciYmKHI9e30pLGU9dC5Mb2NhdGlvbi53cmFwKGUpLHRoaXMuYXBwbGljYXRpb25BbGxvd3NWaXNpdGluZ0xvY2F0aW9uKGUpP3RoaXMubG9jYXRpb25Jc1Zpc2l0YWJsZShlKT8obj1udWxsIT0obz1yLmFjdGlvbik/bzpcImFkdmFuY2VcIix0aGlzLmFkYXB0ZXIudmlzaXRQcm9wb3NlZFRvTG9jYXRpb25XaXRoQWN0aW9uKGUsbikpOndpbmRvdy5sb2NhdGlvbj1lOnZvaWQgMH0sci5wcm90b3R5cGUuc3RhcnRWaXNpdFRvTG9jYXRpb25XaXRoQWN0aW9uPWZ1bmN0aW9uKGUscixuKXt2YXIgbztyZXR1cm4gdC5zdXBwb3J0ZWQ/KG89dGhpcy5nZXRSZXN0b3JhdGlvbkRhdGFGb3JJZGVudGlmaWVyKG4pLHRoaXMuc3RhcnRWaXNpdChlLHIse3Jlc3RvcmF0aW9uRGF0YTpvfSkpOndpbmRvdy5sb2NhdGlvbj1lfSxyLnByb3RvdHlwZS5zdGFydEhpc3Rvcnk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sb2NhdGlvbj10LkxvY2F0aW9uLndyYXAod2luZG93LmxvY2F0aW9uKSx0aGlzLnJlc3RvcmF0aW9uSWRlbnRpZmllcj10LnV1aWQoKSx0aGlzLmhpc3Rvcnkuc3RhcnQoKSx0aGlzLmhpc3RvcnkucmVwbGFjZSh0aGlzLmxvY2F0aW9uLHRoaXMucmVzdG9yYXRpb25JZGVudGlmaWVyKX0sci5wcm90b3R5cGUuc3RvcEhpc3Rvcnk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oaXN0b3J5LnN0b3AoKX0sci5wcm90b3R5cGUucHVzaEhpc3RvcnlXaXRoTG9jYXRpb25BbmRSZXN0b3JhdGlvbklkZW50aWZpZXI9ZnVuY3Rpb24oZSxyKXtyZXR1cm4gdGhpcy5yZXN0b3JhdGlvbklkZW50aWZpZXI9cix0aGlzLmxvY2F0aW9uPXQuTG9jYXRpb24ud3JhcChlKSx0aGlzLmhpc3RvcnkucHVzaCh0aGlzLmxvY2F0aW9uLHRoaXMucmVzdG9yYXRpb25JZGVudGlmaWVyKX0sci5wcm90b3R5cGUucmVwbGFjZUhpc3RvcnlXaXRoTG9jYXRpb25BbmRSZXN0b3JhdGlvbklkZW50aWZpZXI9ZnVuY3Rpb24oZSxyKXtyZXR1cm4gdGhpcy5yZXN0b3JhdGlvbklkZW50aWZpZXI9cix0aGlzLmxvY2F0aW9uPXQuTG9jYXRpb24ud3JhcChlKSx0aGlzLmhpc3RvcnkucmVwbGFjZSh0aGlzLmxvY2F0aW9uLHRoaXMucmVzdG9yYXRpb25JZGVudGlmaWVyKX0sci5wcm90b3R5cGUuaGlzdG9yeVBvcHBlZFRvTG9jYXRpb25XaXRoUmVzdG9yYXRpb25JZGVudGlmaWVyPWZ1bmN0aW9uKGUscil7dmFyIG47cmV0dXJuIHRoaXMucmVzdG9yYXRpb25JZGVudGlmaWVyPXIsdGhpcy5lbmFibGVkPyhuPXRoaXMuZ2V0UmVzdG9yYXRpb25EYXRhRm9ySWRlbnRpZmllcih0aGlzLnJlc3RvcmF0aW9uSWRlbnRpZmllciksdGhpcy5zdGFydFZpc2l0KGUsXCJyZXN0b3JlXCIse3Jlc3RvcmF0aW9uSWRlbnRpZmllcjp0aGlzLnJlc3RvcmF0aW9uSWRlbnRpZmllcixyZXN0b3JhdGlvbkRhdGE6bixoaXN0b3J5Q2hhbmdlZDohMH0pLHRoaXMubG9jYXRpb249dC5Mb2NhdGlvbi53cmFwKGUpKTp0aGlzLmFkYXB0ZXIucGFnZUludmFsaWRhdGVkKCl9LHIucHJvdG90eXBlLmdldENhY2hlZFNuYXBzaG90Rm9yTG9jYXRpb249ZnVuY3Rpb24odCl7dmFyIGU7cmV0dXJuIGU9dGhpcy5jYWNoZS5nZXQodCksZT9lLmNsb25lKCk6dm9pZCAwfSxyLnByb3RvdHlwZS5zaG91bGRDYWNoZVNuYXBzaG90PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmlldy5nZXRTbmFwc2hvdCgpLmlzQ2FjaGVhYmxlKCl9LHIucHJvdG90eXBlLmNhY2hlU25hcHNob3Q9ZnVuY3Rpb24oKXt2YXIgdDtyZXR1cm4gdGhpcy5zaG91bGRDYWNoZVNuYXBzaG90KCk/KHRoaXMubm90aWZ5QXBwbGljYXRpb25CZWZvcmVDYWNoaW5nU25hcHNob3QoKSx0PXRoaXMudmlldy5nZXRTbmFwc2hvdCgpLHRoaXMuY2FjaGUucHV0KHRoaXMubGFzdFJlbmRlcmVkTG9jYXRpb24sdC5jbG9uZSgpKSk6dm9pZCAwfSxyLnByb3RvdHlwZS5zY3JvbGxUb0FuY2hvcj1mdW5jdGlvbih0KXt2YXIgZTtyZXR1cm4oZT1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0KSk/dGhpcy5zY3JvbGxUb0VsZW1lbnQoZSk6dGhpcy5zY3JvbGxUb1Bvc2l0aW9uKHt4OjAseTowfSl9LHIucHJvdG90eXBlLnNjcm9sbFRvRWxlbWVudD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5zY3JvbGxNYW5hZ2VyLnNjcm9sbFRvRWxlbWVudCh0KX0sci5wcm90b3R5cGUuc2Nyb2xsVG9Qb3NpdGlvbj1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5zY3JvbGxNYW5hZ2VyLnNjcm9sbFRvUG9zaXRpb24odCl9LHIucHJvdG90eXBlLnNjcm9sbFBvc2l0aW9uQ2hhbmdlZD1mdW5jdGlvbih0KXt2YXIgZTtyZXR1cm4gZT10aGlzLmdldEN1cnJlbnRSZXN0b3JhdGlvbkRhdGEoKSxlLnNjcm9sbFBvc2l0aW9uPXR9LHIucHJvdG90eXBlLnJlbmRlcj1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLnZpZXcucmVuZGVyKHQsZSl9LHIucHJvdG90eXBlLnZpZXdJbnZhbGlkYXRlZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmFkYXB0ZXIucGFnZUludmFsaWRhdGVkKCl9LHIucHJvdG90eXBlLnZpZXdXaWxsUmVuZGVyPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm5vdGlmeUFwcGxpY2F0aW9uQmVmb3JlUmVuZGVyKHQpfSxyLnByb3RvdHlwZS52aWV3UmVuZGVyZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sYXN0UmVuZGVyZWRMb2NhdGlvbj10aGlzLmN1cnJlbnRWaXNpdC5sb2NhdGlvbix0aGlzLm5vdGlmeUFwcGxpY2F0aW9uQWZ0ZXJSZW5kZXIoKX0sci5wcm90b3R5cGUucGFnZUxvYWRlZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmxhc3RSZW5kZXJlZExvY2F0aW9uPXRoaXMubG9jYXRpb24sdGhpcy5ub3RpZnlBcHBsaWNhdGlvbkFmdGVyUGFnZUxvYWQoKX0sci5wcm90b3R5cGUuY2xpY2tDYXB0dXJlZD1mdW5jdGlvbigpe3JldHVybiByZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIix0aGlzLmNsaWNrQnViYmxlZCwhMSksYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsdGhpcy5jbGlja0J1YmJsZWQsITEpfSxyLnByb3RvdHlwZS5jbGlja0J1YmJsZWQ9ZnVuY3Rpb24odCl7dmFyIGUscixuO3JldHVybiB0aGlzLmVuYWJsZWQmJnRoaXMuY2xpY2tFdmVudElzU2lnbmlmaWNhbnQodCkmJihyPXRoaXMuZ2V0VmlzaXRhYmxlTGlua0Zvck5vZGUodC50YXJnZXQpKSYmKG49dGhpcy5nZXRWaXNpdGFibGVMb2NhdGlvbkZvckxpbmsocikpJiZ0aGlzLmFwcGxpY2F0aW9uQWxsb3dzRm9sbG93aW5nTGlua1RvTG9jYXRpb24ocixuKT8odC5wcmV2ZW50RGVmYXVsdCgpLGU9dGhpcy5nZXRBY3Rpb25Gb3JMaW5rKHIpLHRoaXMudmlzaXQobix7YWN0aW9uOmV9KSk6dm9pZCAwfSxyLnByb3RvdHlwZS5hcHBsaWNhdGlvbkFsbG93c0ZvbGxvd2luZ0xpbmtUb0xvY2F0aW9uPWZ1bmN0aW9uKHQsZSl7dmFyIHI7cmV0dXJuIHI9dGhpcy5ub3RpZnlBcHBsaWNhdGlvbkFmdGVyQ2xpY2tpbmdMaW5rVG9Mb2NhdGlvbih0LGUpLCFyLmRlZmF1bHRQcmV2ZW50ZWR9LHIucHJvdG90eXBlLmFwcGxpY2F0aW9uQWxsb3dzVmlzaXRpbmdMb2NhdGlvbj1mdW5jdGlvbih0KXt2YXIgZTtyZXR1cm4gZT10aGlzLm5vdGlmeUFwcGxpY2F0aW9uQmVmb3JlVmlzaXRpbmdMb2NhdGlvbih0KSwhZS5kZWZhdWx0UHJldmVudGVkfSxyLnByb3RvdHlwZS5ub3RpZnlBcHBsaWNhdGlvbkFmdGVyQ2xpY2tpbmdMaW5rVG9Mb2NhdGlvbj1mdW5jdGlvbihlLHIpe3JldHVybiB0LmRpc3BhdGNoKFwidHVyYm9saW5rczpjbGlja1wiLHt0YXJnZXQ6ZSxkYXRhOnt1cmw6ci5hYnNvbHV0ZVVSTH0sY2FuY2VsYWJsZTohMH0pfSxyLnByb3RvdHlwZS5ub3RpZnlBcHBsaWNhdGlvbkJlZm9yZVZpc2l0aW5nTG9jYXRpb249ZnVuY3Rpb24oZSl7cmV0dXJuIHQuZGlzcGF0Y2goXCJ0dXJib2xpbmtzOmJlZm9yZS12aXNpdFwiLHtkYXRhOnt1cmw6ZS5hYnNvbHV0ZVVSTH0sY2FuY2VsYWJsZTohMH0pfSxyLnByb3RvdHlwZS5ub3RpZnlBcHBsaWNhdGlvbkFmdGVyVmlzaXRpbmdMb2NhdGlvbj1mdW5jdGlvbihlKXtyZXR1cm4gdC5kaXNwYXRjaChcInR1cmJvbGlua3M6dmlzaXRcIix7ZGF0YTp7dXJsOmUuYWJzb2x1dGVVUkx9fSl9LHIucHJvdG90eXBlLm5vdGlmeUFwcGxpY2F0aW9uQmVmb3JlQ2FjaGluZ1NuYXBzaG90PWZ1bmN0aW9uKCl7cmV0dXJuIHQuZGlzcGF0Y2goXCJ0dXJib2xpbmtzOmJlZm9yZS1jYWNoZVwiKX0sci5wcm90b3R5cGUubm90aWZ5QXBwbGljYXRpb25CZWZvcmVSZW5kZXI9ZnVuY3Rpb24oZSl7cmV0dXJuIHQuZGlzcGF0Y2goXCJ0dXJib2xpbmtzOmJlZm9yZS1yZW5kZXJcIix7ZGF0YTp7bmV3Qm9keTplfX0pfSxyLnByb3RvdHlwZS5ub3RpZnlBcHBsaWNhdGlvbkFmdGVyUmVuZGVyPWZ1bmN0aW9uKCl7cmV0dXJuIHQuZGlzcGF0Y2goXCJ0dXJib2xpbmtzOnJlbmRlclwiKX0sci5wcm90b3R5cGUubm90aWZ5QXBwbGljYXRpb25BZnRlclBhZ2VMb2FkPWZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT1lJiYoZT17fSksdC5kaXNwYXRjaChcInR1cmJvbGlua3M6bG9hZFwiLHtkYXRhOnt1cmw6dGhpcy5sb2NhdGlvbi5hYnNvbHV0ZVVSTCx0aW1pbmc6ZX19KX0sci5wcm90b3R5cGUuc3RhcnRWaXNpdD1mdW5jdGlvbih0LGUscil7dmFyIG47cmV0dXJuIG51bGwhPShuPXRoaXMuY3VycmVudFZpc2l0KSYmbi5jYW5jZWwoKSx0aGlzLmN1cnJlbnRWaXNpdD10aGlzLmNyZWF0ZVZpc2l0KHQsZSxyKSx0aGlzLmN1cnJlbnRWaXNpdC5zdGFydCgpLHRoaXMubm90aWZ5QXBwbGljYXRpb25BZnRlclZpc2l0aW5nTG9jYXRpb24odCl9LHIucHJvdG90eXBlLmNyZWF0ZVZpc2l0PWZ1bmN0aW9uKGUscixuKXtcblx0dmFyIG8saSxzLGEsdTtyZXR1cm4gaT1udWxsIT1uP246e30sYT1pLnJlc3RvcmF0aW9uSWRlbnRpZmllcixzPWkucmVzdG9yYXRpb25EYXRhLG89aS5oaXN0b3J5Q2hhbmdlZCx1PW5ldyB0LlZpc2l0KHRoaXMsZSxyKSx1LnJlc3RvcmF0aW9uSWRlbnRpZmllcj1udWxsIT1hP2E6dC51dWlkKCksdS5yZXN0b3JhdGlvbkRhdGE9dC5jb3B5T2JqZWN0KHMpLHUuaGlzdG9yeUNoYW5nZWQ9byx1LnJlZmVycmVyPXRoaXMubG9jYXRpb24sdX0sci5wcm90b3R5cGUudmlzaXRDb21wbGV0ZWQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMubm90aWZ5QXBwbGljYXRpb25BZnRlclBhZ2VMb2FkKHQuZ2V0VGltaW5nTWV0cmljcygpKX0sci5wcm90b3R5cGUuY2xpY2tFdmVudElzU2lnbmlmaWNhbnQ9ZnVuY3Rpb24odCl7cmV0dXJuISh0LmRlZmF1bHRQcmV2ZW50ZWR8fHQudGFyZ2V0LmlzQ29udGVudEVkaXRhYmxlfHx0LndoaWNoPjF8fHQuYWx0S2V5fHx0LmN0cmxLZXl8fHQubWV0YUtleXx8dC5zaGlmdEtleSl9LHIucHJvdG90eXBlLmdldFZpc2l0YWJsZUxpbmtGb3JOb2RlPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLm5vZGVJc1Zpc2l0YWJsZShlKT90LmNsb3Nlc3QoZSxcImFbaHJlZl06bm90KFt0YXJnZXRdKVwiKTp2b2lkIDB9LHIucHJvdG90eXBlLmdldFZpc2l0YWJsZUxvY2F0aW9uRm9yTGluaz1mdW5jdGlvbihlKXt2YXIgcjtyZXR1cm4gcj1uZXcgdC5Mb2NhdGlvbihlLmdldEF0dHJpYnV0ZShcImhyZWZcIikpLHRoaXMubG9jYXRpb25Jc1Zpc2l0YWJsZShyKT9yOnZvaWQgMH0sci5wcm90b3R5cGUuZ2V0QWN0aW9uRm9yTGluaz1mdW5jdGlvbih0KXt2YXIgZTtyZXR1cm4gbnVsbCE9KGU9dC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXR1cmJvbGlua3MtYWN0aW9uXCIpKT9lOlwiYWR2YW5jZVwifSxyLnByb3RvdHlwZS5ub2RlSXNWaXNpdGFibGU9ZnVuY3Rpb24oZSl7dmFyIHI7cmV0dXJuKHI9dC5jbG9zZXN0KGUsXCJbZGF0YS10dXJib2xpbmtzXVwiKSk/XCJmYWxzZVwiIT09ci5nZXRBdHRyaWJ1dGUoXCJkYXRhLXR1cmJvbGlua3NcIik6ITB9LHIucHJvdG90eXBlLmxvY2F0aW9uSXNWaXNpdGFibGU9ZnVuY3Rpb24odCl7cmV0dXJuIHQuaXNQcmVmaXhlZEJ5KHRoaXMudmlldy5nZXRSb290TG9jYXRpb24oKSkmJnQuaXNIVE1MKCl9LHIucHJvdG90eXBlLmdldEN1cnJlbnRSZXN0b3JhdGlvbkRhdGE9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRSZXN0b3JhdGlvbkRhdGFGb3JJZGVudGlmaWVyKHRoaXMucmVzdG9yYXRpb25JZGVudGlmaWVyKX0sci5wcm90b3R5cGUuZ2V0UmVzdG9yYXRpb25EYXRhRm9ySWRlbnRpZmllcj1mdW5jdGlvbih0KXt2YXIgZTtyZXR1cm4gbnVsbCE9KGU9dGhpcy5yZXN0b3JhdGlvbkRhdGEpW3RdP2VbdF06ZVt0XT17fX0scn0oKX0uY2FsbCh0aGlzKSxmdW5jdGlvbigpe3ZhciBlLHIsbjt0LnN0YXJ0PWZ1bmN0aW9uKCl7cmV0dXJuIHIoKT8obnVsbD09dC5jb250cm9sbGVyJiYodC5jb250cm9sbGVyPWUoKSksdC5jb250cm9sbGVyLnN0YXJ0KCkpOnZvaWQgMH0scj1mdW5jdGlvbigpe3JldHVybiBudWxsPT13aW5kb3cuVHVyYm9saW5rcyYmKHdpbmRvdy5UdXJib2xpbmtzPXQpLG4oKX0sZT1mdW5jdGlvbigpe3ZhciBlO3JldHVybiBlPW5ldyB0LkNvbnRyb2xsZXIsZS5hZGFwdGVyPW5ldyB0LkJyb3dzZXJBZGFwdGVyKGUpLGV9LG49ZnVuY3Rpb24oKXtyZXR1cm4gd2luZG93LlR1cmJvbGlua3M9PT10fSxuKCkmJnQuc3RhcnQoKX0uY2FsbCh0aGlzKX0pLmNhbGwodGhpcyksXCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZSYmbW9kdWxlLmV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9dDpcImZ1bmN0aW9uXCI9PVwiZnVuY3Rpb25cIiYmX193ZWJwYWNrX3JlcXVpcmVfXyg5KSYmIShfX1dFQlBBQ0tfQU1EX0RFRklORV9GQUNUT1JZX18gPSAodCksIF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fID0gKHR5cGVvZiBfX1dFQlBBQ0tfQU1EX0RFRklORV9GQUNUT1JZX18gPT09ICdmdW5jdGlvbicgPyAoX19XRUJQQUNLX0FNRF9ERUZJTkVfRkFDVE9SWV9fLmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXywgZXhwb3J0cywgbW9kdWxlKSkgOiBfX1dFQlBBQ0tfQU1EX0RFRklORV9GQUNUT1JZX18pLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyAhPT0gdW5kZWZpbmVkICYmIChtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fKSl9KS5jYWxsKHRoaXMpO1xuXG4vKioqLyB9LFxuLyogOSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKF9fd2VicGFja19hbWRfb3B0aW9uc19fKSB7bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfYW1kX29wdGlvbnNfXztcclxuXHRcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIHt9KSlcblxuLyoqKi8gfVxuLyoqKioqKi8gXSk7XG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogdmVuZG9yLmpzXG4gKiovIiwiIFx0Ly8gaW5zdGFsbCBhIEpTT05QIGNhbGxiYWNrIGZvciBjaHVuayBsb2FkaW5nXG4gXHR2YXIgcGFyZW50SnNvbnBGdW5jdGlvbiA9IHdpbmRvd1tcIndlYnBhY2tKc29ucFwiXTtcbiBcdHdpbmRvd1tcIndlYnBhY2tKc29ucFwiXSA9IGZ1bmN0aW9uIHdlYnBhY2tKc29ucENhbGxiYWNrKGNodW5rSWRzLCBtb3JlTW9kdWxlcykge1xuIFx0XHQvLyBhZGQgXCJtb3JlTW9kdWxlc1wiIHRvIHRoZSBtb2R1bGVzIG9iamVjdCxcbiBcdFx0Ly8gdGhlbiBmbGFnIGFsbCBcImNodW5rSWRzXCIgYXMgbG9hZGVkIGFuZCBmaXJlIGNhbGxiYWNrXG4gXHRcdHZhciBtb2R1bGVJZCwgY2h1bmtJZCwgaSA9IDAsIGNhbGxiYWNrcyA9IFtdO1xuIFx0XHRmb3IoO2kgPCBjaHVua0lkcy5sZW5ndGg7IGkrKykge1xuIFx0XHRcdGNodW5rSWQgPSBjaHVua0lkc1tpXTtcbiBcdFx0XHRpZihpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0pXG4gXHRcdFx0XHRjYWxsYmFja3MucHVzaC5hcHBseShjYWxsYmFja3MsIGluc3RhbGxlZENodW5rc1tjaHVua0lkXSk7XG4gXHRcdFx0aW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdID0gMDtcbiBcdFx0fVxuIFx0XHRmb3IobW9kdWxlSWQgaW4gbW9yZU1vZHVsZXMpIHtcbiBcdFx0XHRtb2R1bGVzW21vZHVsZUlkXSA9IG1vcmVNb2R1bGVzW21vZHVsZUlkXTtcbiBcdFx0fVxuIFx0XHRpZihwYXJlbnRKc29ucEZ1bmN0aW9uKSBwYXJlbnRKc29ucEZ1bmN0aW9uKGNodW5rSWRzLCBtb3JlTW9kdWxlcyk7XG4gXHRcdHdoaWxlKGNhbGxiYWNrcy5sZW5ndGgpXG4gXHRcdFx0Y2FsbGJhY2tzLnNoaWZ0KCkuY2FsbChudWxsLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcbiBcdFx0aWYobW9yZU1vZHVsZXNbMF0pIHtcbiBcdFx0XHRpbnN0YWxsZWRNb2R1bGVzWzBdID0gMDtcbiBcdFx0XHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gb2JqZWN0IHRvIHN0b3JlIGxvYWRlZCBhbmQgbG9hZGluZyBjaHVua3NcbiBcdC8vIFwiMFwiIG1lYW5zIFwiYWxyZWFkeSBsb2FkZWRcIlxuIFx0Ly8gQXJyYXkgbWVhbnMgXCJsb2FkaW5nXCIsIGFycmF5IGNvbnRhaW5zIGNhbGxiYWNrc1xuIFx0dmFyIGluc3RhbGxlZENodW5rcyA9IHtcbiBcdFx0MTowXG4gXHR9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcblxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0ZXhwb3J0czoge30sXG4gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuIFx0XHRcdGxvYWRlZDogZmFsc2VcbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cbiBcdC8vIFRoaXMgZmlsZSBjb250YWlucyBvbmx5IHRoZSBlbnRyeSBjaHVuay5cbiBcdC8vIFRoZSBjaHVuayBsb2FkaW5nIGZ1bmN0aW9uIGZvciBhZGRpdGlvbmFsIGNodW5rc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5lID0gZnVuY3Rpb24gcmVxdWlyZUVuc3VyZShjaHVua0lkLCBjYWxsYmFjaykge1xuIFx0XHQvLyBcIjBcIiBpcyB0aGUgc2lnbmFsIGZvciBcImFscmVhZHkgbG9hZGVkXCJcbiBcdFx0aWYoaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdID09PSAwKVxuIFx0XHRcdHJldHVybiBjYWxsYmFjay5jYWxsKG51bGwsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIGFuIGFycmF5IG1lYW5zIFwiY3VycmVudGx5IGxvYWRpbmdcIi5cbiBcdFx0aWYoaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdICE9PSB1bmRlZmluZWQpIHtcbiBcdFx0XHRpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0ucHVzaChjYWxsYmFjayk7XG4gXHRcdH0gZWxzZSB7XG4gXHRcdFx0Ly8gc3RhcnQgY2h1bmsgbG9hZGluZ1xuIFx0XHRcdGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9IFtjYWxsYmFja107XG4gXHRcdFx0dmFyIGhlYWQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaGVhZCcpWzBdO1xuIFx0XHRcdHZhciBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcbiBcdFx0XHRzY3JpcHQudHlwZSA9ICd0ZXh0L2phdmFzY3JpcHQnO1xuIFx0XHRcdHNjcmlwdC5jaGFyc2V0ID0gJ3V0Zi04JztcbiBcdFx0XHRzY3JpcHQuYXN5bmMgPSB0cnVlO1xuXG4gXHRcdFx0c2NyaXB0LnNyYyA9IF9fd2VicGFja19yZXF1aXJlX18ucCArIFwiXCIgKyBjaHVua0lkICsgXCIuYXBwLmpzXCI7XG4gXHRcdFx0aGVhZC5hcHBlbmRDaGlsZChzY3JpcHQpO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogd2VicGFjay9ib290c3RyYXAgYTQ4ZjQ1NTM2YTg2OTFjOTY1ZGJcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IGdsb2JhbFtcIlRldGhlclwiXSA9IHJlcXVpcmUoXCItIS9Vc2Vycy9yYWZhZWxub3dyb3Rlay9Eb2N1bWVudHMvUHJvamVrdGUvS2lja3NBcHAvV29ya3NwYWNlL2tpY2tzLWFwcC13b3JkcHJlc3Mvd3AtY29udGVudC90aGVtZXMva2lja3MtYXBwL25vZGVfbW9kdWxlcy9leHBvc2UtbG9hZGVyL2luZGV4LmpzPyQhL1VzZXJzL3JhZmFlbG5vd3JvdGVrL0RvY3VtZW50cy9Qcm9qZWt0ZS9LaWNrc0FwcC9Xb3Jrc3BhY2Uva2lja3MtYXBwLXdvcmRwcmVzcy93cC1jb250ZW50L3RoZW1lcy9raWNrcy1hcHAvbm9kZV9tb2R1bGVzL3RldGhlci9kaXN0L2pzL3RldGhlci5qc1wiKTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi90ZXRoZXIvZGlzdC9qcy90ZXRoZXIuanNcbiAqKiBtb2R1bGUgaWQgPSAyXG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IGdsb2JhbFtcIiRcIl0gPSByZXF1aXJlKFwiLSEvVXNlcnMvcmFmYWVsbm93cm90ZWsvRG9jdW1lbnRzL1Byb2pla3RlL0tpY2tzQXBwL1dvcmtzcGFjZS9raWNrcy1hcHAtd29yZHByZXNzL3dwLWNvbnRlbnQvdGhlbWVzL2tpY2tzLWFwcC9ub2RlX21vZHVsZXMvdGV0aGVyL2Rpc3QvanMvdGV0aGVyLmpzXCIpO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2V4cG9zZS1sb2FkZXI/JCEuL34vdGV0aGVyL2Rpc3QvanMvdGV0aGVyLmpzXG4gKiogbW9kdWxlIGlkID0gM1xuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiLyohIHRldGhlciAxLjMuNyAqL1xuXG4oZnVuY3Rpb24ocm9vdCwgZmFjdG9yeSkge1xuICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgZGVmaW5lKGZhY3RvcnkpO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jykge1xuICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShyZXF1aXJlLCBleHBvcnRzLCBtb2R1bGUpO1xuICB9IGVsc2Uge1xuICAgIHJvb3QuVGV0aGVyID0gZmFjdG9yeSgpO1xuICB9XG59KHRoaXMsIGZ1bmN0aW9uKHJlcXVpcmUsIGV4cG9ydHMsIG1vZHVsZSkge1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSAoZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCd2YWx1ZScgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0pKCk7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uJyk7IH0gfVxuXG52YXIgVGV0aGVyQmFzZSA9IHVuZGVmaW5lZDtcbmlmICh0eXBlb2YgVGV0aGVyQmFzZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgVGV0aGVyQmFzZSA9IHsgbW9kdWxlczogW10gfTtcbn1cblxudmFyIHplcm9FbGVtZW50ID0gbnVsbDtcblxuLy8gU2FtZSBhcyBuYXRpdmUgZ2V0Qm91bmRpbmdDbGllbnRSZWN0LCBleGNlcHQgaXQgdGFrZXMgaW50byBhY2NvdW50IHBhcmVudCA8ZnJhbWU+IG9mZnNldHNcbi8vIGlmIHRoZSBlbGVtZW50IGxpZXMgd2l0aGluIGEgbmVzdGVkIGRvY3VtZW50ICg8ZnJhbWU+IG9yIDxpZnJhbWU+LWxpa2UpLlxuZnVuY3Rpb24gZ2V0QWN0dWFsQm91bmRpbmdDbGllbnRSZWN0KG5vZGUpIHtcbiAgdmFyIGJvdW5kaW5nUmVjdCA9IG5vZGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cbiAgLy8gVGhlIG9yaWdpbmFsIG9iamVjdCByZXR1cm5lZCBieSBnZXRCb3VuZGluZ0NsaWVudFJlY3QgaXMgaW1tdXRhYmxlLCBzbyB3ZSBjbG9uZSBpdFxuICAvLyBXZSBjYW4ndCB1c2UgZXh0ZW5kIGJlY2F1c2UgdGhlIHByb3BlcnRpZXMgYXJlIG5vdCBjb25zaWRlcmVkIHBhcnQgb2YgdGhlIG9iamVjdCBieSBoYXNPd25Qcm9wZXJ0eSBpbiBJRTlcbiAgdmFyIHJlY3QgPSB7fTtcbiAgZm9yICh2YXIgayBpbiBib3VuZGluZ1JlY3QpIHtcbiAgICByZWN0W2tdID0gYm91bmRpbmdSZWN0W2tdO1xuICB9XG5cbiAgaWYgKG5vZGUub3duZXJEb2N1bWVudCAhPT0gZG9jdW1lbnQpIHtcbiAgICB2YXIgX2ZyYW1lRWxlbWVudCA9IG5vZGUub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldy5mcmFtZUVsZW1lbnQ7XG4gICAgaWYgKF9mcmFtZUVsZW1lbnQpIHtcbiAgICAgIHZhciBmcmFtZVJlY3QgPSBnZXRBY3R1YWxCb3VuZGluZ0NsaWVudFJlY3QoX2ZyYW1lRWxlbWVudCk7XG4gICAgICByZWN0LnRvcCArPSBmcmFtZVJlY3QudG9wO1xuICAgICAgcmVjdC5ib3R0b20gKz0gZnJhbWVSZWN0LnRvcDtcbiAgICAgIHJlY3QubGVmdCArPSBmcmFtZVJlY3QubGVmdDtcbiAgICAgIHJlY3QucmlnaHQgKz0gZnJhbWVSZWN0LmxlZnQ7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlY3Q7XG59XG5cbmZ1bmN0aW9uIGdldFNjcm9sbFBhcmVudHMoZWwpIHtcbiAgLy8gSW4gZmlyZWZveCBpZiB0aGUgZWwgaXMgaW5zaWRlIGFuIGlmcmFtZSB3aXRoIGRpc3BsYXk6IG5vbmU7IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKCkgd2lsbCByZXR1cm4gbnVsbDtcbiAgLy8gaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9NTQ4Mzk3XG4gIHZhciBjb21wdXRlZFN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZShlbCkgfHwge307XG4gIHZhciBwb3NpdGlvbiA9IGNvbXB1dGVkU3R5bGUucG9zaXRpb247XG4gIHZhciBwYXJlbnRzID0gW107XG5cbiAgaWYgKHBvc2l0aW9uID09PSAnZml4ZWQnKSB7XG4gICAgcmV0dXJuIFtlbF07XG4gIH1cblxuICB2YXIgcGFyZW50ID0gZWw7XG4gIHdoaWxlICgocGFyZW50ID0gcGFyZW50LnBhcmVudE5vZGUpICYmIHBhcmVudCAmJiBwYXJlbnQubm9kZVR5cGUgPT09IDEpIHtcbiAgICB2YXIgc3R5bGUgPSB1bmRlZmluZWQ7XG4gICAgdHJ5IHtcbiAgICAgIHN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZShwYXJlbnQpO1xuICAgIH0gY2F0Y2ggKGVycikge31cblxuICAgIGlmICh0eXBlb2Ygc3R5bGUgPT09ICd1bmRlZmluZWQnIHx8IHN0eWxlID09PSBudWxsKSB7XG4gICAgICBwYXJlbnRzLnB1c2gocGFyZW50KTtcbiAgICAgIHJldHVybiBwYXJlbnRzO1xuICAgIH1cblxuICAgIHZhciBfc3R5bGUgPSBzdHlsZTtcbiAgICB2YXIgb3ZlcmZsb3cgPSBfc3R5bGUub3ZlcmZsb3c7XG4gICAgdmFyIG92ZXJmbG93WCA9IF9zdHlsZS5vdmVyZmxvd1g7XG4gICAgdmFyIG92ZXJmbG93WSA9IF9zdHlsZS5vdmVyZmxvd1k7XG5cbiAgICBpZiAoLyhhdXRvfHNjcm9sbCkvLnRlc3Qob3ZlcmZsb3cgKyBvdmVyZmxvd1kgKyBvdmVyZmxvd1gpKSB7XG4gICAgICBpZiAocG9zaXRpb24gIT09ICdhYnNvbHV0ZScgfHwgWydyZWxhdGl2ZScsICdhYnNvbHV0ZScsICdmaXhlZCddLmluZGV4T2Yoc3R5bGUucG9zaXRpb24pID49IDApIHtcbiAgICAgICAgcGFyZW50cy5wdXNoKHBhcmVudCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcGFyZW50cy5wdXNoKGVsLm93bmVyRG9jdW1lbnQuYm9keSk7XG5cbiAgLy8gSWYgdGhlIG5vZGUgaXMgd2l0aGluIGEgZnJhbWUsIGFjY291bnQgZm9yIHRoZSBwYXJlbnQgd2luZG93IHNjcm9sbFxuICBpZiAoZWwub3duZXJEb2N1bWVudCAhPT0gZG9jdW1lbnQpIHtcbiAgICBwYXJlbnRzLnB1c2goZWwub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldyk7XG4gIH1cblxuICByZXR1cm4gcGFyZW50cztcbn1cblxudmFyIHVuaXF1ZUlkID0gKGZ1bmN0aW9uICgpIHtcbiAgdmFyIGlkID0gMDtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gKytpZDtcbiAgfTtcbn0pKCk7XG5cbnZhciB6ZXJvUG9zQ2FjaGUgPSB7fTtcbnZhciBnZXRPcmlnaW4gPSBmdW5jdGlvbiBnZXRPcmlnaW4oKSB7XG4gIC8vIGdldEJvdW5kaW5nQ2xpZW50UmVjdCBpcyB1bmZvcnR1bmF0ZWx5IHRvbyBhY2N1cmF0ZS4gIEl0IGludHJvZHVjZXMgYSBwaXhlbCBvciB0d28gb2ZcbiAgLy8gaml0dGVyIGFzIHRoZSB1c2VyIHNjcm9sbHMgdGhhdCBtZXNzZXMgd2l0aCBvdXIgYWJpbGl0eSB0byBkZXRlY3QgaWYgdHdvIHBvc2l0aW9uc1xuICAvLyBhcmUgZXF1aXZpbGFudCBvciBub3QuICBXZSBwbGFjZSBhbiBlbGVtZW50IGF0IHRoZSB0b3AgbGVmdCBvZiB0aGUgcGFnZSB0aGF0IHdpbGxcbiAgLy8gZ2V0IHRoZSBzYW1lIGppdHRlciwgc28gd2UgY2FuIGNhbmNlbCB0aGUgdHdvIG91dC5cbiAgdmFyIG5vZGUgPSB6ZXJvRWxlbWVudDtcbiAgaWYgKCFub2RlKSB7XG4gICAgbm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIG5vZGUuc2V0QXR0cmlidXRlKCdkYXRhLXRldGhlci1pZCcsIHVuaXF1ZUlkKCkpO1xuICAgIGV4dGVuZChub2RlLnN0eWxlLCB7XG4gICAgICB0b3A6IDAsXG4gICAgICBsZWZ0OiAwLFxuICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZSdcbiAgICB9KTtcblxuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobm9kZSk7XG5cbiAgICB6ZXJvRWxlbWVudCA9IG5vZGU7XG4gIH1cblxuICB2YXIgaWQgPSBub2RlLmdldEF0dHJpYnV0ZSgnZGF0YS10ZXRoZXItaWQnKTtcbiAgaWYgKHR5cGVvZiB6ZXJvUG9zQ2FjaGVbaWRdID09PSAndW5kZWZpbmVkJykge1xuICAgIHplcm9Qb3NDYWNoZVtpZF0gPSBnZXRBY3R1YWxCb3VuZGluZ0NsaWVudFJlY3Qobm9kZSk7XG5cbiAgICAvLyBDbGVhciB0aGUgY2FjaGUgd2hlbiB0aGlzIHBvc2l0aW9uIGNhbGwgaXMgZG9uZVxuICAgIGRlZmVyKGZ1bmN0aW9uICgpIHtcbiAgICAgIGRlbGV0ZSB6ZXJvUG9zQ2FjaGVbaWRdO1xuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIHplcm9Qb3NDYWNoZVtpZF07XG59O1xuXG5mdW5jdGlvbiByZW1vdmVVdGlsRWxlbWVudHMoKSB7XG4gIGlmICh6ZXJvRWxlbWVudCkge1xuICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoemVyb0VsZW1lbnQpO1xuICB9XG4gIHplcm9FbGVtZW50ID0gbnVsbDtcbn07XG5cbmZ1bmN0aW9uIGdldEJvdW5kcyhlbCkge1xuICB2YXIgZG9jID0gdW5kZWZpbmVkO1xuICBpZiAoZWwgPT09IGRvY3VtZW50KSB7XG4gICAgZG9jID0gZG9jdW1lbnQ7XG4gICAgZWwgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG4gIH0gZWxzZSB7XG4gICAgZG9jID0gZWwub3duZXJEb2N1bWVudDtcbiAgfVxuXG4gIHZhciBkb2NFbCA9IGRvYy5kb2N1bWVudEVsZW1lbnQ7XG5cbiAgdmFyIGJveCA9IGdldEFjdHVhbEJvdW5kaW5nQ2xpZW50UmVjdChlbCk7XG5cbiAgdmFyIG9yaWdpbiA9IGdldE9yaWdpbigpO1xuXG4gIGJveC50b3AgLT0gb3JpZ2luLnRvcDtcbiAgYm94LmxlZnQgLT0gb3JpZ2luLmxlZnQ7XG5cbiAgaWYgKHR5cGVvZiBib3gud2lkdGggPT09ICd1bmRlZmluZWQnKSB7XG4gICAgYm94LndpZHRoID0gZG9jdW1lbnQuYm9keS5zY3JvbGxXaWR0aCAtIGJveC5sZWZ0IC0gYm94LnJpZ2h0O1xuICB9XG4gIGlmICh0eXBlb2YgYm94LmhlaWdodCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBib3guaGVpZ2h0ID0gZG9jdW1lbnQuYm9keS5zY3JvbGxIZWlnaHQgLSBib3gudG9wIC0gYm94LmJvdHRvbTtcbiAgfVxuXG4gIGJveC50b3AgPSBib3gudG9wIC0gZG9jRWwuY2xpZW50VG9wO1xuICBib3gubGVmdCA9IGJveC5sZWZ0IC0gZG9jRWwuY2xpZW50TGVmdDtcbiAgYm94LnJpZ2h0ID0gZG9jLmJvZHkuY2xpZW50V2lkdGggLSBib3gud2lkdGggLSBib3gubGVmdDtcbiAgYm94LmJvdHRvbSA9IGRvYy5ib2R5LmNsaWVudEhlaWdodCAtIGJveC5oZWlnaHQgLSBib3gudG9wO1xuXG4gIHJldHVybiBib3g7XG59XG5cbmZ1bmN0aW9uIGdldE9mZnNldFBhcmVudChlbCkge1xuICByZXR1cm4gZWwub2Zmc2V0UGFyZW50IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcbn1cblxudmFyIF9zY3JvbGxCYXJTaXplID0gbnVsbDtcbmZ1bmN0aW9uIGdldFNjcm9sbEJhclNpemUoKSB7XG4gIGlmIChfc2Nyb2xsQmFyU2l6ZSkge1xuICAgIHJldHVybiBfc2Nyb2xsQmFyU2l6ZTtcbiAgfVxuICB2YXIgaW5uZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgaW5uZXIuc3R5bGUud2lkdGggPSAnMTAwJSc7XG4gIGlubmVyLnN0eWxlLmhlaWdodCA9ICcyMDBweCc7XG5cbiAgdmFyIG91dGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGV4dGVuZChvdXRlci5zdHlsZSwge1xuICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgIHRvcDogMCxcbiAgICBsZWZ0OiAwLFxuICAgIHBvaW50ZXJFdmVudHM6ICdub25lJyxcbiAgICB2aXNpYmlsaXR5OiAnaGlkZGVuJyxcbiAgICB3aWR0aDogJzIwMHB4JyxcbiAgICBoZWlnaHQ6ICcxNTBweCcsXG4gICAgb3ZlcmZsb3c6ICdoaWRkZW4nXG4gIH0pO1xuXG4gIG91dGVyLmFwcGVuZENoaWxkKGlubmVyKTtcblxuICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG91dGVyKTtcblxuICB2YXIgd2lkdGhDb250YWluZWQgPSBpbm5lci5vZmZzZXRXaWR0aDtcbiAgb3V0ZXIuc3R5bGUub3ZlcmZsb3cgPSAnc2Nyb2xsJztcbiAgdmFyIHdpZHRoU2Nyb2xsID0gaW5uZXIub2Zmc2V0V2lkdGg7XG5cbiAgaWYgKHdpZHRoQ29udGFpbmVkID09PSB3aWR0aFNjcm9sbCkge1xuICAgIHdpZHRoU2Nyb2xsID0gb3V0ZXIuY2xpZW50V2lkdGg7XG4gIH1cblxuICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKG91dGVyKTtcblxuICB2YXIgd2lkdGggPSB3aWR0aENvbnRhaW5lZCAtIHdpZHRoU2Nyb2xsO1xuXG4gIF9zY3JvbGxCYXJTaXplID0geyB3aWR0aDogd2lkdGgsIGhlaWdodDogd2lkdGggfTtcbiAgcmV0dXJuIF9zY3JvbGxCYXJTaXplO1xufVxuXG5mdW5jdGlvbiBleHRlbmQoKSB7XG4gIHZhciBvdXQgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDAgfHwgYXJndW1lbnRzWzBdID09PSB1bmRlZmluZWQgPyB7fSA6IGFyZ3VtZW50c1swXTtcblxuICB2YXIgYXJncyA9IFtdO1xuXG4gIEFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KGFyZ3MsIGFyZ3VtZW50cyk7XG5cbiAgYXJncy5zbGljZSgxKS5mb3JFYWNoKGZ1bmN0aW9uIChvYmopIHtcbiAgICBpZiAob2JqKSB7XG4gICAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG4gICAgICAgIGlmICgoe30pLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7XG4gICAgICAgICAgb3V0W2tleV0gPSBvYmpba2V5XTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIG91dDtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlQ2xhc3MoZWwsIG5hbWUpIHtcbiAgaWYgKHR5cGVvZiBlbC5jbGFzc0xpc3QgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgbmFtZS5zcGxpdCgnICcpLmZvckVhY2goZnVuY3Rpb24gKGNscykge1xuICAgICAgaWYgKGNscy50cmltKCkpIHtcbiAgICAgICAgZWwuY2xhc3NMaXN0LnJlbW92ZShjbHMpO1xuICAgICAgfVxuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIHZhciByZWdleCA9IG5ldyBSZWdFeHAoJyhefCApJyArIG5hbWUuc3BsaXQoJyAnKS5qb2luKCd8JykgKyAnKCB8JCknLCAnZ2knKTtcbiAgICB2YXIgY2xhc3NOYW1lID0gZ2V0Q2xhc3NOYW1lKGVsKS5yZXBsYWNlKHJlZ2V4LCAnICcpO1xuICAgIHNldENsYXNzTmFtZShlbCwgY2xhc3NOYW1lKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBhZGRDbGFzcyhlbCwgbmFtZSkge1xuICBpZiAodHlwZW9mIGVsLmNsYXNzTGlzdCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBuYW1lLnNwbGl0KCcgJykuZm9yRWFjaChmdW5jdGlvbiAoY2xzKSB7XG4gICAgICBpZiAoY2xzLnRyaW0oKSkge1xuICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKGNscyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgcmVtb3ZlQ2xhc3MoZWwsIG5hbWUpO1xuICAgIHZhciBjbHMgPSBnZXRDbGFzc05hbWUoZWwpICsgKCcgJyArIG5hbWUpO1xuICAgIHNldENsYXNzTmFtZShlbCwgY2xzKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBoYXNDbGFzcyhlbCwgbmFtZSkge1xuICBpZiAodHlwZW9mIGVsLmNsYXNzTGlzdCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm4gZWwuY2xhc3NMaXN0LmNvbnRhaW5zKG5hbWUpO1xuICB9XG4gIHZhciBjbGFzc05hbWUgPSBnZXRDbGFzc05hbWUoZWwpO1xuICByZXR1cm4gbmV3IFJlZ0V4cCgnKF58ICknICsgbmFtZSArICcoIHwkKScsICdnaScpLnRlc3QoY2xhc3NOYW1lKTtcbn1cblxuZnVuY3Rpb24gZ2V0Q2xhc3NOYW1lKGVsKSB7XG4gIC8vIENhbid0IHVzZSBqdXN0IFNWR0FuaW1hdGVkU3RyaW5nIGhlcmUgc2luY2Ugbm9kZXMgd2l0aGluIGEgRnJhbWUgaW4gSUUgaGF2ZVxuICAvLyBjb21wbGV0ZWx5IHNlcGFyYXRlbHkgU1ZHQW5pbWF0ZWRTdHJpbmcgYmFzZSBjbGFzc2VzXG4gIGlmIChlbC5jbGFzc05hbWUgaW5zdGFuY2VvZiBlbC5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3LlNWR0FuaW1hdGVkU3RyaW5nKSB7XG4gICAgcmV0dXJuIGVsLmNsYXNzTmFtZS5iYXNlVmFsO1xuICB9XG4gIHJldHVybiBlbC5jbGFzc05hbWU7XG59XG5cbmZ1bmN0aW9uIHNldENsYXNzTmFtZShlbCwgY2xhc3NOYW1lKSB7XG4gIGVsLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCBjbGFzc05hbWUpO1xufVxuXG5mdW5jdGlvbiB1cGRhdGVDbGFzc2VzKGVsLCBhZGQsIGFsbCkge1xuICAvLyBPZiB0aGUgc2V0IG9mICdhbGwnIGNsYXNzZXMsIHdlIG5lZWQgdGhlICdhZGQnIGNsYXNzZXMsIGFuZCBvbmx5IHRoZVxuICAvLyAnYWRkJyBjbGFzc2VzIHRvIGJlIHNldC5cbiAgYWxsLmZvckVhY2goZnVuY3Rpb24gKGNscykge1xuICAgIGlmIChhZGQuaW5kZXhPZihjbHMpID09PSAtMSAmJiBoYXNDbGFzcyhlbCwgY2xzKSkge1xuICAgICAgcmVtb3ZlQ2xhc3MoZWwsIGNscyk7XG4gICAgfVxuICB9KTtcblxuICBhZGQuZm9yRWFjaChmdW5jdGlvbiAoY2xzKSB7XG4gICAgaWYgKCFoYXNDbGFzcyhlbCwgY2xzKSkge1xuICAgICAgYWRkQ2xhc3MoZWwsIGNscyk7XG4gICAgfVxuICB9KTtcbn1cblxudmFyIGRlZmVycmVkID0gW107XG5cbnZhciBkZWZlciA9IGZ1bmN0aW9uIGRlZmVyKGZuKSB7XG4gIGRlZmVycmVkLnB1c2goZm4pO1xufTtcblxudmFyIGZsdXNoID0gZnVuY3Rpb24gZmx1c2goKSB7XG4gIHZhciBmbiA9IHVuZGVmaW5lZDtcbiAgd2hpbGUgKGZuID0gZGVmZXJyZWQucG9wKCkpIHtcbiAgICBmbigpO1xuICB9XG59O1xuXG52YXIgRXZlbnRlZCA9IChmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIEV2ZW50ZWQoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEV2ZW50ZWQpO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKEV2ZW50ZWQsIFt7XG4gICAga2V5OiAnb24nLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvbihldmVudCwgaGFuZGxlciwgY3R4KSB7XG4gICAgICB2YXIgb25jZSA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMyB8fCBhcmd1bWVudHNbM10gPT09IHVuZGVmaW5lZCA/IGZhbHNlIDogYXJndW1lbnRzWzNdO1xuXG4gICAgICBpZiAodHlwZW9mIHRoaXMuYmluZGluZ3MgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHRoaXMuYmluZGluZ3MgPSB7fTtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgdGhpcy5iaW5kaW5nc1tldmVudF0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHRoaXMuYmluZGluZ3NbZXZlbnRdID0gW107XG4gICAgICB9XG4gICAgICB0aGlzLmJpbmRpbmdzW2V2ZW50XS5wdXNoKHsgaGFuZGxlcjogaGFuZGxlciwgY3R4OiBjdHgsIG9uY2U6IG9uY2UgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnb25jZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uY2UoZXZlbnQsIGhhbmRsZXIsIGN0eCkge1xuICAgICAgdGhpcy5vbihldmVudCwgaGFuZGxlciwgY3R4LCB0cnVlKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdvZmYnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvZmYoZXZlbnQsIGhhbmRsZXIpIHtcbiAgICAgIGlmICh0eXBlb2YgdGhpcy5iaW5kaW5ncyA9PT0gJ3VuZGVmaW5lZCcgfHwgdHlwZW9mIHRoaXMuYmluZGluZ3NbZXZlbnRdID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2YgaGFuZGxlciA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgZGVsZXRlIHRoaXMuYmluZGluZ3NbZXZlbnRdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICB3aGlsZSAoaSA8IHRoaXMuYmluZGluZ3NbZXZlbnRdLmxlbmd0aCkge1xuICAgICAgICAgIGlmICh0aGlzLmJpbmRpbmdzW2V2ZW50XVtpXS5oYW5kbGVyID09PSBoYW5kbGVyKSB7XG4gICAgICAgICAgICB0aGlzLmJpbmRpbmdzW2V2ZW50XS5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICsraTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICd0cmlnZ2VyJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gdHJpZ2dlcihldmVudCkge1xuICAgICAgaWYgKHR5cGVvZiB0aGlzLmJpbmRpbmdzICE9PSAndW5kZWZpbmVkJyAmJiB0aGlzLmJpbmRpbmdzW2V2ZW50XSkge1xuICAgICAgICB2YXIgaSA9IDA7XG5cbiAgICAgICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuID4gMSA/IF9sZW4gLSAxIDogMCksIF9rZXkgPSAxOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICAgICAgYXJnc1tfa2V5IC0gMV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgICAgIH1cblxuICAgICAgICB3aGlsZSAoaSA8IHRoaXMuYmluZGluZ3NbZXZlbnRdLmxlbmd0aCkge1xuICAgICAgICAgIHZhciBfYmluZGluZ3MkZXZlbnQkaSA9IHRoaXMuYmluZGluZ3NbZXZlbnRdW2ldO1xuICAgICAgICAgIHZhciBoYW5kbGVyID0gX2JpbmRpbmdzJGV2ZW50JGkuaGFuZGxlcjtcbiAgICAgICAgICB2YXIgY3R4ID0gX2JpbmRpbmdzJGV2ZW50JGkuY3R4O1xuICAgICAgICAgIHZhciBvbmNlID0gX2JpbmRpbmdzJGV2ZW50JGkub25jZTtcblxuICAgICAgICAgIHZhciBjb250ZXh0ID0gY3R4O1xuICAgICAgICAgIGlmICh0eXBlb2YgY29udGV4dCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIGNvbnRleHQgPSB0aGlzO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGhhbmRsZXIuYXBwbHkoY29udGV4dCwgYXJncyk7XG5cbiAgICAgICAgICBpZiAob25jZSkge1xuICAgICAgICAgICAgdGhpcy5iaW5kaW5nc1tldmVudF0uc3BsaWNlKGksIDEpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICArK2k7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIEV2ZW50ZWQ7XG59KSgpO1xuXG5UZXRoZXJCYXNlLlV0aWxzID0ge1xuICBnZXRBY3R1YWxCb3VuZGluZ0NsaWVudFJlY3Q6IGdldEFjdHVhbEJvdW5kaW5nQ2xpZW50UmVjdCxcbiAgZ2V0U2Nyb2xsUGFyZW50czogZ2V0U2Nyb2xsUGFyZW50cyxcbiAgZ2V0Qm91bmRzOiBnZXRCb3VuZHMsXG4gIGdldE9mZnNldFBhcmVudDogZ2V0T2Zmc2V0UGFyZW50LFxuICBleHRlbmQ6IGV4dGVuZCxcbiAgYWRkQ2xhc3M6IGFkZENsYXNzLFxuICByZW1vdmVDbGFzczogcmVtb3ZlQ2xhc3MsXG4gIGhhc0NsYXNzOiBoYXNDbGFzcyxcbiAgdXBkYXRlQ2xhc3NlczogdXBkYXRlQ2xhc3NlcyxcbiAgZGVmZXI6IGRlZmVyLFxuICBmbHVzaDogZmx1c2gsXG4gIHVuaXF1ZUlkOiB1bmlxdWVJZCxcbiAgRXZlbnRlZDogRXZlbnRlZCxcbiAgZ2V0U2Nyb2xsQmFyU2l6ZTogZ2V0U2Nyb2xsQmFyU2l6ZSxcbiAgcmVtb3ZlVXRpbEVsZW1lbnRzOiByZW1vdmVVdGlsRWxlbWVudHNcbn07XG4vKiBnbG9iYWxzIFRldGhlckJhc2UsIHBlcmZvcm1hbmNlICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIF9zbGljZWRUb0FycmF5ID0gKGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gc2xpY2VJdGVyYXRvcihhcnIsIGkpIHsgdmFyIF9hcnIgPSBbXTsgdmFyIF9uID0gdHJ1ZTsgdmFyIF9kID0gZmFsc2U7IHZhciBfZSA9IHVuZGVmaW5lZDsgdHJ5IHsgZm9yICh2YXIgX2kgPSBhcnJbU3ltYm9sLml0ZXJhdG9yXSgpLCBfczsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkgeyBfYXJyLnB1c2goX3MudmFsdWUpOyBpZiAoaSAmJiBfYXJyLmxlbmd0aCA9PT0gaSkgYnJlYWs7IH0gfSBjYXRjaCAoZXJyKSB7IF9kID0gdHJ1ZTsgX2UgPSBlcnI7IH0gZmluYWxseSB7IHRyeSB7IGlmICghX24gJiYgX2lbJ3JldHVybiddKSBfaVsncmV0dXJuJ10oKTsgfSBmaW5hbGx5IHsgaWYgKF9kKSB0aHJvdyBfZTsgfSB9IHJldHVybiBfYXJyOyB9IHJldHVybiBmdW5jdGlvbiAoYXJyLCBpKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHsgcmV0dXJuIGFycjsgfSBlbHNlIGlmIChTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGFycikpIHsgcmV0dXJuIHNsaWNlSXRlcmF0b3IoYXJyLCBpKTsgfSBlbHNlIHsgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZScpOyB9IH07IH0pKCk7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSAoZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCd2YWx1ZScgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0pKCk7XG5cbnZhciBfZ2V0ID0gZnVuY3Rpb24gZ2V0KF94NiwgX3g3LCBfeDgpIHsgdmFyIF9hZ2FpbiA9IHRydWU7IF9mdW5jdGlvbjogd2hpbGUgKF9hZ2FpbikgeyB2YXIgb2JqZWN0ID0gX3g2LCBwcm9wZXJ0eSA9IF94NywgcmVjZWl2ZXIgPSBfeDg7IF9hZ2FpbiA9IGZhbHNlOyBpZiAob2JqZWN0ID09PSBudWxsKSBvYmplY3QgPSBGdW5jdGlvbi5wcm90b3R5cGU7IHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHByb3BlcnR5KTsgaWYgKGRlc2MgPT09IHVuZGVmaW5lZCkgeyB2YXIgcGFyZW50ID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKG9iamVjdCk7IGlmIChwYXJlbnQgPT09IG51bGwpIHsgcmV0dXJuIHVuZGVmaW5lZDsgfSBlbHNlIHsgX3g2ID0gcGFyZW50OyBfeDcgPSBwcm9wZXJ0eTsgX3g4ID0gcmVjZWl2ZXI7IF9hZ2FpbiA9IHRydWU7IGRlc2MgPSBwYXJlbnQgPSB1bmRlZmluZWQ7IGNvbnRpbnVlIF9mdW5jdGlvbjsgfSB9IGVsc2UgaWYgKCd2YWx1ZScgaW4gZGVzYykgeyByZXR1cm4gZGVzYy52YWx1ZTsgfSBlbHNlIHsgdmFyIGdldHRlciA9IGRlc2MuZ2V0OyBpZiAoZ2V0dGVyID09PSB1bmRlZmluZWQpIHsgcmV0dXJuIHVuZGVmaW5lZDsgfSByZXR1cm4gZ2V0dGVyLmNhbGwocmVjZWl2ZXIpOyB9IH0gfTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24nKTsgfSB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09ICdmdW5jdGlvbicgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCdTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90ICcgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbmlmICh0eXBlb2YgVGV0aGVyQmFzZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgdGhyb3cgbmV3IEVycm9yKCdZb3UgbXVzdCBpbmNsdWRlIHRoZSB1dGlscy5qcyBmaWxlIGJlZm9yZSB0ZXRoZXIuanMnKTtcbn1cblxudmFyIF9UZXRoZXJCYXNlJFV0aWxzID0gVGV0aGVyQmFzZS5VdGlscztcbnZhciBnZXRTY3JvbGxQYXJlbnRzID0gX1RldGhlckJhc2UkVXRpbHMuZ2V0U2Nyb2xsUGFyZW50cztcbnZhciBnZXRCb3VuZHMgPSBfVGV0aGVyQmFzZSRVdGlscy5nZXRCb3VuZHM7XG52YXIgZ2V0T2Zmc2V0UGFyZW50ID0gX1RldGhlckJhc2UkVXRpbHMuZ2V0T2Zmc2V0UGFyZW50O1xudmFyIGV4dGVuZCA9IF9UZXRoZXJCYXNlJFV0aWxzLmV4dGVuZDtcbnZhciBhZGRDbGFzcyA9IF9UZXRoZXJCYXNlJFV0aWxzLmFkZENsYXNzO1xudmFyIHJlbW92ZUNsYXNzID0gX1RldGhlckJhc2UkVXRpbHMucmVtb3ZlQ2xhc3M7XG52YXIgdXBkYXRlQ2xhc3NlcyA9IF9UZXRoZXJCYXNlJFV0aWxzLnVwZGF0ZUNsYXNzZXM7XG52YXIgZGVmZXIgPSBfVGV0aGVyQmFzZSRVdGlscy5kZWZlcjtcbnZhciBmbHVzaCA9IF9UZXRoZXJCYXNlJFV0aWxzLmZsdXNoO1xudmFyIGdldFNjcm9sbEJhclNpemUgPSBfVGV0aGVyQmFzZSRVdGlscy5nZXRTY3JvbGxCYXJTaXplO1xudmFyIHJlbW92ZVV0aWxFbGVtZW50cyA9IF9UZXRoZXJCYXNlJFV0aWxzLnJlbW92ZVV0aWxFbGVtZW50cztcblxuZnVuY3Rpb24gd2l0aGluKGEsIGIpIHtcbiAgdmFyIGRpZmYgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDIgfHwgYXJndW1lbnRzWzJdID09PSB1bmRlZmluZWQgPyAxIDogYXJndW1lbnRzWzJdO1xuXG4gIHJldHVybiBhICsgZGlmZiA+PSBiICYmIGIgPj0gYSAtIGRpZmY7XG59XG5cbnZhciB0cmFuc2Zvcm1LZXkgPSAoZnVuY3Rpb24gKCkge1xuICBpZiAodHlwZW9mIGRvY3VtZW50ID09PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybiAnJztcbiAgfVxuICB2YXIgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICB2YXIgdHJhbnNmb3JtcyA9IFsndHJhbnNmb3JtJywgJ1dlYmtpdFRyYW5zZm9ybScsICdPVHJhbnNmb3JtJywgJ01velRyYW5zZm9ybScsICdtc1RyYW5zZm9ybSddO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHRyYW5zZm9ybXMubGVuZ3RoOyArK2kpIHtcbiAgICB2YXIga2V5ID0gdHJhbnNmb3Jtc1tpXTtcbiAgICBpZiAoZWwuc3R5bGVba2V5XSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4ga2V5O1xuICAgIH1cbiAgfVxufSkoKTtcblxudmFyIHRldGhlcnMgPSBbXTtcblxudmFyIHBvc2l0aW9uID0gZnVuY3Rpb24gcG9zaXRpb24oKSB7XG4gIHRldGhlcnMuZm9yRWFjaChmdW5jdGlvbiAodGV0aGVyKSB7XG4gICAgdGV0aGVyLnBvc2l0aW9uKGZhbHNlKTtcbiAgfSk7XG4gIGZsdXNoKCk7XG59O1xuXG5mdW5jdGlvbiBub3coKSB7XG4gIGlmICh0eXBlb2YgcGVyZm9ybWFuY2UgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBwZXJmb3JtYW5jZS5ub3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgcmV0dXJuIHBlcmZvcm1hbmNlLm5vdygpO1xuICB9XG4gIHJldHVybiArbmV3IERhdGUoKTtcbn1cblxuKGZ1bmN0aW9uICgpIHtcbiAgdmFyIGxhc3RDYWxsID0gbnVsbDtcbiAgdmFyIGxhc3REdXJhdGlvbiA9IG51bGw7XG4gIHZhciBwZW5kaW5nVGltZW91dCA9IG51bGw7XG5cbiAgdmFyIHRpY2sgPSBmdW5jdGlvbiB0aWNrKCkge1xuICAgIGlmICh0eXBlb2YgbGFzdER1cmF0aW9uICE9PSAndW5kZWZpbmVkJyAmJiBsYXN0RHVyYXRpb24gPiAxNikge1xuICAgICAgLy8gV2Ugdm9sdW50YXJpbHkgdGhyb3R0bGUgb3Vyc2VsdmVzIGlmIHdlIGNhbid0IG1hbmFnZSA2MGZwc1xuICAgICAgbGFzdER1cmF0aW9uID0gTWF0aC5taW4obGFzdER1cmF0aW9uIC0gMTYsIDI1MCk7XG5cbiAgICAgIC8vIEp1c3QgaW4gY2FzZSB0aGlzIGlzIHRoZSBsYXN0IGV2ZW50LCByZW1lbWJlciB0byBwb3NpdGlvbiBqdXN0IG9uY2UgbW9yZVxuICAgICAgcGVuZGluZ1RpbWVvdXQgPSBzZXRUaW1lb3V0KHRpY2ssIDI1MCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBsYXN0Q2FsbCAhPT0gJ3VuZGVmaW5lZCcgJiYgbm93KCkgLSBsYXN0Q2FsbCA8IDEwKSB7XG4gICAgICAvLyBTb21lIGJyb3dzZXJzIGNhbGwgZXZlbnRzIGEgbGl0dGxlIHRvbyBmcmVxdWVudGx5LCByZWZ1c2UgdG8gcnVuIG1vcmUgdGhhbiBpcyByZWFzb25hYmxlXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHBlbmRpbmdUaW1lb3V0ICE9IG51bGwpIHtcbiAgICAgIGNsZWFyVGltZW91dChwZW5kaW5nVGltZW91dCk7XG4gICAgICBwZW5kaW5nVGltZW91dCA9IG51bGw7XG4gICAgfVxuXG4gICAgbGFzdENhbGwgPSBub3coKTtcbiAgICBwb3NpdGlvbigpO1xuICAgIGxhc3REdXJhdGlvbiA9IG5vdygpIC0gbGFzdENhbGw7XG4gIH07XG5cbiAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBbJ3Jlc2l6ZScsICdzY3JvbGwnLCAndG91Y2htb3ZlJ10uZm9yRWFjaChmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCB0aWNrKTtcbiAgICB9KTtcbiAgfVxufSkoKTtcblxudmFyIE1JUlJPUl9MUiA9IHtcbiAgY2VudGVyOiAnY2VudGVyJyxcbiAgbGVmdDogJ3JpZ2h0JyxcbiAgcmlnaHQ6ICdsZWZ0J1xufTtcblxudmFyIE1JUlJPUl9UQiA9IHtcbiAgbWlkZGxlOiAnbWlkZGxlJyxcbiAgdG9wOiAnYm90dG9tJyxcbiAgYm90dG9tOiAndG9wJ1xufTtcblxudmFyIE9GRlNFVF9NQVAgPSB7XG4gIHRvcDogMCxcbiAgbGVmdDogMCxcbiAgbWlkZGxlOiAnNTAlJyxcbiAgY2VudGVyOiAnNTAlJyxcbiAgYm90dG9tOiAnMTAwJScsXG4gIHJpZ2h0OiAnMTAwJSdcbn07XG5cbnZhciBhdXRvVG9GaXhlZEF0dGFjaG1lbnQgPSBmdW5jdGlvbiBhdXRvVG9GaXhlZEF0dGFjaG1lbnQoYXR0YWNobWVudCwgcmVsYXRpdmVUb0F0dGFjaG1lbnQpIHtcbiAgdmFyIGxlZnQgPSBhdHRhY2htZW50LmxlZnQ7XG4gIHZhciB0b3AgPSBhdHRhY2htZW50LnRvcDtcblxuICBpZiAobGVmdCA9PT0gJ2F1dG8nKSB7XG4gICAgbGVmdCA9IE1JUlJPUl9MUltyZWxhdGl2ZVRvQXR0YWNobWVudC5sZWZ0XTtcbiAgfVxuXG4gIGlmICh0b3AgPT09ICdhdXRvJykge1xuICAgIHRvcCA9IE1JUlJPUl9UQltyZWxhdGl2ZVRvQXR0YWNobWVudC50b3BdO1xuICB9XG5cbiAgcmV0dXJuIHsgbGVmdDogbGVmdCwgdG9wOiB0b3AgfTtcbn07XG5cbnZhciBhdHRhY2htZW50VG9PZmZzZXQgPSBmdW5jdGlvbiBhdHRhY2htZW50VG9PZmZzZXQoYXR0YWNobWVudCkge1xuICB2YXIgbGVmdCA9IGF0dGFjaG1lbnQubGVmdDtcbiAgdmFyIHRvcCA9IGF0dGFjaG1lbnQudG9wO1xuXG4gIGlmICh0eXBlb2YgT0ZGU0VUX01BUFthdHRhY2htZW50LmxlZnRdICE9PSAndW5kZWZpbmVkJykge1xuICAgIGxlZnQgPSBPRkZTRVRfTUFQW2F0dGFjaG1lbnQubGVmdF07XG4gIH1cblxuICBpZiAodHlwZW9mIE9GRlNFVF9NQVBbYXR0YWNobWVudC50b3BdICE9PSAndW5kZWZpbmVkJykge1xuICAgIHRvcCA9IE9GRlNFVF9NQVBbYXR0YWNobWVudC50b3BdO1xuICB9XG5cbiAgcmV0dXJuIHsgbGVmdDogbGVmdCwgdG9wOiB0b3AgfTtcbn07XG5cbmZ1bmN0aW9uIGFkZE9mZnNldCgpIHtcbiAgdmFyIG91dCA9IHsgdG9wOiAwLCBsZWZ0OiAwIH07XG5cbiAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIG9mZnNldHMgPSBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICBvZmZzZXRzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICB9XG5cbiAgb2Zmc2V0cy5mb3JFYWNoKGZ1bmN0aW9uIChfcmVmKSB7XG4gICAgdmFyIHRvcCA9IF9yZWYudG9wO1xuICAgIHZhciBsZWZ0ID0gX3JlZi5sZWZ0O1xuXG4gICAgaWYgKHR5cGVvZiB0b3AgPT09ICdzdHJpbmcnKSB7XG4gICAgICB0b3AgPSBwYXJzZUZsb2F0KHRvcCwgMTApO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGxlZnQgPT09ICdzdHJpbmcnKSB7XG4gICAgICBsZWZ0ID0gcGFyc2VGbG9hdChsZWZ0LCAxMCk7XG4gICAgfVxuXG4gICAgb3V0LnRvcCArPSB0b3A7XG4gICAgb3V0LmxlZnQgKz0gbGVmdDtcbiAgfSk7XG5cbiAgcmV0dXJuIG91dDtcbn1cblxuZnVuY3Rpb24gb2Zmc2V0VG9QeChvZmZzZXQsIHNpemUpIHtcbiAgaWYgKHR5cGVvZiBvZmZzZXQubGVmdCA9PT0gJ3N0cmluZycgJiYgb2Zmc2V0LmxlZnQuaW5kZXhPZignJScpICE9PSAtMSkge1xuICAgIG9mZnNldC5sZWZ0ID0gcGFyc2VGbG9hdChvZmZzZXQubGVmdCwgMTApIC8gMTAwICogc2l6ZS53aWR0aDtcbiAgfVxuICBpZiAodHlwZW9mIG9mZnNldC50b3AgPT09ICdzdHJpbmcnICYmIG9mZnNldC50b3AuaW5kZXhPZignJScpICE9PSAtMSkge1xuICAgIG9mZnNldC50b3AgPSBwYXJzZUZsb2F0KG9mZnNldC50b3AsIDEwKSAvIDEwMCAqIHNpemUuaGVpZ2h0O1xuICB9XG5cbiAgcmV0dXJuIG9mZnNldDtcbn1cblxudmFyIHBhcnNlT2Zmc2V0ID0gZnVuY3Rpb24gcGFyc2VPZmZzZXQodmFsdWUpIHtcbiAgdmFyIF92YWx1ZSRzcGxpdCA9IHZhbHVlLnNwbGl0KCcgJyk7XG5cbiAgdmFyIF92YWx1ZSRzcGxpdDIgPSBfc2xpY2VkVG9BcnJheShfdmFsdWUkc3BsaXQsIDIpO1xuXG4gIHZhciB0b3AgPSBfdmFsdWUkc3BsaXQyWzBdO1xuICB2YXIgbGVmdCA9IF92YWx1ZSRzcGxpdDJbMV07XG5cbiAgcmV0dXJuIHsgdG9wOiB0b3AsIGxlZnQ6IGxlZnQgfTtcbn07XG52YXIgcGFyc2VBdHRhY2htZW50ID0gcGFyc2VPZmZzZXQ7XG5cbnZhciBUZXRoZXJDbGFzcyA9IChmdW5jdGlvbiAoX0V2ZW50ZWQpIHtcbiAgX2luaGVyaXRzKFRldGhlckNsYXNzLCBfRXZlbnRlZCk7XG5cbiAgZnVuY3Rpb24gVGV0aGVyQ2xhc3Mob3B0aW9ucykge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVGV0aGVyQ2xhc3MpO1xuXG4gICAgX2dldChPYmplY3QuZ2V0UHJvdG90eXBlT2YoVGV0aGVyQ2xhc3MucHJvdG90eXBlKSwgJ2NvbnN0cnVjdG9yJywgdGhpcykuY2FsbCh0aGlzKTtcbiAgICB0aGlzLnBvc2l0aW9uID0gdGhpcy5wb3NpdGlvbi5iaW5kKHRoaXMpO1xuXG4gICAgdGV0aGVycy5wdXNoKHRoaXMpO1xuXG4gICAgdGhpcy5oaXN0b3J5ID0gW107XG5cbiAgICB0aGlzLnNldE9wdGlvbnMob3B0aW9ucywgZmFsc2UpO1xuXG4gICAgVGV0aGVyQmFzZS5tb2R1bGVzLmZvckVhY2goZnVuY3Rpb24gKG1vZHVsZSkge1xuICAgICAgaWYgKHR5cGVvZiBtb2R1bGUuaW5pdGlhbGl6ZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgbW9kdWxlLmluaXRpYWxpemUuY2FsbChfdGhpcyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLnBvc2l0aW9uKCk7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoVGV0aGVyQ2xhc3MsIFt7XG4gICAga2V5OiAnZ2V0Q2xhc3MnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRDbGFzcygpIHtcbiAgICAgIHZhciBrZXkgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDAgfHwgYXJndW1lbnRzWzBdID09PSB1bmRlZmluZWQgPyAnJyA6IGFyZ3VtZW50c1swXTtcbiAgICAgIHZhciBjbGFzc2VzID0gdGhpcy5vcHRpb25zLmNsYXNzZXM7XG5cbiAgICAgIGlmICh0eXBlb2YgY2xhc3NlcyAhPT0gJ3VuZGVmaW5lZCcgJiYgY2xhc3Nlc1trZXldKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMuY2xhc3Nlc1trZXldO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLm9wdGlvbnMuY2xhc3NQcmVmaXgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5jbGFzc1ByZWZpeCArICctJyArIGtleTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBrZXk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnc2V0T3B0aW9ucycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNldE9wdGlvbnMob3B0aW9ucykge1xuICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgIHZhciBwb3MgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDEgfHwgYXJndW1lbnRzWzFdID09PSB1bmRlZmluZWQgPyB0cnVlIDogYXJndW1lbnRzWzFdO1xuXG4gICAgICB2YXIgZGVmYXVsdHMgPSB7XG4gICAgICAgIG9mZnNldDogJzAgMCcsXG4gICAgICAgIHRhcmdldE9mZnNldDogJzAgMCcsXG4gICAgICAgIHRhcmdldEF0dGFjaG1lbnQ6ICdhdXRvIGF1dG8nLFxuICAgICAgICBjbGFzc1ByZWZpeDogJ3RldGhlcidcbiAgICAgIH07XG5cbiAgICAgIHRoaXMub3B0aW9ucyA9IGV4dGVuZChkZWZhdWx0cywgb3B0aW9ucyk7XG5cbiAgICAgIHZhciBfb3B0aW9ucyA9IHRoaXMub3B0aW9ucztcbiAgICAgIHZhciBlbGVtZW50ID0gX29wdGlvbnMuZWxlbWVudDtcbiAgICAgIHZhciB0YXJnZXQgPSBfb3B0aW9ucy50YXJnZXQ7XG4gICAgICB2YXIgdGFyZ2V0TW9kaWZpZXIgPSBfb3B0aW9ucy50YXJnZXRNb2RpZmllcjtcblxuICAgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgICAgIHRoaXMudGFyZ2V0ID0gdGFyZ2V0O1xuICAgICAgdGhpcy50YXJnZXRNb2RpZmllciA9IHRhcmdldE1vZGlmaWVyO1xuXG4gICAgICBpZiAodGhpcy50YXJnZXQgPT09ICd2aWV3cG9ydCcpIHtcbiAgICAgICAgdGhpcy50YXJnZXQgPSBkb2N1bWVudC5ib2R5O1xuICAgICAgICB0aGlzLnRhcmdldE1vZGlmaWVyID0gJ3Zpc2libGUnO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLnRhcmdldCA9PT0gJ3Njcm9sbC1oYW5kbGUnKSB7XG4gICAgICAgIHRoaXMudGFyZ2V0ID0gZG9jdW1lbnQuYm9keTtcbiAgICAgICAgdGhpcy50YXJnZXRNb2RpZmllciA9ICdzY3JvbGwtaGFuZGxlJztcbiAgICAgIH1cblxuICAgICAgWydlbGVtZW50JywgJ3RhcmdldCddLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgICBpZiAodHlwZW9mIF90aGlzMltrZXldID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVGV0aGVyIEVycm9yOiBCb3RoIGVsZW1lbnQgYW5kIHRhcmdldCBtdXN0IGJlIGRlZmluZWQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0eXBlb2YgX3RoaXMyW2tleV0uanF1ZXJ5ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIF90aGlzMltrZXldID0gX3RoaXMyW2tleV1bMF07XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIF90aGlzMltrZXldID09PSAnc3RyaW5nJykge1xuICAgICAgICAgIF90aGlzMltrZXldID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihfdGhpczJba2V5XSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBhZGRDbGFzcyh0aGlzLmVsZW1lbnQsIHRoaXMuZ2V0Q2xhc3MoJ2VsZW1lbnQnKSk7XG4gICAgICBpZiAoISh0aGlzLm9wdGlvbnMuYWRkVGFyZ2V0Q2xhc3NlcyA9PT0gZmFsc2UpKSB7XG4gICAgICAgIGFkZENsYXNzKHRoaXMudGFyZ2V0LCB0aGlzLmdldENsYXNzKCd0YXJnZXQnKSk7XG4gICAgICB9XG5cbiAgICAgIGlmICghdGhpcy5vcHRpb25zLmF0dGFjaG1lbnQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUZXRoZXIgRXJyb3I6IFlvdSBtdXN0IHByb3ZpZGUgYW4gYXR0YWNobWVudCcpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnRhcmdldEF0dGFjaG1lbnQgPSBwYXJzZUF0dGFjaG1lbnQodGhpcy5vcHRpb25zLnRhcmdldEF0dGFjaG1lbnQpO1xuICAgICAgdGhpcy5hdHRhY2htZW50ID0gcGFyc2VBdHRhY2htZW50KHRoaXMub3B0aW9ucy5hdHRhY2htZW50KTtcbiAgICAgIHRoaXMub2Zmc2V0ID0gcGFyc2VPZmZzZXQodGhpcy5vcHRpb25zLm9mZnNldCk7XG4gICAgICB0aGlzLnRhcmdldE9mZnNldCA9IHBhcnNlT2Zmc2V0KHRoaXMub3B0aW9ucy50YXJnZXRPZmZzZXQpO1xuXG4gICAgICBpZiAodHlwZW9mIHRoaXMuc2Nyb2xsUGFyZW50cyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdGhpcy5kaXNhYmxlKCk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLnRhcmdldE1vZGlmaWVyID09PSAnc2Nyb2xsLWhhbmRsZScpIHtcbiAgICAgICAgdGhpcy5zY3JvbGxQYXJlbnRzID0gW3RoaXMudGFyZ2V0XTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuc2Nyb2xsUGFyZW50cyA9IGdldFNjcm9sbFBhcmVudHModGhpcy50YXJnZXQpO1xuICAgICAgfVxuXG4gICAgICBpZiAoISh0aGlzLm9wdGlvbnMuZW5hYmxlZCA9PT0gZmFsc2UpKSB7XG4gICAgICAgIHRoaXMuZW5hYmxlKHBvcyk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnZ2V0VGFyZ2V0Qm91bmRzJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VGFyZ2V0Qm91bmRzKCkge1xuICAgICAgaWYgKHR5cGVvZiB0aGlzLnRhcmdldE1vZGlmaWVyICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBpZiAodGhpcy50YXJnZXRNb2RpZmllciA9PT0gJ3Zpc2libGUnKSB7XG4gICAgICAgICAgaWYgKHRoaXMudGFyZ2V0ID09PSBkb2N1bWVudC5ib2R5KSB7XG4gICAgICAgICAgICByZXR1cm4geyB0b3A6IHBhZ2VZT2Zmc2V0LCBsZWZ0OiBwYWdlWE9mZnNldCwgaGVpZ2h0OiBpbm5lckhlaWdodCwgd2lkdGg6IGlubmVyV2lkdGggfTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIGJvdW5kcyA9IGdldEJvdW5kcyh0aGlzLnRhcmdldCk7XG5cbiAgICAgICAgICAgIHZhciBvdXQgPSB7XG4gICAgICAgICAgICAgIGhlaWdodDogYm91bmRzLmhlaWdodCxcbiAgICAgICAgICAgICAgd2lkdGg6IGJvdW5kcy53aWR0aCxcbiAgICAgICAgICAgICAgdG9wOiBib3VuZHMudG9wLFxuICAgICAgICAgICAgICBsZWZ0OiBib3VuZHMubGVmdFxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgb3V0LmhlaWdodCA9IE1hdGgubWluKG91dC5oZWlnaHQsIGJvdW5kcy5oZWlnaHQgLSAocGFnZVlPZmZzZXQgLSBib3VuZHMudG9wKSk7XG4gICAgICAgICAgICBvdXQuaGVpZ2h0ID0gTWF0aC5taW4ob3V0LmhlaWdodCwgYm91bmRzLmhlaWdodCAtIChib3VuZHMudG9wICsgYm91bmRzLmhlaWdodCAtIChwYWdlWU9mZnNldCArIGlubmVySGVpZ2h0KSkpO1xuICAgICAgICAgICAgb3V0LmhlaWdodCA9IE1hdGgubWluKGlubmVySGVpZ2h0LCBvdXQuaGVpZ2h0KTtcbiAgICAgICAgICAgIG91dC5oZWlnaHQgLT0gMjtcblxuICAgICAgICAgICAgb3V0LndpZHRoID0gTWF0aC5taW4ob3V0LndpZHRoLCBib3VuZHMud2lkdGggLSAocGFnZVhPZmZzZXQgLSBib3VuZHMubGVmdCkpO1xuICAgICAgICAgICAgb3V0LndpZHRoID0gTWF0aC5taW4ob3V0LndpZHRoLCBib3VuZHMud2lkdGggLSAoYm91bmRzLmxlZnQgKyBib3VuZHMud2lkdGggLSAocGFnZVhPZmZzZXQgKyBpbm5lcldpZHRoKSkpO1xuICAgICAgICAgICAgb3V0LndpZHRoID0gTWF0aC5taW4oaW5uZXJXaWR0aCwgb3V0LndpZHRoKTtcbiAgICAgICAgICAgIG91dC53aWR0aCAtPSAyO1xuXG4gICAgICAgICAgICBpZiAob3V0LnRvcCA8IHBhZ2VZT2Zmc2V0KSB7XG4gICAgICAgICAgICAgIG91dC50b3AgPSBwYWdlWU9mZnNldDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvdXQubGVmdCA8IHBhZ2VYT2Zmc2V0KSB7XG4gICAgICAgICAgICAgIG91dC5sZWZ0ID0gcGFnZVhPZmZzZXQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBvdXQ7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMudGFyZ2V0TW9kaWZpZXIgPT09ICdzY3JvbGwtaGFuZGxlJykge1xuICAgICAgICAgIHZhciBib3VuZHMgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgdmFyIHRhcmdldCA9IHRoaXMudGFyZ2V0O1xuICAgICAgICAgIGlmICh0YXJnZXQgPT09IGRvY3VtZW50LmJvZHkpIHtcbiAgICAgICAgICAgIHRhcmdldCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcblxuICAgICAgICAgICAgYm91bmRzID0ge1xuICAgICAgICAgICAgICBsZWZ0OiBwYWdlWE9mZnNldCxcbiAgICAgICAgICAgICAgdG9wOiBwYWdlWU9mZnNldCxcbiAgICAgICAgICAgICAgaGVpZ2h0OiBpbm5lckhlaWdodCxcbiAgICAgICAgICAgICAgd2lkdGg6IGlubmVyV2lkdGhcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGJvdW5kcyA9IGdldEJvdW5kcyh0YXJnZXQpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHZhciBzdHlsZSA9IGdldENvbXB1dGVkU3R5bGUodGFyZ2V0KTtcblxuICAgICAgICAgIHZhciBoYXNCb3R0b21TY3JvbGwgPSB0YXJnZXQuc2Nyb2xsV2lkdGggPiB0YXJnZXQuY2xpZW50V2lkdGggfHwgW3N0eWxlLm92ZXJmbG93LCBzdHlsZS5vdmVyZmxvd1hdLmluZGV4T2YoJ3Njcm9sbCcpID49IDAgfHwgdGhpcy50YXJnZXQgIT09IGRvY3VtZW50LmJvZHk7XG5cbiAgICAgICAgICB2YXIgc2Nyb2xsQm90dG9tID0gMDtcbiAgICAgICAgICBpZiAoaGFzQm90dG9tU2Nyb2xsKSB7XG4gICAgICAgICAgICBzY3JvbGxCb3R0b20gPSAxNTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB2YXIgaGVpZ2h0ID0gYm91bmRzLmhlaWdodCAtIHBhcnNlRmxvYXQoc3R5bGUuYm9yZGVyVG9wV2lkdGgpIC0gcGFyc2VGbG9hdChzdHlsZS5ib3JkZXJCb3R0b21XaWR0aCkgLSBzY3JvbGxCb3R0b207XG5cbiAgICAgICAgICB2YXIgb3V0ID0ge1xuICAgICAgICAgICAgd2lkdGg6IDE1LFxuICAgICAgICAgICAgaGVpZ2h0OiBoZWlnaHQgKiAwLjk3NSAqIChoZWlnaHQgLyB0YXJnZXQuc2Nyb2xsSGVpZ2h0KSxcbiAgICAgICAgICAgIGxlZnQ6IGJvdW5kcy5sZWZ0ICsgYm91bmRzLndpZHRoIC0gcGFyc2VGbG9hdChzdHlsZS5ib3JkZXJMZWZ0V2lkdGgpIC0gMTVcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgdmFyIGZpdEFkaiA9IDA7XG4gICAgICAgICAgaWYgKGhlaWdodCA8IDQwOCAmJiB0aGlzLnRhcmdldCA9PT0gZG9jdW1lbnQuYm9keSkge1xuICAgICAgICAgICAgZml0QWRqID0gLTAuMDAwMTEgKiBNYXRoLnBvdyhoZWlnaHQsIDIpIC0gMC4wMDcyNyAqIGhlaWdodCArIDIyLjU4O1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICh0aGlzLnRhcmdldCAhPT0gZG9jdW1lbnQuYm9keSkge1xuICAgICAgICAgICAgb3V0LmhlaWdodCA9IE1hdGgubWF4KG91dC5oZWlnaHQsIDI0KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB2YXIgc2Nyb2xsUGVyY2VudGFnZSA9IHRoaXMudGFyZ2V0LnNjcm9sbFRvcCAvICh0YXJnZXQuc2Nyb2xsSGVpZ2h0IC0gaGVpZ2h0KTtcbiAgICAgICAgICBvdXQudG9wID0gc2Nyb2xsUGVyY2VudGFnZSAqIChoZWlnaHQgLSBvdXQuaGVpZ2h0IC0gZml0QWRqKSArIGJvdW5kcy50b3AgKyBwYXJzZUZsb2F0KHN0eWxlLmJvcmRlclRvcFdpZHRoKTtcblxuICAgICAgICAgIGlmICh0aGlzLnRhcmdldCA9PT0gZG9jdW1lbnQuYm9keSkge1xuICAgICAgICAgICAgb3V0LmhlaWdodCA9IE1hdGgubWF4KG91dC5oZWlnaHQsIDI0KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gb3V0O1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZ2V0Qm91bmRzKHRoaXMudGFyZ2V0KTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdjbGVhckNhY2hlJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gY2xlYXJDYWNoZSgpIHtcbiAgICAgIHRoaXMuX2NhY2hlID0ge307XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnY2FjaGUnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjYWNoZShrLCBnZXR0ZXIpIHtcbiAgICAgIC8vIE1vcmUgdGhhbiBvbmUgbW9kdWxlIHdpbGwgb2Z0ZW4gbmVlZCB0aGUgc2FtZSBET00gaW5mbywgc29cbiAgICAgIC8vIHdlIGtlZXAgYSBjYWNoZSB3aGljaCBpcyBjbGVhcmVkIG9uIGVhY2ggcG9zaXRpb24gY2FsbFxuICAgICAgaWYgKHR5cGVvZiB0aGlzLl9jYWNoZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdGhpcy5fY2FjaGUgPSB7fTtcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiB0aGlzLl9jYWNoZVtrXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdGhpcy5fY2FjaGVba10gPSBnZXR0ZXIuY2FsbCh0aGlzKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlW2tdO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2VuYWJsZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGVuYWJsZSgpIHtcbiAgICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXG4gICAgICB2YXIgcG9zID0gYXJndW1lbnRzLmxlbmd0aCA8PSAwIHx8IGFyZ3VtZW50c1swXSA9PT0gdW5kZWZpbmVkID8gdHJ1ZSA6IGFyZ3VtZW50c1swXTtcblxuICAgICAgaWYgKCEodGhpcy5vcHRpb25zLmFkZFRhcmdldENsYXNzZXMgPT09IGZhbHNlKSkge1xuICAgICAgICBhZGRDbGFzcyh0aGlzLnRhcmdldCwgdGhpcy5nZXRDbGFzcygnZW5hYmxlZCcpKTtcbiAgICAgIH1cbiAgICAgIGFkZENsYXNzKHRoaXMuZWxlbWVudCwgdGhpcy5nZXRDbGFzcygnZW5hYmxlZCcpKTtcbiAgICAgIHRoaXMuZW5hYmxlZCA9IHRydWU7XG5cbiAgICAgIHRoaXMuc2Nyb2xsUGFyZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChwYXJlbnQpIHtcbiAgICAgICAgaWYgKHBhcmVudCAhPT0gX3RoaXMzLnRhcmdldC5vd25lckRvY3VtZW50KSB7XG4gICAgICAgICAgcGFyZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIF90aGlzMy5wb3NpdGlvbik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBpZiAocG9zKSB7XG4gICAgICAgIHRoaXMucG9zaXRpb24oKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdkaXNhYmxlJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZGlzYWJsZSgpIHtcbiAgICAgIHZhciBfdGhpczQgPSB0aGlzO1xuXG4gICAgICByZW1vdmVDbGFzcyh0aGlzLnRhcmdldCwgdGhpcy5nZXRDbGFzcygnZW5hYmxlZCcpKTtcbiAgICAgIHJlbW92ZUNsYXNzKHRoaXMuZWxlbWVudCwgdGhpcy5nZXRDbGFzcygnZW5hYmxlZCcpKTtcbiAgICAgIHRoaXMuZW5hYmxlZCA9IGZhbHNlO1xuXG4gICAgICBpZiAodHlwZW9mIHRoaXMuc2Nyb2xsUGFyZW50cyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdGhpcy5zY3JvbGxQYXJlbnRzLmZvckVhY2goZnVuY3Rpb24gKHBhcmVudCkge1xuICAgICAgICAgIHBhcmVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBfdGhpczQucG9zaXRpb24pO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdkZXN0cm95JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICAgIHZhciBfdGhpczUgPSB0aGlzO1xuXG4gICAgICB0aGlzLmRpc2FibGUoKTtcblxuICAgICAgdGV0aGVycy5mb3JFYWNoKGZ1bmN0aW9uICh0ZXRoZXIsIGkpIHtcbiAgICAgICAgaWYgKHRldGhlciA9PT0gX3RoaXM1KSB7XG4gICAgICAgICAgdGV0aGVycy5zcGxpY2UoaSwgMSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICAvLyBSZW1vdmUgYW55IGVsZW1lbnRzIHdlIHdlcmUgdXNpbmcgZm9yIGNvbnZlbmllbmNlIGZyb20gdGhlIERPTVxuICAgICAgaWYgKHRldGhlcnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJlbW92ZVV0aWxFbGVtZW50cygpO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3VwZGF0ZUF0dGFjaENsYXNzZXMnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVBdHRhY2hDbGFzc2VzKGVsZW1lbnRBdHRhY2gsIHRhcmdldEF0dGFjaCkge1xuICAgICAgdmFyIF90aGlzNiA9IHRoaXM7XG5cbiAgICAgIGVsZW1lbnRBdHRhY2ggPSBlbGVtZW50QXR0YWNoIHx8IHRoaXMuYXR0YWNobWVudDtcbiAgICAgIHRhcmdldEF0dGFjaCA9IHRhcmdldEF0dGFjaCB8fCB0aGlzLnRhcmdldEF0dGFjaG1lbnQ7XG4gICAgICB2YXIgc2lkZXMgPSBbJ2xlZnQnLCAndG9wJywgJ2JvdHRvbScsICdyaWdodCcsICdtaWRkbGUnLCAnY2VudGVyJ107XG5cbiAgICAgIGlmICh0eXBlb2YgdGhpcy5fYWRkQXR0YWNoQ2xhc3NlcyAhPT0gJ3VuZGVmaW5lZCcgJiYgdGhpcy5fYWRkQXR0YWNoQ2xhc3Nlcy5sZW5ndGgpIHtcbiAgICAgICAgLy8gdXBkYXRlQXR0YWNoQ2xhc3NlcyBjYW4gYmUgY2FsbGVkIG1vcmUgdGhhbiBvbmNlIGluIGEgcG9zaXRpb24gY2FsbCwgc29cbiAgICAgICAgLy8gd2UgbmVlZCB0byBjbGVhbiB1cCBhZnRlciBvdXJzZWx2ZXMgc3VjaCB0aGF0IHdoZW4gdGhlIGxhc3QgZGVmZXIgZ2V0c1xuICAgICAgICAvLyByYW4gaXQgZG9lc24ndCBhZGQgYW55IGV4dHJhIGNsYXNzZXMgZnJvbSBwcmV2aW91cyBjYWxscy5cbiAgICAgICAgdGhpcy5fYWRkQXR0YWNoQ2xhc3Nlcy5zcGxpY2UoMCwgdGhpcy5fYWRkQXR0YWNoQ2xhc3Nlcy5sZW5ndGgpO1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIHRoaXMuX2FkZEF0dGFjaENsYXNzZXMgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHRoaXMuX2FkZEF0dGFjaENsYXNzZXMgPSBbXTtcbiAgICAgIH1cbiAgICAgIHZhciBhZGQgPSB0aGlzLl9hZGRBdHRhY2hDbGFzc2VzO1xuXG4gICAgICBpZiAoZWxlbWVudEF0dGFjaC50b3ApIHtcbiAgICAgICAgYWRkLnB1c2godGhpcy5nZXRDbGFzcygnZWxlbWVudC1hdHRhY2hlZCcpICsgJy0nICsgZWxlbWVudEF0dGFjaC50b3ApO1xuICAgICAgfVxuICAgICAgaWYgKGVsZW1lbnRBdHRhY2gubGVmdCkge1xuICAgICAgICBhZGQucHVzaCh0aGlzLmdldENsYXNzKCdlbGVtZW50LWF0dGFjaGVkJykgKyAnLScgKyBlbGVtZW50QXR0YWNoLmxlZnQpO1xuICAgICAgfVxuICAgICAgaWYgKHRhcmdldEF0dGFjaC50b3ApIHtcbiAgICAgICAgYWRkLnB1c2godGhpcy5nZXRDbGFzcygndGFyZ2V0LWF0dGFjaGVkJykgKyAnLScgKyB0YXJnZXRBdHRhY2gudG9wKTtcbiAgICAgIH1cbiAgICAgIGlmICh0YXJnZXRBdHRhY2gubGVmdCkge1xuICAgICAgICBhZGQucHVzaCh0aGlzLmdldENsYXNzKCd0YXJnZXQtYXR0YWNoZWQnKSArICctJyArIHRhcmdldEF0dGFjaC5sZWZ0KTtcbiAgICAgIH1cblxuICAgICAgdmFyIGFsbCA9IFtdO1xuICAgICAgc2lkZXMuZm9yRWFjaChmdW5jdGlvbiAoc2lkZSkge1xuICAgICAgICBhbGwucHVzaChfdGhpczYuZ2V0Q2xhc3MoJ2VsZW1lbnQtYXR0YWNoZWQnKSArICctJyArIHNpZGUpO1xuICAgICAgICBhbGwucHVzaChfdGhpczYuZ2V0Q2xhc3MoJ3RhcmdldC1hdHRhY2hlZCcpICsgJy0nICsgc2lkZSk7XG4gICAgICB9KTtcblxuICAgICAgZGVmZXIoZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoISh0eXBlb2YgX3RoaXM2Ll9hZGRBdHRhY2hDbGFzc2VzICE9PSAndW5kZWZpbmVkJykpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB1cGRhdGVDbGFzc2VzKF90aGlzNi5lbGVtZW50LCBfdGhpczYuX2FkZEF0dGFjaENsYXNzZXMsIGFsbCk7XG4gICAgICAgIGlmICghKF90aGlzNi5vcHRpb25zLmFkZFRhcmdldENsYXNzZXMgPT09IGZhbHNlKSkge1xuICAgICAgICAgIHVwZGF0ZUNsYXNzZXMoX3RoaXM2LnRhcmdldCwgX3RoaXM2Ll9hZGRBdHRhY2hDbGFzc2VzLCBhbGwpO1xuICAgICAgICB9XG5cbiAgICAgICAgZGVsZXRlIF90aGlzNi5fYWRkQXR0YWNoQ2xhc3NlcztcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3Bvc2l0aW9uJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcG9zaXRpb24oKSB7XG4gICAgICB2YXIgX3RoaXM3ID0gdGhpcztcblxuICAgICAgdmFyIGZsdXNoQ2hhbmdlcyA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMCB8fCBhcmd1bWVudHNbMF0gPT09IHVuZGVmaW5lZCA/IHRydWUgOiBhcmd1bWVudHNbMF07XG5cbiAgICAgIC8vIGZsdXNoQ2hhbmdlcyBjb21taXRzIHRoZSBjaGFuZ2VzIGltbWVkaWF0ZWx5LCBsZWF2ZSB0cnVlIHVubGVzcyB5b3UgYXJlIHBvc2l0aW9uaW5nIG11bHRpcGxlXG4gICAgICAvLyB0ZXRoZXJzIChpbiB3aGljaCBjYXNlIGNhbGwgVGV0aGVyLlV0aWxzLmZsdXNoIHlvdXJzZWxmIHdoZW4geW91J3JlIGRvbmUpXG5cbiAgICAgIGlmICghdGhpcy5lbmFibGVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdGhpcy5jbGVhckNhY2hlKCk7XG5cbiAgICAgIC8vIFR1cm4gJ2F1dG8nIGF0dGFjaG1lbnRzIGludG8gdGhlIGFwcHJvcHJpYXRlIGNvcm5lciBvciBlZGdlXG4gICAgICB2YXIgdGFyZ2V0QXR0YWNobWVudCA9IGF1dG9Ub0ZpeGVkQXR0YWNobWVudCh0aGlzLnRhcmdldEF0dGFjaG1lbnQsIHRoaXMuYXR0YWNobWVudCk7XG5cbiAgICAgIHRoaXMudXBkYXRlQXR0YWNoQ2xhc3Nlcyh0aGlzLmF0dGFjaG1lbnQsIHRhcmdldEF0dGFjaG1lbnQpO1xuXG4gICAgICB2YXIgZWxlbWVudFBvcyA9IHRoaXMuY2FjaGUoJ2VsZW1lbnQtYm91bmRzJywgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gZ2V0Qm91bmRzKF90aGlzNy5lbGVtZW50KTtcbiAgICAgIH0pO1xuXG4gICAgICB2YXIgd2lkdGggPSBlbGVtZW50UG9zLndpZHRoO1xuICAgICAgdmFyIGhlaWdodCA9IGVsZW1lbnRQb3MuaGVpZ2h0O1xuXG4gICAgICBpZiAod2lkdGggPT09IDAgJiYgaGVpZ2h0ID09PSAwICYmIHR5cGVvZiB0aGlzLmxhc3RTaXplICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICB2YXIgX2xhc3RTaXplID0gdGhpcy5sYXN0U2l6ZTtcblxuICAgICAgICAvLyBXZSBjYWNoZSB0aGUgaGVpZ2h0IGFuZCB3aWR0aCB0byBtYWtlIGl0IHBvc3NpYmxlIHRvIHBvc2l0aW9uIGVsZW1lbnRzIHRoYXQgYXJlXG4gICAgICAgIC8vIGdldHRpbmcgaGlkZGVuLlxuICAgICAgICB3aWR0aCA9IF9sYXN0U2l6ZS53aWR0aDtcbiAgICAgICAgaGVpZ2h0ID0gX2xhc3RTaXplLmhlaWdodDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMubGFzdFNpemUgPSB7IHdpZHRoOiB3aWR0aCwgaGVpZ2h0OiBoZWlnaHQgfTtcbiAgICAgIH1cblxuICAgICAgdmFyIHRhcmdldFBvcyA9IHRoaXMuY2FjaGUoJ3RhcmdldC1ib3VuZHMnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfdGhpczcuZ2V0VGFyZ2V0Qm91bmRzKCk7XG4gICAgICB9KTtcbiAgICAgIHZhciB0YXJnZXRTaXplID0gdGFyZ2V0UG9zO1xuXG4gICAgICAvLyBHZXQgYW4gYWN0dWFsIHB4IG9mZnNldCBmcm9tIHRoZSBhdHRhY2htZW50XG4gICAgICB2YXIgb2Zmc2V0ID0gb2Zmc2V0VG9QeChhdHRhY2htZW50VG9PZmZzZXQodGhpcy5hdHRhY2htZW50KSwgeyB3aWR0aDogd2lkdGgsIGhlaWdodDogaGVpZ2h0IH0pO1xuICAgICAgdmFyIHRhcmdldE9mZnNldCA9IG9mZnNldFRvUHgoYXR0YWNobWVudFRvT2Zmc2V0KHRhcmdldEF0dGFjaG1lbnQpLCB0YXJnZXRTaXplKTtcblxuICAgICAgdmFyIG1hbnVhbE9mZnNldCA9IG9mZnNldFRvUHgodGhpcy5vZmZzZXQsIHsgd2lkdGg6IHdpZHRoLCBoZWlnaHQ6IGhlaWdodCB9KTtcbiAgICAgIHZhciBtYW51YWxUYXJnZXRPZmZzZXQgPSBvZmZzZXRUb1B4KHRoaXMudGFyZ2V0T2Zmc2V0LCB0YXJnZXRTaXplKTtcblxuICAgICAgLy8gQWRkIHRoZSBtYW51YWxseSBwcm92aWRlZCBvZmZzZXRcbiAgICAgIG9mZnNldCA9IGFkZE9mZnNldChvZmZzZXQsIG1hbnVhbE9mZnNldCk7XG4gICAgICB0YXJnZXRPZmZzZXQgPSBhZGRPZmZzZXQodGFyZ2V0T2Zmc2V0LCBtYW51YWxUYXJnZXRPZmZzZXQpO1xuXG4gICAgICAvLyBJdCdzIG5vdyBvdXIgZ29hbCB0byBtYWtlIChlbGVtZW50IHBvc2l0aW9uICsgb2Zmc2V0KSA9PSAodGFyZ2V0IHBvc2l0aW9uICsgdGFyZ2V0IG9mZnNldClcbiAgICAgIHZhciBsZWZ0ID0gdGFyZ2V0UG9zLmxlZnQgKyB0YXJnZXRPZmZzZXQubGVmdCAtIG9mZnNldC5sZWZ0O1xuICAgICAgdmFyIHRvcCA9IHRhcmdldFBvcy50b3AgKyB0YXJnZXRPZmZzZXQudG9wIC0gb2Zmc2V0LnRvcDtcblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBUZXRoZXJCYXNlLm1vZHVsZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdmFyIF9tb2R1bGUyID0gVGV0aGVyQmFzZS5tb2R1bGVzW2ldO1xuICAgICAgICB2YXIgcmV0ID0gX21vZHVsZTIucG9zaXRpb24uY2FsbCh0aGlzLCB7XG4gICAgICAgICAgbGVmdDogbGVmdCxcbiAgICAgICAgICB0b3A6IHRvcCxcbiAgICAgICAgICB0YXJnZXRBdHRhY2htZW50OiB0YXJnZXRBdHRhY2htZW50LFxuICAgICAgICAgIHRhcmdldFBvczogdGFyZ2V0UG9zLFxuICAgICAgICAgIGVsZW1lbnRQb3M6IGVsZW1lbnRQb3MsXG4gICAgICAgICAgb2Zmc2V0OiBvZmZzZXQsXG4gICAgICAgICAgdGFyZ2V0T2Zmc2V0OiB0YXJnZXRPZmZzZXQsXG4gICAgICAgICAgbWFudWFsT2Zmc2V0OiBtYW51YWxPZmZzZXQsXG4gICAgICAgICAgbWFudWFsVGFyZ2V0T2Zmc2V0OiBtYW51YWxUYXJnZXRPZmZzZXQsXG4gICAgICAgICAgc2Nyb2xsYmFyU2l6ZTogc2Nyb2xsYmFyU2l6ZSxcbiAgICAgICAgICBhdHRhY2htZW50OiB0aGlzLmF0dGFjaG1lbnRcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKHJldCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHJldCA9PT0gJ3VuZGVmaW5lZCcgfHwgdHlwZW9mIHJldCAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0b3AgPSByZXQudG9wO1xuICAgICAgICAgIGxlZnQgPSByZXQubGVmdDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBXZSBkZXNjcmliZSB0aGUgcG9zaXRpb24gdGhyZWUgZGlmZmVyZW50IHdheXMgdG8gZ2l2ZSB0aGUgb3B0aW1pemVyXG4gICAgICAvLyBhIGNoYW5jZSB0byBkZWNpZGUgdGhlIGJlc3QgcG9zc2libGUgd2F5IHRvIHBvc2l0aW9uIHRoZSBlbGVtZW50XG4gICAgICAvLyB3aXRoIHRoZSBmZXdlc3QgcmVwYWludHMuXG4gICAgICB2YXIgbmV4dCA9IHtcbiAgICAgICAgLy8gSXQncyBwb3NpdGlvbiByZWxhdGl2ZSB0byB0aGUgcGFnZSAoYWJzb2x1dGUgcG9zaXRpb25pbmcgd2hlblxuICAgICAgICAvLyB0aGUgZWxlbWVudCBpcyBhIGNoaWxkIG9mIHRoZSBib2R5KVxuICAgICAgICBwYWdlOiB7XG4gICAgICAgICAgdG9wOiB0b3AsXG4gICAgICAgICAgbGVmdDogbGVmdFxuICAgICAgICB9LFxuXG4gICAgICAgIC8vIEl0J3MgcG9zaXRpb24gcmVsYXRpdmUgdG8gdGhlIHZpZXdwb3J0IChmaXhlZCBwb3NpdGlvbmluZylcbiAgICAgICAgdmlld3BvcnQ6IHtcbiAgICAgICAgICB0b3A6IHRvcCAtIHBhZ2VZT2Zmc2V0LFxuICAgICAgICAgIGJvdHRvbTogcGFnZVlPZmZzZXQgLSB0b3AgLSBoZWlnaHQgKyBpbm5lckhlaWdodCxcbiAgICAgICAgICBsZWZ0OiBsZWZ0IC0gcGFnZVhPZmZzZXQsXG4gICAgICAgICAgcmlnaHQ6IHBhZ2VYT2Zmc2V0IC0gbGVmdCAtIHdpZHRoICsgaW5uZXJXaWR0aFxuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICB2YXIgZG9jID0gdGhpcy50YXJnZXQub3duZXJEb2N1bWVudDtcbiAgICAgIHZhciB3aW4gPSBkb2MuZGVmYXVsdFZpZXc7XG5cbiAgICAgIHZhciBzY3JvbGxiYXJTaXplID0gdW5kZWZpbmVkO1xuICAgICAgaWYgKHdpbi5pbm5lckhlaWdodCA+IGRvYy5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0KSB7XG4gICAgICAgIHNjcm9sbGJhclNpemUgPSB0aGlzLmNhY2hlKCdzY3JvbGxiYXItc2l6ZScsIGdldFNjcm9sbEJhclNpemUpO1xuICAgICAgICBuZXh0LnZpZXdwb3J0LmJvdHRvbSAtPSBzY3JvbGxiYXJTaXplLmhlaWdodDtcbiAgICAgIH1cblxuICAgICAgaWYgKHdpbi5pbm5lcldpZHRoID4gZG9jLmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCkge1xuICAgICAgICBzY3JvbGxiYXJTaXplID0gdGhpcy5jYWNoZSgnc2Nyb2xsYmFyLXNpemUnLCBnZXRTY3JvbGxCYXJTaXplKTtcbiAgICAgICAgbmV4dC52aWV3cG9ydC5yaWdodCAtPSBzY3JvbGxiYXJTaXplLndpZHRoO1xuICAgICAgfVxuXG4gICAgICBpZiAoWycnLCAnc3RhdGljJ10uaW5kZXhPZihkb2MuYm9keS5zdHlsZS5wb3NpdGlvbikgPT09IC0xIHx8IFsnJywgJ3N0YXRpYyddLmluZGV4T2YoZG9jLmJvZHkucGFyZW50RWxlbWVudC5zdHlsZS5wb3NpdGlvbikgPT09IC0xKSB7XG4gICAgICAgIC8vIEFic29sdXRlIHBvc2l0aW9uaW5nIGluIHRoZSBib2R5IHdpbGwgYmUgcmVsYXRpdmUgdG8gdGhlIHBhZ2UsIG5vdCB0aGUgJ2luaXRpYWwgY29udGFpbmluZyBibG9jaydcbiAgICAgICAgbmV4dC5wYWdlLmJvdHRvbSA9IGRvYy5ib2R5LnNjcm9sbEhlaWdodCAtIHRvcCAtIGhlaWdodDtcbiAgICAgICAgbmV4dC5wYWdlLnJpZ2h0ID0gZG9jLmJvZHkuc2Nyb2xsV2lkdGggLSBsZWZ0IC0gd2lkdGg7XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2YgdGhpcy5vcHRpb25zLm9wdGltaXphdGlvbnMgIT09ICd1bmRlZmluZWQnICYmIHRoaXMub3B0aW9ucy5vcHRpbWl6YXRpb25zLm1vdmVFbGVtZW50ICE9PSBmYWxzZSAmJiAhKHR5cGVvZiB0aGlzLnRhcmdldE1vZGlmaWVyICE9PSAndW5kZWZpbmVkJykpIHtcbiAgICAgICAgKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB2YXIgb2Zmc2V0UGFyZW50ID0gX3RoaXM3LmNhY2hlKCd0YXJnZXQtb2Zmc2V0cGFyZW50JywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIGdldE9mZnNldFBhcmVudChfdGhpczcudGFyZ2V0KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICB2YXIgb2Zmc2V0UG9zaXRpb24gPSBfdGhpczcuY2FjaGUoJ3RhcmdldC1vZmZzZXRwYXJlbnQtYm91bmRzJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIGdldEJvdW5kcyhvZmZzZXRQYXJlbnQpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHZhciBvZmZzZXRQYXJlbnRTdHlsZSA9IGdldENvbXB1dGVkU3R5bGUob2Zmc2V0UGFyZW50KTtcbiAgICAgICAgICB2YXIgb2Zmc2V0UGFyZW50U2l6ZSA9IG9mZnNldFBvc2l0aW9uO1xuXG4gICAgICAgICAgdmFyIG9mZnNldEJvcmRlciA9IHt9O1xuICAgICAgICAgIFsnVG9wJywgJ0xlZnQnLCAnQm90dG9tJywgJ1JpZ2h0J10uZm9yRWFjaChmdW5jdGlvbiAoc2lkZSkge1xuICAgICAgICAgICAgb2Zmc2V0Qm9yZGVyW3NpZGUudG9Mb3dlckNhc2UoKV0gPSBwYXJzZUZsb2F0KG9mZnNldFBhcmVudFN0eWxlWydib3JkZXInICsgc2lkZSArICdXaWR0aCddKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIG9mZnNldFBvc2l0aW9uLnJpZ2h0ID0gZG9jLmJvZHkuc2Nyb2xsV2lkdGggLSBvZmZzZXRQb3NpdGlvbi5sZWZ0IC0gb2Zmc2V0UGFyZW50U2l6ZS53aWR0aCArIG9mZnNldEJvcmRlci5yaWdodDtcbiAgICAgICAgICBvZmZzZXRQb3NpdGlvbi5ib3R0b20gPSBkb2MuYm9keS5zY3JvbGxIZWlnaHQgLSBvZmZzZXRQb3NpdGlvbi50b3AgLSBvZmZzZXRQYXJlbnRTaXplLmhlaWdodCArIG9mZnNldEJvcmRlci5ib3R0b207XG5cbiAgICAgICAgICBpZiAobmV4dC5wYWdlLnRvcCA+PSBvZmZzZXRQb3NpdGlvbi50b3AgKyBvZmZzZXRCb3JkZXIudG9wICYmIG5leHQucGFnZS5ib3R0b20gPj0gb2Zmc2V0UG9zaXRpb24uYm90dG9tKSB7XG4gICAgICAgICAgICBpZiAobmV4dC5wYWdlLmxlZnQgPj0gb2Zmc2V0UG9zaXRpb24ubGVmdCArIG9mZnNldEJvcmRlci5sZWZ0ICYmIG5leHQucGFnZS5yaWdodCA+PSBvZmZzZXRQb3NpdGlvbi5yaWdodCkge1xuICAgICAgICAgICAgICAvLyBXZSdyZSB3aXRoaW4gdGhlIHZpc2libGUgcGFydCBvZiB0aGUgdGFyZ2V0J3Mgc2Nyb2xsIHBhcmVudFxuICAgICAgICAgICAgICB2YXIgc2Nyb2xsVG9wID0gb2Zmc2V0UGFyZW50LnNjcm9sbFRvcDtcbiAgICAgICAgICAgICAgdmFyIHNjcm9sbExlZnQgPSBvZmZzZXRQYXJlbnQuc2Nyb2xsTGVmdDtcblxuICAgICAgICAgICAgICAvLyBJdCdzIHBvc2l0aW9uIHJlbGF0aXZlIHRvIHRoZSB0YXJnZXQncyBvZmZzZXQgcGFyZW50IChhYnNvbHV0ZSBwb3NpdGlvbmluZyB3aGVuXG4gICAgICAgICAgICAgIC8vIHRoZSBlbGVtZW50IGlzIG1vdmVkIHRvIGJlIGEgY2hpbGQgb2YgdGhlIHRhcmdldCdzIG9mZnNldCBwYXJlbnQpLlxuICAgICAgICAgICAgICBuZXh0Lm9mZnNldCA9IHtcbiAgICAgICAgICAgICAgICB0b3A6IG5leHQucGFnZS50b3AgLSBvZmZzZXRQb3NpdGlvbi50b3AgKyBzY3JvbGxUb3AgLSBvZmZzZXRCb3JkZXIudG9wLFxuICAgICAgICAgICAgICAgIGxlZnQ6IG5leHQucGFnZS5sZWZ0IC0gb2Zmc2V0UG9zaXRpb24ubGVmdCArIHNjcm9sbExlZnQgLSBvZmZzZXRCb3JkZXIubGVmdFxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSkoKTtcbiAgICAgIH1cblxuICAgICAgLy8gV2UgY291bGQgYWxzbyB0cmF2ZWwgdXAgdGhlIERPTSBhbmQgdHJ5IGVhY2ggY29udGFpbmluZyBjb250ZXh0LCByYXRoZXIgdGhhbiBvbmx5XG4gICAgICAvLyBsb29raW5nIGF0IHRoZSBib2R5LCBidXQgd2UncmUgZ29ubmEgZ2V0IGRpbWluaXNoaW5nIHJldHVybnMuXG5cbiAgICAgIHRoaXMubW92ZShuZXh0KTtcblxuICAgICAgdGhpcy5oaXN0b3J5LnVuc2hpZnQobmV4dCk7XG5cbiAgICAgIGlmICh0aGlzLmhpc3RvcnkubGVuZ3RoID4gMykge1xuICAgICAgICB0aGlzLmhpc3RvcnkucG9wKCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChmbHVzaENoYW5nZXMpIHtcbiAgICAgICAgZmx1c2goKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLy8gVEhFIElTU1VFXG4gIH0sIHtcbiAgICBrZXk6ICdtb3ZlJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gbW92ZShwb3MpIHtcbiAgICAgIHZhciBfdGhpczggPSB0aGlzO1xuXG4gICAgICBpZiAoISh0eXBlb2YgdGhpcy5lbGVtZW50LnBhcmVudE5vZGUgIT09ICd1bmRlZmluZWQnKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHZhciBzYW1lID0ge307XG5cbiAgICAgIGZvciAodmFyIHR5cGUgaW4gcG9zKSB7XG4gICAgICAgIHNhbWVbdHlwZV0gPSB7fTtcblxuICAgICAgICBmb3IgKHZhciBrZXkgaW4gcG9zW3R5cGVdKSB7XG4gICAgICAgICAgdmFyIGZvdW5kID0gZmFsc2U7XG5cbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuaGlzdG9yeS5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgdmFyIHBvaW50ID0gdGhpcy5oaXN0b3J5W2ldO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBwb2ludFt0eXBlXSAhPT0gJ3VuZGVmaW5lZCcgJiYgIXdpdGhpbihwb2ludFt0eXBlXVtrZXldLCBwb3NbdHlwZV1ba2V5XSkpIHtcbiAgICAgICAgICAgICAgZm91bmQgPSB0cnVlO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoIWZvdW5kKSB7XG4gICAgICAgICAgICBzYW1lW3R5cGVdW2tleV0gPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB2YXIgY3NzID0geyB0b3A6ICcnLCBsZWZ0OiAnJywgcmlnaHQ6ICcnLCBib3R0b206ICcnIH07XG5cbiAgICAgIHZhciB0cmFuc2NyaWJlID0gZnVuY3Rpb24gdHJhbnNjcmliZShfc2FtZSwgX3Bvcykge1xuICAgICAgICB2YXIgaGFzT3B0aW1pemF0aW9ucyA9IHR5cGVvZiBfdGhpczgub3B0aW9ucy5vcHRpbWl6YXRpb25zICE9PSAndW5kZWZpbmVkJztcbiAgICAgICAgdmFyIGdwdSA9IGhhc09wdGltaXphdGlvbnMgPyBfdGhpczgub3B0aW9ucy5vcHRpbWl6YXRpb25zLmdwdSA6IG51bGw7XG4gICAgICAgIGlmIChncHUgIT09IGZhbHNlKSB7XG4gICAgICAgICAgdmFyIHlQb3MgPSB1bmRlZmluZWQsXG4gICAgICAgICAgICAgIHhQb3MgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgaWYgKF9zYW1lLnRvcCkge1xuICAgICAgICAgICAgY3NzLnRvcCA9IDA7XG4gICAgICAgICAgICB5UG9zID0gX3Bvcy50b3A7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNzcy5ib3R0b20gPSAwO1xuICAgICAgICAgICAgeVBvcyA9IC1fcG9zLmJvdHRvbTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoX3NhbWUubGVmdCkge1xuICAgICAgICAgICAgY3NzLmxlZnQgPSAwO1xuICAgICAgICAgICAgeFBvcyA9IF9wb3MubGVmdDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY3NzLnJpZ2h0ID0gMDtcbiAgICAgICAgICAgIHhQb3MgPSAtX3Bvcy5yaWdodDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAod2luZG93Lm1hdGNoTWVkaWEpIHtcbiAgICAgICAgICAgIC8vIEh1YlNwb3QvdGV0aGVyIzIwN1xuICAgICAgICAgICAgdmFyIHJldGluYSA9IHdpbmRvdy5tYXRjaE1lZGlhKCdvbmx5IHNjcmVlbiBhbmQgKG1pbi1yZXNvbHV0aW9uOiAxLjNkcHB4KScpLm1hdGNoZXMgfHwgd2luZG93Lm1hdGNoTWVkaWEoJ29ubHkgc2NyZWVuIGFuZCAoLXdlYmtpdC1taW4tZGV2aWNlLXBpeGVsLXJhdGlvOiAxLjMpJykubWF0Y2hlcztcbiAgICAgICAgICAgIGlmICghcmV0aW5hKSB7XG4gICAgICAgICAgICAgIHhQb3MgPSBNYXRoLnJvdW5kKHhQb3MpO1xuICAgICAgICAgICAgICB5UG9zID0gTWF0aC5yb3VuZCh5UG9zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjc3NbdHJhbnNmb3JtS2V5XSA9ICd0cmFuc2xhdGVYKCcgKyB4UG9zICsgJ3B4KSB0cmFuc2xhdGVZKCcgKyB5UG9zICsgJ3B4KSc7XG5cbiAgICAgICAgICBpZiAodHJhbnNmb3JtS2V5ICE9PSAnbXNUcmFuc2Zvcm0nKSB7XG4gICAgICAgICAgICAvLyBUaGUgWiB0cmFuc2Zvcm0gd2lsbCBrZWVwIHRoaXMgaW4gdGhlIEdQVSAoZmFzdGVyLCBhbmQgcHJldmVudHMgYXJ0aWZhY3RzKSxcbiAgICAgICAgICAgIC8vIGJ1dCBJRTkgZG9lc24ndCBzdXBwb3J0IDNkIHRyYW5zZm9ybXMgYW5kIHdpbGwgY2hva2UuXG4gICAgICAgICAgICBjc3NbdHJhbnNmb3JtS2V5XSArPSBcIiB0cmFuc2xhdGVaKDApXCI7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChfc2FtZS50b3ApIHtcbiAgICAgICAgICAgIGNzcy50b3AgPSBfcG9zLnRvcCArICdweCc7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNzcy5ib3R0b20gPSBfcG9zLmJvdHRvbSArICdweCc7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKF9zYW1lLmxlZnQpIHtcbiAgICAgICAgICAgIGNzcy5sZWZ0ID0gX3Bvcy5sZWZ0ICsgJ3B4JztcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY3NzLnJpZ2h0ID0gX3Bvcy5yaWdodCArICdweCc7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICB2YXIgbW92ZWQgPSBmYWxzZTtcbiAgICAgIGlmICgoc2FtZS5wYWdlLnRvcCB8fCBzYW1lLnBhZ2UuYm90dG9tKSAmJiAoc2FtZS5wYWdlLmxlZnQgfHwgc2FtZS5wYWdlLnJpZ2h0KSkge1xuICAgICAgICBjc3MucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgICAgICB0cmFuc2NyaWJlKHNhbWUucGFnZSwgcG9zLnBhZ2UpO1xuICAgICAgfSBlbHNlIGlmICgoc2FtZS52aWV3cG9ydC50b3AgfHwgc2FtZS52aWV3cG9ydC5ib3R0b20pICYmIChzYW1lLnZpZXdwb3J0LmxlZnQgfHwgc2FtZS52aWV3cG9ydC5yaWdodCkpIHtcbiAgICAgICAgY3NzLnBvc2l0aW9uID0gJ2ZpeGVkJztcbiAgICAgICAgdHJhbnNjcmliZShzYW1lLnZpZXdwb3J0LCBwb3Mudmlld3BvcnQpO1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygc2FtZS5vZmZzZXQgIT09ICd1bmRlZmluZWQnICYmIHNhbWUub2Zmc2V0LnRvcCAmJiBzYW1lLm9mZnNldC5sZWZ0KSB7XG4gICAgICAgIChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgY3NzLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAgICAgICB2YXIgb2Zmc2V0UGFyZW50ID0gX3RoaXM4LmNhY2hlKCd0YXJnZXQtb2Zmc2V0cGFyZW50JywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIGdldE9mZnNldFBhcmVudChfdGhpczgudGFyZ2V0KTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGlmIChnZXRPZmZzZXRQYXJlbnQoX3RoaXM4LmVsZW1lbnQpICE9PSBvZmZzZXRQYXJlbnQpIHtcbiAgICAgICAgICAgIGRlZmVyKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgX3RoaXM4LmVsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChfdGhpczguZWxlbWVudCk7XG4gICAgICAgICAgICAgIG9mZnNldFBhcmVudC5hcHBlbmRDaGlsZChfdGhpczguZWxlbWVudCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0cmFuc2NyaWJlKHNhbWUub2Zmc2V0LCBwb3Mub2Zmc2V0KTtcbiAgICAgICAgICBtb3ZlZCA9IHRydWU7XG4gICAgICAgIH0pKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjc3MucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgICAgICB0cmFuc2NyaWJlKHsgdG9wOiB0cnVlLCBsZWZ0OiB0cnVlIH0sIHBvcy5wYWdlKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFtb3ZlZCkge1xuICAgICAgICB2YXIgb2Zmc2V0UGFyZW50SXNCb2R5ID0gdHJ1ZTtcbiAgICAgICAgdmFyIGN1cnJlbnROb2RlID0gdGhpcy5lbGVtZW50LnBhcmVudE5vZGU7XG4gICAgICAgIHdoaWxlIChjdXJyZW50Tm9kZSAmJiBjdXJyZW50Tm9kZS5ub2RlVHlwZSA9PT0gMSAmJiBjdXJyZW50Tm9kZS50YWdOYW1lICE9PSAnQk9EWScpIHtcbiAgICAgICAgICBpZiAoZ2V0Q29tcHV0ZWRTdHlsZShjdXJyZW50Tm9kZSkucG9zaXRpb24gIT09ICdzdGF0aWMnKSB7XG4gICAgICAgICAgICBvZmZzZXRQYXJlbnRJc0JvZHkgPSBmYWxzZTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGN1cnJlbnROb2RlID0gY3VycmVudE5vZGUucGFyZW50Tm9kZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghb2Zmc2V0UGFyZW50SXNCb2R5KSB7XG4gICAgICAgICAgdGhpcy5lbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5lbGVtZW50KTtcbiAgICAgICAgICB0aGlzLmVsZW1lbnQub3duZXJEb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMuZWxlbWVudCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gQW55IGNzcyBjaGFuZ2Ugd2lsbCB0cmlnZ2VyIGEgcmVwYWludCwgc28gbGV0J3MgYXZvaWQgb25lIGlmIG5vdGhpbmcgY2hhbmdlZFxuICAgICAgdmFyIHdyaXRlQ1NTID0ge307XG4gICAgICB2YXIgd3JpdGUgPSBmYWxzZTtcbiAgICAgIGZvciAodmFyIGtleSBpbiBjc3MpIHtcbiAgICAgICAgdmFyIHZhbCA9IGNzc1trZXldO1xuICAgICAgICB2YXIgZWxWYWwgPSB0aGlzLmVsZW1lbnQuc3R5bGVba2V5XTtcblxuICAgICAgICBpZiAoZWxWYWwgIT09IHZhbCkge1xuICAgICAgICAgIHdyaXRlID0gdHJ1ZTtcbiAgICAgICAgICB3cml0ZUNTU1trZXldID0gdmFsO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICh3cml0ZSkge1xuICAgICAgICBkZWZlcihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgZXh0ZW5kKF90aGlzOC5lbGVtZW50LnN0eWxlLCB3cml0ZUNTUyk7XG4gICAgICAgICAgX3RoaXM4LnRyaWdnZXIoJ3JlcG9zaXRpb25lZCcpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gVGV0aGVyQ2xhc3M7XG59KShFdmVudGVkKTtcblxuVGV0aGVyQ2xhc3MubW9kdWxlcyA9IFtdO1xuXG5UZXRoZXJCYXNlLnBvc2l0aW9uID0gcG9zaXRpb247XG5cbnZhciBUZXRoZXIgPSBleHRlbmQoVGV0aGVyQ2xhc3MsIFRldGhlckJhc2UpO1xuLyogZ2xvYmFscyBUZXRoZXJCYXNlICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIF9zbGljZWRUb0FycmF5ID0gKGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gc2xpY2VJdGVyYXRvcihhcnIsIGkpIHsgdmFyIF9hcnIgPSBbXTsgdmFyIF9uID0gdHJ1ZTsgdmFyIF9kID0gZmFsc2U7IHZhciBfZSA9IHVuZGVmaW5lZDsgdHJ5IHsgZm9yICh2YXIgX2kgPSBhcnJbU3ltYm9sLml0ZXJhdG9yXSgpLCBfczsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkgeyBfYXJyLnB1c2goX3MudmFsdWUpOyBpZiAoaSAmJiBfYXJyLmxlbmd0aCA9PT0gaSkgYnJlYWs7IH0gfSBjYXRjaCAoZXJyKSB7IF9kID0gdHJ1ZTsgX2UgPSBlcnI7IH0gZmluYWxseSB7IHRyeSB7IGlmICghX24gJiYgX2lbJ3JldHVybiddKSBfaVsncmV0dXJuJ10oKTsgfSBmaW5hbGx5IHsgaWYgKF9kKSB0aHJvdyBfZTsgfSB9IHJldHVybiBfYXJyOyB9IHJldHVybiBmdW5jdGlvbiAoYXJyLCBpKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHsgcmV0dXJuIGFycjsgfSBlbHNlIGlmIChTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGFycikpIHsgcmV0dXJuIHNsaWNlSXRlcmF0b3IoYXJyLCBpKTsgfSBlbHNlIHsgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZScpOyB9IH07IH0pKCk7XG5cbnZhciBfVGV0aGVyQmFzZSRVdGlscyA9IFRldGhlckJhc2UuVXRpbHM7XG52YXIgZ2V0Qm91bmRzID0gX1RldGhlckJhc2UkVXRpbHMuZ2V0Qm91bmRzO1xudmFyIGV4dGVuZCA9IF9UZXRoZXJCYXNlJFV0aWxzLmV4dGVuZDtcbnZhciB1cGRhdGVDbGFzc2VzID0gX1RldGhlckJhc2UkVXRpbHMudXBkYXRlQ2xhc3NlcztcbnZhciBkZWZlciA9IF9UZXRoZXJCYXNlJFV0aWxzLmRlZmVyO1xuXG52YXIgQk9VTkRTX0ZPUk1BVCA9IFsnbGVmdCcsICd0b3AnLCAncmlnaHQnLCAnYm90dG9tJ107XG5cbmZ1bmN0aW9uIGdldEJvdW5kaW5nUmVjdCh0ZXRoZXIsIHRvKSB7XG4gIGlmICh0byA9PT0gJ3Njcm9sbFBhcmVudCcpIHtcbiAgICB0byA9IHRldGhlci5zY3JvbGxQYXJlbnRzWzBdO1xuICB9IGVsc2UgaWYgKHRvID09PSAnd2luZG93Jykge1xuICAgIHRvID0gW3BhZ2VYT2Zmc2V0LCBwYWdlWU9mZnNldCwgaW5uZXJXaWR0aCArIHBhZ2VYT2Zmc2V0LCBpbm5lckhlaWdodCArIHBhZ2VZT2Zmc2V0XTtcbiAgfVxuXG4gIGlmICh0byA9PT0gZG9jdW1lbnQpIHtcbiAgICB0byA9IHRvLmRvY3VtZW50RWxlbWVudDtcbiAgfVxuXG4gIGlmICh0eXBlb2YgdG8ubm9kZVR5cGUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgKGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBub2RlID0gdG87XG4gICAgICB2YXIgc2l6ZSA9IGdldEJvdW5kcyh0byk7XG4gICAgICB2YXIgcG9zID0gc2l6ZTtcbiAgICAgIHZhciBzdHlsZSA9IGdldENvbXB1dGVkU3R5bGUodG8pO1xuXG4gICAgICB0byA9IFtwb3MubGVmdCwgcG9zLnRvcCwgc2l6ZS53aWR0aCArIHBvcy5sZWZ0LCBzaXplLmhlaWdodCArIHBvcy50b3BdO1xuXG4gICAgICAvLyBBY2NvdW50IGFueSBwYXJlbnQgRnJhbWVzIHNjcm9sbCBvZmZzZXRcbiAgICAgIGlmIChub2RlLm93bmVyRG9jdW1lbnQgIT09IGRvY3VtZW50KSB7XG4gICAgICAgIHZhciB3aW4gPSBub2RlLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXc7XG4gICAgICAgIHRvWzBdICs9IHdpbi5wYWdlWE9mZnNldDtcbiAgICAgICAgdG9bMV0gKz0gd2luLnBhZ2VZT2Zmc2V0O1xuICAgICAgICB0b1syXSArPSB3aW4ucGFnZVhPZmZzZXQ7XG4gICAgICAgIHRvWzNdICs9IHdpbi5wYWdlWU9mZnNldDtcbiAgICAgIH1cblxuICAgICAgQk9VTkRTX0ZPUk1BVC5mb3JFYWNoKGZ1bmN0aW9uIChzaWRlLCBpKSB7XG4gICAgICAgIHNpZGUgPSBzaWRlWzBdLnRvVXBwZXJDYXNlKCkgKyBzaWRlLnN1YnN0cigxKTtcbiAgICAgICAgaWYgKHNpZGUgPT09ICdUb3AnIHx8IHNpZGUgPT09ICdMZWZ0Jykge1xuICAgICAgICAgIHRvW2ldICs9IHBhcnNlRmxvYXQoc3R5bGVbJ2JvcmRlcicgKyBzaWRlICsgJ1dpZHRoJ10pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRvW2ldIC09IHBhcnNlRmxvYXQoc3R5bGVbJ2JvcmRlcicgKyBzaWRlICsgJ1dpZHRoJ10pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KSgpO1xuICB9XG5cbiAgcmV0dXJuIHRvO1xufVxuXG5UZXRoZXJCYXNlLm1vZHVsZXMucHVzaCh7XG4gIHBvc2l0aW9uOiBmdW5jdGlvbiBwb3NpdGlvbihfcmVmKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIHZhciB0b3AgPSBfcmVmLnRvcDtcbiAgICB2YXIgbGVmdCA9IF9yZWYubGVmdDtcbiAgICB2YXIgdGFyZ2V0QXR0YWNobWVudCA9IF9yZWYudGFyZ2V0QXR0YWNobWVudDtcblxuICAgIGlmICghdGhpcy5vcHRpb25zLmNvbnN0cmFpbnRzKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICB2YXIgX2NhY2hlID0gdGhpcy5jYWNoZSgnZWxlbWVudC1ib3VuZHMnLCBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gZ2V0Qm91bmRzKF90aGlzLmVsZW1lbnQpO1xuICAgIH0pO1xuXG4gICAgdmFyIGhlaWdodCA9IF9jYWNoZS5oZWlnaHQ7XG4gICAgdmFyIHdpZHRoID0gX2NhY2hlLndpZHRoO1xuXG4gICAgaWYgKHdpZHRoID09PSAwICYmIGhlaWdodCA9PT0gMCAmJiB0eXBlb2YgdGhpcy5sYXN0U2l6ZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHZhciBfbGFzdFNpemUgPSB0aGlzLmxhc3RTaXplO1xuXG4gICAgICAvLyBIYW5kbGUgdGhlIGl0ZW0gZ2V0dGluZyBoaWRkZW4gYXMgYSByZXN1bHQgb2Ygb3VyIHBvc2l0aW9uaW5nIHdpdGhvdXQgZ2xpdGNoaW5nXG4gICAgICAvLyB0aGUgY2xhc3NlcyBpbiBhbmQgb3V0XG4gICAgICB3aWR0aCA9IF9sYXN0U2l6ZS53aWR0aDtcbiAgICAgIGhlaWdodCA9IF9sYXN0U2l6ZS5oZWlnaHQ7XG4gICAgfVxuXG4gICAgdmFyIHRhcmdldFNpemUgPSB0aGlzLmNhY2hlKCd0YXJnZXQtYm91bmRzJywgZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIF90aGlzLmdldFRhcmdldEJvdW5kcygpO1xuICAgIH0pO1xuXG4gICAgdmFyIHRhcmdldEhlaWdodCA9IHRhcmdldFNpemUuaGVpZ2h0O1xuICAgIHZhciB0YXJnZXRXaWR0aCA9IHRhcmdldFNpemUud2lkdGg7XG5cbiAgICB2YXIgYWxsQ2xhc3NlcyA9IFt0aGlzLmdldENsYXNzKCdwaW5uZWQnKSwgdGhpcy5nZXRDbGFzcygnb3V0LW9mLWJvdW5kcycpXTtcblxuICAgIHRoaXMub3B0aW9ucy5jb25zdHJhaW50cy5mb3JFYWNoKGZ1bmN0aW9uIChjb25zdHJhaW50KSB7XG4gICAgICB2YXIgb3V0T2ZCb3VuZHNDbGFzcyA9IGNvbnN0cmFpbnQub3V0T2ZCb3VuZHNDbGFzcztcbiAgICAgIHZhciBwaW5uZWRDbGFzcyA9IGNvbnN0cmFpbnQucGlubmVkQ2xhc3M7XG5cbiAgICAgIGlmIChvdXRPZkJvdW5kc0NsYXNzKSB7XG4gICAgICAgIGFsbENsYXNzZXMucHVzaChvdXRPZkJvdW5kc0NsYXNzKTtcbiAgICAgIH1cbiAgICAgIGlmIChwaW5uZWRDbGFzcykge1xuICAgICAgICBhbGxDbGFzc2VzLnB1c2gocGlubmVkQ2xhc3MpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgYWxsQ2xhc3Nlcy5mb3JFYWNoKGZ1bmN0aW9uIChjbHMpIHtcbiAgICAgIFsnbGVmdCcsICd0b3AnLCAncmlnaHQnLCAnYm90dG9tJ10uZm9yRWFjaChmdW5jdGlvbiAoc2lkZSkge1xuICAgICAgICBhbGxDbGFzc2VzLnB1c2goY2xzICsgJy0nICsgc2lkZSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHZhciBhZGRDbGFzc2VzID0gW107XG5cbiAgICB2YXIgdEF0dGFjaG1lbnQgPSBleHRlbmQoe30sIHRhcmdldEF0dGFjaG1lbnQpO1xuICAgIHZhciBlQXR0YWNobWVudCA9IGV4dGVuZCh7fSwgdGhpcy5hdHRhY2htZW50KTtcblxuICAgIHRoaXMub3B0aW9ucy5jb25zdHJhaW50cy5mb3JFYWNoKGZ1bmN0aW9uIChjb25zdHJhaW50KSB7XG4gICAgICB2YXIgdG8gPSBjb25zdHJhaW50LnRvO1xuICAgICAgdmFyIGF0dGFjaG1lbnQgPSBjb25zdHJhaW50LmF0dGFjaG1lbnQ7XG4gICAgICB2YXIgcGluID0gY29uc3RyYWludC5waW47XG5cbiAgICAgIGlmICh0eXBlb2YgYXR0YWNobWVudCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgYXR0YWNobWVudCA9ICcnO1xuICAgICAgfVxuXG4gICAgICB2YXIgY2hhbmdlQXR0YWNoWCA9IHVuZGVmaW5lZCxcbiAgICAgICAgICBjaGFuZ2VBdHRhY2hZID0gdW5kZWZpbmVkO1xuICAgICAgaWYgKGF0dGFjaG1lbnQuaW5kZXhPZignICcpID49IDApIHtcbiAgICAgICAgdmFyIF9hdHRhY2htZW50JHNwbGl0ID0gYXR0YWNobWVudC5zcGxpdCgnICcpO1xuXG4gICAgICAgIHZhciBfYXR0YWNobWVudCRzcGxpdDIgPSBfc2xpY2VkVG9BcnJheShfYXR0YWNobWVudCRzcGxpdCwgMik7XG5cbiAgICAgICAgY2hhbmdlQXR0YWNoWSA9IF9hdHRhY2htZW50JHNwbGl0MlswXTtcbiAgICAgICAgY2hhbmdlQXR0YWNoWCA9IF9hdHRhY2htZW50JHNwbGl0MlsxXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNoYW5nZUF0dGFjaFggPSBjaGFuZ2VBdHRhY2hZID0gYXR0YWNobWVudDtcbiAgICAgIH1cblxuICAgICAgdmFyIGJvdW5kcyA9IGdldEJvdW5kaW5nUmVjdChfdGhpcywgdG8pO1xuXG4gICAgICBpZiAoY2hhbmdlQXR0YWNoWSA9PT0gJ3RhcmdldCcgfHwgY2hhbmdlQXR0YWNoWSA9PT0gJ2JvdGgnKSB7XG4gICAgICAgIGlmICh0b3AgPCBib3VuZHNbMV0gJiYgdEF0dGFjaG1lbnQudG9wID09PSAndG9wJykge1xuICAgICAgICAgIHRvcCArPSB0YXJnZXRIZWlnaHQ7XG4gICAgICAgICAgdEF0dGFjaG1lbnQudG9wID0gJ2JvdHRvbSc7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodG9wICsgaGVpZ2h0ID4gYm91bmRzWzNdICYmIHRBdHRhY2htZW50LnRvcCA9PT0gJ2JvdHRvbScpIHtcbiAgICAgICAgICB0b3AgLT0gdGFyZ2V0SGVpZ2h0O1xuICAgICAgICAgIHRBdHRhY2htZW50LnRvcCA9ICd0b3AnO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChjaGFuZ2VBdHRhY2hZID09PSAndG9nZXRoZXInKSB7XG4gICAgICAgIGlmICh0QXR0YWNobWVudC50b3AgPT09ICd0b3AnKSB7XG4gICAgICAgICAgaWYgKGVBdHRhY2htZW50LnRvcCA9PT0gJ2JvdHRvbScgJiYgdG9wIDwgYm91bmRzWzFdKSB7XG4gICAgICAgICAgICB0b3AgKz0gdGFyZ2V0SGVpZ2h0O1xuICAgICAgICAgICAgdEF0dGFjaG1lbnQudG9wID0gJ2JvdHRvbSc7XG5cbiAgICAgICAgICAgIHRvcCArPSBoZWlnaHQ7XG4gICAgICAgICAgICBlQXR0YWNobWVudC50b3AgPSAndG9wJztcbiAgICAgICAgICB9IGVsc2UgaWYgKGVBdHRhY2htZW50LnRvcCA9PT0gJ3RvcCcgJiYgdG9wICsgaGVpZ2h0ID4gYm91bmRzWzNdICYmIHRvcCAtIChoZWlnaHQgLSB0YXJnZXRIZWlnaHQpID49IGJvdW5kc1sxXSkge1xuICAgICAgICAgICAgdG9wIC09IGhlaWdodCAtIHRhcmdldEhlaWdodDtcbiAgICAgICAgICAgIHRBdHRhY2htZW50LnRvcCA9ICdib3R0b20nO1xuXG4gICAgICAgICAgICBlQXR0YWNobWVudC50b3AgPSAnYm90dG9tJztcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodEF0dGFjaG1lbnQudG9wID09PSAnYm90dG9tJykge1xuICAgICAgICAgIGlmIChlQXR0YWNobWVudC50b3AgPT09ICd0b3AnICYmIHRvcCArIGhlaWdodCA+IGJvdW5kc1szXSkge1xuICAgICAgICAgICAgdG9wIC09IHRhcmdldEhlaWdodDtcbiAgICAgICAgICAgIHRBdHRhY2htZW50LnRvcCA9ICd0b3AnO1xuXG4gICAgICAgICAgICB0b3AgLT0gaGVpZ2h0O1xuICAgICAgICAgICAgZUF0dGFjaG1lbnQudG9wID0gJ2JvdHRvbSc7XG4gICAgICAgICAgfSBlbHNlIGlmIChlQXR0YWNobWVudC50b3AgPT09ICdib3R0b20nICYmIHRvcCA8IGJvdW5kc1sxXSAmJiB0b3AgKyAoaGVpZ2h0ICogMiAtIHRhcmdldEhlaWdodCkgPD0gYm91bmRzWzNdKSB7XG4gICAgICAgICAgICB0b3AgKz0gaGVpZ2h0IC0gdGFyZ2V0SGVpZ2h0O1xuICAgICAgICAgICAgdEF0dGFjaG1lbnQudG9wID0gJ3RvcCc7XG5cbiAgICAgICAgICAgIGVBdHRhY2htZW50LnRvcCA9ICd0b3AnO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0QXR0YWNobWVudC50b3AgPT09ICdtaWRkbGUnKSB7XG4gICAgICAgICAgaWYgKHRvcCArIGhlaWdodCA+IGJvdW5kc1szXSAmJiBlQXR0YWNobWVudC50b3AgPT09ICd0b3AnKSB7XG4gICAgICAgICAgICB0b3AgLT0gaGVpZ2h0O1xuICAgICAgICAgICAgZUF0dGFjaG1lbnQudG9wID0gJ2JvdHRvbSc7XG4gICAgICAgICAgfSBlbHNlIGlmICh0b3AgPCBib3VuZHNbMV0gJiYgZUF0dGFjaG1lbnQudG9wID09PSAnYm90dG9tJykge1xuICAgICAgICAgICAgdG9wICs9IGhlaWdodDtcbiAgICAgICAgICAgIGVBdHRhY2htZW50LnRvcCA9ICd0b3AnO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoY2hhbmdlQXR0YWNoWCA9PT0gJ3RhcmdldCcgfHwgY2hhbmdlQXR0YWNoWCA9PT0gJ2JvdGgnKSB7XG4gICAgICAgIGlmIChsZWZ0IDwgYm91bmRzWzBdICYmIHRBdHRhY2htZW50LmxlZnQgPT09ICdsZWZ0Jykge1xuICAgICAgICAgIGxlZnQgKz0gdGFyZ2V0V2lkdGg7XG4gICAgICAgICAgdEF0dGFjaG1lbnQubGVmdCA9ICdyaWdodCc7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobGVmdCArIHdpZHRoID4gYm91bmRzWzJdICYmIHRBdHRhY2htZW50LmxlZnQgPT09ICdyaWdodCcpIHtcbiAgICAgICAgICBsZWZ0IC09IHRhcmdldFdpZHRoO1xuICAgICAgICAgIHRBdHRhY2htZW50LmxlZnQgPSAnbGVmdCc7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGNoYW5nZUF0dGFjaFggPT09ICd0b2dldGhlcicpIHtcbiAgICAgICAgaWYgKGxlZnQgPCBib3VuZHNbMF0gJiYgdEF0dGFjaG1lbnQubGVmdCA9PT0gJ2xlZnQnKSB7XG4gICAgICAgICAgaWYgKGVBdHRhY2htZW50LmxlZnQgPT09ICdyaWdodCcpIHtcbiAgICAgICAgICAgIGxlZnQgKz0gdGFyZ2V0V2lkdGg7XG4gICAgICAgICAgICB0QXR0YWNobWVudC5sZWZ0ID0gJ3JpZ2h0JztcblxuICAgICAgICAgICAgbGVmdCArPSB3aWR0aDtcbiAgICAgICAgICAgIGVBdHRhY2htZW50LmxlZnQgPSAnbGVmdCc7XG4gICAgICAgICAgfSBlbHNlIGlmIChlQXR0YWNobWVudC5sZWZ0ID09PSAnbGVmdCcpIHtcbiAgICAgICAgICAgIGxlZnQgKz0gdGFyZ2V0V2lkdGg7XG4gICAgICAgICAgICB0QXR0YWNobWVudC5sZWZ0ID0gJ3JpZ2h0JztcblxuICAgICAgICAgICAgbGVmdCAtPSB3aWR0aDtcbiAgICAgICAgICAgIGVBdHRhY2htZW50LmxlZnQgPSAncmlnaHQnO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChsZWZ0ICsgd2lkdGggPiBib3VuZHNbMl0gJiYgdEF0dGFjaG1lbnQubGVmdCA9PT0gJ3JpZ2h0Jykge1xuICAgICAgICAgIGlmIChlQXR0YWNobWVudC5sZWZ0ID09PSAnbGVmdCcpIHtcbiAgICAgICAgICAgIGxlZnQgLT0gdGFyZ2V0V2lkdGg7XG4gICAgICAgICAgICB0QXR0YWNobWVudC5sZWZ0ID0gJ2xlZnQnO1xuXG4gICAgICAgICAgICBsZWZ0IC09IHdpZHRoO1xuICAgICAgICAgICAgZUF0dGFjaG1lbnQubGVmdCA9ICdyaWdodCc7XG4gICAgICAgICAgfSBlbHNlIGlmIChlQXR0YWNobWVudC5sZWZ0ID09PSAncmlnaHQnKSB7XG4gICAgICAgICAgICBsZWZ0IC09IHRhcmdldFdpZHRoO1xuICAgICAgICAgICAgdEF0dGFjaG1lbnQubGVmdCA9ICdsZWZ0JztcblxuICAgICAgICAgICAgbGVmdCArPSB3aWR0aDtcbiAgICAgICAgICAgIGVBdHRhY2htZW50LmxlZnQgPSAnbGVmdCc7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHRBdHRhY2htZW50LmxlZnQgPT09ICdjZW50ZXInKSB7XG4gICAgICAgICAgaWYgKGxlZnQgKyB3aWR0aCA+IGJvdW5kc1syXSAmJiBlQXR0YWNobWVudC5sZWZ0ID09PSAnbGVmdCcpIHtcbiAgICAgICAgICAgIGxlZnQgLT0gd2lkdGg7XG4gICAgICAgICAgICBlQXR0YWNobWVudC5sZWZ0ID0gJ3JpZ2h0JztcbiAgICAgICAgICB9IGVsc2UgaWYgKGxlZnQgPCBib3VuZHNbMF0gJiYgZUF0dGFjaG1lbnQubGVmdCA9PT0gJ3JpZ2h0Jykge1xuICAgICAgICAgICAgbGVmdCArPSB3aWR0aDtcbiAgICAgICAgICAgIGVBdHRhY2htZW50LmxlZnQgPSAnbGVmdCc7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChjaGFuZ2VBdHRhY2hZID09PSAnZWxlbWVudCcgfHwgY2hhbmdlQXR0YWNoWSA9PT0gJ2JvdGgnKSB7XG4gICAgICAgIGlmICh0b3AgPCBib3VuZHNbMV0gJiYgZUF0dGFjaG1lbnQudG9wID09PSAnYm90dG9tJykge1xuICAgICAgICAgIHRvcCArPSBoZWlnaHQ7XG4gICAgICAgICAgZUF0dGFjaG1lbnQudG9wID0gJ3RvcCc7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodG9wICsgaGVpZ2h0ID4gYm91bmRzWzNdICYmIGVBdHRhY2htZW50LnRvcCA9PT0gJ3RvcCcpIHtcbiAgICAgICAgICB0b3AgLT0gaGVpZ2h0O1xuICAgICAgICAgIGVBdHRhY2htZW50LnRvcCA9ICdib3R0b20nO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChjaGFuZ2VBdHRhY2hYID09PSAnZWxlbWVudCcgfHwgY2hhbmdlQXR0YWNoWCA9PT0gJ2JvdGgnKSB7XG4gICAgICAgIGlmIChsZWZ0IDwgYm91bmRzWzBdKSB7XG4gICAgICAgICAgaWYgKGVBdHRhY2htZW50LmxlZnQgPT09ICdyaWdodCcpIHtcbiAgICAgICAgICAgIGxlZnQgKz0gd2lkdGg7XG4gICAgICAgICAgICBlQXR0YWNobWVudC5sZWZ0ID0gJ2xlZnQnO1xuICAgICAgICAgIH0gZWxzZSBpZiAoZUF0dGFjaG1lbnQubGVmdCA9PT0gJ2NlbnRlcicpIHtcbiAgICAgICAgICAgIGxlZnQgKz0gd2lkdGggLyAyO1xuICAgICAgICAgICAgZUF0dGFjaG1lbnQubGVmdCA9ICdsZWZ0JztcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobGVmdCArIHdpZHRoID4gYm91bmRzWzJdKSB7XG4gICAgICAgICAgaWYgKGVBdHRhY2htZW50LmxlZnQgPT09ICdsZWZ0Jykge1xuICAgICAgICAgICAgbGVmdCAtPSB3aWR0aDtcbiAgICAgICAgICAgIGVBdHRhY2htZW50LmxlZnQgPSAncmlnaHQnO1xuICAgICAgICAgIH0gZWxzZSBpZiAoZUF0dGFjaG1lbnQubGVmdCA9PT0gJ2NlbnRlcicpIHtcbiAgICAgICAgICAgIGxlZnQgLT0gd2lkdGggLyAyO1xuICAgICAgICAgICAgZUF0dGFjaG1lbnQubGVmdCA9ICdyaWdodCc7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2YgcGluID09PSAnc3RyaW5nJykge1xuICAgICAgICBwaW4gPSBwaW4uc3BsaXQoJywnKS5tYXAoZnVuY3Rpb24gKHApIHtcbiAgICAgICAgICByZXR1cm4gcC50cmltKCk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIGlmIChwaW4gPT09IHRydWUpIHtcbiAgICAgICAgcGluID0gWyd0b3AnLCAnbGVmdCcsICdyaWdodCcsICdib3R0b20nXTtcbiAgICAgIH1cblxuICAgICAgcGluID0gcGluIHx8IFtdO1xuXG4gICAgICB2YXIgcGlubmVkID0gW107XG4gICAgICB2YXIgb29iID0gW107XG5cbiAgICAgIGlmICh0b3AgPCBib3VuZHNbMV0pIHtcbiAgICAgICAgaWYgKHBpbi5pbmRleE9mKCd0b3AnKSA+PSAwKSB7XG4gICAgICAgICAgdG9wID0gYm91bmRzWzFdO1xuICAgICAgICAgIHBpbm5lZC5wdXNoKCd0b3AnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBvb2IucHVzaCgndG9wJyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHRvcCArIGhlaWdodCA+IGJvdW5kc1szXSkge1xuICAgICAgICBpZiAocGluLmluZGV4T2YoJ2JvdHRvbScpID49IDApIHtcbiAgICAgICAgICB0b3AgPSBib3VuZHNbM10gLSBoZWlnaHQ7XG4gICAgICAgICAgcGlubmVkLnB1c2goJ2JvdHRvbScpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG9vYi5wdXNoKCdib3R0b20nKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAobGVmdCA8IGJvdW5kc1swXSkge1xuICAgICAgICBpZiAocGluLmluZGV4T2YoJ2xlZnQnKSA+PSAwKSB7XG4gICAgICAgICAgbGVmdCA9IGJvdW5kc1swXTtcbiAgICAgICAgICBwaW5uZWQucHVzaCgnbGVmdCcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG9vYi5wdXNoKCdsZWZ0Jyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGxlZnQgKyB3aWR0aCA+IGJvdW5kc1syXSkge1xuICAgICAgICBpZiAocGluLmluZGV4T2YoJ3JpZ2h0JykgPj0gMCkge1xuICAgICAgICAgIGxlZnQgPSBib3VuZHNbMl0gLSB3aWR0aDtcbiAgICAgICAgICBwaW5uZWQucHVzaCgncmlnaHQnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBvb2IucHVzaCgncmlnaHQnKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAocGlubmVkLmxlbmd0aCkge1xuICAgICAgICAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHZhciBwaW5uZWRDbGFzcyA9IHVuZGVmaW5lZDtcbiAgICAgICAgICBpZiAodHlwZW9mIF90aGlzLm9wdGlvbnMucGlubmVkQ2xhc3MgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBwaW5uZWRDbGFzcyA9IF90aGlzLm9wdGlvbnMucGlubmVkQ2xhc3M7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHBpbm5lZENsYXNzID0gX3RoaXMuZ2V0Q2xhc3MoJ3Bpbm5lZCcpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGFkZENsYXNzZXMucHVzaChwaW5uZWRDbGFzcyk7XG4gICAgICAgICAgcGlubmVkLmZvckVhY2goZnVuY3Rpb24gKHNpZGUpIHtcbiAgICAgICAgICAgIGFkZENsYXNzZXMucHVzaChwaW5uZWRDbGFzcyArICctJyArIHNpZGUpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KSgpO1xuICAgICAgfVxuXG4gICAgICBpZiAob29iLmxlbmd0aCkge1xuICAgICAgICAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHZhciBvb2JDbGFzcyA9IHVuZGVmaW5lZDtcbiAgICAgICAgICBpZiAodHlwZW9mIF90aGlzLm9wdGlvbnMub3V0T2ZCb3VuZHNDbGFzcyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIG9vYkNsYXNzID0gX3RoaXMub3B0aW9ucy5vdXRPZkJvdW5kc0NsYXNzO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBvb2JDbGFzcyA9IF90aGlzLmdldENsYXNzKCdvdXQtb2YtYm91bmRzJyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgYWRkQ2xhc3Nlcy5wdXNoKG9vYkNsYXNzKTtcbiAgICAgICAgICBvb2IuZm9yRWFjaChmdW5jdGlvbiAoc2lkZSkge1xuICAgICAgICAgICAgYWRkQ2xhc3Nlcy5wdXNoKG9vYkNsYXNzICsgJy0nICsgc2lkZSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pKCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChwaW5uZWQuaW5kZXhPZignbGVmdCcpID49IDAgfHwgcGlubmVkLmluZGV4T2YoJ3JpZ2h0JykgPj0gMCkge1xuICAgICAgICBlQXR0YWNobWVudC5sZWZ0ID0gdEF0dGFjaG1lbnQubGVmdCA9IGZhbHNlO1xuICAgICAgfVxuICAgICAgaWYgKHBpbm5lZC5pbmRleE9mKCd0b3AnKSA+PSAwIHx8IHBpbm5lZC5pbmRleE9mKCdib3R0b20nKSA+PSAwKSB7XG4gICAgICAgIGVBdHRhY2htZW50LnRvcCA9IHRBdHRhY2htZW50LnRvcCA9IGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBpZiAodEF0dGFjaG1lbnQudG9wICE9PSB0YXJnZXRBdHRhY2htZW50LnRvcCB8fCB0QXR0YWNobWVudC5sZWZ0ICE9PSB0YXJnZXRBdHRhY2htZW50LmxlZnQgfHwgZUF0dGFjaG1lbnQudG9wICE9PSBfdGhpcy5hdHRhY2htZW50LnRvcCB8fCBlQXR0YWNobWVudC5sZWZ0ICE9PSBfdGhpcy5hdHRhY2htZW50LmxlZnQpIHtcbiAgICAgICAgX3RoaXMudXBkYXRlQXR0YWNoQ2xhc3NlcyhlQXR0YWNobWVudCwgdEF0dGFjaG1lbnQpO1xuICAgICAgICBfdGhpcy50cmlnZ2VyKCd1cGRhdGUnLCB7XG4gICAgICAgICAgYXR0YWNobWVudDogZUF0dGFjaG1lbnQsXG4gICAgICAgICAgdGFyZ2V0QXR0YWNobWVudDogdEF0dGFjaG1lbnRcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBkZWZlcihmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoIShfdGhpcy5vcHRpb25zLmFkZFRhcmdldENsYXNzZXMgPT09IGZhbHNlKSkge1xuICAgICAgICB1cGRhdGVDbGFzc2VzKF90aGlzLnRhcmdldCwgYWRkQ2xhc3NlcywgYWxsQ2xhc3Nlcyk7XG4gICAgICB9XG4gICAgICB1cGRhdGVDbGFzc2VzKF90aGlzLmVsZW1lbnQsIGFkZENsYXNzZXMsIGFsbENsYXNzZXMpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHsgdG9wOiB0b3AsIGxlZnQ6IGxlZnQgfTtcbiAgfVxufSk7XG4vKiBnbG9iYWxzIFRldGhlckJhc2UgKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgX1RldGhlckJhc2UkVXRpbHMgPSBUZXRoZXJCYXNlLlV0aWxzO1xudmFyIGdldEJvdW5kcyA9IF9UZXRoZXJCYXNlJFV0aWxzLmdldEJvdW5kcztcbnZhciB1cGRhdGVDbGFzc2VzID0gX1RldGhlckJhc2UkVXRpbHMudXBkYXRlQ2xhc3NlcztcbnZhciBkZWZlciA9IF9UZXRoZXJCYXNlJFV0aWxzLmRlZmVyO1xuXG5UZXRoZXJCYXNlLm1vZHVsZXMucHVzaCh7XG4gIHBvc2l0aW9uOiBmdW5jdGlvbiBwb3NpdGlvbihfcmVmKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIHZhciB0b3AgPSBfcmVmLnRvcDtcbiAgICB2YXIgbGVmdCA9IF9yZWYubGVmdDtcblxuICAgIHZhciBfY2FjaGUgPSB0aGlzLmNhY2hlKCdlbGVtZW50LWJvdW5kcycsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBnZXRCb3VuZHMoX3RoaXMuZWxlbWVudCk7XG4gICAgfSk7XG5cbiAgICB2YXIgaGVpZ2h0ID0gX2NhY2hlLmhlaWdodDtcbiAgICB2YXIgd2lkdGggPSBfY2FjaGUud2lkdGg7XG5cbiAgICB2YXIgdGFyZ2V0UG9zID0gdGhpcy5nZXRUYXJnZXRCb3VuZHMoKTtcblxuICAgIHZhciBib3R0b20gPSB0b3AgKyBoZWlnaHQ7XG4gICAgdmFyIHJpZ2h0ID0gbGVmdCArIHdpZHRoO1xuXG4gICAgdmFyIGFidXR0ZWQgPSBbXTtcbiAgICBpZiAodG9wIDw9IHRhcmdldFBvcy5ib3R0b20gJiYgYm90dG9tID49IHRhcmdldFBvcy50b3ApIHtcbiAgICAgIFsnbGVmdCcsICdyaWdodCddLmZvckVhY2goZnVuY3Rpb24gKHNpZGUpIHtcbiAgICAgICAgdmFyIHRhcmdldFBvc1NpZGUgPSB0YXJnZXRQb3Nbc2lkZV07XG4gICAgICAgIGlmICh0YXJnZXRQb3NTaWRlID09PSBsZWZ0IHx8IHRhcmdldFBvc1NpZGUgPT09IHJpZ2h0KSB7XG4gICAgICAgICAgYWJ1dHRlZC5wdXNoKHNpZGUpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAobGVmdCA8PSB0YXJnZXRQb3MucmlnaHQgJiYgcmlnaHQgPj0gdGFyZ2V0UG9zLmxlZnQpIHtcbiAgICAgIFsndG9wJywgJ2JvdHRvbSddLmZvckVhY2goZnVuY3Rpb24gKHNpZGUpIHtcbiAgICAgICAgdmFyIHRhcmdldFBvc1NpZGUgPSB0YXJnZXRQb3Nbc2lkZV07XG4gICAgICAgIGlmICh0YXJnZXRQb3NTaWRlID09PSB0b3AgfHwgdGFyZ2V0UG9zU2lkZSA9PT0gYm90dG9tKSB7XG4gICAgICAgICAgYWJ1dHRlZC5wdXNoKHNpZGUpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICB2YXIgYWxsQ2xhc3NlcyA9IFtdO1xuICAgIHZhciBhZGRDbGFzc2VzID0gW107XG5cbiAgICB2YXIgc2lkZXMgPSBbJ2xlZnQnLCAndG9wJywgJ3JpZ2h0JywgJ2JvdHRvbSddO1xuICAgIGFsbENsYXNzZXMucHVzaCh0aGlzLmdldENsYXNzKCdhYnV0dGVkJykpO1xuICAgIHNpZGVzLmZvckVhY2goZnVuY3Rpb24gKHNpZGUpIHtcbiAgICAgIGFsbENsYXNzZXMucHVzaChfdGhpcy5nZXRDbGFzcygnYWJ1dHRlZCcpICsgJy0nICsgc2lkZSk7XG4gICAgfSk7XG5cbiAgICBpZiAoYWJ1dHRlZC5sZW5ndGgpIHtcbiAgICAgIGFkZENsYXNzZXMucHVzaCh0aGlzLmdldENsYXNzKCdhYnV0dGVkJykpO1xuICAgIH1cblxuICAgIGFidXR0ZWQuZm9yRWFjaChmdW5jdGlvbiAoc2lkZSkge1xuICAgICAgYWRkQ2xhc3Nlcy5wdXNoKF90aGlzLmdldENsYXNzKCdhYnV0dGVkJykgKyAnLScgKyBzaWRlKTtcbiAgICB9KTtcblxuICAgIGRlZmVyKGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICghKF90aGlzLm9wdGlvbnMuYWRkVGFyZ2V0Q2xhc3NlcyA9PT0gZmFsc2UpKSB7XG4gICAgICAgIHVwZGF0ZUNsYXNzZXMoX3RoaXMudGFyZ2V0LCBhZGRDbGFzc2VzLCBhbGxDbGFzc2VzKTtcbiAgICAgIH1cbiAgICAgIHVwZGF0ZUNsYXNzZXMoX3RoaXMuZWxlbWVudCwgYWRkQ2xhc3NlcywgYWxsQ2xhc3Nlcyk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxufSk7XG4vKiBnbG9iYWxzIFRldGhlckJhc2UgKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgX3NsaWNlZFRvQXJyYXkgPSAoZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBzbGljZUl0ZXJhdG9yKGFyciwgaSkgeyB2YXIgX2FyciA9IFtdOyB2YXIgX24gPSB0cnVlOyB2YXIgX2QgPSBmYWxzZTsgdmFyIF9lID0gdW5kZWZpbmVkOyB0cnkgeyBmb3IgKHZhciBfaSA9IGFycltTeW1ib2wuaXRlcmF0b3JdKCksIF9zOyAhKF9uID0gKF9zID0gX2kubmV4dCgpKS5kb25lKTsgX24gPSB0cnVlKSB7IF9hcnIucHVzaChfcy52YWx1ZSk7IGlmIChpICYmIF9hcnIubGVuZ3RoID09PSBpKSBicmVhazsgfSB9IGNhdGNoIChlcnIpIHsgX2QgPSB0cnVlOyBfZSA9IGVycjsgfSBmaW5hbGx5IHsgdHJ5IHsgaWYgKCFfbiAmJiBfaVsncmV0dXJuJ10pIF9pWydyZXR1cm4nXSgpOyB9IGZpbmFsbHkgeyBpZiAoX2QpIHRocm93IF9lOyB9IH0gcmV0dXJuIF9hcnI7IH0gcmV0dXJuIGZ1bmN0aW9uIChhcnIsIGkpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgeyByZXR1cm4gYXJyOyB9IGVsc2UgaWYgKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoYXJyKSkgeyByZXR1cm4gc2xpY2VJdGVyYXRvcihhcnIsIGkpOyB9IGVsc2UgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCdJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlJyk7IH0gfTsgfSkoKTtcblxuVGV0aGVyQmFzZS5tb2R1bGVzLnB1c2goe1xuICBwb3NpdGlvbjogZnVuY3Rpb24gcG9zaXRpb24oX3JlZikge1xuICAgIHZhciB0b3AgPSBfcmVmLnRvcDtcbiAgICB2YXIgbGVmdCA9IF9yZWYubGVmdDtcblxuICAgIGlmICghdGhpcy5vcHRpb25zLnNoaWZ0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIHNoaWZ0ID0gdGhpcy5vcHRpb25zLnNoaWZ0O1xuICAgIGlmICh0eXBlb2YgdGhpcy5vcHRpb25zLnNoaWZ0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBzaGlmdCA9IHRoaXMub3B0aW9ucy5zaGlmdC5jYWxsKHRoaXMsIHsgdG9wOiB0b3AsIGxlZnQ6IGxlZnQgfSk7XG4gICAgfVxuXG4gICAgdmFyIHNoaWZ0VG9wID0gdW5kZWZpbmVkLFxuICAgICAgICBzaGlmdExlZnQgPSB1bmRlZmluZWQ7XG4gICAgaWYgKHR5cGVvZiBzaGlmdCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHNoaWZ0ID0gc2hpZnQuc3BsaXQoJyAnKTtcbiAgICAgIHNoaWZ0WzFdID0gc2hpZnRbMV0gfHwgc2hpZnRbMF07XG5cbiAgICAgIHZhciBfc2hpZnQgPSBzaGlmdDtcblxuICAgICAgdmFyIF9zaGlmdDIgPSBfc2xpY2VkVG9BcnJheShfc2hpZnQsIDIpO1xuXG4gICAgICBzaGlmdFRvcCA9IF9zaGlmdDJbMF07XG4gICAgICBzaGlmdExlZnQgPSBfc2hpZnQyWzFdO1xuXG4gICAgICBzaGlmdFRvcCA9IHBhcnNlRmxvYXQoc2hpZnRUb3AsIDEwKTtcbiAgICAgIHNoaWZ0TGVmdCA9IHBhcnNlRmxvYXQoc2hpZnRMZWZ0LCAxMCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNoaWZ0VG9wID0gc2hpZnQudG9wO1xuICAgICAgc2hpZnRMZWZ0ID0gc2hpZnQubGVmdDtcbiAgICB9XG5cbiAgICB0b3AgKz0gc2hpZnRUb3A7XG4gICAgbGVmdCArPSBzaGlmdExlZnQ7XG5cbiAgICByZXR1cm4geyB0b3A6IHRvcCwgbGVmdDogbGVmdCB9O1xuICB9XG59KTtcbnJldHVybiBUZXRoZXI7XG5cbn0pKTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3RldGhlci9kaXN0L2pzL3RldGhlci5qc1xuICoqIG1vZHVsZSBpZCA9IDRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIi8qIVxuICogQm9vdHN0cmFwIHY0LjAuMC1hbHBoYS41IChodHRwczovL2dldGJvb3RzdHJhcC5jb20pXG4gKiBDb3B5cmlnaHQgMjAxMS0yMDE2IFRoZSBCb290c3RyYXAgQXV0aG9ycyAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2dyYXBocy9jb250cmlidXRvcnMpXG4gKiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ibG9iL21hc3Rlci9MSUNFTlNFKVxuICovXG5cbmlmICh0eXBlb2YgalF1ZXJ5ID09PSAndW5kZWZpbmVkJykge1xuICB0aHJvdyBuZXcgRXJyb3IoJ0Jvb3RzdHJhcFxcJ3MgSmF2YVNjcmlwdCByZXF1aXJlcyBqUXVlcnknKVxufVxuXG4rZnVuY3Rpb24gKCQpIHtcbiAgdmFyIHZlcnNpb24gPSAkLmZuLmpxdWVyeS5zcGxpdCgnICcpWzBdLnNwbGl0KCcuJylcbiAgaWYgKCh2ZXJzaW9uWzBdIDwgMiAmJiB2ZXJzaW9uWzFdIDwgOSkgfHwgKHZlcnNpb25bMF0gPT0gMSAmJiB2ZXJzaW9uWzFdID09IDkgJiYgdmVyc2lvblsyXSA8IDEpIHx8ICh2ZXJzaW9uWzBdID49IDQpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdCb290c3RyYXBcXCdzIEphdmFTY3JpcHQgcmVxdWlyZXMgYXQgbGVhc3QgalF1ZXJ5IHYxLjkuMSBidXQgbGVzcyB0aGFuIHY0LjAuMCcpXG4gIH1cbn0oalF1ZXJ5KTtcblxuXG4rZnVuY3Rpb24gKCkge1xuXG52YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuLyoqXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogQm9vdHN0cmFwICh2NC4wLjAtYWxwaGEuNSk6IHV0aWwuanNcbiAqIExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2Jsb2IvbWFzdGVyL0xJQ0VOU0UpXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICovXG5cbnZhciBVdGlsID0gZnVuY3Rpb24gKCQpIHtcblxuICAvKipcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqIFByaXZhdGUgVHJhbnNpdGlvbkVuZCBIZWxwZXJzXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKi9cblxuICB2YXIgdHJhbnNpdGlvbiA9IGZhbHNlO1xuXG4gIHZhciBNQVhfVUlEID0gMTAwMDAwMDtcblxuICB2YXIgVHJhbnNpdGlvbkVuZEV2ZW50ID0ge1xuICAgIFdlYmtpdFRyYW5zaXRpb246ICd3ZWJraXRUcmFuc2l0aW9uRW5kJyxcbiAgICBNb3pUcmFuc2l0aW9uOiAndHJhbnNpdGlvbmVuZCcsXG4gICAgT1RyYW5zaXRpb246ICdvVHJhbnNpdGlvbkVuZCBvdHJhbnNpdGlvbmVuZCcsXG4gICAgdHJhbnNpdGlvbjogJ3RyYW5zaXRpb25lbmQnXG4gIH07XG5cbiAgLy8gc2hvdXRvdXQgQW5ndXNDcm9sbCAoaHR0cHM6Ly9nb28uZ2wvcHh3UUdwKVxuICBmdW5jdGlvbiB0b1R5cGUob2JqKSB7XG4gICAgcmV0dXJuIHt9LnRvU3RyaW5nLmNhbGwob2JqKS5tYXRjaCgvXFxzKFthLXpBLVpdKykvKVsxXS50b0xvd2VyQ2FzZSgpO1xuICB9XG5cbiAgZnVuY3Rpb24gaXNFbGVtZW50KG9iaikge1xuICAgIHJldHVybiAob2JqWzBdIHx8IG9iaikubm9kZVR5cGU7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRTcGVjaWFsVHJhbnNpdGlvbkVuZEV2ZW50KCkge1xuICAgIHJldHVybiB7XG4gICAgICBiaW5kVHlwZTogdHJhbnNpdGlvbi5lbmQsXG4gICAgICBkZWxlZ2F0ZVR5cGU6IHRyYW5zaXRpb24uZW5kLFxuICAgICAgaGFuZGxlOiBmdW5jdGlvbiBoYW5kbGUoZXZlbnQpIHtcbiAgICAgICAgaWYgKCQoZXZlbnQudGFyZ2V0KS5pcyh0aGlzKSkge1xuICAgICAgICAgIHJldHVybiBldmVudC5oYW5kbGVPYmouaGFuZGxlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIHByZWZlci1yZXN0LXBhcmFtc1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRyYW5zaXRpb25FbmRUZXN0KCkge1xuICAgIGlmICh3aW5kb3cuUVVuaXQpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICB2YXIgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdib290c3RyYXAnKTtcblxuICAgIGZvciAodmFyIG5hbWUgaW4gVHJhbnNpdGlvbkVuZEV2ZW50KSB7XG4gICAgICBpZiAoZWwuc3R5bGVbbmFtZV0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4geyBlbmQ6IFRyYW5zaXRpb25FbmRFdmVudFtuYW1lXSB9O1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRyYW5zaXRpb25FbmRFbXVsYXRvcihkdXJhdGlvbikge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICB2YXIgY2FsbGVkID0gZmFsc2U7XG5cbiAgICAkKHRoaXMpLm9uZShVdGlsLlRSQU5TSVRJT05fRU5ELCBmdW5jdGlvbiAoKSB7XG4gICAgICBjYWxsZWQgPSB0cnVlO1xuICAgIH0pO1xuXG4gICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoIWNhbGxlZCkge1xuICAgICAgICBVdGlsLnRyaWdnZXJUcmFuc2l0aW9uRW5kKF90aGlzKTtcbiAgICAgIH1cbiAgICB9LCBkdXJhdGlvbik7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGZ1bmN0aW9uIHNldFRyYW5zaXRpb25FbmRTdXBwb3J0KCkge1xuICAgIHRyYW5zaXRpb24gPSB0cmFuc2l0aW9uRW5kVGVzdCgpO1xuXG4gICAgJC5mbi5lbXVsYXRlVHJhbnNpdGlvbkVuZCA9IHRyYW5zaXRpb25FbmRFbXVsYXRvcjtcblxuICAgIGlmIChVdGlsLnN1cHBvcnRzVHJhbnNpdGlvbkVuZCgpKSB7XG4gICAgICAkLmV2ZW50LnNwZWNpYWxbVXRpbC5UUkFOU0lUSU9OX0VORF0gPSBnZXRTcGVjaWFsVHJhbnNpdGlvbkVuZEV2ZW50KCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqIFB1YmxpYyBVdGlsIEFwaVxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKi9cblxuICB2YXIgVXRpbCA9IHtcblxuICAgIFRSQU5TSVRJT05fRU5EOiAnYnNUcmFuc2l0aW9uRW5kJyxcblxuICAgIGdldFVJRDogZnVuY3Rpb24gZ2V0VUlEKHByZWZpeCkge1xuICAgICAgZG8ge1xuICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1iaXR3aXNlICovXG4gICAgICAgIHByZWZpeCArPSB+fihNYXRoLnJhbmRvbSgpICogTUFYX1VJRCk7IC8vIFwifn5cIiBhY3RzIGxpa2UgYSBmYXN0ZXIgTWF0aC5mbG9vcigpIGhlcmVcbiAgICAgICAgLyogZXNsaW50LWVuYWJsZSBuby1iaXR3aXNlICovXG4gICAgICB9IHdoaWxlIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChwcmVmaXgpKTtcbiAgICAgIHJldHVybiBwcmVmaXg7XG4gICAgfSxcbiAgICBnZXRTZWxlY3RvckZyb21FbGVtZW50OiBmdW5jdGlvbiBnZXRTZWxlY3RvckZyb21FbGVtZW50KGVsZW1lbnQpIHtcbiAgICAgIHZhciBzZWxlY3RvciA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLXRhcmdldCcpO1xuXG4gICAgICBpZiAoIXNlbGVjdG9yKSB7XG4gICAgICAgIHNlbGVjdG9yID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2hyZWYnKSB8fCAnJztcbiAgICAgICAgc2VsZWN0b3IgPSAvXiNbYS16XS9pLnRlc3Qoc2VsZWN0b3IpID8gc2VsZWN0b3IgOiBudWxsO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZWN0b3I7XG4gICAgfSxcbiAgICByZWZsb3c6IGZ1bmN0aW9uIHJlZmxvdyhlbGVtZW50KSB7XG4gICAgICBuZXcgRnVuY3Rpb24oJ2JzJywgJ3JldHVybiBicycpKGVsZW1lbnQub2Zmc2V0SGVpZ2h0KTtcbiAgICB9LFxuICAgIHRyaWdnZXJUcmFuc2l0aW9uRW5kOiBmdW5jdGlvbiB0cmlnZ2VyVHJhbnNpdGlvbkVuZChlbGVtZW50KSB7XG4gICAgICAkKGVsZW1lbnQpLnRyaWdnZXIodHJhbnNpdGlvbi5lbmQpO1xuICAgIH0sXG4gICAgc3VwcG9ydHNUcmFuc2l0aW9uRW5kOiBmdW5jdGlvbiBzdXBwb3J0c1RyYW5zaXRpb25FbmQoKSB7XG4gICAgICByZXR1cm4gQm9vbGVhbih0cmFuc2l0aW9uKTtcbiAgICB9LFxuICAgIHR5cGVDaGVja0NvbmZpZzogZnVuY3Rpb24gdHlwZUNoZWNrQ29uZmlnKGNvbXBvbmVudE5hbWUsIGNvbmZpZywgY29uZmlnVHlwZXMpIHtcbiAgICAgIGZvciAodmFyIHByb3BlcnR5IGluIGNvbmZpZ1R5cGVzKSB7XG4gICAgICAgIGlmIChjb25maWdUeXBlcy5oYXNPd25Qcm9wZXJ0eShwcm9wZXJ0eSkpIHtcbiAgICAgICAgICB2YXIgZXhwZWN0ZWRUeXBlcyA9IGNvbmZpZ1R5cGVzW3Byb3BlcnR5XTtcbiAgICAgICAgICB2YXIgdmFsdWUgPSBjb25maWdbcHJvcGVydHldO1xuICAgICAgICAgIHZhciB2YWx1ZVR5cGUgPSB2b2lkIDA7XG5cbiAgICAgICAgICBpZiAodmFsdWUgJiYgaXNFbGVtZW50KHZhbHVlKSkge1xuICAgICAgICAgICAgdmFsdWVUeXBlID0gJ2VsZW1lbnQnO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YWx1ZVR5cGUgPSB0b1R5cGUodmFsdWUpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICghbmV3IFJlZ0V4cChleHBlY3RlZFR5cGVzKS50ZXN0KHZhbHVlVHlwZSkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihjb21wb25lbnROYW1lLnRvVXBwZXJDYXNlKCkgKyAnOiAnICsgKCdPcHRpb24gXCInICsgcHJvcGVydHkgKyAnXCIgcHJvdmlkZWQgdHlwZSBcIicgKyB2YWx1ZVR5cGUgKyAnXCIgJykgKyAoJ2J1dCBleHBlY3RlZCB0eXBlIFwiJyArIGV4cGVjdGVkVHlwZXMgKyAnXCIuJykpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBzZXRUcmFuc2l0aW9uRW5kU3VwcG9ydCgpO1xuXG4gIHJldHVybiBVdGlsO1xufShqUXVlcnkpO1xuXG4vKipcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiBCb290c3RyYXAgKHY0LjAuMC1hbHBoYS41KTogYWxlcnQuanNcbiAqIExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2Jsb2IvbWFzdGVyL0xJQ0VOU0UpXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICovXG5cbnZhciBBbGVydCA9IGZ1bmN0aW9uICgkKSB7XG5cbiAgLyoqXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKiBDb25zdGFudHNcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqL1xuXG4gIHZhciBOQU1FID0gJ2FsZXJ0JztcbiAgdmFyIFZFUlNJT04gPSAnNC4wLjAtYWxwaGEuNSc7XG4gIHZhciBEQVRBX0tFWSA9ICdicy5hbGVydCc7XG4gIHZhciBFVkVOVF9LRVkgPSAnLicgKyBEQVRBX0tFWTtcbiAgdmFyIERBVEFfQVBJX0tFWSA9ICcuZGF0YS1hcGknO1xuICB2YXIgSlFVRVJZX05PX0NPTkZMSUNUID0gJC5mbltOQU1FXTtcbiAgdmFyIFRSQU5TSVRJT05fRFVSQVRJT04gPSAxNTA7XG5cbiAgdmFyIFNlbGVjdG9yID0ge1xuICAgIERJU01JU1M6ICdbZGF0YS1kaXNtaXNzPVwiYWxlcnRcIl0nXG4gIH07XG5cbiAgdmFyIEV2ZW50ID0ge1xuICAgIENMT1NFOiAnY2xvc2UnICsgRVZFTlRfS0VZLFxuICAgIENMT1NFRDogJ2Nsb3NlZCcgKyBFVkVOVF9LRVksXG4gICAgQ0xJQ0tfREFUQV9BUEk6ICdjbGljaycgKyBFVkVOVF9LRVkgKyBEQVRBX0FQSV9LRVlcbiAgfTtcblxuICB2YXIgQ2xhc3NOYW1lID0ge1xuICAgIEFMRVJUOiAnYWxlcnQnLFxuICAgIEZBREU6ICdmYWRlJyxcbiAgICBJTjogJ2luJ1xuICB9O1xuXG4gIC8qKlxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICogQ2xhc3MgRGVmaW5pdGlvblxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICovXG5cbiAgdmFyIEFsZXJ0ID0gZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEFsZXJ0KGVsZW1lbnQpIHtcbiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBBbGVydCk7XG5cbiAgICAgIHRoaXMuX2VsZW1lbnQgPSBlbGVtZW50O1xuICAgIH1cblxuICAgIC8vIGdldHRlcnNcblxuICAgIC8vIHB1YmxpY1xuXG4gICAgQWxlcnQucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24gY2xvc2UoZWxlbWVudCkge1xuICAgICAgZWxlbWVudCA9IGVsZW1lbnQgfHwgdGhpcy5fZWxlbWVudDtcblxuICAgICAgdmFyIHJvb3RFbGVtZW50ID0gdGhpcy5fZ2V0Um9vdEVsZW1lbnQoZWxlbWVudCk7XG4gICAgICB2YXIgY3VzdG9tRXZlbnQgPSB0aGlzLl90cmlnZ2VyQ2xvc2VFdmVudChyb290RWxlbWVudCk7XG5cbiAgICAgIGlmIChjdXN0b21FdmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX3JlbW92ZUVsZW1lbnQocm9vdEVsZW1lbnQpO1xuICAgIH07XG5cbiAgICBBbGVydC5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uIGRpc3Bvc2UoKSB7XG4gICAgICAkLnJlbW92ZURhdGEodGhpcy5fZWxlbWVudCwgREFUQV9LRVkpO1xuICAgICAgdGhpcy5fZWxlbWVudCA9IG51bGw7XG4gICAgfTtcblxuICAgIC8vIHByaXZhdGVcblxuICAgIEFsZXJ0LnByb3RvdHlwZS5fZ2V0Um9vdEVsZW1lbnQgPSBmdW5jdGlvbiBfZ2V0Um9vdEVsZW1lbnQoZWxlbWVudCkge1xuICAgICAgdmFyIHNlbGVjdG9yID0gVXRpbC5nZXRTZWxlY3RvckZyb21FbGVtZW50KGVsZW1lbnQpO1xuICAgICAgdmFyIHBhcmVudCA9IGZhbHNlO1xuXG4gICAgICBpZiAoc2VsZWN0b3IpIHtcbiAgICAgICAgcGFyZW50ID0gJChzZWxlY3RvcilbMF07XG4gICAgICB9XG5cbiAgICAgIGlmICghcGFyZW50KSB7XG4gICAgICAgIHBhcmVudCA9ICQoZWxlbWVudCkuY2xvc2VzdCgnLicgKyBDbGFzc05hbWUuQUxFUlQpWzBdO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcGFyZW50O1xuICAgIH07XG5cbiAgICBBbGVydC5wcm90b3R5cGUuX3RyaWdnZXJDbG9zZUV2ZW50ID0gZnVuY3Rpb24gX3RyaWdnZXJDbG9zZUV2ZW50KGVsZW1lbnQpIHtcbiAgICAgIHZhciBjbG9zZUV2ZW50ID0gJC5FdmVudChFdmVudC5DTE9TRSk7XG5cbiAgICAgICQoZWxlbWVudCkudHJpZ2dlcihjbG9zZUV2ZW50KTtcbiAgICAgIHJldHVybiBjbG9zZUV2ZW50O1xuICAgIH07XG5cbiAgICBBbGVydC5wcm90b3R5cGUuX3JlbW92ZUVsZW1lbnQgPSBmdW5jdGlvbiBfcmVtb3ZlRWxlbWVudChlbGVtZW50KSB7XG4gICAgICAkKGVsZW1lbnQpLnJlbW92ZUNsYXNzKENsYXNzTmFtZS5JTik7XG5cbiAgICAgIGlmICghVXRpbC5zdXBwb3J0c1RyYW5zaXRpb25FbmQoKSB8fCAhJChlbGVtZW50KS5oYXNDbGFzcyhDbGFzc05hbWUuRkFERSkpIHtcbiAgICAgICAgdGhpcy5fZGVzdHJveUVsZW1lbnQoZWxlbWVudCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgJChlbGVtZW50KS5vbmUoVXRpbC5UUkFOU0lUSU9OX0VORCwgJC5wcm94eSh0aGlzLl9kZXN0cm95RWxlbWVudCwgdGhpcywgZWxlbWVudCkpLmVtdWxhdGVUcmFuc2l0aW9uRW5kKFRSQU5TSVRJT05fRFVSQVRJT04pO1xuICAgIH07XG5cbiAgICBBbGVydC5wcm90b3R5cGUuX2Rlc3Ryb3lFbGVtZW50ID0gZnVuY3Rpb24gX2Rlc3Ryb3lFbGVtZW50KGVsZW1lbnQpIHtcbiAgICAgICQoZWxlbWVudCkuZGV0YWNoKCkudHJpZ2dlcihFdmVudC5DTE9TRUQpLnJlbW92ZSgpO1xuICAgIH07XG5cbiAgICAvLyBzdGF0aWNcblxuICAgIEFsZXJ0Ll9qUXVlcnlJbnRlcmZhY2UgPSBmdW5jdGlvbiBfalF1ZXJ5SW50ZXJmYWNlKGNvbmZpZykge1xuICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciAkZWxlbWVudCA9ICQodGhpcyk7XG4gICAgICAgIHZhciBkYXRhID0gJGVsZW1lbnQuZGF0YShEQVRBX0tFWSk7XG5cbiAgICAgICAgaWYgKCFkYXRhKSB7XG4gICAgICAgICAgZGF0YSA9IG5ldyBBbGVydCh0aGlzKTtcbiAgICAgICAgICAkZWxlbWVudC5kYXRhKERBVEFfS0VZLCBkYXRhKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjb25maWcgPT09ICdjbG9zZScpIHtcbiAgICAgICAgICBkYXRhW2NvbmZpZ10odGhpcyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBBbGVydC5faGFuZGxlRGlzbWlzcyA9IGZ1bmN0aW9uIF9oYW5kbGVEaXNtaXNzKGFsZXJ0SW5zdGFuY2UpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgaWYgKGV2ZW50KSB7XG4gICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGFsZXJ0SW5zdGFuY2UuY2xvc2UodGhpcyk7XG4gICAgICB9O1xuICAgIH07XG5cbiAgICBfY3JlYXRlQ2xhc3MoQWxlcnQsIG51bGwsIFt7XG4gICAgICBrZXk6ICdWRVJTSU9OJyxcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gVkVSU0lPTjtcbiAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gQWxlcnQ7XG4gIH0oKTtcblxuICAvKipcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqIERhdGEgQXBpIGltcGxlbWVudGF0aW9uXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKi9cblxuICAkKGRvY3VtZW50KS5vbihFdmVudC5DTElDS19EQVRBX0FQSSwgU2VsZWN0b3IuRElTTUlTUywgQWxlcnQuX2hhbmRsZURpc21pc3MobmV3IEFsZXJ0KCkpKTtcblxuICAvKipcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqIGpRdWVyeVxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICovXG5cbiAgJC5mbltOQU1FXSA9IEFsZXJ0Ll9qUXVlcnlJbnRlcmZhY2U7XG4gICQuZm5bTkFNRV0uQ29uc3RydWN0b3IgPSBBbGVydDtcbiAgJC5mbltOQU1FXS5ub0NvbmZsaWN0ID0gZnVuY3Rpb24gKCkge1xuICAgICQuZm5bTkFNRV0gPSBKUVVFUllfTk9fQ09ORkxJQ1Q7XG4gICAgcmV0dXJuIEFsZXJ0Ll9qUXVlcnlJbnRlcmZhY2U7XG4gIH07XG5cbiAgcmV0dXJuIEFsZXJ0O1xufShqUXVlcnkpO1xuXG4vKipcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiBCb290c3RyYXAgKHY0LjAuMC1hbHBoYS41KTogYnV0dG9uLmpzXG4gKiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ibG9iL21hc3Rlci9MSUNFTlNFKVxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqL1xuXG52YXIgQnV0dG9uID0gZnVuY3Rpb24gKCQpIHtcblxuICAvKipcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqIENvbnN0YW50c1xuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICovXG5cbiAgdmFyIE5BTUUgPSAnYnV0dG9uJztcbiAgdmFyIFZFUlNJT04gPSAnNC4wLjAtYWxwaGEuNSc7XG4gIHZhciBEQVRBX0tFWSA9ICdicy5idXR0b24nO1xuICB2YXIgRVZFTlRfS0VZID0gJy4nICsgREFUQV9LRVk7XG4gIHZhciBEQVRBX0FQSV9LRVkgPSAnLmRhdGEtYXBpJztcbiAgdmFyIEpRVUVSWV9OT19DT05GTElDVCA9ICQuZm5bTkFNRV07XG5cbiAgdmFyIENsYXNzTmFtZSA9IHtcbiAgICBBQ1RJVkU6ICdhY3RpdmUnLFxuICAgIEJVVFRPTjogJ2J0bicsXG4gICAgRk9DVVM6ICdmb2N1cydcbiAgfTtcblxuICB2YXIgU2VsZWN0b3IgPSB7XG4gICAgREFUQV9UT0dHTEVfQ0FSUk9UOiAnW2RhdGEtdG9nZ2xlXj1cImJ1dHRvblwiXScsXG4gICAgREFUQV9UT0dHTEU6ICdbZGF0YS10b2dnbGU9XCJidXR0b25zXCJdJyxcbiAgICBJTlBVVDogJ2lucHV0JyxcbiAgICBBQ1RJVkU6ICcuYWN0aXZlJyxcbiAgICBCVVRUT046ICcuYnRuJ1xuICB9O1xuXG4gIHZhciBFdmVudCA9IHtcbiAgICBDTElDS19EQVRBX0FQSTogJ2NsaWNrJyArIEVWRU5UX0tFWSArIERBVEFfQVBJX0tFWSxcbiAgICBGT0NVU19CTFVSX0RBVEFfQVBJOiAnZm9jdXMnICsgRVZFTlRfS0VZICsgREFUQV9BUElfS0VZICsgJyAnICsgKCdibHVyJyArIEVWRU5UX0tFWSArIERBVEFfQVBJX0tFWSlcbiAgfTtcblxuICAvKipcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqIENsYXNzIERlZmluaXRpb25cbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqL1xuXG4gIHZhciBCdXR0b24gPSBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQnV0dG9uKGVsZW1lbnQpIHtcbiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBCdXR0b24pO1xuXG4gICAgICB0aGlzLl9lbGVtZW50ID0gZWxlbWVudDtcbiAgICB9XG5cbiAgICAvLyBnZXR0ZXJzXG5cbiAgICAvLyBwdWJsaWNcblxuICAgIEJ1dHRvbi5wcm90b3R5cGUudG9nZ2xlID0gZnVuY3Rpb24gdG9nZ2xlKCkge1xuICAgICAgdmFyIHRyaWdnZXJDaGFuZ2VFdmVudCA9IHRydWU7XG4gICAgICB2YXIgcm9vdEVsZW1lbnQgPSAkKHRoaXMuX2VsZW1lbnQpLmNsb3Nlc3QoU2VsZWN0b3IuREFUQV9UT0dHTEUpWzBdO1xuXG4gICAgICBpZiAocm9vdEVsZW1lbnQpIHtcbiAgICAgICAgdmFyIGlucHV0ID0gJCh0aGlzLl9lbGVtZW50KS5maW5kKFNlbGVjdG9yLklOUFVUKVswXTtcblxuICAgICAgICBpZiAoaW5wdXQpIHtcbiAgICAgICAgICBpZiAoaW5wdXQudHlwZSA9PT0gJ3JhZGlvJykge1xuICAgICAgICAgICAgaWYgKGlucHV0LmNoZWNrZWQgJiYgJCh0aGlzLl9lbGVtZW50KS5oYXNDbGFzcyhDbGFzc05hbWUuQUNUSVZFKSkge1xuICAgICAgICAgICAgICB0cmlnZ2VyQ2hhbmdlRXZlbnQgPSBmYWxzZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHZhciBhY3RpdmVFbGVtZW50ID0gJChyb290RWxlbWVudCkuZmluZChTZWxlY3Rvci5BQ1RJVkUpWzBdO1xuXG4gICAgICAgICAgICAgIGlmIChhY3RpdmVFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgJChhY3RpdmVFbGVtZW50KS5yZW1vdmVDbGFzcyhDbGFzc05hbWUuQUNUSVZFKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICh0cmlnZ2VyQ2hhbmdlRXZlbnQpIHtcbiAgICAgICAgICAgIGlucHV0LmNoZWNrZWQgPSAhJCh0aGlzLl9lbGVtZW50KS5oYXNDbGFzcyhDbGFzc05hbWUuQUNUSVZFKTtcbiAgICAgICAgICAgICQodGhpcy5fZWxlbWVudCkudHJpZ2dlcignY2hhbmdlJyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaW5wdXQuZm9jdXMoKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtcHJlc3NlZCcsICEkKHRoaXMuX2VsZW1lbnQpLmhhc0NsYXNzKENsYXNzTmFtZS5BQ1RJVkUpKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRyaWdnZXJDaGFuZ2VFdmVudCkge1xuICAgICAgICAkKHRoaXMuX2VsZW1lbnQpLnRvZ2dsZUNsYXNzKENsYXNzTmFtZS5BQ1RJVkUpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBCdXR0b24ucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiBkaXNwb3NlKCkge1xuICAgICAgJC5yZW1vdmVEYXRhKHRoaXMuX2VsZW1lbnQsIERBVEFfS0VZKTtcbiAgICAgIHRoaXMuX2VsZW1lbnQgPSBudWxsO1xuICAgIH07XG5cbiAgICAvLyBzdGF0aWNcblxuICAgIEJ1dHRvbi5falF1ZXJ5SW50ZXJmYWNlID0gZnVuY3Rpb24gX2pRdWVyeUludGVyZmFjZShjb25maWcpIHtcbiAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZGF0YSA9ICQodGhpcykuZGF0YShEQVRBX0tFWSk7XG5cbiAgICAgICAgaWYgKCFkYXRhKSB7XG4gICAgICAgICAgZGF0YSA9IG5ldyBCdXR0b24odGhpcyk7XG4gICAgICAgICAgJCh0aGlzKS5kYXRhKERBVEFfS0VZLCBkYXRhKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjb25maWcgPT09ICd0b2dnbGUnKSB7XG4gICAgICAgICAgZGF0YVtjb25maWddKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBfY3JlYXRlQ2xhc3MoQnV0dG9uLCBudWxsLCBbe1xuICAgICAga2V5OiAnVkVSU0lPTicsXG4gICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIFZFUlNJT047XG4gICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIEJ1dHRvbjtcbiAgfSgpO1xuXG4gIC8qKlxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICogRGF0YSBBcGkgaW1wbGVtZW50YXRpb25cbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqL1xuXG4gICQoZG9jdW1lbnQpLm9uKEV2ZW50LkNMSUNLX0RBVEFfQVBJLCBTZWxlY3Rvci5EQVRBX1RPR0dMRV9DQVJST1QsIGZ1bmN0aW9uIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICB2YXIgYnV0dG9uID0gZXZlbnQudGFyZ2V0O1xuXG4gICAgaWYgKCEkKGJ1dHRvbikuaGFzQ2xhc3MoQ2xhc3NOYW1lLkJVVFRPTikpIHtcbiAgICAgIGJ1dHRvbiA9ICQoYnV0dG9uKS5jbG9zZXN0KFNlbGVjdG9yLkJVVFRPTik7XG4gICAgfVxuXG4gICAgQnV0dG9uLl9qUXVlcnlJbnRlcmZhY2UuY2FsbCgkKGJ1dHRvbiksICd0b2dnbGUnKTtcbiAgfSkub24oRXZlbnQuRk9DVVNfQkxVUl9EQVRBX0FQSSwgU2VsZWN0b3IuREFUQV9UT0dHTEVfQ0FSUk9ULCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICB2YXIgYnV0dG9uID0gJChldmVudC50YXJnZXQpLmNsb3Nlc3QoU2VsZWN0b3IuQlVUVE9OKVswXTtcbiAgICAkKGJ1dHRvbikudG9nZ2xlQ2xhc3MoQ2xhc3NOYW1lLkZPQ1VTLCAvXmZvY3VzKGluKT8kLy50ZXN0KGV2ZW50LnR5cGUpKTtcbiAgfSk7XG5cbiAgLyoqXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKiBqUXVlcnlcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqL1xuXG4gICQuZm5bTkFNRV0gPSBCdXR0b24uX2pRdWVyeUludGVyZmFjZTtcbiAgJC5mbltOQU1FXS5Db25zdHJ1Y3RvciA9IEJ1dHRvbjtcbiAgJC5mbltOQU1FXS5ub0NvbmZsaWN0ID0gZnVuY3Rpb24gKCkge1xuICAgICQuZm5bTkFNRV0gPSBKUVVFUllfTk9fQ09ORkxJQ1Q7XG4gICAgcmV0dXJuIEJ1dHRvbi5falF1ZXJ5SW50ZXJmYWNlO1xuICB9O1xuXG4gIHJldHVybiBCdXR0b247XG59KGpRdWVyeSk7XG5cbi8qKlxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIEJvb3RzdHJhcCAodjQuMC4wLWFscGhhLjUpOiBjYXJvdXNlbC5qc1xuICogTGljZW5zZWQgdW5kZXIgTUlUIChodHRwczovL2dpdGh1Yi5jb20vdHdicy9ib290c3RyYXAvYmxvYi9tYXN0ZXIvTElDRU5TRSlcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKi9cblxudmFyIENhcm91c2VsID0gZnVuY3Rpb24gKCQpIHtcblxuICAvKipcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqIENvbnN0YW50c1xuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICovXG5cbiAgdmFyIE5BTUUgPSAnY2Fyb3VzZWwnO1xuICB2YXIgVkVSU0lPTiA9ICc0LjAuMC1hbHBoYS41JztcbiAgdmFyIERBVEFfS0VZID0gJ2JzLmNhcm91c2VsJztcbiAgdmFyIEVWRU5UX0tFWSA9ICcuJyArIERBVEFfS0VZO1xuICB2YXIgREFUQV9BUElfS0VZID0gJy5kYXRhLWFwaSc7XG4gIHZhciBKUVVFUllfTk9fQ09ORkxJQ1QgPSAkLmZuW05BTUVdO1xuICB2YXIgVFJBTlNJVElPTl9EVVJBVElPTiA9IDYwMDtcbiAgdmFyIEFSUk9XX0xFRlRfS0VZQ09ERSA9IDM3OyAvLyBLZXlib2FyZEV2ZW50LndoaWNoIHZhbHVlIGZvciBsZWZ0IGFycm93IGtleVxuICB2YXIgQVJST1dfUklHSFRfS0VZQ09ERSA9IDM5OyAvLyBLZXlib2FyZEV2ZW50LndoaWNoIHZhbHVlIGZvciByaWdodCBhcnJvdyBrZXlcblxuICB2YXIgRGVmYXVsdCA9IHtcbiAgICBpbnRlcnZhbDogNTAwMCxcbiAgICBrZXlib2FyZDogdHJ1ZSxcbiAgICBzbGlkZTogZmFsc2UsXG4gICAgcGF1c2U6ICdob3ZlcicsXG4gICAgd3JhcDogdHJ1ZVxuICB9O1xuXG4gIHZhciBEZWZhdWx0VHlwZSA9IHtcbiAgICBpbnRlcnZhbDogJyhudW1iZXJ8Ym9vbGVhbiknLFxuICAgIGtleWJvYXJkOiAnYm9vbGVhbicsXG4gICAgc2xpZGU6ICcoYm9vbGVhbnxzdHJpbmcpJyxcbiAgICBwYXVzZTogJyhzdHJpbmd8Ym9vbGVhbiknLFxuICAgIHdyYXA6ICdib29sZWFuJ1xuICB9O1xuXG4gIHZhciBEaXJlY3Rpb24gPSB7XG4gICAgTkVYVDogJ25leHQnLFxuICAgIFBSRVZJT1VTOiAncHJldidcbiAgfTtcblxuICB2YXIgRXZlbnQgPSB7XG4gICAgU0xJREU6ICdzbGlkZScgKyBFVkVOVF9LRVksXG4gICAgU0xJRDogJ3NsaWQnICsgRVZFTlRfS0VZLFxuICAgIEtFWURPV046ICdrZXlkb3duJyArIEVWRU5UX0tFWSxcbiAgICBNT1VTRUVOVEVSOiAnbW91c2VlbnRlcicgKyBFVkVOVF9LRVksXG4gICAgTU9VU0VMRUFWRTogJ21vdXNlbGVhdmUnICsgRVZFTlRfS0VZLFxuICAgIExPQURfREFUQV9BUEk6ICdsb2FkJyArIEVWRU5UX0tFWSArIERBVEFfQVBJX0tFWSxcbiAgICBDTElDS19EQVRBX0FQSTogJ2NsaWNrJyArIEVWRU5UX0tFWSArIERBVEFfQVBJX0tFWVxuICB9O1xuXG4gIHZhciBDbGFzc05hbWUgPSB7XG4gICAgQ0FST1VTRUw6ICdjYXJvdXNlbCcsXG4gICAgQUNUSVZFOiAnYWN0aXZlJyxcbiAgICBTTElERTogJ3NsaWRlJyxcbiAgICBSSUdIVDogJ3JpZ2h0JyxcbiAgICBMRUZUOiAnbGVmdCcsXG4gICAgSVRFTTogJ2Nhcm91c2VsLWl0ZW0nXG4gIH07XG5cbiAgdmFyIFNlbGVjdG9yID0ge1xuICAgIEFDVElWRTogJy5hY3RpdmUnLFxuICAgIEFDVElWRV9JVEVNOiAnLmFjdGl2ZS5jYXJvdXNlbC1pdGVtJyxcbiAgICBJVEVNOiAnLmNhcm91c2VsLWl0ZW0nLFxuICAgIE5FWFRfUFJFVjogJy5uZXh0LCAucHJldicsXG4gICAgSU5ESUNBVE9SUzogJy5jYXJvdXNlbC1pbmRpY2F0b3JzJyxcbiAgICBEQVRBX1NMSURFOiAnW2RhdGEtc2xpZGVdLCBbZGF0YS1zbGlkZS10b10nLFxuICAgIERBVEFfUklERTogJ1tkYXRhLXJpZGU9XCJjYXJvdXNlbFwiXSdcbiAgfTtcblxuICAvKipcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqIENsYXNzIERlZmluaXRpb25cbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqL1xuXG4gIHZhciBDYXJvdXNlbCA9IGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBDYXJvdXNlbChlbGVtZW50LCBjb25maWcpIHtcbiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDYXJvdXNlbCk7XG5cbiAgICAgIHRoaXMuX2l0ZW1zID0gbnVsbDtcbiAgICAgIHRoaXMuX2ludGVydmFsID0gbnVsbDtcbiAgICAgIHRoaXMuX2FjdGl2ZUVsZW1lbnQgPSBudWxsO1xuXG4gICAgICB0aGlzLl9pc1BhdXNlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5faXNTbGlkaW5nID0gZmFsc2U7XG5cbiAgICAgIHRoaXMuX2NvbmZpZyA9IHRoaXMuX2dldENvbmZpZyhjb25maWcpO1xuICAgICAgdGhpcy5fZWxlbWVudCA9ICQoZWxlbWVudClbMF07XG4gICAgICB0aGlzLl9pbmRpY2F0b3JzRWxlbWVudCA9ICQodGhpcy5fZWxlbWVudCkuZmluZChTZWxlY3Rvci5JTkRJQ0FUT1JTKVswXTtcblxuICAgICAgdGhpcy5fYWRkRXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB9XG5cbiAgICAvLyBnZXR0ZXJzXG5cbiAgICAvLyBwdWJsaWNcblxuICAgIENhcm91c2VsLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gbmV4dCgpIHtcbiAgICAgIGlmICghdGhpcy5faXNTbGlkaW5nKSB7XG4gICAgICAgIHRoaXMuX3NsaWRlKERpcmVjdGlvbi5ORVhUKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgQ2Fyb3VzZWwucHJvdG90eXBlLm5leHRXaGVuVmlzaWJsZSA9IGZ1bmN0aW9uIG5leHRXaGVuVmlzaWJsZSgpIHtcbiAgICAgIC8vIERvbid0IGNhbGwgbmV4dCB3aGVuIHRoZSBwYWdlIGlzbid0IHZpc2libGVcbiAgICAgIGlmICghZG9jdW1lbnQuaGlkZGVuKSB7XG4gICAgICAgIHRoaXMubmV4dCgpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBDYXJvdXNlbC5wcm90b3R5cGUucHJldiA9IGZ1bmN0aW9uIHByZXYoKSB7XG4gICAgICBpZiAoIXRoaXMuX2lzU2xpZGluZykge1xuICAgICAgICB0aGlzLl9zbGlkZShEaXJlY3Rpb24uUFJFVklPVVMpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBDYXJvdXNlbC5wcm90b3R5cGUucGF1c2UgPSBmdW5jdGlvbiBwYXVzZShldmVudCkge1xuICAgICAgaWYgKCFldmVudCkge1xuICAgICAgICB0aGlzLl9pc1BhdXNlZCA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIGlmICgkKHRoaXMuX2VsZW1lbnQpLmZpbmQoU2VsZWN0b3IuTkVYVF9QUkVWKVswXSAmJiBVdGlsLnN1cHBvcnRzVHJhbnNpdGlvbkVuZCgpKSB7XG4gICAgICAgIFV0aWwudHJpZ2dlclRyYW5zaXRpb25FbmQodGhpcy5fZWxlbWVudCk7XG4gICAgICAgIHRoaXMuY3ljbGUodHJ1ZSk7XG4gICAgICB9XG5cbiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5faW50ZXJ2YWwpO1xuICAgICAgdGhpcy5faW50ZXJ2YWwgPSBudWxsO1xuICAgIH07XG5cbiAgICBDYXJvdXNlbC5wcm90b3R5cGUuY3ljbGUgPSBmdW5jdGlvbiBjeWNsZShldmVudCkge1xuICAgICAgaWYgKCFldmVudCkge1xuICAgICAgICB0aGlzLl9pc1BhdXNlZCA9IGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5faW50ZXJ2YWwpIHtcbiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLl9pbnRlcnZhbCk7XG4gICAgICAgIHRoaXMuX2ludGVydmFsID0gbnVsbDtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuX2NvbmZpZy5pbnRlcnZhbCAmJiAhdGhpcy5faXNQYXVzZWQpIHtcbiAgICAgICAgdGhpcy5faW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgkLnByb3h5KGRvY3VtZW50LnZpc2liaWxpdHlTdGF0ZSA/IHRoaXMubmV4dFdoZW5WaXNpYmxlIDogdGhpcy5uZXh0LCB0aGlzKSwgdGhpcy5fY29uZmlnLmludGVydmFsKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgQ2Fyb3VzZWwucHJvdG90eXBlLnRvID0gZnVuY3Rpb24gdG8oaW5kZXgpIHtcbiAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICB0aGlzLl9hY3RpdmVFbGVtZW50ID0gJCh0aGlzLl9lbGVtZW50KS5maW5kKFNlbGVjdG9yLkFDVElWRV9JVEVNKVswXTtcblxuICAgICAgdmFyIGFjdGl2ZUluZGV4ID0gdGhpcy5fZ2V0SXRlbUluZGV4KHRoaXMuX2FjdGl2ZUVsZW1lbnQpO1xuXG4gICAgICBpZiAoaW5kZXggPiB0aGlzLl9pdGVtcy5sZW5ndGggLSAxIHx8IGluZGV4IDwgMCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLl9pc1NsaWRpbmcpIHtcbiAgICAgICAgJCh0aGlzLl9lbGVtZW50KS5vbmUoRXZlbnQuU0xJRCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJldHVybiBfdGhpczIudG8oaW5kZXgpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAoYWN0aXZlSW5kZXggPT09IGluZGV4KSB7XG4gICAgICAgIHRoaXMucGF1c2UoKTtcbiAgICAgICAgdGhpcy5jeWNsZSgpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHZhciBkaXJlY3Rpb24gPSBpbmRleCA+IGFjdGl2ZUluZGV4ID8gRGlyZWN0aW9uLk5FWFQgOiBEaXJlY3Rpb24uUFJFVklPVVM7XG5cbiAgICAgIHRoaXMuX3NsaWRlKGRpcmVjdGlvbiwgdGhpcy5faXRlbXNbaW5kZXhdKTtcbiAgICB9O1xuXG4gICAgQ2Fyb3VzZWwucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiBkaXNwb3NlKCkge1xuICAgICAgJCh0aGlzLl9lbGVtZW50KS5vZmYoRVZFTlRfS0VZKTtcbiAgICAgICQucmVtb3ZlRGF0YSh0aGlzLl9lbGVtZW50LCBEQVRBX0tFWSk7XG5cbiAgICAgIHRoaXMuX2l0ZW1zID0gbnVsbDtcbiAgICAgIHRoaXMuX2NvbmZpZyA9IG51bGw7XG4gICAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcbiAgICAgIHRoaXMuX2ludGVydmFsID0gbnVsbDtcbiAgICAgIHRoaXMuX2lzUGF1c2VkID0gbnVsbDtcbiAgICAgIHRoaXMuX2lzU2xpZGluZyA9IG51bGw7XG4gICAgICB0aGlzLl9hY3RpdmVFbGVtZW50ID0gbnVsbDtcbiAgICAgIHRoaXMuX2luZGljYXRvcnNFbGVtZW50ID0gbnVsbDtcbiAgICB9O1xuXG4gICAgLy8gcHJpdmF0ZVxuXG4gICAgQ2Fyb3VzZWwucHJvdG90eXBlLl9nZXRDb25maWcgPSBmdW5jdGlvbiBfZ2V0Q29uZmlnKGNvbmZpZykge1xuICAgICAgY29uZmlnID0gJC5leHRlbmQoe30sIERlZmF1bHQsIGNvbmZpZyk7XG4gICAgICBVdGlsLnR5cGVDaGVja0NvbmZpZyhOQU1FLCBjb25maWcsIERlZmF1bHRUeXBlKTtcbiAgICAgIHJldHVybiBjb25maWc7XG4gICAgfTtcblxuICAgIENhcm91c2VsLnByb3RvdHlwZS5fYWRkRXZlbnRMaXN0ZW5lcnMgPSBmdW5jdGlvbiBfYWRkRXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICBpZiAodGhpcy5fY29uZmlnLmtleWJvYXJkKSB7XG4gICAgICAgICQodGhpcy5fZWxlbWVudCkub24oRXZlbnQuS0VZRE9XTiwgJC5wcm94eSh0aGlzLl9rZXlkb3duLCB0aGlzKSk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLl9jb25maWcucGF1c2UgPT09ICdob3ZlcicgJiYgISgnb250b3VjaHN0YXJ0JyBpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpKSB7XG4gICAgICAgICQodGhpcy5fZWxlbWVudCkub24oRXZlbnQuTU9VU0VFTlRFUiwgJC5wcm94eSh0aGlzLnBhdXNlLCB0aGlzKSkub24oRXZlbnQuTU9VU0VMRUFWRSwgJC5wcm94eSh0aGlzLmN5Y2xlLCB0aGlzKSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIENhcm91c2VsLnByb3RvdHlwZS5fa2V5ZG93biA9IGZ1bmN0aW9uIF9rZXlkb3duKGV2ZW50KSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICBpZiAoL2lucHV0fHRleHRhcmVhL2kudGVzdChldmVudC50YXJnZXQudGFnTmFtZSkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBzd2l0Y2ggKGV2ZW50LndoaWNoKSB7XG4gICAgICAgIGNhc2UgQVJST1dfTEVGVF9LRVlDT0RFOlxuICAgICAgICAgIHRoaXMucHJldigpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIEFSUk9XX1JJR0hUX0tFWUNPREU6XG4gICAgICAgICAgdGhpcy5uZXh0KCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBDYXJvdXNlbC5wcm90b3R5cGUuX2dldEl0ZW1JbmRleCA9IGZ1bmN0aW9uIF9nZXRJdGVtSW5kZXgoZWxlbWVudCkge1xuICAgICAgdGhpcy5faXRlbXMgPSAkLm1ha2VBcnJheSgkKGVsZW1lbnQpLnBhcmVudCgpLmZpbmQoU2VsZWN0b3IuSVRFTSkpO1xuICAgICAgcmV0dXJuIHRoaXMuX2l0ZW1zLmluZGV4T2YoZWxlbWVudCk7XG4gICAgfTtcblxuICAgIENhcm91c2VsLnByb3RvdHlwZS5fZ2V0SXRlbUJ5RGlyZWN0aW9uID0gZnVuY3Rpb24gX2dldEl0ZW1CeURpcmVjdGlvbihkaXJlY3Rpb24sIGFjdGl2ZUVsZW1lbnQpIHtcbiAgICAgIHZhciBpc05leHREaXJlY3Rpb24gPSBkaXJlY3Rpb24gPT09IERpcmVjdGlvbi5ORVhUO1xuICAgICAgdmFyIGlzUHJldkRpcmVjdGlvbiA9IGRpcmVjdGlvbiA9PT0gRGlyZWN0aW9uLlBSRVZJT1VTO1xuICAgICAgdmFyIGFjdGl2ZUluZGV4ID0gdGhpcy5fZ2V0SXRlbUluZGV4KGFjdGl2ZUVsZW1lbnQpO1xuICAgICAgdmFyIGxhc3RJdGVtSW5kZXggPSB0aGlzLl9pdGVtcy5sZW5ndGggLSAxO1xuICAgICAgdmFyIGlzR29pbmdUb1dyYXAgPSBpc1ByZXZEaXJlY3Rpb24gJiYgYWN0aXZlSW5kZXggPT09IDAgfHwgaXNOZXh0RGlyZWN0aW9uICYmIGFjdGl2ZUluZGV4ID09PSBsYXN0SXRlbUluZGV4O1xuXG4gICAgICBpZiAoaXNHb2luZ1RvV3JhcCAmJiAhdGhpcy5fY29uZmlnLndyYXApIHtcbiAgICAgICAgcmV0dXJuIGFjdGl2ZUVsZW1lbnQ7XG4gICAgICB9XG5cbiAgICAgIHZhciBkZWx0YSA9IGRpcmVjdGlvbiA9PT0gRGlyZWN0aW9uLlBSRVZJT1VTID8gLTEgOiAxO1xuICAgICAgdmFyIGl0ZW1JbmRleCA9IChhY3RpdmVJbmRleCArIGRlbHRhKSAlIHRoaXMuX2l0ZW1zLmxlbmd0aDtcblxuICAgICAgcmV0dXJuIGl0ZW1JbmRleCA9PT0gLTEgPyB0aGlzLl9pdGVtc1t0aGlzLl9pdGVtcy5sZW5ndGggLSAxXSA6IHRoaXMuX2l0ZW1zW2l0ZW1JbmRleF07XG4gICAgfTtcblxuICAgIENhcm91c2VsLnByb3RvdHlwZS5fdHJpZ2dlclNsaWRlRXZlbnQgPSBmdW5jdGlvbiBfdHJpZ2dlclNsaWRlRXZlbnQocmVsYXRlZFRhcmdldCwgZGlyZWN0aW9uYWxDbGFzc25hbWUpIHtcbiAgICAgIHZhciBzbGlkZUV2ZW50ID0gJC5FdmVudChFdmVudC5TTElERSwge1xuICAgICAgICByZWxhdGVkVGFyZ2V0OiByZWxhdGVkVGFyZ2V0LFxuICAgICAgICBkaXJlY3Rpb246IGRpcmVjdGlvbmFsQ2xhc3NuYW1lXG4gICAgICB9KTtcblxuICAgICAgJCh0aGlzLl9lbGVtZW50KS50cmlnZ2VyKHNsaWRlRXZlbnQpO1xuXG4gICAgICByZXR1cm4gc2xpZGVFdmVudDtcbiAgICB9O1xuXG4gICAgQ2Fyb3VzZWwucHJvdG90eXBlLl9zZXRBY3RpdmVJbmRpY2F0b3JFbGVtZW50ID0gZnVuY3Rpb24gX3NldEFjdGl2ZUluZGljYXRvckVsZW1lbnQoZWxlbWVudCkge1xuICAgICAgaWYgKHRoaXMuX2luZGljYXRvcnNFbGVtZW50KSB7XG4gICAgICAgICQodGhpcy5faW5kaWNhdG9yc0VsZW1lbnQpLmZpbmQoU2VsZWN0b3IuQUNUSVZFKS5yZW1vdmVDbGFzcyhDbGFzc05hbWUuQUNUSVZFKTtcblxuICAgICAgICB2YXIgbmV4dEluZGljYXRvciA9IHRoaXMuX2luZGljYXRvcnNFbGVtZW50LmNoaWxkcmVuW3RoaXMuX2dldEl0ZW1JbmRleChlbGVtZW50KV07XG5cbiAgICAgICAgaWYgKG5leHRJbmRpY2F0b3IpIHtcbiAgICAgICAgICAkKG5leHRJbmRpY2F0b3IpLmFkZENsYXNzKENsYXNzTmFtZS5BQ1RJVkUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIENhcm91c2VsLnByb3RvdHlwZS5fc2xpZGUgPSBmdW5jdGlvbiBfc2xpZGUoZGlyZWN0aW9uLCBlbGVtZW50KSB7XG4gICAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgICAgdmFyIGFjdGl2ZUVsZW1lbnQgPSAkKHRoaXMuX2VsZW1lbnQpLmZpbmQoU2VsZWN0b3IuQUNUSVZFX0lURU0pWzBdO1xuICAgICAgdmFyIG5leHRFbGVtZW50ID0gZWxlbWVudCB8fCBhY3RpdmVFbGVtZW50ICYmIHRoaXMuX2dldEl0ZW1CeURpcmVjdGlvbihkaXJlY3Rpb24sIGFjdGl2ZUVsZW1lbnQpO1xuXG4gICAgICB2YXIgaXNDeWNsaW5nID0gQm9vbGVhbih0aGlzLl9pbnRlcnZhbCk7XG5cbiAgICAgIHZhciBkaXJlY3Rpb25hbENsYXNzTmFtZSA9IGRpcmVjdGlvbiA9PT0gRGlyZWN0aW9uLk5FWFQgPyBDbGFzc05hbWUuTEVGVCA6IENsYXNzTmFtZS5SSUdIVDtcblxuICAgICAgaWYgKG5leHRFbGVtZW50ICYmICQobmV4dEVsZW1lbnQpLmhhc0NsYXNzKENsYXNzTmFtZS5BQ1RJVkUpKSB7XG4gICAgICAgIHRoaXMuX2lzU2xpZGluZyA9IGZhbHNlO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHZhciBzbGlkZUV2ZW50ID0gdGhpcy5fdHJpZ2dlclNsaWRlRXZlbnQobmV4dEVsZW1lbnQsIGRpcmVjdGlvbmFsQ2xhc3NOYW1lKTtcbiAgICAgIGlmIChzbGlkZUV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKCFhY3RpdmVFbGVtZW50IHx8ICFuZXh0RWxlbWVudCkge1xuICAgICAgICAvLyBzb21lIHdlaXJkbmVzcyBpcyBoYXBwZW5pbmcsIHNvIHdlIGJhaWxcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9pc1NsaWRpbmcgPSB0cnVlO1xuXG4gICAgICBpZiAoaXNDeWNsaW5nKSB7XG4gICAgICAgIHRoaXMucGF1c2UoKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5fc2V0QWN0aXZlSW5kaWNhdG9yRWxlbWVudChuZXh0RWxlbWVudCk7XG5cbiAgICAgIHZhciBzbGlkRXZlbnQgPSAkLkV2ZW50KEV2ZW50LlNMSUQsIHtcbiAgICAgICAgcmVsYXRlZFRhcmdldDogbmV4dEVsZW1lbnQsXG4gICAgICAgIGRpcmVjdGlvbjogZGlyZWN0aW9uYWxDbGFzc05hbWVcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoVXRpbC5zdXBwb3J0c1RyYW5zaXRpb25FbmQoKSAmJiAkKHRoaXMuX2VsZW1lbnQpLmhhc0NsYXNzKENsYXNzTmFtZS5TTElERSkpIHtcblxuICAgICAgICAkKG5leHRFbGVtZW50KS5hZGRDbGFzcyhkaXJlY3Rpb24pO1xuXG4gICAgICAgIFV0aWwucmVmbG93KG5leHRFbGVtZW50KTtcblxuICAgICAgICAkKGFjdGl2ZUVsZW1lbnQpLmFkZENsYXNzKGRpcmVjdGlvbmFsQ2xhc3NOYW1lKTtcbiAgICAgICAgJChuZXh0RWxlbWVudCkuYWRkQ2xhc3MoZGlyZWN0aW9uYWxDbGFzc05hbWUpO1xuXG4gICAgICAgICQoYWN0aXZlRWxlbWVudCkub25lKFV0aWwuVFJBTlNJVElPTl9FTkQsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAkKG5leHRFbGVtZW50KS5yZW1vdmVDbGFzcyhkaXJlY3Rpb25hbENsYXNzTmFtZSkucmVtb3ZlQ2xhc3MoZGlyZWN0aW9uKTtcblxuICAgICAgICAgICQobmV4dEVsZW1lbnQpLmFkZENsYXNzKENsYXNzTmFtZS5BQ1RJVkUpO1xuXG4gICAgICAgICAgJChhY3RpdmVFbGVtZW50KS5yZW1vdmVDbGFzcyhDbGFzc05hbWUuQUNUSVZFKS5yZW1vdmVDbGFzcyhkaXJlY3Rpb24pLnJlbW92ZUNsYXNzKGRpcmVjdGlvbmFsQ2xhc3NOYW1lKTtcblxuICAgICAgICAgIF90aGlzMy5faXNTbGlkaW5nID0gZmFsc2U7XG5cbiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAkKF90aGlzMy5fZWxlbWVudCkudHJpZ2dlcihzbGlkRXZlbnQpO1xuICAgICAgICAgIH0sIDApO1xuICAgICAgICB9KS5lbXVsYXRlVHJhbnNpdGlvbkVuZChUUkFOU0lUSU9OX0RVUkFUSU9OKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICQoYWN0aXZlRWxlbWVudCkucmVtb3ZlQ2xhc3MoQ2xhc3NOYW1lLkFDVElWRSk7XG4gICAgICAgICQobmV4dEVsZW1lbnQpLmFkZENsYXNzKENsYXNzTmFtZS5BQ1RJVkUpO1xuXG4gICAgICAgIHRoaXMuX2lzU2xpZGluZyA9IGZhbHNlO1xuICAgICAgICAkKHRoaXMuX2VsZW1lbnQpLnRyaWdnZXIoc2xpZEV2ZW50KTtcbiAgICAgIH1cblxuICAgICAgaWYgKGlzQ3ljbGluZykge1xuICAgICAgICB0aGlzLmN5Y2xlKCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8vIHN0YXRpY1xuXG4gICAgQ2Fyb3VzZWwuX2pRdWVyeUludGVyZmFjZSA9IGZ1bmN0aW9uIF9qUXVlcnlJbnRlcmZhY2UoY29uZmlnKSB7XG4gICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGRhdGEgPSAkKHRoaXMpLmRhdGEoREFUQV9LRVkpO1xuICAgICAgICB2YXIgX2NvbmZpZyA9ICQuZXh0ZW5kKHt9LCBEZWZhdWx0LCAkKHRoaXMpLmRhdGEoKSk7XG5cbiAgICAgICAgaWYgKCh0eXBlb2YgY29uZmlnID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihjb25maWcpKSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAkLmV4dGVuZChfY29uZmlnLCBjb25maWcpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGFjdGlvbiA9IHR5cGVvZiBjb25maWcgPT09ICdzdHJpbmcnID8gY29uZmlnIDogX2NvbmZpZy5zbGlkZTtcblxuICAgICAgICBpZiAoIWRhdGEpIHtcbiAgICAgICAgICBkYXRhID0gbmV3IENhcm91c2VsKHRoaXMsIF9jb25maWcpO1xuICAgICAgICAgICQodGhpcykuZGF0YShEQVRBX0tFWSwgZGF0YSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHlwZW9mIGNvbmZpZyA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICBkYXRhLnRvKGNvbmZpZyk7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGFjdGlvbiA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICBpZiAoZGF0YVthY3Rpb25dID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gbWV0aG9kIG5hbWVkIFwiJyArIGFjdGlvbiArICdcIicpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBkYXRhW2FjdGlvbl0oKTtcbiAgICAgICAgfSBlbHNlIGlmIChfY29uZmlnLmludGVydmFsKSB7XG4gICAgICAgICAgZGF0YS5wYXVzZSgpO1xuICAgICAgICAgIGRhdGEuY3ljbGUoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfTtcblxuICAgIENhcm91c2VsLl9kYXRhQXBpQ2xpY2tIYW5kbGVyID0gZnVuY3Rpb24gX2RhdGFBcGlDbGlja0hhbmRsZXIoZXZlbnQpIHtcbiAgICAgIHZhciBzZWxlY3RvciA9IFV0aWwuZ2V0U2VsZWN0b3JGcm9tRWxlbWVudCh0aGlzKTtcblxuICAgICAgaWYgKCFzZWxlY3Rvcikge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHZhciB0YXJnZXQgPSAkKHNlbGVjdG9yKVswXTtcblxuICAgICAgaWYgKCF0YXJnZXQgfHwgISQodGFyZ2V0KS5oYXNDbGFzcyhDbGFzc05hbWUuQ0FST1VTRUwpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdmFyIGNvbmZpZyA9ICQuZXh0ZW5kKHt9LCAkKHRhcmdldCkuZGF0YSgpLCAkKHRoaXMpLmRhdGEoKSk7XG4gICAgICB2YXIgc2xpZGVJbmRleCA9IHRoaXMuZ2V0QXR0cmlidXRlKCdkYXRhLXNsaWRlLXRvJyk7XG5cbiAgICAgIGlmIChzbGlkZUluZGV4KSB7XG4gICAgICAgIGNvbmZpZy5pbnRlcnZhbCA9IGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBDYXJvdXNlbC5falF1ZXJ5SW50ZXJmYWNlLmNhbGwoJCh0YXJnZXQpLCBjb25maWcpO1xuXG4gICAgICBpZiAoc2xpZGVJbmRleCkge1xuICAgICAgICAkKHRhcmdldCkuZGF0YShEQVRBX0tFWSkudG8oc2xpZGVJbmRleCk7XG4gICAgICB9XG5cbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfTtcblxuICAgIF9jcmVhdGVDbGFzcyhDYXJvdXNlbCwgbnVsbCwgW3tcbiAgICAgIGtleTogJ1ZFUlNJT04nLFxuICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgIHJldHVybiBWRVJTSU9OO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogJ0RlZmF1bHQnLFxuICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgIHJldHVybiBEZWZhdWx0O1xuICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBDYXJvdXNlbDtcbiAgfSgpO1xuXG4gIC8qKlxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICogRGF0YSBBcGkgaW1wbGVtZW50YXRpb25cbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqL1xuXG4gICQoZG9jdW1lbnQpLm9uKEV2ZW50LkNMSUNLX0RBVEFfQVBJLCBTZWxlY3Rvci5EQVRBX1NMSURFLCBDYXJvdXNlbC5fZGF0YUFwaUNsaWNrSGFuZGxlcik7XG5cbiAgJCh3aW5kb3cpLm9uKEV2ZW50LkxPQURfREFUQV9BUEksIGZ1bmN0aW9uICgpIHtcbiAgICAkKFNlbGVjdG9yLkRBVEFfUklERSkuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgJGNhcm91c2VsID0gJCh0aGlzKTtcbiAgICAgIENhcm91c2VsLl9qUXVlcnlJbnRlcmZhY2UuY2FsbCgkY2Fyb3VzZWwsICRjYXJvdXNlbC5kYXRhKCkpO1xuICAgIH0pO1xuICB9KTtcblxuICAvKipcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqIGpRdWVyeVxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICovXG5cbiAgJC5mbltOQU1FXSA9IENhcm91c2VsLl9qUXVlcnlJbnRlcmZhY2U7XG4gICQuZm5bTkFNRV0uQ29uc3RydWN0b3IgPSBDYXJvdXNlbDtcbiAgJC5mbltOQU1FXS5ub0NvbmZsaWN0ID0gZnVuY3Rpb24gKCkge1xuICAgICQuZm5bTkFNRV0gPSBKUVVFUllfTk9fQ09ORkxJQ1Q7XG4gICAgcmV0dXJuIENhcm91c2VsLl9qUXVlcnlJbnRlcmZhY2U7XG4gIH07XG5cbiAgcmV0dXJuIENhcm91c2VsO1xufShqUXVlcnkpO1xuXG4vKipcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiBCb290c3RyYXAgKHY0LjAuMC1hbHBoYS41KTogY29sbGFwc2UuanNcbiAqIExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2Jsb2IvbWFzdGVyL0xJQ0VOU0UpXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICovXG5cbnZhciBDb2xsYXBzZSA9IGZ1bmN0aW9uICgkKSB7XG5cbiAgLyoqXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKiBDb25zdGFudHNcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqL1xuXG4gIHZhciBOQU1FID0gJ2NvbGxhcHNlJztcbiAgdmFyIFZFUlNJT04gPSAnNC4wLjAtYWxwaGEuNSc7XG4gIHZhciBEQVRBX0tFWSA9ICdicy5jb2xsYXBzZSc7XG4gIHZhciBFVkVOVF9LRVkgPSAnLicgKyBEQVRBX0tFWTtcbiAgdmFyIERBVEFfQVBJX0tFWSA9ICcuZGF0YS1hcGknO1xuICB2YXIgSlFVRVJZX05PX0NPTkZMSUNUID0gJC5mbltOQU1FXTtcbiAgdmFyIFRSQU5TSVRJT05fRFVSQVRJT04gPSA2MDA7XG5cbiAgdmFyIERlZmF1bHQgPSB7XG4gICAgdG9nZ2xlOiB0cnVlLFxuICAgIHBhcmVudDogJydcbiAgfTtcblxuICB2YXIgRGVmYXVsdFR5cGUgPSB7XG4gICAgdG9nZ2xlOiAnYm9vbGVhbicsXG4gICAgcGFyZW50OiAnc3RyaW5nJ1xuICB9O1xuXG4gIHZhciBFdmVudCA9IHtcbiAgICBTSE9XOiAnc2hvdycgKyBFVkVOVF9LRVksXG4gICAgU0hPV046ICdzaG93bicgKyBFVkVOVF9LRVksXG4gICAgSElERTogJ2hpZGUnICsgRVZFTlRfS0VZLFxuICAgIEhJRERFTjogJ2hpZGRlbicgKyBFVkVOVF9LRVksXG4gICAgQ0xJQ0tfREFUQV9BUEk6ICdjbGljaycgKyBFVkVOVF9LRVkgKyBEQVRBX0FQSV9LRVlcbiAgfTtcblxuICB2YXIgQ2xhc3NOYW1lID0ge1xuICAgIElOOiAnaW4nLFxuICAgIENPTExBUFNFOiAnY29sbGFwc2UnLFxuICAgIENPTExBUFNJTkc6ICdjb2xsYXBzaW5nJyxcbiAgICBDT0xMQVBTRUQ6ICdjb2xsYXBzZWQnXG4gIH07XG5cbiAgdmFyIERpbWVuc2lvbiA9IHtcbiAgICBXSURUSDogJ3dpZHRoJyxcbiAgICBIRUlHSFQ6ICdoZWlnaHQnXG4gIH07XG5cbiAgdmFyIFNlbGVjdG9yID0ge1xuICAgIEFDVElWRVM6ICcuY2FyZCA+IC5pbiwgLmNhcmQgPiAuY29sbGFwc2luZycsXG4gICAgREFUQV9UT0dHTEU6ICdbZGF0YS10b2dnbGU9XCJjb2xsYXBzZVwiXSdcbiAgfTtcblxuICAvKipcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqIENsYXNzIERlZmluaXRpb25cbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqL1xuXG4gIHZhciBDb2xsYXBzZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBDb2xsYXBzZShlbGVtZW50LCBjb25maWcpIHtcbiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDb2xsYXBzZSk7XG5cbiAgICAgIHRoaXMuX2lzVHJhbnNpdGlvbmluZyA9IGZhbHNlO1xuICAgICAgdGhpcy5fZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgICB0aGlzLl9jb25maWcgPSB0aGlzLl9nZXRDb25maWcoY29uZmlnKTtcbiAgICAgIHRoaXMuX3RyaWdnZXJBcnJheSA9ICQubWFrZUFycmF5KCQoJ1tkYXRhLXRvZ2dsZT1cImNvbGxhcHNlXCJdW2hyZWY9XCIjJyArIGVsZW1lbnQuaWQgKyAnXCJdLCcgKyAoJ1tkYXRhLXRvZ2dsZT1cImNvbGxhcHNlXCJdW2RhdGEtdGFyZ2V0PVwiIycgKyBlbGVtZW50LmlkICsgJ1wiXScpKSk7XG5cbiAgICAgIHRoaXMuX3BhcmVudCA9IHRoaXMuX2NvbmZpZy5wYXJlbnQgPyB0aGlzLl9nZXRQYXJlbnQoKSA6IG51bGw7XG5cbiAgICAgIGlmICghdGhpcy5fY29uZmlnLnBhcmVudCkge1xuICAgICAgICB0aGlzLl9hZGRBcmlhQW5kQ29sbGFwc2VkQ2xhc3ModGhpcy5fZWxlbWVudCwgdGhpcy5fdHJpZ2dlckFycmF5KTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuX2NvbmZpZy50b2dnbGUpIHtcbiAgICAgICAgdGhpcy50b2dnbGUoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBnZXR0ZXJzXG5cbiAgICAvLyBwdWJsaWNcblxuICAgIENvbGxhcHNlLnByb3RvdHlwZS50b2dnbGUgPSBmdW5jdGlvbiB0b2dnbGUoKSB7XG4gICAgICBpZiAoJCh0aGlzLl9lbGVtZW50KS5oYXNDbGFzcyhDbGFzc05hbWUuSU4pKSB7XG4gICAgICAgIHRoaXMuaGlkZSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5zaG93KCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIENvbGxhcHNlLnByb3RvdHlwZS5zaG93ID0gZnVuY3Rpb24gc2hvdygpIHtcbiAgICAgIHZhciBfdGhpczQgPSB0aGlzO1xuXG4gICAgICBpZiAodGhpcy5faXNUcmFuc2l0aW9uaW5nIHx8ICQodGhpcy5fZWxlbWVudCkuaGFzQ2xhc3MoQ2xhc3NOYW1lLklOKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHZhciBhY3RpdmVzID0gdm9pZCAwO1xuICAgICAgdmFyIGFjdGl2ZXNEYXRhID0gdm9pZCAwO1xuXG4gICAgICBpZiAodGhpcy5fcGFyZW50KSB7XG4gICAgICAgIGFjdGl2ZXMgPSAkLm1ha2VBcnJheSgkKFNlbGVjdG9yLkFDVElWRVMpKTtcbiAgICAgICAgaWYgKCFhY3RpdmVzLmxlbmd0aCkge1xuICAgICAgICAgIGFjdGl2ZXMgPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChhY3RpdmVzKSB7XG4gICAgICAgIGFjdGl2ZXNEYXRhID0gJChhY3RpdmVzKS5kYXRhKERBVEFfS0VZKTtcbiAgICAgICAgaWYgKGFjdGl2ZXNEYXRhICYmIGFjdGl2ZXNEYXRhLl9pc1RyYW5zaXRpb25pbmcpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdmFyIHN0YXJ0RXZlbnQgPSAkLkV2ZW50KEV2ZW50LlNIT1cpO1xuICAgICAgJCh0aGlzLl9lbGVtZW50KS50cmlnZ2VyKHN0YXJ0RXZlbnQpO1xuICAgICAgaWYgKHN0YXJ0RXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAoYWN0aXZlcykge1xuICAgICAgICBDb2xsYXBzZS5falF1ZXJ5SW50ZXJmYWNlLmNhbGwoJChhY3RpdmVzKSwgJ2hpZGUnKTtcbiAgICAgICAgaWYgKCFhY3RpdmVzRGF0YSkge1xuICAgICAgICAgICQoYWN0aXZlcykuZGF0YShEQVRBX0tFWSwgbnVsbCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuX2dldERpbWVuc2lvbigpO1xuXG4gICAgICAkKHRoaXMuX2VsZW1lbnQpLnJlbW92ZUNsYXNzKENsYXNzTmFtZS5DT0xMQVBTRSkuYWRkQ2xhc3MoQ2xhc3NOYW1lLkNPTExBUFNJTkcpO1xuXG4gICAgICB0aGlzLl9lbGVtZW50LnN0eWxlW2RpbWVuc2lvbl0gPSAwO1xuICAgICAgdGhpcy5fZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLCB0cnVlKTtcblxuICAgICAgaWYgKHRoaXMuX3RyaWdnZXJBcnJheS5sZW5ndGgpIHtcbiAgICAgICAgJCh0aGlzLl90cmlnZ2VyQXJyYXkpLnJlbW92ZUNsYXNzKENsYXNzTmFtZS5DT0xMQVBTRUQpLmF0dHIoJ2FyaWEtZXhwYW5kZWQnLCB0cnVlKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5zZXRUcmFuc2l0aW9uaW5nKHRydWUpO1xuXG4gICAgICB2YXIgY29tcGxldGUgPSBmdW5jdGlvbiBjb21wbGV0ZSgpIHtcbiAgICAgICAgJChfdGhpczQuX2VsZW1lbnQpLnJlbW92ZUNsYXNzKENsYXNzTmFtZS5DT0xMQVBTSU5HKS5hZGRDbGFzcyhDbGFzc05hbWUuQ09MTEFQU0UpLmFkZENsYXNzKENsYXNzTmFtZS5JTik7XG5cbiAgICAgICAgX3RoaXM0Ll9lbGVtZW50LnN0eWxlW2RpbWVuc2lvbl0gPSAnJztcblxuICAgICAgICBfdGhpczQuc2V0VHJhbnNpdGlvbmluZyhmYWxzZSk7XG5cbiAgICAgICAgJChfdGhpczQuX2VsZW1lbnQpLnRyaWdnZXIoRXZlbnQuU0hPV04pO1xuICAgICAgfTtcblxuICAgICAgaWYgKCFVdGlsLnN1cHBvcnRzVHJhbnNpdGlvbkVuZCgpKSB7XG4gICAgICAgIGNvbXBsZXRlKCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdmFyIGNhcGl0YWxpemVkRGltZW5zaW9uID0gZGltZW5zaW9uWzBdLnRvVXBwZXJDYXNlKCkgKyBkaW1lbnNpb24uc2xpY2UoMSk7XG4gICAgICB2YXIgc2Nyb2xsU2l6ZSA9ICdzY3JvbGwnICsgY2FwaXRhbGl6ZWREaW1lbnNpb247XG5cbiAgICAgICQodGhpcy5fZWxlbWVudCkub25lKFV0aWwuVFJBTlNJVElPTl9FTkQsIGNvbXBsZXRlKS5lbXVsYXRlVHJhbnNpdGlvbkVuZChUUkFOU0lUSU9OX0RVUkFUSU9OKTtcblxuICAgICAgdGhpcy5fZWxlbWVudC5zdHlsZVtkaW1lbnNpb25dID0gdGhpcy5fZWxlbWVudFtzY3JvbGxTaXplXSArICdweCc7XG4gICAgfTtcblxuICAgIENvbGxhcHNlLnByb3RvdHlwZS5oaWRlID0gZnVuY3Rpb24gaGlkZSgpIHtcbiAgICAgIHZhciBfdGhpczUgPSB0aGlzO1xuXG4gICAgICBpZiAodGhpcy5faXNUcmFuc2l0aW9uaW5nIHx8ICEkKHRoaXMuX2VsZW1lbnQpLmhhc0NsYXNzKENsYXNzTmFtZS5JTikpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB2YXIgc3RhcnRFdmVudCA9ICQuRXZlbnQoRXZlbnQuSElERSk7XG4gICAgICAkKHRoaXMuX2VsZW1lbnQpLnRyaWdnZXIoc3RhcnRFdmVudCk7XG4gICAgICBpZiAoc3RhcnRFdmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHZhciBkaW1lbnNpb24gPSB0aGlzLl9nZXREaW1lbnNpb24oKTtcbiAgICAgIHZhciBvZmZzZXREaW1lbnNpb24gPSBkaW1lbnNpb24gPT09IERpbWVuc2lvbi5XSURUSCA/ICdvZmZzZXRXaWR0aCcgOiAnb2Zmc2V0SGVpZ2h0JztcblxuICAgICAgdGhpcy5fZWxlbWVudC5zdHlsZVtkaW1lbnNpb25dID0gdGhpcy5fZWxlbWVudFtvZmZzZXREaW1lbnNpb25dICsgJ3B4JztcblxuICAgICAgVXRpbC5yZWZsb3codGhpcy5fZWxlbWVudCk7XG5cbiAgICAgICQodGhpcy5fZWxlbWVudCkuYWRkQ2xhc3MoQ2xhc3NOYW1lLkNPTExBUFNJTkcpLnJlbW92ZUNsYXNzKENsYXNzTmFtZS5DT0xMQVBTRSkucmVtb3ZlQ2xhc3MoQ2xhc3NOYW1lLklOKTtcblxuICAgICAgdGhpcy5fZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLCBmYWxzZSk7XG5cbiAgICAgIGlmICh0aGlzLl90cmlnZ2VyQXJyYXkubGVuZ3RoKSB7XG4gICAgICAgICQodGhpcy5fdHJpZ2dlckFycmF5KS5hZGRDbGFzcyhDbGFzc05hbWUuQ09MTEFQU0VEKS5hdHRyKCdhcmlhLWV4cGFuZGVkJywgZmFsc2UpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnNldFRyYW5zaXRpb25pbmcodHJ1ZSk7XG5cbiAgICAgIHZhciBjb21wbGV0ZSA9IGZ1bmN0aW9uIGNvbXBsZXRlKCkge1xuICAgICAgICBfdGhpczUuc2V0VHJhbnNpdGlvbmluZyhmYWxzZSk7XG4gICAgICAgICQoX3RoaXM1Ll9lbGVtZW50KS5yZW1vdmVDbGFzcyhDbGFzc05hbWUuQ09MTEFQU0lORykuYWRkQ2xhc3MoQ2xhc3NOYW1lLkNPTExBUFNFKS50cmlnZ2VyKEV2ZW50LkhJRERFTik7XG4gICAgICB9O1xuXG4gICAgICB0aGlzLl9lbGVtZW50LnN0eWxlW2RpbWVuc2lvbl0gPSAnJztcblxuICAgICAgaWYgKCFVdGlsLnN1cHBvcnRzVHJhbnNpdGlvbkVuZCgpKSB7XG4gICAgICAgIGNvbXBsZXRlKCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgJCh0aGlzLl9lbGVtZW50KS5vbmUoVXRpbC5UUkFOU0lUSU9OX0VORCwgY29tcGxldGUpLmVtdWxhdGVUcmFuc2l0aW9uRW5kKFRSQU5TSVRJT05fRFVSQVRJT04pO1xuICAgIH07XG5cbiAgICBDb2xsYXBzZS5wcm90b3R5cGUuc2V0VHJhbnNpdGlvbmluZyA9IGZ1bmN0aW9uIHNldFRyYW5zaXRpb25pbmcoaXNUcmFuc2l0aW9uaW5nKSB7XG4gICAgICB0aGlzLl9pc1RyYW5zaXRpb25pbmcgPSBpc1RyYW5zaXRpb25pbmc7XG4gICAgfTtcblxuICAgIENvbGxhcHNlLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gZGlzcG9zZSgpIHtcbiAgICAgICQucmVtb3ZlRGF0YSh0aGlzLl9lbGVtZW50LCBEQVRBX0tFWSk7XG5cbiAgICAgIHRoaXMuX2NvbmZpZyA9IG51bGw7XG4gICAgICB0aGlzLl9wYXJlbnQgPSBudWxsO1xuICAgICAgdGhpcy5fZWxlbWVudCA9IG51bGw7XG4gICAgICB0aGlzLl90cmlnZ2VyQXJyYXkgPSBudWxsO1xuICAgICAgdGhpcy5faXNUcmFuc2l0aW9uaW5nID0gbnVsbDtcbiAgICB9O1xuXG4gICAgLy8gcHJpdmF0ZVxuXG4gICAgQ29sbGFwc2UucHJvdG90eXBlLl9nZXRDb25maWcgPSBmdW5jdGlvbiBfZ2V0Q29uZmlnKGNvbmZpZykge1xuICAgICAgY29uZmlnID0gJC5leHRlbmQoe30sIERlZmF1bHQsIGNvbmZpZyk7XG4gICAgICBjb25maWcudG9nZ2xlID0gQm9vbGVhbihjb25maWcudG9nZ2xlKTsgLy8gY29lcmNlIHN0cmluZyB2YWx1ZXNcbiAgICAgIFV0aWwudHlwZUNoZWNrQ29uZmlnKE5BTUUsIGNvbmZpZywgRGVmYXVsdFR5cGUpO1xuICAgICAgcmV0dXJuIGNvbmZpZztcbiAgICB9O1xuXG4gICAgQ29sbGFwc2UucHJvdG90eXBlLl9nZXREaW1lbnNpb24gPSBmdW5jdGlvbiBfZ2V0RGltZW5zaW9uKCkge1xuICAgICAgdmFyIGhhc1dpZHRoID0gJCh0aGlzLl9lbGVtZW50KS5oYXNDbGFzcyhEaW1lbnNpb24uV0lEVEgpO1xuICAgICAgcmV0dXJuIGhhc1dpZHRoID8gRGltZW5zaW9uLldJRFRIIDogRGltZW5zaW9uLkhFSUdIVDtcbiAgICB9O1xuXG4gICAgQ29sbGFwc2UucHJvdG90eXBlLl9nZXRQYXJlbnQgPSBmdW5jdGlvbiBfZ2V0UGFyZW50KCkge1xuICAgICAgdmFyIF90aGlzNiA9IHRoaXM7XG5cbiAgICAgIHZhciBwYXJlbnQgPSAkKHRoaXMuX2NvbmZpZy5wYXJlbnQpWzBdO1xuICAgICAgdmFyIHNlbGVjdG9yID0gJ1tkYXRhLXRvZ2dsZT1cImNvbGxhcHNlXCJdW2RhdGEtcGFyZW50PVwiJyArIHRoaXMuX2NvbmZpZy5wYXJlbnQgKyAnXCJdJztcblxuICAgICAgJChwYXJlbnQpLmZpbmQoc2VsZWN0b3IpLmVhY2goZnVuY3Rpb24gKGksIGVsZW1lbnQpIHtcbiAgICAgICAgX3RoaXM2Ll9hZGRBcmlhQW5kQ29sbGFwc2VkQ2xhc3MoQ29sbGFwc2UuX2dldFRhcmdldEZyb21FbGVtZW50KGVsZW1lbnQpLCBbZWxlbWVudF0pO1xuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBwYXJlbnQ7XG4gICAgfTtcblxuICAgIENvbGxhcHNlLnByb3RvdHlwZS5fYWRkQXJpYUFuZENvbGxhcHNlZENsYXNzID0gZnVuY3Rpb24gX2FkZEFyaWFBbmRDb2xsYXBzZWRDbGFzcyhlbGVtZW50LCB0cmlnZ2VyQXJyYXkpIHtcbiAgICAgIGlmIChlbGVtZW50KSB7XG4gICAgICAgIHZhciBpc09wZW4gPSAkKGVsZW1lbnQpLmhhc0NsYXNzKENsYXNzTmFtZS5JTik7XG4gICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgaXNPcGVuKTtcblxuICAgICAgICBpZiAodHJpZ2dlckFycmF5Lmxlbmd0aCkge1xuICAgICAgICAgICQodHJpZ2dlckFycmF5KS50b2dnbGVDbGFzcyhDbGFzc05hbWUuQ09MTEFQU0VELCAhaXNPcGVuKS5hdHRyKCdhcmlhLWV4cGFuZGVkJywgaXNPcGVuKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBzdGF0aWNcblxuICAgIENvbGxhcHNlLl9nZXRUYXJnZXRGcm9tRWxlbWVudCA9IGZ1bmN0aW9uIF9nZXRUYXJnZXRGcm9tRWxlbWVudChlbGVtZW50KSB7XG4gICAgICB2YXIgc2VsZWN0b3IgPSBVdGlsLmdldFNlbGVjdG9yRnJvbUVsZW1lbnQoZWxlbWVudCk7XG4gICAgICByZXR1cm4gc2VsZWN0b3IgPyAkKHNlbGVjdG9yKVswXSA6IG51bGw7XG4gICAgfTtcblxuICAgIENvbGxhcHNlLl9qUXVlcnlJbnRlcmZhY2UgPSBmdW5jdGlvbiBfalF1ZXJ5SW50ZXJmYWNlKGNvbmZpZykge1xuICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7XG4gICAgICAgIHZhciBkYXRhID0gJHRoaXMuZGF0YShEQVRBX0tFWSk7XG4gICAgICAgIHZhciBfY29uZmlnID0gJC5leHRlbmQoe30sIERlZmF1bHQsICR0aGlzLmRhdGEoKSwgKHR5cGVvZiBjb25maWcgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKGNvbmZpZykpID09PSAnb2JqZWN0JyAmJiBjb25maWcpO1xuXG4gICAgICAgIGlmICghZGF0YSAmJiBfY29uZmlnLnRvZ2dsZSAmJiAvc2hvd3xoaWRlLy50ZXN0KGNvbmZpZykpIHtcbiAgICAgICAgICBfY29uZmlnLnRvZ2dsZSA9IGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFkYXRhKSB7XG4gICAgICAgICAgZGF0YSA9IG5ldyBDb2xsYXBzZSh0aGlzLCBfY29uZmlnKTtcbiAgICAgICAgICAkdGhpcy5kYXRhKERBVEFfS0VZLCBkYXRhKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0eXBlb2YgY29uZmlnID09PSAnc3RyaW5nJykge1xuICAgICAgICAgIGlmIChkYXRhW2NvbmZpZ10gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBtZXRob2QgbmFtZWQgXCInICsgY29uZmlnICsgJ1wiJyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGRhdGFbY29uZmlnXSgpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgX2NyZWF0ZUNsYXNzKENvbGxhcHNlLCBudWxsLCBbe1xuICAgICAga2V5OiAnVkVSU0lPTicsXG4gICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIFZFUlNJT047XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiAnRGVmYXVsdCcsXG4gICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIERlZmF1bHQ7XG4gICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIENvbGxhcHNlO1xuICB9KCk7XG5cbiAgLyoqXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKiBEYXRhIEFwaSBpbXBsZW1lbnRhdGlvblxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICovXG5cbiAgJChkb2N1bWVudCkub24oRXZlbnQuQ0xJQ0tfREFUQV9BUEksIFNlbGVjdG9yLkRBVEFfVE9HR0xFLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgdmFyIHRhcmdldCA9IENvbGxhcHNlLl9nZXRUYXJnZXRGcm9tRWxlbWVudCh0aGlzKTtcbiAgICB2YXIgZGF0YSA9ICQodGFyZ2V0KS5kYXRhKERBVEFfS0VZKTtcbiAgICB2YXIgY29uZmlnID0gZGF0YSA/ICd0b2dnbGUnIDogJCh0aGlzKS5kYXRhKCk7XG5cbiAgICBDb2xsYXBzZS5falF1ZXJ5SW50ZXJmYWNlLmNhbGwoJCh0YXJnZXQpLCBjb25maWcpO1xuICB9KTtcblxuICAvKipcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqIGpRdWVyeVxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICovXG5cbiAgJC5mbltOQU1FXSA9IENvbGxhcHNlLl9qUXVlcnlJbnRlcmZhY2U7XG4gICQuZm5bTkFNRV0uQ29uc3RydWN0b3IgPSBDb2xsYXBzZTtcbiAgJC5mbltOQU1FXS5ub0NvbmZsaWN0ID0gZnVuY3Rpb24gKCkge1xuICAgICQuZm5bTkFNRV0gPSBKUVVFUllfTk9fQ09ORkxJQ1Q7XG4gICAgcmV0dXJuIENvbGxhcHNlLl9qUXVlcnlJbnRlcmZhY2U7XG4gIH07XG5cbiAgcmV0dXJuIENvbGxhcHNlO1xufShqUXVlcnkpO1xuXG4vKipcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiBCb290c3RyYXAgKHY0LjAuMC1hbHBoYS41KTogZHJvcGRvd24uanNcbiAqIExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2Jsb2IvbWFzdGVyL0xJQ0VOU0UpXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICovXG5cbnZhciBEcm9wZG93biA9IGZ1bmN0aW9uICgkKSB7XG5cbiAgLyoqXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKiBDb25zdGFudHNcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqL1xuXG4gIHZhciBOQU1FID0gJ2Ryb3Bkb3duJztcbiAgdmFyIFZFUlNJT04gPSAnNC4wLjAtYWxwaGEuNSc7XG4gIHZhciBEQVRBX0tFWSA9ICdicy5kcm9wZG93bic7XG4gIHZhciBFVkVOVF9LRVkgPSAnLicgKyBEQVRBX0tFWTtcbiAgdmFyIERBVEFfQVBJX0tFWSA9ICcuZGF0YS1hcGknO1xuICB2YXIgSlFVRVJZX05PX0NPTkZMSUNUID0gJC5mbltOQU1FXTtcbiAgdmFyIEVTQ0FQRV9LRVlDT0RFID0gMjc7IC8vIEtleWJvYXJkRXZlbnQud2hpY2ggdmFsdWUgZm9yIEVzY2FwZSAoRXNjKSBrZXlcbiAgdmFyIEFSUk9XX1VQX0tFWUNPREUgPSAzODsgLy8gS2V5Ym9hcmRFdmVudC53aGljaCB2YWx1ZSBmb3IgdXAgYXJyb3cga2V5XG4gIHZhciBBUlJPV19ET1dOX0tFWUNPREUgPSA0MDsgLy8gS2V5Ym9hcmRFdmVudC53aGljaCB2YWx1ZSBmb3IgZG93biBhcnJvdyBrZXlcbiAgdmFyIFJJR0hUX01PVVNFX0JVVFRPTl9XSElDSCA9IDM7IC8vIE1vdXNlRXZlbnQud2hpY2ggdmFsdWUgZm9yIHRoZSByaWdodCBidXR0b24gKGFzc3VtaW5nIGEgcmlnaHQtaGFuZGVkIG1vdXNlKVxuXG4gIHZhciBFdmVudCA9IHtcbiAgICBISURFOiAnaGlkZScgKyBFVkVOVF9LRVksXG4gICAgSElEREVOOiAnaGlkZGVuJyArIEVWRU5UX0tFWSxcbiAgICBTSE9XOiAnc2hvdycgKyBFVkVOVF9LRVksXG4gICAgU0hPV046ICdzaG93bicgKyBFVkVOVF9LRVksXG4gICAgQ0xJQ0s6ICdjbGljaycgKyBFVkVOVF9LRVksXG4gICAgQ0xJQ0tfREFUQV9BUEk6ICdjbGljaycgKyBFVkVOVF9LRVkgKyBEQVRBX0FQSV9LRVksXG4gICAgS0VZRE9XTl9EQVRBX0FQSTogJ2tleWRvd24nICsgRVZFTlRfS0VZICsgREFUQV9BUElfS0VZXG4gIH07XG5cbiAgdmFyIENsYXNzTmFtZSA9IHtcbiAgICBCQUNLRFJPUDogJ2Ryb3Bkb3duLWJhY2tkcm9wJyxcbiAgICBESVNBQkxFRDogJ2Rpc2FibGVkJyxcbiAgICBPUEVOOiAnb3BlbidcbiAgfTtcblxuICB2YXIgU2VsZWN0b3IgPSB7XG4gICAgQkFDS0RST1A6ICcuZHJvcGRvd24tYmFja2Ryb3AnLFxuICAgIERBVEFfVE9HR0xFOiAnW2RhdGEtdG9nZ2xlPVwiZHJvcGRvd25cIl0nLFxuICAgIEZPUk1fQ0hJTEQ6ICcuZHJvcGRvd24gZm9ybScsXG4gICAgUk9MRV9NRU5VOiAnW3JvbGU9XCJtZW51XCJdJyxcbiAgICBST0xFX0xJU1RCT1g6ICdbcm9sZT1cImxpc3Rib3hcIl0nLFxuICAgIE5BVkJBUl9OQVY6ICcubmF2YmFyLW5hdicsXG4gICAgVklTSUJMRV9JVEVNUzogJ1tyb2xlPVwibWVudVwiXSBsaTpub3QoLmRpc2FibGVkKSBhLCAnICsgJ1tyb2xlPVwibGlzdGJveFwiXSBsaTpub3QoLmRpc2FibGVkKSBhJ1xuICB9O1xuXG4gIC8qKlxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICogQ2xhc3MgRGVmaW5pdGlvblxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICovXG5cbiAgdmFyIERyb3Bkb3duID0gZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIERyb3Bkb3duKGVsZW1lbnQpIHtcbiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBEcm9wZG93bik7XG5cbiAgICAgIHRoaXMuX2VsZW1lbnQgPSBlbGVtZW50O1xuXG4gICAgICB0aGlzLl9hZGRFdmVudExpc3RlbmVycygpO1xuICAgIH1cblxuICAgIC8vIGdldHRlcnNcblxuICAgIC8vIHB1YmxpY1xuXG4gICAgRHJvcGRvd24ucHJvdG90eXBlLnRvZ2dsZSA9IGZ1bmN0aW9uIHRvZ2dsZSgpIHtcbiAgICAgIGlmICh0aGlzLmRpc2FibGVkIHx8ICQodGhpcykuaGFzQ2xhc3MoQ2xhc3NOYW1lLkRJU0FCTEVEKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIHZhciBwYXJlbnQgPSBEcm9wZG93bi5fZ2V0UGFyZW50RnJvbUVsZW1lbnQodGhpcyk7XG4gICAgICB2YXIgaXNBY3RpdmUgPSAkKHBhcmVudCkuaGFzQ2xhc3MoQ2xhc3NOYW1lLk9QRU4pO1xuXG4gICAgICBEcm9wZG93bi5fY2xlYXJNZW51cygpO1xuXG4gICAgICBpZiAoaXNBY3RpdmUpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBpZiAoJ29udG91Y2hzdGFydCcgaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50ICYmICEkKHBhcmVudCkuY2xvc2VzdChTZWxlY3Rvci5OQVZCQVJfTkFWKS5sZW5ndGgpIHtcblxuICAgICAgICAvLyBpZiBtb2JpbGUgd2UgdXNlIGEgYmFja2Ryb3AgYmVjYXVzZSBjbGljayBldmVudHMgZG9uJ3QgZGVsZWdhdGVcbiAgICAgICAgdmFyIGRyb3Bkb3duID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGRyb3Bkb3duLmNsYXNzTmFtZSA9IENsYXNzTmFtZS5CQUNLRFJPUDtcbiAgICAgICAgJChkcm9wZG93bikuaW5zZXJ0QmVmb3JlKHRoaXMpO1xuICAgICAgICAkKGRyb3Bkb3duKS5vbignY2xpY2snLCBEcm9wZG93bi5fY2xlYXJNZW51cyk7XG4gICAgICB9XG5cbiAgICAgIHZhciByZWxhdGVkVGFyZ2V0ID0geyByZWxhdGVkVGFyZ2V0OiB0aGlzIH07XG4gICAgICB2YXIgc2hvd0V2ZW50ID0gJC5FdmVudChFdmVudC5TSE9XLCByZWxhdGVkVGFyZ2V0KTtcblxuICAgICAgJChwYXJlbnQpLnRyaWdnZXIoc2hvd0V2ZW50KTtcblxuICAgICAgaWYgKHNob3dFdmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuZm9jdXMoKTtcbiAgICAgIHRoaXMuc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgJ3RydWUnKTtcblxuICAgICAgJChwYXJlbnQpLnRvZ2dsZUNsYXNzKENsYXNzTmFtZS5PUEVOKTtcbiAgICAgICQocGFyZW50KS50cmlnZ2VyKCQuRXZlbnQoRXZlbnQuU0hPV04sIHJlbGF0ZWRUYXJnZXQpKTtcblxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG5cbiAgICBEcm9wZG93bi5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uIGRpc3Bvc2UoKSB7XG4gICAgICAkLnJlbW92ZURhdGEodGhpcy5fZWxlbWVudCwgREFUQV9LRVkpO1xuICAgICAgJCh0aGlzLl9lbGVtZW50KS5vZmYoRVZFTlRfS0VZKTtcbiAgICAgIHRoaXMuX2VsZW1lbnQgPSBudWxsO1xuICAgIH07XG5cbiAgICAvLyBwcml2YXRlXG5cbiAgICBEcm9wZG93bi5wcm90b3R5cGUuX2FkZEV2ZW50TGlzdGVuZXJzID0gZnVuY3Rpb24gX2FkZEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgJCh0aGlzLl9lbGVtZW50KS5vbihFdmVudC5DTElDSywgdGhpcy50b2dnbGUpO1xuICAgIH07XG5cbiAgICAvLyBzdGF0aWNcblxuICAgIERyb3Bkb3duLl9qUXVlcnlJbnRlcmZhY2UgPSBmdW5jdGlvbiBfalF1ZXJ5SW50ZXJmYWNlKGNvbmZpZykge1xuICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBkYXRhID0gJCh0aGlzKS5kYXRhKERBVEFfS0VZKTtcblxuICAgICAgICBpZiAoIWRhdGEpIHtcbiAgICAgICAgICAkKHRoaXMpLmRhdGEoREFUQV9LRVksIGRhdGEgPSBuZXcgRHJvcGRvd24odGhpcykpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHR5cGVvZiBjb25maWcgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgaWYgKGRhdGFbY29uZmlnXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIG1ldGhvZCBuYW1lZCBcIicgKyBjb25maWcgKyAnXCInKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZGF0YVtjb25maWddLmNhbGwodGhpcyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBEcm9wZG93bi5fY2xlYXJNZW51cyA9IGZ1bmN0aW9uIF9jbGVhck1lbnVzKGV2ZW50KSB7XG4gICAgICBpZiAoZXZlbnQgJiYgZXZlbnQud2hpY2ggPT09IFJJR0hUX01PVVNFX0JVVFRPTl9XSElDSCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHZhciBiYWNrZHJvcCA9ICQoU2VsZWN0b3IuQkFDS0RST1ApWzBdO1xuICAgICAgaWYgKGJhY2tkcm9wKSB7XG4gICAgICAgIGJhY2tkcm9wLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYmFja2Ryb3ApO1xuICAgICAgfVxuXG4gICAgICB2YXIgdG9nZ2xlcyA9ICQubWFrZUFycmF5KCQoU2VsZWN0b3IuREFUQV9UT0dHTEUpKTtcblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0b2dnbGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBwYXJlbnQgPSBEcm9wZG93bi5fZ2V0UGFyZW50RnJvbUVsZW1lbnQodG9nZ2xlc1tpXSk7XG4gICAgICAgIHZhciByZWxhdGVkVGFyZ2V0ID0geyByZWxhdGVkVGFyZ2V0OiB0b2dnbGVzW2ldIH07XG5cbiAgICAgICAgaWYgKCEkKHBhcmVudCkuaGFzQ2xhc3MoQ2xhc3NOYW1lLk9QRU4pKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZXZlbnQgJiYgZXZlbnQudHlwZSA9PT0gJ2NsaWNrJyAmJiAvaW5wdXR8dGV4dGFyZWEvaS50ZXN0KGV2ZW50LnRhcmdldC50YWdOYW1lKSAmJiAkLmNvbnRhaW5zKHBhcmVudCwgZXZlbnQudGFyZ2V0KSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGhpZGVFdmVudCA9ICQuRXZlbnQoRXZlbnQuSElERSwgcmVsYXRlZFRhcmdldCk7XG4gICAgICAgICQocGFyZW50KS50cmlnZ2VyKGhpZGVFdmVudCk7XG4gICAgICAgIGlmIChoaWRlRXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRvZ2dsZXNbaV0uc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgJ2ZhbHNlJyk7XG5cbiAgICAgICAgJChwYXJlbnQpLnJlbW92ZUNsYXNzKENsYXNzTmFtZS5PUEVOKS50cmlnZ2VyKCQuRXZlbnQoRXZlbnQuSElEREVOLCByZWxhdGVkVGFyZ2V0KSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIERyb3Bkb3duLl9nZXRQYXJlbnRGcm9tRWxlbWVudCA9IGZ1bmN0aW9uIF9nZXRQYXJlbnRGcm9tRWxlbWVudChlbGVtZW50KSB7XG4gICAgICB2YXIgcGFyZW50ID0gdm9pZCAwO1xuICAgICAgdmFyIHNlbGVjdG9yID0gVXRpbC5nZXRTZWxlY3RvckZyb21FbGVtZW50KGVsZW1lbnQpO1xuXG4gICAgICBpZiAoc2VsZWN0b3IpIHtcbiAgICAgICAgcGFyZW50ID0gJChzZWxlY3RvcilbMF07XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBwYXJlbnQgfHwgZWxlbWVudC5wYXJlbnROb2RlO1xuICAgIH07XG5cbiAgICBEcm9wZG93bi5fZGF0YUFwaUtleWRvd25IYW5kbGVyID0gZnVuY3Rpb24gX2RhdGFBcGlLZXlkb3duSGFuZGxlcihldmVudCkge1xuICAgICAgaWYgKCEvKDM4fDQwfDI3fDMyKS8udGVzdChldmVudC53aGljaCkgfHwgL2lucHV0fHRleHRhcmVhL2kudGVzdChldmVudC50YXJnZXQudGFnTmFtZSkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICAgIGlmICh0aGlzLmRpc2FibGVkIHx8ICQodGhpcykuaGFzQ2xhc3MoQ2xhc3NOYW1lLkRJU0FCTEVEKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHZhciBwYXJlbnQgPSBEcm9wZG93bi5fZ2V0UGFyZW50RnJvbUVsZW1lbnQodGhpcyk7XG4gICAgICB2YXIgaXNBY3RpdmUgPSAkKHBhcmVudCkuaGFzQ2xhc3MoQ2xhc3NOYW1lLk9QRU4pO1xuXG4gICAgICBpZiAoIWlzQWN0aXZlICYmIGV2ZW50LndoaWNoICE9PSBFU0NBUEVfS0VZQ09ERSB8fCBpc0FjdGl2ZSAmJiBldmVudC53aGljaCA9PT0gRVNDQVBFX0tFWUNPREUpIHtcblxuICAgICAgICBpZiAoZXZlbnQud2hpY2ggPT09IEVTQ0FQRV9LRVlDT0RFKSB7XG4gICAgICAgICAgdmFyIHRvZ2dsZSA9ICQocGFyZW50KS5maW5kKFNlbGVjdG9yLkRBVEFfVE9HR0xFKVswXTtcbiAgICAgICAgICAkKHRvZ2dsZSkudHJpZ2dlcignZm9jdXMnKTtcbiAgICAgICAgfVxuXG4gICAgICAgICQodGhpcykudHJpZ2dlcignY2xpY2snKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB2YXIgaXRlbXMgPSAkLm1ha2VBcnJheSgkKFNlbGVjdG9yLlZJU0lCTEVfSVRFTVMpKTtcblxuICAgICAgaXRlbXMgPSBpdGVtcy5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgcmV0dXJuIGl0ZW0ub2Zmc2V0V2lkdGggfHwgaXRlbS5vZmZzZXRIZWlnaHQ7XG4gICAgICB9KTtcblxuICAgICAgaWYgKCFpdGVtcy5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB2YXIgaW5kZXggPSBpdGVtcy5pbmRleE9mKGV2ZW50LnRhcmdldCk7XG5cbiAgICAgIGlmIChldmVudC53aGljaCA9PT0gQVJST1dfVVBfS0VZQ09ERSAmJiBpbmRleCA+IDApIHtcbiAgICAgICAgLy8gdXBcbiAgICAgICAgaW5kZXgtLTtcbiAgICAgIH1cblxuICAgICAgaWYgKGV2ZW50LndoaWNoID09PSBBUlJPV19ET1dOX0tFWUNPREUgJiYgaW5kZXggPCBpdGVtcy5sZW5ndGggLSAxKSB7XG4gICAgICAgIC8vIGRvd25cbiAgICAgICAgaW5kZXgrKztcbiAgICAgIH1cblxuICAgICAgaWYgKGluZGV4IDwgMCkge1xuICAgICAgICBpbmRleCA9IDA7XG4gICAgICB9XG5cbiAgICAgIGl0ZW1zW2luZGV4XS5mb2N1cygpO1xuICAgIH07XG5cbiAgICBfY3JlYXRlQ2xhc3MoRHJvcGRvd24sIG51bGwsIFt7XG4gICAgICBrZXk6ICdWRVJTSU9OJyxcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gVkVSU0lPTjtcbiAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gRHJvcGRvd247XG4gIH0oKTtcblxuICAvKipcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqIERhdGEgQXBpIGltcGxlbWVudGF0aW9uXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKi9cblxuICAkKGRvY3VtZW50KS5vbihFdmVudC5LRVlET1dOX0RBVEFfQVBJLCBTZWxlY3Rvci5EQVRBX1RPR0dMRSwgRHJvcGRvd24uX2RhdGFBcGlLZXlkb3duSGFuZGxlcikub24oRXZlbnQuS0VZRE9XTl9EQVRBX0FQSSwgU2VsZWN0b3IuUk9MRV9NRU5VLCBEcm9wZG93bi5fZGF0YUFwaUtleWRvd25IYW5kbGVyKS5vbihFdmVudC5LRVlET1dOX0RBVEFfQVBJLCBTZWxlY3Rvci5ST0xFX0xJU1RCT1gsIERyb3Bkb3duLl9kYXRhQXBpS2V5ZG93bkhhbmRsZXIpLm9uKEV2ZW50LkNMSUNLX0RBVEFfQVBJLCBEcm9wZG93bi5fY2xlYXJNZW51cykub24oRXZlbnQuQ0xJQ0tfREFUQV9BUEksIFNlbGVjdG9yLkRBVEFfVE9HR0xFLCBEcm9wZG93bi5wcm90b3R5cGUudG9nZ2xlKS5vbihFdmVudC5DTElDS19EQVRBX0FQSSwgU2VsZWN0b3IuRk9STV9DSElMRCwgZnVuY3Rpb24gKGUpIHtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICB9KTtcblxuICAvKipcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqIGpRdWVyeVxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICovXG5cbiAgJC5mbltOQU1FXSA9IERyb3Bkb3duLl9qUXVlcnlJbnRlcmZhY2U7XG4gICQuZm5bTkFNRV0uQ29uc3RydWN0b3IgPSBEcm9wZG93bjtcbiAgJC5mbltOQU1FXS5ub0NvbmZsaWN0ID0gZnVuY3Rpb24gKCkge1xuICAgICQuZm5bTkFNRV0gPSBKUVVFUllfTk9fQ09ORkxJQ1Q7XG4gICAgcmV0dXJuIERyb3Bkb3duLl9qUXVlcnlJbnRlcmZhY2U7XG4gIH07XG5cbiAgcmV0dXJuIERyb3Bkb3duO1xufShqUXVlcnkpO1xuXG4vKipcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiBCb290c3RyYXAgKHY0LjAuMC1hbHBoYS41KTogbW9kYWwuanNcbiAqIExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2Jsb2IvbWFzdGVyL0xJQ0VOU0UpXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICovXG5cbnZhciBNb2RhbCA9IGZ1bmN0aW9uICgkKSB7XG5cbiAgLyoqXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKiBDb25zdGFudHNcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqL1xuXG4gIHZhciBOQU1FID0gJ21vZGFsJztcbiAgdmFyIFZFUlNJT04gPSAnNC4wLjAtYWxwaGEuNSc7XG4gIHZhciBEQVRBX0tFWSA9ICdicy5tb2RhbCc7XG4gIHZhciBFVkVOVF9LRVkgPSAnLicgKyBEQVRBX0tFWTtcbiAgdmFyIERBVEFfQVBJX0tFWSA9ICcuZGF0YS1hcGknO1xuICB2YXIgSlFVRVJZX05PX0NPTkZMSUNUID0gJC5mbltOQU1FXTtcbiAgdmFyIFRSQU5TSVRJT05fRFVSQVRJT04gPSAzMDA7XG4gIHZhciBCQUNLRFJPUF9UUkFOU0lUSU9OX0RVUkFUSU9OID0gMTUwO1xuICB2YXIgRVNDQVBFX0tFWUNPREUgPSAyNzsgLy8gS2V5Ym9hcmRFdmVudC53aGljaCB2YWx1ZSBmb3IgRXNjYXBlIChFc2MpIGtleVxuXG4gIHZhciBEZWZhdWx0ID0ge1xuICAgIGJhY2tkcm9wOiB0cnVlLFxuICAgIGtleWJvYXJkOiB0cnVlLFxuICAgIGZvY3VzOiB0cnVlLFxuICAgIHNob3c6IHRydWVcbiAgfTtcblxuICB2YXIgRGVmYXVsdFR5cGUgPSB7XG4gICAgYmFja2Ryb3A6ICcoYm9vbGVhbnxzdHJpbmcpJyxcbiAgICBrZXlib2FyZDogJ2Jvb2xlYW4nLFxuICAgIGZvY3VzOiAnYm9vbGVhbicsXG4gICAgc2hvdzogJ2Jvb2xlYW4nXG4gIH07XG5cbiAgdmFyIEV2ZW50ID0ge1xuICAgIEhJREU6ICdoaWRlJyArIEVWRU5UX0tFWSxcbiAgICBISURERU46ICdoaWRkZW4nICsgRVZFTlRfS0VZLFxuICAgIFNIT1c6ICdzaG93JyArIEVWRU5UX0tFWSxcbiAgICBTSE9XTjogJ3Nob3duJyArIEVWRU5UX0tFWSxcbiAgICBGT0NVU0lOOiAnZm9jdXNpbicgKyBFVkVOVF9LRVksXG4gICAgUkVTSVpFOiAncmVzaXplJyArIEVWRU5UX0tFWSxcbiAgICBDTElDS19ESVNNSVNTOiAnY2xpY2suZGlzbWlzcycgKyBFVkVOVF9LRVksXG4gICAgS0VZRE9XTl9ESVNNSVNTOiAna2V5ZG93bi5kaXNtaXNzJyArIEVWRU5UX0tFWSxcbiAgICBNT1VTRVVQX0RJU01JU1M6ICdtb3VzZXVwLmRpc21pc3MnICsgRVZFTlRfS0VZLFxuICAgIE1PVVNFRE9XTl9ESVNNSVNTOiAnbW91c2Vkb3duLmRpc21pc3MnICsgRVZFTlRfS0VZLFxuICAgIENMSUNLX0RBVEFfQVBJOiAnY2xpY2snICsgRVZFTlRfS0VZICsgREFUQV9BUElfS0VZXG4gIH07XG5cbiAgdmFyIENsYXNzTmFtZSA9IHtcbiAgICBTQ1JPTExCQVJfTUVBU1VSRVI6ICdtb2RhbC1zY3JvbGxiYXItbWVhc3VyZScsXG4gICAgQkFDS0RST1A6ICdtb2RhbC1iYWNrZHJvcCcsXG4gICAgT1BFTjogJ21vZGFsLW9wZW4nLFxuICAgIEZBREU6ICdmYWRlJyxcbiAgICBJTjogJ2luJ1xuICB9O1xuXG4gIHZhciBTZWxlY3RvciA9IHtcbiAgICBESUFMT0c6ICcubW9kYWwtZGlhbG9nJyxcbiAgICBEQVRBX1RPR0dMRTogJ1tkYXRhLXRvZ2dsZT1cIm1vZGFsXCJdJyxcbiAgICBEQVRBX0RJU01JU1M6ICdbZGF0YS1kaXNtaXNzPVwibW9kYWxcIl0nLFxuICAgIEZJWEVEX0NPTlRFTlQ6ICcubmF2YmFyLWZpeGVkLXRvcCwgLm5hdmJhci1maXhlZC1ib3R0b20sIC5pcy1maXhlZCdcbiAgfTtcblxuICAvKipcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqIENsYXNzIERlZmluaXRpb25cbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqL1xuXG4gIHZhciBNb2RhbCA9IGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBNb2RhbChlbGVtZW50LCBjb25maWcpIHtcbiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBNb2RhbCk7XG5cbiAgICAgIHRoaXMuX2NvbmZpZyA9IHRoaXMuX2dldENvbmZpZyhjb25maWcpO1xuICAgICAgdGhpcy5fZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgICB0aGlzLl9kaWFsb2cgPSAkKGVsZW1lbnQpLmZpbmQoU2VsZWN0b3IuRElBTE9HKVswXTtcbiAgICAgIHRoaXMuX2JhY2tkcm9wID0gbnVsbDtcbiAgICAgIHRoaXMuX2lzU2hvd24gPSBmYWxzZTtcbiAgICAgIHRoaXMuX2lzQm9keU92ZXJmbG93aW5nID0gZmFsc2U7XG4gICAgICB0aGlzLl9pZ25vcmVCYWNrZHJvcENsaWNrID0gZmFsc2U7XG4gICAgICB0aGlzLl9vcmlnaW5hbEJvZHlQYWRkaW5nID0gMDtcbiAgICAgIHRoaXMuX3Njcm9sbGJhcldpZHRoID0gMDtcbiAgICB9XG5cbiAgICAvLyBnZXR0ZXJzXG5cbiAgICAvLyBwdWJsaWNcblxuICAgIE1vZGFsLnByb3RvdHlwZS50b2dnbGUgPSBmdW5jdGlvbiB0b2dnbGUocmVsYXRlZFRhcmdldCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2lzU2hvd24gPyB0aGlzLmhpZGUoKSA6IHRoaXMuc2hvdyhyZWxhdGVkVGFyZ2V0KTtcbiAgICB9O1xuXG4gICAgTW9kYWwucHJvdG90eXBlLnNob3cgPSBmdW5jdGlvbiBzaG93KHJlbGF0ZWRUYXJnZXQpIHtcbiAgICAgIHZhciBfdGhpczcgPSB0aGlzO1xuXG4gICAgICB2YXIgc2hvd0V2ZW50ID0gJC5FdmVudChFdmVudC5TSE9XLCB7XG4gICAgICAgIHJlbGF0ZWRUYXJnZXQ6IHJlbGF0ZWRUYXJnZXRcbiAgICAgIH0pO1xuXG4gICAgICAkKHRoaXMuX2VsZW1lbnQpLnRyaWdnZXIoc2hvd0V2ZW50KTtcblxuICAgICAgaWYgKHRoaXMuX2lzU2hvd24gfHwgc2hvd0V2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdGhpcy5faXNTaG93biA9IHRydWU7XG5cbiAgICAgIHRoaXMuX2NoZWNrU2Nyb2xsYmFyKCk7XG4gICAgICB0aGlzLl9zZXRTY3JvbGxiYXIoKTtcblxuICAgICAgJChkb2N1bWVudC5ib2R5KS5hZGRDbGFzcyhDbGFzc05hbWUuT1BFTik7XG5cbiAgICAgIHRoaXMuX3NldEVzY2FwZUV2ZW50KCk7XG4gICAgICB0aGlzLl9zZXRSZXNpemVFdmVudCgpO1xuXG4gICAgICAkKHRoaXMuX2VsZW1lbnQpLm9uKEV2ZW50LkNMSUNLX0RJU01JU1MsIFNlbGVjdG9yLkRBVEFfRElTTUlTUywgJC5wcm94eSh0aGlzLmhpZGUsIHRoaXMpKTtcblxuICAgICAgJCh0aGlzLl9kaWFsb2cpLm9uKEV2ZW50Lk1PVVNFRE9XTl9ESVNNSVNTLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoX3RoaXM3Ll9lbGVtZW50KS5vbmUoRXZlbnQuTU9VU0VVUF9ESVNNSVNTLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICBpZiAoJChldmVudC50YXJnZXQpLmlzKF90aGlzNy5fZWxlbWVudCkpIHtcbiAgICAgICAgICAgIF90aGlzNy5faWdub3JlQmFja2Ryb3BDbGljayA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLl9zaG93QmFja2Ryb3AoJC5wcm94eSh0aGlzLl9zaG93RWxlbWVudCwgdGhpcywgcmVsYXRlZFRhcmdldCkpO1xuICAgIH07XG5cbiAgICBNb2RhbC5wcm90b3R5cGUuaGlkZSA9IGZ1bmN0aW9uIGhpZGUoZXZlbnQpIHtcbiAgICAgIGlmIChldmVudCkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgfVxuXG4gICAgICB2YXIgaGlkZUV2ZW50ID0gJC5FdmVudChFdmVudC5ISURFKTtcblxuICAgICAgJCh0aGlzLl9lbGVtZW50KS50cmlnZ2VyKGhpZGVFdmVudCk7XG5cbiAgICAgIGlmICghdGhpcy5faXNTaG93biB8fCBoaWRlRXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9pc1Nob3duID0gZmFsc2U7XG5cbiAgICAgIHRoaXMuX3NldEVzY2FwZUV2ZW50KCk7XG4gICAgICB0aGlzLl9zZXRSZXNpemVFdmVudCgpO1xuXG4gICAgICAkKGRvY3VtZW50KS5vZmYoRXZlbnQuRk9DVVNJTik7XG5cbiAgICAgICQodGhpcy5fZWxlbWVudCkucmVtb3ZlQ2xhc3MoQ2xhc3NOYW1lLklOKTtcblxuICAgICAgJCh0aGlzLl9lbGVtZW50KS5vZmYoRXZlbnQuQ0xJQ0tfRElTTUlTUyk7XG4gICAgICAkKHRoaXMuX2RpYWxvZykub2ZmKEV2ZW50Lk1PVVNFRE9XTl9ESVNNSVNTKTtcblxuICAgICAgaWYgKFV0aWwuc3VwcG9ydHNUcmFuc2l0aW9uRW5kKCkgJiYgJCh0aGlzLl9lbGVtZW50KS5oYXNDbGFzcyhDbGFzc05hbWUuRkFERSkpIHtcblxuICAgICAgICAkKHRoaXMuX2VsZW1lbnQpLm9uZShVdGlsLlRSQU5TSVRJT05fRU5ELCAkLnByb3h5KHRoaXMuX2hpZGVNb2RhbCwgdGhpcykpLmVtdWxhdGVUcmFuc2l0aW9uRW5kKFRSQU5TSVRJT05fRFVSQVRJT04pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5faGlkZU1vZGFsKCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIE1vZGFsLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gZGlzcG9zZSgpIHtcbiAgICAgICQucmVtb3ZlRGF0YSh0aGlzLl9lbGVtZW50LCBEQVRBX0tFWSk7XG5cbiAgICAgICQod2luZG93KS5vZmYoRVZFTlRfS0VZKTtcbiAgICAgICQoZG9jdW1lbnQpLm9mZihFVkVOVF9LRVkpO1xuICAgICAgJCh0aGlzLl9lbGVtZW50KS5vZmYoRVZFTlRfS0VZKTtcbiAgICAgICQodGhpcy5fYmFja2Ryb3ApLm9mZihFVkVOVF9LRVkpO1xuXG4gICAgICB0aGlzLl9jb25maWcgPSBudWxsO1xuICAgICAgdGhpcy5fZWxlbWVudCA9IG51bGw7XG4gICAgICB0aGlzLl9kaWFsb2cgPSBudWxsO1xuICAgICAgdGhpcy5fYmFja2Ryb3AgPSBudWxsO1xuICAgICAgdGhpcy5faXNTaG93biA9IG51bGw7XG4gICAgICB0aGlzLl9pc0JvZHlPdmVyZmxvd2luZyA9IG51bGw7XG4gICAgICB0aGlzLl9pZ25vcmVCYWNrZHJvcENsaWNrID0gbnVsbDtcbiAgICAgIHRoaXMuX29yaWdpbmFsQm9keVBhZGRpbmcgPSBudWxsO1xuICAgICAgdGhpcy5fc2Nyb2xsYmFyV2lkdGggPSBudWxsO1xuICAgIH07XG5cbiAgICAvLyBwcml2YXRlXG5cbiAgICBNb2RhbC5wcm90b3R5cGUuX2dldENvbmZpZyA9IGZ1bmN0aW9uIF9nZXRDb25maWcoY29uZmlnKSB7XG4gICAgICBjb25maWcgPSAkLmV4dGVuZCh7fSwgRGVmYXVsdCwgY29uZmlnKTtcbiAgICAgIFV0aWwudHlwZUNoZWNrQ29uZmlnKE5BTUUsIGNvbmZpZywgRGVmYXVsdFR5cGUpO1xuICAgICAgcmV0dXJuIGNvbmZpZztcbiAgICB9O1xuXG4gICAgTW9kYWwucHJvdG90eXBlLl9zaG93RWxlbWVudCA9IGZ1bmN0aW9uIF9zaG93RWxlbWVudChyZWxhdGVkVGFyZ2V0KSB7XG4gICAgICB2YXIgX3RoaXM4ID0gdGhpcztcblxuICAgICAgdmFyIHRyYW5zaXRpb24gPSBVdGlsLnN1cHBvcnRzVHJhbnNpdGlvbkVuZCgpICYmICQodGhpcy5fZWxlbWVudCkuaGFzQ2xhc3MoQ2xhc3NOYW1lLkZBREUpO1xuXG4gICAgICBpZiAoIXRoaXMuX2VsZW1lbnQucGFyZW50Tm9kZSB8fCB0aGlzLl9lbGVtZW50LnBhcmVudE5vZGUubm9kZVR5cGUgIT09IE5vZGUuRUxFTUVOVF9OT0RFKSB7XG4gICAgICAgIC8vIGRvbid0IG1vdmUgbW9kYWxzIGRvbSBwb3NpdGlvblxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMuX2VsZW1lbnQpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9lbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgdGhpcy5fZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJyk7XG4gICAgICB0aGlzLl9lbGVtZW50LnNjcm9sbFRvcCA9IDA7XG5cbiAgICAgIGlmICh0cmFuc2l0aW9uKSB7XG4gICAgICAgIFV0aWwucmVmbG93KHRoaXMuX2VsZW1lbnQpO1xuICAgICAgfVxuXG4gICAgICAkKHRoaXMuX2VsZW1lbnQpLmFkZENsYXNzKENsYXNzTmFtZS5JTik7XG5cbiAgICAgIGlmICh0aGlzLl9jb25maWcuZm9jdXMpIHtcbiAgICAgICAgdGhpcy5fZW5mb3JjZUZvY3VzKCk7XG4gICAgICB9XG5cbiAgICAgIHZhciBzaG93bkV2ZW50ID0gJC5FdmVudChFdmVudC5TSE9XTiwge1xuICAgICAgICByZWxhdGVkVGFyZ2V0OiByZWxhdGVkVGFyZ2V0XG4gICAgICB9KTtcblxuICAgICAgdmFyIHRyYW5zaXRpb25Db21wbGV0ZSA9IGZ1bmN0aW9uIHRyYW5zaXRpb25Db21wbGV0ZSgpIHtcbiAgICAgICAgaWYgKF90aGlzOC5fY29uZmlnLmZvY3VzKSB7XG4gICAgICAgICAgX3RoaXM4Ll9lbGVtZW50LmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICAgICAgJChfdGhpczguX2VsZW1lbnQpLnRyaWdnZXIoc2hvd25FdmVudCk7XG4gICAgICB9O1xuXG4gICAgICBpZiAodHJhbnNpdGlvbikge1xuICAgICAgICAkKHRoaXMuX2RpYWxvZykub25lKFV0aWwuVFJBTlNJVElPTl9FTkQsIHRyYW5zaXRpb25Db21wbGV0ZSkuZW11bGF0ZVRyYW5zaXRpb25FbmQoVFJBTlNJVElPTl9EVVJBVElPTik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0cmFuc2l0aW9uQ29tcGxldGUoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgTW9kYWwucHJvdG90eXBlLl9lbmZvcmNlRm9jdXMgPSBmdW5jdGlvbiBfZW5mb3JjZUZvY3VzKCkge1xuICAgICAgdmFyIF90aGlzOSA9IHRoaXM7XG5cbiAgICAgICQoZG9jdW1lbnQpLm9mZihFdmVudC5GT0NVU0lOKSAvLyBndWFyZCBhZ2FpbnN0IGluZmluaXRlIGZvY3VzIGxvb3BcbiAgICAgIC5vbihFdmVudC5GT0NVU0lOLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgaWYgKGRvY3VtZW50ICE9PSBldmVudC50YXJnZXQgJiYgX3RoaXM5Ll9lbGVtZW50ICE9PSBldmVudC50YXJnZXQgJiYgISQoX3RoaXM5Ll9lbGVtZW50KS5oYXMoZXZlbnQudGFyZ2V0KS5sZW5ndGgpIHtcbiAgICAgICAgICBfdGhpczkuX2VsZW1lbnQuZm9jdXMoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfTtcblxuICAgIE1vZGFsLnByb3RvdHlwZS5fc2V0RXNjYXBlRXZlbnQgPSBmdW5jdGlvbiBfc2V0RXNjYXBlRXZlbnQoKSB7XG4gICAgICB2YXIgX3RoaXMxMCA9IHRoaXM7XG5cbiAgICAgIGlmICh0aGlzLl9pc1Nob3duICYmIHRoaXMuX2NvbmZpZy5rZXlib2FyZCkge1xuICAgICAgICAkKHRoaXMuX2VsZW1lbnQpLm9uKEV2ZW50LktFWURPV05fRElTTUlTUywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgaWYgKGV2ZW50LndoaWNoID09PSBFU0NBUEVfS0VZQ09ERSkge1xuICAgICAgICAgICAgX3RoaXMxMC5oaWRlKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSBpZiAoIXRoaXMuX2lzU2hvd24pIHtcbiAgICAgICAgJCh0aGlzLl9lbGVtZW50KS5vZmYoRXZlbnQuS0VZRE9XTl9ESVNNSVNTKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgTW9kYWwucHJvdG90eXBlLl9zZXRSZXNpemVFdmVudCA9IGZ1bmN0aW9uIF9zZXRSZXNpemVFdmVudCgpIHtcbiAgICAgIGlmICh0aGlzLl9pc1Nob3duKSB7XG4gICAgICAgICQod2luZG93KS5vbihFdmVudC5SRVNJWkUsICQucHJveHkodGhpcy5faGFuZGxlVXBkYXRlLCB0aGlzKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkKHdpbmRvdykub2ZmKEV2ZW50LlJFU0laRSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIE1vZGFsLnByb3RvdHlwZS5faGlkZU1vZGFsID0gZnVuY3Rpb24gX2hpZGVNb2RhbCgpIHtcbiAgICAgIHZhciBfdGhpczExID0gdGhpcztcblxuICAgICAgdGhpcy5fZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgdGhpcy5fZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJywgJ3RydWUnKTtcbiAgICAgIHRoaXMuX3Nob3dCYWNrZHJvcChmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoZG9jdW1lbnQuYm9keSkucmVtb3ZlQ2xhc3MoQ2xhc3NOYW1lLk9QRU4pO1xuICAgICAgICBfdGhpczExLl9yZXNldEFkanVzdG1lbnRzKCk7XG4gICAgICAgIF90aGlzMTEuX3Jlc2V0U2Nyb2xsYmFyKCk7XG4gICAgICAgICQoX3RoaXMxMS5fZWxlbWVudCkudHJpZ2dlcihFdmVudC5ISURERU4pO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIE1vZGFsLnByb3RvdHlwZS5fcmVtb3ZlQmFja2Ryb3AgPSBmdW5jdGlvbiBfcmVtb3ZlQmFja2Ryb3AoKSB7XG4gICAgICBpZiAodGhpcy5fYmFja2Ryb3ApIHtcbiAgICAgICAgJCh0aGlzLl9iYWNrZHJvcCkucmVtb3ZlKCk7XG4gICAgICAgIHRoaXMuX2JhY2tkcm9wID0gbnVsbDtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgTW9kYWwucHJvdG90eXBlLl9zaG93QmFja2Ryb3AgPSBmdW5jdGlvbiBfc2hvd0JhY2tkcm9wKGNhbGxiYWNrKSB7XG4gICAgICB2YXIgX3RoaXMxMiA9IHRoaXM7XG5cbiAgICAgIHZhciBhbmltYXRlID0gJCh0aGlzLl9lbGVtZW50KS5oYXNDbGFzcyhDbGFzc05hbWUuRkFERSkgPyBDbGFzc05hbWUuRkFERSA6ICcnO1xuXG4gICAgICBpZiAodGhpcy5faXNTaG93biAmJiB0aGlzLl9jb25maWcuYmFja2Ryb3ApIHtcbiAgICAgICAgdmFyIGRvQW5pbWF0ZSA9IFV0aWwuc3VwcG9ydHNUcmFuc2l0aW9uRW5kKCkgJiYgYW5pbWF0ZTtcblxuICAgICAgICB0aGlzLl9iYWNrZHJvcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICB0aGlzLl9iYWNrZHJvcC5jbGFzc05hbWUgPSBDbGFzc05hbWUuQkFDS0RST1A7XG5cbiAgICAgICAgaWYgKGFuaW1hdGUpIHtcbiAgICAgICAgICAkKHRoaXMuX2JhY2tkcm9wKS5hZGRDbGFzcyhhbmltYXRlKTtcbiAgICAgICAgfVxuXG4gICAgICAgICQodGhpcy5fYmFja2Ryb3ApLmFwcGVuZFRvKGRvY3VtZW50LmJvZHkpO1xuXG4gICAgICAgICQodGhpcy5fZWxlbWVudCkub24oRXZlbnQuQ0xJQ0tfRElTTUlTUywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgaWYgKF90aGlzMTIuX2lnbm9yZUJhY2tkcm9wQ2xpY2spIHtcbiAgICAgICAgICAgIF90aGlzMTIuX2lnbm9yZUJhY2tkcm9wQ2xpY2sgPSBmYWxzZTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGV2ZW50LnRhcmdldCAhPT0gZXZlbnQuY3VycmVudFRhcmdldCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoX3RoaXMxMi5fY29uZmlnLmJhY2tkcm9wID09PSAnc3RhdGljJykge1xuICAgICAgICAgICAgX3RoaXMxMi5fZWxlbWVudC5mb2N1cygpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBfdGhpczEyLmhpZGUoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChkb0FuaW1hdGUpIHtcbiAgICAgICAgICBVdGlsLnJlZmxvdyh0aGlzLl9iYWNrZHJvcCk7XG4gICAgICAgIH1cblxuICAgICAgICAkKHRoaXMuX2JhY2tkcm9wKS5hZGRDbGFzcyhDbGFzc05hbWUuSU4pO1xuXG4gICAgICAgIGlmICghY2FsbGJhY2spIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWRvQW5pbWF0ZSkge1xuICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgJCh0aGlzLl9iYWNrZHJvcCkub25lKFV0aWwuVFJBTlNJVElPTl9FTkQsIGNhbGxiYWNrKS5lbXVsYXRlVHJhbnNpdGlvbkVuZChCQUNLRFJPUF9UUkFOU0lUSU9OX0RVUkFUSU9OKTtcbiAgICAgIH0gZWxzZSBpZiAoIXRoaXMuX2lzU2hvd24gJiYgdGhpcy5fYmFja2Ryb3ApIHtcbiAgICAgICAgJCh0aGlzLl9iYWNrZHJvcCkucmVtb3ZlQ2xhc3MoQ2xhc3NOYW1lLklOKTtcblxuICAgICAgICB2YXIgY2FsbGJhY2tSZW1vdmUgPSBmdW5jdGlvbiBjYWxsYmFja1JlbW92ZSgpIHtcbiAgICAgICAgICBfdGhpczEyLl9yZW1vdmVCYWNrZHJvcCgpO1xuICAgICAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKFV0aWwuc3VwcG9ydHNUcmFuc2l0aW9uRW5kKCkgJiYgJCh0aGlzLl9lbGVtZW50KS5oYXNDbGFzcyhDbGFzc05hbWUuRkFERSkpIHtcbiAgICAgICAgICAkKHRoaXMuX2JhY2tkcm9wKS5vbmUoVXRpbC5UUkFOU0lUSU9OX0VORCwgY2FsbGJhY2tSZW1vdmUpLmVtdWxhdGVUcmFuc2l0aW9uRW5kKEJBQ0tEUk9QX1RSQU5TSVRJT05fRFVSQVRJT04pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNhbGxiYWNrUmVtb3ZlKCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIC8vIHRoZSBmb2xsb3dpbmcgbWV0aG9kcyBhcmUgdXNlZCB0byBoYW5kbGUgb3ZlcmZsb3dpbmcgbW9kYWxzXG4gICAgLy8gdG9kbyAoZmF0KTogdGhlc2Ugc2hvdWxkIHByb2JhYmx5IGJlIHJlZmFjdG9yZWQgb3V0IG9mIG1vZGFsLmpzXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gICAgTW9kYWwucHJvdG90eXBlLl9oYW5kbGVVcGRhdGUgPSBmdW5jdGlvbiBfaGFuZGxlVXBkYXRlKCkge1xuICAgICAgdGhpcy5fYWRqdXN0RGlhbG9nKCk7XG4gICAgfTtcblxuICAgIE1vZGFsLnByb3RvdHlwZS5fYWRqdXN0RGlhbG9nID0gZnVuY3Rpb24gX2FkanVzdERpYWxvZygpIHtcbiAgICAgIHZhciBpc01vZGFsT3ZlcmZsb3dpbmcgPSB0aGlzLl9lbGVtZW50LnNjcm9sbEhlaWdodCA+IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQ7XG5cbiAgICAgIGlmICghdGhpcy5faXNCb2R5T3ZlcmZsb3dpbmcgJiYgaXNNb2RhbE92ZXJmbG93aW5nKSB7XG4gICAgICAgIHRoaXMuX2VsZW1lbnQuc3R5bGUucGFkZGluZ0xlZnQgPSB0aGlzLl9zY3JvbGxiYXJXaWR0aCArICdweCc7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLl9pc0JvZHlPdmVyZmxvd2luZyAmJiAhaXNNb2RhbE92ZXJmbG93aW5nKSB7XG4gICAgICAgIHRoaXMuX2VsZW1lbnQuc3R5bGUucGFkZGluZ1JpZ2h0ID0gdGhpcy5fc2Nyb2xsYmFyV2lkdGggKyAncHgnO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBNb2RhbC5wcm90b3R5cGUuX3Jlc2V0QWRqdXN0bWVudHMgPSBmdW5jdGlvbiBfcmVzZXRBZGp1c3RtZW50cygpIHtcbiAgICAgIHRoaXMuX2VsZW1lbnQuc3R5bGUucGFkZGluZ0xlZnQgPSAnJztcbiAgICAgIHRoaXMuX2VsZW1lbnQuc3R5bGUucGFkZGluZ1JpZ2h0ID0gJyc7XG4gICAgfTtcblxuICAgIE1vZGFsLnByb3RvdHlwZS5fY2hlY2tTY3JvbGxiYXIgPSBmdW5jdGlvbiBfY2hlY2tTY3JvbGxiYXIoKSB7XG4gICAgICB0aGlzLl9pc0JvZHlPdmVyZmxvd2luZyA9IGRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGggPCB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICAgIHRoaXMuX3Njcm9sbGJhcldpZHRoID0gdGhpcy5fZ2V0U2Nyb2xsYmFyV2lkdGgoKTtcbiAgICB9O1xuXG4gICAgTW9kYWwucHJvdG90eXBlLl9zZXRTY3JvbGxiYXIgPSBmdW5jdGlvbiBfc2V0U2Nyb2xsYmFyKCkge1xuICAgICAgdmFyIGJvZHlQYWRkaW5nID0gcGFyc2VJbnQoJChTZWxlY3Rvci5GSVhFRF9DT05URU5UKS5jc3MoJ3BhZGRpbmctcmlnaHQnKSB8fCAwLCAxMCk7XG5cbiAgICAgIHRoaXMuX29yaWdpbmFsQm9keVBhZGRpbmcgPSBkb2N1bWVudC5ib2R5LnN0eWxlLnBhZGRpbmdSaWdodCB8fCAnJztcblxuICAgICAgaWYgKHRoaXMuX2lzQm9keU92ZXJmbG93aW5nKSB7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUucGFkZGluZ1JpZ2h0ID0gYm9keVBhZGRpbmcgKyB0aGlzLl9zY3JvbGxiYXJXaWR0aCArICdweCc7XG4gICAgICB9XG4gICAgfTtcblxuICAgIE1vZGFsLnByb3RvdHlwZS5fcmVzZXRTY3JvbGxiYXIgPSBmdW5jdGlvbiBfcmVzZXRTY3JvbGxiYXIoKSB7XG4gICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLnBhZGRpbmdSaWdodCA9IHRoaXMuX29yaWdpbmFsQm9keVBhZGRpbmc7XG4gICAgfTtcblxuICAgIE1vZGFsLnByb3RvdHlwZS5fZ2V0U2Nyb2xsYmFyV2lkdGggPSBmdW5jdGlvbiBfZ2V0U2Nyb2xsYmFyV2lkdGgoKSB7XG4gICAgICAvLyB0aHggZC53YWxzaFxuICAgICAgdmFyIHNjcm9sbERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgc2Nyb2xsRGl2LmNsYXNzTmFtZSA9IENsYXNzTmFtZS5TQ1JPTExCQVJfTUVBU1VSRVI7XG4gICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHNjcm9sbERpdik7XG4gICAgICB2YXIgc2Nyb2xsYmFyV2lkdGggPSBzY3JvbGxEaXYub2Zmc2V0V2lkdGggLSBzY3JvbGxEaXYuY2xpZW50V2lkdGg7XG4gICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHNjcm9sbERpdik7XG4gICAgICByZXR1cm4gc2Nyb2xsYmFyV2lkdGg7XG4gICAgfTtcblxuICAgIC8vIHN0YXRpY1xuXG4gICAgTW9kYWwuX2pRdWVyeUludGVyZmFjZSA9IGZ1bmN0aW9uIF9qUXVlcnlJbnRlcmZhY2UoY29uZmlnLCByZWxhdGVkVGFyZ2V0KSB7XG4gICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGRhdGEgPSAkKHRoaXMpLmRhdGEoREFUQV9LRVkpO1xuICAgICAgICB2YXIgX2NvbmZpZyA9ICQuZXh0ZW5kKHt9LCBNb2RhbC5EZWZhdWx0LCAkKHRoaXMpLmRhdGEoKSwgKHR5cGVvZiBjb25maWcgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKGNvbmZpZykpID09PSAnb2JqZWN0JyAmJiBjb25maWcpO1xuXG4gICAgICAgIGlmICghZGF0YSkge1xuICAgICAgICAgIGRhdGEgPSBuZXcgTW9kYWwodGhpcywgX2NvbmZpZyk7XG4gICAgICAgICAgJCh0aGlzKS5kYXRhKERBVEFfS0VZLCBkYXRhKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0eXBlb2YgY29uZmlnID09PSAnc3RyaW5nJykge1xuICAgICAgICAgIGlmIChkYXRhW2NvbmZpZ10gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBtZXRob2QgbmFtZWQgXCInICsgY29uZmlnICsgJ1wiJyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGRhdGFbY29uZmlnXShyZWxhdGVkVGFyZ2V0KTtcbiAgICAgICAgfSBlbHNlIGlmIChfY29uZmlnLnNob3cpIHtcbiAgICAgICAgICBkYXRhLnNob3cocmVsYXRlZFRhcmdldCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBfY3JlYXRlQ2xhc3MoTW9kYWwsIG51bGwsIFt7XG4gICAgICBrZXk6ICdWRVJTSU9OJyxcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gVkVSU0lPTjtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6ICdEZWZhdWx0JyxcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gRGVmYXVsdDtcbiAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gTW9kYWw7XG4gIH0oKTtcblxuICAvKipcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqIERhdGEgQXBpIGltcGxlbWVudGF0aW9uXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKi9cblxuICAkKGRvY3VtZW50KS5vbihFdmVudC5DTElDS19EQVRBX0FQSSwgU2VsZWN0b3IuREFUQV9UT0dHTEUsIGZ1bmN0aW9uIChldmVudCkge1xuICAgIHZhciBfdGhpczEzID0gdGhpcztcblxuICAgIHZhciB0YXJnZXQgPSB2b2lkIDA7XG4gICAgdmFyIHNlbGVjdG9yID0gVXRpbC5nZXRTZWxlY3RvckZyb21FbGVtZW50KHRoaXMpO1xuXG4gICAgaWYgKHNlbGVjdG9yKSB7XG4gICAgICB0YXJnZXQgPSAkKHNlbGVjdG9yKVswXTtcbiAgICB9XG5cbiAgICB2YXIgY29uZmlnID0gJCh0YXJnZXQpLmRhdGEoREFUQV9LRVkpID8gJ3RvZ2dsZScgOiAkLmV4dGVuZCh7fSwgJCh0YXJnZXQpLmRhdGEoKSwgJCh0aGlzKS5kYXRhKCkpO1xuXG4gICAgaWYgKHRoaXMudGFnTmFtZSA9PT0gJ0EnKSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH1cblxuICAgIHZhciAkdGFyZ2V0ID0gJCh0YXJnZXQpLm9uZShFdmVudC5TSE9XLCBmdW5jdGlvbiAoc2hvd0V2ZW50KSB7XG4gICAgICBpZiAoc2hvd0V2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpKSB7XG4gICAgICAgIC8vIG9ubHkgcmVnaXN0ZXIgZm9jdXMgcmVzdG9yZXIgaWYgbW9kYWwgd2lsbCBhY3R1YWxseSBnZXQgc2hvd25cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAkdGFyZ2V0Lm9uZShFdmVudC5ISURERU4sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCQoX3RoaXMxMykuaXMoJzp2aXNpYmxlJykpIHtcbiAgICAgICAgICBfdGhpczEzLmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgTW9kYWwuX2pRdWVyeUludGVyZmFjZS5jYWxsKCQodGFyZ2V0KSwgY29uZmlnLCB0aGlzKTtcbiAgfSk7XG5cbiAgLyoqXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKiBqUXVlcnlcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqL1xuXG4gICQuZm5bTkFNRV0gPSBNb2RhbC5falF1ZXJ5SW50ZXJmYWNlO1xuICAkLmZuW05BTUVdLkNvbnN0cnVjdG9yID0gTW9kYWw7XG4gICQuZm5bTkFNRV0ubm9Db25mbGljdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAkLmZuW05BTUVdID0gSlFVRVJZX05PX0NPTkZMSUNUO1xuICAgIHJldHVybiBNb2RhbC5falF1ZXJ5SW50ZXJmYWNlO1xuICB9O1xuXG4gIHJldHVybiBNb2RhbDtcbn0oalF1ZXJ5KTtcblxuLyoqXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogQm9vdHN0cmFwICh2NC4wLjAtYWxwaGEuNSk6IHNjcm9sbHNweS5qc1xuICogTGljZW5zZWQgdW5kZXIgTUlUIChodHRwczovL2dpdGh1Yi5jb20vdHdicy9ib290c3RyYXAvYmxvYi9tYXN0ZXIvTElDRU5TRSlcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKi9cblxudmFyIFNjcm9sbFNweSA9IGZ1bmN0aW9uICgkKSB7XG5cbiAgLyoqXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKiBDb25zdGFudHNcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqL1xuXG4gIHZhciBOQU1FID0gJ3Njcm9sbHNweSc7XG4gIHZhciBWRVJTSU9OID0gJzQuMC4wLWFscGhhLjUnO1xuICB2YXIgREFUQV9LRVkgPSAnYnMuc2Nyb2xsc3B5JztcbiAgdmFyIEVWRU5UX0tFWSA9ICcuJyArIERBVEFfS0VZO1xuICB2YXIgREFUQV9BUElfS0VZID0gJy5kYXRhLWFwaSc7XG4gIHZhciBKUVVFUllfTk9fQ09ORkxJQ1QgPSAkLmZuW05BTUVdO1xuXG4gIHZhciBEZWZhdWx0ID0ge1xuICAgIG9mZnNldDogMTAsXG4gICAgbWV0aG9kOiAnYXV0bycsXG4gICAgdGFyZ2V0OiAnJ1xuICB9O1xuXG4gIHZhciBEZWZhdWx0VHlwZSA9IHtcbiAgICBvZmZzZXQ6ICdudW1iZXInLFxuICAgIG1ldGhvZDogJ3N0cmluZycsXG4gICAgdGFyZ2V0OiAnKHN0cmluZ3xlbGVtZW50KSdcbiAgfTtcblxuICB2YXIgRXZlbnQgPSB7XG4gICAgQUNUSVZBVEU6ICdhY3RpdmF0ZScgKyBFVkVOVF9LRVksXG4gICAgU0NST0xMOiAnc2Nyb2xsJyArIEVWRU5UX0tFWSxcbiAgICBMT0FEX0RBVEFfQVBJOiAnbG9hZCcgKyBFVkVOVF9LRVkgKyBEQVRBX0FQSV9LRVlcbiAgfTtcblxuICB2YXIgQ2xhc3NOYW1lID0ge1xuICAgIERST1BET1dOX0lURU06ICdkcm9wZG93bi1pdGVtJyxcbiAgICBEUk9QRE9XTl9NRU5VOiAnZHJvcGRvd24tbWVudScsXG4gICAgTkFWX0xJTks6ICduYXYtbGluaycsXG4gICAgTkFWOiAnbmF2JyxcbiAgICBBQ1RJVkU6ICdhY3RpdmUnXG4gIH07XG5cbiAgdmFyIFNlbGVjdG9yID0ge1xuICAgIERBVEFfU1BZOiAnW2RhdGEtc3B5PVwic2Nyb2xsXCJdJyxcbiAgICBBQ1RJVkU6ICcuYWN0aXZlJyxcbiAgICBMSVNUX0lURU06ICcubGlzdC1pdGVtJyxcbiAgICBMSTogJ2xpJyxcbiAgICBMSV9EUk9QRE9XTjogJ2xpLmRyb3Bkb3duJyxcbiAgICBOQVZfTElOS1M6ICcubmF2LWxpbmsnLFxuICAgIERST1BET1dOOiAnLmRyb3Bkb3duJyxcbiAgICBEUk9QRE9XTl9JVEVNUzogJy5kcm9wZG93bi1pdGVtJyxcbiAgICBEUk9QRE9XTl9UT0dHTEU6ICcuZHJvcGRvd24tdG9nZ2xlJ1xuICB9O1xuXG4gIHZhciBPZmZzZXRNZXRob2QgPSB7XG4gICAgT0ZGU0VUOiAnb2Zmc2V0JyxcbiAgICBQT1NJVElPTjogJ3Bvc2l0aW9uJ1xuICB9O1xuXG4gIC8qKlxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICogQ2xhc3MgRGVmaW5pdGlvblxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICovXG5cbiAgdmFyIFNjcm9sbFNweSA9IGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBTY3JvbGxTcHkoZWxlbWVudCwgY29uZmlnKSB7XG4gICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU2Nyb2xsU3B5KTtcblxuICAgICAgdGhpcy5fZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgICB0aGlzLl9zY3JvbGxFbGVtZW50ID0gZWxlbWVudC50YWdOYW1lID09PSAnQk9EWScgPyB3aW5kb3cgOiBlbGVtZW50O1xuICAgICAgdGhpcy5fY29uZmlnID0gdGhpcy5fZ2V0Q29uZmlnKGNvbmZpZyk7XG4gICAgICB0aGlzLl9zZWxlY3RvciA9IHRoaXMuX2NvbmZpZy50YXJnZXQgKyAnICcgKyBTZWxlY3Rvci5OQVZfTElOS1MgKyAnLCcgKyAodGhpcy5fY29uZmlnLnRhcmdldCArICcgJyArIFNlbGVjdG9yLkRST1BET1dOX0lURU1TKTtcbiAgICAgIHRoaXMuX29mZnNldHMgPSBbXTtcbiAgICAgIHRoaXMuX3RhcmdldHMgPSBbXTtcbiAgICAgIHRoaXMuX2FjdGl2ZVRhcmdldCA9IG51bGw7XG4gICAgICB0aGlzLl9zY3JvbGxIZWlnaHQgPSAwO1xuXG4gICAgICAkKHRoaXMuX3Njcm9sbEVsZW1lbnQpLm9uKEV2ZW50LlNDUk9MTCwgJC5wcm94eSh0aGlzLl9wcm9jZXNzLCB0aGlzKSk7XG5cbiAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgICAgdGhpcy5fcHJvY2VzcygpO1xuICAgIH1cblxuICAgIC8vIGdldHRlcnNcblxuICAgIC8vIHB1YmxpY1xuXG4gICAgU2Nyb2xsU3B5LnByb3RvdHlwZS5yZWZyZXNoID0gZnVuY3Rpb24gcmVmcmVzaCgpIHtcbiAgICAgIHZhciBfdGhpczE0ID0gdGhpcztcblxuICAgICAgdmFyIGF1dG9NZXRob2QgPSB0aGlzLl9zY3JvbGxFbGVtZW50ICE9PSB0aGlzLl9zY3JvbGxFbGVtZW50LndpbmRvdyA/IE9mZnNldE1ldGhvZC5QT1NJVElPTiA6IE9mZnNldE1ldGhvZC5PRkZTRVQ7XG5cbiAgICAgIHZhciBvZmZzZXRNZXRob2QgPSB0aGlzLl9jb25maWcubWV0aG9kID09PSAnYXV0bycgPyBhdXRvTWV0aG9kIDogdGhpcy5fY29uZmlnLm1ldGhvZDtcblxuICAgICAgdmFyIG9mZnNldEJhc2UgPSBvZmZzZXRNZXRob2QgPT09IE9mZnNldE1ldGhvZC5QT1NJVElPTiA/IHRoaXMuX2dldFNjcm9sbFRvcCgpIDogMDtcblxuICAgICAgdGhpcy5fb2Zmc2V0cyA9IFtdO1xuICAgICAgdGhpcy5fdGFyZ2V0cyA9IFtdO1xuXG4gICAgICB0aGlzLl9zY3JvbGxIZWlnaHQgPSB0aGlzLl9nZXRTY3JvbGxIZWlnaHQoKTtcblxuICAgICAgdmFyIHRhcmdldHMgPSAkLm1ha2VBcnJheSgkKHRoaXMuX3NlbGVjdG9yKSk7XG5cbiAgICAgIHRhcmdldHMubWFwKGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgIHZhciB0YXJnZXQgPSB2b2lkIDA7XG4gICAgICAgIHZhciB0YXJnZXRTZWxlY3RvciA9IFV0aWwuZ2V0U2VsZWN0b3JGcm9tRWxlbWVudChlbGVtZW50KTtcblxuICAgICAgICBpZiAodGFyZ2V0U2VsZWN0b3IpIHtcbiAgICAgICAgICB0YXJnZXQgPSAkKHRhcmdldFNlbGVjdG9yKVswXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0YXJnZXQgJiYgKHRhcmdldC5vZmZzZXRXaWR0aCB8fCB0YXJnZXQub2Zmc2V0SGVpZ2h0KSkge1xuICAgICAgICAgIC8vIHRvZG8gKGZhdCk6IHJlbW92ZSBza2V0Y2ggcmVsaWFuY2Ugb24galF1ZXJ5IHBvc2l0aW9uL29mZnNldFxuICAgICAgICAgIHJldHVybiBbJCh0YXJnZXQpW29mZnNldE1ldGhvZF0oKS50b3AgKyBvZmZzZXRCYXNlLCB0YXJnZXRTZWxlY3Rvcl07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9KS5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgICB9KS5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgIHJldHVybiBhWzBdIC0gYlswXTtcbiAgICAgIH0pLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgX3RoaXMxNC5fb2Zmc2V0cy5wdXNoKGl0ZW1bMF0pO1xuICAgICAgICBfdGhpczE0Ll90YXJnZXRzLnB1c2goaXRlbVsxXSk7XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgU2Nyb2xsU3B5LnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gZGlzcG9zZSgpIHtcbiAgICAgICQucmVtb3ZlRGF0YSh0aGlzLl9lbGVtZW50LCBEQVRBX0tFWSk7XG4gICAgICAkKHRoaXMuX3Njcm9sbEVsZW1lbnQpLm9mZihFVkVOVF9LRVkpO1xuXG4gICAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcbiAgICAgIHRoaXMuX3Njcm9sbEVsZW1lbnQgPSBudWxsO1xuICAgICAgdGhpcy5fY29uZmlnID0gbnVsbDtcbiAgICAgIHRoaXMuX3NlbGVjdG9yID0gbnVsbDtcbiAgICAgIHRoaXMuX29mZnNldHMgPSBudWxsO1xuICAgICAgdGhpcy5fdGFyZ2V0cyA9IG51bGw7XG4gICAgICB0aGlzLl9hY3RpdmVUYXJnZXQgPSBudWxsO1xuICAgICAgdGhpcy5fc2Nyb2xsSGVpZ2h0ID0gbnVsbDtcbiAgICB9O1xuXG4gICAgLy8gcHJpdmF0ZVxuXG4gICAgU2Nyb2xsU3B5LnByb3RvdHlwZS5fZ2V0Q29uZmlnID0gZnVuY3Rpb24gX2dldENvbmZpZyhjb25maWcpIHtcbiAgICAgIGNvbmZpZyA9ICQuZXh0ZW5kKHt9LCBEZWZhdWx0LCBjb25maWcpO1xuXG4gICAgICBpZiAodHlwZW9mIGNvbmZpZy50YXJnZXQgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHZhciBpZCA9ICQoY29uZmlnLnRhcmdldCkuYXR0cignaWQnKTtcbiAgICAgICAgaWYgKCFpZCkge1xuICAgICAgICAgIGlkID0gVXRpbC5nZXRVSUQoTkFNRSk7XG4gICAgICAgICAgJChjb25maWcudGFyZ2V0KS5hdHRyKCdpZCcsIGlkKTtcbiAgICAgICAgfVxuICAgICAgICBjb25maWcudGFyZ2V0ID0gJyMnICsgaWQ7XG4gICAgICB9XG5cbiAgICAgIFV0aWwudHlwZUNoZWNrQ29uZmlnKE5BTUUsIGNvbmZpZywgRGVmYXVsdFR5cGUpO1xuXG4gICAgICByZXR1cm4gY29uZmlnO1xuICAgIH07XG5cbiAgICBTY3JvbGxTcHkucHJvdG90eXBlLl9nZXRTY3JvbGxUb3AgPSBmdW5jdGlvbiBfZ2V0U2Nyb2xsVG9wKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3Njcm9sbEVsZW1lbnQgPT09IHdpbmRvdyA/IHRoaXMuX3Njcm9sbEVsZW1lbnQuc2Nyb2xsWSA6IHRoaXMuX3Njcm9sbEVsZW1lbnQuc2Nyb2xsVG9wO1xuICAgIH07XG5cbiAgICBTY3JvbGxTcHkucHJvdG90eXBlLl9nZXRTY3JvbGxIZWlnaHQgPSBmdW5jdGlvbiBfZ2V0U2Nyb2xsSGVpZ2h0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3Njcm9sbEVsZW1lbnQuc2Nyb2xsSGVpZ2h0IHx8IE1hdGgubWF4KGRvY3VtZW50LmJvZHkuc2Nyb2xsSGVpZ2h0LCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsSGVpZ2h0KTtcbiAgICB9O1xuXG4gICAgU2Nyb2xsU3B5LnByb3RvdHlwZS5fcHJvY2VzcyA9IGZ1bmN0aW9uIF9wcm9jZXNzKCkge1xuICAgICAgdmFyIHNjcm9sbFRvcCA9IHRoaXMuX2dldFNjcm9sbFRvcCgpICsgdGhpcy5fY29uZmlnLm9mZnNldDtcbiAgICAgIHZhciBzY3JvbGxIZWlnaHQgPSB0aGlzLl9nZXRTY3JvbGxIZWlnaHQoKTtcbiAgICAgIHZhciBtYXhTY3JvbGwgPSB0aGlzLl9jb25maWcub2Zmc2V0ICsgc2Nyb2xsSGVpZ2h0IC0gdGhpcy5fc2Nyb2xsRWxlbWVudC5vZmZzZXRIZWlnaHQ7XG5cbiAgICAgIGlmICh0aGlzLl9zY3JvbGxIZWlnaHQgIT09IHNjcm9sbEhlaWdodCkge1xuICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHNjcm9sbFRvcCA+PSBtYXhTY3JvbGwpIHtcbiAgICAgICAgdmFyIHRhcmdldCA9IHRoaXMuX3RhcmdldHNbdGhpcy5fdGFyZ2V0cy5sZW5ndGggLSAxXTtcblxuICAgICAgICBpZiAodGhpcy5fYWN0aXZlVGFyZ2V0ICE9PSB0YXJnZXQpIHtcbiAgICAgICAgICB0aGlzLl9hY3RpdmF0ZSh0YXJnZXQpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLl9hY3RpdmVUYXJnZXQgJiYgc2Nyb2xsVG9wIDwgdGhpcy5fb2Zmc2V0c1swXSkge1xuICAgICAgICB0aGlzLl9hY3RpdmVUYXJnZXQgPSBudWxsO1xuICAgICAgICB0aGlzLl9jbGVhcigpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGZvciAodmFyIGkgPSB0aGlzLl9vZmZzZXRzLmxlbmd0aDsgaS0tOykge1xuICAgICAgICB2YXIgaXNBY3RpdmVUYXJnZXQgPSB0aGlzLl9hY3RpdmVUYXJnZXQgIT09IHRoaXMuX3RhcmdldHNbaV0gJiYgc2Nyb2xsVG9wID49IHRoaXMuX29mZnNldHNbaV0gJiYgKHRoaXMuX29mZnNldHNbaSArIDFdID09PSB1bmRlZmluZWQgfHwgc2Nyb2xsVG9wIDwgdGhpcy5fb2Zmc2V0c1tpICsgMV0pO1xuXG4gICAgICAgIGlmIChpc0FjdGl2ZVRhcmdldCkge1xuICAgICAgICAgIHRoaXMuX2FjdGl2YXRlKHRoaXMuX3RhcmdldHNbaV0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIFNjcm9sbFNweS5wcm90b3R5cGUuX2FjdGl2YXRlID0gZnVuY3Rpb24gX2FjdGl2YXRlKHRhcmdldCkge1xuICAgICAgdGhpcy5fYWN0aXZlVGFyZ2V0ID0gdGFyZ2V0O1xuXG4gICAgICB0aGlzLl9jbGVhcigpO1xuXG4gICAgICB2YXIgcXVlcmllcyA9IHRoaXMuX3NlbGVjdG9yLnNwbGl0KCcsJyk7XG4gICAgICBxdWVyaWVzID0gcXVlcmllcy5tYXAoZnVuY3Rpb24gKHNlbGVjdG9yKSB7XG4gICAgICAgIHJldHVybiBzZWxlY3RvciArICdbZGF0YS10YXJnZXQ9XCInICsgdGFyZ2V0ICsgJ1wiXSwnICsgKHNlbGVjdG9yICsgJ1tocmVmPVwiJyArIHRhcmdldCArICdcIl0nKTtcbiAgICAgIH0pO1xuXG4gICAgICB2YXIgJGxpbmsgPSAkKHF1ZXJpZXMuam9pbignLCcpKTtcblxuICAgICAgaWYgKCRsaW5rLmhhc0NsYXNzKENsYXNzTmFtZS5EUk9QRE9XTl9JVEVNKSkge1xuICAgICAgICAkbGluay5jbG9zZXN0KFNlbGVjdG9yLkRST1BET1dOKS5maW5kKFNlbGVjdG9yLkRST1BET1dOX1RPR0dMRSkuYWRkQ2xhc3MoQ2xhc3NOYW1lLkFDVElWRSk7XG4gICAgICAgICRsaW5rLmFkZENsYXNzKENsYXNzTmFtZS5BQ1RJVkUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gdG9kbyAoZmF0KSB0aGlzIGlzIGtpbmRhIHN1cy4uLlxuICAgICAgICAvLyByZWN1cnNpdmVseSBhZGQgYWN0aXZlcyB0byB0ZXN0ZWQgbmF2LWxpbmtzXG4gICAgICAgICRsaW5rLnBhcmVudHMoU2VsZWN0b3IuTEkpLmZpbmQoU2VsZWN0b3IuTkFWX0xJTktTKS5hZGRDbGFzcyhDbGFzc05hbWUuQUNUSVZFKTtcbiAgICAgIH1cblxuICAgICAgJCh0aGlzLl9zY3JvbGxFbGVtZW50KS50cmlnZ2VyKEV2ZW50LkFDVElWQVRFLCB7XG4gICAgICAgIHJlbGF0ZWRUYXJnZXQ6IHRhcmdldFxuICAgICAgfSk7XG4gICAgfTtcblxuICAgIFNjcm9sbFNweS5wcm90b3R5cGUuX2NsZWFyID0gZnVuY3Rpb24gX2NsZWFyKCkge1xuICAgICAgJCh0aGlzLl9zZWxlY3RvcikuZmlsdGVyKFNlbGVjdG9yLkFDVElWRSkucmVtb3ZlQ2xhc3MoQ2xhc3NOYW1lLkFDVElWRSk7XG4gICAgfTtcblxuICAgIC8vIHN0YXRpY1xuXG4gICAgU2Nyb2xsU3B5Ll9qUXVlcnlJbnRlcmZhY2UgPSBmdW5jdGlvbiBfalF1ZXJ5SW50ZXJmYWNlKGNvbmZpZykge1xuICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBkYXRhID0gJCh0aGlzKS5kYXRhKERBVEFfS0VZKTtcbiAgICAgICAgdmFyIF9jb25maWcgPSAodHlwZW9mIGNvbmZpZyA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoY29uZmlnKSkgPT09ICdvYmplY3QnICYmIGNvbmZpZyB8fCBudWxsO1xuXG4gICAgICAgIGlmICghZGF0YSkge1xuICAgICAgICAgIGRhdGEgPSBuZXcgU2Nyb2xsU3B5KHRoaXMsIF9jb25maWcpO1xuICAgICAgICAgICQodGhpcykuZGF0YShEQVRBX0tFWSwgZGF0YSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHlwZW9mIGNvbmZpZyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICBpZiAoZGF0YVtjb25maWddID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gbWV0aG9kIG5hbWVkIFwiJyArIGNvbmZpZyArICdcIicpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBkYXRhW2NvbmZpZ10oKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfTtcblxuICAgIF9jcmVhdGVDbGFzcyhTY3JvbGxTcHksIG51bGwsIFt7XG4gICAgICBrZXk6ICdWRVJTSU9OJyxcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gVkVSU0lPTjtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6ICdEZWZhdWx0JyxcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gRGVmYXVsdDtcbiAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gU2Nyb2xsU3B5O1xuICB9KCk7XG5cbiAgLyoqXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKiBEYXRhIEFwaSBpbXBsZW1lbnRhdGlvblxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICovXG5cbiAgJCh3aW5kb3cpLm9uKEV2ZW50LkxPQURfREFUQV9BUEksIGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2Nyb2xsU3B5cyA9ICQubWFrZUFycmF5KCQoU2VsZWN0b3IuREFUQV9TUFkpKTtcblxuICAgIGZvciAodmFyIGkgPSBzY3JvbGxTcHlzLmxlbmd0aDsgaS0tOykge1xuICAgICAgdmFyICRzcHkgPSAkKHNjcm9sbFNweXNbaV0pO1xuICAgICAgU2Nyb2xsU3B5Ll9qUXVlcnlJbnRlcmZhY2UuY2FsbCgkc3B5LCAkc3B5LmRhdGEoKSk7XG4gICAgfVxuICB9KTtcblxuICAvKipcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqIGpRdWVyeVxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICovXG5cbiAgJC5mbltOQU1FXSA9IFNjcm9sbFNweS5falF1ZXJ5SW50ZXJmYWNlO1xuICAkLmZuW05BTUVdLkNvbnN0cnVjdG9yID0gU2Nyb2xsU3B5O1xuICAkLmZuW05BTUVdLm5vQ29uZmxpY3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgJC5mbltOQU1FXSA9IEpRVUVSWV9OT19DT05GTElDVDtcbiAgICByZXR1cm4gU2Nyb2xsU3B5Ll9qUXVlcnlJbnRlcmZhY2U7XG4gIH07XG5cbiAgcmV0dXJuIFNjcm9sbFNweTtcbn0oalF1ZXJ5KTtcblxuLyoqXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogQm9vdHN0cmFwICh2NC4wLjAtYWxwaGEuNSk6IHRhYi5qc1xuICogTGljZW5zZWQgdW5kZXIgTUlUIChodHRwczovL2dpdGh1Yi5jb20vdHdicy9ib290c3RyYXAvYmxvYi9tYXN0ZXIvTElDRU5TRSlcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKi9cblxudmFyIFRhYiA9IGZ1bmN0aW9uICgkKSB7XG5cbiAgLyoqXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKiBDb25zdGFudHNcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqL1xuXG4gIHZhciBOQU1FID0gJ3RhYic7XG4gIHZhciBWRVJTSU9OID0gJzQuMC4wLWFscGhhLjUnO1xuICB2YXIgREFUQV9LRVkgPSAnYnMudGFiJztcbiAgdmFyIEVWRU5UX0tFWSA9ICcuJyArIERBVEFfS0VZO1xuICB2YXIgREFUQV9BUElfS0VZID0gJy5kYXRhLWFwaSc7XG4gIHZhciBKUVVFUllfTk9fQ09ORkxJQ1QgPSAkLmZuW05BTUVdO1xuICB2YXIgVFJBTlNJVElPTl9EVVJBVElPTiA9IDE1MDtcblxuICB2YXIgRXZlbnQgPSB7XG4gICAgSElERTogJ2hpZGUnICsgRVZFTlRfS0VZLFxuICAgIEhJRERFTjogJ2hpZGRlbicgKyBFVkVOVF9LRVksXG4gICAgU0hPVzogJ3Nob3cnICsgRVZFTlRfS0VZLFxuICAgIFNIT1dOOiAnc2hvd24nICsgRVZFTlRfS0VZLFxuICAgIENMSUNLX0RBVEFfQVBJOiAnY2xpY2snICsgRVZFTlRfS0VZICsgREFUQV9BUElfS0VZXG4gIH07XG5cbiAgdmFyIENsYXNzTmFtZSA9IHtcbiAgICBEUk9QRE9XTl9NRU5VOiAnZHJvcGRvd24tbWVudScsXG4gICAgQUNUSVZFOiAnYWN0aXZlJyxcbiAgICBGQURFOiAnZmFkZScsXG4gICAgSU46ICdpbidcbiAgfTtcblxuICB2YXIgU2VsZWN0b3IgPSB7XG4gICAgQTogJ2EnLFxuICAgIExJOiAnbGknLFxuICAgIERST1BET1dOOiAnLmRyb3Bkb3duJyxcbiAgICBVTDogJ3VsOm5vdCguZHJvcGRvd24tbWVudSknLFxuICAgIEZBREVfQ0hJTEQ6ICc+IC5uYXYtaXRlbSAuZmFkZSwgPiAuZmFkZScsXG4gICAgQUNUSVZFOiAnLmFjdGl2ZScsXG4gICAgQUNUSVZFX0NISUxEOiAnPiAubmF2LWl0ZW0gPiAuYWN0aXZlLCA+IC5hY3RpdmUnLFxuICAgIERBVEFfVE9HR0xFOiAnW2RhdGEtdG9nZ2xlPVwidGFiXCJdLCBbZGF0YS10b2dnbGU9XCJwaWxsXCJdJyxcbiAgICBEUk9QRE9XTl9UT0dHTEU6ICcuZHJvcGRvd24tdG9nZ2xlJyxcbiAgICBEUk9QRE9XTl9BQ1RJVkVfQ0hJTEQ6ICc+IC5kcm9wZG93bi1tZW51IC5hY3RpdmUnXG4gIH07XG5cbiAgLyoqXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKiBDbGFzcyBEZWZpbml0aW9uXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKi9cblxuICB2YXIgVGFiID0gZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFRhYihlbGVtZW50KSB7XG4gICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVGFiKTtcblxuICAgICAgdGhpcy5fZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgfVxuXG4gICAgLy8gZ2V0dGVyc1xuXG4gICAgLy8gcHVibGljXG5cbiAgICBUYWIucHJvdG90eXBlLnNob3cgPSBmdW5jdGlvbiBzaG93KCkge1xuICAgICAgdmFyIF90aGlzMTUgPSB0aGlzO1xuXG4gICAgICBpZiAodGhpcy5fZWxlbWVudC5wYXJlbnROb2RlICYmIHRoaXMuX2VsZW1lbnQucGFyZW50Tm9kZS5ub2RlVHlwZSA9PT0gTm9kZS5FTEVNRU5UX05PREUgJiYgJCh0aGlzLl9lbGVtZW50KS5oYXNDbGFzcyhDbGFzc05hbWUuQUNUSVZFKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHZhciB0YXJnZXQgPSB2b2lkIDA7XG4gICAgICB2YXIgcHJldmlvdXMgPSB2b2lkIDA7XG4gICAgICB2YXIgdWxFbGVtZW50ID0gJCh0aGlzLl9lbGVtZW50KS5jbG9zZXN0KFNlbGVjdG9yLlVMKVswXTtcbiAgICAgIHZhciBzZWxlY3RvciA9IFV0aWwuZ2V0U2VsZWN0b3JGcm9tRWxlbWVudCh0aGlzLl9lbGVtZW50KTtcblxuICAgICAgaWYgKHVsRWxlbWVudCkge1xuICAgICAgICBwcmV2aW91cyA9ICQubWFrZUFycmF5KCQodWxFbGVtZW50KS5maW5kKFNlbGVjdG9yLkFDVElWRSkpO1xuICAgICAgICBwcmV2aW91cyA9IHByZXZpb3VzW3ByZXZpb3VzLmxlbmd0aCAtIDFdO1xuICAgICAgfVxuXG4gICAgICB2YXIgaGlkZUV2ZW50ID0gJC5FdmVudChFdmVudC5ISURFLCB7XG4gICAgICAgIHJlbGF0ZWRUYXJnZXQ6IHRoaXMuX2VsZW1lbnRcbiAgICAgIH0pO1xuXG4gICAgICB2YXIgc2hvd0V2ZW50ID0gJC5FdmVudChFdmVudC5TSE9XLCB7XG4gICAgICAgIHJlbGF0ZWRUYXJnZXQ6IHByZXZpb3VzXG4gICAgICB9KTtcblxuICAgICAgaWYgKHByZXZpb3VzKSB7XG4gICAgICAgICQocHJldmlvdXMpLnRyaWdnZXIoaGlkZUV2ZW50KTtcbiAgICAgIH1cblxuICAgICAgJCh0aGlzLl9lbGVtZW50KS50cmlnZ2VyKHNob3dFdmVudCk7XG5cbiAgICAgIGlmIChzaG93RXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkgfHwgaGlkZUV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKHNlbGVjdG9yKSB7XG4gICAgICAgIHRhcmdldCA9ICQoc2VsZWN0b3IpWzBdO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9hY3RpdmF0ZSh0aGlzLl9lbGVtZW50LCB1bEVsZW1lbnQpO1xuXG4gICAgICB2YXIgY29tcGxldGUgPSBmdW5jdGlvbiBjb21wbGV0ZSgpIHtcbiAgICAgICAgdmFyIGhpZGRlbkV2ZW50ID0gJC5FdmVudChFdmVudC5ISURERU4sIHtcbiAgICAgICAgICByZWxhdGVkVGFyZ2V0OiBfdGhpczE1Ll9lbGVtZW50XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciBzaG93bkV2ZW50ID0gJC5FdmVudChFdmVudC5TSE9XTiwge1xuICAgICAgICAgIHJlbGF0ZWRUYXJnZXQ6IHByZXZpb3VzXG4gICAgICAgIH0pO1xuXG4gICAgICAgICQocHJldmlvdXMpLnRyaWdnZXIoaGlkZGVuRXZlbnQpO1xuICAgICAgICAkKF90aGlzMTUuX2VsZW1lbnQpLnRyaWdnZXIoc2hvd25FdmVudCk7XG4gICAgICB9O1xuXG4gICAgICBpZiAodGFyZ2V0KSB7XG4gICAgICAgIHRoaXMuX2FjdGl2YXRlKHRhcmdldCwgdGFyZ2V0LnBhcmVudE5vZGUsIGNvbXBsZXRlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbXBsZXRlKCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIFRhYi5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uIGRpc3Bvc2UoKSB7XG4gICAgICAkLnJlbW92ZUNsYXNzKHRoaXMuX2VsZW1lbnQsIERBVEFfS0VZKTtcbiAgICAgIHRoaXMuX2VsZW1lbnQgPSBudWxsO1xuICAgIH07XG5cbiAgICAvLyBwcml2YXRlXG5cbiAgICBUYWIucHJvdG90eXBlLl9hY3RpdmF0ZSA9IGZ1bmN0aW9uIF9hY3RpdmF0ZShlbGVtZW50LCBjb250YWluZXIsIGNhbGxiYWNrKSB7XG4gICAgICB2YXIgYWN0aXZlID0gJChjb250YWluZXIpLmZpbmQoU2VsZWN0b3IuQUNUSVZFX0NISUxEKVswXTtcbiAgICAgIHZhciBpc1RyYW5zaXRpb25pbmcgPSBjYWxsYmFjayAmJiBVdGlsLnN1cHBvcnRzVHJhbnNpdGlvbkVuZCgpICYmIChhY3RpdmUgJiYgJChhY3RpdmUpLmhhc0NsYXNzKENsYXNzTmFtZS5GQURFKSB8fCBCb29sZWFuKCQoY29udGFpbmVyKS5maW5kKFNlbGVjdG9yLkZBREVfQ0hJTEQpWzBdKSk7XG5cbiAgICAgIHZhciBjb21wbGV0ZSA9ICQucHJveHkodGhpcy5fdHJhbnNpdGlvbkNvbXBsZXRlLCB0aGlzLCBlbGVtZW50LCBhY3RpdmUsIGlzVHJhbnNpdGlvbmluZywgY2FsbGJhY2spO1xuXG4gICAgICBpZiAoYWN0aXZlICYmIGlzVHJhbnNpdGlvbmluZykge1xuICAgICAgICAkKGFjdGl2ZSkub25lKFV0aWwuVFJBTlNJVElPTl9FTkQsIGNvbXBsZXRlKS5lbXVsYXRlVHJhbnNpdGlvbkVuZChUUkFOU0lUSU9OX0RVUkFUSU9OKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbXBsZXRlKCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChhY3RpdmUpIHtcbiAgICAgICAgJChhY3RpdmUpLnJlbW92ZUNsYXNzKENsYXNzTmFtZS5JTik7XG4gICAgICB9XG4gICAgfTtcblxuICAgIFRhYi5wcm90b3R5cGUuX3RyYW5zaXRpb25Db21wbGV0ZSA9IGZ1bmN0aW9uIF90cmFuc2l0aW9uQ29tcGxldGUoZWxlbWVudCwgYWN0aXZlLCBpc1RyYW5zaXRpb25pbmcsIGNhbGxiYWNrKSB7XG4gICAgICBpZiAoYWN0aXZlKSB7XG4gICAgICAgICQoYWN0aXZlKS5yZW1vdmVDbGFzcyhDbGFzc05hbWUuQUNUSVZFKTtcblxuICAgICAgICB2YXIgZHJvcGRvd25DaGlsZCA9ICQoYWN0aXZlKS5maW5kKFNlbGVjdG9yLkRST1BET1dOX0FDVElWRV9DSElMRClbMF07XG5cbiAgICAgICAgaWYgKGRyb3Bkb3duQ2hpbGQpIHtcbiAgICAgICAgICAkKGRyb3Bkb3duQ2hpbGQpLnJlbW92ZUNsYXNzKENsYXNzTmFtZS5BQ1RJVkUpO1xuICAgICAgICB9XG5cbiAgICAgICAgYWN0aXZlLnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsIGZhbHNlKTtcbiAgICAgIH1cblxuICAgICAgJChlbGVtZW50KS5hZGRDbGFzcyhDbGFzc05hbWUuQUNUSVZFKTtcbiAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgdHJ1ZSk7XG5cbiAgICAgIGlmIChpc1RyYW5zaXRpb25pbmcpIHtcbiAgICAgICAgVXRpbC5yZWZsb3coZWxlbWVudCk7XG4gICAgICAgICQoZWxlbWVudCkuYWRkQ2xhc3MoQ2xhc3NOYW1lLklOKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICQoZWxlbWVudCkucmVtb3ZlQ2xhc3MoQ2xhc3NOYW1lLkZBREUpO1xuICAgICAgfVxuXG4gICAgICBpZiAoZWxlbWVudC5wYXJlbnROb2RlICYmICQoZWxlbWVudC5wYXJlbnROb2RlKS5oYXNDbGFzcyhDbGFzc05hbWUuRFJPUERPV05fTUVOVSkpIHtcblxuICAgICAgICB2YXIgZHJvcGRvd25FbGVtZW50ID0gJChlbGVtZW50KS5jbG9zZXN0KFNlbGVjdG9yLkRST1BET1dOKVswXTtcbiAgICAgICAgaWYgKGRyb3Bkb3duRWxlbWVudCkge1xuICAgICAgICAgICQoZHJvcGRvd25FbGVtZW50KS5maW5kKFNlbGVjdG9yLkRST1BET1dOX1RPR0dMRSkuYWRkQ2xhc3MoQ2xhc3NOYW1lLkFDVElWRSk7XG4gICAgICAgIH1cblxuICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsIHRydWUpO1xuICAgICAgfVxuXG4gICAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gc3RhdGljXG5cbiAgICBUYWIuX2pRdWVyeUludGVyZmFjZSA9IGZ1bmN0aW9uIF9qUXVlcnlJbnRlcmZhY2UoY29uZmlnKSB7XG4gICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcbiAgICAgICAgdmFyIGRhdGEgPSAkdGhpcy5kYXRhKERBVEFfS0VZKTtcblxuICAgICAgICBpZiAoIWRhdGEpIHtcbiAgICAgICAgICBkYXRhID0gZGF0YSA9IG5ldyBUYWIodGhpcyk7XG4gICAgICAgICAgJHRoaXMuZGF0YShEQVRBX0tFWSwgZGF0YSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHlwZW9mIGNvbmZpZyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICBpZiAoZGF0YVtjb25maWddID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gbWV0aG9kIG5hbWVkIFwiJyArIGNvbmZpZyArICdcIicpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBkYXRhW2NvbmZpZ10oKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfTtcblxuICAgIF9jcmVhdGVDbGFzcyhUYWIsIG51bGwsIFt7XG4gICAgICBrZXk6ICdWRVJTSU9OJyxcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gVkVSU0lPTjtcbiAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gVGFiO1xuICB9KCk7XG5cbiAgLyoqXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKiBEYXRhIEFwaSBpbXBsZW1lbnRhdGlvblxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICovXG5cbiAgJChkb2N1bWVudCkub24oRXZlbnQuQ0xJQ0tfREFUQV9BUEksIFNlbGVjdG9yLkRBVEFfVE9HR0xFLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIFRhYi5falF1ZXJ5SW50ZXJmYWNlLmNhbGwoJCh0aGlzKSwgJ3Nob3cnKTtcbiAgfSk7XG5cbiAgLyoqXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKiBqUXVlcnlcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqL1xuXG4gICQuZm5bTkFNRV0gPSBUYWIuX2pRdWVyeUludGVyZmFjZTtcbiAgJC5mbltOQU1FXS5Db25zdHJ1Y3RvciA9IFRhYjtcbiAgJC5mbltOQU1FXS5ub0NvbmZsaWN0ID0gZnVuY3Rpb24gKCkge1xuICAgICQuZm5bTkFNRV0gPSBKUVVFUllfTk9fQ09ORkxJQ1Q7XG4gICAgcmV0dXJuIFRhYi5falF1ZXJ5SW50ZXJmYWNlO1xuICB9O1xuXG4gIHJldHVybiBUYWI7XG59KGpRdWVyeSk7XG5cbi8qIGdsb2JhbCBUZXRoZXIgKi9cblxuLyoqXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogQm9vdHN0cmFwICh2NC4wLjAtYWxwaGEuNSk6IHRvb2x0aXAuanNcbiAqIExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2Jsb2IvbWFzdGVyL0xJQ0VOU0UpXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICovXG5cbnZhciBUb29sdGlwID0gZnVuY3Rpb24gKCQpIHtcblxuICAvKipcbiAgICogQ2hlY2sgZm9yIFRldGhlciBkZXBlbmRlbmN5XG4gICAqIFRldGhlciAtIGh0dHA6Ly90ZXRoZXIuaW8vXG4gICAqL1xuICBpZiAod2luZG93LlRldGhlciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdCb290c3RyYXAgdG9vbHRpcHMgcmVxdWlyZSBUZXRoZXIgKGh0dHA6Ly90ZXRoZXIuaW8vKScpO1xuICB9XG5cbiAgLyoqXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKiBDb25zdGFudHNcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqL1xuXG4gIHZhciBOQU1FID0gJ3Rvb2x0aXAnO1xuICB2YXIgVkVSU0lPTiA9ICc0LjAuMC1hbHBoYS41JztcbiAgdmFyIERBVEFfS0VZID0gJ2JzLnRvb2x0aXAnO1xuICB2YXIgRVZFTlRfS0VZID0gJy4nICsgREFUQV9LRVk7XG4gIHZhciBKUVVFUllfTk9fQ09ORkxJQ1QgPSAkLmZuW05BTUVdO1xuICB2YXIgVFJBTlNJVElPTl9EVVJBVElPTiA9IDE1MDtcbiAgdmFyIENMQVNTX1BSRUZJWCA9ICdicy10ZXRoZXInO1xuXG4gIHZhciBEZWZhdWx0ID0ge1xuICAgIGFuaW1hdGlvbjogdHJ1ZSxcbiAgICB0ZW1wbGF0ZTogJzxkaXYgY2xhc3M9XCJ0b29sdGlwXCIgcm9sZT1cInRvb2x0aXBcIj4nICsgJzxkaXYgY2xhc3M9XCJ0b29sdGlwLWlubmVyXCI+PC9kaXY+PC9kaXY+JyxcbiAgICB0cmlnZ2VyOiAnaG92ZXIgZm9jdXMnLFxuICAgIHRpdGxlOiAnJyxcbiAgICBkZWxheTogMCxcbiAgICBodG1sOiBmYWxzZSxcbiAgICBzZWxlY3RvcjogZmFsc2UsXG4gICAgcGxhY2VtZW50OiAndG9wJyxcbiAgICBvZmZzZXQ6ICcwIDAnLFxuICAgIGNvbnN0cmFpbnRzOiBbXVxuICB9O1xuXG4gIHZhciBEZWZhdWx0VHlwZSA9IHtcbiAgICBhbmltYXRpb246ICdib29sZWFuJyxcbiAgICB0ZW1wbGF0ZTogJ3N0cmluZycsXG4gICAgdGl0bGU6ICcoc3RyaW5nfGVsZW1lbnR8ZnVuY3Rpb24pJyxcbiAgICB0cmlnZ2VyOiAnc3RyaW5nJyxcbiAgICBkZWxheTogJyhudW1iZXJ8b2JqZWN0KScsXG4gICAgaHRtbDogJ2Jvb2xlYW4nLFxuICAgIHNlbGVjdG9yOiAnKHN0cmluZ3xib29sZWFuKScsXG4gICAgcGxhY2VtZW50OiAnKHN0cmluZ3xmdW5jdGlvbiknLFxuICAgIG9mZnNldDogJ3N0cmluZycsXG4gICAgY29uc3RyYWludHM6ICdhcnJheSdcbiAgfTtcblxuICB2YXIgQXR0YWNobWVudE1hcCA9IHtcbiAgICBUT1A6ICdib3R0b20gY2VudGVyJyxcbiAgICBSSUdIVDogJ21pZGRsZSBsZWZ0JyxcbiAgICBCT1RUT006ICd0b3AgY2VudGVyJyxcbiAgICBMRUZUOiAnbWlkZGxlIHJpZ2h0J1xuICB9O1xuXG4gIHZhciBIb3ZlclN0YXRlID0ge1xuICAgIElOOiAnaW4nLFxuICAgIE9VVDogJ291dCdcbiAgfTtcblxuICB2YXIgRXZlbnQgPSB7XG4gICAgSElERTogJ2hpZGUnICsgRVZFTlRfS0VZLFxuICAgIEhJRERFTjogJ2hpZGRlbicgKyBFVkVOVF9LRVksXG4gICAgU0hPVzogJ3Nob3cnICsgRVZFTlRfS0VZLFxuICAgIFNIT1dOOiAnc2hvd24nICsgRVZFTlRfS0VZLFxuICAgIElOU0VSVEVEOiAnaW5zZXJ0ZWQnICsgRVZFTlRfS0VZLFxuICAgIENMSUNLOiAnY2xpY2snICsgRVZFTlRfS0VZLFxuICAgIEZPQ1VTSU46ICdmb2N1c2luJyArIEVWRU5UX0tFWSxcbiAgICBGT0NVU09VVDogJ2ZvY3Vzb3V0JyArIEVWRU5UX0tFWSxcbiAgICBNT1VTRUVOVEVSOiAnbW91c2VlbnRlcicgKyBFVkVOVF9LRVksXG4gICAgTU9VU0VMRUFWRTogJ21vdXNlbGVhdmUnICsgRVZFTlRfS0VZXG4gIH07XG5cbiAgdmFyIENsYXNzTmFtZSA9IHtcbiAgICBGQURFOiAnZmFkZScsXG4gICAgSU46ICdpbidcbiAgfTtcblxuICB2YXIgU2VsZWN0b3IgPSB7XG4gICAgVE9PTFRJUDogJy50b29sdGlwJyxcbiAgICBUT09MVElQX0lOTkVSOiAnLnRvb2x0aXAtaW5uZXInXG4gIH07XG5cbiAgdmFyIFRldGhlckNsYXNzID0ge1xuICAgIGVsZW1lbnQ6IGZhbHNlLFxuICAgIGVuYWJsZWQ6IGZhbHNlXG4gIH07XG5cbiAgdmFyIFRyaWdnZXIgPSB7XG4gICAgSE9WRVI6ICdob3ZlcicsXG4gICAgRk9DVVM6ICdmb2N1cycsXG4gICAgQ0xJQ0s6ICdjbGljaycsXG4gICAgTUFOVUFMOiAnbWFudWFsJ1xuICB9O1xuXG4gIC8qKlxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICogQ2xhc3MgRGVmaW5pdGlvblxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICovXG5cbiAgdmFyIFRvb2x0aXAgPSBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gVG9vbHRpcChlbGVtZW50LCBjb25maWcpIHtcbiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBUb29sdGlwKTtcblxuICAgICAgLy8gcHJpdmF0ZVxuICAgICAgdGhpcy5faXNFbmFibGVkID0gdHJ1ZTtcbiAgICAgIHRoaXMuX3RpbWVvdXQgPSAwO1xuICAgICAgdGhpcy5faG92ZXJTdGF0ZSA9ICcnO1xuICAgICAgdGhpcy5fYWN0aXZlVHJpZ2dlciA9IHt9O1xuICAgICAgdGhpcy5fdGV0aGVyID0gbnVsbDtcblxuICAgICAgLy8gcHJvdGVjdGVkXG4gICAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuICAgICAgdGhpcy5jb25maWcgPSB0aGlzLl9nZXRDb25maWcoY29uZmlnKTtcbiAgICAgIHRoaXMudGlwID0gbnVsbDtcblxuICAgICAgdGhpcy5fc2V0TGlzdGVuZXJzKCk7XG4gICAgfVxuXG4gICAgLy8gZ2V0dGVyc1xuXG4gICAgLy8gcHVibGljXG5cbiAgICBUb29sdGlwLnByb3RvdHlwZS5lbmFibGUgPSBmdW5jdGlvbiBlbmFibGUoKSB7XG4gICAgICB0aGlzLl9pc0VuYWJsZWQgPSB0cnVlO1xuICAgIH07XG5cbiAgICBUb29sdGlwLnByb3RvdHlwZS5kaXNhYmxlID0gZnVuY3Rpb24gZGlzYWJsZSgpIHtcbiAgICAgIHRoaXMuX2lzRW5hYmxlZCA9IGZhbHNlO1xuICAgIH07XG5cbiAgICBUb29sdGlwLnByb3RvdHlwZS50b2dnbGVFbmFibGVkID0gZnVuY3Rpb24gdG9nZ2xlRW5hYmxlZCgpIHtcbiAgICAgIHRoaXMuX2lzRW5hYmxlZCA9ICF0aGlzLl9pc0VuYWJsZWQ7XG4gICAgfTtcblxuICAgIFRvb2x0aXAucHJvdG90eXBlLnRvZ2dsZSA9IGZ1bmN0aW9uIHRvZ2dsZShldmVudCkge1xuICAgICAgaWYgKGV2ZW50KSB7XG4gICAgICAgIHZhciBkYXRhS2V5ID0gdGhpcy5jb25zdHJ1Y3Rvci5EQVRBX0tFWTtcbiAgICAgICAgdmFyIGNvbnRleHQgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLmRhdGEoZGF0YUtleSk7XG5cbiAgICAgICAgaWYgKCFjb250ZXh0KSB7XG4gICAgICAgICAgY29udGV4dCA9IG5ldyB0aGlzLmNvbnN0cnVjdG9yKGV2ZW50LmN1cnJlbnRUYXJnZXQsIHRoaXMuX2dldERlbGVnYXRlQ29uZmlnKCkpO1xuICAgICAgICAgICQoZXZlbnQuY3VycmVudFRhcmdldCkuZGF0YShkYXRhS2V5LCBjb250ZXh0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnRleHQuX2FjdGl2ZVRyaWdnZXIuY2xpY2sgPSAhY29udGV4dC5fYWN0aXZlVHJpZ2dlci5jbGljaztcblxuICAgICAgICBpZiAoY29udGV4dC5faXNXaXRoQWN0aXZlVHJpZ2dlcigpKSB7XG4gICAgICAgICAgY29udGV4dC5fZW50ZXIobnVsbCwgY29udGV4dCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29udGV4dC5fbGVhdmUobnVsbCwgY29udGV4dCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgaWYgKCQodGhpcy5nZXRUaXBFbGVtZW50KCkpLmhhc0NsYXNzKENsYXNzTmFtZS5JTikpIHtcbiAgICAgICAgICB0aGlzLl9sZWF2ZShudWxsLCB0aGlzKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9lbnRlcihudWxsLCB0aGlzKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgVG9vbHRpcC5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uIGRpc3Bvc2UoKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5fdGltZW91dCk7XG5cbiAgICAgIHRoaXMuY2xlYW51cFRldGhlcigpO1xuXG4gICAgICAkLnJlbW92ZURhdGEodGhpcy5lbGVtZW50LCB0aGlzLmNvbnN0cnVjdG9yLkRBVEFfS0VZKTtcblxuICAgICAgJCh0aGlzLmVsZW1lbnQpLm9mZih0aGlzLmNvbnN0cnVjdG9yLkVWRU5UX0tFWSk7XG5cbiAgICAgIGlmICh0aGlzLnRpcCkge1xuICAgICAgICAkKHRoaXMudGlwKS5yZW1vdmUoKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5faXNFbmFibGVkID0gbnVsbDtcbiAgICAgIHRoaXMuX3RpbWVvdXQgPSBudWxsO1xuICAgICAgdGhpcy5faG92ZXJTdGF0ZSA9IG51bGw7XG4gICAgICB0aGlzLl9hY3RpdmVUcmlnZ2VyID0gbnVsbDtcbiAgICAgIHRoaXMuX3RldGhlciA9IG51bGw7XG5cbiAgICAgIHRoaXMuZWxlbWVudCA9IG51bGw7XG4gICAgICB0aGlzLmNvbmZpZyA9IG51bGw7XG4gICAgICB0aGlzLnRpcCA9IG51bGw7XG4gICAgfTtcblxuICAgIFRvb2x0aXAucHJvdG90eXBlLnNob3cgPSBmdW5jdGlvbiBzaG93KCkge1xuICAgICAgdmFyIF90aGlzMTYgPSB0aGlzO1xuXG4gICAgICB2YXIgc2hvd0V2ZW50ID0gJC5FdmVudCh0aGlzLmNvbnN0cnVjdG9yLkV2ZW50LlNIT1cpO1xuXG4gICAgICBpZiAodGhpcy5pc1dpdGhDb250ZW50KCkgJiYgdGhpcy5faXNFbmFibGVkKSB7XG4gICAgICAgICQodGhpcy5lbGVtZW50KS50cmlnZ2VyKHNob3dFdmVudCk7XG5cbiAgICAgICAgdmFyIGlzSW5UaGVEb20gPSAkLmNvbnRhaW5zKHRoaXMuZWxlbWVudC5vd25lckRvY3VtZW50LmRvY3VtZW50RWxlbWVudCwgdGhpcy5lbGVtZW50KTtcblxuICAgICAgICBpZiAoc2hvd0V2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpIHx8ICFpc0luVGhlRG9tKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHRpcCA9IHRoaXMuZ2V0VGlwRWxlbWVudCgpO1xuICAgICAgICB2YXIgdGlwSWQgPSBVdGlsLmdldFVJRCh0aGlzLmNvbnN0cnVjdG9yLk5BTUUpO1xuXG4gICAgICAgIHRpcC5zZXRBdHRyaWJ1dGUoJ2lkJywgdGlwSWQpO1xuICAgICAgICB0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLWRlc2NyaWJlZGJ5JywgdGlwSWQpO1xuXG4gICAgICAgIHRoaXMuc2V0Q29udGVudCgpO1xuXG4gICAgICAgIGlmICh0aGlzLmNvbmZpZy5hbmltYXRpb24pIHtcbiAgICAgICAgICAkKHRpcCkuYWRkQ2xhc3MoQ2xhc3NOYW1lLkZBREUpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHBsYWNlbWVudCA9IHR5cGVvZiB0aGlzLmNvbmZpZy5wbGFjZW1lbnQgPT09ICdmdW5jdGlvbicgPyB0aGlzLmNvbmZpZy5wbGFjZW1lbnQuY2FsbCh0aGlzLCB0aXAsIHRoaXMuZWxlbWVudCkgOiB0aGlzLmNvbmZpZy5wbGFjZW1lbnQ7XG5cbiAgICAgICAgdmFyIGF0dGFjaG1lbnQgPSB0aGlzLl9nZXRBdHRhY2htZW50KHBsYWNlbWVudCk7XG5cbiAgICAgICAgJCh0aXApLmRhdGEodGhpcy5jb25zdHJ1Y3Rvci5EQVRBX0tFWSwgdGhpcykuYXBwZW5kVG8oZG9jdW1lbnQuYm9keSk7XG5cbiAgICAgICAgJCh0aGlzLmVsZW1lbnQpLnRyaWdnZXIodGhpcy5jb25zdHJ1Y3Rvci5FdmVudC5JTlNFUlRFRCk7XG5cbiAgICAgICAgdGhpcy5fdGV0aGVyID0gbmV3IFRldGhlcih7XG4gICAgICAgICAgYXR0YWNobWVudDogYXR0YWNobWVudCxcbiAgICAgICAgICBlbGVtZW50OiB0aXAsXG4gICAgICAgICAgdGFyZ2V0OiB0aGlzLmVsZW1lbnQsXG4gICAgICAgICAgY2xhc3NlczogVGV0aGVyQ2xhc3MsXG4gICAgICAgICAgY2xhc3NQcmVmaXg6IENMQVNTX1BSRUZJWCxcbiAgICAgICAgICBvZmZzZXQ6IHRoaXMuY29uZmlnLm9mZnNldCxcbiAgICAgICAgICBjb25zdHJhaW50czogdGhpcy5jb25maWcuY29uc3RyYWludHMsXG4gICAgICAgICAgYWRkVGFyZ2V0Q2xhc3NlczogZmFsc2VcbiAgICAgICAgfSk7XG5cbiAgICAgICAgVXRpbC5yZWZsb3codGlwKTtcbiAgICAgICAgdGhpcy5fdGV0aGVyLnBvc2l0aW9uKCk7XG5cbiAgICAgICAgJCh0aXApLmFkZENsYXNzKENsYXNzTmFtZS5JTik7XG5cbiAgICAgICAgdmFyIGNvbXBsZXRlID0gZnVuY3Rpb24gY29tcGxldGUoKSB7XG4gICAgICAgICAgdmFyIHByZXZIb3ZlclN0YXRlID0gX3RoaXMxNi5faG92ZXJTdGF0ZTtcbiAgICAgICAgICBfdGhpczE2Ll9ob3ZlclN0YXRlID0gbnVsbDtcblxuICAgICAgICAgICQoX3RoaXMxNi5lbGVtZW50KS50cmlnZ2VyKF90aGlzMTYuY29uc3RydWN0b3IuRXZlbnQuU0hPV04pO1xuXG4gICAgICAgICAgaWYgKHByZXZIb3ZlclN0YXRlID09PSBIb3ZlclN0YXRlLk9VVCkge1xuICAgICAgICAgICAgX3RoaXMxNi5fbGVhdmUobnVsbCwgX3RoaXMxNik7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChVdGlsLnN1cHBvcnRzVHJhbnNpdGlvbkVuZCgpICYmICQodGhpcy50aXApLmhhc0NsYXNzKENsYXNzTmFtZS5GQURFKSkge1xuICAgICAgICAgICQodGhpcy50aXApLm9uZShVdGlsLlRSQU5TSVRJT05fRU5ELCBjb21wbGV0ZSkuZW11bGF0ZVRyYW5zaXRpb25FbmQoVG9vbHRpcC5fVFJBTlNJVElPTl9EVVJBVElPTik7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29tcGxldGUoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgVG9vbHRpcC5wcm90b3R5cGUuaGlkZSA9IGZ1bmN0aW9uIGhpZGUoY2FsbGJhY2spIHtcbiAgICAgIHZhciBfdGhpczE3ID0gdGhpcztcblxuICAgICAgdmFyIHRpcCA9IHRoaXMuZ2V0VGlwRWxlbWVudCgpO1xuICAgICAgdmFyIGhpZGVFdmVudCA9ICQuRXZlbnQodGhpcy5jb25zdHJ1Y3Rvci5FdmVudC5ISURFKTtcbiAgICAgIHZhciBjb21wbGV0ZSA9IGZ1bmN0aW9uIGNvbXBsZXRlKCkge1xuICAgICAgICBpZiAoX3RoaXMxNy5faG92ZXJTdGF0ZSAhPT0gSG92ZXJTdGF0ZS5JTiAmJiB0aXAucGFyZW50Tm9kZSkge1xuICAgICAgICAgIHRpcC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRpcCk7XG4gICAgICAgIH1cblxuICAgICAgICBfdGhpczE3LmVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdhcmlhLWRlc2NyaWJlZGJ5Jyk7XG4gICAgICAgICQoX3RoaXMxNy5lbGVtZW50KS50cmlnZ2VyKF90aGlzMTcuY29uc3RydWN0b3IuRXZlbnQuSElEREVOKTtcbiAgICAgICAgX3RoaXMxNy5jbGVhbnVwVGV0aGVyKCk7XG5cbiAgICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgJCh0aGlzLmVsZW1lbnQpLnRyaWdnZXIoaGlkZUV2ZW50KTtcblxuICAgICAgaWYgKGhpZGVFdmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgICQodGlwKS5yZW1vdmVDbGFzcyhDbGFzc05hbWUuSU4pO1xuXG4gICAgICBpZiAoVXRpbC5zdXBwb3J0c1RyYW5zaXRpb25FbmQoKSAmJiAkKHRoaXMudGlwKS5oYXNDbGFzcyhDbGFzc05hbWUuRkFERSkpIHtcblxuICAgICAgICAkKHRpcCkub25lKFV0aWwuVFJBTlNJVElPTl9FTkQsIGNvbXBsZXRlKS5lbXVsYXRlVHJhbnNpdGlvbkVuZChUUkFOU0lUSU9OX0RVUkFUSU9OKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbXBsZXRlKCk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX2hvdmVyU3RhdGUgPSAnJztcbiAgICB9O1xuXG4gICAgLy8gcHJvdGVjdGVkXG5cbiAgICBUb29sdGlwLnByb3RvdHlwZS5pc1dpdGhDb250ZW50ID0gZnVuY3Rpb24gaXNXaXRoQ29udGVudCgpIHtcbiAgICAgIHJldHVybiBCb29sZWFuKHRoaXMuZ2V0VGl0bGUoKSk7XG4gICAgfTtcblxuICAgIFRvb2x0aXAucHJvdG90eXBlLmdldFRpcEVsZW1lbnQgPSBmdW5jdGlvbiBnZXRUaXBFbGVtZW50KCkge1xuICAgICAgcmV0dXJuIHRoaXMudGlwID0gdGhpcy50aXAgfHwgJCh0aGlzLmNvbmZpZy50ZW1wbGF0ZSlbMF07XG4gICAgfTtcblxuICAgIFRvb2x0aXAucHJvdG90eXBlLnNldENvbnRlbnQgPSBmdW5jdGlvbiBzZXRDb250ZW50KCkge1xuICAgICAgdmFyICR0aXAgPSAkKHRoaXMuZ2V0VGlwRWxlbWVudCgpKTtcblxuICAgICAgdGhpcy5zZXRFbGVtZW50Q29udGVudCgkdGlwLmZpbmQoU2VsZWN0b3IuVE9PTFRJUF9JTk5FUiksIHRoaXMuZ2V0VGl0bGUoKSk7XG5cbiAgICAgICR0aXAucmVtb3ZlQ2xhc3MoQ2xhc3NOYW1lLkZBREUpLnJlbW92ZUNsYXNzKENsYXNzTmFtZS5JTik7XG5cbiAgICAgIHRoaXMuY2xlYW51cFRldGhlcigpO1xuICAgIH07XG5cbiAgICBUb29sdGlwLnByb3RvdHlwZS5zZXRFbGVtZW50Q29udGVudCA9IGZ1bmN0aW9uIHNldEVsZW1lbnRDb250ZW50KCRlbGVtZW50LCBjb250ZW50KSB7XG4gICAgICB2YXIgaHRtbCA9IHRoaXMuY29uZmlnLmh0bWw7XG4gICAgICBpZiAoKHR5cGVvZiBjb250ZW50ID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihjb250ZW50KSkgPT09ICdvYmplY3QnICYmIChjb250ZW50Lm5vZGVUeXBlIHx8IGNvbnRlbnQuanF1ZXJ5KSkge1xuICAgICAgICAvLyBjb250ZW50IGlzIGEgRE9NIG5vZGUgb3IgYSBqUXVlcnlcbiAgICAgICAgaWYgKGh0bWwpIHtcbiAgICAgICAgICBpZiAoISQoY29udGVudCkucGFyZW50KCkuaXMoJGVsZW1lbnQpKSB7XG4gICAgICAgICAgICAkZWxlbWVudC5lbXB0eSgpLmFwcGVuZChjb250ZW50KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJGVsZW1lbnQudGV4dCgkKGNvbnRlbnQpLnRleHQoKSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICRlbGVtZW50W2h0bWwgPyAnaHRtbCcgOiAndGV4dCddKGNvbnRlbnQpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBUb29sdGlwLnByb3RvdHlwZS5nZXRUaXRsZSA9IGZ1bmN0aW9uIGdldFRpdGxlKCkge1xuICAgICAgdmFyIHRpdGxlID0gdGhpcy5lbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1vcmlnaW5hbC10aXRsZScpO1xuXG4gICAgICBpZiAoIXRpdGxlKSB7XG4gICAgICAgIHRpdGxlID0gdHlwZW9mIHRoaXMuY29uZmlnLnRpdGxlID09PSAnZnVuY3Rpb24nID8gdGhpcy5jb25maWcudGl0bGUuY2FsbCh0aGlzLmVsZW1lbnQpIDogdGhpcy5jb25maWcudGl0bGU7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aXRsZTtcbiAgICB9O1xuXG4gICAgVG9vbHRpcC5wcm90b3R5cGUuY2xlYW51cFRldGhlciA9IGZ1bmN0aW9uIGNsZWFudXBUZXRoZXIoKSB7XG4gICAgICBpZiAodGhpcy5fdGV0aGVyKSB7XG4gICAgICAgIHRoaXMuX3RldGhlci5kZXN0cm95KCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8vIHByaXZhdGVcblxuICAgIFRvb2x0aXAucHJvdG90eXBlLl9nZXRBdHRhY2htZW50ID0gZnVuY3Rpb24gX2dldEF0dGFjaG1lbnQocGxhY2VtZW50KSB7XG4gICAgICByZXR1cm4gQXR0YWNobWVudE1hcFtwbGFjZW1lbnQudG9VcHBlckNhc2UoKV07XG4gICAgfTtcblxuICAgIFRvb2x0aXAucHJvdG90eXBlLl9zZXRMaXN0ZW5lcnMgPSBmdW5jdGlvbiBfc2V0TGlzdGVuZXJzKCkge1xuICAgICAgdmFyIF90aGlzMTggPSB0aGlzO1xuXG4gICAgICB2YXIgdHJpZ2dlcnMgPSB0aGlzLmNvbmZpZy50cmlnZ2VyLnNwbGl0KCcgJyk7XG5cbiAgICAgIHRyaWdnZXJzLmZvckVhY2goZnVuY3Rpb24gKHRyaWdnZXIpIHtcbiAgICAgICAgaWYgKHRyaWdnZXIgPT09ICdjbGljaycpIHtcbiAgICAgICAgICAkKF90aGlzMTguZWxlbWVudCkub24oX3RoaXMxOC5jb25zdHJ1Y3Rvci5FdmVudC5DTElDSywgX3RoaXMxOC5jb25maWcuc2VsZWN0b3IsICQucHJveHkoX3RoaXMxOC50b2dnbGUsIF90aGlzMTgpKTtcbiAgICAgICAgfSBlbHNlIGlmICh0cmlnZ2VyICE9PSBUcmlnZ2VyLk1BTlVBTCkge1xuICAgICAgICAgIHZhciBldmVudEluID0gdHJpZ2dlciA9PT0gVHJpZ2dlci5IT1ZFUiA/IF90aGlzMTguY29uc3RydWN0b3IuRXZlbnQuTU9VU0VFTlRFUiA6IF90aGlzMTguY29uc3RydWN0b3IuRXZlbnQuRk9DVVNJTjtcbiAgICAgICAgICB2YXIgZXZlbnRPdXQgPSB0cmlnZ2VyID09PSBUcmlnZ2VyLkhPVkVSID8gX3RoaXMxOC5jb25zdHJ1Y3Rvci5FdmVudC5NT1VTRUxFQVZFIDogX3RoaXMxOC5jb25zdHJ1Y3Rvci5FdmVudC5GT0NVU09VVDtcblxuICAgICAgICAgICQoX3RoaXMxOC5lbGVtZW50KS5vbihldmVudEluLCBfdGhpczE4LmNvbmZpZy5zZWxlY3RvciwgJC5wcm94eShfdGhpczE4Ll9lbnRlciwgX3RoaXMxOCkpLm9uKGV2ZW50T3V0LCBfdGhpczE4LmNvbmZpZy5zZWxlY3RvciwgJC5wcm94eShfdGhpczE4Ll9sZWF2ZSwgX3RoaXMxOCkpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgaWYgKHRoaXMuY29uZmlnLnNlbGVjdG9yKSB7XG4gICAgICAgIHRoaXMuY29uZmlnID0gJC5leHRlbmQoe30sIHRoaXMuY29uZmlnLCB7XG4gICAgICAgICAgdHJpZ2dlcjogJ21hbnVhbCcsXG4gICAgICAgICAgc2VsZWN0b3I6ICcnXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fZml4VGl0bGUoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgVG9vbHRpcC5wcm90b3R5cGUuX2ZpeFRpdGxlID0gZnVuY3Rpb24gX2ZpeFRpdGxlKCkge1xuICAgICAgdmFyIHRpdGxlVHlwZSA9IF90eXBlb2YodGhpcy5lbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1vcmlnaW5hbC10aXRsZScpKTtcbiAgICAgIGlmICh0aGlzLmVsZW1lbnQuZ2V0QXR0cmlidXRlKCd0aXRsZScpIHx8IHRpdGxlVHlwZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZSgnZGF0YS1vcmlnaW5hbC10aXRsZScsIHRoaXMuZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ3RpdGxlJykgfHwgJycpO1xuICAgICAgICB0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKCd0aXRsZScsICcnKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgVG9vbHRpcC5wcm90b3R5cGUuX2VudGVyID0gZnVuY3Rpb24gX2VudGVyKGV2ZW50LCBjb250ZXh0KSB7XG4gICAgICB2YXIgZGF0YUtleSA9IHRoaXMuY29uc3RydWN0b3IuREFUQV9LRVk7XG5cbiAgICAgIGNvbnRleHQgPSBjb250ZXh0IHx8ICQoZXZlbnQuY3VycmVudFRhcmdldCkuZGF0YShkYXRhS2V5KTtcblxuICAgICAgaWYgKCFjb250ZXh0KSB7XG4gICAgICAgIGNvbnRleHQgPSBuZXcgdGhpcy5jb25zdHJ1Y3RvcihldmVudC5jdXJyZW50VGFyZ2V0LCB0aGlzLl9nZXREZWxlZ2F0ZUNvbmZpZygpKTtcbiAgICAgICAgJChldmVudC5jdXJyZW50VGFyZ2V0KS5kYXRhKGRhdGFLZXksIGNvbnRleHQpO1xuICAgICAgfVxuXG4gICAgICBpZiAoZXZlbnQpIHtcbiAgICAgICAgY29udGV4dC5fYWN0aXZlVHJpZ2dlcltldmVudC50eXBlID09PSAnZm9jdXNpbicgPyBUcmlnZ2VyLkZPQ1VTIDogVHJpZ2dlci5IT1ZFUl0gPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAoJChjb250ZXh0LmdldFRpcEVsZW1lbnQoKSkuaGFzQ2xhc3MoQ2xhc3NOYW1lLklOKSB8fCBjb250ZXh0Ll9ob3ZlclN0YXRlID09PSBIb3ZlclN0YXRlLklOKSB7XG4gICAgICAgIGNvbnRleHQuX2hvdmVyU3RhdGUgPSBIb3ZlclN0YXRlLklOO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNsZWFyVGltZW91dChjb250ZXh0Ll90aW1lb3V0KTtcblxuICAgICAgY29udGV4dC5faG92ZXJTdGF0ZSA9IEhvdmVyU3RhdGUuSU47XG5cbiAgICAgIGlmICghY29udGV4dC5jb25maWcuZGVsYXkgfHwgIWNvbnRleHQuY29uZmlnLmRlbGF5LnNob3cpIHtcbiAgICAgICAgY29udGV4dC5zaG93KCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29udGV4dC5fdGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoY29udGV4dC5faG92ZXJTdGF0ZSA9PT0gSG92ZXJTdGF0ZS5JTikge1xuICAgICAgICAgIGNvbnRleHQuc2hvdygpO1xuICAgICAgICB9XG4gICAgICB9LCBjb250ZXh0LmNvbmZpZy5kZWxheS5zaG93KTtcbiAgICB9O1xuXG4gICAgVG9vbHRpcC5wcm90b3R5cGUuX2xlYXZlID0gZnVuY3Rpb24gX2xlYXZlKGV2ZW50LCBjb250ZXh0KSB7XG4gICAgICB2YXIgZGF0YUtleSA9IHRoaXMuY29uc3RydWN0b3IuREFUQV9LRVk7XG5cbiAgICAgIGNvbnRleHQgPSBjb250ZXh0IHx8ICQoZXZlbnQuY3VycmVudFRhcmdldCkuZGF0YShkYXRhS2V5KTtcblxuICAgICAgaWYgKCFjb250ZXh0KSB7XG4gICAgICAgIGNvbnRleHQgPSBuZXcgdGhpcy5jb25zdHJ1Y3RvcihldmVudC5jdXJyZW50VGFyZ2V0LCB0aGlzLl9nZXREZWxlZ2F0ZUNvbmZpZygpKTtcbiAgICAgICAgJChldmVudC5jdXJyZW50VGFyZ2V0KS5kYXRhKGRhdGFLZXksIGNvbnRleHQpO1xuICAgICAgfVxuXG4gICAgICBpZiAoZXZlbnQpIHtcbiAgICAgICAgY29udGV4dC5fYWN0aXZlVHJpZ2dlcltldmVudC50eXBlID09PSAnZm9jdXNvdXQnID8gVHJpZ2dlci5GT0NVUyA6IFRyaWdnZXIuSE9WRVJdID0gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGlmIChjb250ZXh0Ll9pc1dpdGhBY3RpdmVUcmlnZ2VyKCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjbGVhclRpbWVvdXQoY29udGV4dC5fdGltZW91dCk7XG5cbiAgICAgIGNvbnRleHQuX2hvdmVyU3RhdGUgPSBIb3ZlclN0YXRlLk9VVDtcblxuICAgICAgaWYgKCFjb250ZXh0LmNvbmZpZy5kZWxheSB8fCAhY29udGV4dC5jb25maWcuZGVsYXkuaGlkZSkge1xuICAgICAgICBjb250ZXh0LmhpZGUoKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb250ZXh0Ll90aW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChjb250ZXh0Ll9ob3ZlclN0YXRlID09PSBIb3ZlclN0YXRlLk9VVCkge1xuICAgICAgICAgIGNvbnRleHQuaGlkZSgpO1xuICAgICAgICB9XG4gICAgICB9LCBjb250ZXh0LmNvbmZpZy5kZWxheS5oaWRlKTtcbiAgICB9O1xuXG4gICAgVG9vbHRpcC5wcm90b3R5cGUuX2lzV2l0aEFjdGl2ZVRyaWdnZXIgPSBmdW5jdGlvbiBfaXNXaXRoQWN0aXZlVHJpZ2dlcigpIHtcbiAgICAgIGZvciAodmFyIHRyaWdnZXIgaW4gdGhpcy5fYWN0aXZlVHJpZ2dlcikge1xuICAgICAgICBpZiAodGhpcy5fYWN0aXZlVHJpZ2dlclt0cmlnZ2VyXSkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuXG4gICAgVG9vbHRpcC5wcm90b3R5cGUuX2dldENvbmZpZyA9IGZ1bmN0aW9uIF9nZXRDb25maWcoY29uZmlnKSB7XG4gICAgICBjb25maWcgPSAkLmV4dGVuZCh7fSwgdGhpcy5jb25zdHJ1Y3Rvci5EZWZhdWx0LCAkKHRoaXMuZWxlbWVudCkuZGF0YSgpLCBjb25maWcpO1xuXG4gICAgICBpZiAoY29uZmlnLmRlbGF5ICYmIHR5cGVvZiBjb25maWcuZGVsYXkgPT09ICdudW1iZXInKSB7XG4gICAgICAgIGNvbmZpZy5kZWxheSA9IHtcbiAgICAgICAgICBzaG93OiBjb25maWcuZGVsYXksXG4gICAgICAgICAgaGlkZTogY29uZmlnLmRlbGF5XG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIFV0aWwudHlwZUNoZWNrQ29uZmlnKE5BTUUsIGNvbmZpZywgdGhpcy5jb25zdHJ1Y3Rvci5EZWZhdWx0VHlwZSk7XG5cbiAgICAgIHJldHVybiBjb25maWc7XG4gICAgfTtcblxuICAgIFRvb2x0aXAucHJvdG90eXBlLl9nZXREZWxlZ2F0ZUNvbmZpZyA9IGZ1bmN0aW9uIF9nZXREZWxlZ2F0ZUNvbmZpZygpIHtcbiAgICAgIHZhciBjb25maWcgPSB7fTtcblxuICAgICAgaWYgKHRoaXMuY29uZmlnKSB7XG4gICAgICAgIGZvciAodmFyIGtleSBpbiB0aGlzLmNvbmZpZykge1xuICAgICAgICAgIGlmICh0aGlzLmNvbnN0cnVjdG9yLkRlZmF1bHRba2V5XSAhPT0gdGhpcy5jb25maWdba2V5XSkge1xuICAgICAgICAgICAgY29uZmlnW2tleV0gPSB0aGlzLmNvbmZpZ1trZXldO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gY29uZmlnO1xuICAgIH07XG5cbiAgICAvLyBzdGF0aWNcblxuICAgIFRvb2x0aXAuX2pRdWVyeUludGVyZmFjZSA9IGZ1bmN0aW9uIF9qUXVlcnlJbnRlcmZhY2UoY29uZmlnKSB7XG4gICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGRhdGEgPSAkKHRoaXMpLmRhdGEoREFUQV9LRVkpO1xuICAgICAgICB2YXIgX2NvbmZpZyA9ICh0eXBlb2YgY29uZmlnID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihjb25maWcpKSA9PT0gJ29iamVjdCcgPyBjb25maWcgOiBudWxsO1xuXG4gICAgICAgIGlmICghZGF0YSAmJiAvZGlzcG9zZXxoaWRlLy50ZXN0KGNvbmZpZykpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWRhdGEpIHtcbiAgICAgICAgICBkYXRhID0gbmV3IFRvb2x0aXAodGhpcywgX2NvbmZpZyk7XG4gICAgICAgICAgJCh0aGlzKS5kYXRhKERBVEFfS0VZLCBkYXRhKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0eXBlb2YgY29uZmlnID09PSAnc3RyaW5nJykge1xuICAgICAgICAgIGlmIChkYXRhW2NvbmZpZ10gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBtZXRob2QgbmFtZWQgXCInICsgY29uZmlnICsgJ1wiJyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGRhdGFbY29uZmlnXSgpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgX2NyZWF0ZUNsYXNzKFRvb2x0aXAsIG51bGwsIFt7XG4gICAgICBrZXk6ICdWRVJTSU9OJyxcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gVkVSU0lPTjtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6ICdEZWZhdWx0JyxcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gRGVmYXVsdDtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6ICdOQU1FJyxcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gTkFNRTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6ICdEQVRBX0tFWScsXG4gICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIERBVEFfS0VZO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogJ0V2ZW50JyxcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gRXZlbnQ7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiAnRVZFTlRfS0VZJyxcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gRVZFTlRfS0VZO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogJ0RlZmF1bHRUeXBlJyxcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gRGVmYXVsdFR5cGU7XG4gICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIFRvb2x0aXA7XG4gIH0oKTtcblxuICAvKipcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqIGpRdWVyeVxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICovXG5cbiAgJC5mbltOQU1FXSA9IFRvb2x0aXAuX2pRdWVyeUludGVyZmFjZTtcbiAgJC5mbltOQU1FXS5Db25zdHJ1Y3RvciA9IFRvb2x0aXA7XG4gICQuZm5bTkFNRV0ubm9Db25mbGljdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAkLmZuW05BTUVdID0gSlFVRVJZX05PX0NPTkZMSUNUO1xuICAgIHJldHVybiBUb29sdGlwLl9qUXVlcnlJbnRlcmZhY2U7XG4gIH07XG5cbiAgcmV0dXJuIFRvb2x0aXA7XG59KGpRdWVyeSk7XG5cbi8qKlxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIEJvb3RzdHJhcCAodjQuMC4wLWFscGhhLjUpOiBwb3BvdmVyLmpzXG4gKiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ibG9iL21hc3Rlci9MSUNFTlNFKVxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqL1xuXG52YXIgUG9wb3ZlciA9IGZ1bmN0aW9uICgkKSB7XG5cbiAgLyoqXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKiBDb25zdGFudHNcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqL1xuXG4gIHZhciBOQU1FID0gJ3BvcG92ZXInO1xuICB2YXIgVkVSU0lPTiA9ICc0LjAuMC1hbHBoYS41JztcbiAgdmFyIERBVEFfS0VZID0gJ2JzLnBvcG92ZXInO1xuICB2YXIgRVZFTlRfS0VZID0gJy4nICsgREFUQV9LRVk7XG4gIHZhciBKUVVFUllfTk9fQ09ORkxJQ1QgPSAkLmZuW05BTUVdO1xuXG4gIHZhciBEZWZhdWx0ID0gJC5leHRlbmQoe30sIFRvb2x0aXAuRGVmYXVsdCwge1xuICAgIHBsYWNlbWVudDogJ3JpZ2h0JyxcbiAgICB0cmlnZ2VyOiAnY2xpY2snLFxuICAgIGNvbnRlbnQ6ICcnLFxuICAgIHRlbXBsYXRlOiAnPGRpdiBjbGFzcz1cInBvcG92ZXJcIiByb2xlPVwidG9vbHRpcFwiPicgKyAnPGgzIGNsYXNzPVwicG9wb3Zlci10aXRsZVwiPjwvaDM+JyArICc8ZGl2IGNsYXNzPVwicG9wb3Zlci1jb250ZW50XCI+PC9kaXY+PC9kaXY+J1xuICB9KTtcblxuICB2YXIgRGVmYXVsdFR5cGUgPSAkLmV4dGVuZCh7fSwgVG9vbHRpcC5EZWZhdWx0VHlwZSwge1xuICAgIGNvbnRlbnQ6ICcoc3RyaW5nfGVsZW1lbnR8ZnVuY3Rpb24pJ1xuICB9KTtcblxuICB2YXIgQ2xhc3NOYW1lID0ge1xuICAgIEZBREU6ICdmYWRlJyxcbiAgICBJTjogJ2luJ1xuICB9O1xuXG4gIHZhciBTZWxlY3RvciA9IHtcbiAgICBUSVRMRTogJy5wb3BvdmVyLXRpdGxlJyxcbiAgICBDT05URU5UOiAnLnBvcG92ZXItY29udGVudCdcbiAgfTtcblxuICB2YXIgRXZlbnQgPSB7XG4gICAgSElERTogJ2hpZGUnICsgRVZFTlRfS0VZLFxuICAgIEhJRERFTjogJ2hpZGRlbicgKyBFVkVOVF9LRVksXG4gICAgU0hPVzogJ3Nob3cnICsgRVZFTlRfS0VZLFxuICAgIFNIT1dOOiAnc2hvd24nICsgRVZFTlRfS0VZLFxuICAgIElOU0VSVEVEOiAnaW5zZXJ0ZWQnICsgRVZFTlRfS0VZLFxuICAgIENMSUNLOiAnY2xpY2snICsgRVZFTlRfS0VZLFxuICAgIEZPQ1VTSU46ICdmb2N1c2luJyArIEVWRU5UX0tFWSxcbiAgICBGT0NVU09VVDogJ2ZvY3Vzb3V0JyArIEVWRU5UX0tFWSxcbiAgICBNT1VTRUVOVEVSOiAnbW91c2VlbnRlcicgKyBFVkVOVF9LRVksXG4gICAgTU9VU0VMRUFWRTogJ21vdXNlbGVhdmUnICsgRVZFTlRfS0VZXG4gIH07XG5cbiAgLyoqXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKiBDbGFzcyBEZWZpbml0aW9uXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKi9cblxuICB2YXIgUG9wb3ZlciA9IGZ1bmN0aW9uIChfVG9vbHRpcCkge1xuICAgIF9pbmhlcml0cyhQb3BvdmVyLCBfVG9vbHRpcCk7XG5cbiAgICBmdW5jdGlvbiBQb3BvdmVyKCkge1xuICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFBvcG92ZXIpO1xuXG4gICAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgX1Rvb2x0aXAuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG4gICAgfVxuXG4gICAgLy8gb3ZlcnJpZGVzXG5cbiAgICBQb3BvdmVyLnByb3RvdHlwZS5pc1dpdGhDb250ZW50ID0gZnVuY3Rpb24gaXNXaXRoQ29udGVudCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmdldFRpdGxlKCkgfHwgdGhpcy5fZ2V0Q29udGVudCgpO1xuICAgIH07XG5cbiAgICBQb3BvdmVyLnByb3RvdHlwZS5nZXRUaXBFbGVtZW50ID0gZnVuY3Rpb24gZ2V0VGlwRWxlbWVudCgpIHtcbiAgICAgIHJldHVybiB0aGlzLnRpcCA9IHRoaXMudGlwIHx8ICQodGhpcy5jb25maWcudGVtcGxhdGUpWzBdO1xuICAgIH07XG5cbiAgICBQb3BvdmVyLnByb3RvdHlwZS5zZXRDb250ZW50ID0gZnVuY3Rpb24gc2V0Q29udGVudCgpIHtcbiAgICAgIHZhciAkdGlwID0gJCh0aGlzLmdldFRpcEVsZW1lbnQoKSk7XG5cbiAgICAgIC8vIHdlIHVzZSBhcHBlbmQgZm9yIGh0bWwgb2JqZWN0cyB0byBtYWludGFpbiBqcyBldmVudHNcbiAgICAgIHRoaXMuc2V0RWxlbWVudENvbnRlbnQoJHRpcC5maW5kKFNlbGVjdG9yLlRJVExFKSwgdGhpcy5nZXRUaXRsZSgpKTtcbiAgICAgIHRoaXMuc2V0RWxlbWVudENvbnRlbnQoJHRpcC5maW5kKFNlbGVjdG9yLkNPTlRFTlQpLCB0aGlzLl9nZXRDb250ZW50KCkpO1xuXG4gICAgICAkdGlwLnJlbW92ZUNsYXNzKENsYXNzTmFtZS5GQURFKS5yZW1vdmVDbGFzcyhDbGFzc05hbWUuSU4pO1xuXG4gICAgICB0aGlzLmNsZWFudXBUZXRoZXIoKTtcbiAgICB9O1xuXG4gICAgLy8gcHJpdmF0ZVxuXG4gICAgUG9wb3Zlci5wcm90b3R5cGUuX2dldENvbnRlbnQgPSBmdW5jdGlvbiBfZ2V0Q29udGVudCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLWNvbnRlbnQnKSB8fCAodHlwZW9mIHRoaXMuY29uZmlnLmNvbnRlbnQgPT09ICdmdW5jdGlvbicgPyB0aGlzLmNvbmZpZy5jb250ZW50LmNhbGwodGhpcy5lbGVtZW50KSA6IHRoaXMuY29uZmlnLmNvbnRlbnQpO1xuICAgIH07XG5cbiAgICAvLyBzdGF0aWNcblxuICAgIFBvcG92ZXIuX2pRdWVyeUludGVyZmFjZSA9IGZ1bmN0aW9uIF9qUXVlcnlJbnRlcmZhY2UoY29uZmlnKSB7XG4gICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGRhdGEgPSAkKHRoaXMpLmRhdGEoREFUQV9LRVkpO1xuICAgICAgICB2YXIgX2NvbmZpZyA9ICh0eXBlb2YgY29uZmlnID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihjb25maWcpKSA9PT0gJ29iamVjdCcgPyBjb25maWcgOiBudWxsO1xuXG4gICAgICAgIGlmICghZGF0YSAmJiAvZGVzdHJveXxoaWRlLy50ZXN0KGNvbmZpZykpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWRhdGEpIHtcbiAgICAgICAgICBkYXRhID0gbmV3IFBvcG92ZXIodGhpcywgX2NvbmZpZyk7XG4gICAgICAgICAgJCh0aGlzKS5kYXRhKERBVEFfS0VZLCBkYXRhKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0eXBlb2YgY29uZmlnID09PSAnc3RyaW5nJykge1xuICAgICAgICAgIGlmIChkYXRhW2NvbmZpZ10gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBtZXRob2QgbmFtZWQgXCInICsgY29uZmlnICsgJ1wiJyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGRhdGFbY29uZmlnXSgpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgX2NyZWF0ZUNsYXNzKFBvcG92ZXIsIG51bGwsIFt7XG4gICAgICBrZXk6ICdWRVJTSU9OJyxcblxuXG4gICAgICAvLyBnZXR0ZXJzXG5cbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gVkVSU0lPTjtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6ICdEZWZhdWx0JyxcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gRGVmYXVsdDtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6ICdOQU1FJyxcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gTkFNRTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6ICdEQVRBX0tFWScsXG4gICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIERBVEFfS0VZO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogJ0V2ZW50JyxcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gRXZlbnQ7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiAnRVZFTlRfS0VZJyxcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gRVZFTlRfS0VZO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogJ0RlZmF1bHRUeXBlJyxcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gRGVmYXVsdFR5cGU7XG4gICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIFBvcG92ZXI7XG4gIH0oVG9vbHRpcCk7XG5cbiAgLyoqXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKiBqUXVlcnlcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqL1xuXG4gICQuZm5bTkFNRV0gPSBQb3BvdmVyLl9qUXVlcnlJbnRlcmZhY2U7XG4gICQuZm5bTkFNRV0uQ29uc3RydWN0b3IgPSBQb3BvdmVyO1xuICAkLmZuW05BTUVdLm5vQ29uZmxpY3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgJC5mbltOQU1FXSA9IEpRVUVSWV9OT19DT05GTElDVDtcbiAgICByZXR1cm4gUG9wb3Zlci5falF1ZXJ5SW50ZXJmYWNlO1xuICB9O1xuXG4gIHJldHVybiBQb3BvdmVyO1xufShqUXVlcnkpO1xuXG59KCk7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9ib290c3RyYXAvZGlzdC9qcy9ib290c3RyYXAuanNcbiAqKiBtb2R1bGUgaWQgPSA1XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IGdsb2JhbFtcInR1cmJvbGlua3NcIl0gPSByZXF1aXJlKFwiLSEvVXNlcnMvcmFmYWVsbm93cm90ZWsvRG9jdW1lbnRzL1Byb2pla3RlL0tpY2tzQXBwL1dvcmtzcGFjZS9raWNrcy1hcHAtd29yZHByZXNzL3dwLWNvbnRlbnQvdGhlbWVzL2tpY2tzLWFwcC9ub2RlX21vZHVsZXMvZXhwb3NlLWxvYWRlci9pbmRleC5qcz8kIS9Vc2Vycy9yYWZhZWxub3dyb3Rlay9Eb2N1bWVudHMvUHJvamVrdGUvS2lja3NBcHAvV29ya3NwYWNlL2tpY2tzLWFwcC13b3JkcHJlc3Mvd3AtY29udGVudC90aGVtZXMva2lja3MtYXBwL25vZGVfbW9kdWxlcy90dXJib2xpbmtzL2Rpc3QvdHVyYm9saW5rcy5qc1wiKTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi90dXJib2xpbmtzL2Rpc3QvdHVyYm9saW5rcy5qc1xuICoqIG1vZHVsZSBpZCA9IDZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIm1vZHVsZS5leHBvcnRzID0gZ2xvYmFsW1wiJFwiXSA9IHJlcXVpcmUoXCItIS9Vc2Vycy9yYWZhZWxub3dyb3Rlay9Eb2N1bWVudHMvUHJvamVrdGUvS2lja3NBcHAvV29ya3NwYWNlL2tpY2tzLWFwcC13b3JkcHJlc3Mvd3AtY29udGVudC90aGVtZXMva2lja3MtYXBwL25vZGVfbW9kdWxlcy90dXJib2xpbmtzL2Rpc3QvdHVyYm9saW5rcy5qc1wiKTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9leHBvc2UtbG9hZGVyPyQhLi9+L3R1cmJvbGlua3MvZGlzdC90dXJib2xpbmtzLmpzXG4gKiogbW9kdWxlIGlkID0gN1xuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiLypcblR1cmJvbGlua3MgNS4wLjBcbkNvcHlyaWdodCDCqSAyMDE2IEJhc2VjYW1wLCBMTENcbiAqL1xuKGZ1bmN0aW9uKCl7KGZ1bmN0aW9uKCl7KGZ1bmN0aW9uKCl7dGhpcy5UdXJib2xpbmtzPXtzdXBwb3J0ZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbCE9d2luZG93Lmhpc3RvcnkucHVzaFN0YXRlJiZudWxsIT13aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lfSgpLHZpc2l0OmZ1bmN0aW9uKGUscil7cmV0dXJuIHQuY29udHJvbGxlci52aXNpdChlLHIpfSxjbGVhckNhY2hlOmZ1bmN0aW9uKCl7cmV0dXJuIHQuY29udHJvbGxlci5jbGVhckNhY2hlKCl9fX0pLmNhbGwodGhpcyl9KS5jYWxsKHRoaXMpO3ZhciB0PXRoaXMuVHVyYm9saW5rczsoZnVuY3Rpb24oKXsoZnVuY3Rpb24oKXt2YXIgZSxyO3QuY29weU9iamVjdD1mdW5jdGlvbih0KXt2YXIgZSxyLG47cj17fTtmb3IoZSBpbiB0KW49dFtlXSxyW2VdPW47cmV0dXJuIHJ9LHQuY2xvc2VzdD1mdW5jdGlvbih0LHIpe3JldHVybiBlLmNhbGwodCxyKX0sZT1mdW5jdGlvbigpe3ZhciB0LGU7cmV0dXJuIHQ9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LG51bGwhPShlPXQuY2xvc2VzdCk/ZTpmdW5jdGlvbih0KXt2YXIgZTtmb3IoZT10aGlzO2U7KXtpZihlLm5vZGVUeXBlPT09Tm9kZS5FTEVNRU5UX05PREUmJnIuY2FsbChlLHQpKXJldHVybiBlO2U9ZS5wYXJlbnROb2RlfX19KCksdC5kZWZlcj1mdW5jdGlvbih0KXtyZXR1cm4gc2V0VGltZW91dCh0LDEpfSx0LmRpc3BhdGNoPWZ1bmN0aW9uKHQsZSl7dmFyIHIsbixvLGkscztyZXR1cm4gaT1udWxsIT1lP2U6e30scz1pLnRhcmdldCxyPWkuY2FuY2VsYWJsZSxuPWkuZGF0YSxvPWRvY3VtZW50LmNyZWF0ZUV2ZW50KFwiRXZlbnRzXCIpLG8uaW5pdEV2ZW50KHQsITAscj09PSEwKSxvLmRhdGE9bnVsbCE9bj9uOnt9LChudWxsIT1zP3M6ZG9jdW1lbnQpLmRpc3BhdGNoRXZlbnQobyksb30sdC5tYXRjaD1mdW5jdGlvbih0LGUpe3JldHVybiByLmNhbGwodCxlKX0scj1mdW5jdGlvbigpe3ZhciB0LGUscixuO3JldHVybiB0PWRvY3VtZW50LmRvY3VtZW50RWxlbWVudCxudWxsIT0oZT1udWxsIT0ocj1udWxsIT0obj10Lm1hdGNoZXNTZWxlY3Rvcik/bjp0LndlYmtpdE1hdGNoZXNTZWxlY3Rvcik/cjp0Lm1zTWF0Y2hlc1NlbGVjdG9yKT9lOnQubW96TWF0Y2hlc1NlbGVjdG9yfSgpLHQudXVpZD1mdW5jdGlvbigpe3ZhciB0LGUscjtmb3Iocj1cIlwiLHQ9ZT0xOzM2Pj1lO3Q9KytlKXIrPTk9PT10fHwxND09PXR8fDE5PT09dHx8MjQ9PT10P1wiLVwiOjE1PT09dD9cIjRcIjoyMD09PXQ/KE1hdGguZmxvb3IoNCpNYXRoLnJhbmRvbSgpKSs4KS50b1N0cmluZygxNik6TWF0aC5mbG9vcigxNSpNYXRoLnJhbmRvbSgpKS50b1N0cmluZygxNik7cmV0dXJuIHJ9fSkuY2FsbCh0aGlzKSxmdW5jdGlvbigpe3QuTG9jYXRpb249ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe3ZhciBlLHI7bnVsbD09dCYmKHQ9XCJcIikscj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKSxyLmhyZWY9dC50b1N0cmluZygpLHRoaXMuYWJzb2x1dGVVUkw9ci5ocmVmLGU9ci5oYXNoLmxlbmd0aCwyPmU/dGhpcy5yZXF1ZXN0VVJMPXRoaXMuYWJzb2x1dGVVUkw6KHRoaXMucmVxdWVzdFVSTD10aGlzLmFic29sdXRlVVJMLnNsaWNlKDAsLWUpLHRoaXMuYW5jaG9yPXIuaGFzaC5zbGljZSgxKSl9dmFyIGUscixuLG87cmV0dXJuIHQud3JhcD1mdW5jdGlvbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIHRoaXM/dDpuZXcgdGhpcyh0KX0sdC5wcm90b3R5cGUuZ2V0T3JpZ2luPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYWJzb2x1dGVVUkwuc3BsaXQoXCIvXCIsMykuam9pbihcIi9cIil9LHQucHJvdG90eXBlLmdldFBhdGg9ZnVuY3Rpb24oKXt2YXIgdCxlO3JldHVybiBudWxsIT0odD1udWxsIT0oZT10aGlzLmFic29sdXRlVVJMLm1hdGNoKC9cXC9cXC9bXlxcL10qKFxcL1tePztdKikvKSk/ZVsxXTp2b2lkIDApP3Q6XCIvXCJ9LHQucHJvdG90eXBlLmdldFBhdGhDb21wb25lbnRzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0UGF0aCgpLnNwbGl0KFwiL1wiKS5zbGljZSgxKX0sdC5wcm90b3R5cGUuZ2V0TGFzdFBhdGhDb21wb25lbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRQYXRoQ29tcG9uZW50cygpLnNsaWNlKC0xKVswXX0sdC5wcm90b3R5cGUuZ2V0RXh0ZW5zaW9uPWZ1bmN0aW9uKCl7dmFyIHQsZTtyZXR1cm4gbnVsbCE9KHQ9bnVsbCE9KGU9dGhpcy5nZXRMYXN0UGF0aENvbXBvbmVudCgpLm1hdGNoKC9cXC5bXi5dKiQvKSk/ZVswXTp2b2lkIDApP3Q6XCJcIn0sdC5wcm90b3R5cGUuaXNIVE1MPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0RXh0ZW5zaW9uKCkubWF0Y2goL14oPzp8XFwuKD86aHRtfGh0bWx8eGh0bWwpKSQvKX0sdC5wcm90b3R5cGUuaXNQcmVmaXhlZEJ5PWZ1bmN0aW9uKHQpe3ZhciBlO3JldHVybiBlPXIodCksdGhpcy5pc0VxdWFsVG8odCl8fG8odGhpcy5hYnNvbHV0ZVVSTCxlKX0sdC5wcm90b3R5cGUuaXNFcXVhbFRvPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmFic29sdXRlVVJMPT09KG51bGwhPXQ/dC5hYnNvbHV0ZVVSTDp2b2lkIDApfSx0LnByb3RvdHlwZS50b0NhY2hlS2V5PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVxdWVzdFVSTH0sdC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYWJzb2x1dGVVUkx9LHQucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYWJzb2x1dGVVUkx9LHQucHJvdG90eXBlLnZhbHVlT2Y9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hYnNvbHV0ZVVSTH0scj1mdW5jdGlvbih0KXtyZXR1cm4gZSh0LmdldE9yaWdpbigpK3QuZ2V0UGF0aCgpKX0sZT1mdW5jdGlvbih0KXtyZXR1cm4gbih0LFwiL1wiKT90OnQrXCIvXCJ9LG89ZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5zbGljZSgwLGUubGVuZ3RoKT09PWV9LG49ZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5zbGljZSgtZS5sZW5ndGgpPT09ZX0sdH0oKX0uY2FsbCh0aGlzKSxmdW5jdGlvbigpe3ZhciBlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHQuYXBwbHkoZSxhcmd1bWVudHMpfX07dC5IdHRwUmVxdWVzdD1mdW5jdGlvbigpe2Z1bmN0aW9uIHIocixuLG8pe3RoaXMuZGVsZWdhdGU9cix0aGlzLnJlcXVlc3RDYW5jZWxlZD1lKHRoaXMucmVxdWVzdENhbmNlbGVkLHRoaXMpLHRoaXMucmVxdWVzdFRpbWVkT3V0PWUodGhpcy5yZXF1ZXN0VGltZWRPdXQsdGhpcyksdGhpcy5yZXF1ZXN0RmFpbGVkPWUodGhpcy5yZXF1ZXN0RmFpbGVkLHRoaXMpLHRoaXMucmVxdWVzdExvYWRlZD1lKHRoaXMucmVxdWVzdExvYWRlZCx0aGlzKSx0aGlzLnJlcXVlc3RQcm9ncmVzc2VkPWUodGhpcy5yZXF1ZXN0UHJvZ3Jlc3NlZCx0aGlzKSx0aGlzLnVybD10LkxvY2F0aW9uLndyYXAobikucmVxdWVzdFVSTCx0aGlzLnJlZmVycmVyPXQuTG9jYXRpb24ud3JhcChvKS5hYnNvbHV0ZVVSTCx0aGlzLmNyZWF0ZVhIUigpfXJldHVybiByLk5FVFdPUktfRkFJTFVSRT0wLHIuVElNRU9VVF9GQUlMVVJFPS0xLHIudGltZW91dD02MCxyLnByb3RvdHlwZS5zZW5kPWZ1bmN0aW9uKCl7dmFyIHQ7cmV0dXJuIHRoaXMueGhyJiYhdGhpcy5zZW50Pyh0aGlzLm5vdGlmeUFwcGxpY2F0aW9uQmVmb3JlUmVxdWVzdFN0YXJ0KCksdGhpcy5zZXRQcm9ncmVzcygwKSx0aGlzLnhoci5zZW5kKCksdGhpcy5zZW50PSEwLFwiZnVuY3Rpb25cIj09dHlwZW9mKHQ9dGhpcy5kZWxlZ2F0ZSkucmVxdWVzdFN0YXJ0ZWQ/dC5yZXF1ZXN0U3RhcnRlZCgpOnZvaWQgMCk6dm9pZCAwfSxyLnByb3RvdHlwZS5jYW5jZWw9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy54aHImJnRoaXMuc2VudD90aGlzLnhoci5hYm9ydCgpOnZvaWQgMH0sci5wcm90b3R5cGUucmVxdWVzdFByb2dyZXNzZWQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQubGVuZ3RoQ29tcHV0YWJsZT90aGlzLnNldFByb2dyZXNzKHQubG9hZGVkL3QudG90YWwpOnZvaWQgMH0sci5wcm90b3R5cGUucmVxdWVzdExvYWRlZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmVuZFJlcXVlc3QoZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGU7cmV0dXJuIDIwMDw9KGU9dC54aHIuc3RhdHVzKSYmMzAwPmU/dC5kZWxlZ2F0ZS5yZXF1ZXN0Q29tcGxldGVkV2l0aFJlc3BvbnNlKHQueGhyLnJlc3BvbnNlVGV4dCx0Lnhoci5nZXRSZXNwb25zZUhlYWRlcihcIlR1cmJvbGlua3MtTG9jYXRpb25cIikpOih0LmZhaWxlZD0hMCx0LmRlbGVnYXRlLnJlcXVlc3RGYWlsZWRXaXRoU3RhdHVzQ29kZSh0Lnhoci5zdGF0dXMsdC54aHIucmVzcG9uc2VUZXh0KSl9fSh0aGlzKSl9LHIucHJvdG90eXBlLnJlcXVlc3RGYWlsZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbmRSZXF1ZXN0KGZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0LmZhaWxlZD0hMCx0LmRlbGVnYXRlLnJlcXVlc3RGYWlsZWRXaXRoU3RhdHVzQ29kZSh0LmNvbnN0cnVjdG9yLk5FVFdPUktfRkFJTFVSRSl9fSh0aGlzKSl9LHIucHJvdG90eXBlLnJlcXVlc3RUaW1lZE91dD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmVuZFJlcXVlc3QoZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHQuZmFpbGVkPSEwLHQuZGVsZWdhdGUucmVxdWVzdEZhaWxlZFdpdGhTdGF0dXNDb2RlKHQuY29uc3RydWN0b3IuVElNRU9VVF9GQUlMVVJFKX19KHRoaXMpKX0sci5wcm90b3R5cGUucmVxdWVzdENhbmNlbGVkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZW5kUmVxdWVzdCgpfSxyLnByb3RvdHlwZS5ub3RpZnlBcHBsaWNhdGlvbkJlZm9yZVJlcXVlc3RTdGFydD1mdW5jdGlvbigpe3JldHVybiB0LmRpc3BhdGNoKFwidHVyYm9saW5rczpyZXF1ZXN0LXN0YXJ0XCIse2RhdGE6e3VybDp0aGlzLnVybCx4aHI6dGhpcy54aHJ9fSl9LHIucHJvdG90eXBlLm5vdGlmeUFwcGxpY2F0aW9uQWZ0ZXJSZXF1ZXN0RW5kPWZ1bmN0aW9uKCl7cmV0dXJuIHQuZGlzcGF0Y2goXCJ0dXJib2xpbmtzOnJlcXVlc3QtZW5kXCIse2RhdGE6e3VybDp0aGlzLnVybCx4aHI6dGhpcy54aHJ9fSl9LHIucHJvdG90eXBlLmNyZWF0ZVhIUj1mdW5jdGlvbigpe3JldHVybiB0aGlzLnhocj1uZXcgWE1MSHR0cFJlcXVlc3QsdGhpcy54aHIub3BlbihcIkdFVFwiLHRoaXMudXJsLCEwKSx0aGlzLnhoci50aW1lb3V0PTFlMyp0aGlzLmNvbnN0cnVjdG9yLnRpbWVvdXQsdGhpcy54aHIuc2V0UmVxdWVzdEhlYWRlcihcIkFjY2VwdFwiLFwidGV4dC9odG1sLCBhcHBsaWNhdGlvbi94aHRtbCt4bWxcIiksdGhpcy54aHIuc2V0UmVxdWVzdEhlYWRlcihcIlR1cmJvbGlua3MtUmVmZXJyZXJcIix0aGlzLnJlZmVycmVyKSx0aGlzLnhoci5vbnByb2dyZXNzPXRoaXMucmVxdWVzdFByb2dyZXNzZWQsdGhpcy54aHIub25sb2FkPXRoaXMucmVxdWVzdExvYWRlZCx0aGlzLnhoci5vbmVycm9yPXRoaXMucmVxdWVzdEZhaWxlZCx0aGlzLnhoci5vbnRpbWVvdXQ9dGhpcy5yZXF1ZXN0VGltZWRPdXQsdGhpcy54aHIub25hYm9ydD10aGlzLnJlcXVlc3RDYW5jZWxlZH0sci5wcm90b3R5cGUuZW5kUmVxdWVzdD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy54aHI/KHRoaXMubm90aWZ5QXBwbGljYXRpb25BZnRlclJlcXVlc3RFbmQoKSxudWxsIT10JiZ0LmNhbGwodGhpcyksdGhpcy5kZXN0cm95KCkpOnZvaWQgMH0sci5wcm90b3R5cGUuc2V0UHJvZ3Jlc3M9ZnVuY3Rpb24odCl7dmFyIGU7cmV0dXJuIHRoaXMucHJvZ3Jlc3M9dCxcImZ1bmN0aW9uXCI9PXR5cGVvZihlPXRoaXMuZGVsZWdhdGUpLnJlcXVlc3RQcm9ncmVzc2VkP2UucmVxdWVzdFByb2dyZXNzZWQodGhpcy5wcm9ncmVzcyk6dm9pZCAwfSxyLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7dmFyIHQ7cmV0dXJuIHRoaXMuc2V0UHJvZ3Jlc3MoMSksXCJmdW5jdGlvblwiPT10eXBlb2YodD10aGlzLmRlbGVnYXRlKS5yZXF1ZXN0RmluaXNoZWQmJnQucmVxdWVzdEZpbmlzaGVkKCksdGhpcy5kZWxlZ2F0ZT1udWxsLHRoaXMueGhyPW51bGx9LHJ9KCl9LmNhbGwodGhpcyksZnVuY3Rpb24oKXt2YXIgZT1mdW5jdGlvbih0LGUpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0LmFwcGx5KGUsYXJndW1lbnRzKX19O3QuUHJvZ3Jlc3NCYXI9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7dGhpcy50cmlja2xlPWUodGhpcy50cmlja2xlLHRoaXMpLHRoaXMuc3R5bGVzaGVldEVsZW1lbnQ9dGhpcy5jcmVhdGVTdHlsZXNoZWV0RWxlbWVudCgpLHRoaXMucHJvZ3Jlc3NFbGVtZW50PXRoaXMuY3JlYXRlUHJvZ3Jlc3NFbGVtZW50KCl9dmFyIHI7cmV0dXJuIHI9MzAwLHQuZGVmYXVsdENTUz1cIi50dXJib2xpbmtzLXByb2dyZXNzLWJhciB7XFxuICBwb3NpdGlvbjogZml4ZWQ7XFxuICBkaXNwbGF5OiBibG9jaztcXG4gIHRvcDogMDtcXG4gIGxlZnQ6IDA7XFxuICBoZWlnaHQ6IDNweDtcXG4gIGJhY2tncm91bmQ6ICMwMDc2ZmY7XFxuICB6LWluZGV4OiA5OTk5O1xcbiAgdHJhbnNpdGlvbjogd2lkdGggXCIrcitcIm1zIGVhc2Utb3V0LCBvcGFjaXR5IFwiK3IvMitcIm1zIFwiK3IvMitcIm1zIGVhc2UtaW47XFxuICB0cmFuc2Zvcm06IHRyYW5zbGF0ZTNkKDAsIDAsIDApO1xcbn1cIix0LnByb3RvdHlwZS5zaG93PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmlzaWJsZT92b2lkIDA6KHRoaXMudmlzaWJsZT0hMCx0aGlzLmluc3RhbGxTdHlsZXNoZWV0RWxlbWVudCgpLHRoaXMuaW5zdGFsbFByb2dyZXNzRWxlbWVudCgpLHRoaXMuc3RhcnRUcmlja2xpbmcoKSl9LHQucHJvdG90eXBlLmhpZGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52aXNpYmxlJiYhdGhpcy5oaWRpbmc/KHRoaXMuaGlkaW5nPSEwLHRoaXMuZmFkZVByb2dyZXNzRWxlbWVudChmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdC51bmluc3RhbGxQcm9ncmVzc0VsZW1lbnQoKSx0LnN0b3BUcmlja2xpbmcoKSx0LnZpc2libGU9ITEsdC5oaWRpbmc9ITF9fSh0aGlzKSkpOnZvaWQgMH0sdC5wcm90b3R5cGUuc2V0VmFsdWU9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMudmFsdWU9dCx0aGlzLnJlZnJlc2goKX0sdC5wcm90b3R5cGUuaW5zdGFsbFN0eWxlc2hlZXRFbGVtZW50PWZ1bmN0aW9uKCl7cmV0dXJuIGRvY3VtZW50LmhlYWQuaW5zZXJ0QmVmb3JlKHRoaXMuc3R5bGVzaGVldEVsZW1lbnQsZG9jdW1lbnQuaGVhZC5maXJzdENoaWxkKX0sdC5wcm90b3R5cGUuaW5zdGFsbFByb2dyZXNzRWxlbWVudD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnByb2dyZXNzRWxlbWVudC5zdHlsZS53aWR0aD0wLHRoaXMucHJvZ3Jlc3NFbGVtZW50LnN0eWxlLm9wYWNpdHk9MSxkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuaW5zZXJ0QmVmb3JlKHRoaXMucHJvZ3Jlc3NFbGVtZW50LGRvY3VtZW50LmJvZHkpLHRoaXMucmVmcmVzaCgpfSx0LnByb3RvdHlwZS5mYWRlUHJvZ3Jlc3NFbGVtZW50PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnByb2dyZXNzRWxlbWVudC5zdHlsZS5vcGFjaXR5PTAsc2V0VGltZW91dCh0LDEuNSpyKX0sdC5wcm90b3R5cGUudW5pbnN0YWxsUHJvZ3Jlc3NFbGVtZW50PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHJvZ3Jlc3NFbGVtZW50LnBhcmVudE5vZGU/ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnJlbW92ZUNoaWxkKHRoaXMucHJvZ3Jlc3NFbGVtZW50KTp2b2lkIDB9LHQucHJvdG90eXBlLnN0YXJ0VHJpY2tsaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIG51bGwhPXRoaXMudHJpY2tsZUludGVydmFsP3RoaXMudHJpY2tsZUludGVydmFsOnRoaXMudHJpY2tsZUludGVydmFsPXNldEludGVydmFsKHRoaXMudHJpY2tsZSxyKX0sdC5wcm90b3R5cGUuc3RvcFRyaWNrbGluZz1mdW5jdGlvbigpe3JldHVybiBjbGVhckludGVydmFsKHRoaXMudHJpY2tsZUludGVydmFsKSx0aGlzLnRyaWNrbGVJbnRlcnZhbD1udWxsfSx0LnByb3RvdHlwZS50cmlja2xlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2V0VmFsdWUodGhpcy52YWx1ZStNYXRoLnJhbmRvbSgpLzEwMCl9LHQucHJvdG90eXBlLnJlZnJlc2g9ZnVuY3Rpb24oKXtyZXR1cm4gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0LnByb2dyZXNzRWxlbWVudC5zdHlsZS53aWR0aD0xMCs5MCp0LnZhbHVlK1wiJVwifX0odGhpcykpfSx0LnByb3RvdHlwZS5jcmVhdGVTdHlsZXNoZWV0RWxlbWVudD1mdW5jdGlvbigpe3ZhciB0O3JldHVybiB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKSx0LnR5cGU9XCJ0ZXh0L2Nzc1wiLHQudGV4dENvbnRlbnQ9dGhpcy5jb25zdHJ1Y3Rvci5kZWZhdWx0Q1NTLHR9LHQucHJvdG90eXBlLmNyZWF0ZVByb2dyZXNzRWxlbWVudD1mdW5jdGlvbigpe3ZhciB0O3JldHVybiB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksdC5jbGFzc05hbWU9XCJ0dXJib2xpbmtzLXByb2dyZXNzLWJhclwiLHR9LHR9KCl9LmNhbGwodGhpcyksZnVuY3Rpb24oKXt2YXIgZT1mdW5jdGlvbih0LGUpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0LmFwcGx5KGUsYXJndW1lbnRzKX19O3QuQnJvd3NlckFkYXB0ZXI9ZnVuY3Rpb24oKXtmdW5jdGlvbiByKHIpe3RoaXMuY29udHJvbGxlcj1yLHRoaXMuc2hvd1Byb2dyZXNzQmFyPWUodGhpcy5zaG93UHJvZ3Jlc3NCYXIsdGhpcyksdGhpcy5wcm9ncmVzc0Jhcj1uZXcgdC5Qcm9ncmVzc0Jhcn12YXIgbixvLGkscztyZXR1cm4gcz10Lkh0dHBSZXF1ZXN0LG49cy5ORVRXT1JLX0ZBSUxVUkUsaT1zLlRJTUVPVVRfRkFJTFVSRSxvPTUwMCxyLnByb3RvdHlwZS52aXNpdFByb3Bvc2VkVG9Mb2NhdGlvbldpdGhBY3Rpb249ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5jb250cm9sbGVyLnN0YXJ0VmlzaXRUb0xvY2F0aW9uV2l0aEFjdGlvbih0LGUpfSxyLnByb3RvdHlwZS52aXNpdFN0YXJ0ZWQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQuaXNzdWVSZXF1ZXN0KCksdC5jaGFuZ2VIaXN0b3J5KCksdC5sb2FkQ2FjaGVkU25hcHNob3QoKX0sci5wcm90b3R5cGUudmlzaXRSZXF1ZXN0U3RhcnRlZD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5wcm9ncmVzc0Jhci5zZXRWYWx1ZSgwKSx0Lmhhc0NhY2hlZFNuYXBzaG90KCl8fFwicmVzdG9yZVwiIT09dC5hY3Rpb24/dGhpcy5zaG93UHJvZ3Jlc3NCYXJBZnRlckRlbGF5KCk6dGhpcy5zaG93UHJvZ3Jlc3NCYXIoKX0sci5wcm90b3R5cGUudmlzaXRSZXF1ZXN0UHJvZ3Jlc3NlZD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5wcm9ncmVzc0Jhci5zZXRWYWx1ZSh0LnByb2dyZXNzKX0sci5wcm90b3R5cGUudmlzaXRSZXF1ZXN0Q29tcGxldGVkPWZ1bmN0aW9uKHQpe3JldHVybiB0LmxvYWRSZXNwb25zZSgpfSxyLnByb3RvdHlwZS52aXNpdFJlcXVlc3RGYWlsZWRXaXRoU3RhdHVzQ29kZT1mdW5jdGlvbih0LGUpe3N3aXRjaChlKXtjYXNlIG46Y2FzZSBpOnJldHVybiB0aGlzLnJlbG9hZCgpO2RlZmF1bHQ6cmV0dXJuIHQubG9hZFJlc3BvbnNlKCl9fSxyLnByb3RvdHlwZS52aXNpdFJlcXVlc3RGaW5pc2hlZD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5oaWRlUHJvZ3Jlc3NCYXIoKX0sci5wcm90b3R5cGUudmlzaXRDb21wbGV0ZWQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQuZm9sbG93UmVkaXJlY3QoKX0sci5wcm90b3R5cGUucGFnZUludmFsaWRhdGVkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVsb2FkKCl9LHIucHJvdG90eXBlLnNob3dQcm9ncmVzc0JhckFmdGVyRGVsYXk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcm9ncmVzc0JhclRpbWVvdXQ9c2V0VGltZW91dCh0aGlzLnNob3dQcm9ncmVzc0JhcixvKX0sci5wcm90b3R5cGUuc2hvd1Byb2dyZXNzQmFyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHJvZ3Jlc3NCYXIuc2hvdygpfSxyLnByb3RvdHlwZS5oaWRlUHJvZ3Jlc3NCYXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcm9ncmVzc0Jhci5oaWRlKCksY2xlYXJUaW1lb3V0KHRoaXMucHJvZ3Jlc3NCYXJUaW1lb3V0KX0sci5wcm90b3R5cGUucmVsb2FkPWZ1bmN0aW9uKCl7cmV0dXJuIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKX0scn0oKX0uY2FsbCh0aGlzKSxmdW5jdGlvbigpe3ZhciBlLHI9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdC5hcHBseShlLGFyZ3VtZW50cyl9fTtlPSExLGFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsZnVuY3Rpb24oKXtyZXR1cm4gdC5kZWZlcihmdW5jdGlvbigpe3JldHVybiBlPSEwfSl9LCExKSx0Lkhpc3Rvcnk9ZnVuY3Rpb24oKXtmdW5jdGlvbiBuKHQpe3RoaXMuZGVsZWdhdGU9dCx0aGlzLm9uUG9wU3RhdGU9cih0aGlzLm9uUG9wU3RhdGUsdGhpcyl9cmV0dXJuIG4ucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RhcnRlZD92b2lkIDA6KGFkZEV2ZW50TGlzdGVuZXIoXCJwb3BzdGF0ZVwiLHRoaXMub25Qb3BTdGF0ZSwhMSksdGhpcy5zdGFydGVkPSEwKX0sbi5wcm90b3R5cGUuc3RvcD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnN0YXJ0ZWQ/KHJlbW92ZUV2ZW50TGlzdGVuZXIoXCJwb3BzdGF0ZVwiLHRoaXMub25Qb3BTdGF0ZSwhMSksdGhpcy5zdGFydGVkPSExKTp2b2lkIDB9LG4ucHJvdG90eXBlLnB1c2g9ZnVuY3Rpb24oZSxyKXtyZXR1cm4gZT10LkxvY2F0aW9uLndyYXAoZSksdGhpcy51cGRhdGUoXCJwdXNoXCIsZSxyKX0sbi5wcm90b3R5cGUucmVwbGFjZT1mdW5jdGlvbihlLHIpe3JldHVybiBlPXQuTG9jYXRpb24ud3JhcChlKSx0aGlzLnVwZGF0ZShcInJlcGxhY2VcIixlLHIpfSxuLnByb3RvdHlwZS5vblBvcFN0YXRlPWZ1bmN0aW9uKGUpe3ZhciByLG4sbyxpO3JldHVybiB0aGlzLnNob3VsZEhhbmRsZVBvcFN0YXRlKCkmJihpPW51bGwhPShuPWUuc3RhdGUpP24udHVyYm9saW5rczp2b2lkIDApPyhyPXQuTG9jYXRpb24ud3JhcCh3aW5kb3cubG9jYXRpb24pLG89aS5yZXN0b3JhdGlvbklkZW50aWZpZXIsdGhpcy5kZWxlZ2F0ZS5oaXN0b3J5UG9wcGVkVG9Mb2NhdGlvbldpdGhSZXN0b3JhdGlvbklkZW50aWZpZXIocixvKSk6dm9pZCAwfSxuLnByb3RvdHlwZS5zaG91bGRIYW5kbGVQb3BTdGF0ZT1mdW5jdGlvbigpe3JldHVybiBlPT09ITB9LG4ucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbih0LGUscil7dmFyIG47cmV0dXJuIG49e3R1cmJvbGlua3M6e3Jlc3RvcmF0aW9uSWRlbnRpZmllcjpyfX0saGlzdG9yeVt0K1wiU3RhdGVcIl0obixudWxsLGUpfSxufSgpfS5jYWxsKHRoaXMpLGZ1bmN0aW9uKCl7dC5TbmFwc2hvdD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7dmFyIGUscjtyPXQuaGVhZCxlPXQuYm9keSx0aGlzLmhlYWQ9bnVsbCE9cj9yOmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoZWFkXCIpLHRoaXMuYm9keT1udWxsIT1lP2U6ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJvZHlcIil9cmV0dXJuIGUud3JhcD1mdW5jdGlvbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIHRoaXM/dDp0aGlzLmZyb21IVE1MKHQpfSxlLmZyb21IVE1MPWZ1bmN0aW9uKHQpe3ZhciBlO3JldHVybiBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJodG1sXCIpLGUuaW5uZXJIVE1MPXQsdGhpcy5mcm9tRWxlbWVudChlKX0sZS5mcm9tRWxlbWVudD1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IHRoaXMoe2hlYWQ6dC5xdWVyeVNlbGVjdG9yKFwiaGVhZFwiKSxib2R5OnQucXVlcnlTZWxlY3RvcihcImJvZHlcIil9KX0sZS5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGUoe2hlYWQ6dGhpcy5oZWFkLmNsb25lTm9kZSghMCksYm9keTp0aGlzLmJvZHkuY2xvbmVOb2RlKCEwKX0pfSxlLnByb3RvdHlwZS5nZXRSb290TG9jYXRpb249ZnVuY3Rpb24oKXt2YXIgZSxyO3JldHVybiByPW51bGwhPShlPXRoaXMuZ2V0U2V0dGluZyhcInJvb3RcIikpP2U6XCIvXCIsbmV3IHQuTG9jYXRpb24ocil9LGUucHJvdG90eXBlLmdldENhY2hlQ29udHJvbFZhbHVlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0U2V0dGluZyhcImNhY2hlLWNvbnRyb2xcIil9LGUucHJvdG90eXBlLmhhc0FuY2hvcj1mdW5jdGlvbih0KXt0cnl7cmV0dXJuIG51bGwhPXRoaXMuYm9keS5xdWVyeVNlbGVjdG9yKFwiW2lkPSdcIit0K1wiJ11cIil9Y2F0Y2goZSl7fX0sZS5wcm90b3R5cGUuaXNQcmV2aWV3YWJsZT1mdW5jdGlvbigpe3JldHVyblwibm8tcHJldmlld1wiIT09dGhpcy5nZXRDYWNoZUNvbnRyb2xWYWx1ZSgpfSxlLnByb3RvdHlwZS5pc0NhY2hlYWJsZT1mdW5jdGlvbigpe3JldHVyblwibm8tY2FjaGVcIiE9PXRoaXMuZ2V0Q2FjaGVDb250cm9sVmFsdWUoKX0sZS5wcm90b3R5cGUuZ2V0U2V0dGluZz1mdW5jdGlvbih0KXt2YXIgZSxyO3JldHVybiByPXRoaXMuaGVhZC5xdWVyeVNlbGVjdG9yQWxsKFwibWV0YVtuYW1lPSd0dXJib2xpbmtzLVwiK3QrXCInXVwiKSxlPXJbci5sZW5ndGgtMV0sbnVsbCE9ZT9lLmdldEF0dHJpYnV0ZShcImNvbnRlbnRcIik6dm9pZCAwfSxlfSgpfS5jYWxsKHRoaXMpLGZ1bmN0aW9uKCl7dmFyIGU9W10uc2xpY2U7dC5SZW5kZXJlcj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt9dmFyIHI7cmV0dXJuIHQucmVuZGVyPWZ1bmN0aW9uKCl7dmFyIHQscixuLG87cmV0dXJuIG49YXJndW1lbnRzWzBdLHI9YXJndW1lbnRzWzFdLHQ9Mzw9YXJndW1lbnRzLmxlbmd0aD9lLmNhbGwoYXJndW1lbnRzLDIpOltdLG89ZnVuY3Rpb24odCxlLHIpe3IucHJvdG90eXBlPXQucHJvdG90eXBlO3ZhciBuPW5ldyByLG89dC5hcHBseShuLGUpO3JldHVybiBPYmplY3Qobyk9PT1vP286bn0odGhpcyx0LGZ1bmN0aW9uKCl7fSksby5kZWxlZ2F0ZT1uLG8ucmVuZGVyKHIpLG99LHQucHJvdG90eXBlLnJlbmRlclZpZXc9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZGVsZWdhdGUudmlld1dpbGxSZW5kZXIodGhpcy5uZXdCb2R5KSx0KCksdGhpcy5kZWxlZ2F0ZS52aWV3UmVuZGVyZWQodGhpcy5uZXdCb2R5KX0sdC5wcm90b3R5cGUuaW52YWxpZGF0ZVZpZXc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kZWxlZ2F0ZS52aWV3SW52YWxpZGF0ZWQoKX0sdC5wcm90b3R5cGUuY3JlYXRlU2NyaXB0RWxlbWVudD1mdW5jdGlvbih0KXt2YXIgZTtyZXR1cm5cImZhbHNlXCI9PT10LmdldEF0dHJpYnV0ZShcImRhdGEtdHVyYm9saW5rcy1ldmFsXCIpP3Q6KGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKSxlLnRleHRDb250ZW50PXQudGV4dENvbnRlbnQscihlLHQpLGUpfSxyPWZ1bmN0aW9uKHQsZSl7dmFyIHIsbixvLGkscyxhLHU7Zm9yKGk9ZS5hdHRyaWJ1dGVzLGE9W10scj0wLG49aS5sZW5ndGg7bj5yO3IrKylzPWlbcl0sbz1zLm5hbWUsdT1zLnZhbHVlLGEucHVzaCh0LnNldEF0dHJpYnV0ZShvLHUpKTtyZXR1cm4gYX0sdH0oKX0uY2FsbCh0aGlzKSxmdW5jdGlvbigpe3QuSGVhZERldGFpbHM9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe3ZhciBlLHIsaSxzLGEsdSxjO2Zvcih0aGlzLmVsZW1lbnQ9dCx0aGlzLmVsZW1lbnRzPXt9LGM9dGhpcy5lbGVtZW50LmNoaWxkTm9kZXMscz0wLHU9Yy5sZW5ndGg7dT5zO3MrKylpPWNbc10saS5ub2RlVHlwZT09PU5vZGUuRUxFTUVOVF9OT0RFJiYoYT1pLm91dGVySFRNTCxyPW51bGwhPShlPXRoaXMuZWxlbWVudHMpW2FdP2VbYV06ZVthXT17dHlwZTpvKGkpLHRyYWNrZWQ6bihpKSxlbGVtZW50czpbXX0sci5lbGVtZW50cy5wdXNoKGkpKX12YXIgZSxyLG4sbztyZXR1cm4gdC5wcm90b3R5cGUuaGFzRWxlbWVudFdpdGhLZXk9ZnVuY3Rpb24odCl7cmV0dXJuIHQgaW4gdGhpcy5lbGVtZW50c30sdC5wcm90b3R5cGUuZ2V0VHJhY2tlZEVsZW1lbnRTaWduYXR1cmU9ZnVuY3Rpb24oKXt2YXIgdCxlO3JldHVybiBmdW5jdGlvbigpe3ZhciByLG47cj10aGlzLmVsZW1lbnRzLG49W107Zm9yKHQgaW4gcillPXJbdF0udHJhY2tlZCxlJiZuLnB1c2godCk7cmV0dXJuIG59LmNhbGwodGhpcykuam9pbihcIlwiKX0sdC5wcm90b3R5cGUuZ2V0U2NyaXB0RWxlbWVudHNOb3RJbkRldGFpbHM9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZ2V0RWxlbWVudHNNYXRjaGluZ1R5cGVOb3RJbkRldGFpbHMoXCJzY3JpcHRcIix0KX0sdC5wcm90b3R5cGUuZ2V0U3R5bGVzaGVldEVsZW1lbnRzTm90SW5EZXRhaWxzPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmdldEVsZW1lbnRzTWF0Y2hpbmdUeXBlTm90SW5EZXRhaWxzKFwic3R5bGVzaGVldFwiLHQpfSx0LnByb3RvdHlwZS5nZXRFbGVtZW50c01hdGNoaW5nVHlwZU5vdEluRGV0YWlscz1mdW5jdGlvbih0LGUpe3ZhciByLG4sbyxpLHMsYTtvPXRoaXMuZWxlbWVudHMscz1bXTtmb3IobiBpbiBvKWk9b1tuXSxhPWkudHlwZSxyPWkuZWxlbWVudHMsYSE9PXR8fGUuaGFzRWxlbWVudFdpdGhLZXkobil8fHMucHVzaChyWzBdKTtyZXR1cm4gc30sdC5wcm90b3R5cGUuZ2V0UHJvdmlzaW9uYWxFbGVtZW50cz1mdW5jdGlvbigpe3ZhciB0LGUscixuLG8saSxzO3I9W10sbj10aGlzLmVsZW1lbnRzO2ZvcihlIGluIG4pbz1uW2VdLHM9by50eXBlLGk9by50cmFja2VkLHQ9by5lbGVtZW50cyxudWxsIT1zfHxpP3QubGVuZ3RoPjEmJnIucHVzaC5hcHBseShyLHQuc2xpY2UoMSkpOnIucHVzaC5hcHBseShyLHQpO3JldHVybiByfSxvPWZ1bmN0aW9uKHQpe3JldHVybiBlKHQpP1wic2NyaXB0XCI6cih0KT9cInN0eWxlc2hlZXRcIjp2b2lkIDB9LG49ZnVuY3Rpb24odCl7cmV0dXJuXCJyZWxvYWRcIj09PXQuZ2V0QXR0cmlidXRlKFwiZGF0YS10dXJib2xpbmtzLXRyYWNrXCIpfSxlPWZ1bmN0aW9uKHQpe3ZhciBlO3JldHVybiBlPXQudGFnTmFtZS50b0xvd2VyQ2FzZSgpLFwic2NyaXB0XCI9PT1lfSxyPWZ1bmN0aW9uKHQpe3ZhciBlO3JldHVybiBlPXQudGFnTmFtZS50b0xvd2VyQ2FzZSgpLFwic3R5bGVcIj09PWV8fFwibGlua1wiPT09ZSYmXCJzdHlsZXNoZWV0XCI9PT10LmdldEF0dHJpYnV0ZShcInJlbFwiKX0sdH0oKX0uY2FsbCh0aGlzKSxmdW5jdGlvbigpe3ZhciBlPWZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gbigpe3RoaXMuY29uc3RydWN0b3I9dH1mb3IodmFyIG8gaW4gZSlyLmNhbGwoZSxvKSYmKHRbb109ZVtvXSk7cmV0dXJuIG4ucHJvdG90eXBlPWUucHJvdG90eXBlLHQucHJvdG90eXBlPW5ldyBuLHQuX19zdXBlcl9fPWUucHJvdG90eXBlLHR9LHI9e30uaGFzT3duUHJvcGVydHk7dC5TbmFwc2hvdFJlbmRlcmVyPWZ1bmN0aW9uKHIpe2Z1bmN0aW9uIG4oZSxyKXt0aGlzLmN1cnJlbnRTbmFwc2hvdD1lLHRoaXMubmV3U25hcHNob3Q9cix0aGlzLmN1cnJlbnRIZWFkRGV0YWlscz1uZXcgdC5IZWFkRGV0YWlscyh0aGlzLmN1cnJlbnRTbmFwc2hvdC5oZWFkKSx0aGlzLm5ld0hlYWREZXRhaWxzPW5ldyB0LkhlYWREZXRhaWxzKHRoaXMubmV3U25hcHNob3QuaGVhZCksdGhpcy5uZXdCb2R5PXRoaXMubmV3U25hcHNob3QuYm9keX1yZXR1cm4gZShuLHIpLG4ucHJvdG90eXBlLnJlbmRlcj1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy50cmFja2VkRWxlbWVudHNBcmVJZGVudGljYWwoKT8odGhpcy5tZXJnZUhlYWQoKSx0aGlzLnJlbmRlclZpZXcoZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGUucmVwbGFjZUJvZHkoKSxlLmZvY3VzRmlyc3RBdXRvZm9jdXNhYmxlRWxlbWVudCgpLHQoKX19KHRoaXMpKSk6dGhpcy5pbnZhbGlkYXRlVmlldygpfSxuLnByb3RvdHlwZS5tZXJnZUhlYWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb3B5TmV3SGVhZFN0eWxlc2hlZXRFbGVtZW50cygpLHRoaXMuY29weU5ld0hlYWRTY3JpcHRFbGVtZW50cygpLHRoaXMucmVtb3ZlQ3VycmVudEhlYWRQcm92aXNpb25hbEVsZW1lbnRzKCksdGhpcy5jb3B5TmV3SGVhZFByb3Zpc2lvbmFsRWxlbWVudHMoKX0sbi5wcm90b3R5cGUucmVwbGFjZUJvZHk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hY3RpdmF0ZUJvZHlTY3JpcHRFbGVtZW50cygpLHRoaXMuaW1wb3J0Qm9keVBlcm1hbmVudEVsZW1lbnRzKCksdGhpcy5hc3NpZ25OZXdCb2R5KCl9LG4ucHJvdG90eXBlLnRyYWNrZWRFbGVtZW50c0FyZUlkZW50aWNhbD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmN1cnJlbnRIZWFkRGV0YWlscy5nZXRUcmFja2VkRWxlbWVudFNpZ25hdHVyZSgpPT09dGhpcy5uZXdIZWFkRGV0YWlscy5nZXRUcmFja2VkRWxlbWVudFNpZ25hdHVyZSgpfSxuLnByb3RvdHlwZS5jb3B5TmV3SGVhZFN0eWxlc2hlZXRFbGVtZW50cz1mdW5jdGlvbigpe3ZhciB0LGUscixuLG87Zm9yKG49dGhpcy5nZXROZXdIZWFkU3R5bGVzaGVldEVsZW1lbnRzKCksbz1bXSxlPTAscj1uLmxlbmd0aDtyPmU7ZSsrKXQ9bltlXSxvLnB1c2goZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZCh0KSk7cmV0dXJuIG99LG4ucHJvdG90eXBlLmNvcHlOZXdIZWFkU2NyaXB0RWxlbWVudHM9ZnVuY3Rpb24oKXt2YXIgdCxlLHIsbixvO2ZvcihuPXRoaXMuZ2V0TmV3SGVhZFNjcmlwdEVsZW1lbnRzKCksbz1bXSxlPTAscj1uLmxlbmd0aDtyPmU7ZSsrKXQ9bltlXSxvLnB1c2goZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZVNjcmlwdEVsZW1lbnQodCkpKTtyZXR1cm4gb30sbi5wcm90b3R5cGUucmVtb3ZlQ3VycmVudEhlYWRQcm92aXNpb25hbEVsZW1lbnRzPWZ1bmN0aW9uKCl7dmFyIHQsZSxyLG4sbztmb3Iobj10aGlzLmdldEN1cnJlbnRIZWFkUHJvdmlzaW9uYWxFbGVtZW50cygpLG89W10sZT0wLHI9bi5sZW5ndGg7cj5lO2UrKyl0PW5bZV0sby5wdXNoKGRvY3VtZW50LmhlYWQucmVtb3ZlQ2hpbGQodCkpO3JldHVybiBvfSxuLnByb3RvdHlwZS5jb3B5TmV3SGVhZFByb3Zpc2lvbmFsRWxlbWVudHM9ZnVuY3Rpb24oKXt2YXIgdCxlLHIsbixvO2ZvcihuPXRoaXMuZ2V0TmV3SGVhZFByb3Zpc2lvbmFsRWxlbWVudHMoKSxvPVtdLGU9MCxyPW4ubGVuZ3RoO3I+ZTtlKyspdD1uW2VdLG8ucHVzaChkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHQpKTtyZXR1cm4gb30sbi5wcm90b3R5cGUuaW1wb3J0Qm9keVBlcm1hbmVudEVsZW1lbnRzPWZ1bmN0aW9uKCl7dmFyIHQsZSxyLG4sbyxpO2ZvcihuPXRoaXMuZ2V0TmV3Qm9keVBlcm1hbmVudEVsZW1lbnRzKCksaT1bXSxlPTAscj1uLmxlbmd0aDtyPmU7ZSsrKW89bltlXSwodD10aGlzLmZpbmRDdXJyZW50Qm9keVBlcm1hbmVudEVsZW1lbnQobykpP2kucHVzaChvLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKHQsbykpOmkucHVzaCh2b2lkIDApO3JldHVybiBpfSxuLnByb3RvdHlwZS5hY3RpdmF0ZUJvZHlTY3JpcHRFbGVtZW50cz1mdW5jdGlvbigpe3ZhciB0LGUscixuLG8saTtmb3Iobj10aGlzLmdldE5ld0JvZHlTY3JpcHRFbGVtZW50cygpLGk9W10sZT0wLHI9bi5sZW5ndGg7cj5lO2UrKylvPW5bZV0sdD10aGlzLmNyZWF0ZVNjcmlwdEVsZW1lbnQobyksaS5wdXNoKG8ucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQodCxvKSk7cmV0dXJuIGl9LG4ucHJvdG90eXBlLmFzc2lnbk5ld0JvZHk9ZnVuY3Rpb24oKXtyZXR1cm4gZG9jdW1lbnQuYm9keT10aGlzLm5ld0JvZHl9LG4ucHJvdG90eXBlLmZvY3VzRmlyc3RBdXRvZm9jdXNhYmxlRWxlbWVudD1mdW5jdGlvbigpe3ZhciB0O3JldHVybiBudWxsIT0odD10aGlzLmZpbmRGaXJzdEF1dG9mb2N1c2FibGVFbGVtZW50KCkpP3QuZm9jdXMoKTp2b2lkIDB9LG4ucHJvdG90eXBlLmdldE5ld0hlYWRTdHlsZXNoZWV0RWxlbWVudHM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5uZXdIZWFkRGV0YWlscy5nZXRTdHlsZXNoZWV0RWxlbWVudHNOb3RJbkRldGFpbHModGhpcy5jdXJyZW50SGVhZERldGFpbHMpfSxuLnByb3RvdHlwZS5nZXROZXdIZWFkU2NyaXB0RWxlbWVudHM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5uZXdIZWFkRGV0YWlscy5nZXRTY3JpcHRFbGVtZW50c05vdEluRGV0YWlscyh0aGlzLmN1cnJlbnRIZWFkRGV0YWlscyl9LG4ucHJvdG90eXBlLmdldEN1cnJlbnRIZWFkUHJvdmlzaW9uYWxFbGVtZW50cz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmN1cnJlbnRIZWFkRGV0YWlscy5nZXRQcm92aXNpb25hbEVsZW1lbnRzKCl9LG4ucHJvdG90eXBlLmdldE5ld0hlYWRQcm92aXNpb25hbEVsZW1lbnRzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubmV3SGVhZERldGFpbHMuZ2V0UHJvdmlzaW9uYWxFbGVtZW50cygpfSxuLnByb3RvdHlwZS5nZXROZXdCb2R5UGVybWFuZW50RWxlbWVudHM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5uZXdCb2R5LnF1ZXJ5U2VsZWN0b3JBbGwoXCJbaWRdW2RhdGEtdHVyYm9saW5rcy1wZXJtYW5lbnRdXCIpfSxuLnByb3RvdHlwZS5maW5kQ3VycmVudEJvZHlQZXJtYW5lbnRFbGVtZW50PWZ1bmN0aW9uKHQpe3JldHVybiBkb2N1bWVudC5ib2R5LnF1ZXJ5U2VsZWN0b3IoXCIjXCIrdC5pZCtcIltkYXRhLXR1cmJvbGlua3MtcGVybWFuZW50XVwiKX0sbi5wcm90b3R5cGUuZ2V0TmV3Qm9keVNjcmlwdEVsZW1lbnRzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubmV3Qm9keS5xdWVyeVNlbGVjdG9yQWxsKFwic2NyaXB0XCIpfSxuLnByb3RvdHlwZS5maW5kRmlyc3RBdXRvZm9jdXNhYmxlRWxlbWVudD1mdW5jdGlvbigpe3JldHVybiBkb2N1bWVudC5ib2R5LnF1ZXJ5U2VsZWN0b3IoXCJbYXV0b2ZvY3VzXVwiKX0sbn0odC5SZW5kZXJlcil9LmNhbGwodGhpcyksZnVuY3Rpb24oKXt2YXIgZT1mdW5jdGlvbih0LGUpe2Z1bmN0aW9uIG4oKXt0aGlzLmNvbnN0cnVjdG9yPXR9Zm9yKHZhciBvIGluIGUpci5jYWxsKGUsbykmJih0W29dPWVbb10pO3JldHVybiBuLnByb3RvdHlwZT1lLnByb3RvdHlwZSx0LnByb3RvdHlwZT1uZXcgbix0Ll9fc3VwZXJfXz1lLnByb3RvdHlwZSx0fSxyPXt9Lmhhc093blByb3BlcnR5O3QuRXJyb3JSZW5kZXJlcj1mdW5jdGlvbih0KXtmdW5jdGlvbiByKHQpe3RoaXMuaHRtbD10fXJldHVybiBlKHIsdCksci5wcm90b3R5cGUucmVuZGVyPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnJlbmRlclZpZXcoZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGUucmVwbGFjZURvY3VtZW50SFRNTCgpLGUuYWN0aXZhdGVCb2R5U2NyaXB0RWxlbWVudHMoKSx0KCl9fSh0aGlzKSl9LHIucHJvdG90eXBlLnJlcGxhY2VEb2N1bWVudEhUTUw9ZnVuY3Rpb24oKXtyZXR1cm4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmlubmVySFRNTD10aGlzLmh0bWx9LHIucHJvdG90eXBlLmFjdGl2YXRlQm9keVNjcmlwdEVsZW1lbnRzPWZ1bmN0aW9uKCl7dmFyIHQsZSxyLG4sbyxpO2ZvcihuPXRoaXMuZ2V0U2NyaXB0RWxlbWVudHMoKSxpPVtdLGU9MCxyPW4ubGVuZ3RoO3I+ZTtlKyspbz1uW2VdLHQ9dGhpcy5jcmVhdGVTY3JpcHRFbGVtZW50KG8pLGkucHVzaChvLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKHQsbykpO3JldHVybiBpfSxyLnByb3RvdHlwZS5nZXRTY3JpcHRFbGVtZW50cz1mdW5jdGlvbigpe3JldHVybiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcInNjcmlwdFwiKX0scn0odC5SZW5kZXJlcil9LmNhbGwodGhpcyksZnVuY3Rpb24oKXt0LlZpZXc9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe3RoaXMuZGVsZWdhdGU9dCx0aGlzLmVsZW1lbnQ9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50fXJldHVybiBlLnByb3RvdHlwZS5nZXRSb290TG9jYXRpb249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRTbmFwc2hvdCgpLmdldFJvb3RMb2NhdGlvbigpfSxlLnByb3RvdHlwZS5nZXRTbmFwc2hvdD1mdW5jdGlvbigpe3JldHVybiB0LlNuYXBzaG90LmZyb21FbGVtZW50KHRoaXMuZWxlbWVudCl9LGUucHJvdG90eXBlLnJlbmRlcj1mdW5jdGlvbih0LGUpe3ZhciByLG4sbztyZXR1cm4gbz10LnNuYXBzaG90LHI9dC5lcnJvcixuPXQuaXNQcmV2aWV3LHRoaXMubWFya0FzUHJldmlldyhuKSxudWxsIT1vP3RoaXMucmVuZGVyU25hcHNob3QobyxlKTp0aGlzLnJlbmRlckVycm9yKHIsZSl9LGUucHJvdG90eXBlLm1hcmtBc1ByZXZpZXc9ZnVuY3Rpb24odCl7cmV0dXJuIHQ/dGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZShcImRhdGEtdHVyYm9saW5rcy1wcmV2aWV3XCIsXCJcIik6dGhpcy5lbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShcImRhdGEtdHVyYm9saW5rcy1wcmV2aWV3XCIpfSxlLnByb3RvdHlwZS5yZW5kZXJTbmFwc2hvdD1mdW5jdGlvbihlLHIpe3JldHVybiB0LlNuYXBzaG90UmVuZGVyZXIucmVuZGVyKHRoaXMuZGVsZWdhdGUscix0aGlzLmdldFNuYXBzaG90KCksdC5TbmFwc2hvdC53cmFwKGUpKX0sZS5wcm90b3R5cGUucmVuZGVyRXJyb3I9ZnVuY3Rpb24oZSxyKXtyZXR1cm4gdC5FcnJvclJlbmRlcmVyLnJlbmRlcih0aGlzLmRlbGVnYXRlLHIsZSl9LGV9KCl9LmNhbGwodGhpcyksZnVuY3Rpb24oKXt2YXIgZT1mdW5jdGlvbih0LGUpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0LmFwcGx5KGUsYXJndW1lbnRzKX19O3QuU2Nyb2xsTWFuYWdlcj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCl7dGhpcy5kZWxlZ2F0ZT10LHRoaXMub25TY3JvbGw9ZSh0aGlzLm9uU2Nyb2xsLHRoaXMpfXJldHVybiB0LnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnN0YXJ0ZWQ/dm9pZCAwOihhZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsdGhpcy5vblNjcm9sbCwhMSksdGhpcy5vblNjcm9sbCgpLHRoaXMuc3RhcnRlZD0hMCl9LHQucHJvdG90eXBlLnN0b3A9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdGFydGVkPyhyZW1vdmVFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsdGhpcy5vblNjcm9sbCwhMSksdGhpcy5zdGFydGVkPSExKTp2b2lkIDB9LHQucHJvdG90eXBlLnNjcm9sbFRvRWxlbWVudD1mdW5jdGlvbih0KXtyZXR1cm4gdC5zY3JvbGxJbnRvVmlldygpfSx0LnByb3RvdHlwZS5zY3JvbGxUb1Bvc2l0aW9uPWZ1bmN0aW9uKHQpe3ZhciBlLHI7cmV0dXJuIGU9dC54LHI9dC55LHdpbmRvdy5zY3JvbGxUbyhlLHIpfSx0LnByb3RvdHlwZS5vblNjcm9sbD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy51cGRhdGVQb3NpdGlvbih7eDp3aW5kb3cucGFnZVhPZmZzZXQseTp3aW5kb3cucGFnZVlPZmZzZXR9KX0sdC5wcm90b3R5cGUudXBkYXRlUG9zaXRpb249ZnVuY3Rpb24odCl7dmFyIGU7cmV0dXJuIHRoaXMucG9zaXRpb249dCxudWxsIT0oZT10aGlzLmRlbGVnYXRlKT9lLnNjcm9sbFBvc2l0aW9uQ2hhbmdlZCh0aGlzLnBvc2l0aW9uKTp2b2lkIDB9LHR9KCl9LmNhbGwodGhpcyksZnVuY3Rpb24oKXt0LlNuYXBzaG90Q2FjaGU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe3RoaXMuc2l6ZT10LHRoaXMua2V5cz1bXSx0aGlzLnNuYXBzaG90cz17fX12YXIgcjtyZXR1cm4gZS5wcm90b3R5cGUuaGFzPWZ1bmN0aW9uKHQpe3ZhciBlO3JldHVybiBlPXIodCksZSBpbiB0aGlzLnNuYXBzaG90c30sZS5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKHQpe3ZhciBlO2lmKHRoaXMuaGFzKHQpKXJldHVybiBlPXRoaXMucmVhZCh0KSx0aGlzLnRvdWNoKHQpLGV9LGUucHJvdG90eXBlLnB1dD1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLndyaXRlKHQsZSksdGhpcy50b3VjaCh0KSxlfSxlLnByb3RvdHlwZS5yZWFkPWZ1bmN0aW9uKHQpe3ZhciBlO3JldHVybiBlPXIodCksdGhpcy5zbmFwc2hvdHNbZV19LGUucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKHQsZSl7dmFyIG47cmV0dXJuIG49cih0KSx0aGlzLnNuYXBzaG90c1tuXT1lfSxlLnByb3RvdHlwZS50b3VjaD1mdW5jdGlvbih0KXt2YXIgZSxuO3JldHVybiBuPXIodCksZT10aGlzLmtleXMuaW5kZXhPZihuKSxlPi0xJiZ0aGlzLmtleXMuc3BsaWNlKGUsMSksdGhpcy5rZXlzLnVuc2hpZnQobiksdGhpcy50cmltKCl9LGUucHJvdG90eXBlLnRyaW09ZnVuY3Rpb24oKXt2YXIgdCxlLHIsbixvO2ZvcihuPXRoaXMua2V5cy5zcGxpY2UodGhpcy5zaXplKSxvPVtdLHQ9MCxyPW4ubGVuZ3RoO3I+dDt0KyspZT1uW3RdLG8ucHVzaChkZWxldGUgdGhpcy5zbmFwc2hvdHNbZV0pO3JldHVybiBvfSxyPWZ1bmN0aW9uKGUpe3JldHVybiB0LkxvY2F0aW9uLndyYXAoZSkudG9DYWNoZUtleSgpfSxlfSgpfS5jYWxsKHRoaXMpLGZ1bmN0aW9uKCl7dmFyIGU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdC5hcHBseShlLGFyZ3VtZW50cyl9fTt0LlZpc2l0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihyLG4sbyl7dGhpcy5jb250cm9sbGVyPXIsdGhpcy5hY3Rpb249byx0aGlzLnBlcmZvcm1TY3JvbGw9ZSh0aGlzLnBlcmZvcm1TY3JvbGwsdGhpcyksdGhpcy5pZGVudGlmaWVyPXQudXVpZCgpLHRoaXMubG9jYXRpb249dC5Mb2NhdGlvbi53cmFwKG4pLHRoaXMuYWRhcHRlcj10aGlzLmNvbnRyb2xsZXIuYWRhcHRlcix0aGlzLnN0YXRlPVwiaW5pdGlhbGl6ZWRcIix0aGlzLnRpbWluZ01ldHJpY3M9e319dmFyIG47cmV0dXJuIHIucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKCl7cmV0dXJuXCJpbml0aWFsaXplZFwiPT09dGhpcy5zdGF0ZT8odGhpcy5yZWNvcmRUaW1pbmdNZXRyaWMoXCJ2aXNpdFN0YXJ0XCIpLHRoaXMuc3RhdGU9XCJzdGFydGVkXCIsdGhpcy5hZGFwdGVyLnZpc2l0U3RhcnRlZCh0aGlzKSk6dm9pZCAwfSxyLnByb3RvdHlwZS5jYW5jZWw9ZnVuY3Rpb24oKXt2YXIgdDtyZXR1cm5cInN0YXJ0ZWRcIj09PXRoaXMuc3RhdGU/KG51bGwhPSh0PXRoaXMucmVxdWVzdCkmJnQuY2FuY2VsKCksdGhpcy5jYW5jZWxSZW5kZXIoKSx0aGlzLnN0YXRlPVwiY2FuY2VsZWRcIik6dm9pZCAwfSxyLnByb3RvdHlwZS5jb21wbGV0ZT1mdW5jdGlvbigpe3ZhciB0O3JldHVyblwic3RhcnRlZFwiPT09dGhpcy5zdGF0ZT8odGhpcy5yZWNvcmRUaW1pbmdNZXRyaWMoXCJ2aXNpdEVuZFwiKSx0aGlzLnN0YXRlPVwiY29tcGxldGVkXCIsXCJmdW5jdGlvblwiPT10eXBlb2YodD10aGlzLmFkYXB0ZXIpLnZpc2l0Q29tcGxldGVkJiZ0LnZpc2l0Q29tcGxldGVkKHRoaXMpLHRoaXMuY29udHJvbGxlci52aXNpdENvbXBsZXRlZCh0aGlzKSk6dm9pZCAwfSxyLnByb3RvdHlwZS5mYWlsPWZ1bmN0aW9uKCl7dmFyIHQ7cmV0dXJuXCJzdGFydGVkXCI9PT10aGlzLnN0YXRlPyh0aGlzLnN0YXRlPVwiZmFpbGVkXCIsXCJmdW5jdGlvblwiPT10eXBlb2YodD10aGlzLmFkYXB0ZXIpLnZpc2l0RmFpbGVkP3QudmlzaXRGYWlsZWQodGhpcyk6dm9pZCAwKTp2b2lkIDB9LHIucHJvdG90eXBlLmNoYW5nZUhpc3Rvcnk9ZnVuY3Rpb24oKXt2YXIgdCxlO3JldHVybiB0aGlzLmhpc3RvcnlDaGFuZ2VkP3ZvaWQgMDoodD10aGlzLmxvY2F0aW9uLmlzRXF1YWxUbyh0aGlzLnJlZmVycmVyKT9cInJlcGxhY2VcIjp0aGlzLmFjdGlvbixlPW4odCksdGhpcy5jb250cm9sbGVyW2VdKHRoaXMubG9jYXRpb24sdGhpcy5yZXN0b3JhdGlvbklkZW50aWZpZXIpLHRoaXMuaGlzdG9yeUNoYW5nZWQ9ITApfSxyLnByb3RvdHlwZS5pc3N1ZVJlcXVlc3Q9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zaG91bGRJc3N1ZVJlcXVlc3QoKSYmbnVsbD09dGhpcy5yZXF1ZXN0Pyh0aGlzLnByb2dyZXNzPTAsdGhpcy5yZXF1ZXN0PW5ldyB0Lkh0dHBSZXF1ZXN0KHRoaXMsdGhpcy5sb2NhdGlvbix0aGlzLnJlZmVycmVyKSx0aGlzLnJlcXVlc3Quc2VuZCgpKTp2b2lkIDB9LHIucHJvdG90eXBlLmdldENhY2hlZFNuYXBzaG90PWZ1bmN0aW9uKCl7dmFyIHQ7cmV0dXJuISh0PXRoaXMuY29udHJvbGxlci5nZXRDYWNoZWRTbmFwc2hvdEZvckxvY2F0aW9uKHRoaXMubG9jYXRpb24pKXx8bnVsbCE9dGhpcy5sb2NhdGlvbi5hbmNob3ImJiF0Lmhhc0FuY2hvcih0aGlzLmxvY2F0aW9uLmFuY2hvcil8fFwicmVzdG9yZVwiIT09dGhpcy5hY3Rpb24mJiF0LmlzUHJldmlld2FibGUoKT92b2lkIDA6dH0sci5wcm90b3R5cGUuaGFzQ2FjaGVkU25hcHNob3Q9ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbCE9dGhpcy5nZXRDYWNoZWRTbmFwc2hvdCgpfSxyLnByb3RvdHlwZS5sb2FkQ2FjaGVkU25hcHNob3Q9ZnVuY3Rpb24oKXt2YXIgdCxlO3JldHVybihlPXRoaXMuZ2V0Q2FjaGVkU25hcHNob3QoKSk/KHQ9dGhpcy5zaG91bGRJc3N1ZVJlcXVlc3QoKSx0aGlzLnJlbmRlcihmdW5jdGlvbigpe3ZhciByO3JldHVybiB0aGlzLmNhY2hlU25hcHNob3QoKSx0aGlzLmNvbnRyb2xsZXIucmVuZGVyKHtzbmFwc2hvdDplLGlzUHJldmlldzp0fSx0aGlzLnBlcmZvcm1TY3JvbGwpLFwiZnVuY3Rpb25cIj09dHlwZW9mKHI9dGhpcy5hZGFwdGVyKS52aXNpdFJlbmRlcmVkJiZyLnZpc2l0UmVuZGVyZWQodGhpcyksdD92b2lkIDA6dGhpcy5jb21wbGV0ZSgpfSkpOnZvaWQgMH0sci5wcm90b3R5cGUubG9hZFJlc3BvbnNlPWZ1bmN0aW9uKCl7cmV0dXJuIG51bGwhPXRoaXMucmVzcG9uc2U/dGhpcy5yZW5kZXIoZnVuY3Rpb24oKXt2YXIgdCxlO3JldHVybiB0aGlzLmNhY2hlU25hcHNob3QoKSx0aGlzLnJlcXVlc3QuZmFpbGVkPyh0aGlzLmNvbnRyb2xsZXIucmVuZGVyKHtlcnJvcjp0aGlzLnJlc3BvbnNlfSx0aGlzLnBlcmZvcm1TY3JvbGwpLFwiZnVuY3Rpb25cIj09dHlwZW9mKHQ9dGhpcy5hZGFwdGVyKS52aXNpdFJlbmRlcmVkJiZ0LnZpc2l0UmVuZGVyZWQodGhpcyksdGhpcy5mYWlsKCkpOih0aGlzLmNvbnRyb2xsZXIucmVuZGVyKHtzbmFwc2hvdDp0aGlzLnJlc3BvbnNlfSx0aGlzLnBlcmZvcm1TY3JvbGwpLFwiZnVuY3Rpb25cIj09dHlwZW9mKGU9dGhpcy5hZGFwdGVyKS52aXNpdFJlbmRlcmVkJiZlLnZpc2l0UmVuZGVyZWQodGhpcyksdGhpcy5jb21wbGV0ZSgpKX0pOnZvaWQgMH0sci5wcm90b3R5cGUuZm9sbG93UmVkaXJlY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZWRpcmVjdGVkVG9Mb2NhdGlvbiYmIXRoaXMuZm9sbG93ZWRSZWRpcmVjdD8odGhpcy5sb2NhdGlvbj10aGlzLnJlZGlyZWN0ZWRUb0xvY2F0aW9uLHRoaXMuY29udHJvbGxlci5yZXBsYWNlSGlzdG9yeVdpdGhMb2NhdGlvbkFuZFJlc3RvcmF0aW9uSWRlbnRpZmllcih0aGlzLnJlZGlyZWN0ZWRUb0xvY2F0aW9uLHRoaXMucmVzdG9yYXRpb25JZGVudGlmaWVyKSx0aGlzLmZvbGxvd2VkUmVkaXJlY3Q9ITApOnZvaWQgMH0sci5wcm90b3R5cGUucmVxdWVzdFN0YXJ0ZWQ9ZnVuY3Rpb24oKXt2YXIgdDtyZXR1cm4gdGhpcy5yZWNvcmRUaW1pbmdNZXRyaWMoXCJyZXF1ZXN0U3RhcnRcIiksXCJmdW5jdGlvblwiPT10eXBlb2YodD10aGlzLmFkYXB0ZXIpLnZpc2l0UmVxdWVzdFN0YXJ0ZWQ/dC52aXNpdFJlcXVlc3RTdGFydGVkKHRoaXMpOnZvaWQgMH0sci5wcm90b3R5cGUucmVxdWVzdFByb2dyZXNzZWQ9ZnVuY3Rpb24odCl7dmFyIGU7cmV0dXJuIHRoaXMucHJvZ3Jlc3M9dCxcImZ1bmN0aW9uXCI9PXR5cGVvZihlPXRoaXMuYWRhcHRlcikudmlzaXRSZXF1ZXN0UHJvZ3Jlc3NlZD9lLnZpc2l0UmVxdWVzdFByb2dyZXNzZWQodGhpcyk6dm9pZCAwfSxyLnByb3RvdHlwZS5yZXF1ZXN0Q29tcGxldGVkV2l0aFJlc3BvbnNlPWZ1bmN0aW9uKGUscil7cmV0dXJuIHRoaXMucmVzcG9uc2U9ZSxudWxsIT1yJiYodGhpcy5yZWRpcmVjdGVkVG9Mb2NhdGlvbj10LkxvY2F0aW9uLndyYXAocikpLHRoaXMuYWRhcHRlci52aXNpdFJlcXVlc3RDb21wbGV0ZWQodGhpcyl9LHIucHJvdG90eXBlLnJlcXVlc3RGYWlsZWRXaXRoU3RhdHVzQ29kZT1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLnJlc3BvbnNlPWUsdGhpcy5hZGFwdGVyLnZpc2l0UmVxdWVzdEZhaWxlZFdpdGhTdGF0dXNDb2RlKHRoaXMsdCl9LHIucHJvdG90eXBlLnJlcXVlc3RGaW5pc2hlZD1mdW5jdGlvbigpe3ZhciB0O3JldHVybiB0aGlzLnJlY29yZFRpbWluZ01ldHJpYyhcInJlcXVlc3RFbmRcIiksXCJmdW5jdGlvblwiPT10eXBlb2YodD10aGlzLmFkYXB0ZXIpLnZpc2l0UmVxdWVzdEZpbmlzaGVkP3QudmlzaXRSZXF1ZXN0RmluaXNoZWQodGhpcyk6dm9pZCAwfSxyLnByb3RvdHlwZS5wZXJmb3JtU2Nyb2xsPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2Nyb2xsZWQ/dm9pZCAwOihcInJlc3RvcmVcIj09PXRoaXMuYWN0aW9uP3RoaXMuc2Nyb2xsVG9SZXN0b3JlZFBvc2l0aW9uKCl8fHRoaXMuc2Nyb2xsVG9Ub3AoKTp0aGlzLnNjcm9sbFRvQW5jaG9yKCl8fHRoaXMuc2Nyb2xsVG9Ub3AoKSx0aGlzLnNjcm9sbGVkPSEwKX0sci5wcm90b3R5cGUuc2Nyb2xsVG9SZXN0b3JlZFBvc2l0aW9uPWZ1bmN0aW9uKCl7dmFyIHQsZTtyZXR1cm4gdD1udWxsIT0oZT10aGlzLnJlc3RvcmF0aW9uRGF0YSk/ZS5zY3JvbGxQb3NpdGlvbjp2b2lkIDAsbnVsbCE9dD8odGhpcy5jb250cm9sbGVyLnNjcm9sbFRvUG9zaXRpb24odCksITApOnZvaWQgMH0sci5wcm90b3R5cGUuc2Nyb2xsVG9BbmNob3I9ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbCE9dGhpcy5sb2NhdGlvbi5hbmNob3I/KHRoaXMuY29udHJvbGxlci5zY3JvbGxUb0FuY2hvcih0aGlzLmxvY2F0aW9uLmFuY2hvciksITApOnZvaWQgMH0sci5wcm90b3R5cGUuc2Nyb2xsVG9Ub3A9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250cm9sbGVyLnNjcm9sbFRvUG9zaXRpb24oe3g6MCx5OjB9KX0sci5wcm90b3R5cGUucmVjb3JkVGltaW5nTWV0cmljPWZ1bmN0aW9uKHQpe3ZhciBlO3JldHVybiBudWxsIT0oZT10aGlzLnRpbWluZ01ldHJpY3MpW3RdP2VbdF06ZVt0XT0obmV3IERhdGUpLmdldFRpbWUoKX0sci5wcm90b3R5cGUuZ2V0VGltaW5nTWV0cmljcz1mdW5jdGlvbigpe3JldHVybiB0LmNvcHlPYmplY3QodGhpcy50aW1pbmdNZXRyaWNzKX0sbj1mdW5jdGlvbih0KXtzd2l0Y2godCl7Y2FzZVwicmVwbGFjZVwiOnJldHVyblwicmVwbGFjZUhpc3RvcnlXaXRoTG9jYXRpb25BbmRSZXN0b3JhdGlvbklkZW50aWZpZXJcIjtjYXNlXCJhZHZhbmNlXCI6Y2FzZVwicmVzdG9yZVwiOnJldHVyblwicHVzaEhpc3RvcnlXaXRoTG9jYXRpb25BbmRSZXN0b3JhdGlvbklkZW50aWZpZXJcIn19LHIucHJvdG90eXBlLnNob3VsZElzc3VlUmVxdWVzdD1mdW5jdGlvbigpe3JldHVyblwicmVzdG9yZVwiPT09dGhpcy5hY3Rpb24/IXRoaXMuaGFzQ2FjaGVkU25hcHNob3QoKTohMH0sci5wcm90b3R5cGUuY2FjaGVTbmFwc2hvdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNuYXBzaG90Q2FjaGVkP3ZvaWQgMDoodGhpcy5jb250cm9sbGVyLmNhY2hlU25hcHNob3QoKSx0aGlzLnNuYXBzaG90Q2FjaGVkPSEwKX0sci5wcm90b3R5cGUucmVuZGVyPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNhbmNlbFJlbmRlcigpLHRoaXMuZnJhbWU9cmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBlLmZyYW1lPW51bGwsdC5jYWxsKGUpfX0odGhpcykpfSxyLnByb3RvdHlwZS5jYW5jZWxSZW5kZXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5mcmFtZT9jYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLmZyYW1lKTp2b2lkIDB9LHJ9KCl9LmNhbGwodGhpcyksZnVuY3Rpb24oKXt2YXIgZT1mdW5jdGlvbih0LGUpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0LmFwcGx5KGUsYXJndW1lbnRzKX19O3QuQ29udHJvbGxlcj1mdW5jdGlvbigpe2Z1bmN0aW9uIHIoKXt0aGlzLmNsaWNrQnViYmxlZD1lKHRoaXMuY2xpY2tCdWJibGVkLHRoaXMpLHRoaXMuY2xpY2tDYXB0dXJlZD1lKHRoaXMuY2xpY2tDYXB0dXJlZCx0aGlzKSx0aGlzLnBhZ2VMb2FkZWQ9ZSh0aGlzLnBhZ2VMb2FkZWQsdGhpcyksdGhpcy5oaXN0b3J5PW5ldyB0Lkhpc3RvcnkodGhpcyksdGhpcy52aWV3PW5ldyB0LlZpZXcodGhpcyksdGhpcy5zY3JvbGxNYW5hZ2VyPW5ldyB0LlNjcm9sbE1hbmFnZXIodGhpcyksdGhpcy5yZXN0b3JhdGlvbkRhdGE9e30sdGhpcy5jbGVhckNhY2hlKCl9cmV0dXJuIHIucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKCl7cmV0dXJuIHQuc3VwcG9ydGVkJiYhdGhpcy5zdGFydGVkPyhhZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIix0aGlzLmNsaWNrQ2FwdHVyZWQsITApLGFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsdGhpcy5wYWdlTG9hZGVkLCExKSx0aGlzLnNjcm9sbE1hbmFnZXIuc3RhcnQoKSx0aGlzLnN0YXJ0SGlzdG9yeSgpLHRoaXMuc3RhcnRlZD0hMCx0aGlzLmVuYWJsZWQ9ITApOnZvaWQgMH0sci5wcm90b3R5cGUuZGlzYWJsZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmVuYWJsZWQ9ITF9LHIucHJvdG90eXBlLnN0b3A9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdGFydGVkPyhyZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIix0aGlzLmNsaWNrQ2FwdHVyZWQsITApLHJlbW92ZUV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsdGhpcy5wYWdlTG9hZGVkLCExKSx0aGlzLnNjcm9sbE1hbmFnZXIuc3RvcCgpLHRoaXMuc3RvcEhpc3RvcnkoKSx0aGlzLnN0YXJ0ZWQ9ITEpOnZvaWQgMH0sci5wcm90b3R5cGUuY2xlYXJDYWNoZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNhY2hlPW5ldyB0LlNuYXBzaG90Q2FjaGUoMTApfSxyLnByb3RvdHlwZS52aXNpdD1mdW5jdGlvbihlLHIpe3ZhciBuLG87cmV0dXJuIG51bGw9PXImJihyPXt9KSxlPXQuTG9jYXRpb24ud3JhcChlKSx0aGlzLmFwcGxpY2F0aW9uQWxsb3dzVmlzaXRpbmdMb2NhdGlvbihlKT90aGlzLmxvY2F0aW9uSXNWaXNpdGFibGUoZSk/KG49bnVsbCE9KG89ci5hY3Rpb24pP286XCJhZHZhbmNlXCIsdGhpcy5hZGFwdGVyLnZpc2l0UHJvcG9zZWRUb0xvY2F0aW9uV2l0aEFjdGlvbihlLG4pKTp3aW5kb3cubG9jYXRpb249ZTp2b2lkIDB9LHIucHJvdG90eXBlLnN0YXJ0VmlzaXRUb0xvY2F0aW9uV2l0aEFjdGlvbj1mdW5jdGlvbihlLHIsbil7dmFyIG87cmV0dXJuIHQuc3VwcG9ydGVkPyhvPXRoaXMuZ2V0UmVzdG9yYXRpb25EYXRhRm9ySWRlbnRpZmllcihuKSx0aGlzLnN0YXJ0VmlzaXQoZSxyLHtyZXN0b3JhdGlvbkRhdGE6b30pKTp3aW5kb3cubG9jYXRpb249ZX0sci5wcm90b3R5cGUuc3RhcnRIaXN0b3J5PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubG9jYXRpb249dC5Mb2NhdGlvbi53cmFwKHdpbmRvdy5sb2NhdGlvbiksdGhpcy5yZXN0b3JhdGlvbklkZW50aWZpZXI9dC51dWlkKCksdGhpcy5oaXN0b3J5LnN0YXJ0KCksdGhpcy5oaXN0b3J5LnJlcGxhY2UodGhpcy5sb2NhdGlvbix0aGlzLnJlc3RvcmF0aW9uSWRlbnRpZmllcil9LHIucHJvdG90eXBlLnN0b3BIaXN0b3J5PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaGlzdG9yeS5zdG9wKCl9LHIucHJvdG90eXBlLnB1c2hIaXN0b3J5V2l0aExvY2F0aW9uQW5kUmVzdG9yYXRpb25JZGVudGlmaWVyPWZ1bmN0aW9uKGUscil7cmV0dXJuIHRoaXMucmVzdG9yYXRpb25JZGVudGlmaWVyPXIsdGhpcy5sb2NhdGlvbj10LkxvY2F0aW9uLndyYXAoZSksdGhpcy5oaXN0b3J5LnB1c2godGhpcy5sb2NhdGlvbix0aGlzLnJlc3RvcmF0aW9uSWRlbnRpZmllcil9LHIucHJvdG90eXBlLnJlcGxhY2VIaXN0b3J5V2l0aExvY2F0aW9uQW5kUmVzdG9yYXRpb25JZGVudGlmaWVyPWZ1bmN0aW9uKGUscil7cmV0dXJuIHRoaXMucmVzdG9yYXRpb25JZGVudGlmaWVyPXIsdGhpcy5sb2NhdGlvbj10LkxvY2F0aW9uLndyYXAoZSksdGhpcy5oaXN0b3J5LnJlcGxhY2UodGhpcy5sb2NhdGlvbix0aGlzLnJlc3RvcmF0aW9uSWRlbnRpZmllcil9LHIucHJvdG90eXBlLmhpc3RvcnlQb3BwZWRUb0xvY2F0aW9uV2l0aFJlc3RvcmF0aW9uSWRlbnRpZmllcj1mdW5jdGlvbihlLHIpe3ZhciBuO3JldHVybiB0aGlzLnJlc3RvcmF0aW9uSWRlbnRpZmllcj1yLHRoaXMuZW5hYmxlZD8obj10aGlzLmdldFJlc3RvcmF0aW9uRGF0YUZvcklkZW50aWZpZXIodGhpcy5yZXN0b3JhdGlvbklkZW50aWZpZXIpLHRoaXMuc3RhcnRWaXNpdChlLFwicmVzdG9yZVwiLHtyZXN0b3JhdGlvbklkZW50aWZpZXI6dGhpcy5yZXN0b3JhdGlvbklkZW50aWZpZXIscmVzdG9yYXRpb25EYXRhOm4saGlzdG9yeUNoYW5nZWQ6ITB9KSx0aGlzLmxvY2F0aW9uPXQuTG9jYXRpb24ud3JhcChlKSk6dGhpcy5hZGFwdGVyLnBhZ2VJbnZhbGlkYXRlZCgpfSxyLnByb3RvdHlwZS5nZXRDYWNoZWRTbmFwc2hvdEZvckxvY2F0aW9uPWZ1bmN0aW9uKHQpe3ZhciBlO3JldHVybiBlPXRoaXMuY2FjaGUuZ2V0KHQpLGU/ZS5jbG9uZSgpOnZvaWQgMH0sci5wcm90b3R5cGUuc2hvdWxkQ2FjaGVTbmFwc2hvdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnZpZXcuZ2V0U25hcHNob3QoKS5pc0NhY2hlYWJsZSgpfSxyLnByb3RvdHlwZS5jYWNoZVNuYXBzaG90PWZ1bmN0aW9uKCl7dmFyIHQ7cmV0dXJuIHRoaXMuc2hvdWxkQ2FjaGVTbmFwc2hvdCgpPyh0aGlzLm5vdGlmeUFwcGxpY2F0aW9uQmVmb3JlQ2FjaGluZ1NuYXBzaG90KCksdD10aGlzLnZpZXcuZ2V0U25hcHNob3QoKSx0aGlzLmNhY2hlLnB1dCh0aGlzLmxhc3RSZW5kZXJlZExvY2F0aW9uLHQuY2xvbmUoKSkpOnZvaWQgMH0sci5wcm90b3R5cGUuc2Nyb2xsVG9BbmNob3I9ZnVuY3Rpb24odCl7dmFyIGU7cmV0dXJuKGU9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodCkpP3RoaXMuc2Nyb2xsVG9FbGVtZW50KGUpOnRoaXMuc2Nyb2xsVG9Qb3NpdGlvbih7eDowLHk6MH0pfSxyLnByb3RvdHlwZS5zY3JvbGxUb0VsZW1lbnQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuc2Nyb2xsTWFuYWdlci5zY3JvbGxUb0VsZW1lbnQodCl9LHIucHJvdG90eXBlLnNjcm9sbFRvUG9zaXRpb249ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuc2Nyb2xsTWFuYWdlci5zY3JvbGxUb1Bvc2l0aW9uKHQpfSxyLnByb3RvdHlwZS5zY3JvbGxQb3NpdGlvbkNoYW5nZWQ9ZnVuY3Rpb24odCl7dmFyIGU7cmV0dXJuIGU9dGhpcy5nZXRDdXJyZW50UmVzdG9yYXRpb25EYXRhKCksZS5zY3JvbGxQb3NpdGlvbj10fSxyLnByb3RvdHlwZS5yZW5kZXI9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy52aWV3LnJlbmRlcih0LGUpfSxyLnByb3RvdHlwZS52aWV3SW52YWxpZGF0ZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hZGFwdGVyLnBhZ2VJbnZhbGlkYXRlZCgpfSxyLnByb3RvdHlwZS52aWV3V2lsbFJlbmRlcj1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5ub3RpZnlBcHBsaWNhdGlvbkJlZm9yZVJlbmRlcih0KX0sci5wcm90b3R5cGUudmlld1JlbmRlcmVkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGFzdFJlbmRlcmVkTG9jYXRpb249dGhpcy5jdXJyZW50VmlzaXQubG9jYXRpb24sdGhpcy5ub3RpZnlBcHBsaWNhdGlvbkFmdGVyUmVuZGVyKCl9LHIucHJvdG90eXBlLnBhZ2VMb2FkZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sYXN0UmVuZGVyZWRMb2NhdGlvbj10aGlzLmxvY2F0aW9uLHRoaXMubm90aWZ5QXBwbGljYXRpb25BZnRlclBhZ2VMb2FkKCl9LHIucHJvdG90eXBlLmNsaWNrQ2FwdHVyZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gcmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsdGhpcy5jbGlja0J1YmJsZWQsITEpLGFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLHRoaXMuY2xpY2tCdWJibGVkLCExKX0sci5wcm90b3R5cGUuY2xpY2tCdWJibGVkPWZ1bmN0aW9uKHQpe3ZhciBlLHIsbjtyZXR1cm4gdGhpcy5lbmFibGVkJiZ0aGlzLmNsaWNrRXZlbnRJc1NpZ25pZmljYW50KHQpJiYocj10aGlzLmdldFZpc2l0YWJsZUxpbmtGb3JOb2RlKHQudGFyZ2V0KSkmJihuPXRoaXMuZ2V0VmlzaXRhYmxlTG9jYXRpb25Gb3JMaW5rKHIpKSYmdGhpcy5hcHBsaWNhdGlvbkFsbG93c0ZvbGxvd2luZ0xpbmtUb0xvY2F0aW9uKHIsbik/KHQucHJldmVudERlZmF1bHQoKSxlPXRoaXMuZ2V0QWN0aW9uRm9yTGluayhyKSx0aGlzLnZpc2l0KG4se2FjdGlvbjplfSkpOnZvaWQgMH0sci5wcm90b3R5cGUuYXBwbGljYXRpb25BbGxvd3NGb2xsb3dpbmdMaW5rVG9Mb2NhdGlvbj1mdW5jdGlvbih0LGUpe3ZhciByO3JldHVybiByPXRoaXMubm90aWZ5QXBwbGljYXRpb25BZnRlckNsaWNraW5nTGlua1RvTG9jYXRpb24odCxlKSwhci5kZWZhdWx0UHJldmVudGVkfSxyLnByb3RvdHlwZS5hcHBsaWNhdGlvbkFsbG93c1Zpc2l0aW5nTG9jYXRpb249ZnVuY3Rpb24odCl7dmFyIGU7cmV0dXJuIGU9dGhpcy5ub3RpZnlBcHBsaWNhdGlvbkJlZm9yZVZpc2l0aW5nTG9jYXRpb24odCksIWUuZGVmYXVsdFByZXZlbnRlZH0sci5wcm90b3R5cGUubm90aWZ5QXBwbGljYXRpb25BZnRlckNsaWNraW5nTGlua1RvTG9jYXRpb249ZnVuY3Rpb24oZSxyKXtyZXR1cm4gdC5kaXNwYXRjaChcInR1cmJvbGlua3M6Y2xpY2tcIix7dGFyZ2V0OmUsZGF0YTp7dXJsOnIuYWJzb2x1dGVVUkx9LGNhbmNlbGFibGU6ITB9KX0sci5wcm90b3R5cGUubm90aWZ5QXBwbGljYXRpb25CZWZvcmVWaXNpdGluZ0xvY2F0aW9uPWZ1bmN0aW9uKGUpe3JldHVybiB0LmRpc3BhdGNoKFwidHVyYm9saW5rczpiZWZvcmUtdmlzaXRcIix7ZGF0YTp7dXJsOmUuYWJzb2x1dGVVUkx9LGNhbmNlbGFibGU6ITB9KX0sci5wcm90b3R5cGUubm90aWZ5QXBwbGljYXRpb25BZnRlclZpc2l0aW5nTG9jYXRpb249ZnVuY3Rpb24oZSl7cmV0dXJuIHQuZGlzcGF0Y2goXCJ0dXJib2xpbmtzOnZpc2l0XCIse2RhdGE6e3VybDplLmFic29sdXRlVVJMfX0pfSxyLnByb3RvdHlwZS5ub3RpZnlBcHBsaWNhdGlvbkJlZm9yZUNhY2hpbmdTbmFwc2hvdD1mdW5jdGlvbigpe3JldHVybiB0LmRpc3BhdGNoKFwidHVyYm9saW5rczpiZWZvcmUtY2FjaGVcIil9LHIucHJvdG90eXBlLm5vdGlmeUFwcGxpY2F0aW9uQmVmb3JlUmVuZGVyPWZ1bmN0aW9uKGUpe3JldHVybiB0LmRpc3BhdGNoKFwidHVyYm9saW5rczpiZWZvcmUtcmVuZGVyXCIse2RhdGE6e25ld0JvZHk6ZX19KX0sci5wcm90b3R5cGUubm90aWZ5QXBwbGljYXRpb25BZnRlclJlbmRlcj1mdW5jdGlvbigpe3JldHVybiB0LmRpc3BhdGNoKFwidHVyYm9saW5rczpyZW5kZXJcIil9LHIucHJvdG90eXBlLm5vdGlmeUFwcGxpY2F0aW9uQWZ0ZXJQYWdlTG9hZD1mdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09ZSYmKGU9e30pLHQuZGlzcGF0Y2goXCJ0dXJib2xpbmtzOmxvYWRcIix7ZGF0YTp7dXJsOnRoaXMubG9jYXRpb24uYWJzb2x1dGVVUkwsdGltaW5nOmV9fSl9LHIucHJvdG90eXBlLnN0YXJ0VmlzaXQ9ZnVuY3Rpb24odCxlLHIpe3ZhciBuO3JldHVybiBudWxsIT0obj10aGlzLmN1cnJlbnRWaXNpdCkmJm4uY2FuY2VsKCksdGhpcy5jdXJyZW50VmlzaXQ9dGhpcy5jcmVhdGVWaXNpdCh0LGUsciksdGhpcy5jdXJyZW50VmlzaXQuc3RhcnQoKSx0aGlzLm5vdGlmeUFwcGxpY2F0aW9uQWZ0ZXJWaXNpdGluZ0xvY2F0aW9uKHQpfSxyLnByb3RvdHlwZS5jcmVhdGVWaXNpdD1mdW5jdGlvbihlLHIsbil7XG52YXIgbyxpLHMsYSx1O3JldHVybiBpPW51bGwhPW4/bjp7fSxhPWkucmVzdG9yYXRpb25JZGVudGlmaWVyLHM9aS5yZXN0b3JhdGlvbkRhdGEsbz1pLmhpc3RvcnlDaGFuZ2VkLHU9bmV3IHQuVmlzaXQodGhpcyxlLHIpLHUucmVzdG9yYXRpb25JZGVudGlmaWVyPW51bGwhPWE/YTp0LnV1aWQoKSx1LnJlc3RvcmF0aW9uRGF0YT10LmNvcHlPYmplY3QocyksdS5oaXN0b3J5Q2hhbmdlZD1vLHUucmVmZXJyZXI9dGhpcy5sb2NhdGlvbix1fSxyLnByb3RvdHlwZS52aXNpdENvbXBsZXRlZD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5ub3RpZnlBcHBsaWNhdGlvbkFmdGVyUGFnZUxvYWQodC5nZXRUaW1pbmdNZXRyaWNzKCkpfSxyLnByb3RvdHlwZS5jbGlja0V2ZW50SXNTaWduaWZpY2FudD1mdW5jdGlvbih0KXtyZXR1cm4hKHQuZGVmYXVsdFByZXZlbnRlZHx8dC50YXJnZXQuaXNDb250ZW50RWRpdGFibGV8fHQud2hpY2g+MXx8dC5hbHRLZXl8fHQuY3RybEtleXx8dC5tZXRhS2V5fHx0LnNoaWZ0S2V5KX0sci5wcm90b3R5cGUuZ2V0VmlzaXRhYmxlTGlua0Zvck5vZGU9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMubm9kZUlzVmlzaXRhYmxlKGUpP3QuY2xvc2VzdChlLFwiYVtocmVmXTpub3QoW3RhcmdldF0pXCIpOnZvaWQgMH0sci5wcm90b3R5cGUuZ2V0VmlzaXRhYmxlTG9jYXRpb25Gb3JMaW5rPWZ1bmN0aW9uKGUpe3ZhciByO3JldHVybiByPW5ldyB0LkxvY2F0aW9uKGUuZ2V0QXR0cmlidXRlKFwiaHJlZlwiKSksdGhpcy5sb2NhdGlvbklzVmlzaXRhYmxlKHIpP3I6dm9pZCAwfSxyLnByb3RvdHlwZS5nZXRBY3Rpb25Gb3JMaW5rPWZ1bmN0aW9uKHQpe3ZhciBlO3JldHVybiBudWxsIT0oZT10LmdldEF0dHJpYnV0ZShcImRhdGEtdHVyYm9saW5rcy1hY3Rpb25cIikpP2U6XCJhZHZhbmNlXCJ9LHIucHJvdG90eXBlLm5vZGVJc1Zpc2l0YWJsZT1mdW5jdGlvbihlKXt2YXIgcjtyZXR1cm4ocj10LmNsb3Nlc3QoZSxcIltkYXRhLXR1cmJvbGlua3NdXCIpKT9cImZhbHNlXCIhPT1yLmdldEF0dHJpYnV0ZShcImRhdGEtdHVyYm9saW5rc1wiKTohMH0sci5wcm90b3R5cGUubG9jYXRpb25Jc1Zpc2l0YWJsZT1mdW5jdGlvbih0KXtyZXR1cm4gdC5pc1ByZWZpeGVkQnkodGhpcy52aWV3LmdldFJvb3RMb2NhdGlvbigpKSYmdC5pc0hUTUwoKX0sci5wcm90b3R5cGUuZ2V0Q3VycmVudFJlc3RvcmF0aW9uRGF0YT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFJlc3RvcmF0aW9uRGF0YUZvcklkZW50aWZpZXIodGhpcy5yZXN0b3JhdGlvbklkZW50aWZpZXIpfSxyLnByb3RvdHlwZS5nZXRSZXN0b3JhdGlvbkRhdGFGb3JJZGVudGlmaWVyPWZ1bmN0aW9uKHQpe3ZhciBlO3JldHVybiBudWxsIT0oZT10aGlzLnJlc3RvcmF0aW9uRGF0YSlbdF0/ZVt0XTplW3RdPXt9fSxyfSgpfS5jYWxsKHRoaXMpLGZ1bmN0aW9uKCl7dmFyIGUscixuO3Quc3RhcnQ9ZnVuY3Rpb24oKXtyZXR1cm4gcigpPyhudWxsPT10LmNvbnRyb2xsZXImJih0LmNvbnRyb2xsZXI9ZSgpKSx0LmNvbnRyb2xsZXIuc3RhcnQoKSk6dm9pZCAwfSxyPWZ1bmN0aW9uKCl7cmV0dXJuIG51bGw9PXdpbmRvdy5UdXJib2xpbmtzJiYod2luZG93LlR1cmJvbGlua3M9dCksbigpfSxlPWZ1bmN0aW9uKCl7dmFyIGU7cmV0dXJuIGU9bmV3IHQuQ29udHJvbGxlcixlLmFkYXB0ZXI9bmV3IHQuQnJvd3NlckFkYXB0ZXIoZSksZX0sbj1mdW5jdGlvbigpe3JldHVybiB3aW5kb3cuVHVyYm9saW5rcz09PXR9LG4oKSYmdC5zdGFydCgpfS5jYWxsKHRoaXMpfSkuY2FsbCh0aGlzKSxcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlJiZtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz10OlwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZCYmZGVmaW5lKHQpfSkuY2FsbCh0aGlzKTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi90dXJib2xpbmtzL2Rpc3QvdHVyYm9saW5rcy5qc1xuICoqIG1vZHVsZSBpZCA9IDhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX2FtZF9vcHRpb25zX187XHJcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogKHdlYnBhY2spL2J1aWxkaW4vYW1kLW9wdGlvbnMuanNcbiAqKiBtb2R1bGUgaWQgPSA5XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iXSwic291cmNlUm9vdCI6IiJ9