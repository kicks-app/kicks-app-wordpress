!function(t){function e(i){if(o[i])return o[i].exports;var n=o[i]={exports:{},id:i,loaded:!1};return t[i].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var i=window.webpackJsonp;window.webpackJsonp=function(s,a){for(var r,l,h=0,d=[];h<s.length;h++)l=s[h],n[l]&&d.push.apply(d,n[l]),n[l]=0;for(r in a)t[r]=a[r];for(i&&i(s,a);d.length;)d.shift().call(null,e);if(a[0])return o[0]=0,e(0)};var o={},n={1:0};e.e=function(t,i){if(0===n[t])return i.call(null,e);if(void 0!==n[t])n[t].push(i);else{n[t]=[i];var o=document.getElementsByTagName("head")[0],s=document.createElement("script");s.type="text/javascript",s.charset="utf-8",s.async=!0,s.src=e.p+""+t+".app.js",o.appendChild(s)}},e.m=t,e.c=o,e.p=""}({2:function(t,e){/*!
	 * Bootstrap v3.3.7 (http://getbootstrap.com)
	 * Copyright 2011-2016 Twitter, Inc.
	 * Licensed under the MIT license
	 */
if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(t){"use strict";var e=t.fn.jquery.split(" ")[0].split(".");if(e[0]<2&&e[1]<9||1==e[0]&&9==e[1]&&e[2]<1||e[0]>3)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 4")}(jQuery),+function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in e)if(void 0!==t.style[i])return{end:e[i]};return!1}t.fn.emulateTransitionEnd=function(e){var i=!1,o=this;t(this).one("bsTransitionEnd",function(){i=!0});var n=function(){i||t(o).trigger(t.support.transition.end)};return setTimeout(n,e),this},t(function(){t.support.transition=e(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){if(t(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}})})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),n=i.data("bs.alert");n||i.data("bs.alert",n=new o(this)),"string"==typeof e&&n[e].call(i)})}var i='[data-dismiss="alert"]',o=function(e){t(e).on("click",i,this.close)};o.VERSION="3.3.7",o.TRANSITION_DURATION=150,o.prototype.close=function(e){function i(){a.detach().trigger("closed.bs.alert").remove()}var n=t(this),s=n.attr("data-target");s||(s=n.attr("href"),s=s&&s.replace(/.*(?=#[^\s]*$)/,""));var a=t("#"===s?[]:s);e&&e.preventDefault(),a.length||(a=n.closest(".alert")),a.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(a.removeClass("in"),t.support.transition&&a.hasClass("fade")?a.one("bsTransitionEnd",i).emulateTransitionEnd(o.TRANSITION_DURATION):i())};var n=t.fn.alert;t.fn.alert=e,t.fn.alert.Constructor=o,t.fn.alert.noConflict=function(){return t.fn.alert=n,this},t(document).on("click.bs.alert.data-api",i,o.prototype.close)}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var o=t(this),n=o.data("bs.button"),s="object"==typeof e&&e;n||o.data("bs.button",n=new i(this,s)),"toggle"==e?n.toggle():e&&n.setState(e)})}var i=function(e,o){this.$element=t(e),this.options=t.extend({},i.DEFAULTS,o),this.isLoading=!1};i.VERSION="3.3.7",i.DEFAULTS={loadingText:"loading..."},i.prototype.setState=function(e){var i="disabled",o=this.$element,n=o.is("input")?"val":"html",s=o.data();e+="Text",null==s.resetText&&o.data("resetText",o[n]()),setTimeout(t.proxy(function(){o[n](null==s[e]?this.options[e]:s[e]),"loadingText"==e?(this.isLoading=!0,o.addClass(i).attr(i,i).prop(i,!0)):this.isLoading&&(this.isLoading=!1,o.removeClass(i).removeAttr(i).prop(i,!1))},this),0)},i.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var i=this.$element.find("input");"radio"==i.prop("type")?(i.prop("checked")&&(t=!1),e.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==i.prop("type")&&(i.prop("checked")!==this.$element.hasClass("active")&&(t=!1),this.$element.toggleClass("active")),i.prop("checked",this.$element.hasClass("active")),t&&i.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var o=t.fn.button;t.fn.button=e,t.fn.button.Constructor=i,t.fn.button.noConflict=function(){return t.fn.button=o,this},t(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(i){var o=t(i.target).closest(".btn");e.call(o,"toggle"),t(i.target).is('input[type="radio"], input[type="checkbox"]')||(i.preventDefault(),o.is("input,button")?o.trigger("focus"):o.find("input:visible,button:visible").first().trigger("focus"))}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(e){t(e.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(e.type))})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var o=t(this),n=o.data("bs.carousel"),s=t.extend({},i.DEFAULTS,o.data(),"object"==typeof e&&e),a="string"==typeof e?e:s.slide;n||o.data("bs.carousel",n=new i(this,s)),"number"==typeof e?n.to(e):a?n[a]():s.interval&&n.pause().cycle()})}var i=function(e,i){this.$element=t(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=i,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",t.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",t.proxy(this.pause,this)).on("mouseleave.bs.carousel",t.proxy(this.cycle,this))};i.VERSION="3.3.7",i.TRANSITION_DURATION=600,i.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},i.prototype.keydown=function(t){if(!/input|textarea/i.test(t.target.tagName)){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()}},i.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},i.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},i.prototype.getItemForDirection=function(t,e){var i=this.getItemIndex(e),o="prev"==t&&0===i||"next"==t&&i==this.$items.length-1;if(o&&!this.options.wrap)return e;var n="prev"==t?-1:1,s=(i+n)%this.$items.length;return this.$items.eq(s)},i.prototype.to=function(t){var e=this,i=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(t>this.$items.length-1||t<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){e.to(t)}):i==t?this.pause().cycle():this.slide(t>i?"next":"prev",this.$items.eq(t))},i.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},i.prototype.next=function(){if(!this.sliding)return this.slide("next")},i.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},i.prototype.slide=function(e,o){var n=this.$element.find(".item.active"),s=o||this.getItemForDirection(e,n),a=this.interval,r="next"==e?"left":"right",l=this;if(s.hasClass("active"))return this.sliding=!1;var h=s[0],d=t.Event("slide.bs.carousel",{relatedTarget:h,direction:r});if(this.$element.trigger(d),!d.isDefaultPrevented()){if(this.sliding=!0,a&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var p=t(this.$indicators.children()[this.getItemIndex(s)]);p&&p.addClass("active")}var c=t.Event("slid.bs.carousel",{relatedTarget:h,direction:r});return t.support.transition&&this.$element.hasClass("slide")?(s.addClass(e),s[0].offsetWidth,n.addClass(r),s.addClass(r),n.one("bsTransitionEnd",function(){s.removeClass([e,r].join(" ")).addClass("active"),n.removeClass(["active",r].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger(c)},0)}).emulateTransitionEnd(i.TRANSITION_DURATION)):(n.removeClass("active"),s.addClass("active"),this.sliding=!1,this.$element.trigger(c)),a&&this.cycle(),this}};var o=t.fn.carousel;t.fn.carousel=e,t.fn.carousel.Constructor=i,t.fn.carousel.noConflict=function(){return t.fn.carousel=o,this};var n=function(i){var o,n=t(this),s=t(n.attr("data-target")||(o=n.attr("href"))&&o.replace(/.*(?=#[^\s]+$)/,""));if(s.hasClass("carousel")){var a=t.extend({},s.data(),n.data()),r=n.attr("data-slide-to");r&&(a.interval=!1),e.call(s,a),r&&s.data("bs.carousel").to(r),i.preventDefault()}};t(document).on("click.bs.carousel.data-api","[data-slide]",n).on("click.bs.carousel.data-api","[data-slide-to]",n),t(window).on("load",function(){t('[data-ride="carousel"]').each(function(){var i=t(this);e.call(i,i.data())})})}(jQuery),+function(t){"use strict";function e(e){var i,o=e.attr("data-target")||(i=e.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"");return t(o)}function i(e){return this.each(function(){var i=t(this),n=i.data("bs.collapse"),s=t.extend({},o.DEFAULTS,i.data(),"object"==typeof e&&e);!n&&s.toggle&&/show|hide/.test(e)&&(s.toggle=!1),n||i.data("bs.collapse",n=new o(this,s)),"string"==typeof e&&n[e]()})}var o=function(e,i){this.$element=t(e),this.options=t.extend({},o.DEFAULTS,i),this.$trigger=t('[data-toggle="collapse"][href="#'+e.id+'"],[data-toggle="collapse"][data-target="#'+e.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};o.VERSION="3.3.7",o.TRANSITION_DURATION=350,o.DEFAULTS={toggle:!0},o.prototype.dimension=function(){var t=this.$element.hasClass("width");return t?"width":"height"},o.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var e,n=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(n&&n.length&&(e=n.data("bs.collapse"),e&&e.transitioning))){var s=t.Event("show.bs.collapse");if(this.$element.trigger(s),!s.isDefaultPrevented()){n&&n.length&&(i.call(n,"hide"),e||n.data("bs.collapse",null));var a=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[a](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var r=function(){this.$element.removeClass("collapsing").addClass("collapse in")[a](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return r.call(this);var l=t.camelCase(["scroll",a].join("-"));this.$element.one("bsTransitionEnd",t.proxy(r,this)).emulateTransitionEnd(o.TRANSITION_DURATION)[a](this.$element[0][l])}}}},o.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=t.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var i=this.dimension();this.$element[i](this.$element[i]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var n=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return t.support.transition?void this.$element[i](0).one("bsTransitionEnd",t.proxy(n,this)).emulateTransitionEnd(o.TRANSITION_DURATION):n.call(this)}}},o.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},o.prototype.getParent=function(){return t(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(t.proxy(function(i,o){var n=t(o);this.addAriaAndCollapsedClass(e(n),n)},this)).end()},o.prototype.addAriaAndCollapsedClass=function(t,e){var i=t.hasClass("in");t.attr("aria-expanded",i),e.toggleClass("collapsed",!i).attr("aria-expanded",i)};var n=t.fn.collapse;t.fn.collapse=i,t.fn.collapse.Constructor=o,t.fn.collapse.noConflict=function(){return t.fn.collapse=n,this},t(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(o){var n=t(this);n.attr("data-target")||o.preventDefault();var s=e(n),a=s.data("bs.collapse"),r=a?"toggle":n.data();i.call(s,r)})}(jQuery),+function(t){"use strict";function e(e){var i=e.attr("data-target");i||(i=e.attr("href"),i=i&&/#[A-Za-z]/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,""));var o=i&&t(i);return o&&o.length?o:e.parent()}function i(i){i&&3===i.which||(t(n).remove(),t(s).each(function(){var o=t(this),n=e(o),s={relatedTarget:this};n.hasClass("open")&&(i&&"click"==i.type&&/input|textarea/i.test(i.target.tagName)&&t.contains(n[0],i.target)||(n.trigger(i=t.Event("hide.bs.dropdown",s)),i.isDefaultPrevented()||(o.attr("aria-expanded","false"),n.removeClass("open").trigger(t.Event("hidden.bs.dropdown",s)))))}))}function o(e){return this.each(function(){var i=t(this),o=i.data("bs.dropdown");o||i.data("bs.dropdown",o=new a(this)),"string"==typeof e&&o[e].call(i)})}var n=".dropdown-backdrop",s='[data-toggle="dropdown"]',a=function(e){t(e).on("click.bs.dropdown",this.toggle)};a.VERSION="3.3.7",a.prototype.toggle=function(o){var n=t(this);if(!n.is(".disabled, :disabled")){var s=e(n),a=s.hasClass("open");if(i(),!a){"ontouchstart"in document.documentElement&&!s.closest(".navbar-nav").length&&t(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(t(this)).on("click",i);var r={relatedTarget:this};if(s.trigger(o=t.Event("show.bs.dropdown",r)),o.isDefaultPrevented())return;n.trigger("focus").attr("aria-expanded","true"),s.toggleClass("open").trigger(t.Event("shown.bs.dropdown",r))}return!1}},a.prototype.keydown=function(i){if(/(38|40|27|32)/.test(i.which)&&!/input|textarea/i.test(i.target.tagName)){var o=t(this);if(i.preventDefault(),i.stopPropagation(),!o.is(".disabled, :disabled")){var n=e(o),a=n.hasClass("open");if(!a&&27!=i.which||a&&27==i.which)return 27==i.which&&n.find(s).trigger("focus"),o.trigger("click");var r=" li:not(.disabled):visible a",l=n.find(".dropdown-menu"+r);if(l.length){var h=l.index(i.target);38==i.which&&h>0&&h--,40==i.which&&h<l.length-1&&h++,~h||(h=0),l.eq(h).trigger("focus")}}}};var r=t.fn.dropdown;t.fn.dropdown=o,t.fn.dropdown.Constructor=a,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=r,this},t(document).on("click.bs.dropdown.data-api",i).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",s,a.prototype.toggle).on("keydown.bs.dropdown.data-api",s,a.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",a.prototype.keydown)}(jQuery),+function(t){"use strict";function e(e,o){return this.each(function(){var n=t(this),s=n.data("bs.modal"),a=t.extend({},i.DEFAULTS,n.data(),"object"==typeof e&&e);s||n.data("bs.modal",s=new i(this,a)),"string"==typeof e?s[e](o):a.show&&s.show(o)})}var i=function(e,i){this.options=i,this.$body=t(document.body),this.$element=t(e),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};i.VERSION="3.3.7",i.TRANSITION_DURATION=300,i.BACKDROP_TRANSITION_DURATION=150,i.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},i.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},i.prototype.show=function(e){var o=this,n=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(n),this.isShown||n.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){o.$element.one("mouseup.dismiss.bs.modal",function(e){t(e.target).is(o.$element)&&(o.ignoreBackdropClick=!0)})}),this.backdrop(function(){var n=t.support.transition&&o.$element.hasClass("fade");o.$element.parent().length||o.$element.appendTo(o.$body),o.$element.show().scrollTop(0),o.adjustDialog(),n&&o.$element[0].offsetWidth,o.$element.addClass("in"),o.enforceFocus();var s=t.Event("shown.bs.modal",{relatedTarget:e});n?o.$dialog.one("bsTransitionEnd",function(){o.$element.trigger("focus").trigger(s)}).emulateTransitionEnd(i.TRANSITION_DURATION):o.$element.trigger("focus").trigger(s)}))},i.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(i.TRANSITION_DURATION):this.hideModal())},i.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){document===t.target||this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},i.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},i.prototype.resize=function(){this.isShown?t(window).on("resize.bs.modal",t.proxy(this.handleUpdate,this)):t(window).off("resize.bs.modal")},i.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$body.removeClass("modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")})},i.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},i.prototype.backdrop=function(e){var o=this,n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var s=t.support.transition&&n;if(this.$backdrop=t(document.createElement("div")).addClass("modal-backdrop "+n).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",t.proxy(function(t){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),s&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;s?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var a=function(){o.removeBackdrop(),e&&e()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",a).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):a()}else e&&e()},i.prototype.handleUpdate=function(){this.adjustDialog()},i.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})},i.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},i.prototype.checkScrollbar=function(){var t=window.innerWidth;if(!t){var e=document.documentElement.getBoundingClientRect();t=e.right-Math.abs(e.left)}this.bodyIsOverflowing=document.body.clientWidth<t,this.scrollbarWidth=this.measureScrollbar()},i.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",t+this.scrollbarWidth)},i.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},i.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var o=t.fn.modal;t.fn.modal=e,t.fn.modal.Constructor=i,t.fn.modal.noConflict=function(){return t.fn.modal=o,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(i){var o=t(this),n=o.attr("href"),s=t(o.attr("data-target")||n&&n.replace(/.*(?=#[^\s]+$)/,"")),a=s.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(n)&&n},s.data(),o.data());o.is("a")&&i.preventDefault(),s.one("show.bs.modal",function(t){t.isDefaultPrevented()||s.one("hidden.bs.modal",function(){o.is(":visible")&&o.trigger("focus")})}),e.call(s,a,this)})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var o=t(this),n=o.data("bs.tooltip"),s="object"==typeof e&&e;!n&&/destroy|hide/.test(e)||(n||o.data("bs.tooltip",n=new i(this,s)),"string"==typeof e&&n[e]())})}var i=function(t,e){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",t,e)};i.VERSION="3.3.7",i.TRANSITION_DURATION=150,i.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},i.prototype.init=function(e,i,o){if(this.enabled=!0,this.type=e,this.$element=t(i),this.options=this.getOptions(o),this.$viewport=this.options.viewport&&t(t.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var n=this.options.trigger.split(" "),s=n.length;s--;){var a=n[s];if("click"==a)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=a){var r="hover"==a?"mouseenter":"focusin",l="hover"==a?"mouseleave":"focusout";this.$element.on(r+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.getOptions=function(e){return e=t.extend({},this.getDefaults(),this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},i.prototype.getDelegateOptions=function(){var e={},i=this.getDefaults();return this._options&&t.each(this._options,function(t,o){i[t]!=o&&(e[t]=o)}),e},i.prototype.enter=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),e instanceof t.Event&&(i.inState["focusin"==e.type?"focus":"hover"]=!0),i.tip().hasClass("in")||"in"==i.hoverState?void(i.hoverState="in"):(clearTimeout(i.timeout),i.hoverState="in",i.options.delay&&i.options.delay.show?void(i.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show)):i.show())},i.prototype.isInStateTrue=function(){for(var t in this.inState)if(this.inState[t])return!0;return!1},i.prototype.leave=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);if(i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),e instanceof t.Event&&(i.inState["focusout"==e.type?"focus":"hover"]=!1),!i.isInStateTrue())return clearTimeout(i.timeout),i.hoverState="out",i.options.delay&&i.options.delay.hide?void(i.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide)):i.hide()},i.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var o=t.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!o)return;var n=this,s=this.tip(),a=this.getUID(this.type);this.setContent(),s.attr("id",a),this.$element.attr("aria-describedby",a),this.options.animation&&s.addClass("fade");var r="function"==typeof this.options.placement?this.options.placement.call(this,s[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,h=l.test(r);h&&(r=r.replace(l,"")||"top"),s.detach().css({top:0,left:0,display:"block"}).addClass(r).data("bs."+this.type,this),this.options.container?s.appendTo(this.options.container):s.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var d=this.getPosition(),p=s[0].offsetWidth,c=s[0].offsetHeight;if(h){var f=r,u=this.getPosition(this.$viewport);r="bottom"==r&&d.bottom+c>u.bottom?"top":"top"==r&&d.top-c<u.top?"bottom":"right"==r&&d.right+p>u.width?"left":"left"==r&&d.left-p<u.left?"right":r,s.removeClass(f).addClass(r)}var g=this.getCalculatedOffset(r,d,p,c);this.applyPlacement(g,r);var m=function(){var t=n.hoverState;n.$element.trigger("shown.bs."+n.type),n.hoverState=null,"out"==t&&n.leave(n)};t.support.transition&&this.$tip.hasClass("fade")?s.one("bsTransitionEnd",m).emulateTransitionEnd(i.TRANSITION_DURATION):m()}},i.prototype.applyPlacement=function(e,i){var o=this.tip(),n=o[0].offsetWidth,s=o[0].offsetHeight,a=parseInt(o.css("margin-top"),10),r=parseInt(o.css("margin-left"),10);isNaN(a)&&(a=0),isNaN(r)&&(r=0),e.top+=a,e.left+=r,t.offset.setOffset(o[0],t.extend({using:function(t){o.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),o.addClass("in");var l=o[0].offsetWidth,h=o[0].offsetHeight;"top"==i&&h!=s&&(e.top=e.top+s-h);var d=this.getViewportAdjustedDelta(i,e,l,h);d.left?e.left+=d.left:e.top+=d.top;var p=/top|bottom/.test(i),c=p?2*d.left-n+l:2*d.top-s+h,f=p?"offsetWidth":"offsetHeight";o.offset(e),this.replaceArrow(c,o[0][f],p)},i.prototype.replaceArrow=function(t,e,i){this.arrow().css(i?"left":"top",50*(1-t/e)+"%").css(i?"top":"left","")},i.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},i.prototype.hide=function(e){function o(){"in"!=n.hoverState&&s.detach(),n.$element&&n.$element.removeAttr("aria-describedby").trigger("hidden.bs."+n.type),e&&e()}var n=this,s=t(this.$tip),a=t.Event("hide.bs."+this.type);if(this.$element.trigger(a),!a.isDefaultPrevented())return s.removeClass("in"),t.support.transition&&s.hasClass("fade")?s.one("bsTransitionEnd",o).emulateTransitionEnd(i.TRANSITION_DURATION):o(),this.hoverState=null,this},i.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},i.prototype.hasContent=function(){return this.getTitle()},i.prototype.getPosition=function(e){e=e||this.$element;var i=e[0],o="BODY"==i.tagName,n=i.getBoundingClientRect();null==n.width&&(n=t.extend({},n,{width:n.right-n.left,height:n.bottom-n.top}));var s=window.SVGElement&&i instanceof window.SVGElement,a=o?{top:0,left:0}:s?null:e.offset(),r={scroll:o?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},l=o?{width:t(window).width(),height:t(window).height()}:null;return t.extend({},n,r,l,a)},i.prototype.getCalculatedOffset=function(t,e,i,o){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-i/2}:"top"==t?{top:e.top-o,left:e.left+e.width/2-i/2}:"left"==t?{top:e.top+e.height/2-o/2,left:e.left-i}:{top:e.top+e.height/2-o/2,left:e.left+e.width}},i.prototype.getViewportAdjustedDelta=function(t,e,i,o){var n={top:0,left:0};if(!this.$viewport)return n;var s=this.options.viewport&&this.options.viewport.padding||0,a=this.getPosition(this.$viewport);if(/right|left/.test(t)){var r=e.top-s-a.scroll,l=e.top+s-a.scroll+o;r<a.top?n.top=a.top-r:l>a.top+a.height&&(n.top=a.top+a.height-l)}else{var h=e.left-s,d=e.left+s+i;h<a.left?n.left=a.left-h:d>a.right&&(n.left=a.left+a.width-d)}return n},i.prototype.getTitle=function(){var t,e=this.$element,i=this.options;return t=e.attr("data-original-title")||("function"==typeof i.title?i.title.call(e[0]):i.title)},i.prototype.getUID=function(t){do t+=~~(1e6*Math.random());while(document.getElementById(t));return t},i.prototype.tip=function(){if(!this.$tip&&(this.$tip=t(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},i.prototype.enable=function(){this.enabled=!0},i.prototype.disable=function(){this.enabled=!1},i.prototype.toggleEnabled=function(){this.enabled=!this.enabled},i.prototype.toggle=function(e){var i=this;e&&(i=t(e.currentTarget).data("bs."+this.type),i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i))),e?(i.inState.click=!i.inState.click,i.isInStateTrue()?i.enter(i):i.leave(i)):i.tip().hasClass("in")?i.leave(i):i.enter(i)},i.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type),t.$tip&&t.$tip.detach(),t.$tip=null,t.$arrow=null,t.$viewport=null,t.$element=null})};var o=t.fn.tooltip;t.fn.tooltip=e,t.fn.tooltip.Constructor=i,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=o,this}}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var o=t(this),n=o.data("bs.popover"),s="object"==typeof e&&e;!n&&/destroy|hide/.test(e)||(n||o.data("bs.popover",n=new i(this,s)),"string"==typeof e&&n[e]())})}var i=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");i.VERSION="3.3.7",i.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),i.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),i.prototype.constructor=i,i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),i=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof i?"html":"append":"text"](i),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},i.prototype.hasContent=function(){return this.getTitle()||this.getContent()},i.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var o=t.fn.popover;t.fn.popover=e,t.fn.popover.Constructor=i,t.fn.popover.noConflict=function(){return t.fn.popover=o,this}}(jQuery),+function(t){"use strict";function e(i,o){this.$body=t(document.body),this.$scrollElement=t(t(i).is(document.body)?window:i),this.options=t.extend({},e.DEFAULTS,o),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",t.proxy(this.process,this)),this.refresh(),this.process()}function i(i){return this.each(function(){var o=t(this),n=o.data("bs.scrollspy"),s="object"==typeof i&&i;n||o.data("bs.scrollspy",n=new e(this,s)),"string"==typeof i&&n[i]()})}e.VERSION="3.3.7",e.DEFAULTS={offset:10},e.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},e.prototype.refresh=function(){var e=this,i="offset",o=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),t.isWindow(this.$scrollElement[0])||(i="position",o=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var e=t(this),n=e.data("target")||e.attr("href"),s=/^#./.test(n)&&t(n);return s&&s.length&&s.is(":visible")&&[[s[i]().top+o,n]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){e.offsets.push(this[0]),e.targets.push(this[1])})},e.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,i=this.getScrollHeight(),o=this.options.offset+i-this.$scrollElement.height(),n=this.offsets,s=this.targets,a=this.activeTarget;if(this.scrollHeight!=i&&this.refresh(),e>=o)return a!=(t=s[s.length-1])&&this.activate(t);if(a&&e<n[0])return this.activeTarget=null,this.clear();for(t=n.length;t--;)a!=s[t]&&e>=n[t]&&(void 0===n[t+1]||e<n[t+1])&&this.activate(s[t])},e.prototype.activate=function(e){
this.activeTarget=e,this.clear();var i=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',o=t(i).parents("li").addClass("active");o.parent(".dropdown-menu").length&&(o=o.closest("li.dropdown").addClass("active")),o.trigger("activate.bs.scrollspy")},e.prototype.clear=function(){t(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var o=t.fn.scrollspy;t.fn.scrollspy=i,t.fn.scrollspy.Constructor=e,t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=o,this},t(window).on("load.bs.scrollspy.data-api",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);i.call(e,e.data())})})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var o=t(this),n=o.data("bs.tab");n||o.data("bs.tab",n=new i(this)),"string"==typeof e&&n[e]()})}var i=function(e){this.element=t(e)};i.VERSION="3.3.7",i.TRANSITION_DURATION=150,i.prototype.show=function(){var e=this.element,i=e.closest("ul:not(.dropdown-menu)"),o=e.data("target");if(o||(o=e.attr("href"),o=o&&o.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var n=i.find(".active:last a"),s=t.Event("hide.bs.tab",{relatedTarget:e[0]}),a=t.Event("show.bs.tab",{relatedTarget:n[0]});if(n.trigger(s),e.trigger(a),!a.isDefaultPrevented()&&!s.isDefaultPrevented()){var r=t(o);this.activate(e.closest("li"),i),this.activate(r,r.parent(),function(){n.trigger({type:"hidden.bs.tab",relatedTarget:e[0]}),e.trigger({type:"shown.bs.tab",relatedTarget:n[0]})})}}},i.prototype.activate=function(e,o,n){function s(){a.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),e.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),r?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu").length&&e.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),n&&n()}var a=o.find("> .active"),r=n&&t.support.transition&&(a.length&&a.hasClass("fade")||!!o.find("> .fade").length);a.length&&r?a.one("bsTransitionEnd",s).emulateTransitionEnd(i.TRANSITION_DURATION):s(),a.removeClass("in")};var o=t.fn.tab;t.fn.tab=e,t.fn.tab.Constructor=i,t.fn.tab.noConflict=function(){return t.fn.tab=o,this};var n=function(i){i.preventDefault(),e.call(t(this),"show")};t(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',n).on("click.bs.tab.data-api",'[data-toggle="pill"]',n)}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var o=t(this),n=o.data("bs.affix"),s="object"==typeof e&&e;n||o.data("bs.affix",n=new i(this,s)),"string"==typeof e&&n[e]()})}var i=function(e,o){this.options=t.extend({},i.DEFAULTS,o),this.$target=t(this.options.target).on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(e),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};i.VERSION="3.3.7",i.RESET="affix affix-top affix-bottom",i.DEFAULTS={offset:0,target:window},i.prototype.getState=function(t,e,i,o){var n=this.$target.scrollTop(),s=this.$element.offset(),a=this.$target.height();if(null!=i&&"top"==this.affixed)return n<i&&"top";if("bottom"==this.affixed)return null!=i?!(n+this.unpin<=s.top)&&"bottom":!(n+a<=t-o)&&"bottom";var r=null==this.affixed,l=r?n:s.top,h=r?a:e;return null!=i&&n<=i?"top":null!=o&&l+h>=t-o&&"bottom"},i.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(i.RESET).addClass("affix");var t=this.$target.scrollTop(),e=this.$element.offset();return this.pinnedOffset=e.top-t},i.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},i.prototype.checkPosition=function(){if(this.$element.is(":visible")){var e=this.$element.height(),o=this.options.offset,n=o.top,s=o.bottom,a=Math.max(t(document).height(),t(document.body).height());"object"!=typeof o&&(s=n=o),"function"==typeof n&&(n=o.top(this.$element)),"function"==typeof s&&(s=o.bottom(this.$element));var r=this.getState(a,e,n,s);if(this.affixed!=r){null!=this.unpin&&this.$element.css("top","");var l="affix"+(r?"-"+r:""),h=t.Event(l+".bs.affix");if(this.$element.trigger(h),h.isDefaultPrevented())return;this.affixed=r,this.unpin="bottom"==r?this.getPinnedOffset():null,this.$element.removeClass(i.RESET).addClass(l).trigger(l.replace("affix","affixed")+".bs.affix")}"bottom"==r&&this.$element.offset({top:a-e-s})}};var o=t.fn.affix;t.fn.affix=e,t.fn.affix.Constructor=i,t.fn.affix.noConflict=function(){return t.fn.affix=o,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var i=t(this),o=i.data();o.offset=o.offset||{},null!=o.offsetBottom&&(o.offset.bottom=o.offsetBottom),null!=o.offsetTop&&(o.offset.top=o.offsetTop),e.call(i,o)})})}(jQuery)}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vdmVuZG9yLmpzIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCBkNzU5NTk1ZWM0NDY4ZjgzNjg4MiIsIndlYnBhY2s6Ly8vLi9+L2Jvb3RzdHJhcC1zYXNzL2Fzc2V0cy9qYXZhc2NyaXB0cy9ib290c3RyYXAuanMiXSwibmFtZXMiOlsibW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImluc3RhbGxlZE1vZHVsZXMiLCJleHBvcnRzIiwibW9kdWxlIiwiaWQiLCJsb2FkZWQiLCJjYWxsIiwicGFyZW50SnNvbnBGdW5jdGlvbiIsIndpbmRvdyIsImNodW5rSWRzIiwibW9yZU1vZHVsZXMiLCJjaHVua0lkIiwiaSIsImNhbGxiYWNrcyIsImxlbmd0aCIsImluc3RhbGxlZENodW5rcyIsInB1c2giLCJhcHBseSIsInNoaWZ0IiwiMSIsImUiLCJjYWxsYmFjayIsInVuZGVmaW5lZCIsImhlYWQiLCJkb2N1bWVudCIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwic2NyaXB0IiwiY3JlYXRlRWxlbWVudCIsInR5cGUiLCJjaGFyc2V0IiwiYXN5bmMiLCJzcmMiLCJwIiwiYXBwZW5kQ2hpbGQiLCJtIiwiYyIsIjIiLCJqUXVlcnkiLCJFcnJvciIsIiQiLCJ2ZXJzaW9uIiwiZm4iLCJqcXVlcnkiLCJzcGxpdCIsInRyYW5zaXRpb25FbmQiLCJlbCIsInRyYW5zRW5kRXZlbnROYW1lcyIsIldlYmtpdFRyYW5zaXRpb24iLCJNb3pUcmFuc2l0aW9uIiwiT1RyYW5zaXRpb24iLCJ0cmFuc2l0aW9uIiwibmFtZSIsInN0eWxlIiwiZW5kIiwiZW11bGF0ZVRyYW5zaXRpb25FbmQiLCJkdXJhdGlvbiIsImNhbGxlZCIsIiRlbCIsInRoaXMiLCJvbmUiLCJ0cmlnZ2VyIiwic3VwcG9ydCIsInNldFRpbWVvdXQiLCJldmVudCIsInNwZWNpYWwiLCJic1RyYW5zaXRpb25FbmQiLCJiaW5kVHlwZSIsImRlbGVnYXRlVHlwZSIsImhhbmRsZSIsInRhcmdldCIsImlzIiwiaGFuZGxlT2JqIiwiaGFuZGxlciIsImFyZ3VtZW50cyIsIlBsdWdpbiIsIm9wdGlvbiIsImVhY2giLCIkdGhpcyIsImRhdGEiLCJBbGVydCIsImRpc21pc3MiLCJvbiIsImNsb3NlIiwiVkVSU0lPTiIsIlRSQU5TSVRJT05fRFVSQVRJT04iLCJwcm90b3R5cGUiLCJyZW1vdmVFbGVtZW50IiwiJHBhcmVudCIsImRldGFjaCIsInJlbW92ZSIsInNlbGVjdG9yIiwiYXR0ciIsInJlcGxhY2UiLCJwcmV2ZW50RGVmYXVsdCIsImNsb3Nlc3QiLCJFdmVudCIsImlzRGVmYXVsdFByZXZlbnRlZCIsInJlbW92ZUNsYXNzIiwiaGFzQ2xhc3MiLCJvbGQiLCJhbGVydCIsIkNvbnN0cnVjdG9yIiwibm9Db25mbGljdCIsIm9wdGlvbnMiLCJCdXR0b24iLCJ0b2dnbGUiLCJzZXRTdGF0ZSIsImVsZW1lbnQiLCIkZWxlbWVudCIsImV4dGVuZCIsIkRFRkFVTFRTIiwiaXNMb2FkaW5nIiwibG9hZGluZ1RleHQiLCJzdGF0ZSIsImQiLCJ2YWwiLCJyZXNldFRleHQiLCJwcm94eSIsImFkZENsYXNzIiwicHJvcCIsInJlbW92ZUF0dHIiLCJjaGFuZ2VkIiwiJGlucHV0IiwiZmluZCIsInRvZ2dsZUNsYXNzIiwiYnV0dG9uIiwiJGJ0biIsImZpcnN0IiwidGVzdCIsIkNhcm91c2VsIiwiYWN0aW9uIiwic2xpZGUiLCJ0byIsImludGVydmFsIiwicGF1c2UiLCJjeWNsZSIsIiRpbmRpY2F0b3JzIiwicGF1c2VkIiwic2xpZGluZyIsIiRhY3RpdmUiLCIkaXRlbXMiLCJrZXlib2FyZCIsImtleWRvd24iLCJkb2N1bWVudEVsZW1lbnQiLCJ3cmFwIiwidGFnTmFtZSIsIndoaWNoIiwicHJldiIsIm5leHQiLCJjbGVhckludGVydmFsIiwic2V0SW50ZXJ2YWwiLCJnZXRJdGVtSW5kZXgiLCJpdGVtIiwicGFyZW50IiwiY2hpbGRyZW4iLCJpbmRleCIsImdldEl0ZW1Gb3JEaXJlY3Rpb24iLCJkaXJlY3Rpb24iLCJhY3RpdmUiLCJhY3RpdmVJbmRleCIsIndpbGxXcmFwIiwiZGVsdGEiLCJpdGVtSW5kZXgiLCJlcSIsInBvcyIsInRoYXQiLCIkbmV4dCIsImlzQ3ljbGluZyIsInJlbGF0ZWRUYXJnZXQiLCJzbGlkZUV2ZW50IiwiJG5leHRJbmRpY2F0b3IiLCJzbGlkRXZlbnQiLCJvZmZzZXRXaWR0aCIsImpvaW4iLCJjYXJvdXNlbCIsImNsaWNrSGFuZGxlciIsImhyZWYiLCIkdGFyZ2V0Iiwic2xpZGVJbmRleCIsIiRjYXJvdXNlbCIsImdldFRhcmdldEZyb21UcmlnZ2VyIiwiJHRyaWdnZXIiLCJDb2xsYXBzZSIsInRyYW5zaXRpb25pbmciLCJnZXRQYXJlbnQiLCJhZGRBcmlhQW5kQ29sbGFwc2VkQ2xhc3MiLCJkaW1lbnNpb24iLCJoYXNXaWR0aCIsInNob3ciLCJhY3RpdmVzRGF0YSIsImFjdGl2ZXMiLCJzdGFydEV2ZW50IiwiY29tcGxldGUiLCJzY3JvbGxTaXplIiwiY2FtZWxDYXNlIiwiaGlkZSIsIm9mZnNldEhlaWdodCIsImlzT3BlbiIsImNvbGxhcHNlIiwiY2xlYXJNZW51cyIsImJhY2tkcm9wIiwiY29udGFpbnMiLCJEcm9wZG93biIsImlzQWN0aXZlIiwiaW5zZXJ0QWZ0ZXIiLCJzdG9wUHJvcGFnYXRpb24iLCJkZXNjIiwiZHJvcGRvd24iLCJfcmVsYXRlZFRhcmdldCIsIk1vZGFsIiwiJGJvZHkiLCJib2R5IiwiJGRpYWxvZyIsIiRiYWNrZHJvcCIsImlzU2hvd24iLCJvcmlnaW5hbEJvZHlQYWQiLCJzY3JvbGxiYXJXaWR0aCIsImlnbm9yZUJhY2tkcm9wQ2xpY2siLCJyZW1vdGUiLCJsb2FkIiwiQkFDS0RST1BfVFJBTlNJVElPTl9EVVJBVElPTiIsImNoZWNrU2Nyb2xsYmFyIiwic2V0U2Nyb2xsYmFyIiwiZXNjYXBlIiwicmVzaXplIiwiYXBwZW5kVG8iLCJzY3JvbGxUb3AiLCJhZGp1c3REaWFsb2ciLCJlbmZvcmNlRm9jdXMiLCJvZmYiLCJoaWRlTW9kYWwiLCJoYXMiLCJoYW5kbGVVcGRhdGUiLCJyZXNldEFkanVzdG1lbnRzIiwicmVzZXRTY3JvbGxiYXIiLCJyZW1vdmVCYWNrZHJvcCIsImFuaW1hdGUiLCJkb0FuaW1hdGUiLCJjdXJyZW50VGFyZ2V0IiwiZm9jdXMiLCJjYWxsYmFja1JlbW92ZSIsIm1vZGFsSXNPdmVyZmxvd2luZyIsInNjcm9sbEhlaWdodCIsImNsaWVudEhlaWdodCIsImNzcyIsInBhZGRpbmdMZWZ0IiwiYm9keUlzT3ZlcmZsb3dpbmciLCJwYWRkaW5nUmlnaHQiLCJmdWxsV2luZG93V2lkdGgiLCJpbm5lcldpZHRoIiwiZG9jdW1lbnRFbGVtZW50UmVjdCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsInJpZ2h0IiwiTWF0aCIsImFicyIsImxlZnQiLCJjbGllbnRXaWR0aCIsIm1lYXN1cmVTY3JvbGxiYXIiLCJib2R5UGFkIiwicGFyc2VJbnQiLCJzY3JvbGxEaXYiLCJjbGFzc05hbWUiLCJhcHBlbmQiLCJyZW1vdmVDaGlsZCIsIm1vZGFsIiwic2hvd0V2ZW50IiwiVG9vbHRpcCIsImVuYWJsZWQiLCJ0aW1lb3V0IiwiaG92ZXJTdGF0ZSIsImluU3RhdGUiLCJpbml0IiwiYW5pbWF0aW9uIiwicGxhY2VtZW50IiwidGVtcGxhdGUiLCJ0aXRsZSIsImRlbGF5IiwiaHRtbCIsImNvbnRhaW5lciIsInZpZXdwb3J0IiwicGFkZGluZyIsImdldE9wdGlvbnMiLCIkdmlld3BvcnQiLCJpc0Z1bmN0aW9uIiwiY2xpY2siLCJob3ZlciIsImNvbnN0cnVjdG9yIiwidHJpZ2dlcnMiLCJldmVudEluIiwiZXZlbnRPdXQiLCJlbnRlciIsImxlYXZlIiwiX29wdGlvbnMiLCJmaXhUaXRsZSIsImdldERlZmF1bHRzIiwiZ2V0RGVsZWdhdGVPcHRpb25zIiwiZGVmYXVsdHMiLCJrZXkiLCJ2YWx1ZSIsIm9iaiIsInNlbGYiLCJ0aXAiLCJjbGVhclRpbWVvdXQiLCJpc0luU3RhdGVUcnVlIiwiaGFzQ29udGVudCIsImluRG9tIiwib3duZXJEb2N1bWVudCIsIiR0aXAiLCJ0aXBJZCIsImdldFVJRCIsInNldENvbnRlbnQiLCJhdXRvVG9rZW4iLCJhdXRvUGxhY2UiLCJ0b3AiLCJkaXNwbGF5IiwiZ2V0UG9zaXRpb24iLCJhY3R1YWxXaWR0aCIsImFjdHVhbEhlaWdodCIsIm9yZ1BsYWNlbWVudCIsInZpZXdwb3J0RGltIiwiYm90dG9tIiwid2lkdGgiLCJjYWxjdWxhdGVkT2Zmc2V0IiwiZ2V0Q2FsY3VsYXRlZE9mZnNldCIsImFwcGx5UGxhY2VtZW50IiwicHJldkhvdmVyU3RhdGUiLCJvZmZzZXQiLCJoZWlnaHQiLCJtYXJnaW5Ub3AiLCJtYXJnaW5MZWZ0IiwiaXNOYU4iLCJzZXRPZmZzZXQiLCJ1c2luZyIsInByb3BzIiwicm91bmQiLCJnZXRWaWV3cG9ydEFkanVzdGVkRGVsdGEiLCJpc1ZlcnRpY2FsIiwiYXJyb3dEZWx0YSIsImFycm93T2Zmc2V0UG9zaXRpb24iLCJyZXBsYWNlQXJyb3ciLCJhcnJvdyIsImdldFRpdGxlIiwiJGUiLCJpc0JvZHkiLCJlbFJlY3QiLCJpc1N2ZyIsIlNWR0VsZW1lbnQiLCJlbE9mZnNldCIsInNjcm9sbCIsIm91dGVyRGltcyIsInZpZXdwb3J0UGFkZGluZyIsInZpZXdwb3J0RGltZW5zaW9ucyIsInRvcEVkZ2VPZmZzZXQiLCJib3R0b21FZGdlT2Zmc2V0IiwibGVmdEVkZ2VPZmZzZXQiLCJyaWdodEVkZ2VPZmZzZXQiLCJvIiwicHJlZml4IiwicmFuZG9tIiwiZ2V0RWxlbWVudEJ5SWQiLCIkYXJyb3ciLCJlbmFibGUiLCJkaXNhYmxlIiwidG9nZ2xlRW5hYmxlZCIsImRlc3Ryb3kiLCJyZW1vdmVEYXRhIiwidG9vbHRpcCIsIlBvcG92ZXIiLCJjb250ZW50IiwiZ2V0Q29udGVudCIsInBvcG92ZXIiLCJTY3JvbGxTcHkiLCIkc2Nyb2xsRWxlbWVudCIsIm9mZnNldHMiLCJ0YXJnZXRzIiwiYWN0aXZlVGFyZ2V0IiwicHJvY2VzcyIsInJlZnJlc2giLCJnZXRTY3JvbGxIZWlnaHQiLCJtYXgiLCJvZmZzZXRNZXRob2QiLCJvZmZzZXRCYXNlIiwiaXNXaW5kb3ciLCJtYXAiLCIkaHJlZiIsInNvcnQiLCJhIiwiYiIsIm1heFNjcm9sbCIsImFjdGl2YXRlIiwiY2xlYXIiLCJwYXJlbnRzIiwicGFyZW50c1VudGlsIiwic2Nyb2xsc3B5IiwiJHNweSIsIlRhYiIsIiR1bCIsIiRwcmV2aW91cyIsImhpZGVFdmVudCIsInRhYiIsIkFmZml4IiwiY2hlY2tQb3NpdGlvbiIsImNoZWNrUG9zaXRpb25XaXRoRXZlbnRMb29wIiwiYWZmaXhlZCIsInVucGluIiwicGlubmVkT2Zmc2V0IiwiUkVTRVQiLCJnZXRTdGF0ZSIsIm9mZnNldFRvcCIsIm9mZnNldEJvdHRvbSIsInBvc2l0aW9uIiwidGFyZ2V0SGVpZ2h0IiwiaW5pdGlhbGl6aW5nIiwiY29sbGlkZXJUb3AiLCJjb2xsaWRlckhlaWdodCIsImdldFBpbm5lZE9mZnNldCIsImFmZml4IiwiYWZmaXhUeXBlIl0sIm1hcHBpbmdzIjoiQ0FBUyxTQUFVQSxHQ21DbkIsUUFBQUMsR0FBQUMsR0FHQSxHQUFBQyxFQUFBRCxHQUNBLE1BQUFDLEdBQUFELEdBQUFFLE9BR0EsSUFBQUMsR0FBQUYsRUFBQUQsSUFDQUUsV0FDQUUsR0FBQUosRUFDQUssUUFBQSxFQVVBLE9BTkFQLEdBQUFFLEdBQUFNLEtBQUFILEVBQUFELFFBQUFDLElBQUFELFFBQUFILEdBR0FJLEVBQUFFLFFBQUEsRUFHQUYsRUFBQUQsUUF0REEsR0FBQUssR0FBQUMsT0FBQSxZQUNBQSxRQUFBLHNCQUFBQyxFQUFBQyxHQUlBLElBREEsR0FBQVYsR0FBQVcsRUFBQUMsRUFBQSxFQUFBQyxLQUNRRCxFQUFBSCxFQUFBSyxPQUFvQkYsSUFDNUJELEVBQUFGLEVBQUFHLEdBQ0FHLEVBQUFKLElBQ0FFLEVBQUFHLEtBQUFDLE1BQUFKLEVBQUFFLEVBQUFKLElBQ0FJLEVBQUFKLEdBQUEsQ0FFQSxLQUFBWCxJQUFBVSxHQUNBWixFQUFBRSxHQUFBVSxFQUFBVixFQUdBLEtBREFPLEtBQUFFLEVBQUFD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VyxLQUFBa0QsU0FDQVgsWUFBQStTLEVBQUFNLE9BQ0FoUyxTQUFBMlMsR0FDQXJXLFFBQUFxVyxFQUFBclUsUUFBQSxnQ0FHQSxVQUFBb1UsR0FDQXRXLEtBQUFrRCxTQUFBME4sUUFDQWIsSUFBQXZFLEVBQUFxRixFQUFBa0YsS0FvQkEsSUFBQXRULEdBQUE1RCxFQUFBRSxHQUFBdVgsS0FFQXpYLEdBQUFFLEdBQUF1WCxNQUFBdFYsRUFDQW5DLEVBQUFFLEdBQUF1WCxNQUFBM1QsWUFBQTJTLEVBTUF6VyxFQUFBRSxHQUFBdVgsTUFBQTFULFdBQUEsV0FFQSxNQURBL0QsR0FBQUUsR0FBQXVYLE1BQUE3VCxFQUNBekMsTUFPQW5CLEVBQUEvQixRQUFBeUUsR0FBQSxrQkFDQTFDLEVBQUEsc0JBQUFxQyxLQUFBLFdBQ0EsR0FBQThULEdBQUFuVyxFQUFBbUIsTUFDQW9CLEVBQUE0VCxFQUFBNVQsTUFFQUEsR0FBQXdQLE9BQUF4UCxFQUFBd1AsV0FFQSxNQUFBeFAsRUFBQTJVLGVBQUEzVSxFQUFBd1AsT0FBQU4sT0FBQWxQLEVBQUEyVSxjQUNBLE1BQUEzVSxFQUFBMFUsWUFBQTFVLEVBQUF3UCxPQUFBYixJQUFBM08sRUFBQTBVLFdBRUE5VSxFQUFBcEUsS0FBQW9ZLEVBQUE1VCxRQUlDekMiLCJmaWxlIjoidmVuZG9yLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqKioqKi8gKGZ1bmN0aW9uKG1vZHVsZXMpIHsgLy8gd2VicGFja0Jvb3RzdHJhcFxuLyoqKioqKi8gXHQvLyBpbnN0YWxsIGEgSlNPTlAgY2FsbGJhY2sgZm9yIGNodW5rIGxvYWRpbmdcbi8qKioqKiovIFx0dmFyIHBhcmVudEpzb25wRnVuY3Rpb24gPSB3aW5kb3dbXCJ3ZWJwYWNrSnNvbnBcIl07XG4vKioqKioqLyBcdHdpbmRvd1tcIndlYnBhY2tKc29ucFwiXSA9IGZ1bmN0aW9uIHdlYnBhY2tKc29ucENhbGxiYWNrKGNodW5rSWRzLCBtb3JlTW9kdWxlcykge1xuLyoqKioqKi8gXHRcdC8vIGFkZCBcIm1vcmVNb2R1bGVzXCIgdG8gdGhlIG1vZHVsZXMgb2JqZWN0LFxuLyoqKioqKi8gXHRcdC8vIHRoZW4gZmxhZyBhbGwgXCJjaHVua0lkc1wiIGFzIGxvYWRlZCBhbmQgZmlyZSBjYWxsYmFja1xuLyoqKioqKi8gXHRcdHZhciBtb2R1bGVJZCwgY2h1bmtJZCwgaSA9IDAsIGNhbGxiYWNrcyA9IFtdO1xuLyoqKioqKi8gXHRcdGZvcig7aSA8IGNodW5rSWRzLmxlbmd0aDsgaSsrKSB7XG4vKioqKioqLyBcdFx0XHRjaHVua0lkID0gY2h1bmtJZHNbaV07XG4vKioqKioqLyBcdFx0XHRpZihpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0pXG4vKioqKioqLyBcdFx0XHRcdGNhbGxiYWNrcy5wdXNoLmFwcGx5KGNhbGxiYWNrcywgaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdKTtcbi8qKioqKiovIFx0XHRcdGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9IDA7XG4vKioqKioqLyBcdFx0fVxuLyoqKioqKi8gXHRcdGZvcihtb2R1bGVJZCBpbiBtb3JlTW9kdWxlcykge1xuLyoqKioqKi8gXHRcdFx0bW9kdWxlc1ttb2R1bGVJZF0gPSBtb3JlTW9kdWxlc1ttb2R1bGVJZF07XG4vKioqKioqLyBcdFx0fVxuLyoqKioqKi8gXHRcdGlmKHBhcmVudEpzb25wRnVuY3Rpb24pIHBhcmVudEpzb25wRnVuY3Rpb24oY2h1bmtJZHMsIG1vcmVNb2R1bGVzKTtcbi8qKioqKiovIFx0XHR3aGlsZShjYWxsYmFja3MubGVuZ3RoKVxuLyoqKioqKi8gXHRcdFx0Y2FsbGJhY2tzLnNoaWZ0KCkuY2FsbChudWxsLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcbi8qKioqKiovIFx0XHRpZihtb3JlTW9kdWxlc1swXSkge1xuLyoqKioqKi8gXHRcdFx0aW5zdGFsbGVkTW9kdWxlc1swXSA9IDA7XG4vKioqKioqLyBcdFx0XHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcbi8qKioqKiovIFx0XHR9XG4vKioqKioqLyBcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBvYmplY3QgdG8gc3RvcmUgbG9hZGVkIGFuZCBsb2FkaW5nIGNodW5rc1xuLyoqKioqKi8gXHQvLyBcIjBcIiBtZWFucyBcImFscmVhZHkgbG9hZGVkXCJcbi8qKioqKiovIFx0Ly8gQXJyYXkgbWVhbnMgXCJsb2FkaW5nXCIsIGFycmF5IGNvbnRhaW5zIGNhbGxiYWNrc1xuLyoqKioqKi8gXHR2YXIgaW5zdGFsbGVkQ2h1bmtzID0ge1xuLyoqKioqKi8gXHRcdDE6MFxuLyoqKioqKi8gXHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbi8qKioqKiovIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbi8qKioqKiovIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbi8qKioqKiovIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuLyoqKioqKi8gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbi8qKioqKiovIFx0XHRcdGV4cG9ydHM6IHt9LFxuLyoqKioqKi8gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuLyoqKioqKi8gXHRcdFx0bG9hZGVkOiBmYWxzZVxuLyoqKioqKi8gXHRcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuLyoqKioqKi8gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4vKioqKioqLyBcdFx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4vKioqKioqLyBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuLyoqKioqKi8gXHR9XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBUaGlzIGZpbGUgY29udGFpbnMgb25seSB0aGUgZW50cnkgY2h1bmsuXG4vKioqKioqLyBcdC8vIFRoZSBjaHVuayBsb2FkaW5nIGZ1bmN0aW9uIGZvciBhZGRpdGlvbmFsIGNodW5rc1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmUgPSBmdW5jdGlvbiByZXF1aXJlRW5zdXJlKGNodW5rSWQsIGNhbGxiYWNrKSB7XG4vKioqKioqLyBcdFx0Ly8gXCIwXCIgaXMgdGhlIHNpZ25hbCBmb3IgXCJhbHJlYWR5IGxvYWRlZFwiXG4vKioqKioqLyBcdFx0aWYoaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdID09PSAwKVxuLyoqKioqKi8gXHRcdFx0cmV0dXJuIGNhbGxiYWNrLmNhbGwobnVsbCwgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIGFuIGFycmF5IG1lYW5zIFwiY3VycmVudGx5IGxvYWRpbmdcIi5cbi8qKioqKiovIFx0XHRpZihpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gIT09IHVuZGVmaW5lZCkge1xuLyoqKioqKi8gXHRcdFx0aW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdLnB1c2goY2FsbGJhY2spO1xuLyoqKioqKi8gXHRcdH0gZWxzZSB7XG4vKioqKioqLyBcdFx0XHQvLyBzdGFydCBjaHVuayBsb2FkaW5nXG4vKioqKioqLyBcdFx0XHRpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPSBbY2FsbGJhY2tdO1xuLyoqKioqKi8gXHRcdFx0dmFyIGhlYWQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaGVhZCcpWzBdO1xuLyoqKioqKi8gXHRcdFx0dmFyIHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuLyoqKioqKi8gXHRcdFx0c2NyaXB0LnR5cGUgPSAndGV4dC9qYXZhc2NyaXB0Jztcbi8qKioqKiovIFx0XHRcdHNjcmlwdC5jaGFyc2V0ID0gJ3V0Zi04Jztcbi8qKioqKiovIFx0XHRcdHNjcmlwdC5hc3luYyA9IHRydWU7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdFx0c2NyaXB0LnNyYyA9IF9fd2VicGFja19yZXF1aXJlX18ucCArIFwiXCIgKyBjaHVua0lkICsgXCIuYXBwLmpzXCI7XG4vKioqKioqLyBcdFx0XHRoZWFkLmFwcGVuZENoaWxkKHNjcmlwdCk7XG4vKioqKioqLyBcdFx0fVxuLyoqKioqKi8gXHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuLyoqKioqKi8gfSlcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqKioqLyAoe1xuXG4vKioqLyAyOlxuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyohXG5cdCAqIEJvb3RzdHJhcCB2My4zLjcgKGh0dHA6Ly9nZXRib290c3RyYXAuY29tKVxuXHQgKiBDb3B5cmlnaHQgMjAxMS0yMDE2IFR3aXR0ZXIsIEluYy5cblx0ICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlXG5cdCAqL1xuXHRcblx0aWYgKHR5cGVvZiBqUXVlcnkgPT09ICd1bmRlZmluZWQnKSB7XG5cdCAgdGhyb3cgbmV3IEVycm9yKCdCb290c3RyYXBcXCdzIEphdmFTY3JpcHQgcmVxdWlyZXMgalF1ZXJ5Jylcblx0fVxuXHRcblx0K2Z1bmN0aW9uICgkKSB7XG5cdCAgJ3VzZSBzdHJpY3QnO1xuXHQgIHZhciB2ZXJzaW9uID0gJC5mbi5qcXVlcnkuc3BsaXQoJyAnKVswXS5zcGxpdCgnLicpXG5cdCAgaWYgKCh2ZXJzaW9uWzBdIDwgMiAmJiB2ZXJzaW9uWzFdIDwgOSkgfHwgKHZlcnNpb25bMF0gPT0gMSAmJiB2ZXJzaW9uWzFdID09IDkgJiYgdmVyc2lvblsyXSA8IDEpIHx8ICh2ZXJzaW9uWzBdID4gMykpIHtcblx0ICAgIHRocm93IG5ldyBFcnJvcignQm9vdHN0cmFwXFwncyBKYXZhU2NyaXB0IHJlcXVpcmVzIGpRdWVyeSB2ZXJzaW9uIDEuOS4xIG9yIGhpZ2hlciwgYnV0IGxvd2VyIHRoYW4gdmVyc2lvbiA0Jylcblx0ICB9XG5cdH0oalF1ZXJ5KTtcblx0XG5cdC8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHQgKiBCb290c3RyYXA6IHRyYW5zaXRpb24uanMgdjMuMy43XG5cdCAqIGh0dHA6Ly9nZXRib290c3RyYXAuY29tL2phdmFzY3JpcHQvI3RyYW5zaXRpb25zXG5cdCAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHQgKiBDb3B5cmlnaHQgMjAxMS0yMDE2IFR3aXR0ZXIsIEluYy5cblx0ICogTGljZW5zZWQgdW5kZXIgTUlUIChodHRwczovL2dpdGh1Yi5jb20vdHdicy9ib290c3RyYXAvYmxvYi9tYXN0ZXIvTElDRU5TRSlcblx0ICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXG5cdFxuXHRcblx0K2Z1bmN0aW9uICgkKSB7XG5cdCAgJ3VzZSBzdHJpY3QnO1xuXHRcblx0ICAvLyBDU1MgVFJBTlNJVElPTiBTVVBQT1JUIChTaG91dG91dDogaHR0cDovL3d3dy5tb2Rlcm5penIuY29tLylcblx0ICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0XG5cdCAgZnVuY3Rpb24gdHJhbnNpdGlvbkVuZCgpIHtcblx0ICAgIHZhciBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2Jvb3RzdHJhcCcpXG5cdFxuXHQgICAgdmFyIHRyYW5zRW5kRXZlbnROYW1lcyA9IHtcblx0ICAgICAgV2Via2l0VHJhbnNpdGlvbiA6ICd3ZWJraXRUcmFuc2l0aW9uRW5kJyxcblx0ICAgICAgTW96VHJhbnNpdGlvbiAgICA6ICd0cmFuc2l0aW9uZW5kJyxcblx0ICAgICAgT1RyYW5zaXRpb24gICAgICA6ICdvVHJhbnNpdGlvbkVuZCBvdHJhbnNpdGlvbmVuZCcsXG5cdCAgICAgIHRyYW5zaXRpb24gICAgICAgOiAndHJhbnNpdGlvbmVuZCdcblx0ICAgIH1cblx0XG5cdCAgICBmb3IgKHZhciBuYW1lIGluIHRyYW5zRW5kRXZlbnROYW1lcykge1xuXHQgICAgICBpZiAoZWwuc3R5bGVbbmFtZV0gIT09IHVuZGVmaW5lZCkge1xuXHQgICAgICAgIHJldHVybiB7IGVuZDogdHJhbnNFbmRFdmVudE5hbWVzW25hbWVdIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiBmYWxzZSAvLyBleHBsaWNpdCBmb3IgaWU4ICggIC5fLilcblx0ICB9XG5cdFxuXHQgIC8vIGh0dHA6Ly9ibG9nLmFsZXhtYWNjYXcuY29tL2Nzcy10cmFuc2l0aW9uc1xuXHQgICQuZm4uZW11bGF0ZVRyYW5zaXRpb25FbmQgPSBmdW5jdGlvbiAoZHVyYXRpb24pIHtcblx0ICAgIHZhciBjYWxsZWQgPSBmYWxzZVxuXHQgICAgdmFyICRlbCA9IHRoaXNcblx0ICAgICQodGhpcykub25lKCdic1RyYW5zaXRpb25FbmQnLCBmdW5jdGlvbiAoKSB7IGNhbGxlZCA9IHRydWUgfSlcblx0ICAgIHZhciBjYWxsYmFjayA9IGZ1bmN0aW9uICgpIHsgaWYgKCFjYWxsZWQpICQoJGVsKS50cmlnZ2VyKCQuc3VwcG9ydC50cmFuc2l0aW9uLmVuZCkgfVxuXHQgICAgc2V0VGltZW91dChjYWxsYmFjaywgZHVyYXRpb24pXG5cdCAgICByZXR1cm4gdGhpc1xuXHQgIH1cblx0XG5cdCAgJChmdW5jdGlvbiAoKSB7XG5cdCAgICAkLnN1cHBvcnQudHJhbnNpdGlvbiA9IHRyYW5zaXRpb25FbmQoKVxuXHRcblx0ICAgIGlmICghJC5zdXBwb3J0LnRyYW5zaXRpb24pIHJldHVyblxuXHRcblx0ICAgICQuZXZlbnQuc3BlY2lhbC5ic1RyYW5zaXRpb25FbmQgPSB7XG5cdCAgICAgIGJpbmRUeXBlOiAkLnN1cHBvcnQudHJhbnNpdGlvbi5lbmQsXG5cdCAgICAgIGRlbGVnYXRlVHlwZTogJC5zdXBwb3J0LnRyYW5zaXRpb24uZW5kLFxuXHQgICAgICBoYW5kbGU6IGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgICAgaWYgKCQoZS50YXJnZXQpLmlzKHRoaXMpKSByZXR1cm4gZS5oYW5kbGVPYmouaGFuZGxlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpXG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9KVxuXHRcblx0fShqUXVlcnkpO1xuXHRcblx0LyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdCAqIEJvb3RzdHJhcDogYWxlcnQuanMgdjMuMy43XG5cdCAqIGh0dHA6Ly9nZXRib290c3RyYXAuY29tL2phdmFzY3JpcHQvI2FsZXJ0c1xuXHQgKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0ICogQ29weXJpZ2h0IDIwMTEtMjAxNiBUd2l0dGVyLCBJbmMuXG5cdCAqIExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2Jsb2IvbWFzdGVyL0xJQ0VOU0UpXG5cdCAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xuXHRcblx0XG5cdCtmdW5jdGlvbiAoJCkge1xuXHQgICd1c2Ugc3RyaWN0Jztcblx0XG5cdCAgLy8gQUxFUlQgQ0xBU1MgREVGSU5JVElPTlxuXHQgIC8vID09PT09PT09PT09PT09PT09PT09PT1cblx0XG5cdCAgdmFyIGRpc21pc3MgPSAnW2RhdGEtZGlzbWlzcz1cImFsZXJ0XCJdJ1xuXHQgIHZhciBBbGVydCAgID0gZnVuY3Rpb24gKGVsKSB7XG5cdCAgICAkKGVsKS5vbignY2xpY2snLCBkaXNtaXNzLCB0aGlzLmNsb3NlKVxuXHQgIH1cblx0XG5cdCAgQWxlcnQuVkVSU0lPTiA9ICczLjMuNydcblx0XG5cdCAgQWxlcnQuVFJBTlNJVElPTl9EVVJBVElPTiA9IDE1MFxuXHRcblx0ICBBbGVydC5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbiAoZSkge1xuXHQgICAgdmFyICR0aGlzICAgID0gJCh0aGlzKVxuXHQgICAgdmFyIHNlbGVjdG9yID0gJHRoaXMuYXR0cignZGF0YS10YXJnZXQnKVxuXHRcblx0ICAgIGlmICghc2VsZWN0b3IpIHtcblx0ICAgICAgc2VsZWN0b3IgPSAkdGhpcy5hdHRyKCdocmVmJylcblx0ICAgICAgc2VsZWN0b3IgPSBzZWxlY3RvciAmJiBzZWxlY3Rvci5yZXBsYWNlKC8uKig/PSNbXlxcc10qJCkvLCAnJykgLy8gc3RyaXAgZm9yIGllN1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciAkcGFyZW50ID0gJChzZWxlY3RvciA9PT0gJyMnID8gW10gOiBzZWxlY3Rvcilcblx0XG5cdCAgICBpZiAoZSkgZS5wcmV2ZW50RGVmYXVsdCgpXG5cdFxuXHQgICAgaWYgKCEkcGFyZW50Lmxlbmd0aCkge1xuXHQgICAgICAkcGFyZW50ID0gJHRoaXMuY2xvc2VzdCgnLmFsZXJ0Jylcblx0ICAgIH1cblx0XG5cdCAgICAkcGFyZW50LnRyaWdnZXIoZSA9ICQuRXZlbnQoJ2Nsb3NlLmJzLmFsZXJ0JykpXG5cdFxuXHQgICAgaWYgKGUuaXNEZWZhdWx0UHJldmVudGVkKCkpIHJldHVyblxuXHRcblx0ICAgICRwYXJlbnQucmVtb3ZlQ2xhc3MoJ2luJylcblx0XG5cdCAgICBmdW5jdGlvbiByZW1vdmVFbGVtZW50KCkge1xuXHQgICAgICAvLyBkZXRhY2ggZnJvbSBwYXJlbnQsIGZpcmUgZXZlbnQgdGhlbiBjbGVhbiB1cCBkYXRhXG5cdCAgICAgICRwYXJlbnQuZGV0YWNoKCkudHJpZ2dlcignY2xvc2VkLmJzLmFsZXJ0JykucmVtb3ZlKClcblx0ICAgIH1cblx0XG5cdCAgICAkLnN1cHBvcnQudHJhbnNpdGlvbiAmJiAkcGFyZW50Lmhhc0NsYXNzKCdmYWRlJykgP1xuXHQgICAgICAkcGFyZW50XG5cdCAgICAgICAgLm9uZSgnYnNUcmFuc2l0aW9uRW5kJywgcmVtb3ZlRWxlbWVudClcblx0ICAgICAgICAuZW11bGF0ZVRyYW5zaXRpb25FbmQoQWxlcnQuVFJBTlNJVElPTl9EVVJBVElPTikgOlxuXHQgICAgICByZW1vdmVFbGVtZW50KClcblx0ICB9XG5cdFxuXHRcblx0ICAvLyBBTEVSVCBQTFVHSU4gREVGSU5JVElPTlxuXHQgIC8vID09PT09PT09PT09PT09PT09PT09PT09XG5cdFxuXHQgIGZ1bmN0aW9uIFBsdWdpbihvcHRpb24pIHtcblx0ICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xuXHQgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpXG5cdCAgICAgIHZhciBkYXRhICA9ICR0aGlzLmRhdGEoJ2JzLmFsZXJ0Jylcblx0XG5cdCAgICAgIGlmICghZGF0YSkgJHRoaXMuZGF0YSgnYnMuYWxlcnQnLCAoZGF0YSA9IG5ldyBBbGVydCh0aGlzKSkpXG5cdCAgICAgIGlmICh0eXBlb2Ygb3B0aW9uID09ICdzdHJpbmcnKSBkYXRhW29wdGlvbl0uY2FsbCgkdGhpcylcblx0ICAgIH0pXG5cdCAgfVxuXHRcblx0ICB2YXIgb2xkID0gJC5mbi5hbGVydFxuXHRcblx0ICAkLmZuLmFsZXJ0ICAgICAgICAgICAgID0gUGx1Z2luXG5cdCAgJC5mbi5hbGVydC5Db25zdHJ1Y3RvciA9IEFsZXJ0XG5cdFxuXHRcblx0ICAvLyBBTEVSVCBOTyBDT05GTElDVFxuXHQgIC8vID09PT09PT09PT09PT09PT09XG5cdFxuXHQgICQuZm4uYWxlcnQubm9Db25mbGljdCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICQuZm4uYWxlcnQgPSBvbGRcblx0ICAgIHJldHVybiB0aGlzXG5cdCAgfVxuXHRcblx0XG5cdCAgLy8gQUxFUlQgREFUQS1BUElcblx0ICAvLyA9PT09PT09PT09PT09PVxuXHRcblx0ICAkKGRvY3VtZW50KS5vbignY2xpY2suYnMuYWxlcnQuZGF0YS1hcGknLCBkaXNtaXNzLCBBbGVydC5wcm90b3R5cGUuY2xvc2UpXG5cdFxuXHR9KGpRdWVyeSk7XG5cdFxuXHQvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0ICogQm9vdHN0cmFwOiBidXR0b24uanMgdjMuMy43XG5cdCAqIGh0dHA6Ly9nZXRib290c3RyYXAuY29tL2phdmFzY3JpcHQvI2J1dHRvbnNcblx0ICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdCAqIENvcHlyaWdodCAyMDExLTIwMTYgVHdpdHRlciwgSW5jLlxuXHQgKiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ibG9iL21hc3Rlci9MSUNFTlNFKVxuXHQgKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cblx0XG5cdFxuXHQrZnVuY3Rpb24gKCQpIHtcblx0ICAndXNlIHN0cmljdCc7XG5cdFxuXHQgIC8vIEJVVFRPTiBQVUJMSUMgQ0xBU1MgREVGSU5JVElPTlxuXHQgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHRcblx0ICB2YXIgQnV0dG9uID0gZnVuY3Rpb24gKGVsZW1lbnQsIG9wdGlvbnMpIHtcblx0ICAgIHRoaXMuJGVsZW1lbnQgID0gJChlbGVtZW50KVxuXHQgICAgdGhpcy5vcHRpb25zICAgPSAkLmV4dGVuZCh7fSwgQnV0dG9uLkRFRkFVTFRTLCBvcHRpb25zKVxuXHQgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZVxuXHQgIH1cblx0XG5cdCAgQnV0dG9uLlZFUlNJT04gID0gJzMuMy43J1xuXHRcblx0ICBCdXR0b24uREVGQVVMVFMgPSB7XG5cdCAgICBsb2FkaW5nVGV4dDogJ2xvYWRpbmcuLi4nXG5cdCAgfVxuXHRcblx0ICBCdXR0b24ucHJvdG90eXBlLnNldFN0YXRlID0gZnVuY3Rpb24gKHN0YXRlKSB7XG5cdCAgICB2YXIgZCAgICA9ICdkaXNhYmxlZCdcblx0ICAgIHZhciAkZWwgID0gdGhpcy4kZWxlbWVudFxuXHQgICAgdmFyIHZhbCAgPSAkZWwuaXMoJ2lucHV0JykgPyAndmFsJyA6ICdodG1sJ1xuXHQgICAgdmFyIGRhdGEgPSAkZWwuZGF0YSgpXG5cdFxuXHQgICAgc3RhdGUgKz0gJ1RleHQnXG5cdFxuXHQgICAgaWYgKGRhdGEucmVzZXRUZXh0ID09IG51bGwpICRlbC5kYXRhKCdyZXNldFRleHQnLCAkZWxbdmFsXSgpKVxuXHRcblx0ICAgIC8vIHB1c2ggdG8gZXZlbnQgbG9vcCB0byBhbGxvdyBmb3JtcyB0byBzdWJtaXRcblx0ICAgIHNldFRpbWVvdXQoJC5wcm94eShmdW5jdGlvbiAoKSB7XG5cdCAgICAgICRlbFt2YWxdKGRhdGFbc3RhdGVdID09IG51bGwgPyB0aGlzLm9wdGlvbnNbc3RhdGVdIDogZGF0YVtzdGF0ZV0pXG5cdFxuXHQgICAgICBpZiAoc3RhdGUgPT0gJ2xvYWRpbmdUZXh0Jykge1xuXHQgICAgICAgIHRoaXMuaXNMb2FkaW5nID0gdHJ1ZVxuXHQgICAgICAgICRlbC5hZGRDbGFzcyhkKS5hdHRyKGQsIGQpLnByb3AoZCwgdHJ1ZSlcblx0ICAgICAgfSBlbHNlIGlmICh0aGlzLmlzTG9hZGluZykge1xuXHQgICAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2Vcblx0ICAgICAgICAkZWwucmVtb3ZlQ2xhc3MoZCkucmVtb3ZlQXR0cihkKS5wcm9wKGQsIGZhbHNlKVxuXHQgICAgICB9XG5cdCAgICB9LCB0aGlzKSwgMClcblx0ICB9XG5cdFxuXHQgIEJ1dHRvbi5wcm90b3R5cGUudG9nZ2xlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIGNoYW5nZWQgPSB0cnVlXG5cdCAgICB2YXIgJHBhcmVudCA9IHRoaXMuJGVsZW1lbnQuY2xvc2VzdCgnW2RhdGEtdG9nZ2xlPVwiYnV0dG9uc1wiXScpXG5cdFxuXHQgICAgaWYgKCRwYXJlbnQubGVuZ3RoKSB7XG5cdCAgICAgIHZhciAkaW5wdXQgPSB0aGlzLiRlbGVtZW50LmZpbmQoJ2lucHV0Jylcblx0ICAgICAgaWYgKCRpbnB1dC5wcm9wKCd0eXBlJykgPT0gJ3JhZGlvJykge1xuXHQgICAgICAgIGlmICgkaW5wdXQucHJvcCgnY2hlY2tlZCcpKSBjaGFuZ2VkID0gZmFsc2Vcblx0ICAgICAgICAkcGFyZW50LmZpbmQoJy5hY3RpdmUnKS5yZW1vdmVDbGFzcygnYWN0aXZlJylcblx0ICAgICAgICB0aGlzLiRlbGVtZW50LmFkZENsYXNzKCdhY3RpdmUnKVxuXHQgICAgICB9IGVsc2UgaWYgKCRpbnB1dC5wcm9wKCd0eXBlJykgPT0gJ2NoZWNrYm94Jykge1xuXHQgICAgICAgIGlmICgoJGlucHV0LnByb3AoJ2NoZWNrZWQnKSkgIT09IHRoaXMuJGVsZW1lbnQuaGFzQ2xhc3MoJ2FjdGl2ZScpKSBjaGFuZ2VkID0gZmFsc2Vcblx0ICAgICAgICB0aGlzLiRlbGVtZW50LnRvZ2dsZUNsYXNzKCdhY3RpdmUnKVxuXHQgICAgICB9XG5cdCAgICAgICRpbnB1dC5wcm9wKCdjaGVja2VkJywgdGhpcy4kZWxlbWVudC5oYXNDbGFzcygnYWN0aXZlJykpXG5cdCAgICAgIGlmIChjaGFuZ2VkKSAkaW5wdXQudHJpZ2dlcignY2hhbmdlJylcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRoaXMuJGVsZW1lbnQuYXR0cignYXJpYS1wcmVzc2VkJywgIXRoaXMuJGVsZW1lbnQuaGFzQ2xhc3MoJ2FjdGl2ZScpKVxuXHQgICAgICB0aGlzLiRlbGVtZW50LnRvZ2dsZUNsYXNzKCdhY3RpdmUnKVxuXHQgICAgfVxuXHQgIH1cblx0XG5cdFxuXHQgIC8vIEJVVFRPTiBQTFVHSU4gREVGSU5JVElPTlxuXHQgIC8vID09PT09PT09PT09PT09PT09PT09PT09PVxuXHRcblx0ICBmdW5jdGlvbiBQbHVnaW4ob3B0aW9uKSB7XG5cdCAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdmFyICR0aGlzICAgPSAkKHRoaXMpXG5cdCAgICAgIHZhciBkYXRhICAgID0gJHRoaXMuZGF0YSgnYnMuYnV0dG9uJylcblx0ICAgICAgdmFyIG9wdGlvbnMgPSB0eXBlb2Ygb3B0aW9uID09ICdvYmplY3QnICYmIG9wdGlvblxuXHRcblx0ICAgICAgaWYgKCFkYXRhKSAkdGhpcy5kYXRhKCdicy5idXR0b24nLCAoZGF0YSA9IG5ldyBCdXR0b24odGhpcywgb3B0aW9ucykpKVxuXHRcblx0ICAgICAgaWYgKG9wdGlvbiA9PSAndG9nZ2xlJykgZGF0YS50b2dnbGUoKVxuXHQgICAgICBlbHNlIGlmIChvcHRpb24pIGRhdGEuc2V0U3RhdGUob3B0aW9uKVxuXHQgICAgfSlcblx0ICB9XG5cdFxuXHQgIHZhciBvbGQgPSAkLmZuLmJ1dHRvblxuXHRcblx0ICAkLmZuLmJ1dHRvbiAgICAgICAgICAgICA9IFBsdWdpblxuXHQgICQuZm4uYnV0dG9uLkNvbnN0cnVjdG9yID0gQnV0dG9uXG5cdFxuXHRcblx0ICAvLyBCVVRUT04gTk8gQ09ORkxJQ1Rcblx0ICAvLyA9PT09PT09PT09PT09PT09PT1cblx0XG5cdCAgJC5mbi5idXR0b24ubm9Db25mbGljdCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICQuZm4uYnV0dG9uID0gb2xkXG5cdCAgICByZXR1cm4gdGhpc1xuXHQgIH1cblx0XG5cdFxuXHQgIC8vIEJVVFRPTiBEQVRBLUFQSVxuXHQgIC8vID09PT09PT09PT09PT09PVxuXHRcblx0ICAkKGRvY3VtZW50KVxuXHQgICAgLm9uKCdjbGljay5icy5idXR0b24uZGF0YS1hcGknLCAnW2RhdGEtdG9nZ2xlXj1cImJ1dHRvblwiXScsIGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgIHZhciAkYnRuID0gJChlLnRhcmdldCkuY2xvc2VzdCgnLmJ0bicpXG5cdCAgICAgIFBsdWdpbi5jYWxsKCRidG4sICd0b2dnbGUnKVxuXHQgICAgICBpZiAoISgkKGUudGFyZ2V0KS5pcygnaW5wdXRbdHlwZT1cInJhZGlvXCJdLCBpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl0nKSkpIHtcblx0ICAgICAgICAvLyBQcmV2ZW50IGRvdWJsZSBjbGljayBvbiByYWRpb3MsIGFuZCB0aGUgZG91YmxlIHNlbGVjdGlvbnMgKHNvIGNhbmNlbGxhdGlvbikgb24gY2hlY2tib3hlc1xuXHQgICAgICAgIGUucHJldmVudERlZmF1bHQoKVxuXHQgICAgICAgIC8vIFRoZSB0YXJnZXQgY29tcG9uZW50IHN0aWxsIHJlY2VpdmUgdGhlIGZvY3VzXG5cdCAgICAgICAgaWYgKCRidG4uaXMoJ2lucHV0LGJ1dHRvbicpKSAkYnRuLnRyaWdnZXIoJ2ZvY3VzJylcblx0ICAgICAgICBlbHNlICRidG4uZmluZCgnaW5wdXQ6dmlzaWJsZSxidXR0b246dmlzaWJsZScpLmZpcnN0KCkudHJpZ2dlcignZm9jdXMnKVxuXHQgICAgICB9XG5cdCAgICB9KVxuXHQgICAgLm9uKCdmb2N1cy5icy5idXR0b24uZGF0YS1hcGkgYmx1ci5icy5idXR0b24uZGF0YS1hcGknLCAnW2RhdGEtdG9nZ2xlXj1cImJ1dHRvblwiXScsIGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgICQoZS50YXJnZXQpLmNsb3Nlc3QoJy5idG4nKS50b2dnbGVDbGFzcygnZm9jdXMnLCAvXmZvY3VzKGluKT8kLy50ZXN0KGUudHlwZSkpXG5cdCAgICB9KVxuXHRcblx0fShqUXVlcnkpO1xuXHRcblx0LyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdCAqIEJvb3RzdHJhcDogY2Fyb3VzZWwuanMgdjMuMy43XG5cdCAqIGh0dHA6Ly9nZXRib290c3RyYXAuY29tL2phdmFzY3JpcHQvI2Nhcm91c2VsXG5cdCAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHQgKiBDb3B5cmlnaHQgMjAxMS0yMDE2IFR3aXR0ZXIsIEluYy5cblx0ICogTGljZW5zZWQgdW5kZXIgTUlUIChodHRwczovL2dpdGh1Yi5jb20vdHdicy9ib290c3RyYXAvYmxvYi9tYXN0ZXIvTElDRU5TRSlcblx0ICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXG5cdFxuXHRcblx0K2Z1bmN0aW9uICgkKSB7XG5cdCAgJ3VzZSBzdHJpY3QnO1xuXHRcblx0ICAvLyBDQVJPVVNFTCBDTEFTUyBERUZJTklUSU9OXG5cdCAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PVxuXHRcblx0ICB2YXIgQ2Fyb3VzZWwgPSBmdW5jdGlvbiAoZWxlbWVudCwgb3B0aW9ucykge1xuXHQgICAgdGhpcy4kZWxlbWVudCAgICA9ICQoZWxlbWVudClcblx0ICAgIHRoaXMuJGluZGljYXRvcnMgPSB0aGlzLiRlbGVtZW50LmZpbmQoJy5jYXJvdXNlbC1pbmRpY2F0b3JzJylcblx0ICAgIHRoaXMub3B0aW9ucyAgICAgPSBvcHRpb25zXG5cdCAgICB0aGlzLnBhdXNlZCAgICAgID0gbnVsbFxuXHQgICAgdGhpcy5zbGlkaW5nICAgICA9IG51bGxcblx0ICAgIHRoaXMuaW50ZXJ2YWwgICAgPSBudWxsXG5cdCAgICB0aGlzLiRhY3RpdmUgICAgID0gbnVsbFxuXHQgICAgdGhpcy4kaXRlbXMgICAgICA9IG51bGxcblx0XG5cdCAgICB0aGlzLm9wdGlvbnMua2V5Ym9hcmQgJiYgdGhpcy4kZWxlbWVudC5vbigna2V5ZG93bi5icy5jYXJvdXNlbCcsICQucHJveHkodGhpcy5rZXlkb3duLCB0aGlzKSlcblx0XG5cdCAgICB0aGlzLm9wdGlvbnMucGF1c2UgPT0gJ2hvdmVyJyAmJiAhKCdvbnRvdWNoc3RhcnQnIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkgJiYgdGhpcy4kZWxlbWVudFxuXHQgICAgICAub24oJ21vdXNlZW50ZXIuYnMuY2Fyb3VzZWwnLCAkLnByb3h5KHRoaXMucGF1c2UsIHRoaXMpKVxuXHQgICAgICAub24oJ21vdXNlbGVhdmUuYnMuY2Fyb3VzZWwnLCAkLnByb3h5KHRoaXMuY3ljbGUsIHRoaXMpKVxuXHQgIH1cblx0XG5cdCAgQ2Fyb3VzZWwuVkVSU0lPTiAgPSAnMy4zLjcnXG5cdFxuXHQgIENhcm91c2VsLlRSQU5TSVRJT05fRFVSQVRJT04gPSA2MDBcblx0XG5cdCAgQ2Fyb3VzZWwuREVGQVVMVFMgPSB7XG5cdCAgICBpbnRlcnZhbDogNTAwMCxcblx0ICAgIHBhdXNlOiAnaG92ZXInLFxuXHQgICAgd3JhcDogdHJ1ZSxcblx0ICAgIGtleWJvYXJkOiB0cnVlXG5cdCAgfVxuXHRcblx0ICBDYXJvdXNlbC5wcm90b3R5cGUua2V5ZG93biA9IGZ1bmN0aW9uIChlKSB7XG5cdCAgICBpZiAoL2lucHV0fHRleHRhcmVhL2kudGVzdChlLnRhcmdldC50YWdOYW1lKSkgcmV0dXJuXG5cdCAgICBzd2l0Y2ggKGUud2hpY2gpIHtcblx0ICAgICAgY2FzZSAzNzogdGhpcy5wcmV2KCk7IGJyZWFrXG5cdCAgICAgIGNhc2UgMzk6IHRoaXMubmV4dCgpOyBicmVha1xuXHQgICAgICBkZWZhdWx0OiByZXR1cm5cblx0ICAgIH1cblx0XG5cdCAgICBlLnByZXZlbnREZWZhdWx0KClcblx0ICB9XG5cdFxuXHQgIENhcm91c2VsLnByb3RvdHlwZS5jeWNsZSA9IGZ1bmN0aW9uIChlKSB7XG5cdCAgICBlIHx8ICh0aGlzLnBhdXNlZCA9IGZhbHNlKVxuXHRcblx0ICAgIHRoaXMuaW50ZXJ2YWwgJiYgY2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsKVxuXHRcblx0ICAgIHRoaXMub3B0aW9ucy5pbnRlcnZhbFxuXHQgICAgICAmJiAhdGhpcy5wYXVzZWRcblx0ICAgICAgJiYgKHRoaXMuaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgkLnByb3h5KHRoaXMubmV4dCwgdGhpcyksIHRoaXMub3B0aW9ucy5pbnRlcnZhbCkpXG5cdFxuXHQgICAgcmV0dXJuIHRoaXNcblx0ICB9XG5cdFxuXHQgIENhcm91c2VsLnByb3RvdHlwZS5nZXRJdGVtSW5kZXggPSBmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgdGhpcy4kaXRlbXMgPSBpdGVtLnBhcmVudCgpLmNoaWxkcmVuKCcuaXRlbScpXG5cdCAgICByZXR1cm4gdGhpcy4kaXRlbXMuaW5kZXgoaXRlbSB8fCB0aGlzLiRhY3RpdmUpXG5cdCAgfVxuXHRcblx0ICBDYXJvdXNlbC5wcm90b3R5cGUuZ2V0SXRlbUZvckRpcmVjdGlvbiA9IGZ1bmN0aW9uIChkaXJlY3Rpb24sIGFjdGl2ZSkge1xuXHQgICAgdmFyIGFjdGl2ZUluZGV4ID0gdGhpcy5nZXRJdGVtSW5kZXgoYWN0aXZlKVxuXHQgICAgdmFyIHdpbGxXcmFwID0gKGRpcmVjdGlvbiA9PSAncHJldicgJiYgYWN0aXZlSW5kZXggPT09IDApXG5cdCAgICAgICAgICAgICAgICB8fCAoZGlyZWN0aW9uID09ICduZXh0JyAmJiBhY3RpdmVJbmRleCA9PSAodGhpcy4kaXRlbXMubGVuZ3RoIC0gMSkpXG5cdCAgICBpZiAod2lsbFdyYXAgJiYgIXRoaXMub3B0aW9ucy53cmFwKSByZXR1cm4gYWN0aXZlXG5cdCAgICB2YXIgZGVsdGEgPSBkaXJlY3Rpb24gPT0gJ3ByZXYnID8gLTEgOiAxXG5cdCAgICB2YXIgaXRlbUluZGV4ID0gKGFjdGl2ZUluZGV4ICsgZGVsdGEpICUgdGhpcy4kaXRlbXMubGVuZ3RoXG5cdCAgICByZXR1cm4gdGhpcy4kaXRlbXMuZXEoaXRlbUluZGV4KVxuXHQgIH1cblx0XG5cdCAgQ2Fyb3VzZWwucHJvdG90eXBlLnRvID0gZnVuY3Rpb24gKHBvcykge1xuXHQgICAgdmFyIHRoYXQgICAgICAgID0gdGhpc1xuXHQgICAgdmFyIGFjdGl2ZUluZGV4ID0gdGhpcy5nZXRJdGVtSW5kZXgodGhpcy4kYWN0aXZlID0gdGhpcy4kZWxlbWVudC5maW5kKCcuaXRlbS5hY3RpdmUnKSlcblx0XG5cdCAgICBpZiAocG9zID4gKHRoaXMuJGl0ZW1zLmxlbmd0aCAtIDEpIHx8IHBvcyA8IDApIHJldHVyblxuXHRcblx0ICAgIGlmICh0aGlzLnNsaWRpbmcpICAgICAgIHJldHVybiB0aGlzLiRlbGVtZW50Lm9uZSgnc2xpZC5icy5jYXJvdXNlbCcsIGZ1bmN0aW9uICgpIHsgdGhhdC50byhwb3MpIH0pIC8vIHllcywgXCJzbGlkXCJcblx0ICAgIGlmIChhY3RpdmVJbmRleCA9PSBwb3MpIHJldHVybiB0aGlzLnBhdXNlKCkuY3ljbGUoKVxuXHRcblx0ICAgIHJldHVybiB0aGlzLnNsaWRlKHBvcyA+IGFjdGl2ZUluZGV4ID8gJ25leHQnIDogJ3ByZXYnLCB0aGlzLiRpdGVtcy5lcShwb3MpKVxuXHQgIH1cblx0XG5cdCAgQ2Fyb3VzZWwucHJvdG90eXBlLnBhdXNlID0gZnVuY3Rpb24gKGUpIHtcblx0ICAgIGUgfHwgKHRoaXMucGF1c2VkID0gdHJ1ZSlcblx0XG5cdCAgICBpZiAodGhpcy4kZWxlbWVudC5maW5kKCcubmV4dCwgLnByZXYnKS5sZW5ndGggJiYgJC5zdXBwb3J0LnRyYW5zaXRpb24pIHtcblx0ICAgICAgdGhpcy4kZWxlbWVudC50cmlnZ2VyKCQuc3VwcG9ydC50cmFuc2l0aW9uLmVuZClcblx0ICAgICAgdGhpcy5jeWNsZSh0cnVlKVxuXHQgICAgfVxuXHRcblx0ICAgIHRoaXMuaW50ZXJ2YWwgPSBjbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWwpXG5cdFxuXHQgICAgcmV0dXJuIHRoaXNcblx0ICB9XG5cdFxuXHQgIENhcm91c2VsLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgaWYgKHRoaXMuc2xpZGluZykgcmV0dXJuXG5cdCAgICByZXR1cm4gdGhpcy5zbGlkZSgnbmV4dCcpXG5cdCAgfVxuXHRcblx0ICBDYXJvdXNlbC5wcm90b3R5cGUucHJldiA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIGlmICh0aGlzLnNsaWRpbmcpIHJldHVyblxuXHQgICAgcmV0dXJuIHRoaXMuc2xpZGUoJ3ByZXYnKVxuXHQgIH1cblx0XG5cdCAgQ2Fyb3VzZWwucHJvdG90eXBlLnNsaWRlID0gZnVuY3Rpb24gKHR5cGUsIG5leHQpIHtcblx0ICAgIHZhciAkYWN0aXZlICAgPSB0aGlzLiRlbGVtZW50LmZpbmQoJy5pdGVtLmFjdGl2ZScpXG5cdCAgICB2YXIgJG5leHQgICAgID0gbmV4dCB8fCB0aGlzLmdldEl0ZW1Gb3JEaXJlY3Rpb24odHlwZSwgJGFjdGl2ZSlcblx0ICAgIHZhciBpc0N5Y2xpbmcgPSB0aGlzLmludGVydmFsXG5cdCAgICB2YXIgZGlyZWN0aW9uID0gdHlwZSA9PSAnbmV4dCcgPyAnbGVmdCcgOiAncmlnaHQnXG5cdCAgICB2YXIgdGhhdCAgICAgID0gdGhpc1xuXHRcblx0ICAgIGlmICgkbmV4dC5oYXNDbGFzcygnYWN0aXZlJykpIHJldHVybiAodGhpcy5zbGlkaW5nID0gZmFsc2UpXG5cdFxuXHQgICAgdmFyIHJlbGF0ZWRUYXJnZXQgPSAkbmV4dFswXVxuXHQgICAgdmFyIHNsaWRlRXZlbnQgPSAkLkV2ZW50KCdzbGlkZS5icy5jYXJvdXNlbCcsIHtcblx0ICAgICAgcmVsYXRlZFRhcmdldDogcmVsYXRlZFRhcmdldCxcblx0ICAgICAgZGlyZWN0aW9uOiBkaXJlY3Rpb25cblx0ICAgIH0pXG5cdCAgICB0aGlzLiRlbGVtZW50LnRyaWdnZXIoc2xpZGVFdmVudClcblx0ICAgIGlmIChzbGlkZUV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpKSByZXR1cm5cblx0XG5cdCAgICB0aGlzLnNsaWRpbmcgPSB0cnVlXG5cdFxuXHQgICAgaXNDeWNsaW5nICYmIHRoaXMucGF1c2UoKVxuXHRcblx0ICAgIGlmICh0aGlzLiRpbmRpY2F0b3JzLmxlbmd0aCkge1xuXHQgICAgICB0aGlzLiRpbmRpY2F0b3JzLmZpbmQoJy5hY3RpdmUnKS5yZW1vdmVDbGFzcygnYWN0aXZlJylcblx0ICAgICAgdmFyICRuZXh0SW5kaWNhdG9yID0gJCh0aGlzLiRpbmRpY2F0b3JzLmNoaWxkcmVuKClbdGhpcy5nZXRJdGVtSW5kZXgoJG5leHQpXSlcblx0ICAgICAgJG5leHRJbmRpY2F0b3IgJiYgJG5leHRJbmRpY2F0b3IuYWRkQ2xhc3MoJ2FjdGl2ZScpXG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIHNsaWRFdmVudCA9ICQuRXZlbnQoJ3NsaWQuYnMuY2Fyb3VzZWwnLCB7IHJlbGF0ZWRUYXJnZXQ6IHJlbGF0ZWRUYXJnZXQsIGRpcmVjdGlvbjogZGlyZWN0aW9uIH0pIC8vIHllcywgXCJzbGlkXCJcblx0ICAgIGlmICgkLnN1cHBvcnQudHJhbnNpdGlvbiAmJiB0aGlzLiRlbGVtZW50Lmhhc0NsYXNzKCdzbGlkZScpKSB7XG5cdCAgICAgICRuZXh0LmFkZENsYXNzKHR5cGUpXG5cdCAgICAgICRuZXh0WzBdLm9mZnNldFdpZHRoIC8vIGZvcmNlIHJlZmxvd1xuXHQgICAgICAkYWN0aXZlLmFkZENsYXNzKGRpcmVjdGlvbilcblx0ICAgICAgJG5leHQuYWRkQ2xhc3MoZGlyZWN0aW9uKVxuXHQgICAgICAkYWN0aXZlXG5cdCAgICAgICAgLm9uZSgnYnNUcmFuc2l0aW9uRW5kJywgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgJG5leHQucmVtb3ZlQ2xhc3MoW3R5cGUsIGRpcmVjdGlvbl0uam9pbignICcpKS5hZGRDbGFzcygnYWN0aXZlJylcblx0ICAgICAgICAgICRhY3RpdmUucmVtb3ZlQ2xhc3MoWydhY3RpdmUnLCBkaXJlY3Rpb25dLmpvaW4oJyAnKSlcblx0ICAgICAgICAgIHRoYXQuc2xpZGluZyA9IGZhbHNlXG5cdCAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgdGhhdC4kZWxlbWVudC50cmlnZ2VyKHNsaWRFdmVudClcblx0ICAgICAgICAgIH0sIDApXG5cdCAgICAgICAgfSlcblx0ICAgICAgICAuZW11bGF0ZVRyYW5zaXRpb25FbmQoQ2Fyb3VzZWwuVFJBTlNJVElPTl9EVVJBVElPTilcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgICRhY3RpdmUucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpXG5cdCAgICAgICRuZXh0LmFkZENsYXNzKCdhY3RpdmUnKVxuXHQgICAgICB0aGlzLnNsaWRpbmcgPSBmYWxzZVxuXHQgICAgICB0aGlzLiRlbGVtZW50LnRyaWdnZXIoc2xpZEV2ZW50KVxuXHQgICAgfVxuXHRcblx0ICAgIGlzQ3ljbGluZyAmJiB0aGlzLmN5Y2xlKClcblx0XG5cdCAgICByZXR1cm4gdGhpc1xuXHQgIH1cblx0XG5cdFxuXHQgIC8vIENBUk9VU0VMIFBMVUdJTiBERUZJTklUSU9OXG5cdCAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0XG5cdCAgZnVuY3Rpb24gUGx1Z2luKG9wdGlvbikge1xuXHQgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHZhciAkdGhpcyAgID0gJCh0aGlzKVxuXHQgICAgICB2YXIgZGF0YSAgICA9ICR0aGlzLmRhdGEoJ2JzLmNhcm91c2VsJylcblx0ICAgICAgdmFyIG9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgQ2Fyb3VzZWwuREVGQVVMVFMsICR0aGlzLmRhdGEoKSwgdHlwZW9mIG9wdGlvbiA9PSAnb2JqZWN0JyAmJiBvcHRpb24pXG5cdCAgICAgIHZhciBhY3Rpb24gID0gdHlwZW9mIG9wdGlvbiA9PSAnc3RyaW5nJyA/IG9wdGlvbiA6IG9wdGlvbnMuc2xpZGVcblx0XG5cdCAgICAgIGlmICghZGF0YSkgJHRoaXMuZGF0YSgnYnMuY2Fyb3VzZWwnLCAoZGF0YSA9IG5ldyBDYXJvdXNlbCh0aGlzLCBvcHRpb25zKSkpXG5cdCAgICAgIGlmICh0eXBlb2Ygb3B0aW9uID09ICdudW1iZXInKSBkYXRhLnRvKG9wdGlvbilcblx0ICAgICAgZWxzZSBpZiAoYWN0aW9uKSBkYXRhW2FjdGlvbl0oKVxuXHQgICAgICBlbHNlIGlmIChvcHRpb25zLmludGVydmFsKSBkYXRhLnBhdXNlKCkuY3ljbGUoKVxuXHQgICAgfSlcblx0ICB9XG5cdFxuXHQgIHZhciBvbGQgPSAkLmZuLmNhcm91c2VsXG5cdFxuXHQgICQuZm4uY2Fyb3VzZWwgICAgICAgICAgICAgPSBQbHVnaW5cblx0ICAkLmZuLmNhcm91c2VsLkNvbnN0cnVjdG9yID0gQ2Fyb3VzZWxcblx0XG5cdFxuXHQgIC8vIENBUk9VU0VMIE5PIENPTkZMSUNUXG5cdCAgLy8gPT09PT09PT09PT09PT09PT09PT1cblx0XG5cdCAgJC5mbi5jYXJvdXNlbC5ub0NvbmZsaWN0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgJC5mbi5jYXJvdXNlbCA9IG9sZFxuXHQgICAgcmV0dXJuIHRoaXNcblx0ICB9XG5cdFxuXHRcblx0ICAvLyBDQVJPVVNFTCBEQVRBLUFQSVxuXHQgIC8vID09PT09PT09PT09PT09PT09XG5cdFxuXHQgIHZhciBjbGlja0hhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuXHQgICAgdmFyIGhyZWZcblx0ICAgIHZhciAkdGhpcyAgID0gJCh0aGlzKVxuXHQgICAgdmFyICR0YXJnZXQgPSAkKCR0aGlzLmF0dHIoJ2RhdGEtdGFyZ2V0JykgfHwgKGhyZWYgPSAkdGhpcy5hdHRyKCdocmVmJykpICYmIGhyZWYucmVwbGFjZSgvLiooPz0jW15cXHNdKyQpLywgJycpKSAvLyBzdHJpcCBmb3IgaWU3XG5cdCAgICBpZiAoISR0YXJnZXQuaGFzQ2xhc3MoJ2Nhcm91c2VsJykpIHJldHVyblxuXHQgICAgdmFyIG9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgJHRhcmdldC5kYXRhKCksICR0aGlzLmRhdGEoKSlcblx0ICAgIHZhciBzbGlkZUluZGV4ID0gJHRoaXMuYXR0cignZGF0YS1zbGlkZS10bycpXG5cdCAgICBpZiAoc2xpZGVJbmRleCkgb3B0aW9ucy5pbnRlcnZhbCA9IGZhbHNlXG5cdFxuXHQgICAgUGx1Z2luLmNhbGwoJHRhcmdldCwgb3B0aW9ucylcblx0XG5cdCAgICBpZiAoc2xpZGVJbmRleCkge1xuXHQgICAgICAkdGFyZ2V0LmRhdGEoJ2JzLmNhcm91c2VsJykudG8oc2xpZGVJbmRleClcblx0ICAgIH1cblx0XG5cdCAgICBlLnByZXZlbnREZWZhdWx0KClcblx0ICB9XG5cdFxuXHQgICQoZG9jdW1lbnQpXG5cdCAgICAub24oJ2NsaWNrLmJzLmNhcm91c2VsLmRhdGEtYXBpJywgJ1tkYXRhLXNsaWRlXScsIGNsaWNrSGFuZGxlcilcblx0ICAgIC5vbignY2xpY2suYnMuY2Fyb3VzZWwuZGF0YS1hcGknLCAnW2RhdGEtc2xpZGUtdG9dJywgY2xpY2tIYW5kbGVyKVxuXHRcblx0ICAkKHdpbmRvdykub24oJ2xvYWQnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAkKCdbZGF0YS1yaWRlPVwiY2Fyb3VzZWxcIl0nKS5lYWNoKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdmFyICRjYXJvdXNlbCA9ICQodGhpcylcblx0ICAgICAgUGx1Z2luLmNhbGwoJGNhcm91c2VsLCAkY2Fyb3VzZWwuZGF0YSgpKVxuXHQgICAgfSlcblx0ICB9KVxuXHRcblx0fShqUXVlcnkpO1xuXHRcblx0LyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdCAqIEJvb3RzdHJhcDogY29sbGFwc2UuanMgdjMuMy43XG5cdCAqIGh0dHA6Ly9nZXRib290c3RyYXAuY29tL2phdmFzY3JpcHQvI2NvbGxhcHNlXG5cdCAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHQgKiBDb3B5cmlnaHQgMjAxMS0yMDE2IFR3aXR0ZXIsIEluYy5cblx0ICogTGljZW5zZWQgdW5kZXIgTUlUIChodHRwczovL2dpdGh1Yi5jb20vdHdicy9ib290c3RyYXAvYmxvYi9tYXN0ZXIvTElDRU5TRSlcblx0ICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXG5cdFxuXHQvKiBqc2hpbnQgbGF0ZWRlZjogZmFsc2UgKi9cblx0XG5cdCtmdW5jdGlvbiAoJCkge1xuXHQgICd1c2Ugc3RyaWN0Jztcblx0XG5cdCAgLy8gQ09MTEFQU0UgUFVCTElDIENMQVNTIERFRklOSVRJT05cblx0ICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHRcblx0ICB2YXIgQ29sbGFwc2UgPSBmdW5jdGlvbiAoZWxlbWVudCwgb3B0aW9ucykge1xuXHQgICAgdGhpcy4kZWxlbWVudCAgICAgID0gJChlbGVtZW50KVxuXHQgICAgdGhpcy5vcHRpb25zICAgICAgID0gJC5leHRlbmQoe30sIENvbGxhcHNlLkRFRkFVTFRTLCBvcHRpb25zKVxuXHQgICAgdGhpcy4kdHJpZ2dlciAgICAgID0gJCgnW2RhdGEtdG9nZ2xlPVwiY29sbGFwc2VcIl1baHJlZj1cIiMnICsgZWxlbWVudC5pZCArICdcIl0sJyArXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICdbZGF0YS10b2dnbGU9XCJjb2xsYXBzZVwiXVtkYXRhLXRhcmdldD1cIiMnICsgZWxlbWVudC5pZCArICdcIl0nKVxuXHQgICAgdGhpcy50cmFuc2l0aW9uaW5nID0gbnVsbFxuXHRcblx0ICAgIGlmICh0aGlzLm9wdGlvbnMucGFyZW50KSB7XG5cdCAgICAgIHRoaXMuJHBhcmVudCA9IHRoaXMuZ2V0UGFyZW50KClcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRoaXMuYWRkQXJpYUFuZENvbGxhcHNlZENsYXNzKHRoaXMuJGVsZW1lbnQsIHRoaXMuJHRyaWdnZXIpXG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKHRoaXMub3B0aW9ucy50b2dnbGUpIHRoaXMudG9nZ2xlKClcblx0ICB9XG5cdFxuXHQgIENvbGxhcHNlLlZFUlNJT04gID0gJzMuMy43J1xuXHRcblx0ICBDb2xsYXBzZS5UUkFOU0lUSU9OX0RVUkFUSU9OID0gMzUwXG5cdFxuXHQgIENvbGxhcHNlLkRFRkFVTFRTID0ge1xuXHQgICAgdG9nZ2xlOiB0cnVlXG5cdCAgfVxuXHRcblx0ICBDb2xsYXBzZS5wcm90b3R5cGUuZGltZW5zaW9uID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIGhhc1dpZHRoID0gdGhpcy4kZWxlbWVudC5oYXNDbGFzcygnd2lkdGgnKVxuXHQgICAgcmV0dXJuIGhhc1dpZHRoID8gJ3dpZHRoJyA6ICdoZWlnaHQnXG5cdCAgfVxuXHRcblx0ICBDb2xsYXBzZS5wcm90b3R5cGUuc2hvdyA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIGlmICh0aGlzLnRyYW5zaXRpb25pbmcgfHwgdGhpcy4kZWxlbWVudC5oYXNDbGFzcygnaW4nKSkgcmV0dXJuXG5cdFxuXHQgICAgdmFyIGFjdGl2ZXNEYXRhXG5cdCAgICB2YXIgYWN0aXZlcyA9IHRoaXMuJHBhcmVudCAmJiB0aGlzLiRwYXJlbnQuY2hpbGRyZW4oJy5wYW5lbCcpLmNoaWxkcmVuKCcuaW4sIC5jb2xsYXBzaW5nJylcblx0XG5cdCAgICBpZiAoYWN0aXZlcyAmJiBhY3RpdmVzLmxlbmd0aCkge1xuXHQgICAgICBhY3RpdmVzRGF0YSA9IGFjdGl2ZXMuZGF0YSgnYnMuY29sbGFwc2UnKVxuXHQgICAgICBpZiAoYWN0aXZlc0RhdGEgJiYgYWN0aXZlc0RhdGEudHJhbnNpdGlvbmluZykgcmV0dXJuXG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIHN0YXJ0RXZlbnQgPSAkLkV2ZW50KCdzaG93LmJzLmNvbGxhcHNlJylcblx0ICAgIHRoaXMuJGVsZW1lbnQudHJpZ2dlcihzdGFydEV2ZW50KVxuXHQgICAgaWYgKHN0YXJ0RXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkpIHJldHVyblxuXHRcblx0ICAgIGlmIChhY3RpdmVzICYmIGFjdGl2ZXMubGVuZ3RoKSB7XG5cdCAgICAgIFBsdWdpbi5jYWxsKGFjdGl2ZXMsICdoaWRlJylcblx0ICAgICAgYWN0aXZlc0RhdGEgfHwgYWN0aXZlcy5kYXRhKCdicy5jb2xsYXBzZScsIG51bGwpXG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuZGltZW5zaW9uKClcblx0XG5cdCAgICB0aGlzLiRlbGVtZW50XG5cdCAgICAgIC5yZW1vdmVDbGFzcygnY29sbGFwc2UnKVxuXHQgICAgICAuYWRkQ2xhc3MoJ2NvbGxhcHNpbmcnKVtkaW1lbnNpb25dKDApXG5cdCAgICAgIC5hdHRyKCdhcmlhLWV4cGFuZGVkJywgdHJ1ZSlcblx0XG5cdCAgICB0aGlzLiR0cmlnZ2VyXG5cdCAgICAgIC5yZW1vdmVDbGFzcygnY29sbGFwc2VkJylcblx0ICAgICAgLmF0dHIoJ2FyaWEtZXhwYW5kZWQnLCB0cnVlKVxuXHRcblx0ICAgIHRoaXMudHJhbnNpdGlvbmluZyA9IDFcblx0XG5cdCAgICB2YXIgY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHRoaXMuJGVsZW1lbnRcblx0ICAgICAgICAucmVtb3ZlQ2xhc3MoJ2NvbGxhcHNpbmcnKVxuXHQgICAgICAgIC5hZGRDbGFzcygnY29sbGFwc2UgaW4nKVtkaW1lbnNpb25dKCcnKVxuXHQgICAgICB0aGlzLnRyYW5zaXRpb25pbmcgPSAwXG5cdCAgICAgIHRoaXMuJGVsZW1lbnRcblx0ICAgICAgICAudHJpZ2dlcignc2hvd24uYnMuY29sbGFwc2UnKVxuXHQgICAgfVxuXHRcblx0ICAgIGlmICghJC5zdXBwb3J0LnRyYW5zaXRpb24pIHJldHVybiBjb21wbGV0ZS5jYWxsKHRoaXMpXG5cdFxuXHQgICAgdmFyIHNjcm9sbFNpemUgPSAkLmNhbWVsQ2FzZShbJ3Njcm9sbCcsIGRpbWVuc2lvbl0uam9pbignLScpKVxuXHRcblx0ICAgIHRoaXMuJGVsZW1lbnRcblx0ICAgICAgLm9uZSgnYnNUcmFuc2l0aW9uRW5kJywgJC5wcm94eShjb21wbGV0ZSwgdGhpcykpXG5cdCAgICAgIC5lbXVsYXRlVHJhbnNpdGlvbkVuZChDb2xsYXBzZS5UUkFOU0lUSU9OX0RVUkFUSU9OKVtkaW1lbnNpb25dKHRoaXMuJGVsZW1lbnRbMF1bc2Nyb2xsU2l6ZV0pXG5cdCAgfVxuXHRcblx0ICBDb2xsYXBzZS5wcm90b3R5cGUuaGlkZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIGlmICh0aGlzLnRyYW5zaXRpb25pbmcgfHwgIXRoaXMuJGVsZW1lbnQuaGFzQ2xhc3MoJ2luJykpIHJldHVyblxuXHRcblx0ICAgIHZhciBzdGFydEV2ZW50ID0gJC5FdmVudCgnaGlkZS5icy5jb2xsYXBzZScpXG5cdCAgICB0aGlzLiRlbGVtZW50LnRyaWdnZXIoc3RhcnRFdmVudClcblx0ICAgIGlmIChzdGFydEV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpKSByZXR1cm5cblx0XG5cdCAgICB2YXIgZGltZW5zaW9uID0gdGhpcy5kaW1lbnNpb24oKVxuXHRcblx0ICAgIHRoaXMuJGVsZW1lbnRbZGltZW5zaW9uXSh0aGlzLiRlbGVtZW50W2RpbWVuc2lvbl0oKSlbMF0ub2Zmc2V0SGVpZ2h0XG5cdFxuXHQgICAgdGhpcy4kZWxlbWVudFxuXHQgICAgICAuYWRkQ2xhc3MoJ2NvbGxhcHNpbmcnKVxuXHQgICAgICAucmVtb3ZlQ2xhc3MoJ2NvbGxhcHNlIGluJylcblx0ICAgICAgLmF0dHIoJ2FyaWEtZXhwYW5kZWQnLCBmYWxzZSlcblx0XG5cdCAgICB0aGlzLiR0cmlnZ2VyXG5cdCAgICAgIC5hZGRDbGFzcygnY29sbGFwc2VkJylcblx0ICAgICAgLmF0dHIoJ2FyaWEtZXhwYW5kZWQnLCBmYWxzZSlcblx0XG5cdCAgICB0aGlzLnRyYW5zaXRpb25pbmcgPSAxXG5cdFxuXHQgICAgdmFyIGNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICB0aGlzLnRyYW5zaXRpb25pbmcgPSAwXG5cdCAgICAgIHRoaXMuJGVsZW1lbnRcblx0ICAgICAgICAucmVtb3ZlQ2xhc3MoJ2NvbGxhcHNpbmcnKVxuXHQgICAgICAgIC5hZGRDbGFzcygnY29sbGFwc2UnKVxuXHQgICAgICAgIC50cmlnZ2VyKCdoaWRkZW4uYnMuY29sbGFwc2UnKVxuXHQgICAgfVxuXHRcblx0ICAgIGlmICghJC5zdXBwb3J0LnRyYW5zaXRpb24pIHJldHVybiBjb21wbGV0ZS5jYWxsKHRoaXMpXG5cdFxuXHQgICAgdGhpcy4kZWxlbWVudFxuXHQgICAgICBbZGltZW5zaW9uXSgwKVxuXHQgICAgICAub25lKCdic1RyYW5zaXRpb25FbmQnLCAkLnByb3h5KGNvbXBsZXRlLCB0aGlzKSlcblx0ICAgICAgLmVtdWxhdGVUcmFuc2l0aW9uRW5kKENvbGxhcHNlLlRSQU5TSVRJT05fRFVSQVRJT04pXG5cdCAgfVxuXHRcblx0ICBDb2xsYXBzZS5wcm90b3R5cGUudG9nZ2xlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdGhpc1t0aGlzLiRlbGVtZW50Lmhhc0NsYXNzKCdpbicpID8gJ2hpZGUnIDogJ3Nob3cnXSgpXG5cdCAgfVxuXHRcblx0ICBDb2xsYXBzZS5wcm90b3R5cGUuZ2V0UGFyZW50ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgcmV0dXJuICQodGhpcy5vcHRpb25zLnBhcmVudClcblx0ICAgICAgLmZpbmQoJ1tkYXRhLXRvZ2dsZT1cImNvbGxhcHNlXCJdW2RhdGEtcGFyZW50PVwiJyArIHRoaXMub3B0aW9ucy5wYXJlbnQgKyAnXCJdJylcblx0ICAgICAgLmVhY2goJC5wcm94eShmdW5jdGlvbiAoaSwgZWxlbWVudCkge1xuXHQgICAgICAgIHZhciAkZWxlbWVudCA9ICQoZWxlbWVudClcblx0ICAgICAgICB0aGlzLmFkZEFyaWFBbmRDb2xsYXBzZWRDbGFzcyhnZXRUYXJnZXRGcm9tVHJpZ2dlcigkZWxlbWVudCksICRlbGVtZW50KVxuXHQgICAgICB9LCB0aGlzKSlcblx0ICAgICAgLmVuZCgpXG5cdCAgfVxuXHRcblx0ICBDb2xsYXBzZS5wcm90b3R5cGUuYWRkQXJpYUFuZENvbGxhcHNlZENsYXNzID0gZnVuY3Rpb24gKCRlbGVtZW50LCAkdHJpZ2dlcikge1xuXHQgICAgdmFyIGlzT3BlbiA9ICRlbGVtZW50Lmhhc0NsYXNzKCdpbicpXG5cdFxuXHQgICAgJGVsZW1lbnQuYXR0cignYXJpYS1leHBhbmRlZCcsIGlzT3Blbilcblx0ICAgICR0cmlnZ2VyXG5cdCAgICAgIC50b2dnbGVDbGFzcygnY29sbGFwc2VkJywgIWlzT3Blbilcblx0ICAgICAgLmF0dHIoJ2FyaWEtZXhwYW5kZWQnLCBpc09wZW4pXG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBnZXRUYXJnZXRGcm9tVHJpZ2dlcigkdHJpZ2dlcikge1xuXHQgICAgdmFyIGhyZWZcblx0ICAgIHZhciB0YXJnZXQgPSAkdHJpZ2dlci5hdHRyKCdkYXRhLXRhcmdldCcpXG5cdCAgICAgIHx8IChocmVmID0gJHRyaWdnZXIuYXR0cignaHJlZicpKSAmJiBocmVmLnJlcGxhY2UoLy4qKD89I1teXFxzXSskKS8sICcnKSAvLyBzdHJpcCBmb3IgaWU3XG5cdFxuXHQgICAgcmV0dXJuICQodGFyZ2V0KVxuXHQgIH1cblx0XG5cdFxuXHQgIC8vIENPTExBUFNFIFBMVUdJTiBERUZJTklUSU9OXG5cdCAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0XG5cdCAgZnVuY3Rpb24gUGx1Z2luKG9wdGlvbikge1xuXHQgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHZhciAkdGhpcyAgID0gJCh0aGlzKVxuXHQgICAgICB2YXIgZGF0YSAgICA9ICR0aGlzLmRhdGEoJ2JzLmNvbGxhcHNlJylcblx0ICAgICAgdmFyIG9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgQ29sbGFwc2UuREVGQVVMVFMsICR0aGlzLmRhdGEoKSwgdHlwZW9mIG9wdGlvbiA9PSAnb2JqZWN0JyAmJiBvcHRpb24pXG5cdFxuXHQgICAgICBpZiAoIWRhdGEgJiYgb3B0aW9ucy50b2dnbGUgJiYgL3Nob3d8aGlkZS8udGVzdChvcHRpb24pKSBvcHRpb25zLnRvZ2dsZSA9IGZhbHNlXG5cdCAgICAgIGlmICghZGF0YSkgJHRoaXMuZGF0YSgnYnMuY29sbGFwc2UnLCAoZGF0YSA9IG5ldyBDb2xsYXBzZSh0aGlzLCBvcHRpb25zKSkpXG5cdCAgICAgIGlmICh0eXBlb2Ygb3B0aW9uID09ICdzdHJpbmcnKSBkYXRhW29wdGlvbl0oKVxuXHQgICAgfSlcblx0ICB9XG5cdFxuXHQgIHZhciBvbGQgPSAkLmZuLmNvbGxhcHNlXG5cdFxuXHQgICQuZm4uY29sbGFwc2UgICAgICAgICAgICAgPSBQbHVnaW5cblx0ICAkLmZuLmNvbGxhcHNlLkNvbnN0cnVjdG9yID0gQ29sbGFwc2Vcblx0XG5cdFxuXHQgIC8vIENPTExBUFNFIE5PIENPTkZMSUNUXG5cdCAgLy8gPT09PT09PT09PT09PT09PT09PT1cblx0XG5cdCAgJC5mbi5jb2xsYXBzZS5ub0NvbmZsaWN0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgJC5mbi5jb2xsYXBzZSA9IG9sZFxuXHQgICAgcmV0dXJuIHRoaXNcblx0ICB9XG5cdFxuXHRcblx0ICAvLyBDT0xMQVBTRSBEQVRBLUFQSVxuXHQgIC8vID09PT09PT09PT09PT09PT09XG5cdFxuXHQgICQoZG9jdW1lbnQpLm9uKCdjbGljay5icy5jb2xsYXBzZS5kYXRhLWFwaScsICdbZGF0YS10b2dnbGU9XCJjb2xsYXBzZVwiXScsIGZ1bmN0aW9uIChlKSB7XG5cdCAgICB2YXIgJHRoaXMgICA9ICQodGhpcylcblx0XG5cdCAgICBpZiAoISR0aGlzLmF0dHIoJ2RhdGEtdGFyZ2V0JykpIGUucHJldmVudERlZmF1bHQoKVxuXHRcblx0ICAgIHZhciAkdGFyZ2V0ID0gZ2V0VGFyZ2V0RnJvbVRyaWdnZXIoJHRoaXMpXG5cdCAgICB2YXIgZGF0YSAgICA9ICR0YXJnZXQuZGF0YSgnYnMuY29sbGFwc2UnKVxuXHQgICAgdmFyIG9wdGlvbiAgPSBkYXRhID8gJ3RvZ2dsZScgOiAkdGhpcy5kYXRhKClcblx0XG5cdCAgICBQbHVnaW4uY2FsbCgkdGFyZ2V0LCBvcHRpb24pXG5cdCAgfSlcblx0XG5cdH0oalF1ZXJ5KTtcblx0XG5cdC8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHQgKiBCb290c3RyYXA6IGRyb3Bkb3duLmpzIHYzLjMuN1xuXHQgKiBodHRwOi8vZ2V0Ym9vdHN0cmFwLmNvbS9qYXZhc2NyaXB0LyNkcm9wZG93bnNcblx0ICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdCAqIENvcHlyaWdodCAyMDExLTIwMTYgVHdpdHRlciwgSW5jLlxuXHQgKiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ibG9iL21hc3Rlci9MSUNFTlNFKVxuXHQgKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cblx0XG5cdFxuXHQrZnVuY3Rpb24gKCQpIHtcblx0ICAndXNlIHN0cmljdCc7XG5cdFxuXHQgIC8vIERST1BET1dOIENMQVNTIERFRklOSVRJT05cblx0ICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09XG5cdFxuXHQgIHZhciBiYWNrZHJvcCA9ICcuZHJvcGRvd24tYmFja2Ryb3AnXG5cdCAgdmFyIHRvZ2dsZSAgID0gJ1tkYXRhLXRvZ2dsZT1cImRyb3Bkb3duXCJdJ1xuXHQgIHZhciBEcm9wZG93biA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG5cdCAgICAkKGVsZW1lbnQpLm9uKCdjbGljay5icy5kcm9wZG93bicsIHRoaXMudG9nZ2xlKVxuXHQgIH1cblx0XG5cdCAgRHJvcGRvd24uVkVSU0lPTiA9ICczLjMuNydcblx0XG5cdCAgZnVuY3Rpb24gZ2V0UGFyZW50KCR0aGlzKSB7XG5cdCAgICB2YXIgc2VsZWN0b3IgPSAkdGhpcy5hdHRyKCdkYXRhLXRhcmdldCcpXG5cdFxuXHQgICAgaWYgKCFzZWxlY3Rvcikge1xuXHQgICAgICBzZWxlY3RvciA9ICR0aGlzLmF0dHIoJ2hyZWYnKVxuXHQgICAgICBzZWxlY3RvciA9IHNlbGVjdG9yICYmIC8jW0EtWmEtel0vLnRlc3Qoc2VsZWN0b3IpICYmIHNlbGVjdG9yLnJlcGxhY2UoLy4qKD89I1teXFxzXSokKS8sICcnKSAvLyBzdHJpcCBmb3IgaWU3XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyICRwYXJlbnQgPSBzZWxlY3RvciAmJiAkKHNlbGVjdG9yKVxuXHRcblx0ICAgIHJldHVybiAkcGFyZW50ICYmICRwYXJlbnQubGVuZ3RoID8gJHBhcmVudCA6ICR0aGlzLnBhcmVudCgpXG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBjbGVhck1lbnVzKGUpIHtcblx0ICAgIGlmIChlICYmIGUud2hpY2ggPT09IDMpIHJldHVyblxuXHQgICAgJChiYWNrZHJvcCkucmVtb3ZlKClcblx0ICAgICQodG9nZ2xlKS5lYWNoKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdmFyICR0aGlzICAgICAgICAgPSAkKHRoaXMpXG5cdCAgICAgIHZhciAkcGFyZW50ICAgICAgID0gZ2V0UGFyZW50KCR0aGlzKVxuXHQgICAgICB2YXIgcmVsYXRlZFRhcmdldCA9IHsgcmVsYXRlZFRhcmdldDogdGhpcyB9XG5cdFxuXHQgICAgICBpZiAoISRwYXJlbnQuaGFzQ2xhc3MoJ29wZW4nKSkgcmV0dXJuXG5cdFxuXHQgICAgICBpZiAoZSAmJiBlLnR5cGUgPT0gJ2NsaWNrJyAmJiAvaW5wdXR8dGV4dGFyZWEvaS50ZXN0KGUudGFyZ2V0LnRhZ05hbWUpICYmICQuY29udGFpbnMoJHBhcmVudFswXSwgZS50YXJnZXQpKSByZXR1cm5cblx0XG5cdCAgICAgICRwYXJlbnQudHJpZ2dlcihlID0gJC5FdmVudCgnaGlkZS5icy5kcm9wZG93bicsIHJlbGF0ZWRUYXJnZXQpKVxuXHRcblx0ICAgICAgaWYgKGUuaXNEZWZhdWx0UHJldmVudGVkKCkpIHJldHVyblxuXHRcblx0ICAgICAgJHRoaXMuYXR0cignYXJpYS1leHBhbmRlZCcsICdmYWxzZScpXG5cdCAgICAgICRwYXJlbnQucmVtb3ZlQ2xhc3MoJ29wZW4nKS50cmlnZ2VyKCQuRXZlbnQoJ2hpZGRlbi5icy5kcm9wZG93bicsIHJlbGF0ZWRUYXJnZXQpKVxuXHQgICAgfSlcblx0ICB9XG5cdFxuXHQgIERyb3Bkb3duLnByb3RvdHlwZS50b2dnbGUgPSBmdW5jdGlvbiAoZSkge1xuXHQgICAgdmFyICR0aGlzID0gJCh0aGlzKVxuXHRcblx0ICAgIGlmICgkdGhpcy5pcygnLmRpc2FibGVkLCA6ZGlzYWJsZWQnKSkgcmV0dXJuXG5cdFxuXHQgICAgdmFyICRwYXJlbnQgID0gZ2V0UGFyZW50KCR0aGlzKVxuXHQgICAgdmFyIGlzQWN0aXZlID0gJHBhcmVudC5oYXNDbGFzcygnb3BlbicpXG5cdFxuXHQgICAgY2xlYXJNZW51cygpXG5cdFxuXHQgICAgaWYgKCFpc0FjdGl2ZSkge1xuXHQgICAgICBpZiAoJ29udG91Y2hzdGFydCcgaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50ICYmICEkcGFyZW50LmNsb3Nlc3QoJy5uYXZiYXItbmF2JykubGVuZ3RoKSB7XG5cdCAgICAgICAgLy8gaWYgbW9iaWxlIHdlIHVzZSBhIGJhY2tkcm9wIGJlY2F1c2UgY2xpY2sgZXZlbnRzIGRvbid0IGRlbGVnYXRlXG5cdCAgICAgICAgJChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSlcblx0ICAgICAgICAgIC5hZGRDbGFzcygnZHJvcGRvd24tYmFja2Ryb3AnKVxuXHQgICAgICAgICAgLmluc2VydEFmdGVyKCQodGhpcykpXG5cdCAgICAgICAgICAub24oJ2NsaWNrJywgY2xlYXJNZW51cylcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdmFyIHJlbGF0ZWRUYXJnZXQgPSB7IHJlbGF0ZWRUYXJnZXQ6IHRoaXMgfVxuXHQgICAgICAkcGFyZW50LnRyaWdnZXIoZSA9ICQuRXZlbnQoJ3Nob3cuYnMuZHJvcGRvd24nLCByZWxhdGVkVGFyZ2V0KSlcblx0XG5cdCAgICAgIGlmIChlLmlzRGVmYXVsdFByZXZlbnRlZCgpKSByZXR1cm5cblx0XG5cdCAgICAgICR0aGlzXG5cdCAgICAgICAgLnRyaWdnZXIoJ2ZvY3VzJylcblx0ICAgICAgICAuYXR0cignYXJpYS1leHBhbmRlZCcsICd0cnVlJylcblx0XG5cdCAgICAgICRwYXJlbnRcblx0ICAgICAgICAudG9nZ2xlQ2xhc3MoJ29wZW4nKVxuXHQgICAgICAgIC50cmlnZ2VyKCQuRXZlbnQoJ3Nob3duLmJzLmRyb3Bkb3duJywgcmVsYXRlZFRhcmdldCkpXG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIGZhbHNlXG5cdCAgfVxuXHRcblx0ICBEcm9wZG93bi5wcm90b3R5cGUua2V5ZG93biA9IGZ1bmN0aW9uIChlKSB7XG5cdCAgICBpZiAoIS8oMzh8NDB8Mjd8MzIpLy50ZXN0KGUud2hpY2gpIHx8IC9pbnB1dHx0ZXh0YXJlYS9pLnRlc3QoZS50YXJnZXQudGFnTmFtZSkpIHJldHVyblxuXHRcblx0ICAgIHZhciAkdGhpcyA9ICQodGhpcylcblx0XG5cdCAgICBlLnByZXZlbnREZWZhdWx0KClcblx0ICAgIGUuc3RvcFByb3BhZ2F0aW9uKClcblx0XG5cdCAgICBpZiAoJHRoaXMuaXMoJy5kaXNhYmxlZCwgOmRpc2FibGVkJykpIHJldHVyblxuXHRcblx0ICAgIHZhciAkcGFyZW50ICA9IGdldFBhcmVudCgkdGhpcylcblx0ICAgIHZhciBpc0FjdGl2ZSA9ICRwYXJlbnQuaGFzQ2xhc3MoJ29wZW4nKVxuXHRcblx0ICAgIGlmICghaXNBY3RpdmUgJiYgZS53aGljaCAhPSAyNyB8fCBpc0FjdGl2ZSAmJiBlLndoaWNoID09IDI3KSB7XG5cdCAgICAgIGlmIChlLndoaWNoID09IDI3KSAkcGFyZW50LmZpbmQodG9nZ2xlKS50cmlnZ2VyKCdmb2N1cycpXG5cdCAgICAgIHJldHVybiAkdGhpcy50cmlnZ2VyKCdjbGljaycpXG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIGRlc2MgPSAnIGxpOm5vdCguZGlzYWJsZWQpOnZpc2libGUgYSdcblx0ICAgIHZhciAkaXRlbXMgPSAkcGFyZW50LmZpbmQoJy5kcm9wZG93bi1tZW51JyArIGRlc2MpXG5cdFxuXHQgICAgaWYgKCEkaXRlbXMubGVuZ3RoKSByZXR1cm5cblx0XG5cdCAgICB2YXIgaW5kZXggPSAkaXRlbXMuaW5kZXgoZS50YXJnZXQpXG5cdFxuXHQgICAgaWYgKGUud2hpY2ggPT0gMzggJiYgaW5kZXggPiAwKSAgICAgICAgICAgICAgICAgaW5kZXgtLSAgICAgICAgIC8vIHVwXG5cdCAgICBpZiAoZS53aGljaCA9PSA0MCAmJiBpbmRleCA8ICRpdGVtcy5sZW5ndGggLSAxKSBpbmRleCsrICAgICAgICAgLy8gZG93blxuXHQgICAgaWYgKCF+aW5kZXgpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXggPSAwXG5cdFxuXHQgICAgJGl0ZW1zLmVxKGluZGV4KS50cmlnZ2VyKCdmb2N1cycpXG5cdCAgfVxuXHRcblx0XG5cdCAgLy8gRFJPUERPV04gUExVR0lOIERFRklOSVRJT05cblx0ICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHRcblx0ICBmdW5jdGlvbiBQbHVnaW4ob3B0aW9uKSB7XG5cdCAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdmFyICR0aGlzID0gJCh0aGlzKVxuXHQgICAgICB2YXIgZGF0YSAgPSAkdGhpcy5kYXRhKCdicy5kcm9wZG93bicpXG5cdFxuXHQgICAgICBpZiAoIWRhdGEpICR0aGlzLmRhdGEoJ2JzLmRyb3Bkb3duJywgKGRhdGEgPSBuZXcgRHJvcGRvd24odGhpcykpKVxuXHQgICAgICBpZiAodHlwZW9mIG9wdGlvbiA9PSAnc3RyaW5nJykgZGF0YVtvcHRpb25dLmNhbGwoJHRoaXMpXG5cdCAgICB9KVxuXHQgIH1cblx0XG5cdCAgdmFyIG9sZCA9ICQuZm4uZHJvcGRvd25cblx0XG5cdCAgJC5mbi5kcm9wZG93biAgICAgICAgICAgICA9IFBsdWdpblxuXHQgICQuZm4uZHJvcGRvd24uQ29uc3RydWN0b3IgPSBEcm9wZG93blxuXHRcblx0XG5cdCAgLy8gRFJPUERPV04gTk8gQ09ORkxJQ1Rcblx0ICAvLyA9PT09PT09PT09PT09PT09PT09PVxuXHRcblx0ICAkLmZuLmRyb3Bkb3duLm5vQ29uZmxpY3QgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAkLmZuLmRyb3Bkb3duID0gb2xkXG5cdCAgICByZXR1cm4gdGhpc1xuXHQgIH1cblx0XG5cdFxuXHQgIC8vIEFQUExZIFRPIFNUQU5EQVJEIERST1BET1dOIEVMRU1FTlRTXG5cdCAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0XG5cdCAgJChkb2N1bWVudClcblx0ICAgIC5vbignY2xpY2suYnMuZHJvcGRvd24uZGF0YS1hcGknLCBjbGVhck1lbnVzKVxuXHQgICAgLm9uKCdjbGljay5icy5kcm9wZG93bi5kYXRhLWFwaScsICcuZHJvcGRvd24gZm9ybScsIGZ1bmN0aW9uIChlKSB7IGUuc3RvcFByb3BhZ2F0aW9uKCkgfSlcblx0ICAgIC5vbignY2xpY2suYnMuZHJvcGRvd24uZGF0YS1hcGknLCB0b2dnbGUsIERyb3Bkb3duLnByb3RvdHlwZS50b2dnbGUpXG5cdCAgICAub24oJ2tleWRvd24uYnMuZHJvcGRvd24uZGF0YS1hcGknLCB0b2dnbGUsIERyb3Bkb3duLnByb3RvdHlwZS5rZXlkb3duKVxuXHQgICAgLm9uKCdrZXlkb3duLmJzLmRyb3Bkb3duLmRhdGEtYXBpJywgJy5kcm9wZG93bi1tZW51JywgRHJvcGRvd24ucHJvdG90eXBlLmtleWRvd24pXG5cdFxuXHR9KGpRdWVyeSk7XG5cdFxuXHQvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0ICogQm9vdHN0cmFwOiBtb2RhbC5qcyB2My4zLjdcblx0ICogaHR0cDovL2dldGJvb3RzdHJhcC5jb20vamF2YXNjcmlwdC8jbW9kYWxzXG5cdCAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHQgKiBDb3B5cmlnaHQgMjAxMS0yMDE2IFR3aXR0ZXIsIEluYy5cblx0ICogTGljZW5zZWQgdW5kZXIgTUlUIChodHRwczovL2dpdGh1Yi5jb20vdHdicy9ib290c3RyYXAvYmxvYi9tYXN0ZXIvTElDRU5TRSlcblx0ICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXG5cdFxuXHRcblx0K2Z1bmN0aW9uICgkKSB7XG5cdCAgJ3VzZSBzdHJpY3QnO1xuXHRcblx0ICAvLyBNT0RBTCBDTEFTUyBERUZJTklUSU9OXG5cdCAgLy8gPT09PT09PT09PT09PT09PT09PT09PVxuXHRcblx0ICB2YXIgTW9kYWwgPSBmdW5jdGlvbiAoZWxlbWVudCwgb3B0aW9ucykge1xuXHQgICAgdGhpcy5vcHRpb25zICAgICAgICAgICAgID0gb3B0aW9uc1xuXHQgICAgdGhpcy4kYm9keSAgICAgICAgICAgICAgID0gJChkb2N1bWVudC5ib2R5KVxuXHQgICAgdGhpcy4kZWxlbWVudCAgICAgICAgICAgID0gJChlbGVtZW50KVxuXHQgICAgdGhpcy4kZGlhbG9nICAgICAgICAgICAgID0gdGhpcy4kZWxlbWVudC5maW5kKCcubW9kYWwtZGlhbG9nJylcblx0ICAgIHRoaXMuJGJhY2tkcm9wICAgICAgICAgICA9IG51bGxcblx0ICAgIHRoaXMuaXNTaG93biAgICAgICAgICAgICA9IG51bGxcblx0ICAgIHRoaXMub3JpZ2luYWxCb2R5UGFkICAgICA9IG51bGxcblx0ICAgIHRoaXMuc2Nyb2xsYmFyV2lkdGggICAgICA9IDBcblx0ICAgIHRoaXMuaWdub3JlQmFja2Ryb3BDbGljayA9IGZhbHNlXG5cdFxuXHQgICAgaWYgKHRoaXMub3B0aW9ucy5yZW1vdGUpIHtcblx0ICAgICAgdGhpcy4kZWxlbWVudFxuXHQgICAgICAgIC5maW5kKCcubW9kYWwtY29udGVudCcpXG5cdCAgICAgICAgLmxvYWQodGhpcy5vcHRpb25zLnJlbW90ZSwgJC5wcm94eShmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICB0aGlzLiRlbGVtZW50LnRyaWdnZXIoJ2xvYWRlZC5icy5tb2RhbCcpXG5cdCAgICAgICAgfSwgdGhpcykpXG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBNb2RhbC5WRVJTSU9OICA9ICczLjMuNydcblx0XG5cdCAgTW9kYWwuVFJBTlNJVElPTl9EVVJBVElPTiA9IDMwMFxuXHQgIE1vZGFsLkJBQ0tEUk9QX1RSQU5TSVRJT05fRFVSQVRJT04gPSAxNTBcblx0XG5cdCAgTW9kYWwuREVGQVVMVFMgPSB7XG5cdCAgICBiYWNrZHJvcDogdHJ1ZSxcblx0ICAgIGtleWJvYXJkOiB0cnVlLFxuXHQgICAgc2hvdzogdHJ1ZVxuXHQgIH1cblx0XG5cdCAgTW9kYWwucHJvdG90eXBlLnRvZ2dsZSA9IGZ1bmN0aW9uIChfcmVsYXRlZFRhcmdldCkge1xuXHQgICAgcmV0dXJuIHRoaXMuaXNTaG93biA/IHRoaXMuaGlkZSgpIDogdGhpcy5zaG93KF9yZWxhdGVkVGFyZ2V0KVxuXHQgIH1cblx0XG5cdCAgTW9kYWwucHJvdG90eXBlLnNob3cgPSBmdW5jdGlvbiAoX3JlbGF0ZWRUYXJnZXQpIHtcblx0ICAgIHZhciB0aGF0ID0gdGhpc1xuXHQgICAgdmFyIGUgICAgPSAkLkV2ZW50KCdzaG93LmJzLm1vZGFsJywgeyByZWxhdGVkVGFyZ2V0OiBfcmVsYXRlZFRhcmdldCB9KVxuXHRcblx0ICAgIHRoaXMuJGVsZW1lbnQudHJpZ2dlcihlKVxuXHRcblx0ICAgIGlmICh0aGlzLmlzU2hvd24gfHwgZS5pc0RlZmF1bHRQcmV2ZW50ZWQoKSkgcmV0dXJuXG5cdFxuXHQgICAgdGhpcy5pc1Nob3duID0gdHJ1ZVxuXHRcblx0ICAgIHRoaXMuY2hlY2tTY3JvbGxiYXIoKVxuXHQgICAgdGhpcy5zZXRTY3JvbGxiYXIoKVxuXHQgICAgdGhpcy4kYm9keS5hZGRDbGFzcygnbW9kYWwtb3BlbicpXG5cdFxuXHQgICAgdGhpcy5lc2NhcGUoKVxuXHQgICAgdGhpcy5yZXNpemUoKVxuXHRcblx0ICAgIHRoaXMuJGVsZW1lbnQub24oJ2NsaWNrLmRpc21pc3MuYnMubW9kYWwnLCAnW2RhdGEtZGlzbWlzcz1cIm1vZGFsXCJdJywgJC5wcm94eSh0aGlzLmhpZGUsIHRoaXMpKVxuXHRcblx0ICAgIHRoaXMuJGRpYWxvZy5vbignbW91c2Vkb3duLmRpc21pc3MuYnMubW9kYWwnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHRoYXQuJGVsZW1lbnQub25lKCdtb3VzZXVwLmRpc21pc3MuYnMubW9kYWwnLCBmdW5jdGlvbiAoZSkge1xuXHQgICAgICAgIGlmICgkKGUudGFyZ2V0KS5pcyh0aGF0LiRlbGVtZW50KSkgdGhhdC5pZ25vcmVCYWNrZHJvcENsaWNrID0gdHJ1ZVxuXHQgICAgICB9KVxuXHQgICAgfSlcblx0XG5cdCAgICB0aGlzLmJhY2tkcm9wKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdmFyIHRyYW5zaXRpb24gPSAkLnN1cHBvcnQudHJhbnNpdGlvbiAmJiB0aGF0LiRlbGVtZW50Lmhhc0NsYXNzKCdmYWRlJylcblx0XG5cdCAgICAgIGlmICghdGhhdC4kZWxlbWVudC5wYXJlbnQoKS5sZW5ndGgpIHtcblx0ICAgICAgICB0aGF0LiRlbGVtZW50LmFwcGVuZFRvKHRoYXQuJGJvZHkpIC8vIGRvbid0IG1vdmUgbW9kYWxzIGRvbSBwb3NpdGlvblxuXHQgICAgICB9XG5cdFxuXHQgICAgICB0aGF0LiRlbGVtZW50XG5cdCAgICAgICAgLnNob3coKVxuXHQgICAgICAgIC5zY3JvbGxUb3AoMClcblx0XG5cdCAgICAgIHRoYXQuYWRqdXN0RGlhbG9nKClcblx0XG5cdCAgICAgIGlmICh0cmFuc2l0aW9uKSB7XG5cdCAgICAgICAgdGhhdC4kZWxlbWVudFswXS5vZmZzZXRXaWR0aCAvLyBmb3JjZSByZWZsb3dcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdGhhdC4kZWxlbWVudC5hZGRDbGFzcygnaW4nKVxuXHRcblx0ICAgICAgdGhhdC5lbmZvcmNlRm9jdXMoKVxuXHRcblx0ICAgICAgdmFyIGUgPSAkLkV2ZW50KCdzaG93bi5icy5tb2RhbCcsIHsgcmVsYXRlZFRhcmdldDogX3JlbGF0ZWRUYXJnZXQgfSlcblx0XG5cdCAgICAgIHRyYW5zaXRpb24gP1xuXHQgICAgICAgIHRoYXQuJGRpYWxvZyAvLyB3YWl0IGZvciBtb2RhbCB0byBzbGlkZSBpblxuXHQgICAgICAgICAgLm9uZSgnYnNUcmFuc2l0aW9uRW5kJywgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICB0aGF0LiRlbGVtZW50LnRyaWdnZXIoJ2ZvY3VzJykudHJpZ2dlcihlKVxuXHQgICAgICAgICAgfSlcblx0ICAgICAgICAgIC5lbXVsYXRlVHJhbnNpdGlvbkVuZChNb2RhbC5UUkFOU0lUSU9OX0RVUkFUSU9OKSA6XG5cdCAgICAgICAgdGhhdC4kZWxlbWVudC50cmlnZ2VyKCdmb2N1cycpLnRyaWdnZXIoZSlcblx0ICAgIH0pXG5cdCAgfVxuXHRcblx0ICBNb2RhbC5wcm90b3R5cGUuaGlkZSA9IGZ1bmN0aW9uIChlKSB7XG5cdCAgICBpZiAoZSkgZS5wcmV2ZW50RGVmYXVsdCgpXG5cdFxuXHQgICAgZSA9ICQuRXZlbnQoJ2hpZGUuYnMubW9kYWwnKVxuXHRcblx0ICAgIHRoaXMuJGVsZW1lbnQudHJpZ2dlcihlKVxuXHRcblx0ICAgIGlmICghdGhpcy5pc1Nob3duIHx8IGUuaXNEZWZhdWx0UHJldmVudGVkKCkpIHJldHVyblxuXHRcblx0ICAgIHRoaXMuaXNTaG93biA9IGZhbHNlXG5cdFxuXHQgICAgdGhpcy5lc2NhcGUoKVxuXHQgICAgdGhpcy5yZXNpemUoKVxuXHRcblx0ICAgICQoZG9jdW1lbnQpLm9mZignZm9jdXNpbi5icy5tb2RhbCcpXG5cdFxuXHQgICAgdGhpcy4kZWxlbWVudFxuXHQgICAgICAucmVtb3ZlQ2xhc3MoJ2luJylcblx0ICAgICAgLm9mZignY2xpY2suZGlzbWlzcy5icy5tb2RhbCcpXG5cdCAgICAgIC5vZmYoJ21vdXNldXAuZGlzbWlzcy5icy5tb2RhbCcpXG5cdFxuXHQgICAgdGhpcy4kZGlhbG9nLm9mZignbW91c2Vkb3duLmRpc21pc3MuYnMubW9kYWwnKVxuXHRcblx0ICAgICQuc3VwcG9ydC50cmFuc2l0aW9uICYmIHRoaXMuJGVsZW1lbnQuaGFzQ2xhc3MoJ2ZhZGUnKSA/XG5cdCAgICAgIHRoaXMuJGVsZW1lbnRcblx0ICAgICAgICAub25lKCdic1RyYW5zaXRpb25FbmQnLCAkLnByb3h5KHRoaXMuaGlkZU1vZGFsLCB0aGlzKSlcblx0ICAgICAgICAuZW11bGF0ZVRyYW5zaXRpb25FbmQoTW9kYWwuVFJBTlNJVElPTl9EVVJBVElPTikgOlxuXHQgICAgICB0aGlzLmhpZGVNb2RhbCgpXG5cdCAgfVxuXHRcblx0ICBNb2RhbC5wcm90b3R5cGUuZW5mb3JjZUZvY3VzID0gZnVuY3Rpb24gKCkge1xuXHQgICAgJChkb2N1bWVudClcblx0ICAgICAgLm9mZignZm9jdXNpbi5icy5tb2RhbCcpIC8vIGd1YXJkIGFnYWluc3QgaW5maW5pdGUgZm9jdXMgbG9vcFxuXHQgICAgICAub24oJ2ZvY3VzaW4uYnMubW9kYWwnLCAkLnByb3h5KGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgICAgaWYgKGRvY3VtZW50ICE9PSBlLnRhcmdldCAmJlxuXHQgICAgICAgICAgICB0aGlzLiRlbGVtZW50WzBdICE9PSBlLnRhcmdldCAmJlxuXHQgICAgICAgICAgICAhdGhpcy4kZWxlbWVudC5oYXMoZS50YXJnZXQpLmxlbmd0aCkge1xuXHQgICAgICAgICAgdGhpcy4kZWxlbWVudC50cmlnZ2VyKCdmb2N1cycpXG5cdCAgICAgICAgfVxuXHQgICAgICB9LCB0aGlzKSlcblx0ICB9XG5cdFxuXHQgIE1vZGFsLnByb3RvdHlwZS5lc2NhcGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICBpZiAodGhpcy5pc1Nob3duICYmIHRoaXMub3B0aW9ucy5rZXlib2FyZCkge1xuXHQgICAgICB0aGlzLiRlbGVtZW50Lm9uKCdrZXlkb3duLmRpc21pc3MuYnMubW9kYWwnLCAkLnByb3h5KGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgICAgZS53aGljaCA9PSAyNyAmJiB0aGlzLmhpZGUoKVxuXHQgICAgICB9LCB0aGlzKSlcblx0ICAgIH0gZWxzZSBpZiAoIXRoaXMuaXNTaG93bikge1xuXHQgICAgICB0aGlzLiRlbGVtZW50Lm9mZigna2V5ZG93bi5kaXNtaXNzLmJzLm1vZGFsJylcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIE1vZGFsLnByb3RvdHlwZS5yZXNpemUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICBpZiAodGhpcy5pc1Nob3duKSB7XG5cdCAgICAgICQod2luZG93KS5vbigncmVzaXplLmJzLm1vZGFsJywgJC5wcm94eSh0aGlzLmhhbmRsZVVwZGF0ZSwgdGhpcykpXG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAkKHdpbmRvdykub2ZmKCdyZXNpemUuYnMubW9kYWwnKVxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgTW9kYWwucHJvdG90eXBlLmhpZGVNb2RhbCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHZhciB0aGF0ID0gdGhpc1xuXHQgICAgdGhpcy4kZWxlbWVudC5oaWRlKClcblx0ICAgIHRoaXMuYmFja2Ryb3AoZnVuY3Rpb24gKCkge1xuXHQgICAgICB0aGF0LiRib2R5LnJlbW92ZUNsYXNzKCdtb2RhbC1vcGVuJylcblx0ICAgICAgdGhhdC5yZXNldEFkanVzdG1lbnRzKClcblx0ICAgICAgdGhhdC5yZXNldFNjcm9sbGJhcigpXG5cdCAgICAgIHRoYXQuJGVsZW1lbnQudHJpZ2dlcignaGlkZGVuLmJzLm1vZGFsJylcblx0ICAgIH0pXG5cdCAgfVxuXHRcblx0ICBNb2RhbC5wcm90b3R5cGUucmVtb3ZlQmFja2Ryb3AgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICB0aGlzLiRiYWNrZHJvcCAmJiB0aGlzLiRiYWNrZHJvcC5yZW1vdmUoKVxuXHQgICAgdGhpcy4kYmFja2Ryb3AgPSBudWxsXG5cdCAgfVxuXHRcblx0ICBNb2RhbC5wcm90b3R5cGUuYmFja2Ryb3AgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcblx0ICAgIHZhciB0aGF0ID0gdGhpc1xuXHQgICAgdmFyIGFuaW1hdGUgPSB0aGlzLiRlbGVtZW50Lmhhc0NsYXNzKCdmYWRlJykgPyAnZmFkZScgOiAnJ1xuXHRcblx0ICAgIGlmICh0aGlzLmlzU2hvd24gJiYgdGhpcy5vcHRpb25zLmJhY2tkcm9wKSB7XG5cdCAgICAgIHZhciBkb0FuaW1hdGUgPSAkLnN1cHBvcnQudHJhbnNpdGlvbiAmJiBhbmltYXRlXG5cdFxuXHQgICAgICB0aGlzLiRiYWNrZHJvcCA9ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JykpXG5cdCAgICAgICAgLmFkZENsYXNzKCdtb2RhbC1iYWNrZHJvcCAnICsgYW5pbWF0ZSlcblx0ICAgICAgICAuYXBwZW5kVG8odGhpcy4kYm9keSlcblx0XG5cdCAgICAgIHRoaXMuJGVsZW1lbnQub24oJ2NsaWNrLmRpc21pc3MuYnMubW9kYWwnLCAkLnByb3h5KGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgICAgaWYgKHRoaXMuaWdub3JlQmFja2Ryb3BDbGljaykge1xuXHQgICAgICAgICAgdGhpcy5pZ25vcmVCYWNrZHJvcENsaWNrID0gZmFsc2Vcblx0ICAgICAgICAgIHJldHVyblxuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAoZS50YXJnZXQgIT09IGUuY3VycmVudFRhcmdldCkgcmV0dXJuXG5cdCAgICAgICAgdGhpcy5vcHRpb25zLmJhY2tkcm9wID09ICdzdGF0aWMnXG5cdCAgICAgICAgICA/IHRoaXMuJGVsZW1lbnRbMF0uZm9jdXMoKVxuXHQgICAgICAgICAgOiB0aGlzLmhpZGUoKVxuXHQgICAgICB9LCB0aGlzKSlcblx0XG5cdCAgICAgIGlmIChkb0FuaW1hdGUpIHRoaXMuJGJhY2tkcm9wWzBdLm9mZnNldFdpZHRoIC8vIGZvcmNlIHJlZmxvd1xuXHRcblx0ICAgICAgdGhpcy4kYmFja2Ryb3AuYWRkQ2xhc3MoJ2luJylcblx0XG5cdCAgICAgIGlmICghY2FsbGJhY2spIHJldHVyblxuXHRcblx0ICAgICAgZG9BbmltYXRlID9cblx0ICAgICAgICB0aGlzLiRiYWNrZHJvcFxuXHQgICAgICAgICAgLm9uZSgnYnNUcmFuc2l0aW9uRW5kJywgY2FsbGJhY2spXG5cdCAgICAgICAgICAuZW11bGF0ZVRyYW5zaXRpb25FbmQoTW9kYWwuQkFDS0RST1BfVFJBTlNJVElPTl9EVVJBVElPTikgOlxuXHQgICAgICAgIGNhbGxiYWNrKClcblx0XG5cdCAgICB9IGVsc2UgaWYgKCF0aGlzLmlzU2hvd24gJiYgdGhpcy4kYmFja2Ryb3ApIHtcblx0ICAgICAgdGhpcy4kYmFja2Ryb3AucmVtb3ZlQ2xhc3MoJ2luJylcblx0XG5cdCAgICAgIHZhciBjYWxsYmFja1JlbW92ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB0aGF0LnJlbW92ZUJhY2tkcm9wKClcblx0ICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjaygpXG5cdCAgICAgIH1cblx0ICAgICAgJC5zdXBwb3J0LnRyYW5zaXRpb24gJiYgdGhpcy4kZWxlbWVudC5oYXNDbGFzcygnZmFkZScpID9cblx0ICAgICAgICB0aGlzLiRiYWNrZHJvcFxuXHQgICAgICAgICAgLm9uZSgnYnNUcmFuc2l0aW9uRW5kJywgY2FsbGJhY2tSZW1vdmUpXG5cdCAgICAgICAgICAuZW11bGF0ZVRyYW5zaXRpb25FbmQoTW9kYWwuQkFDS0RST1BfVFJBTlNJVElPTl9EVVJBVElPTikgOlxuXHQgICAgICAgIGNhbGxiYWNrUmVtb3ZlKClcblx0XG5cdCAgICB9IGVsc2UgaWYgKGNhbGxiYWNrKSB7XG5cdCAgICAgIGNhbGxiYWNrKClcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIC8vIHRoZXNlIGZvbGxvd2luZyBtZXRob2RzIGFyZSB1c2VkIHRvIGhhbmRsZSBvdmVyZmxvd2luZyBtb2RhbHNcblx0XG5cdCAgTW9kYWwucHJvdG90eXBlLmhhbmRsZVVwZGF0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHRoaXMuYWRqdXN0RGlhbG9nKClcblx0ICB9XG5cdFxuXHQgIE1vZGFsLnByb3RvdHlwZS5hZGp1c3REaWFsb2cgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICB2YXIgbW9kYWxJc092ZXJmbG93aW5nID0gdGhpcy4kZWxlbWVudFswXS5zY3JvbGxIZWlnaHQgPiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0XG5cdFxuXHQgICAgdGhpcy4kZWxlbWVudC5jc3Moe1xuXHQgICAgICBwYWRkaW5nTGVmdDogICF0aGlzLmJvZHlJc092ZXJmbG93aW5nICYmIG1vZGFsSXNPdmVyZmxvd2luZyA/IHRoaXMuc2Nyb2xsYmFyV2lkdGggOiAnJyxcblx0ICAgICAgcGFkZGluZ1JpZ2h0OiB0aGlzLmJvZHlJc092ZXJmbG93aW5nICYmICFtb2RhbElzT3ZlcmZsb3dpbmcgPyB0aGlzLnNjcm9sbGJhcldpZHRoIDogJydcblx0ICAgIH0pXG5cdCAgfVxuXHRcblx0ICBNb2RhbC5wcm90b3R5cGUucmVzZXRBZGp1c3RtZW50cyA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHRoaXMuJGVsZW1lbnQuY3NzKHtcblx0ICAgICAgcGFkZGluZ0xlZnQ6ICcnLFxuXHQgICAgICBwYWRkaW5nUmlnaHQ6ICcnXG5cdCAgICB9KVxuXHQgIH1cblx0XG5cdCAgTW9kYWwucHJvdG90eXBlLmNoZWNrU2Nyb2xsYmFyID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIGZ1bGxXaW5kb3dXaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoXG5cdCAgICBpZiAoIWZ1bGxXaW5kb3dXaWR0aCkgeyAvLyB3b3JrYXJvdW5kIGZvciBtaXNzaW5nIHdpbmRvdy5pbm5lcldpZHRoIGluIElFOFxuXHQgICAgICB2YXIgZG9jdW1lbnRFbGVtZW50UmVjdCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuXHQgICAgICBmdWxsV2luZG93V2lkdGggPSBkb2N1bWVudEVsZW1lbnRSZWN0LnJpZ2h0IC0gTWF0aC5hYnMoZG9jdW1lbnRFbGVtZW50UmVjdC5sZWZ0KVxuXHQgICAgfVxuXHQgICAgdGhpcy5ib2R5SXNPdmVyZmxvd2luZyA9IGRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGggPCBmdWxsV2luZG93V2lkdGhcblx0ICAgIHRoaXMuc2Nyb2xsYmFyV2lkdGggPSB0aGlzLm1lYXN1cmVTY3JvbGxiYXIoKVxuXHQgIH1cblx0XG5cdCAgTW9kYWwucHJvdG90eXBlLnNldFNjcm9sbGJhciA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHZhciBib2R5UGFkID0gcGFyc2VJbnQoKHRoaXMuJGJvZHkuY3NzKCdwYWRkaW5nLXJpZ2h0JykgfHwgMCksIDEwKVxuXHQgICAgdGhpcy5vcmlnaW5hbEJvZHlQYWQgPSBkb2N1bWVudC5ib2R5LnN0eWxlLnBhZGRpbmdSaWdodCB8fCAnJ1xuXHQgICAgaWYgKHRoaXMuYm9keUlzT3ZlcmZsb3dpbmcpIHRoaXMuJGJvZHkuY3NzKCdwYWRkaW5nLXJpZ2h0JywgYm9keVBhZCArIHRoaXMuc2Nyb2xsYmFyV2lkdGgpXG5cdCAgfVxuXHRcblx0ICBNb2RhbC5wcm90b3R5cGUucmVzZXRTY3JvbGxiYXIgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICB0aGlzLiRib2R5LmNzcygncGFkZGluZy1yaWdodCcsIHRoaXMub3JpZ2luYWxCb2R5UGFkKVxuXHQgIH1cblx0XG5cdCAgTW9kYWwucHJvdG90eXBlLm1lYXN1cmVTY3JvbGxiYXIgPSBmdW5jdGlvbiAoKSB7IC8vIHRoeCB3YWxzaFxuXHQgICAgdmFyIHNjcm9sbERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG5cdCAgICBzY3JvbGxEaXYuY2xhc3NOYW1lID0gJ21vZGFsLXNjcm9sbGJhci1tZWFzdXJlJ1xuXHQgICAgdGhpcy4kYm9keS5hcHBlbmQoc2Nyb2xsRGl2KVxuXHQgICAgdmFyIHNjcm9sbGJhcldpZHRoID0gc2Nyb2xsRGl2Lm9mZnNldFdpZHRoIC0gc2Nyb2xsRGl2LmNsaWVudFdpZHRoXG5cdCAgICB0aGlzLiRib2R5WzBdLnJlbW92ZUNoaWxkKHNjcm9sbERpdilcblx0ICAgIHJldHVybiBzY3JvbGxiYXJXaWR0aFxuXHQgIH1cblx0XG5cdFxuXHQgIC8vIE1PREFMIFBMVUdJTiBERUZJTklUSU9OXG5cdCAgLy8gPT09PT09PT09PT09PT09PT09PT09PT1cblx0XG5cdCAgZnVuY3Rpb24gUGx1Z2luKG9wdGlvbiwgX3JlbGF0ZWRUYXJnZXQpIHtcblx0ICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xuXHQgICAgICB2YXIgJHRoaXMgICA9ICQodGhpcylcblx0ICAgICAgdmFyIGRhdGEgICAgPSAkdGhpcy5kYXRhKCdicy5tb2RhbCcpXG5cdCAgICAgIHZhciBvcHRpb25zID0gJC5leHRlbmQoe30sIE1vZGFsLkRFRkFVTFRTLCAkdGhpcy5kYXRhKCksIHR5cGVvZiBvcHRpb24gPT0gJ29iamVjdCcgJiYgb3B0aW9uKVxuXHRcblx0ICAgICAgaWYgKCFkYXRhKSAkdGhpcy5kYXRhKCdicy5tb2RhbCcsIChkYXRhID0gbmV3IE1vZGFsKHRoaXMsIG9wdGlvbnMpKSlcblx0ICAgICAgaWYgKHR5cGVvZiBvcHRpb24gPT0gJ3N0cmluZycpIGRhdGFbb3B0aW9uXShfcmVsYXRlZFRhcmdldClcblx0ICAgICAgZWxzZSBpZiAob3B0aW9ucy5zaG93KSBkYXRhLnNob3coX3JlbGF0ZWRUYXJnZXQpXG5cdCAgICB9KVxuXHQgIH1cblx0XG5cdCAgdmFyIG9sZCA9ICQuZm4ubW9kYWxcblx0XG5cdCAgJC5mbi5tb2RhbCAgICAgICAgICAgICA9IFBsdWdpblxuXHQgICQuZm4ubW9kYWwuQ29uc3RydWN0b3IgPSBNb2RhbFxuXHRcblx0XG5cdCAgLy8gTU9EQUwgTk8gQ09ORkxJQ1Rcblx0ICAvLyA9PT09PT09PT09PT09PT09PVxuXHRcblx0ICAkLmZuLm1vZGFsLm5vQ29uZmxpY3QgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAkLmZuLm1vZGFsID0gb2xkXG5cdCAgICByZXR1cm4gdGhpc1xuXHQgIH1cblx0XG5cdFxuXHQgIC8vIE1PREFMIERBVEEtQVBJXG5cdCAgLy8gPT09PT09PT09PT09PT1cblx0XG5cdCAgJChkb2N1bWVudCkub24oJ2NsaWNrLmJzLm1vZGFsLmRhdGEtYXBpJywgJ1tkYXRhLXRvZ2dsZT1cIm1vZGFsXCJdJywgZnVuY3Rpb24gKGUpIHtcblx0ICAgIHZhciAkdGhpcyAgID0gJCh0aGlzKVxuXHQgICAgdmFyIGhyZWYgICAgPSAkdGhpcy5hdHRyKCdocmVmJylcblx0ICAgIHZhciAkdGFyZ2V0ID0gJCgkdGhpcy5hdHRyKCdkYXRhLXRhcmdldCcpIHx8IChocmVmICYmIGhyZWYucmVwbGFjZSgvLiooPz0jW15cXHNdKyQpLywgJycpKSkgLy8gc3RyaXAgZm9yIGllN1xuXHQgICAgdmFyIG9wdGlvbiAgPSAkdGFyZ2V0LmRhdGEoJ2JzLm1vZGFsJykgPyAndG9nZ2xlJyA6ICQuZXh0ZW5kKHsgcmVtb3RlOiAhLyMvLnRlc3QoaHJlZikgJiYgaHJlZiB9LCAkdGFyZ2V0LmRhdGEoKSwgJHRoaXMuZGF0YSgpKVxuXHRcblx0ICAgIGlmICgkdGhpcy5pcygnYScpKSBlLnByZXZlbnREZWZhdWx0KClcblx0XG5cdCAgICAkdGFyZ2V0Lm9uZSgnc2hvdy5icy5tb2RhbCcsIGZ1bmN0aW9uIChzaG93RXZlbnQpIHtcblx0ICAgICAgaWYgKHNob3dFdmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSkgcmV0dXJuIC8vIG9ubHkgcmVnaXN0ZXIgZm9jdXMgcmVzdG9yZXIgaWYgbW9kYWwgd2lsbCBhY3R1YWxseSBnZXQgc2hvd25cblx0ICAgICAgJHRhcmdldC5vbmUoJ2hpZGRlbi5icy5tb2RhbCcsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAkdGhpcy5pcygnOnZpc2libGUnKSAmJiAkdGhpcy50cmlnZ2VyKCdmb2N1cycpXG5cdCAgICAgIH0pXG5cdCAgICB9KVxuXHQgICAgUGx1Z2luLmNhbGwoJHRhcmdldCwgb3B0aW9uLCB0aGlzKVxuXHQgIH0pXG5cdFxuXHR9KGpRdWVyeSk7XG5cdFxuXHQvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0ICogQm9vdHN0cmFwOiB0b29sdGlwLmpzIHYzLjMuN1xuXHQgKiBodHRwOi8vZ2V0Ym9vdHN0cmFwLmNvbS9qYXZhc2NyaXB0LyN0b29sdGlwXG5cdCAqIEluc3BpcmVkIGJ5IHRoZSBvcmlnaW5hbCBqUXVlcnkudGlwc3kgYnkgSmFzb24gRnJhbWVcblx0ICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdCAqIENvcHlyaWdodCAyMDExLTIwMTYgVHdpdHRlciwgSW5jLlxuXHQgKiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ibG9iL21hc3Rlci9MSUNFTlNFKVxuXHQgKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cblx0XG5cdFxuXHQrZnVuY3Rpb24gKCQpIHtcblx0ICAndXNlIHN0cmljdCc7XG5cdFxuXHQgIC8vIFRPT0xUSVAgUFVCTElDIENMQVNTIERFRklOSVRJT05cblx0ICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdFxuXHQgIHZhciBUb29sdGlwID0gZnVuY3Rpb24gKGVsZW1lbnQsIG9wdGlvbnMpIHtcblx0ICAgIHRoaXMudHlwZSAgICAgICA9IG51bGxcblx0ICAgIHRoaXMub3B0aW9ucyAgICA9IG51bGxcblx0ICAgIHRoaXMuZW5hYmxlZCAgICA9IG51bGxcblx0ICAgIHRoaXMudGltZW91dCAgICA9IG51bGxcblx0ICAgIHRoaXMuaG92ZXJTdGF0ZSA9IG51bGxcblx0ICAgIHRoaXMuJGVsZW1lbnQgICA9IG51bGxcblx0ICAgIHRoaXMuaW5TdGF0ZSAgICA9IG51bGxcblx0XG5cdCAgICB0aGlzLmluaXQoJ3Rvb2x0aXAnLCBlbGVtZW50LCBvcHRpb25zKVxuXHQgIH1cblx0XG5cdCAgVG9vbHRpcC5WRVJTSU9OICA9ICczLjMuNydcblx0XG5cdCAgVG9vbHRpcC5UUkFOU0lUSU9OX0RVUkFUSU9OID0gMTUwXG5cdFxuXHQgIFRvb2x0aXAuREVGQVVMVFMgPSB7XG5cdCAgICBhbmltYXRpb246IHRydWUsXG5cdCAgICBwbGFjZW1lbnQ6ICd0b3AnLFxuXHQgICAgc2VsZWN0b3I6IGZhbHNlLFxuXHQgICAgdGVtcGxhdGU6ICc8ZGl2IGNsYXNzPVwidG9vbHRpcFwiIHJvbGU9XCJ0b29sdGlwXCI+PGRpdiBjbGFzcz1cInRvb2x0aXAtYXJyb3dcIj48L2Rpdj48ZGl2IGNsYXNzPVwidG9vbHRpcC1pbm5lclwiPjwvZGl2PjwvZGl2PicsXG5cdCAgICB0cmlnZ2VyOiAnaG92ZXIgZm9jdXMnLFxuXHQgICAgdGl0bGU6ICcnLFxuXHQgICAgZGVsYXk6IDAsXG5cdCAgICBodG1sOiBmYWxzZSxcblx0ICAgIGNvbnRhaW5lcjogZmFsc2UsXG5cdCAgICB2aWV3cG9ydDoge1xuXHQgICAgICBzZWxlY3RvcjogJ2JvZHknLFxuXHQgICAgICBwYWRkaW5nOiAwXG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBUb29sdGlwLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKHR5cGUsIGVsZW1lbnQsIG9wdGlvbnMpIHtcblx0ICAgIHRoaXMuZW5hYmxlZCAgID0gdHJ1ZVxuXHQgICAgdGhpcy50eXBlICAgICAgPSB0eXBlXG5cdCAgICB0aGlzLiRlbGVtZW50ICA9ICQoZWxlbWVudClcblx0ICAgIHRoaXMub3B0aW9ucyAgID0gdGhpcy5nZXRPcHRpb25zKG9wdGlvbnMpXG5cdCAgICB0aGlzLiR2aWV3cG9ydCA9IHRoaXMub3B0aW9ucy52aWV3cG9ydCAmJiAkKCQuaXNGdW5jdGlvbih0aGlzLm9wdGlvbnMudmlld3BvcnQpID8gdGhpcy5vcHRpb25zLnZpZXdwb3J0LmNhbGwodGhpcywgdGhpcy4kZWxlbWVudCkgOiAodGhpcy5vcHRpb25zLnZpZXdwb3J0LnNlbGVjdG9yIHx8IHRoaXMub3B0aW9ucy52aWV3cG9ydCkpXG5cdCAgICB0aGlzLmluU3RhdGUgICA9IHsgY2xpY2s6IGZhbHNlLCBob3ZlcjogZmFsc2UsIGZvY3VzOiBmYWxzZSB9XG5cdFxuXHQgICAgaWYgKHRoaXMuJGVsZW1lbnRbMF0gaW5zdGFuY2VvZiBkb2N1bWVudC5jb25zdHJ1Y3RvciAmJiAhdGhpcy5vcHRpb25zLnNlbGVjdG9yKSB7XG5cdCAgICAgIHRocm93IG5ldyBFcnJvcignYHNlbGVjdG9yYCBvcHRpb24gbXVzdCBiZSBzcGVjaWZpZWQgd2hlbiBpbml0aWFsaXppbmcgJyArIHRoaXMudHlwZSArICcgb24gdGhlIHdpbmRvdy5kb2N1bWVudCBvYmplY3QhJylcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgdHJpZ2dlcnMgPSB0aGlzLm9wdGlvbnMudHJpZ2dlci5zcGxpdCgnICcpXG5cdFxuXHQgICAgZm9yICh2YXIgaSA9IHRyaWdnZXJzLmxlbmd0aDsgaS0tOykge1xuXHQgICAgICB2YXIgdHJpZ2dlciA9IHRyaWdnZXJzW2ldXG5cdFxuXHQgICAgICBpZiAodHJpZ2dlciA9PSAnY2xpY2snKSB7XG5cdCAgICAgICAgdGhpcy4kZWxlbWVudC5vbignY2xpY2suJyArIHRoaXMudHlwZSwgdGhpcy5vcHRpb25zLnNlbGVjdG9yLCAkLnByb3h5KHRoaXMudG9nZ2xlLCB0aGlzKSlcblx0ICAgICAgfSBlbHNlIGlmICh0cmlnZ2VyICE9ICdtYW51YWwnKSB7XG5cdCAgICAgICAgdmFyIGV2ZW50SW4gID0gdHJpZ2dlciA9PSAnaG92ZXInID8gJ21vdXNlZW50ZXInIDogJ2ZvY3VzaW4nXG5cdCAgICAgICAgdmFyIGV2ZW50T3V0ID0gdHJpZ2dlciA9PSAnaG92ZXInID8gJ21vdXNlbGVhdmUnIDogJ2ZvY3Vzb3V0J1xuXHRcblx0ICAgICAgICB0aGlzLiRlbGVtZW50Lm9uKGV2ZW50SW4gICsgJy4nICsgdGhpcy50eXBlLCB0aGlzLm9wdGlvbnMuc2VsZWN0b3IsICQucHJveHkodGhpcy5lbnRlciwgdGhpcykpXG5cdCAgICAgICAgdGhpcy4kZWxlbWVudC5vbihldmVudE91dCArICcuJyArIHRoaXMudHlwZSwgdGhpcy5vcHRpb25zLnNlbGVjdG9yLCAkLnByb3h5KHRoaXMubGVhdmUsIHRoaXMpKVxuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgdGhpcy5vcHRpb25zLnNlbGVjdG9yID9cblx0ICAgICAgKHRoaXMuX29wdGlvbnMgPSAkLmV4dGVuZCh7fSwgdGhpcy5vcHRpb25zLCB7IHRyaWdnZXI6ICdtYW51YWwnLCBzZWxlY3RvcjogJycgfSkpIDpcblx0ICAgICAgdGhpcy5maXhUaXRsZSgpXG5cdCAgfVxuXHRcblx0ICBUb29sdGlwLnByb3RvdHlwZS5nZXREZWZhdWx0cyA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHJldHVybiBUb29sdGlwLkRFRkFVTFRTXG5cdCAgfVxuXHRcblx0ICBUb29sdGlwLnByb3RvdHlwZS5nZXRPcHRpb25zID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcblx0ICAgIG9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgdGhpcy5nZXREZWZhdWx0cygpLCB0aGlzLiRlbGVtZW50LmRhdGEoKSwgb3B0aW9ucylcblx0XG5cdCAgICBpZiAob3B0aW9ucy5kZWxheSAmJiB0eXBlb2Ygb3B0aW9ucy5kZWxheSA9PSAnbnVtYmVyJykge1xuXHQgICAgICBvcHRpb25zLmRlbGF5ID0ge1xuXHQgICAgICAgIHNob3c6IG9wdGlvbnMuZGVsYXksXG5cdCAgICAgICAgaGlkZTogb3B0aW9ucy5kZWxheVxuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIG9wdGlvbnNcblx0ICB9XG5cdFxuXHQgIFRvb2x0aXAucHJvdG90eXBlLmdldERlbGVnYXRlT3B0aW9ucyA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHZhciBvcHRpb25zICA9IHt9XG5cdCAgICB2YXIgZGVmYXVsdHMgPSB0aGlzLmdldERlZmF1bHRzKClcblx0XG5cdCAgICB0aGlzLl9vcHRpb25zICYmICQuZWFjaCh0aGlzLl9vcHRpb25zLCBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuXHQgICAgICBpZiAoZGVmYXVsdHNba2V5XSAhPSB2YWx1ZSkgb3B0aW9uc1trZXldID0gdmFsdWVcblx0ICAgIH0pXG5cdFxuXHQgICAgcmV0dXJuIG9wdGlvbnNcblx0ICB9XG5cdFxuXHQgIFRvb2x0aXAucHJvdG90eXBlLmVudGVyID0gZnVuY3Rpb24gKG9iaikge1xuXHQgICAgdmFyIHNlbGYgPSBvYmogaW5zdGFuY2VvZiB0aGlzLmNvbnN0cnVjdG9yID9cblx0ICAgICAgb2JqIDogJChvYmouY3VycmVudFRhcmdldCkuZGF0YSgnYnMuJyArIHRoaXMudHlwZSlcblx0XG5cdCAgICBpZiAoIXNlbGYpIHtcblx0ICAgICAgc2VsZiA9IG5ldyB0aGlzLmNvbnN0cnVjdG9yKG9iai5jdXJyZW50VGFyZ2V0LCB0aGlzLmdldERlbGVnYXRlT3B0aW9ucygpKVxuXHQgICAgICAkKG9iai5jdXJyZW50VGFyZ2V0KS5kYXRhKCdicy4nICsgdGhpcy50eXBlLCBzZWxmKVxuXHQgICAgfVxuXHRcblx0ICAgIGlmIChvYmogaW5zdGFuY2VvZiAkLkV2ZW50KSB7XG5cdCAgICAgIHNlbGYuaW5TdGF0ZVtvYmoudHlwZSA9PSAnZm9jdXNpbicgPyAnZm9jdXMnIDogJ2hvdmVyJ10gPSB0cnVlXG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKHNlbGYudGlwKCkuaGFzQ2xhc3MoJ2luJykgfHwgc2VsZi5ob3ZlclN0YXRlID09ICdpbicpIHtcblx0ICAgICAgc2VsZi5ob3ZlclN0YXRlID0gJ2luJ1xuXHQgICAgICByZXR1cm5cblx0ICAgIH1cblx0XG5cdCAgICBjbGVhclRpbWVvdXQoc2VsZi50aW1lb3V0KVxuXHRcblx0ICAgIHNlbGYuaG92ZXJTdGF0ZSA9ICdpbidcblx0XG5cdCAgICBpZiAoIXNlbGYub3B0aW9ucy5kZWxheSB8fCAhc2VsZi5vcHRpb25zLmRlbGF5LnNob3cpIHJldHVybiBzZWxmLnNob3coKVxuXHRcblx0ICAgIHNlbGYudGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHQgICAgICBpZiAoc2VsZi5ob3ZlclN0YXRlID09ICdpbicpIHNlbGYuc2hvdygpXG5cdCAgICB9LCBzZWxmLm9wdGlvbnMuZGVsYXkuc2hvdylcblx0ICB9XG5cdFxuXHQgIFRvb2x0aXAucHJvdG90eXBlLmlzSW5TdGF0ZVRydWUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICBmb3IgKHZhciBrZXkgaW4gdGhpcy5pblN0YXRlKSB7XG5cdCAgICAgIGlmICh0aGlzLmluU3RhdGVba2V5XSkgcmV0dXJuIHRydWVcblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gZmFsc2Vcblx0ICB9XG5cdFxuXHQgIFRvb2x0aXAucHJvdG90eXBlLmxlYXZlID0gZnVuY3Rpb24gKG9iaikge1xuXHQgICAgdmFyIHNlbGYgPSBvYmogaW5zdGFuY2VvZiB0aGlzLmNvbnN0cnVjdG9yID9cblx0ICAgICAgb2JqIDogJChvYmouY3VycmVudFRhcmdldCkuZGF0YSgnYnMuJyArIHRoaXMudHlwZSlcblx0XG5cdCAgICBpZiAoIXNlbGYpIHtcblx0ICAgICAgc2VsZiA9IG5ldyB0aGlzLmNvbnN0cnVjdG9yKG9iai5jdXJyZW50VGFyZ2V0LCB0aGlzLmdldERlbGVnYXRlT3B0aW9ucygpKVxuXHQgICAgICAkKG9iai5jdXJyZW50VGFyZ2V0KS5kYXRhKCdicy4nICsgdGhpcy50eXBlLCBzZWxmKVxuXHQgICAgfVxuXHRcblx0ICAgIGlmIChvYmogaW5zdGFuY2VvZiAkLkV2ZW50KSB7XG5cdCAgICAgIHNlbGYuaW5TdGF0ZVtvYmoudHlwZSA9PSAnZm9jdXNvdXQnID8gJ2ZvY3VzJyA6ICdob3ZlciddID0gZmFsc2Vcblx0ICAgIH1cblx0XG5cdCAgICBpZiAoc2VsZi5pc0luU3RhdGVUcnVlKCkpIHJldHVyblxuXHRcblx0ICAgIGNsZWFyVGltZW91dChzZWxmLnRpbWVvdXQpXG5cdFxuXHQgICAgc2VsZi5ob3ZlclN0YXRlID0gJ291dCdcblx0XG5cdCAgICBpZiAoIXNlbGYub3B0aW9ucy5kZWxheSB8fCAhc2VsZi5vcHRpb25zLmRlbGF5LmhpZGUpIHJldHVybiBzZWxmLmhpZGUoKVxuXHRcblx0ICAgIHNlbGYudGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHQgICAgICBpZiAoc2VsZi5ob3ZlclN0YXRlID09ICdvdXQnKSBzZWxmLmhpZGUoKVxuXHQgICAgfSwgc2VsZi5vcHRpb25zLmRlbGF5LmhpZGUpXG5cdCAgfVxuXHRcblx0ICBUb29sdGlwLnByb3RvdHlwZS5zaG93ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIGUgPSAkLkV2ZW50KCdzaG93LmJzLicgKyB0aGlzLnR5cGUpXG5cdFxuXHQgICAgaWYgKHRoaXMuaGFzQ29udGVudCgpICYmIHRoaXMuZW5hYmxlZCkge1xuXHQgICAgICB0aGlzLiRlbGVtZW50LnRyaWdnZXIoZSlcblx0XG5cdCAgICAgIHZhciBpbkRvbSA9ICQuY29udGFpbnModGhpcy4kZWxlbWVudFswXS5vd25lckRvY3VtZW50LmRvY3VtZW50RWxlbWVudCwgdGhpcy4kZWxlbWVudFswXSlcblx0ICAgICAgaWYgKGUuaXNEZWZhdWx0UHJldmVudGVkKCkgfHwgIWluRG9tKSByZXR1cm5cblx0ICAgICAgdmFyIHRoYXQgPSB0aGlzXG5cdFxuXHQgICAgICB2YXIgJHRpcCA9IHRoaXMudGlwKClcblx0XG5cdCAgICAgIHZhciB0aXBJZCA9IHRoaXMuZ2V0VUlEKHRoaXMudHlwZSlcblx0XG5cdCAgICAgIHRoaXMuc2V0Q29udGVudCgpXG5cdCAgICAgICR0aXAuYXR0cignaWQnLCB0aXBJZClcblx0ICAgICAgdGhpcy4kZWxlbWVudC5hdHRyKCdhcmlhLWRlc2NyaWJlZGJ5JywgdGlwSWQpXG5cdFxuXHQgICAgICBpZiAodGhpcy5vcHRpb25zLmFuaW1hdGlvbikgJHRpcC5hZGRDbGFzcygnZmFkZScpXG5cdFxuXHQgICAgICB2YXIgcGxhY2VtZW50ID0gdHlwZW9mIHRoaXMub3B0aW9ucy5wbGFjZW1lbnQgPT0gJ2Z1bmN0aW9uJyA/XG5cdCAgICAgICAgdGhpcy5vcHRpb25zLnBsYWNlbWVudC5jYWxsKHRoaXMsICR0aXBbMF0sIHRoaXMuJGVsZW1lbnRbMF0pIDpcblx0ICAgICAgICB0aGlzLm9wdGlvbnMucGxhY2VtZW50XG5cdFxuXHQgICAgICB2YXIgYXV0b1Rva2VuID0gL1xccz9hdXRvP1xccz8vaVxuXHQgICAgICB2YXIgYXV0b1BsYWNlID0gYXV0b1Rva2VuLnRlc3QocGxhY2VtZW50KVxuXHQgICAgICBpZiAoYXV0b1BsYWNlKSBwbGFjZW1lbnQgPSBwbGFjZW1lbnQucmVwbGFjZShhdXRvVG9rZW4sICcnKSB8fCAndG9wJ1xuXHRcblx0ICAgICAgJHRpcFxuXHQgICAgICAgIC5kZXRhY2goKVxuXHQgICAgICAgIC5jc3MoeyB0b3A6IDAsIGxlZnQ6IDAsIGRpc3BsYXk6ICdibG9jaycgfSlcblx0ICAgICAgICAuYWRkQ2xhc3MocGxhY2VtZW50KVxuXHQgICAgICAgIC5kYXRhKCdicy4nICsgdGhpcy50eXBlLCB0aGlzKVxuXHRcblx0ICAgICAgdGhpcy5vcHRpb25zLmNvbnRhaW5lciA/ICR0aXAuYXBwZW5kVG8odGhpcy5vcHRpb25zLmNvbnRhaW5lcikgOiAkdGlwLmluc2VydEFmdGVyKHRoaXMuJGVsZW1lbnQpXG5cdCAgICAgIHRoaXMuJGVsZW1lbnQudHJpZ2dlcignaW5zZXJ0ZWQuYnMuJyArIHRoaXMudHlwZSlcblx0XG5cdCAgICAgIHZhciBwb3MgICAgICAgICAgPSB0aGlzLmdldFBvc2l0aW9uKClcblx0ICAgICAgdmFyIGFjdHVhbFdpZHRoICA9ICR0aXBbMF0ub2Zmc2V0V2lkdGhcblx0ICAgICAgdmFyIGFjdHVhbEhlaWdodCA9ICR0aXBbMF0ub2Zmc2V0SGVpZ2h0XG5cdFxuXHQgICAgICBpZiAoYXV0b1BsYWNlKSB7XG5cdCAgICAgICAgdmFyIG9yZ1BsYWNlbWVudCA9IHBsYWNlbWVudFxuXHQgICAgICAgIHZhciB2aWV3cG9ydERpbSA9IHRoaXMuZ2V0UG9zaXRpb24odGhpcy4kdmlld3BvcnQpXG5cdFxuXHQgICAgICAgIHBsYWNlbWVudCA9IHBsYWNlbWVudCA9PSAnYm90dG9tJyAmJiBwb3MuYm90dG9tICsgYWN0dWFsSGVpZ2h0ID4gdmlld3BvcnREaW0uYm90dG9tID8gJ3RvcCcgICAgOlxuXHQgICAgICAgICAgICAgICAgICAgIHBsYWNlbWVudCA9PSAndG9wJyAgICAmJiBwb3MudG9wICAgIC0gYWN0dWFsSGVpZ2h0IDwgdmlld3BvcnREaW0udG9wICAgID8gJ2JvdHRvbScgOlxuXHQgICAgICAgICAgICAgICAgICAgIHBsYWNlbWVudCA9PSAncmlnaHQnICAmJiBwb3MucmlnaHQgICsgYWN0dWFsV2lkdGggID4gdmlld3BvcnREaW0ud2lkdGggID8gJ2xlZnQnICAgOlxuXHQgICAgICAgICAgICAgICAgICAgIHBsYWNlbWVudCA9PSAnbGVmdCcgICAmJiBwb3MubGVmdCAgIC0gYWN0dWFsV2lkdGggIDwgdmlld3BvcnREaW0ubGVmdCAgID8gJ3JpZ2h0JyAgOlxuXHQgICAgICAgICAgICAgICAgICAgIHBsYWNlbWVudFxuXHRcblx0ICAgICAgICAkdGlwXG5cdCAgICAgICAgICAucmVtb3ZlQ2xhc3Mob3JnUGxhY2VtZW50KVxuXHQgICAgICAgICAgLmFkZENsYXNzKHBsYWNlbWVudClcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdmFyIGNhbGN1bGF0ZWRPZmZzZXQgPSB0aGlzLmdldENhbGN1bGF0ZWRPZmZzZXQocGxhY2VtZW50LCBwb3MsIGFjdHVhbFdpZHRoLCBhY3R1YWxIZWlnaHQpXG5cdFxuXHQgICAgICB0aGlzLmFwcGx5UGxhY2VtZW50KGNhbGN1bGF0ZWRPZmZzZXQsIHBsYWNlbWVudClcblx0XG5cdCAgICAgIHZhciBjb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgcHJldkhvdmVyU3RhdGUgPSB0aGF0LmhvdmVyU3RhdGVcblx0ICAgICAgICB0aGF0LiRlbGVtZW50LnRyaWdnZXIoJ3Nob3duLmJzLicgKyB0aGF0LnR5cGUpXG5cdCAgICAgICAgdGhhdC5ob3ZlclN0YXRlID0gbnVsbFxuXHRcblx0ICAgICAgICBpZiAocHJldkhvdmVyU3RhdGUgPT0gJ291dCcpIHRoYXQubGVhdmUodGhhdClcblx0ICAgICAgfVxuXHRcblx0ICAgICAgJC5zdXBwb3J0LnRyYW5zaXRpb24gJiYgdGhpcy4kdGlwLmhhc0NsYXNzKCdmYWRlJykgP1xuXHQgICAgICAgICR0aXBcblx0ICAgICAgICAgIC5vbmUoJ2JzVHJhbnNpdGlvbkVuZCcsIGNvbXBsZXRlKVxuXHQgICAgICAgICAgLmVtdWxhdGVUcmFuc2l0aW9uRW5kKFRvb2x0aXAuVFJBTlNJVElPTl9EVVJBVElPTikgOlxuXHQgICAgICAgIGNvbXBsZXRlKClcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIFRvb2x0aXAucHJvdG90eXBlLmFwcGx5UGxhY2VtZW50ID0gZnVuY3Rpb24gKG9mZnNldCwgcGxhY2VtZW50KSB7XG5cdCAgICB2YXIgJHRpcCAgID0gdGhpcy50aXAoKVxuXHQgICAgdmFyIHdpZHRoICA9ICR0aXBbMF0ub2Zmc2V0V2lkdGhcblx0ICAgIHZhciBoZWlnaHQgPSAkdGlwWzBdLm9mZnNldEhlaWdodFxuXHRcblx0ICAgIC8vIG1hbnVhbGx5IHJlYWQgbWFyZ2lucyBiZWNhdXNlIGdldEJvdW5kaW5nQ2xpZW50UmVjdCBpbmNsdWRlcyBkaWZmZXJlbmNlXG5cdCAgICB2YXIgbWFyZ2luVG9wID0gcGFyc2VJbnQoJHRpcC5jc3MoJ21hcmdpbi10b3AnKSwgMTApXG5cdCAgICB2YXIgbWFyZ2luTGVmdCA9IHBhcnNlSW50KCR0aXAuY3NzKCdtYXJnaW4tbGVmdCcpLCAxMClcblx0XG5cdCAgICAvLyB3ZSBtdXN0IGNoZWNrIGZvciBOYU4gZm9yIGllIDgvOVxuXHQgICAgaWYgKGlzTmFOKG1hcmdpblRvcCkpICBtYXJnaW5Ub3AgID0gMFxuXHQgICAgaWYgKGlzTmFOKG1hcmdpbkxlZnQpKSBtYXJnaW5MZWZ0ID0gMFxuXHRcblx0ICAgIG9mZnNldC50b3AgICs9IG1hcmdpblRvcFxuXHQgICAgb2Zmc2V0LmxlZnQgKz0gbWFyZ2luTGVmdFxuXHRcblx0ICAgIC8vICQuZm4ub2Zmc2V0IGRvZXNuJ3Qgcm91bmQgcGl4ZWwgdmFsdWVzXG5cdCAgICAvLyBzbyB3ZSB1c2Ugc2V0T2Zmc2V0IGRpcmVjdGx5IHdpdGggb3VyIG93biBmdW5jdGlvbiBCLTBcblx0ICAgICQub2Zmc2V0LnNldE9mZnNldCgkdGlwWzBdLCAkLmV4dGVuZCh7XG5cdCAgICAgIHVzaW5nOiBmdW5jdGlvbiAocHJvcHMpIHtcblx0ICAgICAgICAkdGlwLmNzcyh7XG5cdCAgICAgICAgICB0b3A6IE1hdGgucm91bmQocHJvcHMudG9wKSxcblx0ICAgICAgICAgIGxlZnQ6IE1hdGgucm91bmQocHJvcHMubGVmdClcblx0ICAgICAgICB9KVxuXHQgICAgICB9XG5cdCAgICB9LCBvZmZzZXQpLCAwKVxuXHRcblx0ICAgICR0aXAuYWRkQ2xhc3MoJ2luJylcblx0XG5cdCAgICAvLyBjaGVjayB0byBzZWUgaWYgcGxhY2luZyB0aXAgaW4gbmV3IG9mZnNldCBjYXVzZWQgdGhlIHRpcCB0byByZXNpemUgaXRzZWxmXG5cdCAgICB2YXIgYWN0dWFsV2lkdGggID0gJHRpcFswXS5vZmZzZXRXaWR0aFxuXHQgICAgdmFyIGFjdHVhbEhlaWdodCA9ICR0aXBbMF0ub2Zmc2V0SGVpZ2h0XG5cdFxuXHQgICAgaWYgKHBsYWNlbWVudCA9PSAndG9wJyAmJiBhY3R1YWxIZWlnaHQgIT0gaGVpZ2h0KSB7XG5cdCAgICAgIG9mZnNldC50b3AgPSBvZmZzZXQudG9wICsgaGVpZ2h0IC0gYWN0dWFsSGVpZ2h0XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIGRlbHRhID0gdGhpcy5nZXRWaWV3cG9ydEFkanVzdGVkRGVsdGEocGxhY2VtZW50LCBvZmZzZXQsIGFjdHVhbFdpZHRoLCBhY3R1YWxIZWlnaHQpXG5cdFxuXHQgICAgaWYgKGRlbHRhLmxlZnQpIG9mZnNldC5sZWZ0ICs9IGRlbHRhLmxlZnRcblx0ICAgIGVsc2Ugb2Zmc2V0LnRvcCArPSBkZWx0YS50b3Bcblx0XG5cdCAgICB2YXIgaXNWZXJ0aWNhbCAgICAgICAgICA9IC90b3B8Ym90dG9tLy50ZXN0KHBsYWNlbWVudClcblx0ICAgIHZhciBhcnJvd0RlbHRhICAgICAgICAgID0gaXNWZXJ0aWNhbCA/IGRlbHRhLmxlZnQgKiAyIC0gd2lkdGggKyBhY3R1YWxXaWR0aCA6IGRlbHRhLnRvcCAqIDIgLSBoZWlnaHQgKyBhY3R1YWxIZWlnaHRcblx0ICAgIHZhciBhcnJvd09mZnNldFBvc2l0aW9uID0gaXNWZXJ0aWNhbCA/ICdvZmZzZXRXaWR0aCcgOiAnb2Zmc2V0SGVpZ2h0J1xuXHRcblx0ICAgICR0aXAub2Zmc2V0KG9mZnNldClcblx0ICAgIHRoaXMucmVwbGFjZUFycm93KGFycm93RGVsdGEsICR0aXBbMF1bYXJyb3dPZmZzZXRQb3NpdGlvbl0sIGlzVmVydGljYWwpXG5cdCAgfVxuXHRcblx0ICBUb29sdGlwLnByb3RvdHlwZS5yZXBsYWNlQXJyb3cgPSBmdW5jdGlvbiAoZGVsdGEsIGRpbWVuc2lvbiwgaXNWZXJ0aWNhbCkge1xuXHQgICAgdGhpcy5hcnJvdygpXG5cdCAgICAgIC5jc3MoaXNWZXJ0aWNhbCA/ICdsZWZ0JyA6ICd0b3AnLCA1MCAqICgxIC0gZGVsdGEgLyBkaW1lbnNpb24pICsgJyUnKVxuXHQgICAgICAuY3NzKGlzVmVydGljYWwgPyAndG9wJyA6ICdsZWZ0JywgJycpXG5cdCAgfVxuXHRcblx0ICBUb29sdGlwLnByb3RvdHlwZS5zZXRDb250ZW50ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyICR0aXAgID0gdGhpcy50aXAoKVxuXHQgICAgdmFyIHRpdGxlID0gdGhpcy5nZXRUaXRsZSgpXG5cdFxuXHQgICAgJHRpcC5maW5kKCcudG9vbHRpcC1pbm5lcicpW3RoaXMub3B0aW9ucy5odG1sID8gJ2h0bWwnIDogJ3RleHQnXSh0aXRsZSlcblx0ICAgICR0aXAucmVtb3ZlQ2xhc3MoJ2ZhZGUgaW4gdG9wIGJvdHRvbSBsZWZ0IHJpZ2h0Jylcblx0ICB9XG5cdFxuXHQgIFRvb2x0aXAucHJvdG90eXBlLmhpZGUgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcblx0ICAgIHZhciB0aGF0ID0gdGhpc1xuXHQgICAgdmFyICR0aXAgPSAkKHRoaXMuJHRpcClcblx0ICAgIHZhciBlICAgID0gJC5FdmVudCgnaGlkZS5icy4nICsgdGhpcy50eXBlKVxuXHRcblx0ICAgIGZ1bmN0aW9uIGNvbXBsZXRlKCkge1xuXHQgICAgICBpZiAodGhhdC5ob3ZlclN0YXRlICE9ICdpbicpICR0aXAuZGV0YWNoKClcblx0ICAgICAgaWYgKHRoYXQuJGVsZW1lbnQpIHsgLy8gVE9ETzogQ2hlY2sgd2hldGhlciBndWFyZGluZyB0aGlzIGNvZGUgd2l0aCB0aGlzIGBpZmAgaXMgcmVhbGx5IG5lY2Vzc2FyeS5cblx0ICAgICAgICB0aGF0LiRlbGVtZW50XG5cdCAgICAgICAgICAucmVtb3ZlQXR0cignYXJpYS1kZXNjcmliZWRieScpXG5cdCAgICAgICAgICAudHJpZ2dlcignaGlkZGVuLmJzLicgKyB0aGF0LnR5cGUpXG5cdCAgICAgIH1cblx0ICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2soKVxuXHQgICAgfVxuXHRcblx0ICAgIHRoaXMuJGVsZW1lbnQudHJpZ2dlcihlKVxuXHRcblx0ICAgIGlmIChlLmlzRGVmYXVsdFByZXZlbnRlZCgpKSByZXR1cm5cblx0XG5cdCAgICAkdGlwLnJlbW92ZUNsYXNzKCdpbicpXG5cdFxuXHQgICAgJC5zdXBwb3J0LnRyYW5zaXRpb24gJiYgJHRpcC5oYXNDbGFzcygnZmFkZScpID9cblx0ICAgICAgJHRpcFxuXHQgICAgICAgIC5vbmUoJ2JzVHJhbnNpdGlvbkVuZCcsIGNvbXBsZXRlKVxuXHQgICAgICAgIC5lbXVsYXRlVHJhbnNpdGlvbkVuZChUb29sdGlwLlRSQU5TSVRJT05fRFVSQVRJT04pIDpcblx0ICAgICAgY29tcGxldGUoKVxuXHRcblx0ICAgIHRoaXMuaG92ZXJTdGF0ZSA9IG51bGxcblx0XG5cdCAgICByZXR1cm4gdGhpc1xuXHQgIH1cblx0XG5cdCAgVG9vbHRpcC5wcm90b3R5cGUuZml4VGl0bGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICB2YXIgJGUgPSB0aGlzLiRlbGVtZW50XG5cdCAgICBpZiAoJGUuYXR0cigndGl0bGUnKSB8fCB0eXBlb2YgJGUuYXR0cignZGF0YS1vcmlnaW5hbC10aXRsZScpICE9ICdzdHJpbmcnKSB7XG5cdCAgICAgICRlLmF0dHIoJ2RhdGEtb3JpZ2luYWwtdGl0bGUnLCAkZS5hdHRyKCd0aXRsZScpIHx8ICcnKS5hdHRyKCd0aXRsZScsICcnKVxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgVG9vbHRpcC5wcm90b3R5cGUuaGFzQ29udGVudCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHJldHVybiB0aGlzLmdldFRpdGxlKClcblx0ICB9XG5cdFxuXHQgIFRvb2x0aXAucHJvdG90eXBlLmdldFBvc2l0aW9uID0gZnVuY3Rpb24gKCRlbGVtZW50KSB7XG5cdCAgICAkZWxlbWVudCAgID0gJGVsZW1lbnQgfHwgdGhpcy4kZWxlbWVudFxuXHRcblx0ICAgIHZhciBlbCAgICAgPSAkZWxlbWVudFswXVxuXHQgICAgdmFyIGlzQm9keSA9IGVsLnRhZ05hbWUgPT0gJ0JPRFknXG5cdFxuXHQgICAgdmFyIGVsUmVjdCAgICA9IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG5cdCAgICBpZiAoZWxSZWN0LndpZHRoID09IG51bGwpIHtcblx0ICAgICAgLy8gd2lkdGggYW5kIGhlaWdodCBhcmUgbWlzc2luZyBpbiBJRTgsIHNvIGNvbXB1dGUgdGhlbSBtYW51YWxseTsgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9pc3N1ZXMvMTQwOTNcblx0ICAgICAgZWxSZWN0ID0gJC5leHRlbmQoe30sIGVsUmVjdCwgeyB3aWR0aDogZWxSZWN0LnJpZ2h0IC0gZWxSZWN0LmxlZnQsIGhlaWdodDogZWxSZWN0LmJvdHRvbSAtIGVsUmVjdC50b3AgfSlcblx0ICAgIH1cblx0ICAgIHZhciBpc1N2ZyA9IHdpbmRvdy5TVkdFbGVtZW50ICYmIGVsIGluc3RhbmNlb2Ygd2luZG93LlNWR0VsZW1lbnRcblx0ICAgIC8vIEF2b2lkIHVzaW5nICQub2Zmc2V0KCkgb24gU1ZHcyBzaW5jZSBpdCBnaXZlcyBpbmNvcnJlY3QgcmVzdWx0cyBpbiBqUXVlcnkgMy5cblx0ICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vdHdicy9ib290c3RyYXAvaXNzdWVzLzIwMjgwXG5cdCAgICB2YXIgZWxPZmZzZXQgID0gaXNCb2R5ID8geyB0b3A6IDAsIGxlZnQ6IDAgfSA6IChpc1N2ZyA/IG51bGwgOiAkZWxlbWVudC5vZmZzZXQoKSlcblx0ICAgIHZhciBzY3JvbGwgICAgPSB7IHNjcm9sbDogaXNCb2R5ID8gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCB8fCBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCA6ICRlbGVtZW50LnNjcm9sbFRvcCgpIH1cblx0ICAgIHZhciBvdXRlckRpbXMgPSBpc0JvZHkgPyB7IHdpZHRoOiAkKHdpbmRvdykud2lkdGgoKSwgaGVpZ2h0OiAkKHdpbmRvdykuaGVpZ2h0KCkgfSA6IG51bGxcblx0XG5cdCAgICByZXR1cm4gJC5leHRlbmQoe30sIGVsUmVjdCwgc2Nyb2xsLCBvdXRlckRpbXMsIGVsT2Zmc2V0KVxuXHQgIH1cblx0XG5cdCAgVG9vbHRpcC5wcm90b3R5cGUuZ2V0Q2FsY3VsYXRlZE9mZnNldCA9IGZ1bmN0aW9uIChwbGFjZW1lbnQsIHBvcywgYWN0dWFsV2lkdGgsIGFjdHVhbEhlaWdodCkge1xuXHQgICAgcmV0dXJuIHBsYWNlbWVudCA9PSAnYm90dG9tJyA/IHsgdG9wOiBwb3MudG9wICsgcG9zLmhlaWdodCwgICBsZWZ0OiBwb3MubGVmdCArIHBvcy53aWR0aCAvIDIgLSBhY3R1YWxXaWR0aCAvIDIgfSA6XG5cdCAgICAgICAgICAgcGxhY2VtZW50ID09ICd0b3AnICAgID8geyB0b3A6IHBvcy50b3AgLSBhY3R1YWxIZWlnaHQsIGxlZnQ6IHBvcy5sZWZ0ICsgcG9zLndpZHRoIC8gMiAtIGFjdHVhbFdpZHRoIC8gMiB9IDpcblx0ICAgICAgICAgICBwbGFjZW1lbnQgPT0gJ2xlZnQnICAgPyB7IHRvcDogcG9zLnRvcCArIHBvcy5oZWlnaHQgLyAyIC0gYWN0dWFsSGVpZ2h0IC8gMiwgbGVmdDogcG9zLmxlZnQgLSBhY3R1YWxXaWR0aCB9IDpcblx0ICAgICAgICAvKiBwbGFjZW1lbnQgPT0gJ3JpZ2h0JyAqLyB7IHRvcDogcG9zLnRvcCArIHBvcy5oZWlnaHQgLyAyIC0gYWN0dWFsSGVpZ2h0IC8gMiwgbGVmdDogcG9zLmxlZnQgKyBwb3Mud2lkdGggfVxuXHRcblx0ICB9XG5cdFxuXHQgIFRvb2x0aXAucHJvdG90eXBlLmdldFZpZXdwb3J0QWRqdXN0ZWREZWx0YSA9IGZ1bmN0aW9uIChwbGFjZW1lbnQsIHBvcywgYWN0dWFsV2lkdGgsIGFjdHVhbEhlaWdodCkge1xuXHQgICAgdmFyIGRlbHRhID0geyB0b3A6IDAsIGxlZnQ6IDAgfVxuXHQgICAgaWYgKCF0aGlzLiR2aWV3cG9ydCkgcmV0dXJuIGRlbHRhXG5cdFxuXHQgICAgdmFyIHZpZXdwb3J0UGFkZGluZyA9IHRoaXMub3B0aW9ucy52aWV3cG9ydCAmJiB0aGlzLm9wdGlvbnMudmlld3BvcnQucGFkZGluZyB8fCAwXG5cdCAgICB2YXIgdmlld3BvcnREaW1lbnNpb25zID0gdGhpcy5nZXRQb3NpdGlvbih0aGlzLiR2aWV3cG9ydClcblx0XG5cdCAgICBpZiAoL3JpZ2h0fGxlZnQvLnRlc3QocGxhY2VtZW50KSkge1xuXHQgICAgICB2YXIgdG9wRWRnZU9mZnNldCAgICA9IHBvcy50b3AgLSB2aWV3cG9ydFBhZGRpbmcgLSB2aWV3cG9ydERpbWVuc2lvbnMuc2Nyb2xsXG5cdCAgICAgIHZhciBib3R0b21FZGdlT2Zmc2V0ID0gcG9zLnRvcCArIHZpZXdwb3J0UGFkZGluZyAtIHZpZXdwb3J0RGltZW5zaW9ucy5zY3JvbGwgKyBhY3R1YWxIZWlnaHRcblx0ICAgICAgaWYgKHRvcEVkZ2VPZmZzZXQgPCB2aWV3cG9ydERpbWVuc2lvbnMudG9wKSB7IC8vIHRvcCBvdmVyZmxvd1xuXHQgICAgICAgIGRlbHRhLnRvcCA9IHZpZXdwb3J0RGltZW5zaW9ucy50b3AgLSB0b3BFZGdlT2Zmc2V0XG5cdCAgICAgIH0gZWxzZSBpZiAoYm90dG9tRWRnZU9mZnNldCA+IHZpZXdwb3J0RGltZW5zaW9ucy50b3AgKyB2aWV3cG9ydERpbWVuc2lvbnMuaGVpZ2h0KSB7IC8vIGJvdHRvbSBvdmVyZmxvd1xuXHQgICAgICAgIGRlbHRhLnRvcCA9IHZpZXdwb3J0RGltZW5zaW9ucy50b3AgKyB2aWV3cG9ydERpbWVuc2lvbnMuaGVpZ2h0IC0gYm90dG9tRWRnZU9mZnNldFxuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB2YXIgbGVmdEVkZ2VPZmZzZXQgID0gcG9zLmxlZnQgLSB2aWV3cG9ydFBhZGRpbmdcblx0ICAgICAgdmFyIHJpZ2h0RWRnZU9mZnNldCA9IHBvcy5sZWZ0ICsgdmlld3BvcnRQYWRkaW5nICsgYWN0dWFsV2lkdGhcblx0ICAgICAgaWYgKGxlZnRFZGdlT2Zmc2V0IDwgdmlld3BvcnREaW1lbnNpb25zLmxlZnQpIHsgLy8gbGVmdCBvdmVyZmxvd1xuXHQgICAgICAgIGRlbHRhLmxlZnQgPSB2aWV3cG9ydERpbWVuc2lvbnMubGVmdCAtIGxlZnRFZGdlT2Zmc2V0XG5cdCAgICAgIH0gZWxzZSBpZiAocmlnaHRFZGdlT2Zmc2V0ID4gdmlld3BvcnREaW1lbnNpb25zLnJpZ2h0KSB7IC8vIHJpZ2h0IG92ZXJmbG93XG5cdCAgICAgICAgZGVsdGEubGVmdCA9IHZpZXdwb3J0RGltZW5zaW9ucy5sZWZ0ICsgdmlld3BvcnREaW1lbnNpb25zLndpZHRoIC0gcmlnaHRFZGdlT2Zmc2V0XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gZGVsdGFcblx0ICB9XG5cdFxuXHQgIFRvb2x0aXAucHJvdG90eXBlLmdldFRpdGxlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIHRpdGxlXG5cdCAgICB2YXIgJGUgPSB0aGlzLiRlbGVtZW50XG5cdCAgICB2YXIgbyAgPSB0aGlzLm9wdGlvbnNcblx0XG5cdCAgICB0aXRsZSA9ICRlLmF0dHIoJ2RhdGEtb3JpZ2luYWwtdGl0bGUnKVxuXHQgICAgICB8fCAodHlwZW9mIG8udGl0bGUgPT0gJ2Z1bmN0aW9uJyA/IG8udGl0bGUuY2FsbCgkZVswXSkgOiAgby50aXRsZSlcblx0XG5cdCAgICByZXR1cm4gdGl0bGVcblx0ICB9XG5cdFxuXHQgIFRvb2x0aXAucHJvdG90eXBlLmdldFVJRCA9IGZ1bmN0aW9uIChwcmVmaXgpIHtcblx0ICAgIGRvIHByZWZpeCArPSB+fihNYXRoLnJhbmRvbSgpICogMTAwMDAwMClcblx0ICAgIHdoaWxlIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChwcmVmaXgpKVxuXHQgICAgcmV0dXJuIHByZWZpeFxuXHQgIH1cblx0XG5cdCAgVG9vbHRpcC5wcm90b3R5cGUudGlwID0gZnVuY3Rpb24gKCkge1xuXHQgICAgaWYgKCF0aGlzLiR0aXApIHtcblx0ICAgICAgdGhpcy4kdGlwID0gJCh0aGlzLm9wdGlvbnMudGVtcGxhdGUpXG5cdCAgICAgIGlmICh0aGlzLiR0aXAubGVuZ3RoICE9IDEpIHtcblx0ICAgICAgICB0aHJvdyBuZXcgRXJyb3IodGhpcy50eXBlICsgJyBgdGVtcGxhdGVgIG9wdGlvbiBtdXN0IGNvbnNpc3Qgb2YgZXhhY3RseSAxIHRvcC1sZXZlbCBlbGVtZW50IScpXG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHJldHVybiB0aGlzLiR0aXBcblx0ICB9XG5cdFxuXHQgIFRvb2x0aXAucHJvdG90eXBlLmFycm93ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgcmV0dXJuICh0aGlzLiRhcnJvdyA9IHRoaXMuJGFycm93IHx8IHRoaXMudGlwKCkuZmluZCgnLnRvb2x0aXAtYXJyb3cnKSlcblx0ICB9XG5cdFxuXHQgIFRvb2x0aXAucHJvdG90eXBlLmVuYWJsZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHRoaXMuZW5hYmxlZCA9IHRydWVcblx0ICB9XG5cdFxuXHQgIFRvb2x0aXAucHJvdG90eXBlLmRpc2FibGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICB0aGlzLmVuYWJsZWQgPSBmYWxzZVxuXHQgIH1cblx0XG5cdCAgVG9vbHRpcC5wcm90b3R5cGUudG9nZ2xlRW5hYmxlZCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHRoaXMuZW5hYmxlZCA9ICF0aGlzLmVuYWJsZWRcblx0ICB9XG5cdFxuXHQgIFRvb2x0aXAucHJvdG90eXBlLnRvZ2dsZSA9IGZ1bmN0aW9uIChlKSB7XG5cdCAgICB2YXIgc2VsZiA9IHRoaXNcblx0ICAgIGlmIChlKSB7XG5cdCAgICAgIHNlbGYgPSAkKGUuY3VycmVudFRhcmdldCkuZGF0YSgnYnMuJyArIHRoaXMudHlwZSlcblx0ICAgICAgaWYgKCFzZWxmKSB7XG5cdCAgICAgICAgc2VsZiA9IG5ldyB0aGlzLmNvbnN0cnVjdG9yKGUuY3VycmVudFRhcmdldCwgdGhpcy5nZXREZWxlZ2F0ZU9wdGlvbnMoKSlcblx0ICAgICAgICAkKGUuY3VycmVudFRhcmdldCkuZGF0YSgnYnMuJyArIHRoaXMudHlwZSwgc2VsZilcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIGlmIChlKSB7XG5cdCAgICAgIHNlbGYuaW5TdGF0ZS5jbGljayA9ICFzZWxmLmluU3RhdGUuY2xpY2tcblx0ICAgICAgaWYgKHNlbGYuaXNJblN0YXRlVHJ1ZSgpKSBzZWxmLmVudGVyKHNlbGYpXG5cdCAgICAgIGVsc2Ugc2VsZi5sZWF2ZShzZWxmKVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgc2VsZi50aXAoKS5oYXNDbGFzcygnaW4nKSA/IHNlbGYubGVhdmUoc2VsZikgOiBzZWxmLmVudGVyKHNlbGYpXG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBUb29sdGlwLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIHRoYXQgPSB0aGlzXG5cdCAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lb3V0KVxuXHQgICAgdGhpcy5oaWRlKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdGhhdC4kZWxlbWVudC5vZmYoJy4nICsgdGhhdC50eXBlKS5yZW1vdmVEYXRhKCdicy4nICsgdGhhdC50eXBlKVxuXHQgICAgICBpZiAodGhhdC4kdGlwKSB7XG5cdCAgICAgICAgdGhhdC4kdGlwLmRldGFjaCgpXG5cdCAgICAgIH1cblx0ICAgICAgdGhhdC4kdGlwID0gbnVsbFxuXHQgICAgICB0aGF0LiRhcnJvdyA9IG51bGxcblx0ICAgICAgdGhhdC4kdmlld3BvcnQgPSBudWxsXG5cdCAgICAgIHRoYXQuJGVsZW1lbnQgPSBudWxsXG5cdCAgICB9KVxuXHQgIH1cblx0XG5cdFxuXHQgIC8vIFRPT0xUSVAgUExVR0lOIERFRklOSVRJT05cblx0ICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09XG5cdFxuXHQgIGZ1bmN0aW9uIFBsdWdpbihvcHRpb24pIHtcblx0ICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xuXHQgICAgICB2YXIgJHRoaXMgICA9ICQodGhpcylcblx0ICAgICAgdmFyIGRhdGEgICAgPSAkdGhpcy5kYXRhKCdicy50b29sdGlwJylcblx0ICAgICAgdmFyIG9wdGlvbnMgPSB0eXBlb2Ygb3B0aW9uID09ICdvYmplY3QnICYmIG9wdGlvblxuXHRcblx0ICAgICAgaWYgKCFkYXRhICYmIC9kZXN0cm95fGhpZGUvLnRlc3Qob3B0aW9uKSkgcmV0dXJuXG5cdCAgICAgIGlmICghZGF0YSkgJHRoaXMuZGF0YSgnYnMudG9vbHRpcCcsIChkYXRhID0gbmV3IFRvb2x0aXAodGhpcywgb3B0aW9ucykpKVxuXHQgICAgICBpZiAodHlwZW9mIG9wdGlvbiA9PSAnc3RyaW5nJykgZGF0YVtvcHRpb25dKClcblx0ICAgIH0pXG5cdCAgfVxuXHRcblx0ICB2YXIgb2xkID0gJC5mbi50b29sdGlwXG5cdFxuXHQgICQuZm4udG9vbHRpcCAgICAgICAgICAgICA9IFBsdWdpblxuXHQgICQuZm4udG9vbHRpcC5Db25zdHJ1Y3RvciA9IFRvb2x0aXBcblx0XG5cdFxuXHQgIC8vIFRPT0xUSVAgTk8gQ09ORkxJQ1Rcblx0ICAvLyA9PT09PT09PT09PT09PT09PT09XG5cdFxuXHQgICQuZm4udG9vbHRpcC5ub0NvbmZsaWN0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgJC5mbi50b29sdGlwID0gb2xkXG5cdCAgICByZXR1cm4gdGhpc1xuXHQgIH1cblx0XG5cdH0oalF1ZXJ5KTtcblx0XG5cdC8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHQgKiBCb290c3RyYXA6IHBvcG92ZXIuanMgdjMuMy43XG5cdCAqIGh0dHA6Ly9nZXRib290c3RyYXAuY29tL2phdmFzY3JpcHQvI3BvcG92ZXJzXG5cdCAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHQgKiBDb3B5cmlnaHQgMjAxMS0yMDE2IFR3aXR0ZXIsIEluYy5cblx0ICogTGljZW5zZWQgdW5kZXIgTUlUIChodHRwczovL2dpdGh1Yi5jb20vdHdicy9ib290c3RyYXAvYmxvYi9tYXN0ZXIvTElDRU5TRSlcblx0ICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXG5cdFxuXHRcblx0K2Z1bmN0aW9uICgkKSB7XG5cdCAgJ3VzZSBzdHJpY3QnO1xuXHRcblx0ICAvLyBQT1BPVkVSIFBVQkxJQyBDTEFTUyBERUZJTklUSU9OXG5cdCAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHRcblx0ICB2YXIgUG9wb3ZlciA9IGZ1bmN0aW9uIChlbGVtZW50LCBvcHRpb25zKSB7XG5cdCAgICB0aGlzLmluaXQoJ3BvcG92ZXInLCBlbGVtZW50LCBvcHRpb25zKVxuXHQgIH1cblx0XG5cdCAgaWYgKCEkLmZuLnRvb2x0aXApIHRocm93IG5ldyBFcnJvcignUG9wb3ZlciByZXF1aXJlcyB0b29sdGlwLmpzJylcblx0XG5cdCAgUG9wb3Zlci5WRVJTSU9OICA9ICczLjMuNydcblx0XG5cdCAgUG9wb3Zlci5ERUZBVUxUUyA9ICQuZXh0ZW5kKHt9LCAkLmZuLnRvb2x0aXAuQ29uc3RydWN0b3IuREVGQVVMVFMsIHtcblx0ICAgIHBsYWNlbWVudDogJ3JpZ2h0Jyxcblx0ICAgIHRyaWdnZXI6ICdjbGljaycsXG5cdCAgICBjb250ZW50OiAnJyxcblx0ICAgIHRlbXBsYXRlOiAnPGRpdiBjbGFzcz1cInBvcG92ZXJcIiByb2xlPVwidG9vbHRpcFwiPjxkaXYgY2xhc3M9XCJhcnJvd1wiPjwvZGl2PjxoMyBjbGFzcz1cInBvcG92ZXItdGl0bGVcIj48L2gzPjxkaXYgY2xhc3M9XCJwb3BvdmVyLWNvbnRlbnRcIj48L2Rpdj48L2Rpdj4nXG5cdCAgfSlcblx0XG5cdFxuXHQgIC8vIE5PVEU6IFBPUE9WRVIgRVhURU5EUyB0b29sdGlwLmpzXG5cdCAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0XG5cdCAgUG9wb3Zlci5wcm90b3R5cGUgPSAkLmV4dGVuZCh7fSwgJC5mbi50b29sdGlwLkNvbnN0cnVjdG9yLnByb3RvdHlwZSlcblx0XG5cdCAgUG9wb3Zlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBQb3BvdmVyXG5cdFxuXHQgIFBvcG92ZXIucHJvdG90eXBlLmdldERlZmF1bHRzID0gZnVuY3Rpb24gKCkge1xuXHQgICAgcmV0dXJuIFBvcG92ZXIuREVGQVVMVFNcblx0ICB9XG5cdFxuXHQgIFBvcG92ZXIucHJvdG90eXBlLnNldENvbnRlbnQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICB2YXIgJHRpcCAgICA9IHRoaXMudGlwKClcblx0ICAgIHZhciB0aXRsZSAgID0gdGhpcy5nZXRUaXRsZSgpXG5cdCAgICB2YXIgY29udGVudCA9IHRoaXMuZ2V0Q29udGVudCgpXG5cdFxuXHQgICAgJHRpcC5maW5kKCcucG9wb3Zlci10aXRsZScpW3RoaXMub3B0aW9ucy5odG1sID8gJ2h0bWwnIDogJ3RleHQnXSh0aXRsZSlcblx0ICAgICR0aXAuZmluZCgnLnBvcG92ZXItY29udGVudCcpLmNoaWxkcmVuKCkuZGV0YWNoKCkuZW5kKClbIC8vIHdlIHVzZSBhcHBlbmQgZm9yIGh0bWwgb2JqZWN0cyB0byBtYWludGFpbiBqcyBldmVudHNcblx0ICAgICAgdGhpcy5vcHRpb25zLmh0bWwgPyAodHlwZW9mIGNvbnRlbnQgPT0gJ3N0cmluZycgPyAnaHRtbCcgOiAnYXBwZW5kJykgOiAndGV4dCdcblx0ICAgIF0oY29udGVudClcblx0XG5cdCAgICAkdGlwLnJlbW92ZUNsYXNzKCdmYWRlIHRvcCBib3R0b20gbGVmdCByaWdodCBpbicpXG5cdFxuXHQgICAgLy8gSUU4IGRvZXNuJ3QgYWNjZXB0IGhpZGluZyB2aWEgdGhlIGA6ZW1wdHlgIHBzZXVkbyBzZWxlY3Rvciwgd2UgaGF2ZSB0byBkb1xuXHQgICAgLy8gdGhpcyBtYW51YWxseSBieSBjaGVja2luZyB0aGUgY29udGVudHMuXG5cdCAgICBpZiAoISR0aXAuZmluZCgnLnBvcG92ZXItdGl0bGUnKS5odG1sKCkpICR0aXAuZmluZCgnLnBvcG92ZXItdGl0bGUnKS5oaWRlKClcblx0ICB9XG5cdFxuXHQgIFBvcG92ZXIucHJvdG90eXBlLmhhc0NvbnRlbnQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICByZXR1cm4gdGhpcy5nZXRUaXRsZSgpIHx8IHRoaXMuZ2V0Q29udGVudCgpXG5cdCAgfVxuXHRcblx0ICBQb3BvdmVyLnByb3RvdHlwZS5nZXRDb250ZW50ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyICRlID0gdGhpcy4kZWxlbWVudFxuXHQgICAgdmFyIG8gID0gdGhpcy5vcHRpb25zXG5cdFxuXHQgICAgcmV0dXJuICRlLmF0dHIoJ2RhdGEtY29udGVudCcpXG5cdCAgICAgIHx8ICh0eXBlb2Ygby5jb250ZW50ID09ICdmdW5jdGlvbicgP1xuXHQgICAgICAgICAgICBvLmNvbnRlbnQuY2FsbCgkZVswXSkgOlxuXHQgICAgICAgICAgICBvLmNvbnRlbnQpXG5cdCAgfVxuXHRcblx0ICBQb3BvdmVyLnByb3RvdHlwZS5hcnJvdyA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHJldHVybiAodGhpcy4kYXJyb3cgPSB0aGlzLiRhcnJvdyB8fCB0aGlzLnRpcCgpLmZpbmQoJy5hcnJvdycpKVxuXHQgIH1cblx0XG5cdFxuXHQgIC8vIFBPUE9WRVIgUExVR0lOIERFRklOSVRJT05cblx0ICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09XG5cdFxuXHQgIGZ1bmN0aW9uIFBsdWdpbihvcHRpb24pIHtcblx0ICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xuXHQgICAgICB2YXIgJHRoaXMgICA9ICQodGhpcylcblx0ICAgICAgdmFyIGRhdGEgICAgPSAkdGhpcy5kYXRhKCdicy5wb3BvdmVyJylcblx0ICAgICAgdmFyIG9wdGlvbnMgPSB0eXBlb2Ygb3B0aW9uID09ICdvYmplY3QnICYmIG9wdGlvblxuXHRcblx0ICAgICAgaWYgKCFkYXRhICYmIC9kZXN0cm95fGhpZGUvLnRlc3Qob3B0aW9uKSkgcmV0dXJuXG5cdCAgICAgIGlmICghZGF0YSkgJHRoaXMuZGF0YSgnYnMucG9wb3ZlcicsIChkYXRhID0gbmV3IFBvcG92ZXIodGhpcywgb3B0aW9ucykpKVxuXHQgICAgICBpZiAodHlwZW9mIG9wdGlvbiA9PSAnc3RyaW5nJykgZGF0YVtvcHRpb25dKClcblx0ICAgIH0pXG5cdCAgfVxuXHRcblx0ICB2YXIgb2xkID0gJC5mbi5wb3BvdmVyXG5cdFxuXHQgICQuZm4ucG9wb3ZlciAgICAgICAgICAgICA9IFBsdWdpblxuXHQgICQuZm4ucG9wb3Zlci5Db25zdHJ1Y3RvciA9IFBvcG92ZXJcblx0XG5cdFxuXHQgIC8vIFBPUE9WRVIgTk8gQ09ORkxJQ1Rcblx0ICAvLyA9PT09PT09PT09PT09PT09PT09XG5cdFxuXHQgICQuZm4ucG9wb3Zlci5ub0NvbmZsaWN0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgJC5mbi5wb3BvdmVyID0gb2xkXG5cdCAgICByZXR1cm4gdGhpc1xuXHQgIH1cblx0XG5cdH0oalF1ZXJ5KTtcblx0XG5cdC8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHQgKiBCb290c3RyYXA6IHNjcm9sbHNweS5qcyB2My4zLjdcblx0ICogaHR0cDovL2dldGJvb3RzdHJhcC5jb20vamF2YXNjcmlwdC8jc2Nyb2xsc3B5XG5cdCAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHQgKiBDb3B5cmlnaHQgMjAxMS0yMDE2IFR3aXR0ZXIsIEluYy5cblx0ICogTGljZW5zZWQgdW5kZXIgTUlUIChodHRwczovL2dpdGh1Yi5jb20vdHdicy9ib290c3RyYXAvYmxvYi9tYXN0ZXIvTElDRU5TRSlcblx0ICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXG5cdFxuXHRcblx0K2Z1bmN0aW9uICgkKSB7XG5cdCAgJ3VzZSBzdHJpY3QnO1xuXHRcblx0ICAvLyBTQ1JPTExTUFkgQ0xBU1MgREVGSU5JVElPTlxuXHQgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdFxuXHQgIGZ1bmN0aW9uIFNjcm9sbFNweShlbGVtZW50LCBvcHRpb25zKSB7XG5cdCAgICB0aGlzLiRib2R5ICAgICAgICAgID0gJChkb2N1bWVudC5ib2R5KVxuXHQgICAgdGhpcy4kc2Nyb2xsRWxlbWVudCA9ICQoZWxlbWVudCkuaXMoZG9jdW1lbnQuYm9keSkgPyAkKHdpbmRvdykgOiAkKGVsZW1lbnQpXG5cdCAgICB0aGlzLm9wdGlvbnMgICAgICAgID0gJC5leHRlbmQoe30sIFNjcm9sbFNweS5ERUZBVUxUUywgb3B0aW9ucylcblx0ICAgIHRoaXMuc2VsZWN0b3IgICAgICAgPSAodGhpcy5vcHRpb25zLnRhcmdldCB8fCAnJykgKyAnIC5uYXYgbGkgPiBhJ1xuXHQgICAgdGhpcy5vZmZzZXRzICAgICAgICA9IFtdXG5cdCAgICB0aGlzLnRhcmdldHMgICAgICAgID0gW11cblx0ICAgIHRoaXMuYWN0aXZlVGFyZ2V0ICAgPSBudWxsXG5cdCAgICB0aGlzLnNjcm9sbEhlaWdodCAgID0gMFxuXHRcblx0ICAgIHRoaXMuJHNjcm9sbEVsZW1lbnQub24oJ3Njcm9sbC5icy5zY3JvbGxzcHknLCAkLnByb3h5KHRoaXMucHJvY2VzcywgdGhpcykpXG5cdCAgICB0aGlzLnJlZnJlc2goKVxuXHQgICAgdGhpcy5wcm9jZXNzKClcblx0ICB9XG5cdFxuXHQgIFNjcm9sbFNweS5WRVJTSU9OICA9ICczLjMuNydcblx0XG5cdCAgU2Nyb2xsU3B5LkRFRkFVTFRTID0ge1xuXHQgICAgb2Zmc2V0OiAxMFxuXHQgIH1cblx0XG5cdCAgU2Nyb2xsU3B5LnByb3RvdHlwZS5nZXRTY3JvbGxIZWlnaHQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICByZXR1cm4gdGhpcy4kc2Nyb2xsRWxlbWVudFswXS5zY3JvbGxIZWlnaHQgfHwgTWF0aC5tYXgodGhpcy4kYm9keVswXS5zY3JvbGxIZWlnaHQsIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxIZWlnaHQpXG5cdCAgfVxuXHRcblx0ICBTY3JvbGxTcHkucHJvdG90eXBlLnJlZnJlc2ggPSBmdW5jdGlvbiAoKSB7XG5cdCAgICB2YXIgdGhhdCAgICAgICAgICA9IHRoaXNcblx0ICAgIHZhciBvZmZzZXRNZXRob2QgID0gJ29mZnNldCdcblx0ICAgIHZhciBvZmZzZXRCYXNlICAgID0gMFxuXHRcblx0ICAgIHRoaXMub2Zmc2V0cyAgICAgID0gW11cblx0ICAgIHRoaXMudGFyZ2V0cyAgICAgID0gW11cblx0ICAgIHRoaXMuc2Nyb2xsSGVpZ2h0ID0gdGhpcy5nZXRTY3JvbGxIZWlnaHQoKVxuXHRcblx0ICAgIGlmICghJC5pc1dpbmRvdyh0aGlzLiRzY3JvbGxFbGVtZW50WzBdKSkge1xuXHQgICAgICBvZmZzZXRNZXRob2QgPSAncG9zaXRpb24nXG5cdCAgICAgIG9mZnNldEJhc2UgICA9IHRoaXMuJHNjcm9sbEVsZW1lbnQuc2Nyb2xsVG9wKClcblx0ICAgIH1cblx0XG5cdCAgICB0aGlzLiRib2R5XG5cdCAgICAgIC5maW5kKHRoaXMuc2VsZWN0b3IpXG5cdCAgICAgIC5tYXAoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciAkZWwgICA9ICQodGhpcylcblx0ICAgICAgICB2YXIgaHJlZiAgPSAkZWwuZGF0YSgndGFyZ2V0JykgfHwgJGVsLmF0dHIoJ2hyZWYnKVxuXHQgICAgICAgIHZhciAkaHJlZiA9IC9eIy4vLnRlc3QoaHJlZikgJiYgJChocmVmKVxuXHRcblx0ICAgICAgICByZXR1cm4gKCRocmVmXG5cdCAgICAgICAgICAmJiAkaHJlZi5sZW5ndGhcblx0ICAgICAgICAgICYmICRocmVmLmlzKCc6dmlzaWJsZScpXG5cdCAgICAgICAgICAmJiBbWyRocmVmW29mZnNldE1ldGhvZF0oKS50b3AgKyBvZmZzZXRCYXNlLCBocmVmXV0pIHx8IG51bGxcblx0ICAgICAgfSlcblx0ICAgICAgLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsgcmV0dXJuIGFbMF0gLSBiWzBdIH0pXG5cdCAgICAgIC5lYWNoKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB0aGF0Lm9mZnNldHMucHVzaCh0aGlzWzBdKVxuXHQgICAgICAgIHRoYXQudGFyZ2V0cy5wdXNoKHRoaXNbMV0pXG5cdCAgICAgIH0pXG5cdCAgfVxuXHRcblx0ICBTY3JvbGxTcHkucHJvdG90eXBlLnByb2Nlc3MgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICB2YXIgc2Nyb2xsVG9wICAgID0gdGhpcy4kc2Nyb2xsRWxlbWVudC5zY3JvbGxUb3AoKSArIHRoaXMub3B0aW9ucy5vZmZzZXRcblx0ICAgIHZhciBzY3JvbGxIZWlnaHQgPSB0aGlzLmdldFNjcm9sbEhlaWdodCgpXG5cdCAgICB2YXIgbWF4U2Nyb2xsICAgID0gdGhpcy5vcHRpb25zLm9mZnNldCArIHNjcm9sbEhlaWdodCAtIHRoaXMuJHNjcm9sbEVsZW1lbnQuaGVpZ2h0KClcblx0ICAgIHZhciBvZmZzZXRzICAgICAgPSB0aGlzLm9mZnNldHNcblx0ICAgIHZhciB0YXJnZXRzICAgICAgPSB0aGlzLnRhcmdldHNcblx0ICAgIHZhciBhY3RpdmVUYXJnZXQgPSB0aGlzLmFjdGl2ZVRhcmdldFxuXHQgICAgdmFyIGlcblx0XG5cdCAgICBpZiAodGhpcy5zY3JvbGxIZWlnaHQgIT0gc2Nyb2xsSGVpZ2h0KSB7XG5cdCAgICAgIHRoaXMucmVmcmVzaCgpXG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKHNjcm9sbFRvcCA+PSBtYXhTY3JvbGwpIHtcblx0ICAgICAgcmV0dXJuIGFjdGl2ZVRhcmdldCAhPSAoaSA9IHRhcmdldHNbdGFyZ2V0cy5sZW5ndGggLSAxXSkgJiYgdGhpcy5hY3RpdmF0ZShpKVxuXHQgICAgfVxuXHRcblx0ICAgIGlmIChhY3RpdmVUYXJnZXQgJiYgc2Nyb2xsVG9wIDwgb2Zmc2V0c1swXSkge1xuXHQgICAgICB0aGlzLmFjdGl2ZVRhcmdldCA9IG51bGxcblx0ICAgICAgcmV0dXJuIHRoaXMuY2xlYXIoKVxuXHQgICAgfVxuXHRcblx0ICAgIGZvciAoaSA9IG9mZnNldHMubGVuZ3RoOyBpLS07KSB7XG5cdCAgICAgIGFjdGl2ZVRhcmdldCAhPSB0YXJnZXRzW2ldXG5cdCAgICAgICAgJiYgc2Nyb2xsVG9wID49IG9mZnNldHNbaV1cblx0ICAgICAgICAmJiAob2Zmc2V0c1tpICsgMV0gPT09IHVuZGVmaW5lZCB8fCBzY3JvbGxUb3AgPCBvZmZzZXRzW2kgKyAxXSlcblx0ICAgICAgICAmJiB0aGlzLmFjdGl2YXRlKHRhcmdldHNbaV0pXG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBTY3JvbGxTcHkucHJvdG90eXBlLmFjdGl2YXRlID0gZnVuY3Rpb24gKHRhcmdldCkge1xuXHQgICAgdGhpcy5hY3RpdmVUYXJnZXQgPSB0YXJnZXRcblx0XG5cdCAgICB0aGlzLmNsZWFyKClcblx0XG5cdCAgICB2YXIgc2VsZWN0b3IgPSB0aGlzLnNlbGVjdG9yICtcblx0ICAgICAgJ1tkYXRhLXRhcmdldD1cIicgKyB0YXJnZXQgKyAnXCJdLCcgK1xuXHQgICAgICB0aGlzLnNlbGVjdG9yICsgJ1tocmVmPVwiJyArIHRhcmdldCArICdcIl0nXG5cdFxuXHQgICAgdmFyIGFjdGl2ZSA9ICQoc2VsZWN0b3IpXG5cdCAgICAgIC5wYXJlbnRzKCdsaScpXG5cdCAgICAgIC5hZGRDbGFzcygnYWN0aXZlJylcblx0XG5cdCAgICBpZiAoYWN0aXZlLnBhcmVudCgnLmRyb3Bkb3duLW1lbnUnKS5sZW5ndGgpIHtcblx0ICAgICAgYWN0aXZlID0gYWN0aXZlXG5cdCAgICAgICAgLmNsb3Nlc3QoJ2xpLmRyb3Bkb3duJylcblx0ICAgICAgICAuYWRkQ2xhc3MoJ2FjdGl2ZScpXG5cdCAgICB9XG5cdFxuXHQgICAgYWN0aXZlLnRyaWdnZXIoJ2FjdGl2YXRlLmJzLnNjcm9sbHNweScpXG5cdCAgfVxuXHRcblx0ICBTY3JvbGxTcHkucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkge1xuXHQgICAgJCh0aGlzLnNlbGVjdG9yKVxuXHQgICAgICAucGFyZW50c1VudGlsKHRoaXMub3B0aW9ucy50YXJnZXQsICcuYWN0aXZlJylcblx0ICAgICAgLnJlbW92ZUNsYXNzKCdhY3RpdmUnKVxuXHQgIH1cblx0XG5cdFxuXHQgIC8vIFNDUk9MTFNQWSBQTFVHSU4gREVGSU5JVElPTlxuXHQgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHRcblx0ICBmdW5jdGlvbiBQbHVnaW4ob3B0aW9uKSB7XG5cdCAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdmFyICR0aGlzICAgPSAkKHRoaXMpXG5cdCAgICAgIHZhciBkYXRhICAgID0gJHRoaXMuZGF0YSgnYnMuc2Nyb2xsc3B5Jylcblx0ICAgICAgdmFyIG9wdGlvbnMgPSB0eXBlb2Ygb3B0aW9uID09ICdvYmplY3QnICYmIG9wdGlvblxuXHRcblx0ICAgICAgaWYgKCFkYXRhKSAkdGhpcy5kYXRhKCdicy5zY3JvbGxzcHknLCAoZGF0YSA9IG5ldyBTY3JvbGxTcHkodGhpcywgb3B0aW9ucykpKVxuXHQgICAgICBpZiAodHlwZW9mIG9wdGlvbiA9PSAnc3RyaW5nJykgZGF0YVtvcHRpb25dKClcblx0ICAgIH0pXG5cdCAgfVxuXHRcblx0ICB2YXIgb2xkID0gJC5mbi5zY3JvbGxzcHlcblx0XG5cdCAgJC5mbi5zY3JvbGxzcHkgICAgICAgICAgICAgPSBQbHVnaW5cblx0ICAkLmZuLnNjcm9sbHNweS5Db25zdHJ1Y3RvciA9IFNjcm9sbFNweVxuXHRcblx0XG5cdCAgLy8gU0NST0xMU1BZIE5PIENPTkZMSUNUXG5cdCAgLy8gPT09PT09PT09PT09PT09PT09PT09XG5cdFxuXHQgICQuZm4uc2Nyb2xsc3B5Lm5vQ29uZmxpY3QgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAkLmZuLnNjcm9sbHNweSA9IG9sZFxuXHQgICAgcmV0dXJuIHRoaXNcblx0ICB9XG5cdFxuXHRcblx0ICAvLyBTQ1JPTExTUFkgREFUQS1BUElcblx0ICAvLyA9PT09PT09PT09PT09PT09PT1cblx0XG5cdCAgJCh3aW5kb3cpLm9uKCdsb2FkLmJzLnNjcm9sbHNweS5kYXRhLWFwaScsIGZ1bmN0aW9uICgpIHtcblx0ICAgICQoJ1tkYXRhLXNweT1cInNjcm9sbFwiXScpLmVhY2goZnVuY3Rpb24gKCkge1xuXHQgICAgICB2YXIgJHNweSA9ICQodGhpcylcblx0ICAgICAgUGx1Z2luLmNhbGwoJHNweSwgJHNweS5kYXRhKCkpXG5cdCAgICB9KVxuXHQgIH0pXG5cdFxuXHR9KGpRdWVyeSk7XG5cdFxuXHQvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0ICogQm9vdHN0cmFwOiB0YWIuanMgdjMuMy43XG5cdCAqIGh0dHA6Ly9nZXRib290c3RyYXAuY29tL2phdmFzY3JpcHQvI3RhYnNcblx0ICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdCAqIENvcHlyaWdodCAyMDExLTIwMTYgVHdpdHRlciwgSW5jLlxuXHQgKiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ibG9iL21hc3Rlci9MSUNFTlNFKVxuXHQgKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cblx0XG5cdFxuXHQrZnVuY3Rpb24gKCQpIHtcblx0ICAndXNlIHN0cmljdCc7XG5cdFxuXHQgIC8vIFRBQiBDTEFTUyBERUZJTklUSU9OXG5cdCAgLy8gPT09PT09PT09PT09PT09PT09PT1cblx0XG5cdCAgdmFyIFRhYiA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG5cdCAgICAvLyBqc2NzOmRpc2FibGUgcmVxdWlyZURvbGxhckJlZm9yZWpRdWVyeUFzc2lnbm1lbnRcblx0ICAgIHRoaXMuZWxlbWVudCA9ICQoZWxlbWVudClcblx0ICAgIC8vIGpzY3M6ZW5hYmxlIHJlcXVpcmVEb2xsYXJCZWZvcmVqUXVlcnlBc3NpZ25tZW50XG5cdCAgfVxuXHRcblx0ICBUYWIuVkVSU0lPTiA9ICczLjMuNydcblx0XG5cdCAgVGFiLlRSQU5TSVRJT05fRFVSQVRJT04gPSAxNTBcblx0XG5cdCAgVGFiLnByb3RvdHlwZS5zaG93ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyICR0aGlzICAgID0gdGhpcy5lbGVtZW50XG5cdCAgICB2YXIgJHVsICAgICAgPSAkdGhpcy5jbG9zZXN0KCd1bDpub3QoLmRyb3Bkb3duLW1lbnUpJylcblx0ICAgIHZhciBzZWxlY3RvciA9ICR0aGlzLmRhdGEoJ3RhcmdldCcpXG5cdFxuXHQgICAgaWYgKCFzZWxlY3Rvcikge1xuXHQgICAgICBzZWxlY3RvciA9ICR0aGlzLmF0dHIoJ2hyZWYnKVxuXHQgICAgICBzZWxlY3RvciA9IHNlbGVjdG9yICYmIHNlbGVjdG9yLnJlcGxhY2UoLy4qKD89I1teXFxzXSokKS8sICcnKSAvLyBzdHJpcCBmb3IgaWU3XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKCR0aGlzLnBhcmVudCgnbGknKS5oYXNDbGFzcygnYWN0aXZlJykpIHJldHVyblxuXHRcblx0ICAgIHZhciAkcHJldmlvdXMgPSAkdWwuZmluZCgnLmFjdGl2ZTpsYXN0IGEnKVxuXHQgICAgdmFyIGhpZGVFdmVudCA9ICQuRXZlbnQoJ2hpZGUuYnMudGFiJywge1xuXHQgICAgICByZWxhdGVkVGFyZ2V0OiAkdGhpc1swXVxuXHQgICAgfSlcblx0ICAgIHZhciBzaG93RXZlbnQgPSAkLkV2ZW50KCdzaG93LmJzLnRhYicsIHtcblx0ICAgICAgcmVsYXRlZFRhcmdldDogJHByZXZpb3VzWzBdXG5cdCAgICB9KVxuXHRcblx0ICAgICRwcmV2aW91cy50cmlnZ2VyKGhpZGVFdmVudClcblx0ICAgICR0aGlzLnRyaWdnZXIoc2hvd0V2ZW50KVxuXHRcblx0ICAgIGlmIChzaG93RXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkgfHwgaGlkZUV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpKSByZXR1cm5cblx0XG5cdCAgICB2YXIgJHRhcmdldCA9ICQoc2VsZWN0b3IpXG5cdFxuXHQgICAgdGhpcy5hY3RpdmF0ZSgkdGhpcy5jbG9zZXN0KCdsaScpLCAkdWwpXG5cdCAgICB0aGlzLmFjdGl2YXRlKCR0YXJnZXQsICR0YXJnZXQucGFyZW50KCksIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgJHByZXZpb3VzLnRyaWdnZXIoe1xuXHQgICAgICAgIHR5cGU6ICdoaWRkZW4uYnMudGFiJyxcblx0ICAgICAgICByZWxhdGVkVGFyZ2V0OiAkdGhpc1swXVxuXHQgICAgICB9KVxuXHQgICAgICAkdGhpcy50cmlnZ2VyKHtcblx0ICAgICAgICB0eXBlOiAnc2hvd24uYnMudGFiJyxcblx0ICAgICAgICByZWxhdGVkVGFyZ2V0OiAkcHJldmlvdXNbMF1cblx0ICAgICAgfSlcblx0ICAgIH0pXG5cdCAgfVxuXHRcblx0ICBUYWIucHJvdG90eXBlLmFjdGl2YXRlID0gZnVuY3Rpb24gKGVsZW1lbnQsIGNvbnRhaW5lciwgY2FsbGJhY2spIHtcblx0ICAgIHZhciAkYWN0aXZlICAgID0gY29udGFpbmVyLmZpbmQoJz4gLmFjdGl2ZScpXG5cdCAgICB2YXIgdHJhbnNpdGlvbiA9IGNhbGxiYWNrXG5cdCAgICAgICYmICQuc3VwcG9ydC50cmFuc2l0aW9uXG5cdCAgICAgICYmICgkYWN0aXZlLmxlbmd0aCAmJiAkYWN0aXZlLmhhc0NsYXNzKCdmYWRlJykgfHwgISFjb250YWluZXIuZmluZCgnPiAuZmFkZScpLmxlbmd0aClcblx0XG5cdCAgICBmdW5jdGlvbiBuZXh0KCkge1xuXHQgICAgICAkYWN0aXZlXG5cdCAgICAgICAgLnJlbW92ZUNsYXNzKCdhY3RpdmUnKVxuXHQgICAgICAgIC5maW5kKCc+IC5kcm9wZG93bi1tZW51ID4gLmFjdGl2ZScpXG5cdCAgICAgICAgICAucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpXG5cdCAgICAgICAgLmVuZCgpXG5cdCAgICAgICAgLmZpbmQoJ1tkYXRhLXRvZ2dsZT1cInRhYlwiXScpXG5cdCAgICAgICAgICAuYXR0cignYXJpYS1leHBhbmRlZCcsIGZhbHNlKVxuXHRcblx0ICAgICAgZWxlbWVudFxuXHQgICAgICAgIC5hZGRDbGFzcygnYWN0aXZlJylcblx0ICAgICAgICAuZmluZCgnW2RhdGEtdG9nZ2xlPVwidGFiXCJdJylcblx0ICAgICAgICAgIC5hdHRyKCdhcmlhLWV4cGFuZGVkJywgdHJ1ZSlcblx0XG5cdCAgICAgIGlmICh0cmFuc2l0aW9uKSB7XG5cdCAgICAgICAgZWxlbWVudFswXS5vZmZzZXRXaWR0aCAvLyByZWZsb3cgZm9yIHRyYW5zaXRpb25cblx0ICAgICAgICBlbGVtZW50LmFkZENsYXNzKCdpbicpXG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgZWxlbWVudC5yZW1vdmVDbGFzcygnZmFkZScpXG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmIChlbGVtZW50LnBhcmVudCgnLmRyb3Bkb3duLW1lbnUnKS5sZW5ndGgpIHtcblx0ICAgICAgICBlbGVtZW50XG5cdCAgICAgICAgICAuY2xvc2VzdCgnbGkuZHJvcGRvd24nKVxuXHQgICAgICAgICAgICAuYWRkQ2xhc3MoJ2FjdGl2ZScpXG5cdCAgICAgICAgICAuZW5kKClcblx0ICAgICAgICAgIC5maW5kKCdbZGF0YS10b2dnbGU9XCJ0YWJcIl0nKVxuXHQgICAgICAgICAgICAuYXR0cignYXJpYS1leHBhbmRlZCcsIHRydWUpXG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKClcblx0ICAgIH1cblx0XG5cdCAgICAkYWN0aXZlLmxlbmd0aCAmJiB0cmFuc2l0aW9uID9cblx0ICAgICAgJGFjdGl2ZVxuXHQgICAgICAgIC5vbmUoJ2JzVHJhbnNpdGlvbkVuZCcsIG5leHQpXG5cdCAgICAgICAgLmVtdWxhdGVUcmFuc2l0aW9uRW5kKFRhYi5UUkFOU0lUSU9OX0RVUkFUSU9OKSA6XG5cdCAgICAgIG5leHQoKVxuXHRcblx0ICAgICRhY3RpdmUucmVtb3ZlQ2xhc3MoJ2luJylcblx0ICB9XG5cdFxuXHRcblx0ICAvLyBUQUIgUExVR0lOIERFRklOSVRJT05cblx0ICAvLyA9PT09PT09PT09PT09PT09PT09PT1cblx0XG5cdCAgZnVuY3Rpb24gUGx1Z2luKG9wdGlvbikge1xuXHQgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHZhciAkdGhpcyA9ICQodGhpcylcblx0ICAgICAgdmFyIGRhdGEgID0gJHRoaXMuZGF0YSgnYnMudGFiJylcblx0XG5cdCAgICAgIGlmICghZGF0YSkgJHRoaXMuZGF0YSgnYnMudGFiJywgKGRhdGEgPSBuZXcgVGFiKHRoaXMpKSlcblx0ICAgICAgaWYgKHR5cGVvZiBvcHRpb24gPT0gJ3N0cmluZycpIGRhdGFbb3B0aW9uXSgpXG5cdCAgICB9KVxuXHQgIH1cblx0XG5cdCAgdmFyIG9sZCA9ICQuZm4udGFiXG5cdFxuXHQgICQuZm4udGFiICAgICAgICAgICAgID0gUGx1Z2luXG5cdCAgJC5mbi50YWIuQ29uc3RydWN0b3IgPSBUYWJcblx0XG5cdFxuXHQgIC8vIFRBQiBOTyBDT05GTElDVFxuXHQgIC8vID09PT09PT09PT09PT09PVxuXHRcblx0ICAkLmZuLnRhYi5ub0NvbmZsaWN0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgJC5mbi50YWIgPSBvbGRcblx0ICAgIHJldHVybiB0aGlzXG5cdCAgfVxuXHRcblx0XG5cdCAgLy8gVEFCIERBVEEtQVBJXG5cdCAgLy8gPT09PT09PT09PT09XG5cdFxuXHQgIHZhciBjbGlja0hhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuXHQgICAgZS5wcmV2ZW50RGVmYXVsdCgpXG5cdCAgICBQbHVnaW4uY2FsbCgkKHRoaXMpLCAnc2hvdycpXG5cdCAgfVxuXHRcblx0ICAkKGRvY3VtZW50KVxuXHQgICAgLm9uKCdjbGljay5icy50YWIuZGF0YS1hcGknLCAnW2RhdGEtdG9nZ2xlPVwidGFiXCJdJywgY2xpY2tIYW5kbGVyKVxuXHQgICAgLm9uKCdjbGljay5icy50YWIuZGF0YS1hcGknLCAnW2RhdGEtdG9nZ2xlPVwicGlsbFwiXScsIGNsaWNrSGFuZGxlcilcblx0XG5cdH0oalF1ZXJ5KTtcblx0XG5cdC8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHQgKiBCb290c3RyYXA6IGFmZml4LmpzIHYzLjMuN1xuXHQgKiBodHRwOi8vZ2V0Ym9vdHN0cmFwLmNvbS9qYXZhc2NyaXB0LyNhZmZpeFxuXHQgKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0ICogQ29weXJpZ2h0IDIwMTEtMjAxNiBUd2l0dGVyLCBJbmMuXG5cdCAqIExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2Jsb2IvbWFzdGVyL0xJQ0VOU0UpXG5cdCAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xuXHRcblx0XG5cdCtmdW5jdGlvbiAoJCkge1xuXHQgICd1c2Ugc3RyaWN0Jztcblx0XG5cdCAgLy8gQUZGSVggQ0xBU1MgREVGSU5JVElPTlxuXHQgIC8vID09PT09PT09PT09PT09PT09PT09PT1cblx0XG5cdCAgdmFyIEFmZml4ID0gZnVuY3Rpb24gKGVsZW1lbnQsIG9wdGlvbnMpIHtcblx0ICAgIHRoaXMub3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCBBZmZpeC5ERUZBVUxUUywgb3B0aW9ucylcblx0XG5cdCAgICB0aGlzLiR0YXJnZXQgPSAkKHRoaXMub3B0aW9ucy50YXJnZXQpXG5cdCAgICAgIC5vbignc2Nyb2xsLmJzLmFmZml4LmRhdGEtYXBpJywgJC5wcm94eSh0aGlzLmNoZWNrUG9zaXRpb24sIHRoaXMpKVxuXHQgICAgICAub24oJ2NsaWNrLmJzLmFmZml4LmRhdGEtYXBpJywgICQucHJveHkodGhpcy5jaGVja1Bvc2l0aW9uV2l0aEV2ZW50TG9vcCwgdGhpcykpXG5cdFxuXHQgICAgdGhpcy4kZWxlbWVudCAgICAgPSAkKGVsZW1lbnQpXG5cdCAgICB0aGlzLmFmZml4ZWQgICAgICA9IG51bGxcblx0ICAgIHRoaXMudW5waW4gICAgICAgID0gbnVsbFxuXHQgICAgdGhpcy5waW5uZWRPZmZzZXQgPSBudWxsXG5cdFxuXHQgICAgdGhpcy5jaGVja1Bvc2l0aW9uKClcblx0ICB9XG5cdFxuXHQgIEFmZml4LlZFUlNJT04gID0gJzMuMy43J1xuXHRcblx0ICBBZmZpeC5SRVNFVCAgICA9ICdhZmZpeCBhZmZpeC10b3AgYWZmaXgtYm90dG9tJ1xuXHRcblx0ICBBZmZpeC5ERUZBVUxUUyA9IHtcblx0ICAgIG9mZnNldDogMCxcblx0ICAgIHRhcmdldDogd2luZG93XG5cdCAgfVxuXHRcblx0ICBBZmZpeC5wcm90b3R5cGUuZ2V0U3RhdGUgPSBmdW5jdGlvbiAoc2Nyb2xsSGVpZ2h0LCBoZWlnaHQsIG9mZnNldFRvcCwgb2Zmc2V0Qm90dG9tKSB7XG5cdCAgICB2YXIgc2Nyb2xsVG9wICAgID0gdGhpcy4kdGFyZ2V0LnNjcm9sbFRvcCgpXG5cdCAgICB2YXIgcG9zaXRpb24gICAgID0gdGhpcy4kZWxlbWVudC5vZmZzZXQoKVxuXHQgICAgdmFyIHRhcmdldEhlaWdodCA9IHRoaXMuJHRhcmdldC5oZWlnaHQoKVxuXHRcblx0ICAgIGlmIChvZmZzZXRUb3AgIT0gbnVsbCAmJiB0aGlzLmFmZml4ZWQgPT0gJ3RvcCcpIHJldHVybiBzY3JvbGxUb3AgPCBvZmZzZXRUb3AgPyAndG9wJyA6IGZhbHNlXG5cdFxuXHQgICAgaWYgKHRoaXMuYWZmaXhlZCA9PSAnYm90dG9tJykge1xuXHQgICAgICBpZiAob2Zmc2V0VG9wICE9IG51bGwpIHJldHVybiAoc2Nyb2xsVG9wICsgdGhpcy51bnBpbiA8PSBwb3NpdGlvbi50b3ApID8gZmFsc2UgOiAnYm90dG9tJ1xuXHQgICAgICByZXR1cm4gKHNjcm9sbFRvcCArIHRhcmdldEhlaWdodCA8PSBzY3JvbGxIZWlnaHQgLSBvZmZzZXRCb3R0b20pID8gZmFsc2UgOiAnYm90dG9tJ1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBpbml0aWFsaXppbmcgICA9IHRoaXMuYWZmaXhlZCA9PSBudWxsXG5cdCAgICB2YXIgY29sbGlkZXJUb3AgICAgPSBpbml0aWFsaXppbmcgPyBzY3JvbGxUb3AgOiBwb3NpdGlvbi50b3Bcblx0ICAgIHZhciBjb2xsaWRlckhlaWdodCA9IGluaXRpYWxpemluZyA/IHRhcmdldEhlaWdodCA6IGhlaWdodFxuXHRcblx0ICAgIGlmIChvZmZzZXRUb3AgIT0gbnVsbCAmJiBzY3JvbGxUb3AgPD0gb2Zmc2V0VG9wKSByZXR1cm4gJ3RvcCdcblx0ICAgIGlmIChvZmZzZXRCb3R0b20gIT0gbnVsbCAmJiAoY29sbGlkZXJUb3AgKyBjb2xsaWRlckhlaWdodCA+PSBzY3JvbGxIZWlnaHQgLSBvZmZzZXRCb3R0b20pKSByZXR1cm4gJ2JvdHRvbSdcblx0XG5cdCAgICByZXR1cm4gZmFsc2Vcblx0ICB9XG5cdFxuXHQgIEFmZml4LnByb3RvdHlwZS5nZXRQaW5uZWRPZmZzZXQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICBpZiAodGhpcy5waW5uZWRPZmZzZXQpIHJldHVybiB0aGlzLnBpbm5lZE9mZnNldFxuXHQgICAgdGhpcy4kZWxlbWVudC5yZW1vdmVDbGFzcyhBZmZpeC5SRVNFVCkuYWRkQ2xhc3MoJ2FmZml4Jylcblx0ICAgIHZhciBzY3JvbGxUb3AgPSB0aGlzLiR0YXJnZXQuc2Nyb2xsVG9wKClcblx0ICAgIHZhciBwb3NpdGlvbiAgPSB0aGlzLiRlbGVtZW50Lm9mZnNldCgpXG5cdCAgICByZXR1cm4gKHRoaXMucGlubmVkT2Zmc2V0ID0gcG9zaXRpb24udG9wIC0gc2Nyb2xsVG9wKVxuXHQgIH1cblx0XG5cdCAgQWZmaXgucHJvdG90eXBlLmNoZWNrUG9zaXRpb25XaXRoRXZlbnRMb29wID0gZnVuY3Rpb24gKCkge1xuXHQgICAgc2V0VGltZW91dCgkLnByb3h5KHRoaXMuY2hlY2tQb3NpdGlvbiwgdGhpcyksIDEpXG5cdCAgfVxuXHRcblx0ICBBZmZpeC5wcm90b3R5cGUuY2hlY2tQb3NpdGlvbiA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIGlmICghdGhpcy4kZWxlbWVudC5pcygnOnZpc2libGUnKSkgcmV0dXJuXG5cdFxuXHQgICAgdmFyIGhlaWdodCAgICAgICA9IHRoaXMuJGVsZW1lbnQuaGVpZ2h0KClcblx0ICAgIHZhciBvZmZzZXQgICAgICAgPSB0aGlzLm9wdGlvbnMub2Zmc2V0XG5cdCAgICB2YXIgb2Zmc2V0VG9wICAgID0gb2Zmc2V0LnRvcFxuXHQgICAgdmFyIG9mZnNldEJvdHRvbSA9IG9mZnNldC5ib3R0b21cblx0ICAgIHZhciBzY3JvbGxIZWlnaHQgPSBNYXRoLm1heCgkKGRvY3VtZW50KS5oZWlnaHQoKSwgJChkb2N1bWVudC5ib2R5KS5oZWlnaHQoKSlcblx0XG5cdCAgICBpZiAodHlwZW9mIG9mZnNldCAhPSAnb2JqZWN0JykgICAgICAgICBvZmZzZXRCb3R0b20gPSBvZmZzZXRUb3AgPSBvZmZzZXRcblx0ICAgIGlmICh0eXBlb2Ygb2Zmc2V0VG9wID09ICdmdW5jdGlvbicpICAgIG9mZnNldFRvcCAgICA9IG9mZnNldC50b3AodGhpcy4kZWxlbWVudClcblx0ICAgIGlmICh0eXBlb2Ygb2Zmc2V0Qm90dG9tID09ICdmdW5jdGlvbicpIG9mZnNldEJvdHRvbSA9IG9mZnNldC5ib3R0b20odGhpcy4kZWxlbWVudClcblx0XG5cdCAgICB2YXIgYWZmaXggPSB0aGlzLmdldFN0YXRlKHNjcm9sbEhlaWdodCwgaGVpZ2h0LCBvZmZzZXRUb3AsIG9mZnNldEJvdHRvbSlcblx0XG5cdCAgICBpZiAodGhpcy5hZmZpeGVkICE9IGFmZml4KSB7XG5cdCAgICAgIGlmICh0aGlzLnVucGluICE9IG51bGwpIHRoaXMuJGVsZW1lbnQuY3NzKCd0b3AnLCAnJylcblx0XG5cdCAgICAgIHZhciBhZmZpeFR5cGUgPSAnYWZmaXgnICsgKGFmZml4ID8gJy0nICsgYWZmaXggOiAnJylcblx0ICAgICAgdmFyIGUgICAgICAgICA9ICQuRXZlbnQoYWZmaXhUeXBlICsgJy5icy5hZmZpeCcpXG5cdFxuXHQgICAgICB0aGlzLiRlbGVtZW50LnRyaWdnZXIoZSlcblx0XG5cdCAgICAgIGlmIChlLmlzRGVmYXVsdFByZXZlbnRlZCgpKSByZXR1cm5cblx0XG5cdCAgICAgIHRoaXMuYWZmaXhlZCA9IGFmZml4XG5cdCAgICAgIHRoaXMudW5waW4gPSBhZmZpeCA9PSAnYm90dG9tJyA/IHRoaXMuZ2V0UGlubmVkT2Zmc2V0KCkgOiBudWxsXG5cdFxuXHQgICAgICB0aGlzLiRlbGVtZW50XG5cdCAgICAgICAgLnJlbW92ZUNsYXNzKEFmZml4LlJFU0VUKVxuXHQgICAgICAgIC5hZGRDbGFzcyhhZmZpeFR5cGUpXG5cdCAgICAgICAgLnRyaWdnZXIoYWZmaXhUeXBlLnJlcGxhY2UoJ2FmZml4JywgJ2FmZml4ZWQnKSArICcuYnMuYWZmaXgnKVxuXHQgICAgfVxuXHRcblx0ICAgIGlmIChhZmZpeCA9PSAnYm90dG9tJykge1xuXHQgICAgICB0aGlzLiRlbGVtZW50Lm9mZnNldCh7XG5cdCAgICAgICAgdG9wOiBzY3JvbGxIZWlnaHQgLSBoZWlnaHQgLSBvZmZzZXRCb3R0b21cblx0ICAgICAgfSlcblx0ICAgIH1cblx0ICB9XG5cdFxuXHRcblx0ICAvLyBBRkZJWCBQTFVHSU4gREVGSU5JVElPTlxuXHQgIC8vID09PT09PT09PT09PT09PT09PT09PT09XG5cdFxuXHQgIGZ1bmN0aW9uIFBsdWdpbihvcHRpb24pIHtcblx0ICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xuXHQgICAgICB2YXIgJHRoaXMgICA9ICQodGhpcylcblx0ICAgICAgdmFyIGRhdGEgICAgPSAkdGhpcy5kYXRhKCdicy5hZmZpeCcpXG5cdCAgICAgIHZhciBvcHRpb25zID0gdHlwZW9mIG9wdGlvbiA9PSAnb2JqZWN0JyAmJiBvcHRpb25cblx0XG5cdCAgICAgIGlmICghZGF0YSkgJHRoaXMuZGF0YSgnYnMuYWZmaXgnLCAoZGF0YSA9IG5ldyBBZmZpeCh0aGlzLCBvcHRpb25zKSkpXG5cdCAgICAgIGlmICh0eXBlb2Ygb3B0aW9uID09ICdzdHJpbmcnKSBkYXRhW29wdGlvbl0oKVxuXHQgICAgfSlcblx0ICB9XG5cdFxuXHQgIHZhciBvbGQgPSAkLmZuLmFmZml4XG5cdFxuXHQgICQuZm4uYWZmaXggICAgICAgICAgICAgPSBQbHVnaW5cblx0ICAkLmZuLmFmZml4LkNvbnN0cnVjdG9yID0gQWZmaXhcblx0XG5cdFxuXHQgIC8vIEFGRklYIE5PIENPTkZMSUNUXG5cdCAgLy8gPT09PT09PT09PT09PT09PT1cblx0XG5cdCAgJC5mbi5hZmZpeC5ub0NvbmZsaWN0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgJC5mbi5hZmZpeCA9IG9sZFxuXHQgICAgcmV0dXJuIHRoaXNcblx0ICB9XG5cdFxuXHRcblx0ICAvLyBBRkZJWCBEQVRBLUFQSVxuXHQgIC8vID09PT09PT09PT09PT09XG5cdFxuXHQgICQod2luZG93KS5vbignbG9hZCcsIGZ1bmN0aW9uICgpIHtcblx0ICAgICQoJ1tkYXRhLXNweT1cImFmZml4XCJdJykuZWFjaChmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHZhciAkc3B5ID0gJCh0aGlzKVxuXHQgICAgICB2YXIgZGF0YSA9ICRzcHkuZGF0YSgpXG5cdFxuXHQgICAgICBkYXRhLm9mZnNldCA9IGRhdGEub2Zmc2V0IHx8IHt9XG5cdFxuXHQgICAgICBpZiAoZGF0YS5vZmZzZXRCb3R0b20gIT0gbnVsbCkgZGF0YS5vZmZzZXQuYm90dG9tID0gZGF0YS5vZmZzZXRCb3R0b21cblx0ICAgICAgaWYgKGRhdGEub2Zmc2V0VG9wICAgICE9IG51bGwpIGRhdGEub2Zmc2V0LnRvcCAgICA9IGRhdGEub2Zmc2V0VG9wXG5cdFxuXHQgICAgICBQbHVnaW4uY2FsbCgkc3B5LCBkYXRhKVxuXHQgICAgfSlcblx0ICB9KVxuXHRcblx0fShqUXVlcnkpO1xuXG5cbi8qKiovIH1cblxuLyoqKioqKi8gfSk7XG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogdmVuZG9yLmpzXG4gKiovIiwiIFx0Ly8gaW5zdGFsbCBhIEpTT05QIGNhbGxiYWNrIGZvciBjaHVuayBsb2FkaW5nXG4gXHR2YXIgcGFyZW50SnNvbnBGdW5jdGlvbiA9IHdpbmRvd1tcIndlYnBhY2tKc29ucFwiXTtcbiBcdHdpbmRvd1tcIndlYnBhY2tKc29ucFwiXSA9IGZ1bmN0aW9uIHdlYnBhY2tKc29ucENhbGxiYWNrKGNodW5rSWRzLCBtb3JlTW9kdWxlcykge1xuIFx0XHQvLyBhZGQgXCJtb3JlTW9kdWxlc1wiIHRvIHRoZSBtb2R1bGVzIG9iamVjdCxcbiBcdFx0Ly8gdGhlbiBmbGFnIGFsbCBcImNodW5rSWRzXCIgYXMgbG9hZGVkIGFuZCBmaXJlIGNhbGxiYWNrXG4gXHRcdHZhciBtb2R1bGVJZCwgY2h1bmtJZCwgaSA9IDAsIGNhbGxiYWNrcyA9IFtdO1xuIFx0XHRmb3IoO2kgPCBjaHVua0lkcy5sZW5ndGg7IGkrKykge1xuIFx0XHRcdGNodW5rSWQgPSBjaHVua0lkc1tpXTtcbiBcdFx0XHRpZihpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0pXG4gXHRcdFx0XHRjYWxsYmFja3MucHVzaC5hcHBseShjYWxsYmFja3MsIGluc3RhbGxlZENodW5rc1tjaHVua0lkXSk7XG4gXHRcdFx0aW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdID0gMDtcbiBcdFx0fVxuIFx0XHRmb3IobW9kdWxlSWQgaW4gbW9yZU1vZHVsZXMpIHtcbiBcdFx0XHRtb2R1bGVzW21vZHVsZUlkXSA9IG1vcmVNb2R1bGVzW21vZHVsZUlkXTtcbiBcdFx0fVxuIFx0XHRpZihwYXJlbnRKc29ucEZ1bmN0aW9uKSBwYXJlbnRKc29ucEZ1bmN0aW9uKGNodW5rSWRzLCBtb3JlTW9kdWxlcyk7XG4gXHRcdHdoaWxlKGNhbGxiYWNrcy5sZW5ndGgpXG4gXHRcdFx0Y2FsbGJhY2tzLnNoaWZ0KCkuY2FsbChudWxsLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcbiBcdFx0aWYobW9yZU1vZHVsZXNbMF0pIHtcbiBcdFx0XHRpbnN0YWxsZWRNb2R1bGVzWzBdID0gMDtcbiBcdFx0XHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gb2JqZWN0IHRvIHN0b3JlIGxvYWRlZCBhbmQgbG9hZGluZyBjaHVua3NcbiBcdC8vIFwiMFwiIG1lYW5zIFwiYWxyZWFkeSBsb2FkZWRcIlxuIFx0Ly8gQXJyYXkgbWVhbnMgXCJsb2FkaW5nXCIsIGFycmF5IGNvbnRhaW5zIGNhbGxiYWNrc1xuIFx0dmFyIGluc3RhbGxlZENodW5rcyA9IHtcbiBcdFx0MTowXG4gXHR9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcblxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0ZXhwb3J0czoge30sXG4gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuIFx0XHRcdGxvYWRlZDogZmFsc2VcbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cbiBcdC8vIFRoaXMgZmlsZSBjb250YWlucyBvbmx5IHRoZSBlbnRyeSBjaHVuay5cbiBcdC8vIFRoZSBjaHVuayBsb2FkaW5nIGZ1bmN0aW9uIGZvciBhZGRpdGlvbmFsIGNodW5rc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5lID0gZnVuY3Rpb24gcmVxdWlyZUVuc3VyZShjaHVua0lkLCBjYWxsYmFjaykge1xuIFx0XHQvLyBcIjBcIiBpcyB0aGUgc2lnbmFsIGZvciBcImFscmVhZHkgbG9hZGVkXCJcbiBcdFx0aWYoaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdID09PSAwKVxuIFx0XHRcdHJldHVybiBjYWxsYmFjay5jYWxsKG51bGwsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIGFuIGFycmF5IG1lYW5zIFwiY3VycmVudGx5IGxvYWRpbmdcIi5cbiBcdFx0aWYoaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdICE9PSB1bmRlZmluZWQpIHtcbiBcdFx0XHRpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0ucHVzaChjYWxsYmFjayk7XG4gXHRcdH0gZWxzZSB7XG4gXHRcdFx0Ly8gc3RhcnQgY2h1bmsgbG9hZGluZ1xuIFx0XHRcdGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9IFtjYWxsYmFja107XG4gXHRcdFx0dmFyIGhlYWQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaGVhZCcpWzBdO1xuIFx0XHRcdHZhciBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcbiBcdFx0XHRzY3JpcHQudHlwZSA9ICd0ZXh0L2phdmFzY3JpcHQnO1xuIFx0XHRcdHNjcmlwdC5jaGFyc2V0ID0gJ3V0Zi04JztcbiBcdFx0XHRzY3JpcHQuYXN5bmMgPSB0cnVlO1xuXG4gXHRcdFx0c2NyaXB0LnNyYyA9IF9fd2VicGFja19yZXF1aXJlX18ucCArIFwiXCIgKyBjaHVua0lkICsgXCIuYXBwLmpzXCI7XG4gXHRcdFx0aGVhZC5hcHBlbmRDaGlsZChzY3JpcHQpO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogd2VicGFjay9ib290c3RyYXAgZDc1OTU5NWVjNDQ2OGY4MzY4ODJcbiAqKi8iLCIvKiFcbiAqIEJvb3RzdHJhcCB2My4zLjcgKGh0dHA6Ly9nZXRib290c3RyYXAuY29tKVxuICogQ29weXJpZ2h0IDIwMTEtMjAxNiBUd2l0dGVyLCBJbmMuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2VcbiAqL1xuXG5pZiAodHlwZW9mIGpRdWVyeSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgdGhyb3cgbmV3IEVycm9yKCdCb290c3RyYXBcXCdzIEphdmFTY3JpcHQgcmVxdWlyZXMgalF1ZXJ5Jylcbn1cblxuK2Z1bmN0aW9uICgkKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgdmFyIHZlcnNpb24gPSAkLmZuLmpxdWVyeS5zcGxpdCgnICcpWzBdLnNwbGl0KCcuJylcbiAgaWYgKCh2ZXJzaW9uWzBdIDwgMiAmJiB2ZXJzaW9uWzFdIDwgOSkgfHwgKHZlcnNpb25bMF0gPT0gMSAmJiB2ZXJzaW9uWzFdID09IDkgJiYgdmVyc2lvblsyXSA8IDEpIHx8ICh2ZXJzaW9uWzBdID4gMykpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0Jvb3RzdHJhcFxcJ3MgSmF2YVNjcmlwdCByZXF1aXJlcyBqUXVlcnkgdmVyc2lvbiAxLjkuMSBvciBoaWdoZXIsIGJ1dCBsb3dlciB0aGFuIHZlcnNpb24gNCcpXG4gIH1cbn0oalF1ZXJ5KTtcblxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKiBCb290c3RyYXA6IHRyYW5zaXRpb24uanMgdjMuMy43XG4gKiBodHRwOi8vZ2V0Ym9vdHN0cmFwLmNvbS9qYXZhc2NyaXB0LyN0cmFuc2l0aW9uc1xuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKiBDb3B5cmlnaHQgMjAxMS0yMDE2IFR3aXR0ZXIsIEluYy5cbiAqIExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2Jsb2IvbWFzdGVyL0xJQ0VOU0UpXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cblxuXG4rZnVuY3Rpb24gKCQpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIC8vIENTUyBUUkFOU0lUSU9OIFNVUFBPUlQgKFNob3V0b3V0OiBodHRwOi8vd3d3Lm1vZGVybml6ci5jb20vKVxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICBmdW5jdGlvbiB0cmFuc2l0aW9uRW5kKCkge1xuICAgIHZhciBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2Jvb3RzdHJhcCcpXG5cbiAgICB2YXIgdHJhbnNFbmRFdmVudE5hbWVzID0ge1xuICAgICAgV2Via2l0VHJhbnNpdGlvbiA6ICd3ZWJraXRUcmFuc2l0aW9uRW5kJyxcbiAgICAgIE1velRyYW5zaXRpb24gICAgOiAndHJhbnNpdGlvbmVuZCcsXG4gICAgICBPVHJhbnNpdGlvbiAgICAgIDogJ29UcmFuc2l0aW9uRW5kIG90cmFuc2l0aW9uZW5kJyxcbiAgICAgIHRyYW5zaXRpb24gICAgICAgOiAndHJhbnNpdGlvbmVuZCdcbiAgICB9XG5cbiAgICBmb3IgKHZhciBuYW1lIGluIHRyYW5zRW5kRXZlbnROYW1lcykge1xuICAgICAgaWYgKGVsLnN0eWxlW25hbWVdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHsgZW5kOiB0cmFuc0VuZEV2ZW50TmFtZXNbbmFtZV0gfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBmYWxzZSAvLyBleHBsaWNpdCBmb3IgaWU4ICggIC5fLilcbiAgfVxuXG4gIC8vIGh0dHA6Ly9ibG9nLmFsZXhtYWNjYXcuY29tL2Nzcy10cmFuc2l0aW9uc1xuICAkLmZuLmVtdWxhdGVUcmFuc2l0aW9uRW5kID0gZnVuY3Rpb24gKGR1cmF0aW9uKSB7XG4gICAgdmFyIGNhbGxlZCA9IGZhbHNlXG4gICAgdmFyICRlbCA9IHRoaXNcbiAgICAkKHRoaXMpLm9uZSgnYnNUcmFuc2l0aW9uRW5kJywgZnVuY3Rpb24gKCkgeyBjYWxsZWQgPSB0cnVlIH0pXG4gICAgdmFyIGNhbGxiYWNrID0gZnVuY3Rpb24gKCkgeyBpZiAoIWNhbGxlZCkgJCgkZWwpLnRyaWdnZXIoJC5zdXBwb3J0LnRyYW5zaXRpb24uZW5kKSB9XG4gICAgc2V0VGltZW91dChjYWxsYmFjaywgZHVyYXRpb24pXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG4gICQoZnVuY3Rpb24gKCkge1xuICAgICQuc3VwcG9ydC50cmFuc2l0aW9uID0gdHJhbnNpdGlvbkVuZCgpXG5cbiAgICBpZiAoISQuc3VwcG9ydC50cmFuc2l0aW9uKSByZXR1cm5cblxuICAgICQuZXZlbnQuc3BlY2lhbC5ic1RyYW5zaXRpb25FbmQgPSB7XG4gICAgICBiaW5kVHlwZTogJC5zdXBwb3J0LnRyYW5zaXRpb24uZW5kLFxuICAgICAgZGVsZWdhdGVUeXBlOiAkLnN1cHBvcnQudHJhbnNpdGlvbi5lbmQsXG4gICAgICBoYW5kbGU6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGlmICgkKGUudGFyZ2V0KS5pcyh0aGlzKSkgcmV0dXJuIGUuaGFuZGxlT2JqLmhhbmRsZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKVxuICAgICAgfVxuICAgIH1cbiAgfSlcblxufShqUXVlcnkpO1xuXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIEJvb3RzdHJhcDogYWxlcnQuanMgdjMuMy43XG4gKiBodHRwOi8vZ2V0Ym9vdHN0cmFwLmNvbS9qYXZhc2NyaXB0LyNhbGVydHNcbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICogQ29weXJpZ2h0IDIwMTEtMjAxNiBUd2l0dGVyLCBJbmMuXG4gKiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ibG9iL21hc3Rlci9MSUNFTlNFKVxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXG5cblxuK2Z1bmN0aW9uICgkKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICAvLyBBTEVSVCBDTEFTUyBERUZJTklUSU9OXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT1cblxuICB2YXIgZGlzbWlzcyA9ICdbZGF0YS1kaXNtaXNzPVwiYWxlcnRcIl0nXG4gIHZhciBBbGVydCAgID0gZnVuY3Rpb24gKGVsKSB7XG4gICAgJChlbCkub24oJ2NsaWNrJywgZGlzbWlzcywgdGhpcy5jbG9zZSlcbiAgfVxuXG4gIEFsZXJ0LlZFUlNJT04gPSAnMy4zLjcnXG5cbiAgQWxlcnQuVFJBTlNJVElPTl9EVVJBVElPTiA9IDE1MFxuXG4gIEFsZXJ0LnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgdmFyICR0aGlzICAgID0gJCh0aGlzKVxuICAgIHZhciBzZWxlY3RvciA9ICR0aGlzLmF0dHIoJ2RhdGEtdGFyZ2V0JylcblxuICAgIGlmICghc2VsZWN0b3IpIHtcbiAgICAgIHNlbGVjdG9yID0gJHRoaXMuYXR0cignaHJlZicpXG4gICAgICBzZWxlY3RvciA9IHNlbGVjdG9yICYmIHNlbGVjdG9yLnJlcGxhY2UoLy4qKD89I1teXFxzXSokKS8sICcnKSAvLyBzdHJpcCBmb3IgaWU3XG4gICAgfVxuXG4gICAgdmFyICRwYXJlbnQgPSAkKHNlbGVjdG9yID09PSAnIycgPyBbXSA6IHNlbGVjdG9yKVxuXG4gICAgaWYgKGUpIGUucHJldmVudERlZmF1bHQoKVxuXG4gICAgaWYgKCEkcGFyZW50Lmxlbmd0aCkge1xuICAgICAgJHBhcmVudCA9ICR0aGlzLmNsb3Nlc3QoJy5hbGVydCcpXG4gICAgfVxuXG4gICAgJHBhcmVudC50cmlnZ2VyKGUgPSAkLkV2ZW50KCdjbG9zZS5icy5hbGVydCcpKVxuXG4gICAgaWYgKGUuaXNEZWZhdWx0UHJldmVudGVkKCkpIHJldHVyblxuXG4gICAgJHBhcmVudC5yZW1vdmVDbGFzcygnaW4nKVxuXG4gICAgZnVuY3Rpb24gcmVtb3ZlRWxlbWVudCgpIHtcbiAgICAgIC8vIGRldGFjaCBmcm9tIHBhcmVudCwgZmlyZSBldmVudCB0aGVuIGNsZWFuIHVwIGRhdGFcbiAgICAgICRwYXJlbnQuZGV0YWNoKCkudHJpZ2dlcignY2xvc2VkLmJzLmFsZXJ0JykucmVtb3ZlKClcbiAgICB9XG5cbiAgICAkLnN1cHBvcnQudHJhbnNpdGlvbiAmJiAkcGFyZW50Lmhhc0NsYXNzKCdmYWRlJykgP1xuICAgICAgJHBhcmVudFxuICAgICAgICAub25lKCdic1RyYW5zaXRpb25FbmQnLCByZW1vdmVFbGVtZW50KVxuICAgICAgICAuZW11bGF0ZVRyYW5zaXRpb25FbmQoQWxlcnQuVFJBTlNJVElPTl9EVVJBVElPTikgOlxuICAgICAgcmVtb3ZlRWxlbWVudCgpXG4gIH1cblxuXG4gIC8vIEFMRVJUIFBMVUdJTiBERUZJTklUSU9OXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgZnVuY3Rpb24gUGx1Z2luKG9wdGlvbikge1xuICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgdmFyICR0aGlzID0gJCh0aGlzKVxuICAgICAgdmFyIGRhdGEgID0gJHRoaXMuZGF0YSgnYnMuYWxlcnQnKVxuXG4gICAgICBpZiAoIWRhdGEpICR0aGlzLmRhdGEoJ2JzLmFsZXJ0JywgKGRhdGEgPSBuZXcgQWxlcnQodGhpcykpKVxuICAgICAgaWYgKHR5cGVvZiBvcHRpb24gPT0gJ3N0cmluZycpIGRhdGFbb3B0aW9uXS5jYWxsKCR0aGlzKVxuICAgIH0pXG4gIH1cblxuICB2YXIgb2xkID0gJC5mbi5hbGVydFxuXG4gICQuZm4uYWxlcnQgICAgICAgICAgICAgPSBQbHVnaW5cbiAgJC5mbi5hbGVydC5Db25zdHJ1Y3RvciA9IEFsZXJ0XG5cblxuICAvLyBBTEVSVCBOTyBDT05GTElDVFxuICAvLyA9PT09PT09PT09PT09PT09PVxuXG4gICQuZm4uYWxlcnQubm9Db25mbGljdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAkLmZuLmFsZXJ0ID0gb2xkXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG5cbiAgLy8gQUxFUlQgREFUQS1BUElcbiAgLy8gPT09PT09PT09PT09PT1cblxuICAkKGRvY3VtZW50KS5vbignY2xpY2suYnMuYWxlcnQuZGF0YS1hcGknLCBkaXNtaXNzLCBBbGVydC5wcm90b3R5cGUuY2xvc2UpXG5cbn0oalF1ZXJ5KTtcblxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKiBCb290c3RyYXA6IGJ1dHRvbi5qcyB2My4zLjdcbiAqIGh0dHA6Ly9nZXRib290c3RyYXAuY29tL2phdmFzY3JpcHQvI2J1dHRvbnNcbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICogQ29weXJpZ2h0IDIwMTEtMjAxNiBUd2l0dGVyLCBJbmMuXG4gKiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ibG9iL21hc3Rlci9MSUNFTlNFKVxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXG5cblxuK2Z1bmN0aW9uICgkKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICAvLyBCVVRUT04gUFVCTElDIENMQVNTIERFRklOSVRJT05cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgdmFyIEJ1dHRvbiA9IGZ1bmN0aW9uIChlbGVtZW50LCBvcHRpb25zKSB7XG4gICAgdGhpcy4kZWxlbWVudCAgPSAkKGVsZW1lbnQpXG4gICAgdGhpcy5vcHRpb25zICAgPSAkLmV4dGVuZCh7fSwgQnV0dG9uLkRFRkFVTFRTLCBvcHRpb25zKVxuICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2VcbiAgfVxuXG4gIEJ1dHRvbi5WRVJTSU9OICA9ICczLjMuNydcblxuICBCdXR0b24uREVGQVVMVFMgPSB7XG4gICAgbG9hZGluZ1RleHQ6ICdsb2FkaW5nLi4uJ1xuICB9XG5cbiAgQnV0dG9uLnByb3RvdHlwZS5zZXRTdGF0ZSA9IGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgIHZhciBkICAgID0gJ2Rpc2FibGVkJ1xuICAgIHZhciAkZWwgID0gdGhpcy4kZWxlbWVudFxuICAgIHZhciB2YWwgID0gJGVsLmlzKCdpbnB1dCcpID8gJ3ZhbCcgOiAnaHRtbCdcbiAgICB2YXIgZGF0YSA9ICRlbC5kYXRhKClcblxuICAgIHN0YXRlICs9ICdUZXh0J1xuXG4gICAgaWYgKGRhdGEucmVzZXRUZXh0ID09IG51bGwpICRlbC5kYXRhKCdyZXNldFRleHQnLCAkZWxbdmFsXSgpKVxuXG4gICAgLy8gcHVzaCB0byBldmVudCBsb29wIHRvIGFsbG93IGZvcm1zIHRvIHN1Ym1pdFxuICAgIHNldFRpbWVvdXQoJC5wcm94eShmdW5jdGlvbiAoKSB7XG4gICAgICAkZWxbdmFsXShkYXRhW3N0YXRlXSA9PSBudWxsID8gdGhpcy5vcHRpb25zW3N0YXRlXSA6IGRhdGFbc3RhdGVdKVxuXG4gICAgICBpZiAoc3RhdGUgPT0gJ2xvYWRpbmdUZXh0Jykge1xuICAgICAgICB0aGlzLmlzTG9hZGluZyA9IHRydWVcbiAgICAgICAgJGVsLmFkZENsYXNzKGQpLmF0dHIoZCwgZCkucHJvcChkLCB0cnVlKVxuICAgICAgfSBlbHNlIGlmICh0aGlzLmlzTG9hZGluZykge1xuICAgICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlXG4gICAgICAgICRlbC5yZW1vdmVDbGFzcyhkKS5yZW1vdmVBdHRyKGQpLnByb3AoZCwgZmFsc2UpXG4gICAgICB9XG4gICAgfSwgdGhpcyksIDApXG4gIH1cblxuICBCdXR0b24ucHJvdG90eXBlLnRvZ2dsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgY2hhbmdlZCA9IHRydWVcbiAgICB2YXIgJHBhcmVudCA9IHRoaXMuJGVsZW1lbnQuY2xvc2VzdCgnW2RhdGEtdG9nZ2xlPVwiYnV0dG9uc1wiXScpXG5cbiAgICBpZiAoJHBhcmVudC5sZW5ndGgpIHtcbiAgICAgIHZhciAkaW5wdXQgPSB0aGlzLiRlbGVtZW50LmZpbmQoJ2lucHV0JylcbiAgICAgIGlmICgkaW5wdXQucHJvcCgndHlwZScpID09ICdyYWRpbycpIHtcbiAgICAgICAgaWYgKCRpbnB1dC5wcm9wKCdjaGVja2VkJykpIGNoYW5nZWQgPSBmYWxzZVxuICAgICAgICAkcGFyZW50LmZpbmQoJy5hY3RpdmUnKS5yZW1vdmVDbGFzcygnYWN0aXZlJylcbiAgICAgICAgdGhpcy4kZWxlbWVudC5hZGRDbGFzcygnYWN0aXZlJylcbiAgICAgIH0gZWxzZSBpZiAoJGlucHV0LnByb3AoJ3R5cGUnKSA9PSAnY2hlY2tib3gnKSB7XG4gICAgICAgIGlmICgoJGlucHV0LnByb3AoJ2NoZWNrZWQnKSkgIT09IHRoaXMuJGVsZW1lbnQuaGFzQ2xhc3MoJ2FjdGl2ZScpKSBjaGFuZ2VkID0gZmFsc2VcbiAgICAgICAgdGhpcy4kZWxlbWVudC50b2dnbGVDbGFzcygnYWN0aXZlJylcbiAgICAgIH1cbiAgICAgICRpbnB1dC5wcm9wKCdjaGVja2VkJywgdGhpcy4kZWxlbWVudC5oYXNDbGFzcygnYWN0aXZlJykpXG4gICAgICBpZiAoY2hhbmdlZCkgJGlucHV0LnRyaWdnZXIoJ2NoYW5nZScpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuJGVsZW1lbnQuYXR0cignYXJpYS1wcmVzc2VkJywgIXRoaXMuJGVsZW1lbnQuaGFzQ2xhc3MoJ2FjdGl2ZScpKVxuICAgICAgdGhpcy4kZWxlbWVudC50b2dnbGVDbGFzcygnYWN0aXZlJylcbiAgICB9XG4gIH1cblxuXG4gIC8vIEJVVFRPTiBQTFVHSU4gREVGSU5JVElPTlxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT1cblxuICBmdW5jdGlvbiBQbHVnaW4ob3B0aW9uKSB7XG4gICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgJHRoaXMgICA9ICQodGhpcylcbiAgICAgIHZhciBkYXRhICAgID0gJHRoaXMuZGF0YSgnYnMuYnV0dG9uJylcbiAgICAgIHZhciBvcHRpb25zID0gdHlwZW9mIG9wdGlvbiA9PSAnb2JqZWN0JyAmJiBvcHRpb25cblxuICAgICAgaWYgKCFkYXRhKSAkdGhpcy5kYXRhKCdicy5idXR0b24nLCAoZGF0YSA9IG5ldyBCdXR0b24odGhpcywgb3B0aW9ucykpKVxuXG4gICAgICBpZiAob3B0aW9uID09ICd0b2dnbGUnKSBkYXRhLnRvZ2dsZSgpXG4gICAgICBlbHNlIGlmIChvcHRpb24pIGRhdGEuc2V0U3RhdGUob3B0aW9uKVxuICAgIH0pXG4gIH1cblxuICB2YXIgb2xkID0gJC5mbi5idXR0b25cblxuICAkLmZuLmJ1dHRvbiAgICAgICAgICAgICA9IFBsdWdpblxuICAkLmZuLmJ1dHRvbi5Db25zdHJ1Y3RvciA9IEJ1dHRvblxuXG5cbiAgLy8gQlVUVE9OIE5PIENPTkZMSUNUXG4gIC8vID09PT09PT09PT09PT09PT09PVxuXG4gICQuZm4uYnV0dG9uLm5vQ29uZmxpY3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgJC5mbi5idXR0b24gPSBvbGRcbiAgICByZXR1cm4gdGhpc1xuICB9XG5cblxuICAvLyBCVVRUT04gREFUQS1BUElcbiAgLy8gPT09PT09PT09PT09PT09XG5cbiAgJChkb2N1bWVudClcbiAgICAub24oJ2NsaWNrLmJzLmJ1dHRvbi5kYXRhLWFwaScsICdbZGF0YS10b2dnbGVePVwiYnV0dG9uXCJdJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgIHZhciAkYnRuID0gJChlLnRhcmdldCkuY2xvc2VzdCgnLmJ0bicpXG4gICAgICBQbHVnaW4uY2FsbCgkYnRuLCAndG9nZ2xlJylcbiAgICAgIGlmICghKCQoZS50YXJnZXQpLmlzKCdpbnB1dFt0eXBlPVwicmFkaW9cIl0sIGlucHV0W3R5cGU9XCJjaGVja2JveFwiXScpKSkge1xuICAgICAgICAvLyBQcmV2ZW50IGRvdWJsZSBjbGljayBvbiByYWRpb3MsIGFuZCB0aGUgZG91YmxlIHNlbGVjdGlvbnMgKHNvIGNhbmNlbGxhdGlvbikgb24gY2hlY2tib3hlc1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgLy8gVGhlIHRhcmdldCBjb21wb25lbnQgc3RpbGwgcmVjZWl2ZSB0aGUgZm9jdXNcbiAgICAgICAgaWYgKCRidG4uaXMoJ2lucHV0LGJ1dHRvbicpKSAkYnRuLnRyaWdnZXIoJ2ZvY3VzJylcbiAgICAgICAgZWxzZSAkYnRuLmZpbmQoJ2lucHV0OnZpc2libGUsYnV0dG9uOnZpc2libGUnKS5maXJzdCgpLnRyaWdnZXIoJ2ZvY3VzJylcbiAgICAgIH1cbiAgICB9KVxuICAgIC5vbignZm9jdXMuYnMuYnV0dG9uLmRhdGEtYXBpIGJsdXIuYnMuYnV0dG9uLmRhdGEtYXBpJywgJ1tkYXRhLXRvZ2dsZV49XCJidXR0b25cIl0nLCBmdW5jdGlvbiAoZSkge1xuICAgICAgJChlLnRhcmdldCkuY2xvc2VzdCgnLmJ0bicpLnRvZ2dsZUNsYXNzKCdmb2N1cycsIC9eZm9jdXMoaW4pPyQvLnRlc3QoZS50eXBlKSlcbiAgICB9KVxuXG59KGpRdWVyeSk7XG5cbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICogQm9vdHN0cmFwOiBjYXJvdXNlbC5qcyB2My4zLjdcbiAqIGh0dHA6Ly9nZXRib290c3RyYXAuY29tL2phdmFzY3JpcHQvI2Nhcm91c2VsXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIENvcHlyaWdodCAyMDExLTIwMTYgVHdpdHRlciwgSW5jLlxuICogTGljZW5zZWQgdW5kZXIgTUlUIChodHRwczovL2dpdGh1Yi5jb20vdHdicy9ib290c3RyYXAvYmxvYi9tYXN0ZXIvTElDRU5TRSlcbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xuXG5cbitmdW5jdGlvbiAoJCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgLy8gQ0FST1VTRUwgQ0xBU1MgREVGSU5JVElPTlxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgdmFyIENhcm91c2VsID0gZnVuY3Rpb24gKGVsZW1lbnQsIG9wdGlvbnMpIHtcbiAgICB0aGlzLiRlbGVtZW50ICAgID0gJChlbGVtZW50KVxuICAgIHRoaXMuJGluZGljYXRvcnMgPSB0aGlzLiRlbGVtZW50LmZpbmQoJy5jYXJvdXNlbC1pbmRpY2F0b3JzJylcbiAgICB0aGlzLm9wdGlvbnMgICAgID0gb3B0aW9uc1xuICAgIHRoaXMucGF1c2VkICAgICAgPSBudWxsXG4gICAgdGhpcy5zbGlkaW5nICAgICA9IG51bGxcbiAgICB0aGlzLmludGVydmFsICAgID0gbnVsbFxuICAgIHRoaXMuJGFjdGl2ZSAgICAgPSBudWxsXG4gICAgdGhpcy4kaXRlbXMgICAgICA9IG51bGxcblxuICAgIHRoaXMub3B0aW9ucy5rZXlib2FyZCAmJiB0aGlzLiRlbGVtZW50Lm9uKCdrZXlkb3duLmJzLmNhcm91c2VsJywgJC5wcm94eSh0aGlzLmtleWRvd24sIHRoaXMpKVxuXG4gICAgdGhpcy5vcHRpb25zLnBhdXNlID09ICdob3ZlcicgJiYgISgnb250b3VjaHN0YXJ0JyBpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpICYmIHRoaXMuJGVsZW1lbnRcbiAgICAgIC5vbignbW91c2VlbnRlci5icy5jYXJvdXNlbCcsICQucHJveHkodGhpcy5wYXVzZSwgdGhpcykpXG4gICAgICAub24oJ21vdXNlbGVhdmUuYnMuY2Fyb3VzZWwnLCAkLnByb3h5KHRoaXMuY3ljbGUsIHRoaXMpKVxuICB9XG5cbiAgQ2Fyb3VzZWwuVkVSU0lPTiAgPSAnMy4zLjcnXG5cbiAgQ2Fyb3VzZWwuVFJBTlNJVElPTl9EVVJBVElPTiA9IDYwMFxuXG4gIENhcm91c2VsLkRFRkFVTFRTID0ge1xuICAgIGludGVydmFsOiA1MDAwLFxuICAgIHBhdXNlOiAnaG92ZXInLFxuICAgIHdyYXA6IHRydWUsXG4gICAga2V5Ym9hcmQ6IHRydWVcbiAgfVxuXG4gIENhcm91c2VsLnByb3RvdHlwZS5rZXlkb3duID0gZnVuY3Rpb24gKGUpIHtcbiAgICBpZiAoL2lucHV0fHRleHRhcmVhL2kudGVzdChlLnRhcmdldC50YWdOYW1lKSkgcmV0dXJuXG4gICAgc3dpdGNoIChlLndoaWNoKSB7XG4gICAgICBjYXNlIDM3OiB0aGlzLnByZXYoKTsgYnJlYWtcbiAgICAgIGNhc2UgMzk6IHRoaXMubmV4dCgpOyBicmVha1xuICAgICAgZGVmYXVsdDogcmV0dXJuXG4gICAgfVxuXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gIH1cblxuICBDYXJvdXNlbC5wcm90b3R5cGUuY3ljbGUgPSBmdW5jdGlvbiAoZSkge1xuICAgIGUgfHwgKHRoaXMucGF1c2VkID0gZmFsc2UpXG5cbiAgICB0aGlzLmludGVydmFsICYmIGNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbClcblxuICAgIHRoaXMub3B0aW9ucy5pbnRlcnZhbFxuICAgICAgJiYgIXRoaXMucGF1c2VkXG4gICAgICAmJiAodGhpcy5pbnRlcnZhbCA9IHNldEludGVydmFsKCQucHJveHkodGhpcy5uZXh0LCB0aGlzKSwgdGhpcy5vcHRpb25zLmludGVydmFsKSlcblxuICAgIHJldHVybiB0aGlzXG4gIH1cblxuICBDYXJvdXNlbC5wcm90b3R5cGUuZ2V0SXRlbUluZGV4ID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICB0aGlzLiRpdGVtcyA9IGl0ZW0ucGFyZW50KCkuY2hpbGRyZW4oJy5pdGVtJylcbiAgICByZXR1cm4gdGhpcy4kaXRlbXMuaW5kZXgoaXRlbSB8fCB0aGlzLiRhY3RpdmUpXG4gIH1cblxuICBDYXJvdXNlbC5wcm90b3R5cGUuZ2V0SXRlbUZvckRpcmVjdGlvbiA9IGZ1bmN0aW9uIChkaXJlY3Rpb24sIGFjdGl2ZSkge1xuICAgIHZhciBhY3RpdmVJbmRleCA9IHRoaXMuZ2V0SXRlbUluZGV4KGFjdGl2ZSlcbiAgICB2YXIgd2lsbFdyYXAgPSAoZGlyZWN0aW9uID09ICdwcmV2JyAmJiBhY3RpdmVJbmRleCA9PT0gMClcbiAgICAgICAgICAgICAgICB8fCAoZGlyZWN0aW9uID09ICduZXh0JyAmJiBhY3RpdmVJbmRleCA9PSAodGhpcy4kaXRlbXMubGVuZ3RoIC0gMSkpXG4gICAgaWYgKHdpbGxXcmFwICYmICF0aGlzLm9wdGlvbnMud3JhcCkgcmV0dXJuIGFjdGl2ZVxuICAgIHZhciBkZWx0YSA9IGRpcmVjdGlvbiA9PSAncHJldicgPyAtMSA6IDFcbiAgICB2YXIgaXRlbUluZGV4ID0gKGFjdGl2ZUluZGV4ICsgZGVsdGEpICUgdGhpcy4kaXRlbXMubGVuZ3RoXG4gICAgcmV0dXJuIHRoaXMuJGl0ZW1zLmVxKGl0ZW1JbmRleClcbiAgfVxuXG4gIENhcm91c2VsLnByb3RvdHlwZS50byA9IGZ1bmN0aW9uIChwb3MpIHtcbiAgICB2YXIgdGhhdCAgICAgICAgPSB0aGlzXG4gICAgdmFyIGFjdGl2ZUluZGV4ID0gdGhpcy5nZXRJdGVtSW5kZXgodGhpcy4kYWN0aXZlID0gdGhpcy4kZWxlbWVudC5maW5kKCcuaXRlbS5hY3RpdmUnKSlcblxuICAgIGlmIChwb3MgPiAodGhpcy4kaXRlbXMubGVuZ3RoIC0gMSkgfHwgcG9zIDwgMCkgcmV0dXJuXG5cbiAgICBpZiAodGhpcy5zbGlkaW5nKSAgICAgICByZXR1cm4gdGhpcy4kZWxlbWVudC5vbmUoJ3NsaWQuYnMuY2Fyb3VzZWwnLCBmdW5jdGlvbiAoKSB7IHRoYXQudG8ocG9zKSB9KSAvLyB5ZXMsIFwic2xpZFwiXG4gICAgaWYgKGFjdGl2ZUluZGV4ID09IHBvcykgcmV0dXJuIHRoaXMucGF1c2UoKS5jeWNsZSgpXG5cbiAgICByZXR1cm4gdGhpcy5zbGlkZShwb3MgPiBhY3RpdmVJbmRleCA/ICduZXh0JyA6ICdwcmV2JywgdGhpcy4kaXRlbXMuZXEocG9zKSlcbiAgfVxuXG4gIENhcm91c2VsLnByb3RvdHlwZS5wYXVzZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgZSB8fCAodGhpcy5wYXVzZWQgPSB0cnVlKVxuXG4gICAgaWYgKHRoaXMuJGVsZW1lbnQuZmluZCgnLm5leHQsIC5wcmV2JykubGVuZ3RoICYmICQuc3VwcG9ydC50cmFuc2l0aW9uKSB7XG4gICAgICB0aGlzLiRlbGVtZW50LnRyaWdnZXIoJC5zdXBwb3J0LnRyYW5zaXRpb24uZW5kKVxuICAgICAgdGhpcy5jeWNsZSh0cnVlKVxuICAgIH1cblxuICAgIHRoaXMuaW50ZXJ2YWwgPSBjbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWwpXG5cbiAgICByZXR1cm4gdGhpc1xuICB9XG5cbiAgQ2Fyb3VzZWwucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMuc2xpZGluZykgcmV0dXJuXG4gICAgcmV0dXJuIHRoaXMuc2xpZGUoJ25leHQnKVxuICB9XG5cbiAgQ2Fyb3VzZWwucHJvdG90eXBlLnByZXYgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMuc2xpZGluZykgcmV0dXJuXG4gICAgcmV0dXJuIHRoaXMuc2xpZGUoJ3ByZXYnKVxuICB9XG5cbiAgQ2Fyb3VzZWwucHJvdG90eXBlLnNsaWRlID0gZnVuY3Rpb24gKHR5cGUsIG5leHQpIHtcbiAgICB2YXIgJGFjdGl2ZSAgID0gdGhpcy4kZWxlbWVudC5maW5kKCcuaXRlbS5hY3RpdmUnKVxuICAgIHZhciAkbmV4dCAgICAgPSBuZXh0IHx8IHRoaXMuZ2V0SXRlbUZvckRpcmVjdGlvbih0eXBlLCAkYWN0aXZlKVxuICAgIHZhciBpc0N5Y2xpbmcgPSB0aGlzLmludGVydmFsXG4gICAgdmFyIGRpcmVjdGlvbiA9IHR5cGUgPT0gJ25leHQnID8gJ2xlZnQnIDogJ3JpZ2h0J1xuICAgIHZhciB0aGF0ICAgICAgPSB0aGlzXG5cbiAgICBpZiAoJG5leHQuaGFzQ2xhc3MoJ2FjdGl2ZScpKSByZXR1cm4gKHRoaXMuc2xpZGluZyA9IGZhbHNlKVxuXG4gICAgdmFyIHJlbGF0ZWRUYXJnZXQgPSAkbmV4dFswXVxuICAgIHZhciBzbGlkZUV2ZW50ID0gJC5FdmVudCgnc2xpZGUuYnMuY2Fyb3VzZWwnLCB7XG4gICAgICByZWxhdGVkVGFyZ2V0OiByZWxhdGVkVGFyZ2V0LFxuICAgICAgZGlyZWN0aW9uOiBkaXJlY3Rpb25cbiAgICB9KVxuICAgIHRoaXMuJGVsZW1lbnQudHJpZ2dlcihzbGlkZUV2ZW50KVxuICAgIGlmIChzbGlkZUV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpKSByZXR1cm5cblxuICAgIHRoaXMuc2xpZGluZyA9IHRydWVcblxuICAgIGlzQ3ljbGluZyAmJiB0aGlzLnBhdXNlKClcblxuICAgIGlmICh0aGlzLiRpbmRpY2F0b3JzLmxlbmd0aCkge1xuICAgICAgdGhpcy4kaW5kaWNhdG9ycy5maW5kKCcuYWN0aXZlJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpXG4gICAgICB2YXIgJG5leHRJbmRpY2F0b3IgPSAkKHRoaXMuJGluZGljYXRvcnMuY2hpbGRyZW4oKVt0aGlzLmdldEl0ZW1JbmRleCgkbmV4dCldKVxuICAgICAgJG5leHRJbmRpY2F0b3IgJiYgJG5leHRJbmRpY2F0b3IuYWRkQ2xhc3MoJ2FjdGl2ZScpXG4gICAgfVxuXG4gICAgdmFyIHNsaWRFdmVudCA9ICQuRXZlbnQoJ3NsaWQuYnMuY2Fyb3VzZWwnLCB7IHJlbGF0ZWRUYXJnZXQ6IHJlbGF0ZWRUYXJnZXQsIGRpcmVjdGlvbjogZGlyZWN0aW9uIH0pIC8vIHllcywgXCJzbGlkXCJcbiAgICBpZiAoJC5zdXBwb3J0LnRyYW5zaXRpb24gJiYgdGhpcy4kZWxlbWVudC5oYXNDbGFzcygnc2xpZGUnKSkge1xuICAgICAgJG5leHQuYWRkQ2xhc3ModHlwZSlcbiAgICAgICRuZXh0WzBdLm9mZnNldFdpZHRoIC8vIGZvcmNlIHJlZmxvd1xuICAgICAgJGFjdGl2ZS5hZGRDbGFzcyhkaXJlY3Rpb24pXG4gICAgICAkbmV4dC5hZGRDbGFzcyhkaXJlY3Rpb24pXG4gICAgICAkYWN0aXZlXG4gICAgICAgIC5vbmUoJ2JzVHJhbnNpdGlvbkVuZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAkbmV4dC5yZW1vdmVDbGFzcyhbdHlwZSwgZGlyZWN0aW9uXS5qb2luKCcgJykpLmFkZENsYXNzKCdhY3RpdmUnKVxuICAgICAgICAgICRhY3RpdmUucmVtb3ZlQ2xhc3MoWydhY3RpdmUnLCBkaXJlY3Rpb25dLmpvaW4oJyAnKSlcbiAgICAgICAgICB0aGF0LnNsaWRpbmcgPSBmYWxzZVxuICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhhdC4kZWxlbWVudC50cmlnZ2VyKHNsaWRFdmVudClcbiAgICAgICAgICB9LCAwKVxuICAgICAgICB9KVxuICAgICAgICAuZW11bGF0ZVRyYW5zaXRpb25FbmQoQ2Fyb3VzZWwuVFJBTlNJVElPTl9EVVJBVElPTilcbiAgICB9IGVsc2Uge1xuICAgICAgJGFjdGl2ZS5yZW1vdmVDbGFzcygnYWN0aXZlJylcbiAgICAgICRuZXh0LmFkZENsYXNzKCdhY3RpdmUnKVxuICAgICAgdGhpcy5zbGlkaW5nID0gZmFsc2VcbiAgICAgIHRoaXMuJGVsZW1lbnQudHJpZ2dlcihzbGlkRXZlbnQpXG4gICAgfVxuXG4gICAgaXNDeWNsaW5nICYmIHRoaXMuY3ljbGUoKVxuXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG5cbiAgLy8gQ0FST1VTRUwgUExVR0lOIERFRklOSVRJT05cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICBmdW5jdGlvbiBQbHVnaW4ob3B0aW9uKSB7XG4gICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgJHRoaXMgICA9ICQodGhpcylcbiAgICAgIHZhciBkYXRhICAgID0gJHRoaXMuZGF0YSgnYnMuY2Fyb3VzZWwnKVxuICAgICAgdmFyIG9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgQ2Fyb3VzZWwuREVGQVVMVFMsICR0aGlzLmRhdGEoKSwgdHlwZW9mIG9wdGlvbiA9PSAnb2JqZWN0JyAmJiBvcHRpb24pXG4gICAgICB2YXIgYWN0aW9uICA9IHR5cGVvZiBvcHRpb24gPT0gJ3N0cmluZycgPyBvcHRpb24gOiBvcHRpb25zLnNsaWRlXG5cbiAgICAgIGlmICghZGF0YSkgJHRoaXMuZGF0YSgnYnMuY2Fyb3VzZWwnLCAoZGF0YSA9IG5ldyBDYXJvdXNlbCh0aGlzLCBvcHRpb25zKSkpXG4gICAgICBpZiAodHlwZW9mIG9wdGlvbiA9PSAnbnVtYmVyJykgZGF0YS50byhvcHRpb24pXG4gICAgICBlbHNlIGlmIChhY3Rpb24pIGRhdGFbYWN0aW9uXSgpXG4gICAgICBlbHNlIGlmIChvcHRpb25zLmludGVydmFsKSBkYXRhLnBhdXNlKCkuY3ljbGUoKVxuICAgIH0pXG4gIH1cblxuICB2YXIgb2xkID0gJC5mbi5jYXJvdXNlbFxuXG4gICQuZm4uY2Fyb3VzZWwgICAgICAgICAgICAgPSBQbHVnaW5cbiAgJC5mbi5jYXJvdXNlbC5Db25zdHJ1Y3RvciA9IENhcm91c2VsXG5cblxuICAvLyBDQVJPVVNFTCBOTyBDT05GTElDVFxuICAvLyA9PT09PT09PT09PT09PT09PT09PVxuXG4gICQuZm4uY2Fyb3VzZWwubm9Db25mbGljdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAkLmZuLmNhcm91c2VsID0gb2xkXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG5cbiAgLy8gQ0FST1VTRUwgREFUQS1BUElcbiAgLy8gPT09PT09PT09PT09PT09PT1cblxuICB2YXIgY2xpY2tIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICB2YXIgaHJlZlxuICAgIHZhciAkdGhpcyAgID0gJCh0aGlzKVxuICAgIHZhciAkdGFyZ2V0ID0gJCgkdGhpcy5hdHRyKCdkYXRhLXRhcmdldCcpIHx8IChocmVmID0gJHRoaXMuYXR0cignaHJlZicpKSAmJiBocmVmLnJlcGxhY2UoLy4qKD89I1teXFxzXSskKS8sICcnKSkgLy8gc3RyaXAgZm9yIGllN1xuICAgIGlmICghJHRhcmdldC5oYXNDbGFzcygnY2Fyb3VzZWwnKSkgcmV0dXJuXG4gICAgdmFyIG9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgJHRhcmdldC5kYXRhKCksICR0aGlzLmRhdGEoKSlcbiAgICB2YXIgc2xpZGVJbmRleCA9ICR0aGlzLmF0dHIoJ2RhdGEtc2xpZGUtdG8nKVxuICAgIGlmIChzbGlkZUluZGV4KSBvcHRpb25zLmludGVydmFsID0gZmFsc2VcblxuICAgIFBsdWdpbi5jYWxsKCR0YXJnZXQsIG9wdGlvbnMpXG5cbiAgICBpZiAoc2xpZGVJbmRleCkge1xuICAgICAgJHRhcmdldC5kYXRhKCdicy5jYXJvdXNlbCcpLnRvKHNsaWRlSW5kZXgpXG4gICAgfVxuXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gIH1cblxuICAkKGRvY3VtZW50KVxuICAgIC5vbignY2xpY2suYnMuY2Fyb3VzZWwuZGF0YS1hcGknLCAnW2RhdGEtc2xpZGVdJywgY2xpY2tIYW5kbGVyKVxuICAgIC5vbignY2xpY2suYnMuY2Fyb3VzZWwuZGF0YS1hcGknLCAnW2RhdGEtc2xpZGUtdG9dJywgY2xpY2tIYW5kbGVyKVxuXG4gICQod2luZG93KS5vbignbG9hZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAkKCdbZGF0YS1yaWRlPVwiY2Fyb3VzZWxcIl0nKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciAkY2Fyb3VzZWwgPSAkKHRoaXMpXG4gICAgICBQbHVnaW4uY2FsbCgkY2Fyb3VzZWwsICRjYXJvdXNlbC5kYXRhKCkpXG4gICAgfSlcbiAgfSlcblxufShqUXVlcnkpO1xuXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIEJvb3RzdHJhcDogY29sbGFwc2UuanMgdjMuMy43XG4gKiBodHRwOi8vZ2V0Ym9vdHN0cmFwLmNvbS9qYXZhc2NyaXB0LyNjb2xsYXBzZVxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKiBDb3B5cmlnaHQgMjAxMS0yMDE2IFR3aXR0ZXIsIEluYy5cbiAqIExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2Jsb2IvbWFzdGVyL0xJQ0VOU0UpXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cblxuLyoganNoaW50IGxhdGVkZWY6IGZhbHNlICovXG5cbitmdW5jdGlvbiAoJCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgLy8gQ09MTEFQU0UgUFVCTElDIENMQVNTIERFRklOSVRJT05cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICB2YXIgQ29sbGFwc2UgPSBmdW5jdGlvbiAoZWxlbWVudCwgb3B0aW9ucykge1xuICAgIHRoaXMuJGVsZW1lbnQgICAgICA9ICQoZWxlbWVudClcbiAgICB0aGlzLm9wdGlvbnMgICAgICAgPSAkLmV4dGVuZCh7fSwgQ29sbGFwc2UuREVGQVVMVFMsIG9wdGlvbnMpXG4gICAgdGhpcy4kdHJpZ2dlciAgICAgID0gJCgnW2RhdGEtdG9nZ2xlPVwiY29sbGFwc2VcIl1baHJlZj1cIiMnICsgZWxlbWVudC5pZCArICdcIl0sJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAnW2RhdGEtdG9nZ2xlPVwiY29sbGFwc2VcIl1bZGF0YS10YXJnZXQ9XCIjJyArIGVsZW1lbnQuaWQgKyAnXCJdJylcbiAgICB0aGlzLnRyYW5zaXRpb25pbmcgPSBudWxsXG5cbiAgICBpZiAodGhpcy5vcHRpb25zLnBhcmVudCkge1xuICAgICAgdGhpcy4kcGFyZW50ID0gdGhpcy5nZXRQYXJlbnQoKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmFkZEFyaWFBbmRDb2xsYXBzZWRDbGFzcyh0aGlzLiRlbGVtZW50LCB0aGlzLiR0cmlnZ2VyKVxuICAgIH1cblxuICAgIGlmICh0aGlzLm9wdGlvbnMudG9nZ2xlKSB0aGlzLnRvZ2dsZSgpXG4gIH1cblxuICBDb2xsYXBzZS5WRVJTSU9OICA9ICczLjMuNydcblxuICBDb2xsYXBzZS5UUkFOU0lUSU9OX0RVUkFUSU9OID0gMzUwXG5cbiAgQ29sbGFwc2UuREVGQVVMVFMgPSB7XG4gICAgdG9nZ2xlOiB0cnVlXG4gIH1cblxuICBDb2xsYXBzZS5wcm90b3R5cGUuZGltZW5zaW9uID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBoYXNXaWR0aCA9IHRoaXMuJGVsZW1lbnQuaGFzQ2xhc3MoJ3dpZHRoJylcbiAgICByZXR1cm4gaGFzV2lkdGggPyAnd2lkdGgnIDogJ2hlaWdodCdcbiAgfVxuXG4gIENvbGxhcHNlLnByb3RvdHlwZS5zaG93ID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLnRyYW5zaXRpb25pbmcgfHwgdGhpcy4kZWxlbWVudC5oYXNDbGFzcygnaW4nKSkgcmV0dXJuXG5cbiAgICB2YXIgYWN0aXZlc0RhdGFcbiAgICB2YXIgYWN0aXZlcyA9IHRoaXMuJHBhcmVudCAmJiB0aGlzLiRwYXJlbnQuY2hpbGRyZW4oJy5wYW5lbCcpLmNoaWxkcmVuKCcuaW4sIC5jb2xsYXBzaW5nJylcblxuICAgIGlmIChhY3RpdmVzICYmIGFjdGl2ZXMubGVuZ3RoKSB7XG4gICAgICBhY3RpdmVzRGF0YSA9IGFjdGl2ZXMuZGF0YSgnYnMuY29sbGFwc2UnKVxuICAgICAgaWYgKGFjdGl2ZXNEYXRhICYmIGFjdGl2ZXNEYXRhLnRyYW5zaXRpb25pbmcpIHJldHVyblxuICAgIH1cblxuICAgIHZhciBzdGFydEV2ZW50ID0gJC5FdmVudCgnc2hvdy5icy5jb2xsYXBzZScpXG4gICAgdGhpcy4kZWxlbWVudC50cmlnZ2VyKHN0YXJ0RXZlbnQpXG4gICAgaWYgKHN0YXJ0RXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkpIHJldHVyblxuXG4gICAgaWYgKGFjdGl2ZXMgJiYgYWN0aXZlcy5sZW5ndGgpIHtcbiAgICAgIFBsdWdpbi5jYWxsKGFjdGl2ZXMsICdoaWRlJylcbiAgICAgIGFjdGl2ZXNEYXRhIHx8IGFjdGl2ZXMuZGF0YSgnYnMuY29sbGFwc2UnLCBudWxsKVxuICAgIH1cblxuICAgIHZhciBkaW1lbnNpb24gPSB0aGlzLmRpbWVuc2lvbigpXG5cbiAgICB0aGlzLiRlbGVtZW50XG4gICAgICAucmVtb3ZlQ2xhc3MoJ2NvbGxhcHNlJylcbiAgICAgIC5hZGRDbGFzcygnY29sbGFwc2luZycpW2RpbWVuc2lvbl0oMClcbiAgICAgIC5hdHRyKCdhcmlhLWV4cGFuZGVkJywgdHJ1ZSlcblxuICAgIHRoaXMuJHRyaWdnZXJcbiAgICAgIC5yZW1vdmVDbGFzcygnY29sbGFwc2VkJylcbiAgICAgIC5hdHRyKCdhcmlhLWV4cGFuZGVkJywgdHJ1ZSlcblxuICAgIHRoaXMudHJhbnNpdGlvbmluZyA9IDFcblxuICAgIHZhciBjb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuJGVsZW1lbnRcbiAgICAgICAgLnJlbW92ZUNsYXNzKCdjb2xsYXBzaW5nJylcbiAgICAgICAgLmFkZENsYXNzKCdjb2xsYXBzZSBpbicpW2RpbWVuc2lvbl0oJycpXG4gICAgICB0aGlzLnRyYW5zaXRpb25pbmcgPSAwXG4gICAgICB0aGlzLiRlbGVtZW50XG4gICAgICAgIC50cmlnZ2VyKCdzaG93bi5icy5jb2xsYXBzZScpXG4gICAgfVxuXG4gICAgaWYgKCEkLnN1cHBvcnQudHJhbnNpdGlvbikgcmV0dXJuIGNvbXBsZXRlLmNhbGwodGhpcylcblxuICAgIHZhciBzY3JvbGxTaXplID0gJC5jYW1lbENhc2UoWydzY3JvbGwnLCBkaW1lbnNpb25dLmpvaW4oJy0nKSlcblxuICAgIHRoaXMuJGVsZW1lbnRcbiAgICAgIC5vbmUoJ2JzVHJhbnNpdGlvbkVuZCcsICQucHJveHkoY29tcGxldGUsIHRoaXMpKVxuICAgICAgLmVtdWxhdGVUcmFuc2l0aW9uRW5kKENvbGxhcHNlLlRSQU5TSVRJT05fRFVSQVRJT04pW2RpbWVuc2lvbl0odGhpcy4kZWxlbWVudFswXVtzY3JvbGxTaXplXSlcbiAgfVxuXG4gIENvbGxhcHNlLnByb3RvdHlwZS5oaWRlID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLnRyYW5zaXRpb25pbmcgfHwgIXRoaXMuJGVsZW1lbnQuaGFzQ2xhc3MoJ2luJykpIHJldHVyblxuXG4gICAgdmFyIHN0YXJ0RXZlbnQgPSAkLkV2ZW50KCdoaWRlLmJzLmNvbGxhcHNlJylcbiAgICB0aGlzLiRlbGVtZW50LnRyaWdnZXIoc3RhcnRFdmVudClcbiAgICBpZiAoc3RhcnRFdmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSkgcmV0dXJuXG5cbiAgICB2YXIgZGltZW5zaW9uID0gdGhpcy5kaW1lbnNpb24oKVxuXG4gICAgdGhpcy4kZWxlbWVudFtkaW1lbnNpb25dKHRoaXMuJGVsZW1lbnRbZGltZW5zaW9uXSgpKVswXS5vZmZzZXRIZWlnaHRcblxuICAgIHRoaXMuJGVsZW1lbnRcbiAgICAgIC5hZGRDbGFzcygnY29sbGFwc2luZycpXG4gICAgICAucmVtb3ZlQ2xhc3MoJ2NvbGxhcHNlIGluJylcbiAgICAgIC5hdHRyKCdhcmlhLWV4cGFuZGVkJywgZmFsc2UpXG5cbiAgICB0aGlzLiR0cmlnZ2VyXG4gICAgICAuYWRkQ2xhc3MoJ2NvbGxhcHNlZCcpXG4gICAgICAuYXR0cignYXJpYS1leHBhbmRlZCcsIGZhbHNlKVxuXG4gICAgdGhpcy50cmFuc2l0aW9uaW5nID0gMVxuXG4gICAgdmFyIGNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy50cmFuc2l0aW9uaW5nID0gMFxuICAgICAgdGhpcy4kZWxlbWVudFxuICAgICAgICAucmVtb3ZlQ2xhc3MoJ2NvbGxhcHNpbmcnKVxuICAgICAgICAuYWRkQ2xhc3MoJ2NvbGxhcHNlJylcbiAgICAgICAgLnRyaWdnZXIoJ2hpZGRlbi5icy5jb2xsYXBzZScpXG4gICAgfVxuXG4gICAgaWYgKCEkLnN1cHBvcnQudHJhbnNpdGlvbikgcmV0dXJuIGNvbXBsZXRlLmNhbGwodGhpcylcblxuICAgIHRoaXMuJGVsZW1lbnRcbiAgICAgIFtkaW1lbnNpb25dKDApXG4gICAgICAub25lKCdic1RyYW5zaXRpb25FbmQnLCAkLnByb3h5KGNvbXBsZXRlLCB0aGlzKSlcbiAgICAgIC5lbXVsYXRlVHJhbnNpdGlvbkVuZChDb2xsYXBzZS5UUkFOU0lUSU9OX0RVUkFUSU9OKVxuICB9XG5cbiAgQ29sbGFwc2UucHJvdG90eXBlLnRvZ2dsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzW3RoaXMuJGVsZW1lbnQuaGFzQ2xhc3MoJ2luJykgPyAnaGlkZScgOiAnc2hvdyddKClcbiAgfVxuXG4gIENvbGxhcHNlLnByb3RvdHlwZS5nZXRQYXJlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuICQodGhpcy5vcHRpb25zLnBhcmVudClcbiAgICAgIC5maW5kKCdbZGF0YS10b2dnbGU9XCJjb2xsYXBzZVwiXVtkYXRhLXBhcmVudD1cIicgKyB0aGlzLm9wdGlvbnMucGFyZW50ICsgJ1wiXScpXG4gICAgICAuZWFjaCgkLnByb3h5KGZ1bmN0aW9uIChpLCBlbGVtZW50KSB7XG4gICAgICAgIHZhciAkZWxlbWVudCA9ICQoZWxlbWVudClcbiAgICAgICAgdGhpcy5hZGRBcmlhQW5kQ29sbGFwc2VkQ2xhc3MoZ2V0VGFyZ2V0RnJvbVRyaWdnZXIoJGVsZW1lbnQpLCAkZWxlbWVudClcbiAgICAgIH0sIHRoaXMpKVxuICAgICAgLmVuZCgpXG4gIH1cblxuICBDb2xsYXBzZS5wcm90b3R5cGUuYWRkQXJpYUFuZENvbGxhcHNlZENsYXNzID0gZnVuY3Rpb24gKCRlbGVtZW50LCAkdHJpZ2dlcikge1xuICAgIHZhciBpc09wZW4gPSAkZWxlbWVudC5oYXNDbGFzcygnaW4nKVxuXG4gICAgJGVsZW1lbnQuYXR0cignYXJpYS1leHBhbmRlZCcsIGlzT3BlbilcbiAgICAkdHJpZ2dlclxuICAgICAgLnRvZ2dsZUNsYXNzKCdjb2xsYXBzZWQnLCAhaXNPcGVuKVxuICAgICAgLmF0dHIoJ2FyaWEtZXhwYW5kZWQnLCBpc09wZW4pXG4gIH1cblxuICBmdW5jdGlvbiBnZXRUYXJnZXRGcm9tVHJpZ2dlcigkdHJpZ2dlcikge1xuICAgIHZhciBocmVmXG4gICAgdmFyIHRhcmdldCA9ICR0cmlnZ2VyLmF0dHIoJ2RhdGEtdGFyZ2V0JylcbiAgICAgIHx8IChocmVmID0gJHRyaWdnZXIuYXR0cignaHJlZicpKSAmJiBocmVmLnJlcGxhY2UoLy4qKD89I1teXFxzXSskKS8sICcnKSAvLyBzdHJpcCBmb3IgaWU3XG5cbiAgICByZXR1cm4gJCh0YXJnZXQpXG4gIH1cblxuXG4gIC8vIENPTExBUFNFIFBMVUdJTiBERUZJTklUSU9OXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgZnVuY3Rpb24gUGx1Z2luKG9wdGlvbikge1xuICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgdmFyICR0aGlzICAgPSAkKHRoaXMpXG4gICAgICB2YXIgZGF0YSAgICA9ICR0aGlzLmRhdGEoJ2JzLmNvbGxhcHNlJylcbiAgICAgIHZhciBvcHRpb25zID0gJC5leHRlbmQoe30sIENvbGxhcHNlLkRFRkFVTFRTLCAkdGhpcy5kYXRhKCksIHR5cGVvZiBvcHRpb24gPT0gJ29iamVjdCcgJiYgb3B0aW9uKVxuXG4gICAgICBpZiAoIWRhdGEgJiYgb3B0aW9ucy50b2dnbGUgJiYgL3Nob3d8aGlkZS8udGVzdChvcHRpb24pKSBvcHRpb25zLnRvZ2dsZSA9IGZhbHNlXG4gICAgICBpZiAoIWRhdGEpICR0aGlzLmRhdGEoJ2JzLmNvbGxhcHNlJywgKGRhdGEgPSBuZXcgQ29sbGFwc2UodGhpcywgb3B0aW9ucykpKVxuICAgICAgaWYgKHR5cGVvZiBvcHRpb24gPT0gJ3N0cmluZycpIGRhdGFbb3B0aW9uXSgpXG4gICAgfSlcbiAgfVxuXG4gIHZhciBvbGQgPSAkLmZuLmNvbGxhcHNlXG5cbiAgJC5mbi5jb2xsYXBzZSAgICAgICAgICAgICA9IFBsdWdpblxuICAkLmZuLmNvbGxhcHNlLkNvbnN0cnVjdG9yID0gQ29sbGFwc2VcblxuXG4gIC8vIENPTExBUFNFIE5PIENPTkZMSUNUXG4gIC8vID09PT09PT09PT09PT09PT09PT09XG5cbiAgJC5mbi5jb2xsYXBzZS5ub0NvbmZsaWN0ID0gZnVuY3Rpb24gKCkge1xuICAgICQuZm4uY29sbGFwc2UgPSBvbGRcbiAgICByZXR1cm4gdGhpc1xuICB9XG5cblxuICAvLyBDT0xMQVBTRSBEQVRBLUFQSVxuICAvLyA9PT09PT09PT09PT09PT09PVxuXG4gICQoZG9jdW1lbnQpLm9uKCdjbGljay5icy5jb2xsYXBzZS5kYXRhLWFwaScsICdbZGF0YS10b2dnbGU9XCJjb2xsYXBzZVwiXScsIGZ1bmN0aW9uIChlKSB7XG4gICAgdmFyICR0aGlzICAgPSAkKHRoaXMpXG5cbiAgICBpZiAoISR0aGlzLmF0dHIoJ2RhdGEtdGFyZ2V0JykpIGUucHJldmVudERlZmF1bHQoKVxuXG4gICAgdmFyICR0YXJnZXQgPSBnZXRUYXJnZXRGcm9tVHJpZ2dlcigkdGhpcylcbiAgICB2YXIgZGF0YSAgICA9ICR0YXJnZXQuZGF0YSgnYnMuY29sbGFwc2UnKVxuICAgIHZhciBvcHRpb24gID0gZGF0YSA/ICd0b2dnbGUnIDogJHRoaXMuZGF0YSgpXG5cbiAgICBQbHVnaW4uY2FsbCgkdGFyZ2V0LCBvcHRpb24pXG4gIH0pXG5cbn0oalF1ZXJ5KTtcblxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKiBCb290c3RyYXA6IGRyb3Bkb3duLmpzIHYzLjMuN1xuICogaHR0cDovL2dldGJvb3RzdHJhcC5jb20vamF2YXNjcmlwdC8jZHJvcGRvd25zXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIENvcHlyaWdodCAyMDExLTIwMTYgVHdpdHRlciwgSW5jLlxuICogTGljZW5zZWQgdW5kZXIgTUlUIChodHRwczovL2dpdGh1Yi5jb20vdHdicy9ib290c3RyYXAvYmxvYi9tYXN0ZXIvTElDRU5TRSlcbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xuXG5cbitmdW5jdGlvbiAoJCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgLy8gRFJPUERPV04gQ0xBU1MgREVGSU5JVElPTlxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgdmFyIGJhY2tkcm9wID0gJy5kcm9wZG93bi1iYWNrZHJvcCdcbiAgdmFyIHRvZ2dsZSAgID0gJ1tkYXRhLXRvZ2dsZT1cImRyb3Bkb3duXCJdJ1xuICB2YXIgRHJvcGRvd24gPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICQoZWxlbWVudCkub24oJ2NsaWNrLmJzLmRyb3Bkb3duJywgdGhpcy50b2dnbGUpXG4gIH1cblxuICBEcm9wZG93bi5WRVJTSU9OID0gJzMuMy43J1xuXG4gIGZ1bmN0aW9uIGdldFBhcmVudCgkdGhpcykge1xuICAgIHZhciBzZWxlY3RvciA9ICR0aGlzLmF0dHIoJ2RhdGEtdGFyZ2V0JylcblxuICAgIGlmICghc2VsZWN0b3IpIHtcbiAgICAgIHNlbGVjdG9yID0gJHRoaXMuYXR0cignaHJlZicpXG4gICAgICBzZWxlY3RvciA9IHNlbGVjdG9yICYmIC8jW0EtWmEtel0vLnRlc3Qoc2VsZWN0b3IpICYmIHNlbGVjdG9yLnJlcGxhY2UoLy4qKD89I1teXFxzXSokKS8sICcnKSAvLyBzdHJpcCBmb3IgaWU3XG4gICAgfVxuXG4gICAgdmFyICRwYXJlbnQgPSBzZWxlY3RvciAmJiAkKHNlbGVjdG9yKVxuXG4gICAgcmV0dXJuICRwYXJlbnQgJiYgJHBhcmVudC5sZW5ndGggPyAkcGFyZW50IDogJHRoaXMucGFyZW50KClcbiAgfVxuXG4gIGZ1bmN0aW9uIGNsZWFyTWVudXMoZSkge1xuICAgIGlmIChlICYmIGUud2hpY2ggPT09IDMpIHJldHVyblxuICAgICQoYmFja2Ryb3ApLnJlbW92ZSgpXG4gICAgJCh0b2dnbGUpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgdmFyICR0aGlzICAgICAgICAgPSAkKHRoaXMpXG4gICAgICB2YXIgJHBhcmVudCAgICAgICA9IGdldFBhcmVudCgkdGhpcylcbiAgICAgIHZhciByZWxhdGVkVGFyZ2V0ID0geyByZWxhdGVkVGFyZ2V0OiB0aGlzIH1cblxuICAgICAgaWYgKCEkcGFyZW50Lmhhc0NsYXNzKCdvcGVuJykpIHJldHVyblxuXG4gICAgICBpZiAoZSAmJiBlLnR5cGUgPT0gJ2NsaWNrJyAmJiAvaW5wdXR8dGV4dGFyZWEvaS50ZXN0KGUudGFyZ2V0LnRhZ05hbWUpICYmICQuY29udGFpbnMoJHBhcmVudFswXSwgZS50YXJnZXQpKSByZXR1cm5cblxuICAgICAgJHBhcmVudC50cmlnZ2VyKGUgPSAkLkV2ZW50KCdoaWRlLmJzLmRyb3Bkb3duJywgcmVsYXRlZFRhcmdldCkpXG5cbiAgICAgIGlmIChlLmlzRGVmYXVsdFByZXZlbnRlZCgpKSByZXR1cm5cblxuICAgICAgJHRoaXMuYXR0cignYXJpYS1leHBhbmRlZCcsICdmYWxzZScpXG4gICAgICAkcGFyZW50LnJlbW92ZUNsYXNzKCdvcGVuJykudHJpZ2dlcigkLkV2ZW50KCdoaWRkZW4uYnMuZHJvcGRvd24nLCByZWxhdGVkVGFyZ2V0KSlcbiAgICB9KVxuICB9XG5cbiAgRHJvcGRvd24ucHJvdG90eXBlLnRvZ2dsZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgdmFyICR0aGlzID0gJCh0aGlzKVxuXG4gICAgaWYgKCR0aGlzLmlzKCcuZGlzYWJsZWQsIDpkaXNhYmxlZCcpKSByZXR1cm5cblxuICAgIHZhciAkcGFyZW50ICA9IGdldFBhcmVudCgkdGhpcylcbiAgICB2YXIgaXNBY3RpdmUgPSAkcGFyZW50Lmhhc0NsYXNzKCdvcGVuJylcblxuICAgIGNsZWFyTWVudXMoKVxuXG4gICAgaWYgKCFpc0FjdGl2ZSkge1xuICAgICAgaWYgKCdvbnRvdWNoc3RhcnQnIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCAmJiAhJHBhcmVudC5jbG9zZXN0KCcubmF2YmFyLW5hdicpLmxlbmd0aCkge1xuICAgICAgICAvLyBpZiBtb2JpbGUgd2UgdXNlIGEgYmFja2Ryb3AgYmVjYXVzZSBjbGljayBldmVudHMgZG9uJ3QgZGVsZWdhdGVcbiAgICAgICAgJChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSlcbiAgICAgICAgICAuYWRkQ2xhc3MoJ2Ryb3Bkb3duLWJhY2tkcm9wJylcbiAgICAgICAgICAuaW5zZXJ0QWZ0ZXIoJCh0aGlzKSlcbiAgICAgICAgICAub24oJ2NsaWNrJywgY2xlYXJNZW51cylcbiAgICAgIH1cblxuICAgICAgdmFyIHJlbGF0ZWRUYXJnZXQgPSB7IHJlbGF0ZWRUYXJnZXQ6IHRoaXMgfVxuICAgICAgJHBhcmVudC50cmlnZ2VyKGUgPSAkLkV2ZW50KCdzaG93LmJzLmRyb3Bkb3duJywgcmVsYXRlZFRhcmdldCkpXG5cbiAgICAgIGlmIChlLmlzRGVmYXVsdFByZXZlbnRlZCgpKSByZXR1cm5cblxuICAgICAgJHRoaXNcbiAgICAgICAgLnRyaWdnZXIoJ2ZvY3VzJylcbiAgICAgICAgLmF0dHIoJ2FyaWEtZXhwYW5kZWQnLCAndHJ1ZScpXG5cbiAgICAgICRwYXJlbnRcbiAgICAgICAgLnRvZ2dsZUNsYXNzKCdvcGVuJylcbiAgICAgICAgLnRyaWdnZXIoJC5FdmVudCgnc2hvd24uYnMuZHJvcGRvd24nLCByZWxhdGVkVGFyZ2V0KSlcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIERyb3Bkb3duLnByb3RvdHlwZS5rZXlkb3duID0gZnVuY3Rpb24gKGUpIHtcbiAgICBpZiAoIS8oMzh8NDB8Mjd8MzIpLy50ZXN0KGUud2hpY2gpIHx8IC9pbnB1dHx0ZXh0YXJlYS9pLnRlc3QoZS50YXJnZXQudGFnTmFtZSkpIHJldHVyblxuXG4gICAgdmFyICR0aGlzID0gJCh0aGlzKVxuXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKVxuXG4gICAgaWYgKCR0aGlzLmlzKCcuZGlzYWJsZWQsIDpkaXNhYmxlZCcpKSByZXR1cm5cblxuICAgIHZhciAkcGFyZW50ICA9IGdldFBhcmVudCgkdGhpcylcbiAgICB2YXIgaXNBY3RpdmUgPSAkcGFyZW50Lmhhc0NsYXNzKCdvcGVuJylcblxuICAgIGlmICghaXNBY3RpdmUgJiYgZS53aGljaCAhPSAyNyB8fCBpc0FjdGl2ZSAmJiBlLndoaWNoID09IDI3KSB7XG4gICAgICBpZiAoZS53aGljaCA9PSAyNykgJHBhcmVudC5maW5kKHRvZ2dsZSkudHJpZ2dlcignZm9jdXMnKVxuICAgICAgcmV0dXJuICR0aGlzLnRyaWdnZXIoJ2NsaWNrJylcbiAgICB9XG5cbiAgICB2YXIgZGVzYyA9ICcgbGk6bm90KC5kaXNhYmxlZCk6dmlzaWJsZSBhJ1xuICAgIHZhciAkaXRlbXMgPSAkcGFyZW50LmZpbmQoJy5kcm9wZG93bi1tZW51JyArIGRlc2MpXG5cbiAgICBpZiAoISRpdGVtcy5sZW5ndGgpIHJldHVyblxuXG4gICAgdmFyIGluZGV4ID0gJGl0ZW1zLmluZGV4KGUudGFyZ2V0KVxuXG4gICAgaWYgKGUud2hpY2ggPT0gMzggJiYgaW5kZXggPiAwKSAgICAgICAgICAgICAgICAgaW5kZXgtLSAgICAgICAgIC8vIHVwXG4gICAgaWYgKGUud2hpY2ggPT0gNDAgJiYgaW5kZXggPCAkaXRlbXMubGVuZ3RoIC0gMSkgaW5kZXgrKyAgICAgICAgIC8vIGRvd25cbiAgICBpZiAoIX5pbmRleCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleCA9IDBcblxuICAgICRpdGVtcy5lcShpbmRleCkudHJpZ2dlcignZm9jdXMnKVxuICB9XG5cblxuICAvLyBEUk9QRE9XTiBQTFVHSU4gREVGSU5JVElPTlxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gIGZ1bmN0aW9uIFBsdWdpbihvcHRpb24pIHtcbiAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciAkdGhpcyA9ICQodGhpcylcbiAgICAgIHZhciBkYXRhICA9ICR0aGlzLmRhdGEoJ2JzLmRyb3Bkb3duJylcblxuICAgICAgaWYgKCFkYXRhKSAkdGhpcy5kYXRhKCdicy5kcm9wZG93bicsIChkYXRhID0gbmV3IERyb3Bkb3duKHRoaXMpKSlcbiAgICAgIGlmICh0eXBlb2Ygb3B0aW9uID09ICdzdHJpbmcnKSBkYXRhW29wdGlvbl0uY2FsbCgkdGhpcylcbiAgICB9KVxuICB9XG5cbiAgdmFyIG9sZCA9ICQuZm4uZHJvcGRvd25cblxuICAkLmZuLmRyb3Bkb3duICAgICAgICAgICAgID0gUGx1Z2luXG4gICQuZm4uZHJvcGRvd24uQ29uc3RydWN0b3IgPSBEcm9wZG93blxuXG5cbiAgLy8gRFJPUERPV04gTk8gQ09ORkxJQ1RcbiAgLy8gPT09PT09PT09PT09PT09PT09PT1cblxuICAkLmZuLmRyb3Bkb3duLm5vQ29uZmxpY3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgJC5mbi5kcm9wZG93biA9IG9sZFxuICAgIHJldHVybiB0aGlzXG4gIH1cblxuXG4gIC8vIEFQUExZIFRPIFNUQU5EQVJEIERST1BET1dOIEVMRU1FTlRTXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgJChkb2N1bWVudClcbiAgICAub24oJ2NsaWNrLmJzLmRyb3Bkb3duLmRhdGEtYXBpJywgY2xlYXJNZW51cylcbiAgICAub24oJ2NsaWNrLmJzLmRyb3Bkb3duLmRhdGEtYXBpJywgJy5kcm9wZG93biBmb3JtJywgZnVuY3Rpb24gKGUpIHsgZS5zdG9wUHJvcGFnYXRpb24oKSB9KVxuICAgIC5vbignY2xpY2suYnMuZHJvcGRvd24uZGF0YS1hcGknLCB0b2dnbGUsIERyb3Bkb3duLnByb3RvdHlwZS50b2dnbGUpXG4gICAgLm9uKCdrZXlkb3duLmJzLmRyb3Bkb3duLmRhdGEtYXBpJywgdG9nZ2xlLCBEcm9wZG93bi5wcm90b3R5cGUua2V5ZG93bilcbiAgICAub24oJ2tleWRvd24uYnMuZHJvcGRvd24uZGF0YS1hcGknLCAnLmRyb3Bkb3duLW1lbnUnLCBEcm9wZG93bi5wcm90b3R5cGUua2V5ZG93bilcblxufShqUXVlcnkpO1xuXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIEJvb3RzdHJhcDogbW9kYWwuanMgdjMuMy43XG4gKiBodHRwOi8vZ2V0Ym9vdHN0cmFwLmNvbS9qYXZhc2NyaXB0LyNtb2RhbHNcbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICogQ29weXJpZ2h0IDIwMTEtMjAxNiBUd2l0dGVyLCBJbmMuXG4gKiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ibG9iL21hc3Rlci9MSUNFTlNFKVxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXG5cblxuK2Z1bmN0aW9uICgkKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICAvLyBNT0RBTCBDTEFTUyBERUZJTklUSU9OXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT1cblxuICB2YXIgTW9kYWwgPSBmdW5jdGlvbiAoZWxlbWVudCwgb3B0aW9ucykge1xuICAgIHRoaXMub3B0aW9ucyAgICAgICAgICAgICA9IG9wdGlvbnNcbiAgICB0aGlzLiRib2R5ICAgICAgICAgICAgICAgPSAkKGRvY3VtZW50LmJvZHkpXG4gICAgdGhpcy4kZWxlbWVudCAgICAgICAgICAgID0gJChlbGVtZW50KVxuICAgIHRoaXMuJGRpYWxvZyAgICAgICAgICAgICA9IHRoaXMuJGVsZW1lbnQuZmluZCgnLm1vZGFsLWRpYWxvZycpXG4gICAgdGhpcy4kYmFja2Ryb3AgICAgICAgICAgID0gbnVsbFxuICAgIHRoaXMuaXNTaG93biAgICAgICAgICAgICA9IG51bGxcbiAgICB0aGlzLm9yaWdpbmFsQm9keVBhZCAgICAgPSBudWxsXG4gICAgdGhpcy5zY3JvbGxiYXJXaWR0aCAgICAgID0gMFxuICAgIHRoaXMuaWdub3JlQmFja2Ryb3BDbGljayA9IGZhbHNlXG5cbiAgICBpZiAodGhpcy5vcHRpb25zLnJlbW90ZSkge1xuICAgICAgdGhpcy4kZWxlbWVudFxuICAgICAgICAuZmluZCgnLm1vZGFsLWNvbnRlbnQnKVxuICAgICAgICAubG9hZCh0aGlzLm9wdGlvbnMucmVtb3RlLCAkLnByb3h5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB0aGlzLiRlbGVtZW50LnRyaWdnZXIoJ2xvYWRlZC5icy5tb2RhbCcpXG4gICAgICAgIH0sIHRoaXMpKVxuICAgIH1cbiAgfVxuXG4gIE1vZGFsLlZFUlNJT04gID0gJzMuMy43J1xuXG4gIE1vZGFsLlRSQU5TSVRJT05fRFVSQVRJT04gPSAzMDBcbiAgTW9kYWwuQkFDS0RST1BfVFJBTlNJVElPTl9EVVJBVElPTiA9IDE1MFxuXG4gIE1vZGFsLkRFRkFVTFRTID0ge1xuICAgIGJhY2tkcm9wOiB0cnVlLFxuICAgIGtleWJvYXJkOiB0cnVlLFxuICAgIHNob3c6IHRydWVcbiAgfVxuXG4gIE1vZGFsLnByb3RvdHlwZS50b2dnbGUgPSBmdW5jdGlvbiAoX3JlbGF0ZWRUYXJnZXQpIHtcbiAgICByZXR1cm4gdGhpcy5pc1Nob3duID8gdGhpcy5oaWRlKCkgOiB0aGlzLnNob3coX3JlbGF0ZWRUYXJnZXQpXG4gIH1cblxuICBNb2RhbC5wcm90b3R5cGUuc2hvdyA9IGZ1bmN0aW9uIChfcmVsYXRlZFRhcmdldCkge1xuICAgIHZhciB0aGF0ID0gdGhpc1xuICAgIHZhciBlICAgID0gJC5FdmVudCgnc2hvdy5icy5tb2RhbCcsIHsgcmVsYXRlZFRhcmdldDogX3JlbGF0ZWRUYXJnZXQgfSlcblxuICAgIHRoaXMuJGVsZW1lbnQudHJpZ2dlcihlKVxuXG4gICAgaWYgKHRoaXMuaXNTaG93biB8fCBlLmlzRGVmYXVsdFByZXZlbnRlZCgpKSByZXR1cm5cblxuICAgIHRoaXMuaXNTaG93biA9IHRydWVcblxuICAgIHRoaXMuY2hlY2tTY3JvbGxiYXIoKVxuICAgIHRoaXMuc2V0U2Nyb2xsYmFyKClcbiAgICB0aGlzLiRib2R5LmFkZENsYXNzKCdtb2RhbC1vcGVuJylcblxuICAgIHRoaXMuZXNjYXBlKClcbiAgICB0aGlzLnJlc2l6ZSgpXG5cbiAgICB0aGlzLiRlbGVtZW50Lm9uKCdjbGljay5kaXNtaXNzLmJzLm1vZGFsJywgJ1tkYXRhLWRpc21pc3M9XCJtb2RhbFwiXScsICQucHJveHkodGhpcy5oaWRlLCB0aGlzKSlcblxuICAgIHRoaXMuJGRpYWxvZy5vbignbW91c2Vkb3duLmRpc21pc3MuYnMubW9kYWwnLCBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGF0LiRlbGVtZW50Lm9uZSgnbW91c2V1cC5kaXNtaXNzLmJzLm1vZGFsJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgaWYgKCQoZS50YXJnZXQpLmlzKHRoYXQuJGVsZW1lbnQpKSB0aGF0Lmlnbm9yZUJhY2tkcm9wQ2xpY2sgPSB0cnVlXG4gICAgICB9KVxuICAgIH0pXG5cbiAgICB0aGlzLmJhY2tkcm9wKGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciB0cmFuc2l0aW9uID0gJC5zdXBwb3J0LnRyYW5zaXRpb24gJiYgdGhhdC4kZWxlbWVudC5oYXNDbGFzcygnZmFkZScpXG5cbiAgICAgIGlmICghdGhhdC4kZWxlbWVudC5wYXJlbnQoKS5sZW5ndGgpIHtcbiAgICAgICAgdGhhdC4kZWxlbWVudC5hcHBlbmRUbyh0aGF0LiRib2R5KSAvLyBkb24ndCBtb3ZlIG1vZGFscyBkb20gcG9zaXRpb25cbiAgICAgIH1cblxuICAgICAgdGhhdC4kZWxlbWVudFxuICAgICAgICAuc2hvdygpXG4gICAgICAgIC5zY3JvbGxUb3AoMClcblxuICAgICAgdGhhdC5hZGp1c3REaWFsb2coKVxuXG4gICAgICBpZiAodHJhbnNpdGlvbikge1xuICAgICAgICB0aGF0LiRlbGVtZW50WzBdLm9mZnNldFdpZHRoIC8vIGZvcmNlIHJlZmxvd1xuICAgICAgfVxuXG4gICAgICB0aGF0LiRlbGVtZW50LmFkZENsYXNzKCdpbicpXG5cbiAgICAgIHRoYXQuZW5mb3JjZUZvY3VzKClcblxuICAgICAgdmFyIGUgPSAkLkV2ZW50KCdzaG93bi5icy5tb2RhbCcsIHsgcmVsYXRlZFRhcmdldDogX3JlbGF0ZWRUYXJnZXQgfSlcblxuICAgICAgdHJhbnNpdGlvbiA/XG4gICAgICAgIHRoYXQuJGRpYWxvZyAvLyB3YWl0IGZvciBtb2RhbCB0byBzbGlkZSBpblxuICAgICAgICAgIC5vbmUoJ2JzVHJhbnNpdGlvbkVuZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoYXQuJGVsZW1lbnQudHJpZ2dlcignZm9jdXMnKS50cmlnZ2VyKGUpXG4gICAgICAgICAgfSlcbiAgICAgICAgICAuZW11bGF0ZVRyYW5zaXRpb25FbmQoTW9kYWwuVFJBTlNJVElPTl9EVVJBVElPTikgOlxuICAgICAgICB0aGF0LiRlbGVtZW50LnRyaWdnZXIoJ2ZvY3VzJykudHJpZ2dlcihlKVxuICAgIH0pXG4gIH1cblxuICBNb2RhbC5wcm90b3R5cGUuaGlkZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgaWYgKGUpIGUucHJldmVudERlZmF1bHQoKVxuXG4gICAgZSA9ICQuRXZlbnQoJ2hpZGUuYnMubW9kYWwnKVxuXG4gICAgdGhpcy4kZWxlbWVudC50cmlnZ2VyKGUpXG5cbiAgICBpZiAoIXRoaXMuaXNTaG93biB8fCBlLmlzRGVmYXVsdFByZXZlbnRlZCgpKSByZXR1cm5cblxuICAgIHRoaXMuaXNTaG93biA9IGZhbHNlXG5cbiAgICB0aGlzLmVzY2FwZSgpXG4gICAgdGhpcy5yZXNpemUoKVxuXG4gICAgJChkb2N1bWVudCkub2ZmKCdmb2N1c2luLmJzLm1vZGFsJylcblxuICAgIHRoaXMuJGVsZW1lbnRcbiAgICAgIC5yZW1vdmVDbGFzcygnaW4nKVxuICAgICAgLm9mZignY2xpY2suZGlzbWlzcy5icy5tb2RhbCcpXG4gICAgICAub2ZmKCdtb3VzZXVwLmRpc21pc3MuYnMubW9kYWwnKVxuXG4gICAgdGhpcy4kZGlhbG9nLm9mZignbW91c2Vkb3duLmRpc21pc3MuYnMubW9kYWwnKVxuXG4gICAgJC5zdXBwb3J0LnRyYW5zaXRpb24gJiYgdGhpcy4kZWxlbWVudC5oYXNDbGFzcygnZmFkZScpID9cbiAgICAgIHRoaXMuJGVsZW1lbnRcbiAgICAgICAgLm9uZSgnYnNUcmFuc2l0aW9uRW5kJywgJC5wcm94eSh0aGlzLmhpZGVNb2RhbCwgdGhpcykpXG4gICAgICAgIC5lbXVsYXRlVHJhbnNpdGlvbkVuZChNb2RhbC5UUkFOU0lUSU9OX0RVUkFUSU9OKSA6XG4gICAgICB0aGlzLmhpZGVNb2RhbCgpXG4gIH1cblxuICBNb2RhbC5wcm90b3R5cGUuZW5mb3JjZUZvY3VzID0gZnVuY3Rpb24gKCkge1xuICAgICQoZG9jdW1lbnQpXG4gICAgICAub2ZmKCdmb2N1c2luLmJzLm1vZGFsJykgLy8gZ3VhcmQgYWdhaW5zdCBpbmZpbml0ZSBmb2N1cyBsb29wXG4gICAgICAub24oJ2ZvY3VzaW4uYnMubW9kYWwnLCAkLnByb3h5KGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGlmIChkb2N1bWVudCAhPT0gZS50YXJnZXQgJiZcbiAgICAgICAgICAgIHRoaXMuJGVsZW1lbnRbMF0gIT09IGUudGFyZ2V0ICYmXG4gICAgICAgICAgICAhdGhpcy4kZWxlbWVudC5oYXMoZS50YXJnZXQpLmxlbmd0aCkge1xuICAgICAgICAgIHRoaXMuJGVsZW1lbnQudHJpZ2dlcignZm9jdXMnKVxuICAgICAgICB9XG4gICAgICB9LCB0aGlzKSlcbiAgfVxuXG4gIE1vZGFsLnByb3RvdHlwZS5lc2NhcGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMuaXNTaG93biAmJiB0aGlzLm9wdGlvbnMua2V5Ym9hcmQpIHtcbiAgICAgIHRoaXMuJGVsZW1lbnQub24oJ2tleWRvd24uZGlzbWlzcy5icy5tb2RhbCcsICQucHJveHkoZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZS53aGljaCA9PSAyNyAmJiB0aGlzLmhpZGUoKVxuICAgICAgfSwgdGhpcykpXG4gICAgfSBlbHNlIGlmICghdGhpcy5pc1Nob3duKSB7XG4gICAgICB0aGlzLiRlbGVtZW50Lm9mZigna2V5ZG93bi5kaXNtaXNzLmJzLm1vZGFsJylcbiAgICB9XG4gIH1cblxuICBNb2RhbC5wcm90b3R5cGUucmVzaXplID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLmlzU2hvd24pIHtcbiAgICAgICQod2luZG93KS5vbigncmVzaXplLmJzLm1vZGFsJywgJC5wcm94eSh0aGlzLmhhbmRsZVVwZGF0ZSwgdGhpcykpXG4gICAgfSBlbHNlIHtcbiAgICAgICQod2luZG93KS5vZmYoJ3Jlc2l6ZS5icy5tb2RhbCcpXG4gICAgfVxuICB9XG5cbiAgTW9kYWwucHJvdG90eXBlLmhpZGVNb2RhbCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgdGhhdCA9IHRoaXNcbiAgICB0aGlzLiRlbGVtZW50LmhpZGUoKVxuICAgIHRoaXMuYmFja2Ryb3AoZnVuY3Rpb24gKCkge1xuICAgICAgdGhhdC4kYm9keS5yZW1vdmVDbGFzcygnbW9kYWwtb3BlbicpXG4gICAgICB0aGF0LnJlc2V0QWRqdXN0bWVudHMoKVxuICAgICAgdGhhdC5yZXNldFNjcm9sbGJhcigpXG4gICAgICB0aGF0LiRlbGVtZW50LnRyaWdnZXIoJ2hpZGRlbi5icy5tb2RhbCcpXG4gICAgfSlcbiAgfVxuXG4gIE1vZGFsLnByb3RvdHlwZS5yZW1vdmVCYWNrZHJvcCA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLiRiYWNrZHJvcCAmJiB0aGlzLiRiYWNrZHJvcC5yZW1vdmUoKVxuICAgIHRoaXMuJGJhY2tkcm9wID0gbnVsbFxuICB9XG5cbiAgTW9kYWwucHJvdG90eXBlLmJhY2tkcm9wID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgdmFyIHRoYXQgPSB0aGlzXG4gICAgdmFyIGFuaW1hdGUgPSB0aGlzLiRlbGVtZW50Lmhhc0NsYXNzKCdmYWRlJykgPyAnZmFkZScgOiAnJ1xuXG4gICAgaWYgKHRoaXMuaXNTaG93biAmJiB0aGlzLm9wdGlvbnMuYmFja2Ryb3ApIHtcbiAgICAgIHZhciBkb0FuaW1hdGUgPSAkLnN1cHBvcnQudHJhbnNpdGlvbiAmJiBhbmltYXRlXG5cbiAgICAgIHRoaXMuJGJhY2tkcm9wID0gJChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSlcbiAgICAgICAgLmFkZENsYXNzKCdtb2RhbC1iYWNrZHJvcCAnICsgYW5pbWF0ZSlcbiAgICAgICAgLmFwcGVuZFRvKHRoaXMuJGJvZHkpXG5cbiAgICAgIHRoaXMuJGVsZW1lbnQub24oJ2NsaWNrLmRpc21pc3MuYnMubW9kYWwnLCAkLnByb3h5KGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGlmICh0aGlzLmlnbm9yZUJhY2tkcm9wQ2xpY2spIHtcbiAgICAgICAgICB0aGlzLmlnbm9yZUJhY2tkcm9wQ2xpY2sgPSBmYWxzZVxuICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICAgIGlmIChlLnRhcmdldCAhPT0gZS5jdXJyZW50VGFyZ2V0KSByZXR1cm5cbiAgICAgICAgdGhpcy5vcHRpb25zLmJhY2tkcm9wID09ICdzdGF0aWMnXG4gICAgICAgICAgPyB0aGlzLiRlbGVtZW50WzBdLmZvY3VzKClcbiAgICAgICAgICA6IHRoaXMuaGlkZSgpXG4gICAgICB9LCB0aGlzKSlcblxuICAgICAgaWYgKGRvQW5pbWF0ZSkgdGhpcy4kYmFja2Ryb3BbMF0ub2Zmc2V0V2lkdGggLy8gZm9yY2UgcmVmbG93XG5cbiAgICAgIHRoaXMuJGJhY2tkcm9wLmFkZENsYXNzKCdpbicpXG5cbiAgICAgIGlmICghY2FsbGJhY2spIHJldHVyblxuXG4gICAgICBkb0FuaW1hdGUgP1xuICAgICAgICB0aGlzLiRiYWNrZHJvcFxuICAgICAgICAgIC5vbmUoJ2JzVHJhbnNpdGlvbkVuZCcsIGNhbGxiYWNrKVxuICAgICAgICAgIC5lbXVsYXRlVHJhbnNpdGlvbkVuZChNb2RhbC5CQUNLRFJPUF9UUkFOU0lUSU9OX0RVUkFUSU9OKSA6XG4gICAgICAgIGNhbGxiYWNrKClcblxuICAgIH0gZWxzZSBpZiAoIXRoaXMuaXNTaG93biAmJiB0aGlzLiRiYWNrZHJvcCkge1xuICAgICAgdGhpcy4kYmFja2Ryb3AucmVtb3ZlQ2xhc3MoJ2luJylcblxuICAgICAgdmFyIGNhbGxiYWNrUmVtb3ZlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGF0LnJlbW92ZUJhY2tkcm9wKClcbiAgICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2soKVxuICAgICAgfVxuICAgICAgJC5zdXBwb3J0LnRyYW5zaXRpb24gJiYgdGhpcy4kZWxlbWVudC5oYXNDbGFzcygnZmFkZScpID9cbiAgICAgICAgdGhpcy4kYmFja2Ryb3BcbiAgICAgICAgICAub25lKCdic1RyYW5zaXRpb25FbmQnLCBjYWxsYmFja1JlbW92ZSlcbiAgICAgICAgICAuZW11bGF0ZVRyYW5zaXRpb25FbmQoTW9kYWwuQkFDS0RST1BfVFJBTlNJVElPTl9EVVJBVElPTikgOlxuICAgICAgICBjYWxsYmFja1JlbW92ZSgpXG5cbiAgICB9IGVsc2UgaWYgKGNhbGxiYWNrKSB7XG4gICAgICBjYWxsYmFjaygpXG4gICAgfVxuICB9XG5cbiAgLy8gdGhlc2UgZm9sbG93aW5nIG1ldGhvZHMgYXJlIHVzZWQgdG8gaGFuZGxlIG92ZXJmbG93aW5nIG1vZGFsc1xuXG4gIE1vZGFsLnByb3RvdHlwZS5oYW5kbGVVcGRhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5hZGp1c3REaWFsb2coKVxuICB9XG5cbiAgTW9kYWwucHJvdG90eXBlLmFkanVzdERpYWxvZyA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgbW9kYWxJc092ZXJmbG93aW5nID0gdGhpcy4kZWxlbWVudFswXS5zY3JvbGxIZWlnaHQgPiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0XG5cbiAgICB0aGlzLiRlbGVtZW50LmNzcyh7XG4gICAgICBwYWRkaW5nTGVmdDogICF0aGlzLmJvZHlJc092ZXJmbG93aW5nICYmIG1vZGFsSXNPdmVyZmxvd2luZyA/IHRoaXMuc2Nyb2xsYmFyV2lkdGggOiAnJyxcbiAgICAgIHBhZGRpbmdSaWdodDogdGhpcy5ib2R5SXNPdmVyZmxvd2luZyAmJiAhbW9kYWxJc092ZXJmbG93aW5nID8gdGhpcy5zY3JvbGxiYXJXaWR0aCA6ICcnXG4gICAgfSlcbiAgfVxuXG4gIE1vZGFsLnByb3RvdHlwZS5yZXNldEFkanVzdG1lbnRzID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuJGVsZW1lbnQuY3NzKHtcbiAgICAgIHBhZGRpbmdMZWZ0OiAnJyxcbiAgICAgIHBhZGRpbmdSaWdodDogJydcbiAgICB9KVxuICB9XG5cbiAgTW9kYWwucHJvdG90eXBlLmNoZWNrU2Nyb2xsYmFyID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBmdWxsV2luZG93V2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aFxuICAgIGlmICghZnVsbFdpbmRvd1dpZHRoKSB7IC8vIHdvcmthcm91bmQgZm9yIG1pc3Npbmcgd2luZG93LmlubmVyV2lkdGggaW4gSUU4XG4gICAgICB2YXIgZG9jdW1lbnRFbGVtZW50UmVjdCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICAgICAgZnVsbFdpbmRvd1dpZHRoID0gZG9jdW1lbnRFbGVtZW50UmVjdC5yaWdodCAtIE1hdGguYWJzKGRvY3VtZW50RWxlbWVudFJlY3QubGVmdClcbiAgICB9XG4gICAgdGhpcy5ib2R5SXNPdmVyZmxvd2luZyA9IGRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGggPCBmdWxsV2luZG93V2lkdGhcbiAgICB0aGlzLnNjcm9sbGJhcldpZHRoID0gdGhpcy5tZWFzdXJlU2Nyb2xsYmFyKClcbiAgfVxuXG4gIE1vZGFsLnByb3RvdHlwZS5zZXRTY3JvbGxiYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGJvZHlQYWQgPSBwYXJzZUludCgodGhpcy4kYm9keS5jc3MoJ3BhZGRpbmctcmlnaHQnKSB8fCAwKSwgMTApXG4gICAgdGhpcy5vcmlnaW5hbEJvZHlQYWQgPSBkb2N1bWVudC5ib2R5LnN0eWxlLnBhZGRpbmdSaWdodCB8fCAnJ1xuICAgIGlmICh0aGlzLmJvZHlJc092ZXJmbG93aW5nKSB0aGlzLiRib2R5LmNzcygncGFkZGluZy1yaWdodCcsIGJvZHlQYWQgKyB0aGlzLnNjcm9sbGJhcldpZHRoKVxuICB9XG5cbiAgTW9kYWwucHJvdG90eXBlLnJlc2V0U2Nyb2xsYmFyID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuJGJvZHkuY3NzKCdwYWRkaW5nLXJpZ2h0JywgdGhpcy5vcmlnaW5hbEJvZHlQYWQpXG4gIH1cblxuICBNb2RhbC5wcm90b3R5cGUubWVhc3VyZVNjcm9sbGJhciA9IGZ1bmN0aW9uICgpIHsgLy8gdGh4IHdhbHNoXG4gICAgdmFyIHNjcm9sbERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgc2Nyb2xsRGl2LmNsYXNzTmFtZSA9ICdtb2RhbC1zY3JvbGxiYXItbWVhc3VyZSdcbiAgICB0aGlzLiRib2R5LmFwcGVuZChzY3JvbGxEaXYpXG4gICAgdmFyIHNjcm9sbGJhcldpZHRoID0gc2Nyb2xsRGl2Lm9mZnNldFdpZHRoIC0gc2Nyb2xsRGl2LmNsaWVudFdpZHRoXG4gICAgdGhpcy4kYm9keVswXS5yZW1vdmVDaGlsZChzY3JvbGxEaXYpXG4gICAgcmV0dXJuIHNjcm9sbGJhcldpZHRoXG4gIH1cblxuXG4gIC8vIE1PREFMIFBMVUdJTiBERUZJTklUSU9OXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgZnVuY3Rpb24gUGx1Z2luKG9wdGlvbiwgX3JlbGF0ZWRUYXJnZXQpIHtcbiAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciAkdGhpcyAgID0gJCh0aGlzKVxuICAgICAgdmFyIGRhdGEgICAgPSAkdGhpcy5kYXRhKCdicy5tb2RhbCcpXG4gICAgICB2YXIgb3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCBNb2RhbC5ERUZBVUxUUywgJHRoaXMuZGF0YSgpLCB0eXBlb2Ygb3B0aW9uID09ICdvYmplY3QnICYmIG9wdGlvbilcblxuICAgICAgaWYgKCFkYXRhKSAkdGhpcy5kYXRhKCdicy5tb2RhbCcsIChkYXRhID0gbmV3IE1vZGFsKHRoaXMsIG9wdGlvbnMpKSlcbiAgICAgIGlmICh0eXBlb2Ygb3B0aW9uID09ICdzdHJpbmcnKSBkYXRhW29wdGlvbl0oX3JlbGF0ZWRUYXJnZXQpXG4gICAgICBlbHNlIGlmIChvcHRpb25zLnNob3cpIGRhdGEuc2hvdyhfcmVsYXRlZFRhcmdldClcbiAgICB9KVxuICB9XG5cbiAgdmFyIG9sZCA9ICQuZm4ubW9kYWxcblxuICAkLmZuLm1vZGFsICAgICAgICAgICAgID0gUGx1Z2luXG4gICQuZm4ubW9kYWwuQ29uc3RydWN0b3IgPSBNb2RhbFxuXG5cbiAgLy8gTU9EQUwgTk8gQ09ORkxJQ1RcbiAgLy8gPT09PT09PT09PT09PT09PT1cblxuICAkLmZuLm1vZGFsLm5vQ29uZmxpY3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgJC5mbi5tb2RhbCA9IG9sZFxuICAgIHJldHVybiB0aGlzXG4gIH1cblxuXG4gIC8vIE1PREFMIERBVEEtQVBJXG4gIC8vID09PT09PT09PT09PT09XG5cbiAgJChkb2N1bWVudCkub24oJ2NsaWNrLmJzLm1vZGFsLmRhdGEtYXBpJywgJ1tkYXRhLXRvZ2dsZT1cIm1vZGFsXCJdJywgZnVuY3Rpb24gKGUpIHtcbiAgICB2YXIgJHRoaXMgICA9ICQodGhpcylcbiAgICB2YXIgaHJlZiAgICA9ICR0aGlzLmF0dHIoJ2hyZWYnKVxuICAgIHZhciAkdGFyZ2V0ID0gJCgkdGhpcy5hdHRyKCdkYXRhLXRhcmdldCcpIHx8IChocmVmICYmIGhyZWYucmVwbGFjZSgvLiooPz0jW15cXHNdKyQpLywgJycpKSkgLy8gc3RyaXAgZm9yIGllN1xuICAgIHZhciBvcHRpb24gID0gJHRhcmdldC5kYXRhKCdicy5tb2RhbCcpID8gJ3RvZ2dsZScgOiAkLmV4dGVuZCh7IHJlbW90ZTogIS8jLy50ZXN0KGhyZWYpICYmIGhyZWYgfSwgJHRhcmdldC5kYXRhKCksICR0aGlzLmRhdGEoKSlcblxuICAgIGlmICgkdGhpcy5pcygnYScpKSBlLnByZXZlbnREZWZhdWx0KClcblxuICAgICR0YXJnZXQub25lKCdzaG93LmJzLm1vZGFsJywgZnVuY3Rpb24gKHNob3dFdmVudCkge1xuICAgICAgaWYgKHNob3dFdmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSkgcmV0dXJuIC8vIG9ubHkgcmVnaXN0ZXIgZm9jdXMgcmVzdG9yZXIgaWYgbW9kYWwgd2lsbCBhY3R1YWxseSBnZXQgc2hvd25cbiAgICAgICR0YXJnZXQub25lKCdoaWRkZW4uYnMubW9kYWwnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICR0aGlzLmlzKCc6dmlzaWJsZScpICYmICR0aGlzLnRyaWdnZXIoJ2ZvY3VzJylcbiAgICAgIH0pXG4gICAgfSlcbiAgICBQbHVnaW4uY2FsbCgkdGFyZ2V0LCBvcHRpb24sIHRoaXMpXG4gIH0pXG5cbn0oalF1ZXJ5KTtcblxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKiBCb290c3RyYXA6IHRvb2x0aXAuanMgdjMuMy43XG4gKiBodHRwOi8vZ2V0Ym9vdHN0cmFwLmNvbS9qYXZhc2NyaXB0LyN0b29sdGlwXG4gKiBJbnNwaXJlZCBieSB0aGUgb3JpZ2luYWwgalF1ZXJ5LnRpcHN5IGJ5IEphc29uIEZyYW1lXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIENvcHlyaWdodCAyMDExLTIwMTYgVHdpdHRlciwgSW5jLlxuICogTGljZW5zZWQgdW5kZXIgTUlUIChodHRwczovL2dpdGh1Yi5jb20vdHdicy9ib290c3RyYXAvYmxvYi9tYXN0ZXIvTElDRU5TRSlcbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xuXG5cbitmdW5jdGlvbiAoJCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgLy8gVE9PTFRJUCBQVUJMSUMgQ0xBU1MgREVGSU5JVElPTlxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgdmFyIFRvb2x0aXAgPSBmdW5jdGlvbiAoZWxlbWVudCwgb3B0aW9ucykge1xuICAgIHRoaXMudHlwZSAgICAgICA9IG51bGxcbiAgICB0aGlzLm9wdGlvbnMgICAgPSBudWxsXG4gICAgdGhpcy5lbmFibGVkICAgID0gbnVsbFxuICAgIHRoaXMudGltZW91dCAgICA9IG51bGxcbiAgICB0aGlzLmhvdmVyU3RhdGUgPSBudWxsXG4gICAgdGhpcy4kZWxlbWVudCAgID0gbnVsbFxuICAgIHRoaXMuaW5TdGF0ZSAgICA9IG51bGxcblxuICAgIHRoaXMuaW5pdCgndG9vbHRpcCcsIGVsZW1lbnQsIG9wdGlvbnMpXG4gIH1cblxuICBUb29sdGlwLlZFUlNJT04gID0gJzMuMy43J1xuXG4gIFRvb2x0aXAuVFJBTlNJVElPTl9EVVJBVElPTiA9IDE1MFxuXG4gIFRvb2x0aXAuREVGQVVMVFMgPSB7XG4gICAgYW5pbWF0aW9uOiB0cnVlLFxuICAgIHBsYWNlbWVudDogJ3RvcCcsXG4gICAgc2VsZWN0b3I6IGZhbHNlLFxuICAgIHRlbXBsYXRlOiAnPGRpdiBjbGFzcz1cInRvb2x0aXBcIiByb2xlPVwidG9vbHRpcFwiPjxkaXYgY2xhc3M9XCJ0b29sdGlwLWFycm93XCI+PC9kaXY+PGRpdiBjbGFzcz1cInRvb2x0aXAtaW5uZXJcIj48L2Rpdj48L2Rpdj4nLFxuICAgIHRyaWdnZXI6ICdob3ZlciBmb2N1cycsXG4gICAgdGl0bGU6ICcnLFxuICAgIGRlbGF5OiAwLFxuICAgIGh0bWw6IGZhbHNlLFxuICAgIGNvbnRhaW5lcjogZmFsc2UsXG4gICAgdmlld3BvcnQ6IHtcbiAgICAgIHNlbGVjdG9yOiAnYm9keScsXG4gICAgICBwYWRkaW5nOiAwXG4gICAgfVxuICB9XG5cbiAgVG9vbHRpcC5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uICh0eXBlLCBlbGVtZW50LCBvcHRpb25zKSB7XG4gICAgdGhpcy5lbmFibGVkICAgPSB0cnVlXG4gICAgdGhpcy50eXBlICAgICAgPSB0eXBlXG4gICAgdGhpcy4kZWxlbWVudCAgPSAkKGVsZW1lbnQpXG4gICAgdGhpcy5vcHRpb25zICAgPSB0aGlzLmdldE9wdGlvbnMob3B0aW9ucylcbiAgICB0aGlzLiR2aWV3cG9ydCA9IHRoaXMub3B0aW9ucy52aWV3cG9ydCAmJiAkKCQuaXNGdW5jdGlvbih0aGlzLm9wdGlvbnMudmlld3BvcnQpID8gdGhpcy5vcHRpb25zLnZpZXdwb3J0LmNhbGwodGhpcywgdGhpcy4kZWxlbWVudCkgOiAodGhpcy5vcHRpb25zLnZpZXdwb3J0LnNlbGVjdG9yIHx8IHRoaXMub3B0aW9ucy52aWV3cG9ydCkpXG4gICAgdGhpcy5pblN0YXRlICAgPSB7IGNsaWNrOiBmYWxzZSwgaG92ZXI6IGZhbHNlLCBmb2N1czogZmFsc2UgfVxuXG4gICAgaWYgKHRoaXMuJGVsZW1lbnRbMF0gaW5zdGFuY2VvZiBkb2N1bWVudC5jb25zdHJ1Y3RvciAmJiAhdGhpcy5vcHRpb25zLnNlbGVjdG9yKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2BzZWxlY3RvcmAgb3B0aW9uIG11c3QgYmUgc3BlY2lmaWVkIHdoZW4gaW5pdGlhbGl6aW5nICcgKyB0aGlzLnR5cGUgKyAnIG9uIHRoZSB3aW5kb3cuZG9jdW1lbnQgb2JqZWN0IScpXG4gICAgfVxuXG4gICAgdmFyIHRyaWdnZXJzID0gdGhpcy5vcHRpb25zLnRyaWdnZXIuc3BsaXQoJyAnKVxuXG4gICAgZm9yICh2YXIgaSA9IHRyaWdnZXJzLmxlbmd0aDsgaS0tOykge1xuICAgICAgdmFyIHRyaWdnZXIgPSB0cmlnZ2Vyc1tpXVxuXG4gICAgICBpZiAodHJpZ2dlciA9PSAnY2xpY2snKSB7XG4gICAgICAgIHRoaXMuJGVsZW1lbnQub24oJ2NsaWNrLicgKyB0aGlzLnR5cGUsIHRoaXMub3B0aW9ucy5zZWxlY3RvciwgJC5wcm94eSh0aGlzLnRvZ2dsZSwgdGhpcykpXG4gICAgICB9IGVsc2UgaWYgKHRyaWdnZXIgIT0gJ21hbnVhbCcpIHtcbiAgICAgICAgdmFyIGV2ZW50SW4gID0gdHJpZ2dlciA9PSAnaG92ZXInID8gJ21vdXNlZW50ZXInIDogJ2ZvY3VzaW4nXG4gICAgICAgIHZhciBldmVudE91dCA9IHRyaWdnZXIgPT0gJ2hvdmVyJyA/ICdtb3VzZWxlYXZlJyA6ICdmb2N1c291dCdcblxuICAgICAgICB0aGlzLiRlbGVtZW50Lm9uKGV2ZW50SW4gICsgJy4nICsgdGhpcy50eXBlLCB0aGlzLm9wdGlvbnMuc2VsZWN0b3IsICQucHJveHkodGhpcy5lbnRlciwgdGhpcykpXG4gICAgICAgIHRoaXMuJGVsZW1lbnQub24oZXZlbnRPdXQgKyAnLicgKyB0aGlzLnR5cGUsIHRoaXMub3B0aW9ucy5zZWxlY3RvciwgJC5wcm94eSh0aGlzLmxlYXZlLCB0aGlzKSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLm9wdGlvbnMuc2VsZWN0b3IgP1xuICAgICAgKHRoaXMuX29wdGlvbnMgPSAkLmV4dGVuZCh7fSwgdGhpcy5vcHRpb25zLCB7IHRyaWdnZXI6ICdtYW51YWwnLCBzZWxlY3RvcjogJycgfSkpIDpcbiAgICAgIHRoaXMuZml4VGl0bGUoKVxuICB9XG5cbiAgVG9vbHRpcC5wcm90b3R5cGUuZ2V0RGVmYXVsdHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIFRvb2x0aXAuREVGQVVMVFNcbiAgfVxuXG4gIFRvb2x0aXAucHJvdG90eXBlLmdldE9wdGlvbnMgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgIG9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgdGhpcy5nZXREZWZhdWx0cygpLCB0aGlzLiRlbGVtZW50LmRhdGEoKSwgb3B0aW9ucylcblxuICAgIGlmIChvcHRpb25zLmRlbGF5ICYmIHR5cGVvZiBvcHRpb25zLmRlbGF5ID09ICdudW1iZXInKSB7XG4gICAgICBvcHRpb25zLmRlbGF5ID0ge1xuICAgICAgICBzaG93OiBvcHRpb25zLmRlbGF5LFxuICAgICAgICBoaWRlOiBvcHRpb25zLmRlbGF5XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG9wdGlvbnNcbiAgfVxuXG4gIFRvb2x0aXAucHJvdG90eXBlLmdldERlbGVnYXRlT3B0aW9ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgb3B0aW9ucyAgPSB7fVxuICAgIHZhciBkZWZhdWx0cyA9IHRoaXMuZ2V0RGVmYXVsdHMoKVxuXG4gICAgdGhpcy5fb3B0aW9ucyAmJiAkLmVhY2godGhpcy5fb3B0aW9ucywgZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcbiAgICAgIGlmIChkZWZhdWx0c1trZXldICE9IHZhbHVlKSBvcHRpb25zW2tleV0gPSB2YWx1ZVxuICAgIH0pXG5cbiAgICByZXR1cm4gb3B0aW9uc1xuICB9XG5cbiAgVG9vbHRpcC5wcm90b3R5cGUuZW50ZXIgPSBmdW5jdGlvbiAob2JqKSB7XG4gICAgdmFyIHNlbGYgPSBvYmogaW5zdGFuY2VvZiB0aGlzLmNvbnN0cnVjdG9yID9cbiAgICAgIG9iaiA6ICQob2JqLmN1cnJlbnRUYXJnZXQpLmRhdGEoJ2JzLicgKyB0aGlzLnR5cGUpXG5cbiAgICBpZiAoIXNlbGYpIHtcbiAgICAgIHNlbGYgPSBuZXcgdGhpcy5jb25zdHJ1Y3RvcihvYmouY3VycmVudFRhcmdldCwgdGhpcy5nZXREZWxlZ2F0ZU9wdGlvbnMoKSlcbiAgICAgICQob2JqLmN1cnJlbnRUYXJnZXQpLmRhdGEoJ2JzLicgKyB0aGlzLnR5cGUsIHNlbGYpXG4gICAgfVxuXG4gICAgaWYgKG9iaiBpbnN0YW5jZW9mICQuRXZlbnQpIHtcbiAgICAgIHNlbGYuaW5TdGF0ZVtvYmoudHlwZSA9PSAnZm9jdXNpbicgPyAnZm9jdXMnIDogJ2hvdmVyJ10gPSB0cnVlXG4gICAgfVxuXG4gICAgaWYgKHNlbGYudGlwKCkuaGFzQ2xhc3MoJ2luJykgfHwgc2VsZi5ob3ZlclN0YXRlID09ICdpbicpIHtcbiAgICAgIHNlbGYuaG92ZXJTdGF0ZSA9ICdpbidcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNsZWFyVGltZW91dChzZWxmLnRpbWVvdXQpXG5cbiAgICBzZWxmLmhvdmVyU3RhdGUgPSAnaW4nXG5cbiAgICBpZiAoIXNlbGYub3B0aW9ucy5kZWxheSB8fCAhc2VsZi5vcHRpb25zLmRlbGF5LnNob3cpIHJldHVybiBzZWxmLnNob3coKVxuXG4gICAgc2VsZi50aW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoc2VsZi5ob3ZlclN0YXRlID09ICdpbicpIHNlbGYuc2hvdygpXG4gICAgfSwgc2VsZi5vcHRpb25zLmRlbGF5LnNob3cpXG4gIH1cblxuICBUb29sdGlwLnByb3RvdHlwZS5pc0luU3RhdGVUcnVlID0gZnVuY3Rpb24gKCkge1xuICAgIGZvciAodmFyIGtleSBpbiB0aGlzLmluU3RhdGUpIHtcbiAgICAgIGlmICh0aGlzLmluU3RhdGVba2V5XSkgcmV0dXJuIHRydWVcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIFRvb2x0aXAucHJvdG90eXBlLmxlYXZlID0gZnVuY3Rpb24gKG9iaikge1xuICAgIHZhciBzZWxmID0gb2JqIGluc3RhbmNlb2YgdGhpcy5jb25zdHJ1Y3RvciA/XG4gICAgICBvYmogOiAkKG9iai5jdXJyZW50VGFyZ2V0KS5kYXRhKCdicy4nICsgdGhpcy50eXBlKVxuXG4gICAgaWYgKCFzZWxmKSB7XG4gICAgICBzZWxmID0gbmV3IHRoaXMuY29uc3RydWN0b3Iob2JqLmN1cnJlbnRUYXJnZXQsIHRoaXMuZ2V0RGVsZWdhdGVPcHRpb25zKCkpXG4gICAgICAkKG9iai5jdXJyZW50VGFyZ2V0KS5kYXRhKCdicy4nICsgdGhpcy50eXBlLCBzZWxmKVxuICAgIH1cblxuICAgIGlmIChvYmogaW5zdGFuY2VvZiAkLkV2ZW50KSB7XG4gICAgICBzZWxmLmluU3RhdGVbb2JqLnR5cGUgPT0gJ2ZvY3Vzb3V0JyA/ICdmb2N1cycgOiAnaG92ZXInXSA9IGZhbHNlXG4gICAgfVxuXG4gICAgaWYgKHNlbGYuaXNJblN0YXRlVHJ1ZSgpKSByZXR1cm5cblxuICAgIGNsZWFyVGltZW91dChzZWxmLnRpbWVvdXQpXG5cbiAgICBzZWxmLmhvdmVyU3RhdGUgPSAnb3V0J1xuXG4gICAgaWYgKCFzZWxmLm9wdGlvbnMuZGVsYXkgfHwgIXNlbGYub3B0aW9ucy5kZWxheS5oaWRlKSByZXR1cm4gc2VsZi5oaWRlKClcblxuICAgIHNlbGYudGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHNlbGYuaG92ZXJTdGF0ZSA9PSAnb3V0Jykgc2VsZi5oaWRlKClcbiAgICB9LCBzZWxmLm9wdGlvbnMuZGVsYXkuaGlkZSlcbiAgfVxuXG4gIFRvb2x0aXAucHJvdG90eXBlLnNob3cgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGUgPSAkLkV2ZW50KCdzaG93LmJzLicgKyB0aGlzLnR5cGUpXG5cbiAgICBpZiAodGhpcy5oYXNDb250ZW50KCkgJiYgdGhpcy5lbmFibGVkKSB7XG4gICAgICB0aGlzLiRlbGVtZW50LnRyaWdnZXIoZSlcblxuICAgICAgdmFyIGluRG9tID0gJC5jb250YWlucyh0aGlzLiRlbGVtZW50WzBdLm93bmVyRG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LCB0aGlzLiRlbGVtZW50WzBdKVxuICAgICAgaWYgKGUuaXNEZWZhdWx0UHJldmVudGVkKCkgfHwgIWluRG9tKSByZXR1cm5cbiAgICAgIHZhciB0aGF0ID0gdGhpc1xuXG4gICAgICB2YXIgJHRpcCA9IHRoaXMudGlwKClcblxuICAgICAgdmFyIHRpcElkID0gdGhpcy5nZXRVSUQodGhpcy50eXBlKVxuXG4gICAgICB0aGlzLnNldENvbnRlbnQoKVxuICAgICAgJHRpcC5hdHRyKCdpZCcsIHRpcElkKVxuICAgICAgdGhpcy4kZWxlbWVudC5hdHRyKCdhcmlhLWRlc2NyaWJlZGJ5JywgdGlwSWQpXG5cbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuYW5pbWF0aW9uKSAkdGlwLmFkZENsYXNzKCdmYWRlJylcblxuICAgICAgdmFyIHBsYWNlbWVudCA9IHR5cGVvZiB0aGlzLm9wdGlvbnMucGxhY2VtZW50ID09ICdmdW5jdGlvbicgP1xuICAgICAgICB0aGlzLm9wdGlvbnMucGxhY2VtZW50LmNhbGwodGhpcywgJHRpcFswXSwgdGhpcy4kZWxlbWVudFswXSkgOlxuICAgICAgICB0aGlzLm9wdGlvbnMucGxhY2VtZW50XG5cbiAgICAgIHZhciBhdXRvVG9rZW4gPSAvXFxzP2F1dG8/XFxzPy9pXG4gICAgICB2YXIgYXV0b1BsYWNlID0gYXV0b1Rva2VuLnRlc3QocGxhY2VtZW50KVxuICAgICAgaWYgKGF1dG9QbGFjZSkgcGxhY2VtZW50ID0gcGxhY2VtZW50LnJlcGxhY2UoYXV0b1Rva2VuLCAnJykgfHwgJ3RvcCdcblxuICAgICAgJHRpcFxuICAgICAgICAuZGV0YWNoKClcbiAgICAgICAgLmNzcyh7IHRvcDogMCwgbGVmdDogMCwgZGlzcGxheTogJ2Jsb2NrJyB9KVxuICAgICAgICAuYWRkQ2xhc3MocGxhY2VtZW50KVxuICAgICAgICAuZGF0YSgnYnMuJyArIHRoaXMudHlwZSwgdGhpcylcblxuICAgICAgdGhpcy5vcHRpb25zLmNvbnRhaW5lciA/ICR0aXAuYXBwZW5kVG8odGhpcy5vcHRpb25zLmNvbnRhaW5lcikgOiAkdGlwLmluc2VydEFmdGVyKHRoaXMuJGVsZW1lbnQpXG4gICAgICB0aGlzLiRlbGVtZW50LnRyaWdnZXIoJ2luc2VydGVkLmJzLicgKyB0aGlzLnR5cGUpXG5cbiAgICAgIHZhciBwb3MgICAgICAgICAgPSB0aGlzLmdldFBvc2l0aW9uKClcbiAgICAgIHZhciBhY3R1YWxXaWR0aCAgPSAkdGlwWzBdLm9mZnNldFdpZHRoXG4gICAgICB2YXIgYWN0dWFsSGVpZ2h0ID0gJHRpcFswXS5vZmZzZXRIZWlnaHRcblxuICAgICAgaWYgKGF1dG9QbGFjZSkge1xuICAgICAgICB2YXIgb3JnUGxhY2VtZW50ID0gcGxhY2VtZW50XG4gICAgICAgIHZhciB2aWV3cG9ydERpbSA9IHRoaXMuZ2V0UG9zaXRpb24odGhpcy4kdmlld3BvcnQpXG5cbiAgICAgICAgcGxhY2VtZW50ID0gcGxhY2VtZW50ID09ICdib3R0b20nICYmIHBvcy5ib3R0b20gKyBhY3R1YWxIZWlnaHQgPiB2aWV3cG9ydERpbS5ib3R0b20gPyAndG9wJyAgICA6XG4gICAgICAgICAgICAgICAgICAgIHBsYWNlbWVudCA9PSAndG9wJyAgICAmJiBwb3MudG9wICAgIC0gYWN0dWFsSGVpZ2h0IDwgdmlld3BvcnREaW0udG9wICAgID8gJ2JvdHRvbScgOlxuICAgICAgICAgICAgICAgICAgICBwbGFjZW1lbnQgPT0gJ3JpZ2h0JyAgJiYgcG9zLnJpZ2h0ICArIGFjdHVhbFdpZHRoICA+IHZpZXdwb3J0RGltLndpZHRoICA/ICdsZWZ0JyAgIDpcbiAgICAgICAgICAgICAgICAgICAgcGxhY2VtZW50ID09ICdsZWZ0JyAgICYmIHBvcy5sZWZ0ICAgLSBhY3R1YWxXaWR0aCAgPCB2aWV3cG9ydERpbS5sZWZ0ICAgPyAncmlnaHQnICA6XG4gICAgICAgICAgICAgICAgICAgIHBsYWNlbWVudFxuXG4gICAgICAgICR0aXBcbiAgICAgICAgICAucmVtb3ZlQ2xhc3Mob3JnUGxhY2VtZW50KVxuICAgICAgICAgIC5hZGRDbGFzcyhwbGFjZW1lbnQpXG4gICAgICB9XG5cbiAgICAgIHZhciBjYWxjdWxhdGVkT2Zmc2V0ID0gdGhpcy5nZXRDYWxjdWxhdGVkT2Zmc2V0KHBsYWNlbWVudCwgcG9zLCBhY3R1YWxXaWR0aCwgYWN0dWFsSGVpZ2h0KVxuXG4gICAgICB0aGlzLmFwcGx5UGxhY2VtZW50KGNhbGN1bGF0ZWRPZmZzZXQsIHBsYWNlbWVudClcblxuICAgICAgdmFyIGNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcHJldkhvdmVyU3RhdGUgPSB0aGF0LmhvdmVyU3RhdGVcbiAgICAgICAgdGhhdC4kZWxlbWVudC50cmlnZ2VyKCdzaG93bi5icy4nICsgdGhhdC50eXBlKVxuICAgICAgICB0aGF0LmhvdmVyU3RhdGUgPSBudWxsXG5cbiAgICAgICAgaWYgKHByZXZIb3ZlclN0YXRlID09ICdvdXQnKSB0aGF0LmxlYXZlKHRoYXQpXG4gICAgICB9XG5cbiAgICAgICQuc3VwcG9ydC50cmFuc2l0aW9uICYmIHRoaXMuJHRpcC5oYXNDbGFzcygnZmFkZScpID9cbiAgICAgICAgJHRpcFxuICAgICAgICAgIC5vbmUoJ2JzVHJhbnNpdGlvbkVuZCcsIGNvbXBsZXRlKVxuICAgICAgICAgIC5lbXVsYXRlVHJhbnNpdGlvbkVuZChUb29sdGlwLlRSQU5TSVRJT05fRFVSQVRJT04pIDpcbiAgICAgICAgY29tcGxldGUoKVxuICAgIH1cbiAgfVxuXG4gIFRvb2x0aXAucHJvdG90eXBlLmFwcGx5UGxhY2VtZW50ID0gZnVuY3Rpb24gKG9mZnNldCwgcGxhY2VtZW50KSB7XG4gICAgdmFyICR0aXAgICA9IHRoaXMudGlwKClcbiAgICB2YXIgd2lkdGggID0gJHRpcFswXS5vZmZzZXRXaWR0aFxuICAgIHZhciBoZWlnaHQgPSAkdGlwWzBdLm9mZnNldEhlaWdodFxuXG4gICAgLy8gbWFudWFsbHkgcmVhZCBtYXJnaW5zIGJlY2F1c2UgZ2V0Qm91bmRpbmdDbGllbnRSZWN0IGluY2x1ZGVzIGRpZmZlcmVuY2VcbiAgICB2YXIgbWFyZ2luVG9wID0gcGFyc2VJbnQoJHRpcC5jc3MoJ21hcmdpbi10b3AnKSwgMTApXG4gICAgdmFyIG1hcmdpbkxlZnQgPSBwYXJzZUludCgkdGlwLmNzcygnbWFyZ2luLWxlZnQnKSwgMTApXG5cbiAgICAvLyB3ZSBtdXN0IGNoZWNrIGZvciBOYU4gZm9yIGllIDgvOVxuICAgIGlmIChpc05hTihtYXJnaW5Ub3ApKSAgbWFyZ2luVG9wICA9IDBcbiAgICBpZiAoaXNOYU4obWFyZ2luTGVmdCkpIG1hcmdpbkxlZnQgPSAwXG5cbiAgICBvZmZzZXQudG9wICArPSBtYXJnaW5Ub3BcbiAgICBvZmZzZXQubGVmdCArPSBtYXJnaW5MZWZ0XG5cbiAgICAvLyAkLmZuLm9mZnNldCBkb2Vzbid0IHJvdW5kIHBpeGVsIHZhbHVlc1xuICAgIC8vIHNvIHdlIHVzZSBzZXRPZmZzZXQgZGlyZWN0bHkgd2l0aCBvdXIgb3duIGZ1bmN0aW9uIEItMFxuICAgICQub2Zmc2V0LnNldE9mZnNldCgkdGlwWzBdLCAkLmV4dGVuZCh7XG4gICAgICB1c2luZzogZnVuY3Rpb24gKHByb3BzKSB7XG4gICAgICAgICR0aXAuY3NzKHtcbiAgICAgICAgICB0b3A6IE1hdGgucm91bmQocHJvcHMudG9wKSxcbiAgICAgICAgICBsZWZ0OiBNYXRoLnJvdW5kKHByb3BzLmxlZnQpXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfSwgb2Zmc2V0KSwgMClcblxuICAgICR0aXAuYWRkQ2xhc3MoJ2luJylcblxuICAgIC8vIGNoZWNrIHRvIHNlZSBpZiBwbGFjaW5nIHRpcCBpbiBuZXcgb2Zmc2V0IGNhdXNlZCB0aGUgdGlwIHRvIHJlc2l6ZSBpdHNlbGZcbiAgICB2YXIgYWN0dWFsV2lkdGggID0gJHRpcFswXS5vZmZzZXRXaWR0aFxuICAgIHZhciBhY3R1YWxIZWlnaHQgPSAkdGlwWzBdLm9mZnNldEhlaWdodFxuXG4gICAgaWYgKHBsYWNlbWVudCA9PSAndG9wJyAmJiBhY3R1YWxIZWlnaHQgIT0gaGVpZ2h0KSB7XG4gICAgICBvZmZzZXQudG9wID0gb2Zmc2V0LnRvcCArIGhlaWdodCAtIGFjdHVhbEhlaWdodFxuICAgIH1cblxuICAgIHZhciBkZWx0YSA9IHRoaXMuZ2V0Vmlld3BvcnRBZGp1c3RlZERlbHRhKHBsYWNlbWVudCwgb2Zmc2V0LCBhY3R1YWxXaWR0aCwgYWN0dWFsSGVpZ2h0KVxuXG4gICAgaWYgKGRlbHRhLmxlZnQpIG9mZnNldC5sZWZ0ICs9IGRlbHRhLmxlZnRcbiAgICBlbHNlIG9mZnNldC50b3AgKz0gZGVsdGEudG9wXG5cbiAgICB2YXIgaXNWZXJ0aWNhbCAgICAgICAgICA9IC90b3B8Ym90dG9tLy50ZXN0KHBsYWNlbWVudClcbiAgICB2YXIgYXJyb3dEZWx0YSAgICAgICAgICA9IGlzVmVydGljYWwgPyBkZWx0YS5sZWZ0ICogMiAtIHdpZHRoICsgYWN0dWFsV2lkdGggOiBkZWx0YS50b3AgKiAyIC0gaGVpZ2h0ICsgYWN0dWFsSGVpZ2h0XG4gICAgdmFyIGFycm93T2Zmc2V0UG9zaXRpb24gPSBpc1ZlcnRpY2FsID8gJ29mZnNldFdpZHRoJyA6ICdvZmZzZXRIZWlnaHQnXG5cbiAgICAkdGlwLm9mZnNldChvZmZzZXQpXG4gICAgdGhpcy5yZXBsYWNlQXJyb3coYXJyb3dEZWx0YSwgJHRpcFswXVthcnJvd09mZnNldFBvc2l0aW9uXSwgaXNWZXJ0aWNhbClcbiAgfVxuXG4gIFRvb2x0aXAucHJvdG90eXBlLnJlcGxhY2VBcnJvdyA9IGZ1bmN0aW9uIChkZWx0YSwgZGltZW5zaW9uLCBpc1ZlcnRpY2FsKSB7XG4gICAgdGhpcy5hcnJvdygpXG4gICAgICAuY3NzKGlzVmVydGljYWwgPyAnbGVmdCcgOiAndG9wJywgNTAgKiAoMSAtIGRlbHRhIC8gZGltZW5zaW9uKSArICclJylcbiAgICAgIC5jc3MoaXNWZXJ0aWNhbCA/ICd0b3AnIDogJ2xlZnQnLCAnJylcbiAgfVxuXG4gIFRvb2x0aXAucHJvdG90eXBlLnNldENvbnRlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyICR0aXAgID0gdGhpcy50aXAoKVxuICAgIHZhciB0aXRsZSA9IHRoaXMuZ2V0VGl0bGUoKVxuXG4gICAgJHRpcC5maW5kKCcudG9vbHRpcC1pbm5lcicpW3RoaXMub3B0aW9ucy5odG1sID8gJ2h0bWwnIDogJ3RleHQnXSh0aXRsZSlcbiAgICAkdGlwLnJlbW92ZUNsYXNzKCdmYWRlIGluIHRvcCBib3R0b20gbGVmdCByaWdodCcpXG4gIH1cblxuICBUb29sdGlwLnByb3RvdHlwZS5oaWRlID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgdmFyIHRoYXQgPSB0aGlzXG4gICAgdmFyICR0aXAgPSAkKHRoaXMuJHRpcClcbiAgICB2YXIgZSAgICA9ICQuRXZlbnQoJ2hpZGUuYnMuJyArIHRoaXMudHlwZSlcblxuICAgIGZ1bmN0aW9uIGNvbXBsZXRlKCkge1xuICAgICAgaWYgKHRoYXQuaG92ZXJTdGF0ZSAhPSAnaW4nKSAkdGlwLmRldGFjaCgpXG4gICAgICBpZiAodGhhdC4kZWxlbWVudCkgeyAvLyBUT0RPOiBDaGVjayB3aGV0aGVyIGd1YXJkaW5nIHRoaXMgY29kZSB3aXRoIHRoaXMgYGlmYCBpcyByZWFsbHkgbmVjZXNzYXJ5LlxuICAgICAgICB0aGF0LiRlbGVtZW50XG4gICAgICAgICAgLnJlbW92ZUF0dHIoJ2FyaWEtZGVzY3JpYmVkYnknKVxuICAgICAgICAgIC50cmlnZ2VyKCdoaWRkZW4uYnMuJyArIHRoYXQudHlwZSlcbiAgICAgIH1cbiAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKClcbiAgICB9XG5cbiAgICB0aGlzLiRlbGVtZW50LnRyaWdnZXIoZSlcblxuICAgIGlmIChlLmlzRGVmYXVsdFByZXZlbnRlZCgpKSByZXR1cm5cblxuICAgICR0aXAucmVtb3ZlQ2xhc3MoJ2luJylcblxuICAgICQuc3VwcG9ydC50cmFuc2l0aW9uICYmICR0aXAuaGFzQ2xhc3MoJ2ZhZGUnKSA/XG4gICAgICAkdGlwXG4gICAgICAgIC5vbmUoJ2JzVHJhbnNpdGlvbkVuZCcsIGNvbXBsZXRlKVxuICAgICAgICAuZW11bGF0ZVRyYW5zaXRpb25FbmQoVG9vbHRpcC5UUkFOU0lUSU9OX0RVUkFUSU9OKSA6XG4gICAgICBjb21wbGV0ZSgpXG5cbiAgICB0aGlzLmhvdmVyU3RhdGUgPSBudWxsXG5cbiAgICByZXR1cm4gdGhpc1xuICB9XG5cbiAgVG9vbHRpcC5wcm90b3R5cGUuZml4VGl0bGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyICRlID0gdGhpcy4kZWxlbWVudFxuICAgIGlmICgkZS5hdHRyKCd0aXRsZScpIHx8IHR5cGVvZiAkZS5hdHRyKCdkYXRhLW9yaWdpbmFsLXRpdGxlJykgIT0gJ3N0cmluZycpIHtcbiAgICAgICRlLmF0dHIoJ2RhdGEtb3JpZ2luYWwtdGl0bGUnLCAkZS5hdHRyKCd0aXRsZScpIHx8ICcnKS5hdHRyKCd0aXRsZScsICcnKVxuICAgIH1cbiAgfVxuXG4gIFRvb2x0aXAucHJvdG90eXBlLmhhc0NvbnRlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0VGl0bGUoKVxuICB9XG5cbiAgVG9vbHRpcC5wcm90b3R5cGUuZ2V0UG9zaXRpb24gPSBmdW5jdGlvbiAoJGVsZW1lbnQpIHtcbiAgICAkZWxlbWVudCAgID0gJGVsZW1lbnQgfHwgdGhpcy4kZWxlbWVudFxuXG4gICAgdmFyIGVsICAgICA9ICRlbGVtZW50WzBdXG4gICAgdmFyIGlzQm9keSA9IGVsLnRhZ05hbWUgPT0gJ0JPRFknXG5cbiAgICB2YXIgZWxSZWN0ICAgID0gZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcbiAgICBpZiAoZWxSZWN0LndpZHRoID09IG51bGwpIHtcbiAgICAgIC8vIHdpZHRoIGFuZCBoZWlnaHQgYXJlIG1pc3NpbmcgaW4gSUU4LCBzbyBjb21wdXRlIHRoZW0gbWFudWFsbHk7IHNlZSBodHRwczovL2dpdGh1Yi5jb20vdHdicy9ib290c3RyYXAvaXNzdWVzLzE0MDkzXG4gICAgICBlbFJlY3QgPSAkLmV4dGVuZCh7fSwgZWxSZWN0LCB7IHdpZHRoOiBlbFJlY3QucmlnaHQgLSBlbFJlY3QubGVmdCwgaGVpZ2h0OiBlbFJlY3QuYm90dG9tIC0gZWxSZWN0LnRvcCB9KVxuICAgIH1cbiAgICB2YXIgaXNTdmcgPSB3aW5kb3cuU1ZHRWxlbWVudCAmJiBlbCBpbnN0YW5jZW9mIHdpbmRvdy5TVkdFbGVtZW50XG4gICAgLy8gQXZvaWQgdXNpbmcgJC5vZmZzZXQoKSBvbiBTVkdzIHNpbmNlIGl0IGdpdmVzIGluY29ycmVjdCByZXN1bHRzIGluIGpRdWVyeSAzLlxuICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vdHdicy9ib290c3RyYXAvaXNzdWVzLzIwMjgwXG4gICAgdmFyIGVsT2Zmc2V0ICA9IGlzQm9keSA/IHsgdG9wOiAwLCBsZWZ0OiAwIH0gOiAoaXNTdmcgPyBudWxsIDogJGVsZW1lbnQub2Zmc2V0KCkpXG4gICAgdmFyIHNjcm9sbCAgICA9IHsgc2Nyb2xsOiBpc0JvZHkgPyBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wIHx8IGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wIDogJGVsZW1lbnQuc2Nyb2xsVG9wKCkgfVxuICAgIHZhciBvdXRlckRpbXMgPSBpc0JvZHkgPyB7IHdpZHRoOiAkKHdpbmRvdykud2lkdGgoKSwgaGVpZ2h0OiAkKHdpbmRvdykuaGVpZ2h0KCkgfSA6IG51bGxcblxuICAgIHJldHVybiAkLmV4dGVuZCh7fSwgZWxSZWN0LCBzY3JvbGwsIG91dGVyRGltcywgZWxPZmZzZXQpXG4gIH1cblxuICBUb29sdGlwLnByb3RvdHlwZS5nZXRDYWxjdWxhdGVkT2Zmc2V0ID0gZnVuY3Rpb24gKHBsYWNlbWVudCwgcG9zLCBhY3R1YWxXaWR0aCwgYWN0dWFsSGVpZ2h0KSB7XG4gICAgcmV0dXJuIHBsYWNlbWVudCA9PSAnYm90dG9tJyA/IHsgdG9wOiBwb3MudG9wICsgcG9zLmhlaWdodCwgICBsZWZ0OiBwb3MubGVmdCArIHBvcy53aWR0aCAvIDIgLSBhY3R1YWxXaWR0aCAvIDIgfSA6XG4gICAgICAgICAgIHBsYWNlbWVudCA9PSAndG9wJyAgICA/IHsgdG9wOiBwb3MudG9wIC0gYWN0dWFsSGVpZ2h0LCBsZWZ0OiBwb3MubGVmdCArIHBvcy53aWR0aCAvIDIgLSBhY3R1YWxXaWR0aCAvIDIgfSA6XG4gICAgICAgICAgIHBsYWNlbWVudCA9PSAnbGVmdCcgICA/IHsgdG9wOiBwb3MudG9wICsgcG9zLmhlaWdodCAvIDIgLSBhY3R1YWxIZWlnaHQgLyAyLCBsZWZ0OiBwb3MubGVmdCAtIGFjdHVhbFdpZHRoIH0gOlxuICAgICAgICAvKiBwbGFjZW1lbnQgPT0gJ3JpZ2h0JyAqLyB7IHRvcDogcG9zLnRvcCArIHBvcy5oZWlnaHQgLyAyIC0gYWN0dWFsSGVpZ2h0IC8gMiwgbGVmdDogcG9zLmxlZnQgKyBwb3Mud2lkdGggfVxuXG4gIH1cblxuICBUb29sdGlwLnByb3RvdHlwZS5nZXRWaWV3cG9ydEFkanVzdGVkRGVsdGEgPSBmdW5jdGlvbiAocGxhY2VtZW50LCBwb3MsIGFjdHVhbFdpZHRoLCBhY3R1YWxIZWlnaHQpIHtcbiAgICB2YXIgZGVsdGEgPSB7IHRvcDogMCwgbGVmdDogMCB9XG4gICAgaWYgKCF0aGlzLiR2aWV3cG9ydCkgcmV0dXJuIGRlbHRhXG5cbiAgICB2YXIgdmlld3BvcnRQYWRkaW5nID0gdGhpcy5vcHRpb25zLnZpZXdwb3J0ICYmIHRoaXMub3B0aW9ucy52aWV3cG9ydC5wYWRkaW5nIHx8IDBcbiAgICB2YXIgdmlld3BvcnREaW1lbnNpb25zID0gdGhpcy5nZXRQb3NpdGlvbih0aGlzLiR2aWV3cG9ydClcblxuICAgIGlmICgvcmlnaHR8bGVmdC8udGVzdChwbGFjZW1lbnQpKSB7XG4gICAgICB2YXIgdG9wRWRnZU9mZnNldCAgICA9IHBvcy50b3AgLSB2aWV3cG9ydFBhZGRpbmcgLSB2aWV3cG9ydERpbWVuc2lvbnMuc2Nyb2xsXG4gICAgICB2YXIgYm90dG9tRWRnZU9mZnNldCA9IHBvcy50b3AgKyB2aWV3cG9ydFBhZGRpbmcgLSB2aWV3cG9ydERpbWVuc2lvbnMuc2Nyb2xsICsgYWN0dWFsSGVpZ2h0XG4gICAgICBpZiAodG9wRWRnZU9mZnNldCA8IHZpZXdwb3J0RGltZW5zaW9ucy50b3ApIHsgLy8gdG9wIG92ZXJmbG93XG4gICAgICAgIGRlbHRhLnRvcCA9IHZpZXdwb3J0RGltZW5zaW9ucy50b3AgLSB0b3BFZGdlT2Zmc2V0XG4gICAgICB9IGVsc2UgaWYgKGJvdHRvbUVkZ2VPZmZzZXQgPiB2aWV3cG9ydERpbWVuc2lvbnMudG9wICsgdmlld3BvcnREaW1lbnNpb25zLmhlaWdodCkgeyAvLyBib3R0b20gb3ZlcmZsb3dcbiAgICAgICAgZGVsdGEudG9wID0gdmlld3BvcnREaW1lbnNpb25zLnRvcCArIHZpZXdwb3J0RGltZW5zaW9ucy5oZWlnaHQgLSBib3R0b21FZGdlT2Zmc2V0XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBsZWZ0RWRnZU9mZnNldCAgPSBwb3MubGVmdCAtIHZpZXdwb3J0UGFkZGluZ1xuICAgICAgdmFyIHJpZ2h0RWRnZU9mZnNldCA9IHBvcy5sZWZ0ICsgdmlld3BvcnRQYWRkaW5nICsgYWN0dWFsV2lkdGhcbiAgICAgIGlmIChsZWZ0RWRnZU9mZnNldCA8IHZpZXdwb3J0RGltZW5zaW9ucy5sZWZ0KSB7IC8vIGxlZnQgb3ZlcmZsb3dcbiAgICAgICAgZGVsdGEubGVmdCA9IHZpZXdwb3J0RGltZW5zaW9ucy5sZWZ0IC0gbGVmdEVkZ2VPZmZzZXRcbiAgICAgIH0gZWxzZSBpZiAocmlnaHRFZGdlT2Zmc2V0ID4gdmlld3BvcnREaW1lbnNpb25zLnJpZ2h0KSB7IC8vIHJpZ2h0IG92ZXJmbG93XG4gICAgICAgIGRlbHRhLmxlZnQgPSB2aWV3cG9ydERpbWVuc2lvbnMubGVmdCArIHZpZXdwb3J0RGltZW5zaW9ucy53aWR0aCAtIHJpZ2h0RWRnZU9mZnNldFxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBkZWx0YVxuICB9XG5cbiAgVG9vbHRpcC5wcm90b3R5cGUuZ2V0VGl0bGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHRpdGxlXG4gICAgdmFyICRlID0gdGhpcy4kZWxlbWVudFxuICAgIHZhciBvICA9IHRoaXMub3B0aW9uc1xuXG4gICAgdGl0bGUgPSAkZS5hdHRyKCdkYXRhLW9yaWdpbmFsLXRpdGxlJylcbiAgICAgIHx8ICh0eXBlb2Ygby50aXRsZSA9PSAnZnVuY3Rpb24nID8gby50aXRsZS5jYWxsKCRlWzBdKSA6ICBvLnRpdGxlKVxuXG4gICAgcmV0dXJuIHRpdGxlXG4gIH1cblxuICBUb29sdGlwLnByb3RvdHlwZS5nZXRVSUQgPSBmdW5jdGlvbiAocHJlZml4KSB7XG4gICAgZG8gcHJlZml4ICs9IH5+KE1hdGgucmFuZG9tKCkgKiAxMDAwMDAwKVxuICAgIHdoaWxlIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChwcmVmaXgpKVxuICAgIHJldHVybiBwcmVmaXhcbiAgfVxuXG4gIFRvb2x0aXAucHJvdG90eXBlLnRpcCA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIXRoaXMuJHRpcCkge1xuICAgICAgdGhpcy4kdGlwID0gJCh0aGlzLm9wdGlvbnMudGVtcGxhdGUpXG4gICAgICBpZiAodGhpcy4kdGlwLmxlbmd0aCAhPSAxKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcih0aGlzLnR5cGUgKyAnIGB0ZW1wbGF0ZWAgb3B0aW9uIG11c3QgY29uc2lzdCBvZiBleGFjdGx5IDEgdG9wLWxldmVsIGVsZW1lbnQhJylcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuJHRpcFxuICB9XG5cbiAgVG9vbHRpcC5wcm90b3R5cGUuYXJyb3cgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuICh0aGlzLiRhcnJvdyA9IHRoaXMuJGFycm93IHx8IHRoaXMudGlwKCkuZmluZCgnLnRvb2x0aXAtYXJyb3cnKSlcbiAgfVxuXG4gIFRvb2x0aXAucHJvdG90eXBlLmVuYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmVuYWJsZWQgPSB0cnVlXG4gIH1cblxuICBUb29sdGlwLnByb3RvdHlwZS5kaXNhYmxlID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZW5hYmxlZCA9IGZhbHNlXG4gIH1cblxuICBUb29sdGlwLnByb3RvdHlwZS50b2dnbGVFbmFibGVkID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZW5hYmxlZCA9ICF0aGlzLmVuYWJsZWRcbiAgfVxuXG4gIFRvb2x0aXAucHJvdG90eXBlLnRvZ2dsZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzXG4gICAgaWYgKGUpIHtcbiAgICAgIHNlbGYgPSAkKGUuY3VycmVudFRhcmdldCkuZGF0YSgnYnMuJyArIHRoaXMudHlwZSlcbiAgICAgIGlmICghc2VsZikge1xuICAgICAgICBzZWxmID0gbmV3IHRoaXMuY29uc3RydWN0b3IoZS5jdXJyZW50VGFyZ2V0LCB0aGlzLmdldERlbGVnYXRlT3B0aW9ucygpKVxuICAgICAgICAkKGUuY3VycmVudFRhcmdldCkuZGF0YSgnYnMuJyArIHRoaXMudHlwZSwgc2VsZilcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoZSkge1xuICAgICAgc2VsZi5pblN0YXRlLmNsaWNrID0gIXNlbGYuaW5TdGF0ZS5jbGlja1xuICAgICAgaWYgKHNlbGYuaXNJblN0YXRlVHJ1ZSgpKSBzZWxmLmVudGVyKHNlbGYpXG4gICAgICBlbHNlIHNlbGYubGVhdmUoc2VsZilcbiAgICB9IGVsc2Uge1xuICAgICAgc2VsZi50aXAoKS5oYXNDbGFzcygnaW4nKSA/IHNlbGYubGVhdmUoc2VsZikgOiBzZWxmLmVudGVyKHNlbGYpXG4gICAgfVxuICB9XG5cbiAgVG9vbHRpcC5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgdGhhdCA9IHRoaXNcbiAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lb3V0KVxuICAgIHRoaXMuaGlkZShmdW5jdGlvbiAoKSB7XG4gICAgICB0aGF0LiRlbGVtZW50Lm9mZignLicgKyB0aGF0LnR5cGUpLnJlbW92ZURhdGEoJ2JzLicgKyB0aGF0LnR5cGUpXG4gICAgICBpZiAodGhhdC4kdGlwKSB7XG4gICAgICAgIHRoYXQuJHRpcC5kZXRhY2goKVxuICAgICAgfVxuICAgICAgdGhhdC4kdGlwID0gbnVsbFxuICAgICAgdGhhdC4kYXJyb3cgPSBudWxsXG4gICAgICB0aGF0LiR2aWV3cG9ydCA9IG51bGxcbiAgICAgIHRoYXQuJGVsZW1lbnQgPSBudWxsXG4gICAgfSlcbiAgfVxuXG5cbiAgLy8gVE9PTFRJUCBQTFVHSU4gREVGSU5JVElPTlxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgZnVuY3Rpb24gUGx1Z2luKG9wdGlvbikge1xuICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgdmFyICR0aGlzICAgPSAkKHRoaXMpXG4gICAgICB2YXIgZGF0YSAgICA9ICR0aGlzLmRhdGEoJ2JzLnRvb2x0aXAnKVxuICAgICAgdmFyIG9wdGlvbnMgPSB0eXBlb2Ygb3B0aW9uID09ICdvYmplY3QnICYmIG9wdGlvblxuXG4gICAgICBpZiAoIWRhdGEgJiYgL2Rlc3Ryb3l8aGlkZS8udGVzdChvcHRpb24pKSByZXR1cm5cbiAgICAgIGlmICghZGF0YSkgJHRoaXMuZGF0YSgnYnMudG9vbHRpcCcsIChkYXRhID0gbmV3IFRvb2x0aXAodGhpcywgb3B0aW9ucykpKVxuICAgICAgaWYgKHR5cGVvZiBvcHRpb24gPT0gJ3N0cmluZycpIGRhdGFbb3B0aW9uXSgpXG4gICAgfSlcbiAgfVxuXG4gIHZhciBvbGQgPSAkLmZuLnRvb2x0aXBcblxuICAkLmZuLnRvb2x0aXAgICAgICAgICAgICAgPSBQbHVnaW5cbiAgJC5mbi50b29sdGlwLkNvbnN0cnVjdG9yID0gVG9vbHRpcFxuXG5cbiAgLy8gVE9PTFRJUCBOTyBDT05GTElDVFxuICAvLyA9PT09PT09PT09PT09PT09PT09XG5cbiAgJC5mbi50b29sdGlwLm5vQ29uZmxpY3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgJC5mbi50b29sdGlwID0gb2xkXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG59KGpRdWVyeSk7XG5cbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICogQm9vdHN0cmFwOiBwb3BvdmVyLmpzIHYzLjMuN1xuICogaHR0cDovL2dldGJvb3RzdHJhcC5jb20vamF2YXNjcmlwdC8jcG9wb3ZlcnNcbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICogQ29weXJpZ2h0IDIwMTEtMjAxNiBUd2l0dGVyLCBJbmMuXG4gKiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ibG9iL21hc3Rlci9MSUNFTlNFKVxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXG5cblxuK2Z1bmN0aW9uICgkKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICAvLyBQT1BPVkVSIFBVQkxJQyBDTEFTUyBERUZJTklUSU9OXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICB2YXIgUG9wb3ZlciA9IGZ1bmN0aW9uIChlbGVtZW50LCBvcHRpb25zKSB7XG4gICAgdGhpcy5pbml0KCdwb3BvdmVyJywgZWxlbWVudCwgb3B0aW9ucylcbiAgfVxuXG4gIGlmICghJC5mbi50b29sdGlwKSB0aHJvdyBuZXcgRXJyb3IoJ1BvcG92ZXIgcmVxdWlyZXMgdG9vbHRpcC5qcycpXG5cbiAgUG9wb3Zlci5WRVJTSU9OICA9ICczLjMuNydcblxuICBQb3BvdmVyLkRFRkFVTFRTID0gJC5leHRlbmQoe30sICQuZm4udG9vbHRpcC5Db25zdHJ1Y3Rvci5ERUZBVUxUUywge1xuICAgIHBsYWNlbWVudDogJ3JpZ2h0JyxcbiAgICB0cmlnZ2VyOiAnY2xpY2snLFxuICAgIGNvbnRlbnQ6ICcnLFxuICAgIHRlbXBsYXRlOiAnPGRpdiBjbGFzcz1cInBvcG92ZXJcIiByb2xlPVwidG9vbHRpcFwiPjxkaXYgY2xhc3M9XCJhcnJvd1wiPjwvZGl2PjxoMyBjbGFzcz1cInBvcG92ZXItdGl0bGVcIj48L2gzPjxkaXYgY2xhc3M9XCJwb3BvdmVyLWNvbnRlbnRcIj48L2Rpdj48L2Rpdj4nXG4gIH0pXG5cblxuICAvLyBOT1RFOiBQT1BPVkVSIEVYVEVORFMgdG9vbHRpcC5qc1xuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gIFBvcG92ZXIucHJvdG90eXBlID0gJC5leHRlbmQoe30sICQuZm4udG9vbHRpcC5Db25zdHJ1Y3Rvci5wcm90b3R5cGUpXG5cbiAgUG9wb3Zlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBQb3BvdmVyXG5cbiAgUG9wb3Zlci5wcm90b3R5cGUuZ2V0RGVmYXVsdHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIFBvcG92ZXIuREVGQVVMVFNcbiAgfVxuXG4gIFBvcG92ZXIucHJvdG90eXBlLnNldENvbnRlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyICR0aXAgICAgPSB0aGlzLnRpcCgpXG4gICAgdmFyIHRpdGxlICAgPSB0aGlzLmdldFRpdGxlKClcbiAgICB2YXIgY29udGVudCA9IHRoaXMuZ2V0Q29udGVudCgpXG5cbiAgICAkdGlwLmZpbmQoJy5wb3BvdmVyLXRpdGxlJylbdGhpcy5vcHRpb25zLmh0bWwgPyAnaHRtbCcgOiAndGV4dCddKHRpdGxlKVxuICAgICR0aXAuZmluZCgnLnBvcG92ZXItY29udGVudCcpLmNoaWxkcmVuKCkuZGV0YWNoKCkuZW5kKClbIC8vIHdlIHVzZSBhcHBlbmQgZm9yIGh0bWwgb2JqZWN0cyB0byBtYWludGFpbiBqcyBldmVudHNcbiAgICAgIHRoaXMub3B0aW9ucy5odG1sID8gKHR5cGVvZiBjb250ZW50ID09ICdzdHJpbmcnID8gJ2h0bWwnIDogJ2FwcGVuZCcpIDogJ3RleHQnXG4gICAgXShjb250ZW50KVxuXG4gICAgJHRpcC5yZW1vdmVDbGFzcygnZmFkZSB0b3AgYm90dG9tIGxlZnQgcmlnaHQgaW4nKVxuXG4gICAgLy8gSUU4IGRvZXNuJ3QgYWNjZXB0IGhpZGluZyB2aWEgdGhlIGA6ZW1wdHlgIHBzZXVkbyBzZWxlY3Rvciwgd2UgaGF2ZSB0byBkb1xuICAgIC8vIHRoaXMgbWFudWFsbHkgYnkgY2hlY2tpbmcgdGhlIGNvbnRlbnRzLlxuICAgIGlmICghJHRpcC5maW5kKCcucG9wb3Zlci10aXRsZScpLmh0bWwoKSkgJHRpcC5maW5kKCcucG9wb3Zlci10aXRsZScpLmhpZGUoKVxuICB9XG5cbiAgUG9wb3Zlci5wcm90b3R5cGUuaGFzQ29udGVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRUaXRsZSgpIHx8IHRoaXMuZ2V0Q29udGVudCgpXG4gIH1cblxuICBQb3BvdmVyLnByb3RvdHlwZS5nZXRDb250ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciAkZSA9IHRoaXMuJGVsZW1lbnRcbiAgICB2YXIgbyAgPSB0aGlzLm9wdGlvbnNcblxuICAgIHJldHVybiAkZS5hdHRyKCdkYXRhLWNvbnRlbnQnKVxuICAgICAgfHwgKHR5cGVvZiBvLmNvbnRlbnQgPT0gJ2Z1bmN0aW9uJyA/XG4gICAgICAgICAgICBvLmNvbnRlbnQuY2FsbCgkZVswXSkgOlxuICAgICAgICAgICAgby5jb250ZW50KVxuICB9XG5cbiAgUG9wb3Zlci5wcm90b3R5cGUuYXJyb3cgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuICh0aGlzLiRhcnJvdyA9IHRoaXMuJGFycm93IHx8IHRoaXMudGlwKCkuZmluZCgnLmFycm93JykpXG4gIH1cblxuXG4gIC8vIFBPUE9WRVIgUExVR0lOIERFRklOSVRJT05cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gIGZ1bmN0aW9uIFBsdWdpbihvcHRpb24pIHtcbiAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciAkdGhpcyAgID0gJCh0aGlzKVxuICAgICAgdmFyIGRhdGEgICAgPSAkdGhpcy5kYXRhKCdicy5wb3BvdmVyJylcbiAgICAgIHZhciBvcHRpb25zID0gdHlwZW9mIG9wdGlvbiA9PSAnb2JqZWN0JyAmJiBvcHRpb25cblxuICAgICAgaWYgKCFkYXRhICYmIC9kZXN0cm95fGhpZGUvLnRlc3Qob3B0aW9uKSkgcmV0dXJuXG4gICAgICBpZiAoIWRhdGEpICR0aGlzLmRhdGEoJ2JzLnBvcG92ZXInLCAoZGF0YSA9IG5ldyBQb3BvdmVyKHRoaXMsIG9wdGlvbnMpKSlcbiAgICAgIGlmICh0eXBlb2Ygb3B0aW9uID09ICdzdHJpbmcnKSBkYXRhW29wdGlvbl0oKVxuICAgIH0pXG4gIH1cblxuICB2YXIgb2xkID0gJC5mbi5wb3BvdmVyXG5cbiAgJC5mbi5wb3BvdmVyICAgICAgICAgICAgID0gUGx1Z2luXG4gICQuZm4ucG9wb3Zlci5Db25zdHJ1Y3RvciA9IFBvcG92ZXJcblxuXG4gIC8vIFBPUE9WRVIgTk8gQ09ORkxJQ1RcbiAgLy8gPT09PT09PT09PT09PT09PT09PVxuXG4gICQuZm4ucG9wb3Zlci5ub0NvbmZsaWN0ID0gZnVuY3Rpb24gKCkge1xuICAgICQuZm4ucG9wb3ZlciA9IG9sZFxuICAgIHJldHVybiB0aGlzXG4gIH1cblxufShqUXVlcnkpO1xuXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIEJvb3RzdHJhcDogc2Nyb2xsc3B5LmpzIHYzLjMuN1xuICogaHR0cDovL2dldGJvb3RzdHJhcC5jb20vamF2YXNjcmlwdC8jc2Nyb2xsc3B5XG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIENvcHlyaWdodCAyMDExLTIwMTYgVHdpdHRlciwgSW5jLlxuICogTGljZW5zZWQgdW5kZXIgTUlUIChodHRwczovL2dpdGh1Yi5jb20vdHdicy9ib290c3RyYXAvYmxvYi9tYXN0ZXIvTElDRU5TRSlcbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xuXG5cbitmdW5jdGlvbiAoJCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgLy8gU0NST0xMU1BZIENMQVNTIERFRklOSVRJT05cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICBmdW5jdGlvbiBTY3JvbGxTcHkoZWxlbWVudCwgb3B0aW9ucykge1xuICAgIHRoaXMuJGJvZHkgICAgICAgICAgPSAkKGRvY3VtZW50LmJvZHkpXG4gICAgdGhpcy4kc2Nyb2xsRWxlbWVudCA9ICQoZWxlbWVudCkuaXMoZG9jdW1lbnQuYm9keSkgPyAkKHdpbmRvdykgOiAkKGVsZW1lbnQpXG4gICAgdGhpcy5vcHRpb25zICAgICAgICA9ICQuZXh0ZW5kKHt9LCBTY3JvbGxTcHkuREVGQVVMVFMsIG9wdGlvbnMpXG4gICAgdGhpcy5zZWxlY3RvciAgICAgICA9ICh0aGlzLm9wdGlvbnMudGFyZ2V0IHx8ICcnKSArICcgLm5hdiBsaSA+IGEnXG4gICAgdGhpcy5vZmZzZXRzICAgICAgICA9IFtdXG4gICAgdGhpcy50YXJnZXRzICAgICAgICA9IFtdXG4gICAgdGhpcy5hY3RpdmVUYXJnZXQgICA9IG51bGxcbiAgICB0aGlzLnNjcm9sbEhlaWdodCAgID0gMFxuXG4gICAgdGhpcy4kc2Nyb2xsRWxlbWVudC5vbignc2Nyb2xsLmJzLnNjcm9sbHNweScsICQucHJveHkodGhpcy5wcm9jZXNzLCB0aGlzKSlcbiAgICB0aGlzLnJlZnJlc2goKVxuICAgIHRoaXMucHJvY2VzcygpXG4gIH1cblxuICBTY3JvbGxTcHkuVkVSU0lPTiAgPSAnMy4zLjcnXG5cbiAgU2Nyb2xsU3B5LkRFRkFVTFRTID0ge1xuICAgIG9mZnNldDogMTBcbiAgfVxuXG4gIFNjcm9sbFNweS5wcm90b3R5cGUuZ2V0U2Nyb2xsSGVpZ2h0ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLiRzY3JvbGxFbGVtZW50WzBdLnNjcm9sbEhlaWdodCB8fCBNYXRoLm1heCh0aGlzLiRib2R5WzBdLnNjcm9sbEhlaWdodCwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbEhlaWdodClcbiAgfVxuXG4gIFNjcm9sbFNweS5wcm90b3R5cGUucmVmcmVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgdGhhdCAgICAgICAgICA9IHRoaXNcbiAgICB2YXIgb2Zmc2V0TWV0aG9kICA9ICdvZmZzZXQnXG4gICAgdmFyIG9mZnNldEJhc2UgICAgPSAwXG5cbiAgICB0aGlzLm9mZnNldHMgICAgICA9IFtdXG4gICAgdGhpcy50YXJnZXRzICAgICAgPSBbXVxuICAgIHRoaXMuc2Nyb2xsSGVpZ2h0ID0gdGhpcy5nZXRTY3JvbGxIZWlnaHQoKVxuXG4gICAgaWYgKCEkLmlzV2luZG93KHRoaXMuJHNjcm9sbEVsZW1lbnRbMF0pKSB7XG4gICAgICBvZmZzZXRNZXRob2QgPSAncG9zaXRpb24nXG4gICAgICBvZmZzZXRCYXNlICAgPSB0aGlzLiRzY3JvbGxFbGVtZW50LnNjcm9sbFRvcCgpXG4gICAgfVxuXG4gICAgdGhpcy4kYm9keVxuICAgICAgLmZpbmQodGhpcy5zZWxlY3RvcilcbiAgICAgIC5tYXAoZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgJGVsICAgPSAkKHRoaXMpXG4gICAgICAgIHZhciBocmVmICA9ICRlbC5kYXRhKCd0YXJnZXQnKSB8fCAkZWwuYXR0cignaHJlZicpXG4gICAgICAgIHZhciAkaHJlZiA9IC9eIy4vLnRlc3QoaHJlZikgJiYgJChocmVmKVxuXG4gICAgICAgIHJldHVybiAoJGhyZWZcbiAgICAgICAgICAmJiAkaHJlZi5sZW5ndGhcbiAgICAgICAgICAmJiAkaHJlZi5pcygnOnZpc2libGUnKVxuICAgICAgICAgICYmIFtbJGhyZWZbb2Zmc2V0TWV0aG9kXSgpLnRvcCArIG9mZnNldEJhc2UsIGhyZWZdXSkgfHwgbnVsbFxuICAgICAgfSlcbiAgICAgIC5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7IHJldHVybiBhWzBdIC0gYlswXSB9KVxuICAgICAgLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGF0Lm9mZnNldHMucHVzaCh0aGlzWzBdKVxuICAgICAgICB0aGF0LnRhcmdldHMucHVzaCh0aGlzWzFdKVxuICAgICAgfSlcbiAgfVxuXG4gIFNjcm9sbFNweS5wcm90b3R5cGUucHJvY2VzcyA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2Nyb2xsVG9wICAgID0gdGhpcy4kc2Nyb2xsRWxlbWVudC5zY3JvbGxUb3AoKSArIHRoaXMub3B0aW9ucy5vZmZzZXRcbiAgICB2YXIgc2Nyb2xsSGVpZ2h0ID0gdGhpcy5nZXRTY3JvbGxIZWlnaHQoKVxuICAgIHZhciBtYXhTY3JvbGwgICAgPSB0aGlzLm9wdGlvbnMub2Zmc2V0ICsgc2Nyb2xsSGVpZ2h0IC0gdGhpcy4kc2Nyb2xsRWxlbWVudC5oZWlnaHQoKVxuICAgIHZhciBvZmZzZXRzICAgICAgPSB0aGlzLm9mZnNldHNcbiAgICB2YXIgdGFyZ2V0cyAgICAgID0gdGhpcy50YXJnZXRzXG4gICAgdmFyIGFjdGl2ZVRhcmdldCA9IHRoaXMuYWN0aXZlVGFyZ2V0XG4gICAgdmFyIGlcblxuICAgIGlmICh0aGlzLnNjcm9sbEhlaWdodCAhPSBzY3JvbGxIZWlnaHQpIHtcbiAgICAgIHRoaXMucmVmcmVzaCgpXG4gICAgfVxuXG4gICAgaWYgKHNjcm9sbFRvcCA+PSBtYXhTY3JvbGwpIHtcbiAgICAgIHJldHVybiBhY3RpdmVUYXJnZXQgIT0gKGkgPSB0YXJnZXRzW3RhcmdldHMubGVuZ3RoIC0gMV0pICYmIHRoaXMuYWN0aXZhdGUoaSlcbiAgICB9XG5cbiAgICBpZiAoYWN0aXZlVGFyZ2V0ICYmIHNjcm9sbFRvcCA8IG9mZnNldHNbMF0pIHtcbiAgICAgIHRoaXMuYWN0aXZlVGFyZ2V0ID0gbnVsbFxuICAgICAgcmV0dXJuIHRoaXMuY2xlYXIoKVxuICAgIH1cblxuICAgIGZvciAoaSA9IG9mZnNldHMubGVuZ3RoOyBpLS07KSB7XG4gICAgICBhY3RpdmVUYXJnZXQgIT0gdGFyZ2V0c1tpXVxuICAgICAgICAmJiBzY3JvbGxUb3AgPj0gb2Zmc2V0c1tpXVxuICAgICAgICAmJiAob2Zmc2V0c1tpICsgMV0gPT09IHVuZGVmaW5lZCB8fCBzY3JvbGxUb3AgPCBvZmZzZXRzW2kgKyAxXSlcbiAgICAgICAgJiYgdGhpcy5hY3RpdmF0ZSh0YXJnZXRzW2ldKVxuICAgIH1cbiAgfVxuXG4gIFNjcm9sbFNweS5wcm90b3R5cGUuYWN0aXZhdGUgPSBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgdGhpcy5hY3RpdmVUYXJnZXQgPSB0YXJnZXRcblxuICAgIHRoaXMuY2xlYXIoKVxuXG4gICAgdmFyIHNlbGVjdG9yID0gdGhpcy5zZWxlY3RvciArXG4gICAgICAnW2RhdGEtdGFyZ2V0PVwiJyArIHRhcmdldCArICdcIl0sJyArXG4gICAgICB0aGlzLnNlbGVjdG9yICsgJ1tocmVmPVwiJyArIHRhcmdldCArICdcIl0nXG5cbiAgICB2YXIgYWN0aXZlID0gJChzZWxlY3RvcilcbiAgICAgIC5wYXJlbnRzKCdsaScpXG4gICAgICAuYWRkQ2xhc3MoJ2FjdGl2ZScpXG5cbiAgICBpZiAoYWN0aXZlLnBhcmVudCgnLmRyb3Bkb3duLW1lbnUnKS5sZW5ndGgpIHtcbiAgICAgIGFjdGl2ZSA9IGFjdGl2ZVxuICAgICAgICAuY2xvc2VzdCgnbGkuZHJvcGRvd24nKVxuICAgICAgICAuYWRkQ2xhc3MoJ2FjdGl2ZScpXG4gICAgfVxuXG4gICAgYWN0aXZlLnRyaWdnZXIoJ2FjdGl2YXRlLmJzLnNjcm9sbHNweScpXG4gIH1cblxuICBTY3JvbGxTcHkucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkge1xuICAgICQodGhpcy5zZWxlY3RvcilcbiAgICAgIC5wYXJlbnRzVW50aWwodGhpcy5vcHRpb25zLnRhcmdldCwgJy5hY3RpdmUnKVxuICAgICAgLnJlbW92ZUNsYXNzKCdhY3RpdmUnKVxuICB9XG5cblxuICAvLyBTQ1JPTExTUFkgUExVR0lOIERFRklOSVRJT05cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgZnVuY3Rpb24gUGx1Z2luKG9wdGlvbikge1xuICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgdmFyICR0aGlzICAgPSAkKHRoaXMpXG4gICAgICB2YXIgZGF0YSAgICA9ICR0aGlzLmRhdGEoJ2JzLnNjcm9sbHNweScpXG4gICAgICB2YXIgb3B0aW9ucyA9IHR5cGVvZiBvcHRpb24gPT0gJ29iamVjdCcgJiYgb3B0aW9uXG5cbiAgICAgIGlmICghZGF0YSkgJHRoaXMuZGF0YSgnYnMuc2Nyb2xsc3B5JywgKGRhdGEgPSBuZXcgU2Nyb2xsU3B5KHRoaXMsIG9wdGlvbnMpKSlcbiAgICAgIGlmICh0eXBlb2Ygb3B0aW9uID09ICdzdHJpbmcnKSBkYXRhW29wdGlvbl0oKVxuICAgIH0pXG4gIH1cblxuICB2YXIgb2xkID0gJC5mbi5zY3JvbGxzcHlcblxuICAkLmZuLnNjcm9sbHNweSAgICAgICAgICAgICA9IFBsdWdpblxuICAkLmZuLnNjcm9sbHNweS5Db25zdHJ1Y3RvciA9IFNjcm9sbFNweVxuXG5cbiAgLy8gU0NST0xMU1BZIE5PIENPTkZMSUNUXG4gIC8vID09PT09PT09PT09PT09PT09PT09PVxuXG4gICQuZm4uc2Nyb2xsc3B5Lm5vQ29uZmxpY3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgJC5mbi5zY3JvbGxzcHkgPSBvbGRcbiAgICByZXR1cm4gdGhpc1xuICB9XG5cblxuICAvLyBTQ1JPTExTUFkgREFUQS1BUElcbiAgLy8gPT09PT09PT09PT09PT09PT09XG5cbiAgJCh3aW5kb3cpLm9uKCdsb2FkLmJzLnNjcm9sbHNweS5kYXRhLWFwaScsIGZ1bmN0aW9uICgpIHtcbiAgICAkKCdbZGF0YS1zcHk9XCJzY3JvbGxcIl0nKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciAkc3B5ID0gJCh0aGlzKVxuICAgICAgUGx1Z2luLmNhbGwoJHNweSwgJHNweS5kYXRhKCkpXG4gICAgfSlcbiAgfSlcblxufShqUXVlcnkpO1xuXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIEJvb3RzdHJhcDogdGFiLmpzIHYzLjMuN1xuICogaHR0cDovL2dldGJvb3RzdHJhcC5jb20vamF2YXNjcmlwdC8jdGFic1xuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKiBDb3B5cmlnaHQgMjAxMS0yMDE2IFR3aXR0ZXIsIEluYy5cbiAqIExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2Jsb2IvbWFzdGVyL0xJQ0VOU0UpXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cblxuXG4rZnVuY3Rpb24gKCQpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIC8vIFRBQiBDTEFTUyBERUZJTklUSU9OXG4gIC8vID09PT09PT09PT09PT09PT09PT09XG5cbiAgdmFyIFRhYiA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgLy8ganNjczpkaXNhYmxlIHJlcXVpcmVEb2xsYXJCZWZvcmVqUXVlcnlBc3NpZ25tZW50XG4gICAgdGhpcy5lbGVtZW50ID0gJChlbGVtZW50KVxuICAgIC8vIGpzY3M6ZW5hYmxlIHJlcXVpcmVEb2xsYXJCZWZvcmVqUXVlcnlBc3NpZ25tZW50XG4gIH1cblxuICBUYWIuVkVSU0lPTiA9ICczLjMuNydcblxuICBUYWIuVFJBTlNJVElPTl9EVVJBVElPTiA9IDE1MFxuXG4gIFRhYi5wcm90b3R5cGUuc2hvdyA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgJHRoaXMgICAgPSB0aGlzLmVsZW1lbnRcbiAgICB2YXIgJHVsICAgICAgPSAkdGhpcy5jbG9zZXN0KCd1bDpub3QoLmRyb3Bkb3duLW1lbnUpJylcbiAgICB2YXIgc2VsZWN0b3IgPSAkdGhpcy5kYXRhKCd0YXJnZXQnKVxuXG4gICAgaWYgKCFzZWxlY3Rvcikge1xuICAgICAgc2VsZWN0b3IgPSAkdGhpcy5hdHRyKCdocmVmJylcbiAgICAgIHNlbGVjdG9yID0gc2VsZWN0b3IgJiYgc2VsZWN0b3IucmVwbGFjZSgvLiooPz0jW15cXHNdKiQpLywgJycpIC8vIHN0cmlwIGZvciBpZTdcbiAgICB9XG5cbiAgICBpZiAoJHRoaXMucGFyZW50KCdsaScpLmhhc0NsYXNzKCdhY3RpdmUnKSkgcmV0dXJuXG5cbiAgICB2YXIgJHByZXZpb3VzID0gJHVsLmZpbmQoJy5hY3RpdmU6bGFzdCBhJylcbiAgICB2YXIgaGlkZUV2ZW50ID0gJC5FdmVudCgnaGlkZS5icy50YWInLCB7XG4gICAgICByZWxhdGVkVGFyZ2V0OiAkdGhpc1swXVxuICAgIH0pXG4gICAgdmFyIHNob3dFdmVudCA9ICQuRXZlbnQoJ3Nob3cuYnMudGFiJywge1xuICAgICAgcmVsYXRlZFRhcmdldDogJHByZXZpb3VzWzBdXG4gICAgfSlcblxuICAgICRwcmV2aW91cy50cmlnZ2VyKGhpZGVFdmVudClcbiAgICAkdGhpcy50cmlnZ2VyKHNob3dFdmVudClcblxuICAgIGlmIChzaG93RXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkgfHwgaGlkZUV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpKSByZXR1cm5cblxuICAgIHZhciAkdGFyZ2V0ID0gJChzZWxlY3RvcilcblxuICAgIHRoaXMuYWN0aXZhdGUoJHRoaXMuY2xvc2VzdCgnbGknKSwgJHVsKVxuICAgIHRoaXMuYWN0aXZhdGUoJHRhcmdldCwgJHRhcmdldC5wYXJlbnQoKSwgZnVuY3Rpb24gKCkge1xuICAgICAgJHByZXZpb3VzLnRyaWdnZXIoe1xuICAgICAgICB0eXBlOiAnaGlkZGVuLmJzLnRhYicsXG4gICAgICAgIHJlbGF0ZWRUYXJnZXQ6ICR0aGlzWzBdXG4gICAgICB9KVxuICAgICAgJHRoaXMudHJpZ2dlcih7XG4gICAgICAgIHR5cGU6ICdzaG93bi5icy50YWInLFxuICAgICAgICByZWxhdGVkVGFyZ2V0OiAkcHJldmlvdXNbMF1cbiAgICAgIH0pXG4gICAgfSlcbiAgfVxuXG4gIFRhYi5wcm90b3R5cGUuYWN0aXZhdGUgPSBmdW5jdGlvbiAoZWxlbWVudCwgY29udGFpbmVyLCBjYWxsYmFjaykge1xuICAgIHZhciAkYWN0aXZlICAgID0gY29udGFpbmVyLmZpbmQoJz4gLmFjdGl2ZScpXG4gICAgdmFyIHRyYW5zaXRpb24gPSBjYWxsYmFja1xuICAgICAgJiYgJC5zdXBwb3J0LnRyYW5zaXRpb25cbiAgICAgICYmICgkYWN0aXZlLmxlbmd0aCAmJiAkYWN0aXZlLmhhc0NsYXNzKCdmYWRlJykgfHwgISFjb250YWluZXIuZmluZCgnPiAuZmFkZScpLmxlbmd0aClcblxuICAgIGZ1bmN0aW9uIG5leHQoKSB7XG4gICAgICAkYWN0aXZlXG4gICAgICAgIC5yZW1vdmVDbGFzcygnYWN0aXZlJylcbiAgICAgICAgLmZpbmQoJz4gLmRyb3Bkb3duLW1lbnUgPiAuYWN0aXZlJylcbiAgICAgICAgICAucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpXG4gICAgICAgIC5lbmQoKVxuICAgICAgICAuZmluZCgnW2RhdGEtdG9nZ2xlPVwidGFiXCJdJylcbiAgICAgICAgICAuYXR0cignYXJpYS1leHBhbmRlZCcsIGZhbHNlKVxuXG4gICAgICBlbGVtZW50XG4gICAgICAgIC5hZGRDbGFzcygnYWN0aXZlJylcbiAgICAgICAgLmZpbmQoJ1tkYXRhLXRvZ2dsZT1cInRhYlwiXScpXG4gICAgICAgICAgLmF0dHIoJ2FyaWEtZXhwYW5kZWQnLCB0cnVlKVxuXG4gICAgICBpZiAodHJhbnNpdGlvbikge1xuICAgICAgICBlbGVtZW50WzBdLm9mZnNldFdpZHRoIC8vIHJlZmxvdyBmb3IgdHJhbnNpdGlvblxuICAgICAgICBlbGVtZW50LmFkZENsYXNzKCdpbicpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbGVtZW50LnJlbW92ZUNsYXNzKCdmYWRlJylcbiAgICAgIH1cblxuICAgICAgaWYgKGVsZW1lbnQucGFyZW50KCcuZHJvcGRvd24tbWVudScpLmxlbmd0aCkge1xuICAgICAgICBlbGVtZW50XG4gICAgICAgICAgLmNsb3Nlc3QoJ2xpLmRyb3Bkb3duJylcbiAgICAgICAgICAgIC5hZGRDbGFzcygnYWN0aXZlJylcbiAgICAgICAgICAuZW5kKClcbiAgICAgICAgICAuZmluZCgnW2RhdGEtdG9nZ2xlPVwidGFiXCJdJylcbiAgICAgICAgICAgIC5hdHRyKCdhcmlhLWV4cGFuZGVkJywgdHJ1ZSlcbiAgICAgIH1cblxuICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2soKVxuICAgIH1cblxuICAgICRhY3RpdmUubGVuZ3RoICYmIHRyYW5zaXRpb24gP1xuICAgICAgJGFjdGl2ZVxuICAgICAgICAub25lKCdic1RyYW5zaXRpb25FbmQnLCBuZXh0KVxuICAgICAgICAuZW11bGF0ZVRyYW5zaXRpb25FbmQoVGFiLlRSQU5TSVRJT05fRFVSQVRJT04pIDpcbiAgICAgIG5leHQoKVxuXG4gICAgJGFjdGl2ZS5yZW1vdmVDbGFzcygnaW4nKVxuICB9XG5cblxuICAvLyBUQUIgUExVR0lOIERFRklOSVRJT05cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09XG5cbiAgZnVuY3Rpb24gUGx1Z2luKG9wdGlvbikge1xuICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgdmFyICR0aGlzID0gJCh0aGlzKVxuICAgICAgdmFyIGRhdGEgID0gJHRoaXMuZGF0YSgnYnMudGFiJylcblxuICAgICAgaWYgKCFkYXRhKSAkdGhpcy5kYXRhKCdicy50YWInLCAoZGF0YSA9IG5ldyBUYWIodGhpcykpKVxuICAgICAgaWYgKHR5cGVvZiBvcHRpb24gPT0gJ3N0cmluZycpIGRhdGFbb3B0aW9uXSgpXG4gICAgfSlcbiAgfVxuXG4gIHZhciBvbGQgPSAkLmZuLnRhYlxuXG4gICQuZm4udGFiICAgICAgICAgICAgID0gUGx1Z2luXG4gICQuZm4udGFiLkNvbnN0cnVjdG9yID0gVGFiXG5cblxuICAvLyBUQUIgTk8gQ09ORkxJQ1RcbiAgLy8gPT09PT09PT09PT09PT09XG5cbiAgJC5mbi50YWIubm9Db25mbGljdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAkLmZuLnRhYiA9IG9sZFxuICAgIHJldHVybiB0aGlzXG4gIH1cblxuXG4gIC8vIFRBQiBEQVRBLUFQSVxuICAvLyA9PT09PT09PT09PT1cblxuICB2YXIgY2xpY2tIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICBQbHVnaW4uY2FsbCgkKHRoaXMpLCAnc2hvdycpXG4gIH1cblxuICAkKGRvY3VtZW50KVxuICAgIC5vbignY2xpY2suYnMudGFiLmRhdGEtYXBpJywgJ1tkYXRhLXRvZ2dsZT1cInRhYlwiXScsIGNsaWNrSGFuZGxlcilcbiAgICAub24oJ2NsaWNrLmJzLnRhYi5kYXRhLWFwaScsICdbZGF0YS10b2dnbGU9XCJwaWxsXCJdJywgY2xpY2tIYW5kbGVyKVxuXG59KGpRdWVyeSk7XG5cbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICogQm9vdHN0cmFwOiBhZmZpeC5qcyB2My4zLjdcbiAqIGh0dHA6Ly9nZXRib290c3RyYXAuY29tL2phdmFzY3JpcHQvI2FmZml4XG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIENvcHlyaWdodCAyMDExLTIwMTYgVHdpdHRlciwgSW5jLlxuICogTGljZW5zZWQgdW5kZXIgTUlUIChodHRwczovL2dpdGh1Yi5jb20vdHdicy9ib290c3RyYXAvYmxvYi9tYXN0ZXIvTElDRU5TRSlcbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xuXG5cbitmdW5jdGlvbiAoJCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgLy8gQUZGSVggQ0xBU1MgREVGSU5JVElPTlxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09XG5cbiAgdmFyIEFmZml4ID0gZnVuY3Rpb24gKGVsZW1lbnQsIG9wdGlvbnMpIHtcbiAgICB0aGlzLm9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgQWZmaXguREVGQVVMVFMsIG9wdGlvbnMpXG5cbiAgICB0aGlzLiR0YXJnZXQgPSAkKHRoaXMub3B0aW9ucy50YXJnZXQpXG4gICAgICAub24oJ3Njcm9sbC5icy5hZmZpeC5kYXRhLWFwaScsICQucHJveHkodGhpcy5jaGVja1Bvc2l0aW9uLCB0aGlzKSlcbiAgICAgIC5vbignY2xpY2suYnMuYWZmaXguZGF0YS1hcGknLCAgJC5wcm94eSh0aGlzLmNoZWNrUG9zaXRpb25XaXRoRXZlbnRMb29wLCB0aGlzKSlcblxuICAgIHRoaXMuJGVsZW1lbnQgICAgID0gJChlbGVtZW50KVxuICAgIHRoaXMuYWZmaXhlZCAgICAgID0gbnVsbFxuICAgIHRoaXMudW5waW4gICAgICAgID0gbnVsbFxuICAgIHRoaXMucGlubmVkT2Zmc2V0ID0gbnVsbFxuXG4gICAgdGhpcy5jaGVja1Bvc2l0aW9uKClcbiAgfVxuXG4gIEFmZml4LlZFUlNJT04gID0gJzMuMy43J1xuXG4gIEFmZml4LlJFU0VUICAgID0gJ2FmZml4IGFmZml4LXRvcCBhZmZpeC1ib3R0b20nXG5cbiAgQWZmaXguREVGQVVMVFMgPSB7XG4gICAgb2Zmc2V0OiAwLFxuICAgIHRhcmdldDogd2luZG93XG4gIH1cblxuICBBZmZpeC5wcm90b3R5cGUuZ2V0U3RhdGUgPSBmdW5jdGlvbiAoc2Nyb2xsSGVpZ2h0LCBoZWlnaHQsIG9mZnNldFRvcCwgb2Zmc2V0Qm90dG9tKSB7XG4gICAgdmFyIHNjcm9sbFRvcCAgICA9IHRoaXMuJHRhcmdldC5zY3JvbGxUb3AoKVxuICAgIHZhciBwb3NpdGlvbiAgICAgPSB0aGlzLiRlbGVtZW50Lm9mZnNldCgpXG4gICAgdmFyIHRhcmdldEhlaWdodCA9IHRoaXMuJHRhcmdldC5oZWlnaHQoKVxuXG4gICAgaWYgKG9mZnNldFRvcCAhPSBudWxsICYmIHRoaXMuYWZmaXhlZCA9PSAndG9wJykgcmV0dXJuIHNjcm9sbFRvcCA8IG9mZnNldFRvcCA/ICd0b3AnIDogZmFsc2VcblxuICAgIGlmICh0aGlzLmFmZml4ZWQgPT0gJ2JvdHRvbScpIHtcbiAgICAgIGlmIChvZmZzZXRUb3AgIT0gbnVsbCkgcmV0dXJuIChzY3JvbGxUb3AgKyB0aGlzLnVucGluIDw9IHBvc2l0aW9uLnRvcCkgPyBmYWxzZSA6ICdib3R0b20nXG4gICAgICByZXR1cm4gKHNjcm9sbFRvcCArIHRhcmdldEhlaWdodCA8PSBzY3JvbGxIZWlnaHQgLSBvZmZzZXRCb3R0b20pID8gZmFsc2UgOiAnYm90dG9tJ1xuICAgIH1cblxuICAgIHZhciBpbml0aWFsaXppbmcgICA9IHRoaXMuYWZmaXhlZCA9PSBudWxsXG4gICAgdmFyIGNvbGxpZGVyVG9wICAgID0gaW5pdGlhbGl6aW5nID8gc2Nyb2xsVG9wIDogcG9zaXRpb24udG9wXG4gICAgdmFyIGNvbGxpZGVySGVpZ2h0ID0gaW5pdGlhbGl6aW5nID8gdGFyZ2V0SGVpZ2h0IDogaGVpZ2h0XG5cbiAgICBpZiAob2Zmc2V0VG9wICE9IG51bGwgJiYgc2Nyb2xsVG9wIDw9IG9mZnNldFRvcCkgcmV0dXJuICd0b3AnXG4gICAgaWYgKG9mZnNldEJvdHRvbSAhPSBudWxsICYmIChjb2xsaWRlclRvcCArIGNvbGxpZGVySGVpZ2h0ID49IHNjcm9sbEhlaWdodCAtIG9mZnNldEJvdHRvbSkpIHJldHVybiAnYm90dG9tJ1xuXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBBZmZpeC5wcm90b3R5cGUuZ2V0UGlubmVkT2Zmc2V0ID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLnBpbm5lZE9mZnNldCkgcmV0dXJuIHRoaXMucGlubmVkT2Zmc2V0XG4gICAgdGhpcy4kZWxlbWVudC5yZW1vdmVDbGFzcyhBZmZpeC5SRVNFVCkuYWRkQ2xhc3MoJ2FmZml4JylcbiAgICB2YXIgc2Nyb2xsVG9wID0gdGhpcy4kdGFyZ2V0LnNjcm9sbFRvcCgpXG4gICAgdmFyIHBvc2l0aW9uICA9IHRoaXMuJGVsZW1lbnQub2Zmc2V0KClcbiAgICByZXR1cm4gKHRoaXMucGlubmVkT2Zmc2V0ID0gcG9zaXRpb24udG9wIC0gc2Nyb2xsVG9wKVxuICB9XG5cbiAgQWZmaXgucHJvdG90eXBlLmNoZWNrUG9zaXRpb25XaXRoRXZlbnRMb29wID0gZnVuY3Rpb24gKCkge1xuICAgIHNldFRpbWVvdXQoJC5wcm94eSh0aGlzLmNoZWNrUG9zaXRpb24sIHRoaXMpLCAxKVxuICB9XG5cbiAgQWZmaXgucHJvdG90eXBlLmNoZWNrUG9zaXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCF0aGlzLiRlbGVtZW50LmlzKCc6dmlzaWJsZScpKSByZXR1cm5cblxuICAgIHZhciBoZWlnaHQgICAgICAgPSB0aGlzLiRlbGVtZW50LmhlaWdodCgpXG4gICAgdmFyIG9mZnNldCAgICAgICA9IHRoaXMub3B0aW9ucy5vZmZzZXRcbiAgICB2YXIgb2Zmc2V0VG9wICAgID0gb2Zmc2V0LnRvcFxuICAgIHZhciBvZmZzZXRCb3R0b20gPSBvZmZzZXQuYm90dG9tXG4gICAgdmFyIHNjcm9sbEhlaWdodCA9IE1hdGgubWF4KCQoZG9jdW1lbnQpLmhlaWdodCgpLCAkKGRvY3VtZW50LmJvZHkpLmhlaWdodCgpKVxuXG4gICAgaWYgKHR5cGVvZiBvZmZzZXQgIT0gJ29iamVjdCcpICAgICAgICAgb2Zmc2V0Qm90dG9tID0gb2Zmc2V0VG9wID0gb2Zmc2V0XG4gICAgaWYgKHR5cGVvZiBvZmZzZXRUb3AgPT0gJ2Z1bmN0aW9uJykgICAgb2Zmc2V0VG9wICAgID0gb2Zmc2V0LnRvcCh0aGlzLiRlbGVtZW50KVxuICAgIGlmICh0eXBlb2Ygb2Zmc2V0Qm90dG9tID09ICdmdW5jdGlvbicpIG9mZnNldEJvdHRvbSA9IG9mZnNldC5ib3R0b20odGhpcy4kZWxlbWVudClcblxuICAgIHZhciBhZmZpeCA9IHRoaXMuZ2V0U3RhdGUoc2Nyb2xsSGVpZ2h0LCBoZWlnaHQsIG9mZnNldFRvcCwgb2Zmc2V0Qm90dG9tKVxuXG4gICAgaWYgKHRoaXMuYWZmaXhlZCAhPSBhZmZpeCkge1xuICAgICAgaWYgKHRoaXMudW5waW4gIT0gbnVsbCkgdGhpcy4kZWxlbWVudC5jc3MoJ3RvcCcsICcnKVxuXG4gICAgICB2YXIgYWZmaXhUeXBlID0gJ2FmZml4JyArIChhZmZpeCA/ICctJyArIGFmZml4IDogJycpXG4gICAgICB2YXIgZSAgICAgICAgID0gJC5FdmVudChhZmZpeFR5cGUgKyAnLmJzLmFmZml4JylcblxuICAgICAgdGhpcy4kZWxlbWVudC50cmlnZ2VyKGUpXG5cbiAgICAgIGlmIChlLmlzRGVmYXVsdFByZXZlbnRlZCgpKSByZXR1cm5cblxuICAgICAgdGhpcy5hZmZpeGVkID0gYWZmaXhcbiAgICAgIHRoaXMudW5waW4gPSBhZmZpeCA9PSAnYm90dG9tJyA/IHRoaXMuZ2V0UGlubmVkT2Zmc2V0KCkgOiBudWxsXG5cbiAgICAgIHRoaXMuJGVsZW1lbnRcbiAgICAgICAgLnJlbW92ZUNsYXNzKEFmZml4LlJFU0VUKVxuICAgICAgICAuYWRkQ2xhc3MoYWZmaXhUeXBlKVxuICAgICAgICAudHJpZ2dlcihhZmZpeFR5cGUucmVwbGFjZSgnYWZmaXgnLCAnYWZmaXhlZCcpICsgJy5icy5hZmZpeCcpXG4gICAgfVxuXG4gICAgaWYgKGFmZml4ID09ICdib3R0b20nKSB7XG4gICAgICB0aGlzLiRlbGVtZW50Lm9mZnNldCh7XG4gICAgICAgIHRvcDogc2Nyb2xsSGVpZ2h0IC0gaGVpZ2h0IC0gb2Zmc2V0Qm90dG9tXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG5cbiAgLy8gQUZGSVggUExVR0lOIERFRklOSVRJT05cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT1cblxuICBmdW5jdGlvbiBQbHVnaW4ob3B0aW9uKSB7XG4gICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgJHRoaXMgICA9ICQodGhpcylcbiAgICAgIHZhciBkYXRhICAgID0gJHRoaXMuZGF0YSgnYnMuYWZmaXgnKVxuICAgICAgdmFyIG9wdGlvbnMgPSB0eXBlb2Ygb3B0aW9uID09ICdvYmplY3QnICYmIG9wdGlvblxuXG4gICAgICBpZiAoIWRhdGEpICR0aGlzLmRhdGEoJ2JzLmFmZml4JywgKGRhdGEgPSBuZXcgQWZmaXgodGhpcywgb3B0aW9ucykpKVxuICAgICAgaWYgKHR5cGVvZiBvcHRpb24gPT0gJ3N0cmluZycpIGRhdGFbb3B0aW9uXSgpXG4gICAgfSlcbiAgfVxuXG4gIHZhciBvbGQgPSAkLmZuLmFmZml4XG5cbiAgJC5mbi5hZmZpeCAgICAgICAgICAgICA9IFBsdWdpblxuICAkLmZuLmFmZml4LkNvbnN0cnVjdG9yID0gQWZmaXhcblxuXG4gIC8vIEFGRklYIE5PIENPTkZMSUNUXG4gIC8vID09PT09PT09PT09PT09PT09XG5cbiAgJC5mbi5hZmZpeC5ub0NvbmZsaWN0ID0gZnVuY3Rpb24gKCkge1xuICAgICQuZm4uYWZmaXggPSBvbGRcbiAgICByZXR1cm4gdGhpc1xuICB9XG5cblxuICAvLyBBRkZJWCBEQVRBLUFQSVxuICAvLyA9PT09PT09PT09PT09PVxuXG4gICQod2luZG93KS5vbignbG9hZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAkKCdbZGF0YS1zcHk9XCJhZmZpeFwiXScpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgdmFyICRzcHkgPSAkKHRoaXMpXG4gICAgICB2YXIgZGF0YSA9ICRzcHkuZGF0YSgpXG5cbiAgICAgIGRhdGEub2Zmc2V0ID0gZGF0YS5vZmZzZXQgfHwge31cblxuICAgICAgaWYgKGRhdGEub2Zmc2V0Qm90dG9tICE9IG51bGwpIGRhdGEub2Zmc2V0LmJvdHRvbSA9IGRhdGEub2Zmc2V0Qm90dG9tXG4gICAgICBpZiAoZGF0YS5vZmZzZXRUb3AgICAgIT0gbnVsbCkgZGF0YS5vZmZzZXQudG9wICAgID0gZGF0YS5vZmZzZXRUb3BcblxuICAgICAgUGx1Z2luLmNhbGwoJHNweSwgZGF0YSlcbiAgICB9KVxuICB9KVxuXG59KGpRdWVyeSk7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9ib290c3RyYXAtc2Fzcy9hc3NldHMvamF2YXNjcmlwdHMvYm9vdHN0cmFwLmpzXG4gKiogbW9kdWxlIGlkID0gMlxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIl0sInNvdXJjZVJvb3QiOiIifQ==